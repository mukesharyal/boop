import{r as n,C as M,b as S,j as s}from"./index-GUb0HLa5.js";const _="_inputSpaceContainer_169l5_1",O="_inputOptions_169l5_35",R="_sendImage_169l5_48",u={inputSpaceContainer:_,inputOptions:O,sendImage:R};function N(){const{dataChannel:m}=n.useContext(M),{chatBottom:f,setMessages:x,sentId:o,selectedMessageId:i,replying:a,messages:c,setReplying:I,setSelectedMessageId:E}=n.useContext(S),[d,l]=n.useState(!1),e=n.useRef(null),[r,g]=n.useState(""),v=n.useRef(null);n.useEffect(()=>{a?e.current.focus():e.current.blur()},[a]);const h=t=>{d||l(!0),e.current.style.height="auto",e.current.scrollHeight>e.current.clientHeight&&(e.current.style.height=e.current.scrollHeight/1.5+"px"),g(t.target.value)},C=()=>{l(!1),e.current.style.height="1.5rem"},y=()=>{l(!1),e.current.style.height="1.5rem"},j=()=>{if(r==null||r.trim().length===0)return;const t={type:"text",content:r.trimEnd()},p={sentId:o.current,type:"text",origin:"sent",status:"sending",reaction:null,content:r.trimEnd()};a&&(t.reply={sentId:c[i].receivedId,receivedId:c[i].sentId},p.reply={sentId:c[i].sentId,receivedId:c[i].receivedId},I(!1)),m.current.send(JSON.stringify(t)),x(w=>[...w,p]),o.current=o.current+1,e.current.value="",setTimeout(()=>{f.current.scrollIntoView({behavior:"smooth"})},100),g(null)};return s.jsxs("div",{className:u.inputSpaceContainer,ref:v,children:[s.jsx("div",{className:u.inputOptions,children:d?s.jsx("img",{src:"./next.svg",width:20,height:20,onClick:C,onMouseDown:t=>{t.preventDefault()}}):s.jsxs(s.Fragment,{children:[s.jsx("img",{src:"./files.svg",width:20,height:20}),s.jsx("img",{src:"./photos.svg",width:20,height:20}),s.jsx("img",{src:"./microphone.svg",width:20,height:20})]})}),s.jsx("textarea",{rows:1,placeholder:"Message",onClick:t=>{h(t)},onChange:t=>{h(t)},onBlur:y,ref:e}),s.jsx("img",{src:"./send.svg",width:24,height:24,className:u.sendImage,style:{opacity:r&&r.trim().length!=0?1:.6},onClick:j})]})}export{N as default};
