(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function z6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o1={exports:{}},Ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function q6(){if(S2)return Ml;S2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:e,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Ml.Fragment=t,Ml.jsx=i,Ml.jsxs=i,Ml}var A2;function H6(){return A2||(A2=1,o1.exports=q6()),o1.exports}var S=H6(),l1={exports:{}},Ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function G6(){if(C2)return Ot;C2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,P={};function k(N,et,it){this.props=N,this.context=et,this.refs=P,this.updater=it||R}k.prototype.isReactComponent={},k.prototype.setState=function(N,et){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,et,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function z(){}z.prototype=k.prototype;function F(N,et,it){this.props=N,this.context=et,this.refs=P,this.updater=it||R}var K=F.prototype=new z;K.constructor=F,V(K,k.prototype),K.isPureReactComponent=!0;var rt=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function D(N,et,it,at,gt,ut){return it=ut.ref,{$$typeof:e,type:N,key:et,ref:it!==void 0?it:null,props:ut}}function C(N,et){return D(N.type,et,void 0,void 0,void 0,N.props)}function x(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function L(N){var et={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(it){return et[it]})}var O=/\/+/g;function U(N,et){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):et.toString(36)}function I(){}function Mt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(et){N.status==="pending"&&(N.status="fulfilled",N.value=et)},function(et){N.status==="pending"&&(N.status="rejected",N.reason=et)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Vt(N,et,it,at,gt){var ut=typeof N;(ut==="undefined"||ut==="boolean")&&(N=null);var dt=!1;if(N===null)dt=!0;else switch(ut){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(N.$$typeof){case e:case t:dt=!0;break;case v:return dt=N._init,Vt(dt(N._payload),et,it,at,gt)}}if(dt)return gt=gt(N),dt=at===""?"."+U(N,0):at,rt(gt)?(it="",dt!=null&&(it=dt.replace(O,"$&/")+"/"),Vt(gt,et,it,"",function(re){return re})):gt!=null&&(x(gt)&&(gt=C(gt,it+(gt.key==null||N&&N.key===gt.key?"":(""+gt.key).replace(O,"$&/")+"/")+dt)),et.push(gt)),1;dt=0;var Et=at===""?".":at+":";if(rt(N))for(var Tt=0;Tt<N.length;Tt++)at=N[Tt],ut=Et+U(at,Tt),dt+=Vt(at,et,it,ut,gt);else if(Tt=b(N),typeof Tt=="function")for(N=Tt.call(N),Tt=0;!(at=N.next()).done;)at=at.value,ut=Et+U(at,Tt++),dt+=Vt(at,et,it,ut,gt);else if(ut==="object"){if(typeof N.then=="function")return Vt(Mt(N),et,it,at,gt);throw et=String(N),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return dt}function Z(N,et,it){if(N==null)return N;var at=[],gt=0;return Vt(N,at,"","",function(ut){return et.call(it,ut,gt++)}),at}function ct(N){if(N._status===-1){var et=N._result;et=et(),et.then(function(it){(N._status===0||N._status===-1)&&(N._status=1,N._result=it)},function(it){(N._status===0||N._status===-1)&&(N._status=2,N._result=it)}),N._status===-1&&(N._status=0,N._result=et)}if(N._status===1)return N._result.default;throw N._result}var mt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Rt(){}return Ot.Children={map:Z,forEach:function(N,et,it){Z(N,function(){et.apply(this,arguments)},it)},count:function(N){var et=0;return Z(N,function(){et++}),et},toArray:function(N){return Z(N,function(et){return et})||[]},only:function(N){if(!x(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ot.Component=k,Ot.Fragment=i,Ot.Profiler=o,Ot.PureComponent=F,Ot.StrictMode=r,Ot.Suspense=y,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(N){return W.H.useMemoCache(N)}},Ot.cache=function(N){return function(){return N.apply(null,arguments)}},Ot.cloneElement=function(N,et,it){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var at=V({},N.props),gt=N.key,ut=void 0;if(et!=null)for(dt in et.ref!==void 0&&(ut=void 0),et.key!==void 0&&(gt=""+et.key),et)!Q.call(et,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&et.ref===void 0||(at[dt]=et[dt]);var dt=arguments.length-2;if(dt===1)at.children=it;else if(1<dt){for(var Et=Array(dt),Tt=0;Tt<dt;Tt++)Et[Tt]=arguments[Tt+2];at.children=Et}return D(N.type,gt,void 0,void 0,ut,at)},Ot.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Ot.createElement=function(N,et,it){var at,gt={},ut=null;if(et!=null)for(at in et.key!==void 0&&(ut=""+et.key),et)Q.call(et,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(gt[at]=et[at]);var dt=arguments.length-2;if(dt===1)gt.children=it;else if(1<dt){for(var Et=Array(dt),Tt=0;Tt<dt;Tt++)Et[Tt]=arguments[Tt+2];gt.children=Et}if(N&&N.defaultProps)for(at in dt=N.defaultProps,dt)gt[at]===void 0&&(gt[at]=dt[at]);return D(N,ut,void 0,void 0,null,gt)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(N){return{$$typeof:m,render:N}},Ot.isValidElement=x,Ot.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:ct}},Ot.memo=function(N,et){return{$$typeof:g,type:N,compare:et===void 0?null:et}},Ot.startTransition=function(N){var et=W.T,it={};W.T=it;try{var at=N(),gt=W.S;gt!==null&&gt(it,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(Rt,mt)}catch(ut){mt(ut)}finally{W.T=et}},Ot.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ot.use=function(N){return W.H.use(N)},Ot.useActionState=function(N,et,it){return W.H.useActionState(N,et,it)},Ot.useCallback=function(N,et){return W.H.useCallback(N,et)},Ot.useContext=function(N){return W.H.useContext(N)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(N,et){return W.H.useDeferredValue(N,et)},Ot.useEffect=function(N,et,it){var at=W.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(N,et)},Ot.useId=function(){return W.H.useId()},Ot.useImperativeHandle=function(N,et,it){return W.H.useImperativeHandle(N,et,it)},Ot.useInsertionEffect=function(N,et){return W.H.useInsertionEffect(N,et)},Ot.useLayoutEffect=function(N,et){return W.H.useLayoutEffect(N,et)},Ot.useMemo=function(N,et){return W.H.useMemo(N,et)},Ot.useOptimistic=function(N,et){return W.H.useOptimistic(N,et)},Ot.useReducer=function(N,et,it){return W.H.useReducer(N,et,it)},Ot.useRef=function(N){return W.H.useRef(N)},Ot.useState=function(N){return W.H.useState(N)},Ot.useSyncExternalStore=function(N,et,it){return W.H.useSyncExternalStore(N,et,it)},Ot.useTransition=function(){return W.H.useTransition()},Ot.version="19.1.0",Ot}var R2;function Vh(){return R2||(R2=1,l1.exports=G6()),l1.exports}var X=Vh();const Xr=z6(X);var u1={exports:{}},Vl={},c1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function F6(){return x2||(x2=1,function(e){function t(Z,ct){var mt=Z.length;Z.push(ct);t:for(;0<mt;){var Rt=mt-1>>>1,N=Z[Rt];if(0<o(N,ct))Z[Rt]=ct,Z[mt]=N,mt=Rt;else break t}}function i(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ct=Z[0],mt=Z.pop();if(mt!==ct){Z[0]=mt;t:for(var Rt=0,N=Z.length,et=N>>>1;Rt<et;){var it=2*(Rt+1)-1,at=Z[it],gt=it+1,ut=Z[gt];if(0>o(at,mt))gt<N&&0>o(ut,at)?(Z[Rt]=ut,Z[gt]=mt,Rt=gt):(Z[Rt]=at,Z[it]=mt,Rt=it);else if(gt<N&&0>o(ut,mt))Z[Rt]=ut,Z[gt]=mt,Rt=gt;else break t}}return ct}function o(Z,ct){var mt=Z.sortIndex-ct.sortIndex;return mt!==0?mt:Z.id-ct.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();e.unstable_now=function(){return f.now()-m}}var y=[],g=[],v=1,T=null,b=3,R=!1,V=!1,P=!1,k=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function rt(Z){for(var ct=i(g);ct!==null;){if(ct.callback===null)r(g);else if(ct.startTime<=Z)r(g),ct.sortIndex=ct.expirationTime,t(y,ct);else break;ct=i(g)}}function W(Z){if(P=!1,rt(Z),!V)if(i(y)!==null)V=!0,Q||(Q=!0,U());else{var ct=i(g);ct!==null&&Vt(W,ct.startTime-Z)}}var Q=!1,D=-1,C=5,x=-1;function L(){return k?!0:!(e.unstable_now()-x<C)}function O(){if(k=!1,Q){var Z=e.unstable_now();x=Z;var ct=!0;try{t:{V=!1,P&&(P=!1,F(D),D=-1),R=!0;var mt=b;try{e:{for(rt(Z),T=i(y);T!==null&&!(T.expirationTime>Z&&L());){var Rt=T.callback;if(typeof Rt=="function"){T.callback=null,b=T.priorityLevel;var N=Rt(T.expirationTime<=Z);if(Z=e.unstable_now(),typeof N=="function"){T.callback=N,rt(Z),ct=!0;break e}T===i(y)&&r(y),rt(Z)}else r(y);T=i(y)}if(T!==null)ct=!0;else{var et=i(g);et!==null&&Vt(W,et.startTime-Z),ct=!1}}break t}finally{T=null,b=mt,R=!1}ct=void 0}}finally{ct?U():Q=!1}}}var U;if(typeof K=="function")U=function(){K(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Mt=I.port2;I.port1.onmessage=O,U=function(){Mt.postMessage(null)}}else U=function(){z(O,0)};function Vt(Z,ct){D=z(function(){Z(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var ct=3;break;default:ct=b}var mt=b;b=ct;try{return Z()}finally{b=mt}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(Z,ct){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var mt=b;b=Z;try{return ct()}finally{b=mt}},e.unstable_scheduleCallback=function(Z,ct,mt){var Rt=e.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?Rt+mt:Rt):mt=Rt,Z){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=mt+N,Z={id:v++,callback:ct,priorityLevel:Z,startTime:mt,expirationTime:N,sortIndex:-1},mt>Rt?(Z.sortIndex=mt,t(g,Z),i(y)===null&&Z===i(g)&&(P?(F(D),D=-1):P=!0,Vt(W,mt-Rt))):(Z.sortIndex=N,t(y,Z),V||R||(V=!0,Q||(Q=!0,U()))),Z},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Z){var ct=b;return function(){var mt=b;b=ct;try{return Z.apply(this,arguments)}finally{b=mt}}}}(h1)),h1}var I2;function Q6(){return I2||(I2=1,c1.exports=F6()),c1.exports}var f1={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function Y6(){if(D2)return ln;D2=1;var e=Vh();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:y,containerInfo:g,implementation:v}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ln.createPortal=function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,v)},ln.flushSync=function(y){var g=f.T,v=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=v,r.d.f()}},ln.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},ln.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},ln.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var v=g.as,T=m(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:R}):v==="script"&&r.d.X(y,{crossOrigin:T,integrity:b,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ln.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},ln.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=m(v,g.crossOrigin);r.d.L(y,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ln.preloadModule=function(y,g){if(typeof y=="string")if(g){var v=m(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},ln.requestFormReset=function(y){r.d.r(y)},ln.unstable_batchedUpdates=function(y,g){return y(g)},ln.useFormState=function(y,g,v){return f.H.useFormState(y,g,v)},ln.useFormStatus=function(){return f.H.useHostTransitionStatus()},ln.version="19.1.0",ln}var M2;function D_(){if(M2)return f1.exports;M2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),f1.exports=Y6(),f1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function K6(){if(V2)return Vl;V2=1;var e=Q6(),t=Vh(),i=D_();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function f(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function y(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),n;if(d===l)return m(h),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,w=h.child;w;){if(w===a){E=!0,a=h,l=d;break}if(w===l){E=!0,l=h,a=d;break}w=w.sibling}if(!E){for(w=d.child;w;){if(w===a){E=!0,a=d,l=h;break}if(w===l){E=!0,l=d,a=h;break}w=w.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),K=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function Mt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case k:return"Profiler";case P:return"StrictMode";case W:return"Suspense";case Q:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case K:return(n.displayName||"Context")+".Provider";case F:return(n._context.displayName||"Context")+".Consumer";case rt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:Mt(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return Mt(n(s))}catch{}}return null}var Vt=Array.isArray,Z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Rt=[],N=-1;function et(n){return{current:n}}function it(n){0>N||(n.current=Rt[N],Rt[N]=null,N--)}function at(n,s){N++,Rt[N]=n.current,n.current=s}var gt=et(null),ut=et(null),dt=et(null),Et=et(null);function Tt(n,s){switch(at(dt,s),at(ut,n),at(gt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Jp(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Jp(s),n=Wp(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}it(gt),at(gt,n)}function re(){it(gt),it(ut),it(dt)}function Se(n){n.memoizedState!==null&&at(Et,n);var s=gt.current,a=Wp(s,n.type);s!==a&&(at(ut,n),at(gt,a))}function ge(n){ut.current===n&&(it(gt),it(ut)),Et.current===n&&(it(Et),Cl._currentValue=mt)}var fn=Object.prototype.hasOwnProperty,Be=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,dn=e.unstable_shouldYield,_n=e.unstable_requestPaint,Ae=e.unstable_now,xn=e.unstable_getCurrentPriorityLevel,sn=e.unstable_ImmediatePriority,ze=e.unstable_UserBlockingPriority,zn=e.unstable_NormalPriority,vn=e.unstable_LowPriority,rn=e.unstable_IdlePriority,di=e.log,ra=e.unstable_setDisableYieldValue,pe=null,Zt=null;function In(n){if(typeof di=="function"&&ra(n),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(pe,n)}catch{}}var an=Math.clz32?Math.clz32:gr,wu=Math.log,uf=Math.LN2;function gr(n){return n>>>=0,n===0?32:31-(wu(n)/uf|0)|0}var pr=256,yr=4194304;function si(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function aa(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var h=0,d=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~d,l!==0?h=si(l):(E&=w,E!==0?h=si(E):a||(a=w&~n,a!==0&&(h=si(a))))):(w=l&~d,w!==0?h=si(w):E!==0?h=si(E):a||(a=l&~n,a!==0&&(h=si(a)))),h===0?0:s!==0&&s!==h&&(s&d)===0&&(d=h&-h,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:h}function _r(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Co(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ro(){var n=pr;return pr<<=1,(pr&4194048)===0&&(pr=256),n}function xo(){var n=yr;return yr<<=1,(yr&62914560)===0&&(yr=4194304),n}function Bi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function zi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Io(n,s,a,l,h,d){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,M=n.expirationTimes,G=n.hiddenUpdates;for(a=E&~a;0<a;){var tt=31-an(a),st=1<<tt;w[tt]=0,M[tt]=-1;var Y=G[tt];if(Y!==null)for(G[tt]=null,tt=0;tt<Y.length;tt++){var $=Y[tt];$!==null&&($.lane&=-536870913)}a&=~st}l!==0&&mi(n,l,0),d!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=d&~(E&~s))}function mi(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-an(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Do(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-an(a),h=1<<l;h&s|n[l]&s&&(n[l]|=s),a&=~h}}function Es(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function oa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ts(){var n=ct.p;return n!==0?n:(n=window.event,n===void 0?32:_2(n.type))}function Su(n,s){var a=ct.p;try{return ct.p=n,s()}finally{ct.p=a}}var ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+ue,Ce="__reactProps$"+ue,qn="__reactContainer$"+ue,Mo="__reactEvents$"+ue,cf="__reactListeners$"+ue,bs="__reactHandles$"+ue,Au="__reactResources$"+ue,vr="__reactMarker$"+ue;function ws(n){delete n[Ve],delete n[Ce],delete n[Mo],delete n[cf],delete n[bs]}function qi(n){var s=n[Ve];if(s)return s;for(var a=n.parentNode;a;){if(s=a[qn]||a[Ve]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=i2(n);n!==null;){if(a=n[Ve])return a;n=i2(n)}return s}n=a,a=n.parentNode}return null}function gi(n){if(n=n[Ve]||n[qn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function pi(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function mn(n){var s=n[Au];return s||(s=n[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ve(n){n[vr]=!0}var Vo=new Set,la={};function ri(n,s){Hi(n,s),Hi(n+"Capture",s)}function Hi(n,s){for(la[n]=s,n=0;n<s.length;n++)Vo.add(s[n])}var Cu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ru={},Er={};function xu(n){return fn.call(Er,n)?!0:fn.call(Ru,n)?!1:Cu.test(n)?Er[n]=!0:(Ru[n]=!0,!1)}function Ss(n,s,a){if(xu(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function yi(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function $e(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}var Tr,Iu;function Gi(n){if(Tr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Tr=s&&s[1]||"",Iu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tr+n+Iu}var ua=!1;function ca(n,s){if(!n||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch($){var Y=$}Reflect.construct(n,[],st)}else{try{st.call()}catch($){Y=$}n.call(st.prototype)}}else{try{throw Error()}catch($){Y=$}(st=n())&&typeof st.catch=="function"&&st.catch(function(){})}}catch($){if($&&Y&&typeof $.stack=="string")return[$.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],w=d[1];if(E&&w){var M=E.split(`
`),G=w.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===G.length)for(l=M.length-1,h=G.length-1;1<=l&&0<=h&&M[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==G[h]){var tt=`
`+M[l].replace(" at new "," at ");return n.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",n.displayName)),tt}while(1<=l&&0<=h);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Gi(a):""}function No(n){switch(n.tag){case 26:case 27:case 5:return Gi(n.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 15:return ca(n.type,!1);case 11:return ca(n.type.render,!1);case 1:return ca(n.type,!0);case 31:return Gi("Activity");default:return""}}function ha(n){try{var s="";do s+=No(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oo(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hf(n){var s=Oo(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function fa(n){n._valueTracker||(n._valueTracker=hf(n))}function Lo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=Oo(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function br(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ff=/[\n"\\]/g;function Re(n){return n.replace(ff,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Dn(n,s,a,l,h,d,E,w){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+gn(s)):n.value!==""+gn(s)&&(n.value=""+gn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?As(n,E,gn(s)):a!=null?As(n,E,gn(a)):l!=null&&n.removeAttribute("value"),h==null&&d!=null&&(n.defaultChecked=!!d),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+gn(w):n.removeAttribute("name")}function wr(n,s,a,l,h,d,E,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null))return;a=a!=null?""+gn(a):"",s=s!=null?""+gn(s):a,w||s===n.value||(n.value=s),n.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function As(n,s,a){s==="number"&&br(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Fi(n,s,a,l){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&l&&(n[a].defaultSelected=!0)}else{for(a=""+gn(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,l&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function te(n,s,a){if(s!=null&&(s=""+gn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+gn(a):""}function Sr(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Vt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=gn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Hn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Ar=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Du(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||Ar.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function ko(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Du(n,h,l)}else for(var d in s)s.hasOwnProperty(d)&&Du(n,d,s[d])}function jo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(n){return mf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Qi=null;function Gn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Yi=null,Ki=null;function Po(n){var s=gi(n);if(s&&(n=s.stateNode)){var a=n[Ce]||null;t:switch(n=s.stateNode,s.type){case"input":if(Dn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Re(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var h=l[Ce]||null;if(!h)throw Error(r(90));Dn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&Lo(l)}break t;case"textarea":te(n,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Fi(n,!!a.multiple,s,!1)}}}var _i=!1;function Mu(n,s,a){if(_i)return n(s,a);_i=!0;try{var l=n(s);return l}finally{if(_i=!1,(Yi!==null||Ki!==null)&&(Sc(),Yi&&(s=Yi,n=Ki,Ki=Yi=null,Po(s),n)))for(s=0;s<n.length;s++)Po(n[s])}}function Cr(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Ce]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fn=!1;if(ai)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{Fn=!1}var vi=null,Cs=null,$i=null;function Uo(){if($i)return $i;var n,s=Cs,a=s.length,l,h="value"in vi?vi.value:vi.textContent,d=h.length;for(n=0;n<a&&s[n]===h[n];n++);var E=a-n;for(l=1;l<=E&&s[a-l]===h[d-l];l++);return $i=h.slice(n,1<l?1-l:void 0)}function Ei(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ti(){return!0}function Bo(){return!1}function qe(n){function s(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ti:Bo,this.isPropagationStopped=Bo,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),s}var $t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=qe($t),xr=v({},$t,{view:0,detail:0}),Vu=qe(xr),ga,pa,bi,Ir=v({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bi&&(bi&&n.type==="mousemove"?(ga=n.screenX-bi.screenX,pa=n.screenY-bi.screenY):pa=ga=0,bi=n),ga)},movementY:function(n){return"movementY"in n?n.movementY:pa}}),Qn=qe(Ir),Nu=v({},Ir,{dataTransfer:0}),gf=qe(Nu),Dr=v({},xr,{relatedTarget:0}),ya=qe(Dr),zo=v({},$t,{animationName:0,elapsedTime:0,pseudoElement:0}),_a=qe(zo),Ou=v({},$t,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),va=qe(Ou),pf=v({},$t,{data:0}),qo=qe(pf),Mr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ho(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ku[n])?!!s[n]:!1}function Vr(){return Ho}var ju=v({},xr,{key:function(n){if(n.key){var s=Mr[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ei(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Lu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(n){return n.type==="keypress"?Ei(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ei(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ea=qe(ju),Pu=v({},Ir,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Go=qe(Pu),Xi=v({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),Uu=qe(Xi),Bu=v({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0}),zu=qe(Bu),qu=v({},Ir,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ta=qe(qu),pn=v({},$t,{newState:0,oldState:0}),Hu=qe(pn),Gu=[9,13,27,32],wi=ai&&"CompositionEvent"in window,c=null;ai&&"documentMode"in document&&(c=document.documentMode);var p=ai&&"TextEvent"in window&&!c,_=ai&&(!wi||c&&8<c&&11>=c),A=" ",q=!1;function J(n,s){switch(n){case"keyup":return Gu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ft(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qt=!1;function Ne(n,s){switch(n){case"compositionend":return ft(s);case"keypress":return s.which!==32?null:(q=!0,A);case"textInput":return n=s.data,n===A&&q?null:n;default:return null}}function Ht(n,s){if(qt)return n==="compositionend"||!wi&&J(n,s)?(n=Uo(),$i=Cs=vi=null,qt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _&&s.locale!=="ko"?null:s.data;default:return null}}var He={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oe(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!He[n.type]:s==="textarea"}function Zi(n,s,a,l){Yi?Ki?Ki.push(l):Ki=[l]:Yi=l,s=Dc(s,"onChange"),0<s.length&&(a=new ma("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var Xe=null,Si=null;function Fo(n){Yp(n,0)}function Fu(n){var s=pi(n);if(Lo(s))return n}function mg(n,s){if(n==="change")return s}var gg=!1;if(ai){var yf;if(ai){var _f="oninput"in document;if(!_f){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),_f=typeof pg.oninput=="function"}yf=_f}else yf=!1;gg=yf&&(!document.documentMode||9<document.documentMode)}function yg(){Xe&&(Xe.detachEvent("onpropertychange",_g),Si=Xe=null)}function _g(n){if(n.propertyName==="value"&&Fu(Si)){var s=[];Zi(s,Si,n,Gn(n)),Mu(Fo,s)}}function y4(n,s,a){n==="focusin"?(yg(),Xe=s,Si=a,Xe.attachEvent("onpropertychange",_g)):n==="focusout"&&yg()}function _4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fu(Si)}function v4(n,s){if(n==="click")return Fu(s)}function E4(n,s){if(n==="input"||n==="change")return Fu(s)}function T4(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Mn=typeof Object.is=="function"?Object.is:T4;function Qo(n,s){if(Mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!fn.call(s,h)||!Mn(n[h],s[h]))return!1}return!0}function vg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Eg(n,s){var a=vg(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=vg(a)}}function Tg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Tg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function bg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=br(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=br(n.document)}return s}function vf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var b4=ai&&"documentMode"in document&&11>=document.documentMode,ba=null,Ef=null,Yo=null,Tf=!1;function wg(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tf||ba==null||ba!==br(l)||(l=ba,"selectionStart"in l&&vf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Yo&&Qo(Yo,l)||(Yo=l,l=Dc(Ef,"onSelect"),0<l.length&&(s=new ma("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=ba)))}function Nr(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var wa={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionrun:Nr("Transition","TransitionRun"),transitionstart:Nr("Transition","TransitionStart"),transitioncancel:Nr("Transition","TransitionCancel"),transitionend:Nr("Transition","TransitionEnd")},bf={},Sg={};ai&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function Or(n){if(bf[n])return bf[n];if(!wa[n])return n;var s=wa[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Sg)return bf[n]=s[a];return n}var Ag=Or("animationend"),Cg=Or("animationiteration"),Rg=Or("animationstart"),w4=Or("transitionrun"),S4=Or("transitionstart"),A4=Or("transitioncancel"),xg=Or("transitionend"),Ig=new Map,wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wf.push("scrollEnd");function oi(n,s){Ig.set(n,s),ri(s,[n])}var Dg=new WeakMap;function Yn(n,s){if(typeof n=="object"&&n!==null){var a=Dg.get(n);return a!==void 0?a:(s={value:n,source:s,stack:ha(s)},Dg.set(n,s),s)}return{value:n,source:s,stack:ha(s)}}var Kn=[],Sa=0,Sf=0;function Qu(){for(var n=Sa,s=Sf=Sa=0;s<n;){var a=Kn[s];Kn[s++]=null;var l=Kn[s];Kn[s++]=null;var h=Kn[s];Kn[s++]=null;var d=Kn[s];if(Kn[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&Mg(a,h,d)}}function Yu(n,s,a,l){Kn[Sa++]=n,Kn[Sa++]=s,Kn[Sa++]=a,Kn[Sa++]=l,Sf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Af(n,s,a,l){return Yu(n,s,a,l),Ku(n)}function Aa(n,s){return Yu(n,null,null,s),Ku(n)}function Mg(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(h=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,h&&s!==null&&(h=31-an(a),n=d.hiddenUpdates,l=n[h],l===null?n[h]=[s]:l.push(s),s.lane=a|536870912),d):null}function Ku(n){if(50<_l)throw _l=0,Md=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ca={};function C4(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(n,s,a,l){return new C4(n,s,a,l)}function Cf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ji(n,s){var a=n.alternate;return a===null?(a=Vn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Vg(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function $u(n,s,a,l,h,d){var E=0;if(l=n,typeof n=="function")Cf(n)&&(E=1);else if(typeof n=="string")E=x6(n,a,gt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case x:return n=Vn(31,a,s,h),n.elementType=x,n.lanes=d,n;case V:return Lr(a.children,h,d,s);case P:E=8,h|=24;break;case k:return n=Vn(12,a,s,h|2),n.elementType=k,n.lanes=d,n;case W:return n=Vn(13,a,s,h),n.elementType=W,n.lanes=d,n;case Q:return n=Vn(19,a,s,h),n.elementType=Q,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z:case K:E=10;break t;case F:E=9;break t;case rt:E=11;break t;case D:E=14;break t;case C:E=16,l=null;break t}E=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=Vn(E,a,s,h),s.elementType=n,s.type=l,s.lanes=d,s}function Lr(n,s,a,l){return n=Vn(7,n,l,s),n.lanes=a,n}function Rf(n,s,a){return n=Vn(6,n,null,s),n.lanes=a,n}function xf(n,s,a){return s=Vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ra=[],xa=0,Xu=null,Zu=0,$n=[],Xn=0,kr=null,Wi=1,ts="";function jr(n,s){Ra[xa++]=Zu,Ra[xa++]=Xu,Xu=n,Zu=s}function Ng(n,s,a){$n[Xn++]=Wi,$n[Xn++]=ts,$n[Xn++]=kr,kr=n;var l=Wi;n=ts;var h=32-an(l)-1;l&=~(1<<h),a+=1;var d=32-an(s)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,Wi=1<<32-an(s)+h|a<<h|l,ts=d+n}else Wi=1<<d|a<<h|l,ts=n}function If(n){n.return!==null&&(jr(n,1),Ng(n,1,0))}function Df(n){for(;n===Xu;)Xu=Ra[--xa],Ra[xa]=null,Zu=Ra[--xa],Ra[xa]=null;for(;n===kr;)kr=$n[--Xn],$n[Xn]=null,ts=$n[--Xn],$n[Xn]=null,Wi=$n[--Xn],$n[Xn]=null}var yn=null,ye=null,Kt=!1,Pr=null,Ai=!1,Mf=Error(r(519));function Ur(n){var s=Error(r(418,""));throw Xo(Yn(s,n)),Mf}function Og(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Ve]=n,s[Ce]=l,a){case"dialog":Ut("cancel",s),Ut("close",s);break;case"iframe":case"object":case"embed":Ut("load",s);break;case"video":case"audio":for(a=0;a<El.length;a++)Ut(El[a],s);break;case"source":Ut("error",s);break;case"img":case"image":case"link":Ut("error",s),Ut("load",s);break;case"details":Ut("toggle",s);break;case"input":Ut("invalid",s),wr(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),fa(s);break;case"select":Ut("invalid",s);break;case"textarea":Ut("invalid",s),Sr(s,l.value,l.defaultValue,l.children),fa(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Zp(s.textContent,a)?(l.popover!=null&&(Ut("beforetoggle",s),Ut("toggle",s)),l.onScroll!=null&&Ut("scroll",s),l.onScrollEnd!=null&&Ut("scrollend",s),l.onClick!=null&&(s.onclick=Mc),s=!0):s=!1,s||Ur(n)}function Lg(n){for(yn=n.return;yn;)switch(yn.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:yn=yn.return}}function Ko(n){if(n!==yn)return!1;if(!Kt)return Lg(n),Kt=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Yd(n.type,n.memoizedProps)),a=!a),a&&ye&&Ur(n),Lg(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){ye=ui(n.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}ye=null}}else s===27?(s=ye,qs(n.type)?(n=Zd,Zd=null,ye=n):ye=s):ye=yn?ui(n.stateNode.nextSibling):null;return!0}function $o(){ye=yn=null,Kt=!1}function kg(){var n=Pr;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),Pr=null),n}function Xo(n){Pr===null?Pr=[n]:Pr.push(n)}var Vf=et(null),Br=null,es=null;function Rs(n,s,a){at(Vf,s._currentValue),s._currentValue=a}function ns(n){n._currentValue=Vf.current,it(Vf)}function Nf(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Of(n,s,a,l){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;t:for(;d!==null;){var w=d;d=h;for(var M=0;M<s.length;M++)if(w.context===s[M]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),Nf(d.return,a,n),l||(E=null);break t}d=w.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Nf(E,a,n),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===n){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Zo(n,s,a,l){n=null;for(var h=s,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var w=h.type;Mn(h.pendingProps.value,E.value)||(n!==null?n.push(w):n=[w])}}else if(h===Et.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(Cl):n=[Cl])}h=h.return}n!==null&&Of(s,n,a,l),s.flags|=262144}function Ju(n){for(n=n.firstContext;n!==null;){if(!Mn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function zr(n){Br=n,es=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function on(n){return jg(Br,n)}function Wu(n,s){return Br===null&&zr(n),jg(n,s)}function jg(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},es===null){if(n===null)throw Error(r(308));es=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else es=es.next=s;return a}var R4=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},x4=e.unstable_scheduleCallback,I4=e.unstable_NormalPriority,Le={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lf(){return{controller:new R4,data:new Map,refCount:0}}function Jo(n){n.refCount--,n.refCount===0&&x4(I4,function(){n.controller.abort()})}var Wo=null,kf=0,Ia=0,Da=null;function D4(n,s){if(Wo===null){var a=Wo=[];kf=0,Ia=Pd(),Da={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kf++,s.then(Pg,Pg),s}function Pg(){if(--kf===0&&Wo!==null){Da!==null&&(Da.status="fulfilled");var n=Wo;Wo=null,Ia=0,Da=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function M4(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ug=Z.S;Z.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&D4(n,s),Ug!==null&&Ug(n,s)};var qr=et(null);function jf(){var n=qr.current;return n!==null?n:oe.pooledCache}function tc(n,s){s===null?at(qr,qr.current):at(qr,s.pool)}function Bg(){var n=jf();return n===null?null:{parent:Le._currentValue,pool:n}}var tl=Error(r(460)),zg=Error(r(474)),ec=Error(r(542)),Pf={then:function(){}};function qg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function nc(){}function Hg(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(nc,nc),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Fg(n),n;default:if(typeof s.status=="string")s.then(nc,nc);else{if(n=oe,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Fg(n),n}throw el=s,tl}}var el=null;function Gg(){if(el===null)throw Error(r(459));var n=el;return el=null,n}function Fg(n){if(n===tl||n===ec)throw Error(r(483))}var xs=!1;function Uf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Is(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ds(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Jt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=Ku(n),Mg(n,null,a),s}return Yu(n,l,s,a),Ku(n)}function nl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Do(n,a)}}function zf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=s:d=d.next=s}else h=d=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var qf=!1;function il(){if(qf){var n=Da;if(n!==null)throw n}}function sl(n,s,a,l){qf=!1;var h=n.updateQueue;xs=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var M=w,G=M.next;M.next=null,E===null?d=G:E.next=G,E=M;var tt=n.alternate;tt!==null&&(tt=tt.updateQueue,w=tt.lastBaseUpdate,w!==E&&(w===null?tt.firstBaseUpdate=G:w.next=G,tt.lastBaseUpdate=M))}if(d!==null){var st=h.baseState;E=0,tt=G=M=null,w=d;do{var Y=w.lane&-536870913,$=Y!==w.lane;if($?(Gt&Y)===Y:(l&Y)===Y){Y!==0&&Y===Ia&&(qf=!0),tt!==null&&(tt=tt.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var Ct=n,wt=w;Y=s;var ie=a;switch(wt.tag){case 1:if(Ct=wt.payload,typeof Ct=="function"){st=Ct.call(ie,st,Y);break t}st=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=wt.payload,Y=typeof Ct=="function"?Ct.call(ie,st,Y):Ct,Y==null)break t;st=v({},st,Y);break t;case 2:xs=!0}}Y=w.callback,Y!==null&&(n.flags|=64,$&&(n.flags|=8192),$=h.callbacks,$===null?h.callbacks=[Y]:$.push(Y))}else $={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},tt===null?(G=tt=$,M=st):tt=tt.next=$,E|=Y;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;$=w,w=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);tt===null&&(M=st),h.baseState=M,h.firstBaseUpdate=G,h.lastBaseUpdate=tt,d===null&&(h.shared.lanes=0),Ps|=E,n.lanes=E,n.memoizedState=st}}function Qg(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Yg(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Qg(a[n],s)}var Ma=et(null),ic=et(0);function Kg(n,s){n=us,at(ic,n),at(Ma,s),us=n|s.baseLanes}function Hf(){at(ic,us),at(Ma,Ma.current)}function Gf(){us=ic.current,it(Ma),it(ic)}var Ms=0,Lt=null,ee=null,xe=null,sc=!1,Va=!1,Hr=!1,rc=0,rl=0,Na=null,V4=0;function Ee(){throw Error(r(321))}function Ff(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Mn(n[a],s[a]))return!1;return!0}function Qf(n,s,a,l,h,d){return Ms=d,Lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Z.H=n===null||n.memoizedState===null?M0:V0,Hr=!1,d=a(l,h),Hr=!1,Va&&(d=Xg(s,a,l,h)),$g(n),d}function $g(n){Z.H=hc;var s=ee!==null&&ee.next!==null;if(Ms=0,xe=ee=Lt=null,sc=!1,rl=0,Na=null,s)throw Error(r(300));n===null||Ge||(n=n.dependencies,n!==null&&Ju(n)&&(Ge=!0))}function Xg(n,s,a,l){Lt=n;var h=0;do{if(Va&&(Na=null),rl=0,Va=!1,25<=h)throw Error(r(301));if(h+=1,xe=ee=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Z.H=U4,d=s(a,l)}while(Va);return d}function N4(){var n=Z.H,s=n.useState()[0];return s=typeof s.then=="function"?al(s):s,n=n.useState()[0],(ee!==null?ee.memoizedState:null)!==n&&(Lt.flags|=1024),s}function Yf(){var n=rc!==0;return rc=0,n}function Kf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function $f(n){if(sc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}sc=!1}Ms=0,xe=ee=Lt=null,Va=!1,rl=rc=0,Na=null}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?Lt.memoizedState=xe=n:xe=xe.next=n,xe}function Ie(){if(ee===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=ee.next;var s=xe===null?Lt.memoizedState:xe.next;if(s!==null)xe=s,ee=n;else{if(n===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));ee=n,n={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},xe===null?Lt.memoizedState=xe=n:xe=xe.next=n}return xe}function Xf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(n){var s=rl;return rl+=1,Na===null&&(Na=[]),n=Hg(Na,n,s),s=Lt,(xe===null?s.memoizedState:xe.next)===null&&(s=s.alternate,Z.H=s===null||s.memoizedState===null?M0:V0),n}function ac(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return al(n);if(n.$$typeof===K)return on(n)}throw Error(r(438,String(n)))}function Zf(n){var s=null,a=Lt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Lt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Xf(),Lt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=L;return s.index++,a}function is(n,s){return typeof s=="function"?s(n):s}function oc(n){var s=Ie();return Jf(s,ee,n)}function Jf(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=n.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}s.baseQueue=h=d,l.pending=null}if(d=n.baseState,h===null)n.memoizedState=d;else{s=h.next;var w=E=null,M=null,G=s,tt=!1;do{var st=G.lane&-536870913;if(st!==G.lane?(Gt&st)===st:(Ms&st)===st){var Y=G.revertLane;if(Y===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),st===Ia&&(tt=!0);else if((Ms&Y)===Y){G=G.next,Y===Ia&&(tt=!0);continue}else st={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(w=M=st,E=d):M=M.next=st,Lt.lanes|=Y,Ps|=Y;st=G.action,Hr&&a(d,st),d=G.hasEagerState?G.eagerState:a(d,st)}else Y={lane:st,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(w=M=Y,E=d):M=M.next=Y,Lt.lanes|=st,Ps|=st;G=G.next}while(G!==null&&G!==s);if(M===null?E=d:M.next=w,!Mn(d,n.memoizedState)&&(Ge=!0,tt&&(a=Da,a!==null)))throw a;n.memoizedState=d,n.baseState=E,n.baseQueue=M,l.lastRenderedState=d}return h===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Wf(n){var s=Ie(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,h=a.pending,d=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=n(d,E.action),E=E.next;while(E!==h);Mn(d,s.memoizedState)||(Ge=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function Zg(n,s,a){var l=Lt,h=Ie(),d=Kt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var E=!Mn((ee||h).memoizedState,a);E&&(h.memoizedState=a,Ge=!0),h=h.queue;var w=t0.bind(null,l,h,n);if(ol(2048,8,w,[n]),h.getSnapshot!==s||E||xe!==null&&xe.memoizedState.tag&1){if(l.flags|=2048,Oa(9,lc(),Wg.bind(null,l,h,a,s),null),oe===null)throw Error(r(349));d||(Ms&124)!==0||Jg(l,s,a)}return a}function Jg(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Lt.updateQueue,s===null?(s=Xf(),Lt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Wg(n,s,a,l){s.value=a,s.getSnapshot=l,e0(s)&&n0(n)}function t0(n,s,a){return a(function(){e0(s)&&n0(n)})}function e0(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Mn(n,a)}catch{return!0}}function n0(n){var s=Aa(n,2);s!==null&&jn(s,n,2)}function td(n){var s=En();if(typeof n=="function"){var a=n;if(n=a(),Hr){In(!0);try{a()}finally{In(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:n},s}function i0(n,s,a,l){return n.baseState=a,Jf(n,ee,typeof l=="function"?l:is)}function O4(n,s,a,l,h){if(cc(n))throw Error(r(485));if(n=s.action,n!==null){var d={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};Z.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,s0(s,d)):(d.next=a.next,s.pending=a.next=d)}}function s0(n,s){var a=s.action,l=s.payload,h=n.state;if(s.isTransition){var d=Z.T,E={};Z.T=E;try{var w=a(h,l),M=Z.S;M!==null&&M(E,w),r0(n,s,w)}catch(G){ed(n,s,G)}finally{Z.T=d}}else try{d=a(h,l),r0(n,s,d)}catch(G){ed(n,s,G)}}function r0(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){a0(n,s,l)},function(l){return ed(n,s,l)}):a0(n,s,a)}function a0(n,s,a){s.status="fulfilled",s.value=a,o0(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,s0(n,a)))}function ed(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,o0(s),s=s.next;while(s!==l)}n.action=null}function o0(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function l0(n,s){return s}function u0(n,s){if(Kt){var a=oe.formState;if(a!==null){t:{var l=Lt;if(Kt){if(ye){e:{for(var h=ye,d=Ai;h.nodeType!==8;){if(!d){h=null;break e}if(h=ui(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ye=ui(h.nextSibling),l=h.data==="F!";break t}}Ur(l)}l=!1}l&&(s=a[0])}}return a=En(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l0,lastRenderedState:s},a.queue=l,a=x0.bind(null,Lt,l),l.dispatch=a,l=td(!1),d=ad.bind(null,Lt,!1,l.queue),l=En(),h={state:s,dispatch:null,action:n,pending:null},l.queue=h,a=O4.bind(null,Lt,h,d,a),h.dispatch=a,l.memoizedState=n,[s,a,!1]}function c0(n){var s=Ie();return h0(s,ee,n)}function h0(n,s,a){if(s=Jf(n,s,l0)[0],n=oc(is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=al(s)}catch(E){throw E===tl?ec:E}else l=s;s=Ie();var h=s.queue,d=h.dispatch;return a!==s.memoizedState&&(Lt.flags|=2048,Oa(9,lc(),L4.bind(null,h,a),null)),[l,d,n]}function L4(n,s){n.action=s}function f0(n){var s=Ie(),a=ee;if(a!==null)return h0(s,a,n);Ie(),s=s.memoizedState,a=Ie();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Oa(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Lt.updateQueue,s===null&&(s=Xf(),Lt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function lc(){return{destroy:void 0,resource:void 0}}function d0(){return Ie().memoizedState}function uc(n,s,a,l){var h=En();l=l===void 0?null:l,Lt.flags|=n,h.memoizedState=Oa(1|s,lc(),a,l)}function ol(n,s,a,l){var h=Ie();l=l===void 0?null:l;var d=h.memoizedState.inst;ee!==null&&l!==null&&Ff(l,ee.memoizedState.deps)?h.memoizedState=Oa(s,d,a,l):(Lt.flags|=n,h.memoizedState=Oa(1|s,d,a,l))}function m0(n,s){uc(8390656,8,n,s)}function g0(n,s){ol(2048,8,n,s)}function p0(n,s){return ol(4,2,n,s)}function y0(n,s){return ol(4,4,n,s)}function _0(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function v0(n,s,a){a=a!=null?a.concat([n]):null,ol(4,4,_0.bind(null,s,n),a)}function nd(){}function E0(n,s){var a=Ie();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Ff(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function T0(n,s){var a=Ie();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Ff(s,l[1]))return l[0];if(l=n(),Hr){In(!0);try{n()}finally{In(!1)}}return a.memoizedState=[l,s],l}function id(n,s,a){return a===void 0||(Ms&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=Sp(),Lt.lanes|=n,Ps|=n,a)}function b0(n,s,a,l){return Mn(a,s)?a:Ma.current!==null?(n=id(n,a,l),Mn(n,s)||(Ge=!0),n):(Ms&42)===0?(Ge=!0,n.memoizedState=a):(n=Sp(),Lt.lanes|=n,Ps|=n,s)}function w0(n,s,a,l,h){var d=ct.p;ct.p=d!==0&&8>d?d:8;var E=Z.T,w={};Z.T=w,ad(n,!1,s,a);try{var M=h(),G=Z.S;if(G!==null&&G(w,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var tt=M4(M,l);ll(n,s,tt,kn(n))}else ll(n,s,l,kn(n))}catch(st){ll(n,s,{then:function(){},status:"rejected",reason:st},kn())}finally{ct.p=d,Z.T=E}}function k4(){}function sd(n,s,a,l){if(n.tag!==5)throw Error(r(476));var h=S0(n).queue;w0(n,h,s,mt,a===null?k4:function(){return A0(n),a(l)})}function S0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:mt},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function A0(n){var s=S0(n).next.queue;ll(n,s,{},kn())}function rd(){return on(Cl)}function C0(){return Ie().memoizedState}function R0(){return Ie().memoizedState}function j4(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=kn();n=Is(a);var l=Ds(s,n,a);l!==null&&(jn(l,s,a),nl(l,s,a)),s={cache:Lf()},n.payload=s;return}s=s.return}}function P4(n,s,a){var l=kn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},cc(n)?I0(s,a):(a=Af(n,s,a,l),a!==null&&(jn(a,n,l),D0(a,s,l)))}function x0(n,s,a){var l=kn();ll(n,s,a,l)}function ll(n,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(cc(n))I0(s,h);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var E=s.lastRenderedState,w=d(E,a);if(h.hasEagerState=!0,h.eagerState=w,Mn(w,E))return Yu(n,s,h,0),oe===null&&Qu(),!1}catch{}finally{}if(a=Af(n,s,h,l),a!==null)return jn(a,n,l),D0(a,s,l),!0}return!1}function ad(n,s,a,l){if(l={lane:2,revertLane:Pd(),action:l,hasEagerState:!1,eagerState:null,next:null},cc(n)){if(s)throw Error(r(479))}else s=Af(n,a,l,2),s!==null&&jn(s,n,2)}function cc(n){var s=n.alternate;return n===Lt||s!==null&&s===Lt}function I0(n,s){Va=sc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function D0(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Do(n,a)}}var hc={readContext:on,use:ac,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useLayoutEffect:Ee,useInsertionEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useSyncExternalStore:Ee,useId:Ee,useHostTransitionStatus:Ee,useFormState:Ee,useActionState:Ee,useOptimistic:Ee,useMemoCache:Ee,useCacheRefresh:Ee},M0={readContext:on,use:ac,useCallback:function(n,s){return En().memoizedState=[n,s===void 0?null:s],n},useContext:on,useEffect:m0,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,uc(4194308,4,_0.bind(null,s,n),a)},useLayoutEffect:function(n,s){return uc(4194308,4,n,s)},useInsertionEffect:function(n,s){uc(4,2,n,s)},useMemo:function(n,s){var a=En();s=s===void 0?null:s;var l=n();if(Hr){In(!0);try{n()}finally{In(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=En();if(a!==void 0){var h=a(s);if(Hr){In(!0);try{a(s)}finally{In(!1)}}}else h=s;return l.memoizedState=l.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},l.queue=n,n=n.dispatch=P4.bind(null,Lt,n),[l.memoizedState,n]},useRef:function(n){var s=En();return n={current:n},s.memoizedState=n},useState:function(n){n=td(n);var s=n.queue,a=x0.bind(null,Lt,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:nd,useDeferredValue:function(n,s){var a=En();return id(a,n,s)},useTransition:function(){var n=td(!1);return n=w0.bind(null,Lt,n.queue,!0,!1),En().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Lt,h=En();if(Kt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),oe===null)throw Error(r(349));(Gt&124)!==0||Jg(l,s,a)}h.memoizedState=a;var d={value:a,getSnapshot:s};return h.queue=d,m0(t0.bind(null,l,d,n),[n]),l.flags|=2048,Oa(9,lc(),Wg.bind(null,l,d,a,s),null),a},useId:function(){var n=En(),s=oe.identifierPrefix;if(Kt){var a=ts,l=Wi;a=(l&~(1<<32-an(l)-1)).toString(32)+a,s=""+s+"R"+a,a=rc++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=V4++,s=""+s+"r"+a.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:rd,useFormState:u0,useActionState:u0,useOptimistic:function(n){var s=En();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=ad.bind(null,Lt,!0,a),a.dispatch=s,[n,s]},useMemoCache:Zf,useCacheRefresh:function(){return En().memoizedState=j4.bind(null,Lt)}},V0={readContext:on,use:ac,useCallback:E0,useContext:on,useEffect:g0,useImperativeHandle:v0,useInsertionEffect:p0,useLayoutEffect:y0,useMemo:T0,useReducer:oc,useRef:d0,useState:function(){return oc(is)},useDebugValue:nd,useDeferredValue:function(n,s){var a=Ie();return b0(a,ee.memoizedState,n,s)},useTransition:function(){var n=oc(is)[0],s=Ie().memoizedState;return[typeof n=="boolean"?n:al(n),s]},useSyncExternalStore:Zg,useId:C0,useHostTransitionStatus:rd,useFormState:c0,useActionState:c0,useOptimistic:function(n,s){var a=Ie();return i0(a,ee,n,s)},useMemoCache:Zf,useCacheRefresh:R0},U4={readContext:on,use:ac,useCallback:E0,useContext:on,useEffect:g0,useImperativeHandle:v0,useInsertionEffect:p0,useLayoutEffect:y0,useMemo:T0,useReducer:Wf,useRef:d0,useState:function(){return Wf(is)},useDebugValue:nd,useDeferredValue:function(n,s){var a=Ie();return ee===null?id(a,n,s):b0(a,ee.memoizedState,n,s)},useTransition:function(){var n=Wf(is)[0],s=Ie().memoizedState;return[typeof n=="boolean"?n:al(n),s]},useSyncExternalStore:Zg,useId:C0,useHostTransitionStatus:rd,useFormState:f0,useActionState:f0,useOptimistic:function(n,s){var a=Ie();return ee!==null?i0(a,ee,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:R0},La=null,ul=0;function fc(n){var s=ul;return ul+=1,La===null&&(La=[]),Hg(La,n,s)}function cl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function dc(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function N0(n){var s=n._init;return s(n._payload)}function O0(n){function s(B,j){if(n){var H=B.deletions;H===null?(B.deletions=[j],B.flags|=16):H.push(j)}}function a(B,j){if(!n)return null;for(;j!==null;)s(B,j),j=j.sibling;return null}function l(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function h(B,j){return B=Ji(B,j),B.index=0,B.sibling=null,B}function d(B,j,H){return B.index=H,n?(H=B.alternate,H!==null?(H=H.index,H<j?(B.flags|=67108866,j):H):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function E(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function w(B,j,H,nt){return j===null||j.tag!==6?(j=Rf(H,B.mode,nt),j.return=B,j):(j=h(j,H),j.return=B,j)}function M(B,j,H,nt){var yt=H.type;return yt===V?tt(B,j,H.props.children,nt,H.key):j!==null&&(j.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===C&&N0(yt)===j.type)?(j=h(j,H.props),cl(j,H),j.return=B,j):(j=$u(H.type,H.key,H.props,null,B.mode,nt),cl(j,H),j.return=B,j)}function G(B,j,H,nt){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=xf(H,B.mode,nt),j.return=B,j):(j=h(j,H.children||[]),j.return=B,j)}function tt(B,j,H,nt,yt){return j===null||j.tag!==7?(j=Lr(H,B.mode,nt,yt),j.return=B,j):(j=h(j,H),j.return=B,j)}function st(B,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Rf(""+j,B.mode,H),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return H=$u(j.type,j.key,j.props,null,B.mode,H),cl(H,j),H.return=B,H;case R:return j=xf(j,B.mode,H),j.return=B,j;case C:var nt=j._init;return j=nt(j._payload),st(B,j,H)}if(Vt(j)||U(j))return j=Lr(j,B.mode,H,null),j.return=B,j;if(typeof j.then=="function")return st(B,fc(j),H);if(j.$$typeof===K)return st(B,Wu(B,j),H);dc(B,j)}return null}function Y(B,j,H,nt){var yt=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return yt!==null?null:w(B,j,""+H,nt);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===yt?M(B,j,H,nt):null;case R:return H.key===yt?G(B,j,H,nt):null;case C:return yt=H._init,H=yt(H._payload),Y(B,j,H,nt)}if(Vt(H)||U(H))return yt!==null?null:tt(B,j,H,nt,null);if(typeof H.then=="function")return Y(B,j,fc(H),nt);if(H.$$typeof===K)return Y(B,j,Wu(B,H),nt);dc(B,H)}return null}function $(B,j,H,nt,yt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return B=B.get(H)||null,w(j,B,""+nt,yt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case b:return B=B.get(nt.key===null?H:nt.key)||null,M(j,B,nt,yt);case R:return B=B.get(nt.key===null?H:nt.key)||null,G(j,B,nt,yt);case C:var jt=nt._init;return nt=jt(nt._payload),$(B,j,H,nt,yt)}if(Vt(nt)||U(nt))return B=B.get(H)||null,tt(j,B,nt,yt,null);if(typeof nt.then=="function")return $(B,j,H,fc(nt),yt);if(nt.$$typeof===K)return $(B,j,H,Wu(j,nt),yt);dc(j,nt)}return null}function Ct(B,j,H,nt){for(var yt=null,jt=null,_t=j,St=j=0,Qe=null;_t!==null&&St<H.length;St++){_t.index>St?(Qe=_t,_t=null):Qe=_t.sibling;var Yt=Y(B,_t,H[St],nt);if(Yt===null){_t===null&&(_t=Qe);break}n&&_t&&Yt.alternate===null&&s(B,_t),j=d(Yt,j,St),jt===null?yt=Yt:jt.sibling=Yt,jt=Yt,_t=Qe}if(St===H.length)return a(B,_t),Kt&&jr(B,St),yt;if(_t===null){for(;St<H.length;St++)_t=st(B,H[St],nt),_t!==null&&(j=d(_t,j,St),jt===null?yt=_t:jt.sibling=_t,jt=_t);return Kt&&jr(B,St),yt}for(_t=l(_t);St<H.length;St++)Qe=$(_t,B,St,H[St],nt),Qe!==null&&(n&&Qe.alternate!==null&&_t.delete(Qe.key===null?St:Qe.key),j=d(Qe,j,St),jt===null?yt=Qe:jt.sibling=Qe,jt=Qe);return n&&_t.forEach(function(Ys){return s(B,Ys)}),Kt&&jr(B,St),yt}function wt(B,j,H,nt){if(H==null)throw Error(r(151));for(var yt=null,jt=null,_t=j,St=j=0,Qe=null,Yt=H.next();_t!==null&&!Yt.done;St++,Yt=H.next()){_t.index>St?(Qe=_t,_t=null):Qe=_t.sibling;var Ys=Y(B,_t,Yt.value,nt);if(Ys===null){_t===null&&(_t=Qe);break}n&&_t&&Ys.alternate===null&&s(B,_t),j=d(Ys,j,St),jt===null?yt=Ys:jt.sibling=Ys,jt=Ys,_t=Qe}if(Yt.done)return a(B,_t),Kt&&jr(B,St),yt;if(_t===null){for(;!Yt.done;St++,Yt=H.next())Yt=st(B,Yt.value,nt),Yt!==null&&(j=d(Yt,j,St),jt===null?yt=Yt:jt.sibling=Yt,jt=Yt);return Kt&&jr(B,St),yt}for(_t=l(_t);!Yt.done;St++,Yt=H.next())Yt=$(_t,B,St,Yt.value,nt),Yt!==null&&(n&&Yt.alternate!==null&&_t.delete(Yt.key===null?St:Yt.key),j=d(Yt,j,St),jt===null?yt=Yt:jt.sibling=Yt,jt=Yt);return n&&_t.forEach(function(B6){return s(B,B6)}),Kt&&jr(B,St),yt}function ie(B,j,H,nt){if(typeof H=="object"&&H!==null&&H.type===V&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:t:{for(var yt=H.key;j!==null;){if(j.key===yt){if(yt=H.type,yt===V){if(j.tag===7){a(B,j.sibling),nt=h(j,H.props.children),nt.return=B,B=nt;break t}}else if(j.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===C&&N0(yt)===j.type){a(B,j.sibling),nt=h(j,H.props),cl(nt,H),nt.return=B,B=nt;break t}a(B,j);break}else s(B,j);j=j.sibling}H.type===V?(nt=Lr(H.props.children,B.mode,nt,H.key),nt.return=B,B=nt):(nt=$u(H.type,H.key,H.props,null,B.mode,nt),cl(nt,H),nt.return=B,B=nt)}return E(B);case R:t:{for(yt=H.key;j!==null;){if(j.key===yt)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){a(B,j.sibling),nt=h(j,H.children||[]),nt.return=B,B=nt;break t}else{a(B,j);break}else s(B,j);j=j.sibling}nt=xf(H,B.mode,nt),nt.return=B,B=nt}return E(B);case C:return yt=H._init,H=yt(H._payload),ie(B,j,H,nt)}if(Vt(H))return Ct(B,j,H,nt);if(U(H)){if(yt=U(H),typeof yt!="function")throw Error(r(150));return H=yt.call(H),wt(B,j,H,nt)}if(typeof H.then=="function")return ie(B,j,fc(H),nt);if(H.$$typeof===K)return ie(B,j,Wu(B,H),nt);dc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(a(B,j.sibling),nt=h(j,H),nt.return=B,B=nt):(a(B,j),nt=Rf(H,B.mode,nt),nt.return=B,B=nt),E(B)):a(B,j)}return function(B,j,H,nt){try{ul=0;var yt=ie(B,j,H,nt);return La=null,yt}catch(_t){if(_t===tl||_t===ec)throw _t;var jt=Vn(29,_t,null,B.mode);return jt.lanes=nt,jt.return=B,jt}finally{}}}var ka=O0(!0),L0=O0(!1),Zn=et(null),Ci=null;function Vs(n){var s=n.alternate;at(ke,ke.current&1),at(Zn,n),Ci===null&&(s===null||Ma.current!==null||s.memoizedState!==null)&&(Ci=n)}function k0(n){if(n.tag===22){if(at(ke,ke.current),at(Zn,n),Ci===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Ci=n)}}else Ns()}function Ns(){at(ke,ke.current),at(Zn,Zn.current)}function ss(n){it(Zn),Ci===n&&(Ci=null),it(ke)}var ke=et(0);function mc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Xd(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function od(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:v({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ld={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=kn(),h=Is(l);h.payload=s,a!=null&&(h.callback=a),s=Ds(n,h,l),s!==null&&(jn(s,n,l),nl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=kn(),h=Is(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ds(n,h,l),s!==null&&(jn(s,n,l),nl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=kn(),l=Is(a);l.tag=2,s!=null&&(l.callback=s),s=Ds(n,l,a),s!==null&&(jn(s,n,a),nl(s,n,a))}};function j0(n,s,a,l,h,d,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,E):s.prototype&&s.prototype.isPureReactComponent?!Qo(a,l)||!Qo(h,d):!0}function P0(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&ld.enqueueReplaceState(s,s.state,null)}function Gr(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=v({},a));for(var h in n)a[h]===void 0&&(a[h]=n[h])}return a}var gc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function U0(n){gc(n)}function B0(n){console.error(n)}function z0(n){gc(n)}function pc(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function q0(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ud(n,s,a){return a=Is(a),a.tag=3,a.payload={element:null},a.callback=function(){pc(n,s)},a}function H0(n){return n=Is(n),n.tag=3,n}function G0(n,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;n.payload=function(){return h(d)},n.callback=function(){q0(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){q0(s,a,l),typeof h!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function B4(n,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Zo(s,a,h,!0),a=Zn.current,a!==null){switch(a.tag){case 13:return Ci===null?Nd():a.alternate===null&&_e===0&&(_e=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Pf?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Ld(n,l,h)),!1;case 22:return a.flags|=65536,l===Pf?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Ld(n,l,h)),!1}throw Error(r(435,a.tag))}return Ld(n,l,h),Nd(),!1}if(Kt)return s=Zn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Mf&&(n=Error(r(422),{cause:l}),Xo(Yn(n,a)))):(l!==Mf&&(s=Error(r(423),{cause:l}),Xo(Yn(s,a))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,l=Yn(l,a),h=ud(n.stateNode,l,h),zf(n,h),_e!==4&&(_e=2)),!1;var d=Error(r(520),{cause:l});if(d=Yn(d,a),yl===null?yl=[d]:yl.push(d),_e!==4&&(_e=2),s===null)return!0;l=Yn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=h&-h,a.lanes|=n,n=ud(a.stateNode,l,n),zf(a,n),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Us===null||!Us.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=H0(h),G0(h,n,a,l),zf(a,h),!1}a=a.return}while(a!==null);return!1}var F0=Error(r(461)),Ge=!1;function Ze(n,s,a,l){s.child=n===null?L0(s,null,a,l):ka(s,n.child,a,l)}function Q0(n,s,a,l,h){a=a.render;var d=s.ref;if("ref"in l){var E={};for(var w in l)w!=="ref"&&(E[w]=l[w])}else E=l;return zr(s),l=Qf(n,s,a,E,d,h),w=Yf(),n!==null&&!Ge?(Kf(n,s,h),rs(n,s,h)):(Kt&&w&&If(s),s.flags|=1,Ze(n,s,l,h),s.child)}function Y0(n,s,a,l,h){if(n===null){var d=a.type;return typeof d=="function"&&!Cf(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,K0(n,s,d,l,h)):(n=$u(a.type,null,l,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!yd(n,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Qo,a(E,l)&&n.ref===s.ref)return rs(n,s,h)}return s.flags|=1,n=Ji(d,l),n.ref=s.ref,n.return=s,s.child=n}function K0(n,s,a,l,h){if(n!==null){var d=n.memoizedProps;if(Qo(d,l)&&n.ref===s.ref)if(Ge=!1,s.pendingProps=l=d,yd(n,h))(n.flags&131072)!==0&&(Ge=!0);else return s.lanes=n.lanes,rs(n,s,h)}return cd(n,s,a,l,h)}function $0(n,s,a){var l=s.pendingProps,h=l.children,d=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,n!==null){for(h=s.child=n.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;s.childLanes=d&~l}else s.childLanes=0,s.child=null;return X0(n,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&tc(s,d!==null?d.cachePool:null),d!==null?Kg(s,d):Hf(),k0(s);else return s.lanes=s.childLanes=536870912,X0(n,s,d!==null?d.baseLanes|a:a,a)}else d!==null?(tc(s,d.cachePool),Kg(s,d),Ns(),s.memoizedState=null):(n!==null&&tc(s,null),Hf(),Ns());return Ze(n,s,h,a),s.child}function X0(n,s,a,l){var h=jf();return h=h===null?null:{parent:Le._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},n!==null&&tc(s,null),Hf(),k0(s),n!==null&&Zo(n,s,l,!0),null}function yc(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function cd(n,s,a,l,h){return zr(s),a=Qf(n,s,a,l,void 0,h),l=Yf(),n!==null&&!Ge?(Kf(n,s,h),rs(n,s,h)):(Kt&&l&&If(s),s.flags|=1,Ze(n,s,a,h),s.child)}function Z0(n,s,a,l,h,d){return zr(s),s.updateQueue=null,a=Xg(s,l,a,h),$g(n),l=Yf(),n!==null&&!Ge?(Kf(n,s,d),rs(n,s,d)):(Kt&&l&&If(s),s.flags|=1,Ze(n,s,a,d),s.child)}function J0(n,s,a,l,h){if(zr(s),s.stateNode===null){var d=Ca,E=a.contextType;typeof E=="object"&&E!==null&&(d=on(E)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ld,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Uf(s),E=a.contextType,d.context=typeof E=="object"&&E!==null?on(E):Ca,d.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(od(s,a,E,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&ld.enqueueReplaceState(d,d.state,null),sl(s,l,d,h),il(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){d=s.stateNode;var w=s.memoizedProps,M=Gr(a,w);d.props=M;var G=d.context,tt=a.contextType;E=Ca,typeof tt=="object"&&tt!==null&&(E=on(tt));var st=a.getDerivedStateFromProps;tt=typeof st=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,tt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||G!==E)&&P0(s,d,l,E),xs=!1;var Y=s.memoizedState;d.state=Y,sl(s,l,d,h),il(),G=s.memoizedState,w||Y!==G||xs?(typeof st=="function"&&(od(s,a,st,l),G=s.memoizedState),(M=xs||j0(s,a,M,l,Y,G,E))?(tt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=G),d.props=l,d.state=G,d.context=E,l=M):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Bf(n,s),E=s.memoizedProps,tt=Gr(a,E),d.props=tt,st=s.pendingProps,Y=d.context,G=a.contextType,M=Ca,typeof G=="object"&&G!==null&&(M=on(G)),w=a.getDerivedStateFromProps,(G=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==st||Y!==M)&&P0(s,d,l,M),xs=!1,Y=s.memoizedState,d.state=Y,sl(s,l,d,h),il();var $=s.memoizedState;E!==st||Y!==$||xs||n!==null&&n.dependencies!==null&&Ju(n.dependencies)?(typeof w=="function"&&(od(s,a,w,l),$=s.memoizedState),(tt=xs||j0(s,a,tt,l,Y,$,M)||n!==null&&n.dependencies!==null&&Ju(n.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,M)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=$),d.props=l,d.state=$,d.context=M,l=tt):(typeof d.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),l=!1)}return d=l,yc(n,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&l?(s.child=ka(s,n.child,null,h),s.child=ka(s,null,a,h)):Ze(n,s,a,h),s.memoizedState=d.state,n=s.child):n=rs(n,s,h),n}function W0(n,s,a,l){return $o(),s.flags|=256,Ze(n,s,a,l),s.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(n){return{baseLanes:n,cachePool:Bg()}}function dd(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Jn),n}function tp(n,s,a){var l=s.pendingProps,h=!1,d=(s.flags&128)!==0,E;if((E=d)||(E=n!==null&&n.memoizedState===null?!1:(ke.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Kt){if(h?Vs(s):Ns(),Kt){var w=ye,M;if(M=w){t:{for(M=w,w=Ai;M.nodeType!==8;){if(!w){w=null;break t}if(M=ui(M.nextSibling),M===null){w=null;break t}}w=M}w!==null?(s.memoizedState={dehydrated:w,treeContext:kr!==null?{id:Wi,overflow:ts}:null,retryLane:536870912,hydrationErrors:null},M=Vn(18,null,null,0),M.stateNode=w,M.return=s,s.child=M,yn=s,ye=null,M=!0):M=!1}M||Ur(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Xd(w)?s.lanes=32:s.lanes=536870912,null;ss(s)}return w=l.children,l=l.fallback,h?(Ns(),h=s.mode,w=_c({mode:"hidden",children:w},h),l=Lr(l,h,a,null),w.return=s,l.return=s,w.sibling=l,s.child=w,h=s.child,h.memoizedState=fd(a),h.childLanes=dd(n,E,a),s.memoizedState=hd,l):(Vs(s),md(s,w))}if(M=n.memoizedState,M!==null&&(w=M.dehydrated,w!==null)){if(d)s.flags&256?(Vs(s),s.flags&=-257,s=gd(n,s,a)):s.memoizedState!==null?(Ns(),s.child=n.child,s.flags|=128,s=null):(Ns(),h=l.fallback,w=s.mode,l=_c({mode:"visible",children:l.children},w),h=Lr(h,w,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,ka(s,n.child,null,a),l=s.child,l.memoizedState=fd(a),l.childLanes=dd(n,E,a),s.memoizedState=hd,s=h);else if(Vs(s),Xd(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var G=E.dgst;E=G,l=Error(r(419)),l.stack="",l.digest=E,Xo({value:l,source:null,stack:null}),s=gd(n,s,a)}else if(Ge||Zo(n,s,a,!1),E=(a&n.childLanes)!==0,Ge||E){if(E=oe,E!==null&&(l=a&-a,l=(l&42)!==0?1:Es(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,Aa(n,l),jn(E,n,l),F0;w.data==="$?"||Nd(),s=gd(n,s,a)}else w.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=M.treeContext,ye=ui(w.nextSibling),yn=s,Kt=!0,Pr=null,Ai=!1,n!==null&&($n[Xn++]=Wi,$n[Xn++]=ts,$n[Xn++]=kr,Wi=n.id,ts=n.overflow,kr=s),s=md(s,l.children),s.flags|=4096);return s}return h?(Ns(),h=l.fallback,w=s.mode,M=n.child,G=M.sibling,l=Ji(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,G!==null?h=Ji(G,h):(h=Lr(h,w,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,w=n.child.memoizedState,w===null?w=fd(a):(M=w.cachePool,M!==null?(G=Le._currentValue,M=M.parent!==G?{parent:G,pool:G}:M):M=Bg(),w={baseLanes:w.baseLanes|a,cachePool:M}),h.memoizedState=w,h.childLanes=dd(n,E,a),s.memoizedState=hd,l):(Vs(s),a=n.child,n=a.sibling,a=Ji(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=a,s.memoizedState=null,a)}function md(n,s){return s=_c({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function _c(n,s){return n=Vn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function gd(n,s,a){return ka(s,n.child,null,a),n=md(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ep(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Nf(n.return,s,a)}function pd(n,s,a,l,h){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=s,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function np(n,s,a){var l=s.pendingProps,h=l.revealOrder,d=l.tail;if(Ze(n,s,l.children,a),l=ke.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ep(n,a,s);else if(n.tag===19)ep(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(at(ke,l),h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&mc(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),pd(s,!1,h,a,d);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&mc(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}pd(s,!0,a,null,d);break;case"together":pd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function rs(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ps|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Zo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Ji(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ji(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function yd(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ju(n)))}function z4(n,s,a){switch(s.tag){case 3:Tt(s,s.stateNode.containerInfo),Rs(s,Le,n.memoizedState.cache),$o();break;case 27:case 5:Se(s);break;case 4:Tt(s,s.stateNode.containerInfo);break;case 10:Rs(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Vs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?tp(n,s,a):(Vs(s),n=rs(n,s,a),n!==null?n.sibling:null);Vs(s);break;case 19:var h=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Zo(n,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return np(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),at(ke,ke.current),l)break;return null;case 22:case 23:return s.lanes=0,$0(n,s,a);case 24:Rs(s,Le,n.memoizedState.cache)}return rs(n,s,a)}function ip(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ge=!0;else{if(!yd(n,a)&&(s.flags&128)===0)return Ge=!1,z4(n,s,a);Ge=(n.flags&131072)!==0}else Ge=!1,Kt&&(s.flags&1048576)!==0&&Ng(s,Zu,s.index);switch(s.lanes=0,s.tag){case 16:t:{n=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Cf(l)?(n=Gr(l,n),s.tag=1,s=J0(null,s,l,n,a)):(s.tag=0,s=cd(null,s,l,n,a));else{if(l!=null){if(h=l.$$typeof,h===rt){s.tag=11,s=Q0(null,s,l,n,a);break t}else if(h===D){s.tag=14,s=Y0(null,s,l,n,a);break t}}throw s=Mt(l)||l,Error(r(306,s,""))}}return s;case 0:return cd(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Gr(l,s.pendingProps),J0(n,s,l,h,a);case 3:t:{if(Tt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;h=d.element,Bf(n,s),sl(s,l,null,a);var E=s.memoizedState;if(l=E.cache,Rs(s,Le,l),l!==d.cache&&Of(s,[Le],a,!0),il(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=W0(n,s,l,a);break t}else if(l!==h){h=Yn(Error(r(424)),s),Xo(h),s=W0(n,s,l,a);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ye=ui(n.firstChild),yn=s,Kt=!0,Pr=null,Ai=!0,a=L0(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($o(),l===h){s=rs(n,s,a);break t}Ze(n,s,l,a)}s=s.child}return s;case 26:return yc(n,s),n===null?(a=o2(s.type,null,s.pendingProps,null))?s.memoizedState=a:Kt||(a=s.type,n=s.pendingProps,l=Vc(dt.current).createElement(a),l[Ve]=s,l[Ce]=n,We(l,a,n),ve(l),s.stateNode=l):s.memoizedState=o2(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Se(s),n===null&&Kt&&(l=s.stateNode=s2(s.type,s.pendingProps,dt.current),yn=s,Ai=!0,h=ye,qs(s.type)?(Zd=h,ye=ui(l.firstChild)):ye=h),Ze(n,s,s.pendingProps.children,a),yc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Kt&&((h=l=ye)&&(l=g6(l,s.type,s.pendingProps,Ai),l!==null?(s.stateNode=l,yn=s,ye=ui(l.firstChild),Ai=!1,h=!0):h=!1),h||Ur(s)),Se(s),h=s.type,d=s.pendingProps,E=n!==null?n.memoizedProps:null,l=d.children,Yd(h,d)?l=null:E!==null&&Yd(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=Qf(n,s,N4,null,null,a),Cl._currentValue=h),yc(n,s),Ze(n,s,l,a),s.child;case 6:return n===null&&Kt&&((n=a=ye)&&(a=p6(a,s.pendingProps,Ai),a!==null?(s.stateNode=a,yn=s,ye=null,n=!0):n=!1),n||Ur(s)),null;case 13:return tp(n,s,a);case 4:return Tt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=ka(s,null,l,a):Ze(n,s,l,a),s.child;case 11:return Q0(n,s,s.type,s.pendingProps,a);case 7:return Ze(n,s,s.pendingProps,a),s.child;case 8:return Ze(n,s,s.pendingProps.children,a),s.child;case 12:return Ze(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Rs(s,s.type,l.value),Ze(n,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,zr(s),h=on(h),l=l(h),s.flags|=1,Ze(n,s,l,a),s.child;case 14:return Y0(n,s,s.type,s.pendingProps,a);case 15:return K0(n,s,s.type,s.pendingProps,a);case 19:return np(n,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},n===null?(a=_c(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Ji(n.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return $0(n,s,a);case 24:return zr(s),l=on(Le),n===null?(h=jf(),h===null&&(h=oe,d=Lf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),s.memoizedState={parent:l,cache:h},Uf(s),Rs(s,Le,h)):((n.lanes&a)!==0&&(Bf(n,s),sl(s,null,null,a),il()),h=n.memoizedState,d=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Rs(s,Le,l)):(l=d.cache,Rs(s,Le,l),l!==h.cache&&Of(s,[Le],a,!0))),Ze(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function as(n){n.flags|=4}function sp(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!f2(s)){if(s=Zn.current,s!==null&&((Gt&4194048)===Gt?Ci!==null:(Gt&62914560)!==Gt&&(Gt&536870912)===0||s!==Ci))throw el=Pf,zg;n.flags|=8192}}function vc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?xo():536870912,n.lanes|=s,Ba|=s)}function hl(n,s){if(!Kt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function fe(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function q4(n,s,a){var l=s.pendingProps;switch(Df(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(s),null;case 1:return fe(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ns(Le),re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ko(s)?as(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kg())),fe(s),null;case 26:return a=s.memoizedState,n===null?(as(s),a!==null?(fe(s),sp(s,a)):(fe(s),s.flags&=-16777217)):a?a!==n.memoizedState?(as(s),fe(s),sp(s,a)):(fe(s),s.flags&=-16777217):(n.memoizedProps!==l&&as(s),fe(s),s.flags&=-16777217),null;case 27:ge(s),a=dt.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&as(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return fe(s),null}n=gt.current,Ko(s)?Og(s):(n=s2(h,l,a),s.stateNode=n,as(s))}return fe(s),null;case 5:if(ge(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&as(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return fe(s),null}if(n=gt.current,Ko(s))Og(s);else{switch(h=Vc(dt.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}n[Ve]=s,n[Ce]=l;t:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break t;for(;h.sibling===null;){if(h.return===null||h.return===s)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;t:switch(We(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&as(s)}}return fe(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&as(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=dt.current,Ko(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}n[Ve]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Zp(n.nodeValue,a)),n||Ur(s)}else n=Vc(n).createTextNode(l),n[Ve]=s,s.stateNode=n}return fe(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=Ko(s),l!==null&&l.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ve]=s}else $o(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;fe(s),h=!1}else h=kg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ss(s),s):(ss(s),null)}if(ss(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),vc(s,s.updateQueue),fe(s),null;case 4:return re(),n===null&&qd(s.stateNode.containerInfo),fe(s),null;case 10:return ns(s.type),fe(s),null;case 19:if(it(ke),h=s.memoizedState,h===null)return fe(s),null;if(l=(s.flags&128)!==0,d=h.rendering,d===null)if(l)hl(h,!1);else{if(_e!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=mc(n),d!==null){for(s.flags|=128,hl(h,!1),n=d.updateQueue,s.updateQueue=n,vc(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Vg(a,n),a=a.sibling;return at(ke,ke.current&1|2),s.child}n=n.sibling}h.tail!==null&&Ae()>bc&&(s.flags|=128,l=!0,hl(h,!1),s.lanes=4194304)}else{if(!l)if(n=mc(d),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,vc(s,n),hl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Kt)return fe(s),null}else 2*Ae()-h.renderingStartTime>bc&&a!==536870912&&(s.flags|=128,l=!0,hl(h,!1),s.lanes=4194304);h.isBackwards?(d.sibling=s.child,s.child=d):(n=h.last,n!==null?n.sibling=d:s.child=d,h.last=d)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Ae(),s.sibling=null,n=ke.current,at(ke,l?n&1|2:n&1),s):(fe(s),null);case 22:case 23:return ss(s),Gf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(fe(s),s.subtreeFlags&6&&(s.flags|=8192)):fe(s),a=s.updateQueue,a!==null&&vc(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&it(qr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ns(Le),fe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function H4(n,s){switch(Df(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ns(Le),re(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ge(s),null;case 13:if(ss(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));$o()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return it(ke),null;case 4:return re(),null;case 10:return ns(s.type),null;case 22:case 23:return ss(s),Gf(),n!==null&&it(qr),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ns(Le),null;case 25:return null;default:return null}}function rp(n,s){switch(Df(s),s.tag){case 3:ns(Le),re();break;case 26:case 27:case 5:ge(s);break;case 4:re();break;case 13:ss(s);break;case 19:it(ke);break;case 10:ns(s.type);break;case 22:case 23:ss(s),Gf(),n!==null&&it(qr);break;case 24:ns(Le)}}function fl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&n)===n){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(w){ae(s,s.return,w)}}function Os(n,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&n)===n){var E=l.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,h=s;var M=a,G=w;try{G()}catch(tt){ae(h,M,tt)}}}l=l.next}while(l!==d)}}catch(tt){ae(s,s.return,tt)}}function ap(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{Yg(s,a)}catch(l){ae(n,n.return,l)}}}function op(n,s,a){a.props=Gr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){ae(n,s,l)}}function dl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(h){ae(n,s,h)}}function Ri(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ae(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ae(n,s,h)}else a.current=null}function lp(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ae(n,n.return,h)}}function _d(n,s,a){try{var l=n.stateNode;c6(l,n.type,a,s),l[Ce]=s}catch(h){ae(n,n.return,h)}}function up(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&qs(n.type)||n.tag===4}function vd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||up(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&qs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ed(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Mc));else if(l!==4&&(l===27&&qs(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Ed(n,s,a),n=n.sibling;n!==null;)Ed(n,s,a),n=n.sibling}function Ec(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&qs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Ec(n,s,a),n=n.sibling;n!==null;)Ec(n,s,a),n=n.sibling}function cp(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);We(s,l,a),s[Ve]=n,s[Ce]=a}catch(d){ae(n,n.return,d)}}var os=!1,Te=!1,Td=!1,hp=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function G4(n,s){if(n=n.containerInfo,Fd=Pc,n=bg(n),vf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var E=0,w=-1,M=-1,G=0,tt=0,st=n,Y=null;e:for(;;){for(var $;st!==a||h!==0&&st.nodeType!==3||(w=E+h),st!==d||l!==0&&st.nodeType!==3||(M=E+l),st.nodeType===3&&(E+=st.nodeValue.length),($=st.firstChild)!==null;)Y=st,st=$;for(;;){if(st===n)break e;if(Y===a&&++G===h&&(w=E),Y===d&&++tt===l&&(M=E),($=st.nextSibling)!==null)break;st=Y,Y=st.parentNode}st=$}a=w===-1||M===-1?null:{start:w,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:n,selectionRange:a},Pc=!1,Fe=s;Fe!==null;)if(s=Fe,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Fe=n;else for(;Fe!==null;){switch(s=Fe,d=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=s,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ct=Gr(a.type,h,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ct,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(wt){ae(a,a.return,wt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)$d(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":$d(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Fe=n;break}Fe=s.return}}function fp(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ls(n,a),l&4&&fl(5,a);break;case 1:if(Ls(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(E){ae(a,a.return,E)}else{var h=Gr(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ae(a,a.return,E)}}l&64&&ap(a),l&512&&dl(a,a.return);break;case 3:if(Ls(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Yg(n,s)}catch(E){ae(a,a.return,E)}}break;case 27:s===null&&l&4&&cp(a);case 26:case 5:Ls(n,a),s===null&&l&4&&lp(a),l&512&&dl(a,a.return);break;case 12:Ls(n,a);break;case 13:Ls(n,a),l&4&&gp(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=W4.bind(null,a),y6(n,a))));break;case 22:if(l=a.memoizedState!==null||os,!l){s=s!==null&&s.memoizedState!==null||Te,h=os;var d=Te;os=l,(Te=s)&&!d?ks(n,a,(a.subtreeFlags&8772)!==0):Ls(n,a),os=h,Te=d}break;case 30:break;default:Ls(n,a)}}function dp(n){var s=n.alternate;s!==null&&(n.alternate=null,dp(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ws(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ce=null,Tn=!1;function ls(n,s,a){for(a=a.child;a!==null;)mp(n,s,a),a=a.sibling}function mp(n,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(pe,a)}catch{}switch(a.tag){case 26:Te||Ri(a,s),ls(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Te||Ri(a,s);var l=ce,h=Tn;qs(a.type)&&(ce=a.stateNode,Tn=!1),ls(n,s,a),bl(a.stateNode),ce=l,Tn=h;break;case 5:Te||Ri(a,s);case 6:if(l=ce,h=Tn,ce=null,ls(n,s,a),ce=l,Tn=h,ce!==null)if(Tn)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(a.stateNode)}catch(d){ae(a,s,d)}else try{ce.removeChild(a.stateNode)}catch(d){ae(a,s,d)}break;case 18:ce!==null&&(Tn?(n=ce,n2(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Dl(n)):n2(ce,a.stateNode));break;case 4:l=ce,h=Tn,ce=a.stateNode.containerInfo,Tn=!0,ls(n,s,a),ce=l,Tn=h;break;case 0:case 11:case 14:case 15:Te||Os(2,a,s),Te||Os(4,a,s),ls(n,s,a);break;case 1:Te||(Ri(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&op(a,s,l)),ls(n,s,a);break;case 21:ls(n,s,a);break;case 22:Te=(l=Te)||a.memoizedState!==null,ls(n,s,a),Te=l;break;default:ls(n,s,a)}}function gp(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Dl(n)}catch(a){ae(s,s.return,a)}}function F4(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new hp),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new hp),s;default:throw Error(r(435,n.tag))}}function bd(n,s){var a=F4(n);s.forEach(function(l){var h=t6.bind(null,n,l);a.has(l)||(a.add(l),l.then(h,h))})}function Nn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=n,E=s,w=E;t:for(;w!==null;){switch(w.tag){case 27:if(qs(w.type)){ce=w.stateNode,Tn=!1;break t}break;case 5:ce=w.stateNode,Tn=!1;break t;case 3:case 4:ce=w.stateNode.containerInfo,Tn=!0;break t}w=w.return}if(ce===null)throw Error(r(160));mp(d,E,h),ce=null,Tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)pp(s,n),s=s.sibling}var li=null;function pp(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Nn(s,n),On(n),l&4&&(Os(3,n,n.return),fl(3,n),Os(5,n,n.return));break;case 1:Nn(s,n),On(n),l&512&&(Te||a===null||Ri(a,a.return)),l&64&&os&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=li;if(Nn(s,n),On(n),l&512&&(Te||a===null||Ri(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[vr]||d[Ve]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),We(d,l,a),d[Ve]=n,ve(d),l=d;break t;case"link":var E=c2("link","href",h).get(l+(a.href||""));if(E){for(var w=0;w<E.length;w++)if(d=E[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(w,1);break e}}d=h.createElement(l),We(d,l,a),h.head.appendChild(d);break;case"meta":if(E=c2("meta","content",h).get(l+(a.content||""))){for(w=0;w<E.length;w++)if(d=E[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(w,1);break e}}d=h.createElement(l),We(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ve]=n,ve(d),l=d}n.stateNode=l}else h2(h,n.type,n.stateNode);else n.stateNode=u2(h,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?h2(h,n.type,n.stateNode):u2(h,l,n.memoizedProps)):l===null&&n.stateNode!==null&&_d(n,n.memoizedProps,a.memoizedProps)}break;case 27:Nn(s,n),On(n),l&512&&(Te||a===null||Ri(a,a.return)),a!==null&&l&4&&_d(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Nn(s,n),On(n),l&512&&(Te||a===null||Ri(a,a.return)),n.flags&32){h=n.stateNode;try{Hn(h,"")}catch($){ae(n,n.return,$)}}l&4&&n.stateNode!=null&&(h=n.memoizedProps,_d(n,h,a!==null?a.memoizedProps:h)),l&1024&&(Td=!0);break;case 6:if(Nn(s,n),On(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch($){ae(n,n.return,$)}}break;case 3:if(Lc=null,h=li,li=Nc(s.containerInfo),Nn(s,n),li=h,On(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Dl(s.containerInfo)}catch($){ae(n,n.return,$)}Td&&(Td=!1,yp(n));break;case 4:l=li,li=Nc(n.stateNode.containerInfo),Nn(s,n),On(n),li=l;break;case 12:Nn(s,n),On(n);break;case 13:Nn(s,n),On(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xd=Ae()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,bd(n,l)));break;case 22:h=n.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,G=os,tt=Te;if(os=G||h,Te=tt||M,Nn(s,n),Te=tt,os=G,On(n),l&8192)t:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||M||os||Te||Fr(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(d=M.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=M.stateNode;var st=M.memoizedProps.style,Y=st!=null&&st.hasOwnProperty("display")?st.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch($){ae(M,M.return,$)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch($){ae(M,M.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bd(n,a))));break;case 19:Nn(s,n),On(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,bd(n,l)));break;case 30:break;case 21:break;default:Nn(s,n),On(n)}}function On(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(up(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=vd(n);Ec(n,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(Hn(E,""),a.flags&=-33);var w=vd(n);Ec(n,w,E);break;case 3:case 4:var M=a.stateNode.containerInfo,G=vd(n);Ed(n,G,M);break;default:throw Error(r(161))}}catch(tt){ae(n,n.return,tt)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function yp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;yp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ls(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)fp(n,s.alternate,s),s=s.sibling}function Fr(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Os(4,s,s.return),Fr(s);break;case 1:Ri(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&op(s,s.return,a),Fr(s);break;case 27:bl(s.stateNode);case 26:case 5:Ri(s,s.return),Fr(s);break;case 22:s.memoizedState===null&&Fr(s);break;case 30:Fr(s);break;default:Fr(s)}n=n.sibling}}function ks(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=n,d=s,E=d.flags;switch(d.tag){case 0:case 11:case 15:ks(h,d,a),fl(4,d);break;case 1:if(ks(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){ae(l,l.return,G)}if(l=d,h=l.updateQueue,h!==null){var w=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)Qg(M[h],w)}catch(G){ae(l,l.return,G)}}a&&E&64&&ap(d),dl(d,d.return);break;case 27:cp(d);case 26:case 5:ks(h,d,a),a&&l===null&&E&4&&lp(d),dl(d,d.return);break;case 12:ks(h,d,a);break;case 13:ks(h,d,a),a&&E&4&&gp(h,d);break;case 22:d.memoizedState===null&&ks(h,d,a),dl(d,d.return);break;case 30:break;default:ks(h,d,a)}s=s.sibling}}function wd(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Jo(a))}function Sd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Jo(n))}function xi(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_p(n,s,a,l),s=s.sibling}function _p(n,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:xi(n,s,a,l),h&2048&&fl(9,s);break;case 1:xi(n,s,a,l);break;case 3:xi(n,s,a,l),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Jo(n)));break;case 12:if(h&2048){xi(n,s,a,l),n=s.stateNode;try{var d=s.memoizedProps,E=d.id,w=d.onPostCommit;typeof w=="function"&&w(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){ae(s,s.return,M)}}else xi(n,s,a,l);break;case 13:xi(n,s,a,l);break;case 23:break;case 22:d=s.stateNode,E=s.alternate,s.memoizedState!==null?d._visibility&2?xi(n,s,a,l):ml(n,s):d._visibility&2?xi(n,s,a,l):(d._visibility|=2,ja(n,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&wd(E,s);break;case 24:xi(n,s,a,l),h&2048&&Sd(s.alternate,s);break;default:xi(n,s,a,l)}}function ja(n,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var d=n,E=s,w=a,M=l,G=E.flags;switch(E.tag){case 0:case 11:case 15:ja(d,E,w,M,h),fl(8,E);break;case 23:break;case 22:var tt=E.stateNode;E.memoizedState!==null?tt._visibility&2?ja(d,E,w,M,h):ml(d,E):(tt._visibility|=2,ja(d,E,w,M,h)),h&&G&2048&&wd(E.alternate,E);break;case 24:ja(d,E,w,M,h),h&&G&2048&&Sd(E.alternate,E);break;default:ja(d,E,w,M,h)}s=s.sibling}}function ml(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,h=l.flags;switch(l.tag){case 22:ml(a,l),h&2048&&wd(l.alternate,l);break;case 24:ml(a,l),h&2048&&Sd(l.alternate,l);break;default:ml(a,l)}s=s.sibling}}var gl=8192;function Pa(n){if(n.subtreeFlags&gl)for(n=n.child;n!==null;)vp(n),n=n.sibling}function vp(n){switch(n.tag){case 26:Pa(n),n.flags&gl&&n.memoizedState!==null&&D6(li,n.memoizedState,n.memoizedProps);break;case 5:Pa(n);break;case 3:case 4:var s=li;li=Nc(n.stateNode.containerInfo),Pa(n),li=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=gl,gl=16777216,Pa(n),gl=s):Pa(n));break;default:Pa(n)}}function Ep(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function pl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Fe=l,bp(l,n)}Ep(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Tp(n),n=n.sibling}function Tp(n){switch(n.tag){case 0:case 11:case 15:pl(n),n.flags&2048&&Os(9,n,n.return);break;case 3:pl(n);break;case 12:pl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Tc(n)):pl(n);break;default:pl(n)}}function Tc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Fe=l,bp(l,n)}Ep(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Os(8,s,s.return),Tc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Tc(s));break;default:Tc(s)}n=n.sibling}}function bp(n,s){for(;Fe!==null;){var a=Fe;switch(a.tag){case 0:case 11:case 15:Os(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Jo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Fe=l;else t:for(a=n;Fe!==null;){l=Fe;var h=l.sibling,d=l.return;if(dp(l),l===a){Fe=null;break t}if(h!==null){h.return=d,Fe=h;break t}Fe=d}}}var Q4={getCacheForType:function(n){var s=on(Le),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},Y4=typeof WeakMap=="function"?WeakMap:Map,Jt=0,oe=null,Pt=null,Gt=0,Wt=0,Ln=null,js=!1,Ua=!1,Ad=!1,us=0,_e=0,Ps=0,Qr=0,Cd=0,Jn=0,Ba=0,yl=null,bn=null,Rd=!1,xd=0,bc=1/0,wc=null,Us=null,Je=0,Bs=null,za=null,qa=0,Id=0,Dd=null,wp=null,_l=0,Md=null;function kn(){if((Jt&2)!==0&&Gt!==0)return Gt&-Gt;if(Z.T!==null){var n=Ia;return n!==0?n:Pd()}return Ts()}function Sp(){Jn===0&&(Jn=(Gt&536870912)===0||Kt?Ro():536870912);var n=Zn.current;return n!==null&&(n.flags|=32),Jn}function jn(n,s,a){(n===oe&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)&&(Ha(n,0),zs(n,Gt,Jn,!1)),zi(n,a),((Jt&2)===0||n!==oe)&&(n===oe&&((Jt&2)===0&&(Qr|=a),_e===4&&zs(n,Gt,Jn,!1)),Ii(n))}function Ap(n,s,a){if((Jt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&n.expiredLanes)===0||_r(n,s),h=l?X4(n,s):Od(n,s,!0),d=l;do{if(h===0){Ua&&!l&&zs(n,s,0,!1);break}else{if(a=n.current.alternate,d&&!K4(a)){h=Od(n,s,!1),d=!1;continue}if(h===2){if(d=s,n.errorRecoveryDisabledLanes&d)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var w=n;h=yl;var M=w.current.memoizedState.isDehydrated;if(M&&(Ha(w,E).flags|=256),E=Od(w,E,!1),E!==2){if(Ad&&!M){w.errorRecoveryDisabledLanes|=d,Qr|=d,h=4;break t}d=bn,bn=h,d!==null&&(bn===null?bn=d:bn.push.apply(bn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Ha(n,0),zs(n,s,0,!0);break}t:{switch(l=n,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:zs(l,s,Jn,!js);break t;case 2:bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=xd+300-Ae(),10<h)){if(zs(l,s,Jn,!js),aa(l,0,!0)!==0)break t;l.timeoutHandle=t2(Cp.bind(null,l,a,bn,wc,Rd,s,Jn,Qr,Ba,js,d,2,-0,0),h);break t}Cp(l,a,bn,wc,Rd,s,Jn,Qr,Ba,js,d,0,-0,0)}}break}while(!0);Ii(n)}function Cp(n,s,a,l,h,d,E,w,M,G,tt,st,Y,$){if(n.timeoutHandle=-1,st=s.subtreeFlags,(st&8192||(st&16785408)===16785408)&&(Al={stylesheets:null,count:0,unsuspend:I6},vp(s),st=M6(),st!==null)){n.cancelPendingCommit=st(Np.bind(null,n,s,d,a,l,h,E,w,M,tt,1,Y,$)),zs(n,d,E,!G);return}Np(n,s,d,a,l,h,E,w,M)}function K4(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Mn(d(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zs(n,s,a,l){s&=~Cd,s&=~Qr,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var h=s;0<h;){var d=31-an(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&mi(n,a,s)}function Sc(){return(Jt&6)===0?(vl(0),!1):!0}function Vd(){if(Pt!==null){if(Wt===0)var n=Pt.return;else n=Pt,es=Br=null,$f(n),La=null,ul=0,n=Pt;for(;n!==null;)rp(n.alternate,n),n=n.return;Pt=null}}function Ha(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,f6(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Vd(),oe=n,Pt=a=Ji(n.current,null),Gt=s,Wt=0,Ln=null,js=!1,Ua=_r(n,s),Ad=!1,Ba=Jn=Cd=Qr=Ps=_e=0,bn=yl=null,Rd=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var h=31-an(l),d=1<<h;s|=n[h],l&=~d}return us=s,Qu(),a}function Rp(n,s){Lt=null,Z.H=hc,s===tl||s===ec?(s=Gg(),Wt=3):s===zg?(s=Gg(),Wt=4):Wt=s===F0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ln=s,Pt===null&&(_e=1,pc(n,Yn(s,n.current)))}function xp(){var n=Z.H;return Z.H=hc,n===null?hc:n}function Ip(){var n=Z.A;return Z.A=Q4,n}function Nd(){_e=4,js||(Gt&4194048)!==Gt&&Zn.current!==null||(Ua=!0),(Ps&134217727)===0&&(Qr&134217727)===0||oe===null||zs(oe,Gt,Jn,!1)}function Od(n,s,a){var l=Jt;Jt|=2;var h=xp(),d=Ip();(oe!==n||Gt!==s)&&(wc=null,Ha(n,s)),s=!1;var E=_e;t:do try{if(Wt!==0&&Pt!==null){var w=Pt,M=Ln;switch(Wt){case 8:Vd(),E=6;break t;case 3:case 2:case 9:case 6:Zn.current===null&&(s=!0);var G=Wt;if(Wt=0,Ln=null,Ga(n,w,M,G),a&&Ua){E=0;break t}break;default:G=Wt,Wt=0,Ln=null,Ga(n,w,M,G)}}$4(),E=_e;break}catch(tt){Rp(n,tt)}while(!0);return s&&n.shellSuspendCounter++,es=Br=null,Jt=l,Z.H=h,Z.A=d,Pt===null&&(oe=null,Gt=0,Qu()),E}function $4(){for(;Pt!==null;)Dp(Pt)}function X4(n,s){var a=Jt;Jt|=2;var l=xp(),h=Ip();oe!==n||Gt!==s?(wc=null,bc=Ae()+500,Ha(n,s)):Ua=_r(n,s);t:do try{if(Wt!==0&&Pt!==null){s=Pt;var d=Ln;e:switch(Wt){case 1:Wt=0,Ln=null,Ga(n,s,d,1);break;case 2:case 9:if(qg(d)){Wt=0,Ln=null,Mp(s);break}s=function(){Wt!==2&&Wt!==9||oe!==n||(Wt=7),Ii(n)},d.then(s,s);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:qg(d)?(Wt=0,Ln=null,Mp(s)):(Wt=0,Ln=null,Ga(n,s,d,7));break;case 5:var E=null;switch(Pt.tag){case 26:E=Pt.memoizedState;case 5:case 27:var w=Pt;if(!E||f2(E)){Wt=0,Ln=null;var M=w.sibling;if(M!==null)Pt=M;else{var G=w.return;G!==null?(Pt=G,Ac(G)):Pt=null}break e}}Wt=0,Ln=null,Ga(n,s,d,5);break;case 6:Wt=0,Ln=null,Ga(n,s,d,6);break;case 8:Vd(),_e=6;break t;default:throw Error(r(462))}}Z4();break}catch(tt){Rp(n,tt)}while(!0);return es=Br=null,Z.H=l,Z.A=h,Jt=a,Pt!==null?0:(oe=null,Gt=0,Qu(),_e)}function Z4(){for(;Pt!==null&&!dn();)Dp(Pt)}function Dp(n){var s=ip(n.alternate,n,us);n.memoizedProps=n.pendingProps,s===null?Ac(n):Pt=s}function Mp(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=Z0(a,s,s.pendingProps,s.type,void 0,Gt);break;case 11:s=Z0(a,s,s.pendingProps,s.type.render,s.ref,Gt);break;case 5:$f(s);default:rp(a,s),s=Pt=Vg(s,us),s=ip(a,s,us)}n.memoizedProps=n.pendingProps,s===null?Ac(n):Pt=s}function Ga(n,s,a,l){es=Br=null,$f(s),La=null,ul=0;var h=s.return;try{if(B4(n,h,s,a,Gt)){_e=1,pc(n,Yn(a,n.current)),Pt=null;return}}catch(d){if(h!==null)throw Pt=h,d;_e=1,pc(n,Yn(a,n.current)),Pt=null;return}s.flags&32768?(Kt||l===1?n=!0:Ua||(Gt&536870912)!==0?n=!1:(js=n=!0,(l===2||l===9||l===3||l===6)&&(l=Zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vp(s,n)):Ac(s)}function Ac(n){var s=n;do{if((s.flags&32768)!==0){Vp(s,js);return}n=s.return;var a=q4(s.alternate,s,us);if(a!==null){Pt=a;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=n}while(s!==null);_e===0&&(_e=5)}function Vp(n,s){do{var a=H4(n.alternate,n);if(a!==null){a.flags&=32767,Pt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Pt=n;return}Pt=n=a}while(n!==null);_e=6,Pt=null}function Np(n,s,a,l,h,d,E,w,M){n.cancelPendingCommit=null;do Cc();while(Je!==0);if((Jt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=Sf,Io(n,a,d,E,w,M),n===oe&&(Pt=oe=null,Gt=0),za=s,Bs=n,qa=a,Id=d,Dd=h,wp=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,e6(zn,function(){return Pp(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null,h=ct.p,ct.p=2,E=Jt,Jt|=4;try{G4(n,s,a)}finally{Jt=E,ct.p=h,Z.T=l}}Je=1,Op(),Lp(),kp()}}function Op(){if(Je===1){Je=0;var n=Bs,s=za,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Z.T,Z.T=null;var l=ct.p;ct.p=2;var h=Jt;Jt|=4;try{pp(s,n);var d=Qd,E=bg(n.containerInfo),w=d.focusedElem,M=d.selectionRange;if(E!==w&&w&&w.ownerDocument&&Tg(w.ownerDocument.documentElement,w)){if(M!==null&&vf(w)){var G=M.start,tt=M.end;if(tt===void 0&&(tt=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(tt,w.value.length);else{var st=w.ownerDocument||document,Y=st&&st.defaultView||window;if(Y.getSelection){var $=Y.getSelection(),Ct=w.textContent.length,wt=Math.min(M.start,Ct),ie=M.end===void 0?wt:Math.min(M.end,Ct);!$.extend&&wt>ie&&(E=ie,ie=wt,wt=E);var B=Eg(w,wt),j=Eg(w,ie);if(B&&j&&($.rangeCount!==1||$.anchorNode!==B.node||$.anchorOffset!==B.offset||$.focusNode!==j.node||$.focusOffset!==j.offset)){var H=st.createRange();H.setStart(B.node,B.offset),$.removeAllRanges(),wt>ie?($.addRange(H),$.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),$.addRange(H))}}}}for(st=[],$=w;$=$.parentNode;)$.nodeType===1&&st.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<st.length;w++){var nt=st[w];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}Pc=!!Fd,Qd=Fd=null}finally{Jt=h,ct.p=l,Z.T=a}}n.current=s,Je=2}}function Lp(){if(Je===2){Je=0;var n=Bs,s=za,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Z.T,Z.T=null;var l=ct.p;ct.p=2;var h=Jt;Jt|=4;try{fp(n,s.alternate,s)}finally{Jt=h,ct.p=l,Z.T=a}}Je=3}}function kp(){if(Je===4||Je===3){Je=0,_n();var n=Bs,s=za,a=qa,l=wp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Je=5:(Je=0,za=Bs=null,jp(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(Us=null),oa(a),s=s.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(pe,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Z.T,h=ct.p,ct.p=2,Z.T=null;try{for(var d=n.onRecoverableError,E=0;E<l.length;E++){var w=l[E];d(w.value,{componentStack:w.stack})}}finally{Z.T=s,ct.p=h}}(qa&3)!==0&&Cc(),Ii(n),h=n.pendingLanes,(a&4194090)!==0&&(h&42)!==0?n===Md?_l++:(_l=0,Md=n):_l=0,vl(0)}}function jp(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Jo(s)))}function Cc(n){return Op(),Lp(),kp(),Pp()}function Pp(){if(Je!==5)return!1;var n=Bs,s=Id;Id=0;var a=oa(qa),l=Z.T,h=ct.p;try{ct.p=32>a?32:a,Z.T=null,a=Dd,Dd=null;var d=Bs,E=qa;if(Je=0,za=Bs=null,qa=0,(Jt&6)!==0)throw Error(r(331));var w=Jt;if(Jt|=4,Tp(d.current),_p(d,d.current,E,a),Jt=w,vl(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(pe,d)}catch{}return!0}finally{ct.p=h,Z.T=l,jp(n,s)}}function Up(n,s,a){s=Yn(a,s),s=ud(n.stateNode,s,2),n=Ds(n,s,2),n!==null&&(zi(n,2),Ii(n))}function ae(n,s,a){if(n.tag===3)Up(n,n,a);else for(;s!==null;){if(s.tag===3){Up(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Us===null||!Us.has(l))){n=Yn(a,n),a=H0(2),l=Ds(s,a,2),l!==null&&(G0(a,l,s,n),zi(l,2),Ii(l));break}}s=s.return}}function Ld(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Y4;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Ad=!0,h.add(a),n=J4.bind(null,n,s,a),s.then(n,n))}function J4(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,oe===n&&(Gt&a)===a&&(_e===4||_e===3&&(Gt&62914560)===Gt&&300>Ae()-xd?(Jt&2)===0&&Ha(n,0):Cd|=a,Ba===Gt&&(Ba=0)),Ii(n)}function Bp(n,s){s===0&&(s=xo()),n=Aa(n,s),n!==null&&(zi(n,s),Ii(n))}function W4(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Bp(n,a)}function t6(n,s){var a=0;switch(n.tag){case 13:var l=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Bp(n,a)}function e6(n,s){return Be(n,s)}var Rc=null,Fa=null,kd=!1,xc=!1,jd=!1,Yr=0;function Ii(n){n!==Fa&&n.next===null&&(Fa===null?Rc=Fa=n:Fa=Fa.next=n),xc=!0,kd||(kd=!0,i6())}function vl(n,s){if(!jd&&xc){jd=!0;do for(var a=!1,l=Rc;l!==null;){if(n!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-an(42|n)+1)-1,d&=h&~(E&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Gp(l,d))}else d=Gt,d=aa(l,l===oe?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||_r(l,d)||(a=!0,Gp(l,d));l=l.next}while(a);jd=!1}}function n6(){zp()}function zp(){xc=kd=!1;var n=0;Yr!==0&&(h6()&&(n=Yr),Yr=0);for(var s=Ae(),a=null,l=Rc;l!==null;){var h=l.next,d=qp(l,s);d===0?(l.next=null,a===null?Rc=h:a.next=h,h===null&&(Fa=a)):(a=l,(n!==0||(d&3)!==0)&&(xc=!0)),l=h}vl(n)}function qp(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,h=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var E=31-an(d),w=1<<E,M=h[E];M===-1?((w&a)===0||(w&l)!==0)&&(h[E]=Co(w,s)):M<=s&&(n.expiredLanes|=w),d&=~w}if(s=oe,a=Gt,a=aa(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ke(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||_r(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Ke(l),oa(a)){case 2:case 8:a=ze;break;case 32:a=zn;break;case 268435456:a=rn;break;default:a=zn}return l=Hp.bind(null,n),a=Be(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Ke(l),n.callbackPriority=2,n.callbackNode=null,2}function Hp(n,s){if(Je!==0&&Je!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Cc()&&n.callbackNode!==a)return null;var l=Gt;return l=aa(n,n===oe?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Ap(n,l,s),qp(n,Ae()),n.callbackNode!=null&&n.callbackNode===a?Hp.bind(null,n):null)}function Gp(n,s){if(Cc())return null;Ap(n,s,!0)}function i6(){d6(function(){(Jt&6)!==0?Be(sn,n6):zp()})}function Pd(){return Yr===0&&(Yr=Ro()),Yr}function Fp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:da(""+n)}function Qp(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function s6(n,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var d=Fp((h[Ce]||null).action),E=l.submitter;E&&(s=(s=E[Ce]||null)?Fp(s.formAction):E.getAttribute("formAction"),s!==null&&(d=s,E=null));var w=new ma("action","action",null,l,h);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Yr!==0){var M=E?Qp(h,E):new FormData(h);sd(a,{pending:!0,data:M,method:h.method,action:d},null,M)}}else typeof d=="function"&&(w.preventDefault(),M=E?Qp(h,E):new FormData(h),sd(a,{pending:!0,data:M,method:h.method,action:d},d,M))},currentTarget:h}]})}}for(var Ud=0;Ud<wf.length;Ud++){var Bd=wf[Ud],r6=Bd.toLowerCase(),a6=Bd[0].toUpperCase()+Bd.slice(1);oi(r6,"on"+a6)}oi(Ag,"onAnimationEnd"),oi(Cg,"onAnimationIteration"),oi(Rg,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(w4,"onTransitionRun"),oi(S4,"onTransitionStart"),oi(A4,"onTransitionCancel"),oi(xg,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function Yp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],h=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var E=l.length-1;0<=E;E--){var w=l[E],M=w.instance,G=w.currentTarget;if(w=w.listener,M!==d&&h.isPropagationStopped())break t;d=w,h.currentTarget=G;try{d(h)}catch(tt){gc(tt)}h.currentTarget=null,d=M}else for(E=0;E<l.length;E++){if(w=l[E],M=w.instance,G=w.currentTarget,w=w.listener,M!==d&&h.isPropagationStopped())break t;d=w,h.currentTarget=G;try{d(h)}catch(tt){gc(tt)}h.currentTarget=null,d=M}}}}function Ut(n,s){var a=s[Mo];a===void 0&&(a=s[Mo]=new Set);var l=n+"__bubble";a.has(l)||(Kp(s,n,2,!1),a.add(l))}function zd(n,s,a){var l=0;s&&(l|=4),Kp(a,n,l,s)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function qd(n){if(!n[Ic]){n[Ic]=!0,Vo.forEach(function(a){a!=="selectionchange"&&(o6.has(a)||zd(a,!1,n),zd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ic]||(s[Ic]=!0,zd("selectionchange",!1,s))}}function Kp(n,s,a,l){switch(_2(s)){case 2:var h=O6;break;case 8:h=L6;break;default:h=n1}a=h.bind(null,s,a,n),h=void 0,!Fn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function Hd(n,s,a,l,h){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var w=l.stateNode.containerInfo;if(w===h)break;if(E===4)for(E=l.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;w!==null;){if(E=qi(w),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){l=d=E;continue t}w=w.parentNode}}l=l.return}Mu(function(){var G=d,tt=Gn(a),st=[];t:{var Y=Ig.get(n);if(Y!==void 0){var $=ma,Ct=n;switch(n){case"keypress":if(Ei(a)===0)break t;case"keydown":case"keyup":$=Ea;break;case"focusin":Ct="focus",$=ya;break;case"focusout":Ct="blur",$=ya;break;case"beforeblur":case"afterblur":$=ya;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Uu;break;case Ag:case Cg:case Rg:$=_a;break;case xg:$=zu;break;case"scroll":case"scrollend":$=Vu;break;case"wheel":$=Ta;break;case"copy":case"cut":case"paste":$=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Go;break;case"toggle":case"beforetoggle":$=Hu}var wt=(s&4)!==0,ie=!wt&&(n==="scroll"||n==="scrollend"),B=wt?Y!==null?Y+"Capture":null:Y;wt=[];for(var j=G,H;j!==null;){var nt=j;if(H=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||H===null||B===null||(nt=Cr(j,B),nt!=null&&wt.push(Tl(j,nt,H))),ie)break;j=j.return}0<wt.length&&(Y=new $(Y,Ct,null,a,tt),st.push({event:Y,listeners:wt}))}}if((s&7)===0){t:{if(Y=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",Y&&a!==Qi&&(Ct=a.relatedTarget||a.fromElement)&&(qi(Ct)||Ct[qn]))break t;if(($||Y)&&(Y=tt.window===tt?tt:(Y=tt.ownerDocument)?Y.defaultView||Y.parentWindow:window,$?(Ct=a.relatedTarget||a.toElement,$=G,Ct=Ct?qi(Ct):null,Ct!==null&&(ie=u(Ct),wt=Ct.tag,Ct!==ie||wt!==5&&wt!==27&&wt!==6)&&(Ct=null)):($=null,Ct=G),$!==Ct)){if(wt=Qn,nt="onMouseLeave",B="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(wt=Go,nt="onPointerLeave",B="onPointerEnter",j="pointer"),ie=$==null?Y:pi($),H=Ct==null?Y:pi(Ct),Y=new wt(nt,j+"leave",$,a,tt),Y.target=ie,Y.relatedTarget=H,nt=null,qi(tt)===G&&(wt=new wt(B,j+"enter",Ct,a,tt),wt.target=H,wt.relatedTarget=ie,nt=wt),ie=nt,$&&Ct)e:{for(wt=$,B=Ct,j=0,H=wt;H;H=Qa(H))j++;for(H=0,nt=B;nt;nt=Qa(nt))H++;for(;0<j-H;)wt=Qa(wt),j--;for(;0<H-j;)B=Qa(B),H--;for(;j--;){if(wt===B||B!==null&&wt===B.alternate)break e;wt=Qa(wt),B=Qa(B)}wt=null}else wt=null;$!==null&&$p(st,Y,$,wt,!1),Ct!==null&&ie!==null&&$p(st,ie,Ct,wt,!0)}}t:{if(Y=G?pi(G):window,$=Y.nodeName&&Y.nodeName.toLowerCase(),$==="select"||$==="input"&&Y.type==="file")var yt=mg;else if(Oe(Y))if(gg)yt=E4;else{yt=_4;var jt=y4}else $=Y.nodeName,!$||$.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&jo(G.elementType)&&(yt=mg):yt=v4;if(yt&&(yt=yt(n,G))){Zi(st,yt,a,tt);break t}jt&&jt(n,Y,G),n==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&As(Y,"number",Y.value)}switch(jt=G?pi(G):window,n){case"focusin":(Oe(jt)||jt.contentEditable==="true")&&(ba=jt,Ef=G,Yo=null);break;case"focusout":Yo=Ef=ba=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,wg(st,a,tt);break;case"selectionchange":if(b4)break;case"keydown":case"keyup":wg(st,a,tt)}var _t;if(wi)t:{switch(n){case"compositionstart":var St="onCompositionStart";break t;case"compositionend":St="onCompositionEnd";break t;case"compositionupdate":St="onCompositionUpdate";break t}St=void 0}else qt?J(n,a)&&(St="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(St="onCompositionStart");St&&(_&&a.locale!=="ko"&&(qt||St!=="onCompositionStart"?St==="onCompositionEnd"&&qt&&(_t=Uo()):(vi=tt,Cs="value"in vi?vi.value:vi.textContent,qt=!0)),jt=Dc(G,St),0<jt.length&&(St=new qo(St,n,null,a,tt),st.push({event:St,listeners:jt}),_t?St.data=_t:(_t=ft(a),_t!==null&&(St.data=_t)))),(_t=p?Ne(n,a):Ht(n,a))&&(St=Dc(G,"onBeforeInput"),0<St.length&&(jt=new qo("onBeforeInput","beforeinput",null,a,tt),st.push({event:jt,listeners:St}),jt.data=_t)),s6(st,n,G,a,tt)}Yp(st,s)})}function Tl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Dc(n,s){for(var a=s+"Capture",l=[];n!==null;){var h=n,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Cr(n,a),h!=null&&l.unshift(Tl(n,h,d)),h=Cr(n,s),h!=null&&l.push(Tl(n,h,d))),n.tag===3)return l;n=n.return}return[]}function Qa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $p(n,s,a,l,h){for(var d=s._reactName,E=[];a!==null&&a!==l;){var w=a,M=w.alternate,G=w.stateNode;if(w=w.tag,M!==null&&M===l)break;w!==5&&w!==26&&w!==27||G===null||(M=G,h?(G=Cr(a,d),G!=null&&E.unshift(Tl(a,G,M))):h||(G=Cr(a,d),G!=null&&E.push(Tl(a,G,M)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var l6=/\r\n?/g,u6=/\u0000|\uFFFD/g;function Xp(n){return(typeof n=="string"?n:""+n).replace(l6,`
`).replace(u6,"")}function Zp(n,s){return s=Xp(s),Xp(n)===s}function Mc(){}function ne(n,s,a,l,h,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Hn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Hn(n,""+l);break;case"className":yi(n,"class",l);break;case"tabIndex":yi(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":yi(n,a,l);break;case"style":ko(n,l,d);break;case"data":if(s!=="object"){yi(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=da(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&ne(n,s,"name",h.name,h,null),ne(n,s,"formEncType",h.formEncType,h,null),ne(n,s,"formMethod",h.formMethod,h,null),ne(n,s,"formTarget",h.formTarget,h,null)):(ne(n,s,"encType",h.encType,h,null),ne(n,s,"method",h.method,h,null),ne(n,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=da(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Mc);break;case"onScroll":l!=null&&Ut("scroll",n);break;case"onScrollEnd":l!=null&&Ut("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=da(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ut("beforetoggle",n),Ut("toggle",n),Ss(n,"popover",l);break;case"xlinkActuate":$e(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$e(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$e(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$e(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$e(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$e(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$e(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$e(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$e(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ss(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=df.get(a)||a,Ss(n,a,l))}}function Gd(n,s,a,l,h,d){switch(a){case"style":ko(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Hn(n,l):(typeof l=="number"||typeof l=="bigint")&&Hn(n,""+l);break;case"onScroll":l!=null&&Ut("scroll",n);break;case"onScrollEnd":l!=null&&Ut("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Mc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!la.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),d=n[Ce]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(s,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,h);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ss(n,a,l)}}}function We(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",n),Ut("load",n);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ne(n,s,d,E,a,null)}}h&&ne(n,s,"srcSet",a.srcSet,a,null),l&&ne(n,s,"src",a.src,a,null);return;case"input":Ut("invalid",n);var w=d=E=h=null,M=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var tt=a[l];if(tt!=null)switch(l){case"name":h=tt;break;case"type":E=tt;break;case"checked":M=tt;break;case"defaultChecked":G=tt;break;case"value":d=tt;break;case"defaultValue":w=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(r(137,s));break;default:ne(n,s,l,tt,a,null)}}wr(n,d,w,M,G,E,h,!1),fa(n);return;case"select":Ut("invalid",n),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":d=w;break;case"defaultValue":E=w;break;case"multiple":l=w;default:ne(n,s,h,w,a,null)}s=d,a=E,n.multiple=!!l,s!=null?Fi(n,!!l,s,!1):a!=null&&Fi(n,!!l,a,!0);return;case"textarea":Ut("invalid",n),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(w=a[E],w!=null))switch(E){case"value":l=w;break;case"defaultValue":h=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:ne(n,s,E,w,a,null)}Sr(n,l,h,d),fa(n);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ne(n,s,M,l,a,null)}return;case"dialog":Ut("beforetoggle",n),Ut("toggle",n),Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":Ut("load",n);break;case"video":case"audio":for(l=0;l<El.length;l++)Ut(El[l],n);break;case"image":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"embed":case"source":case"link":Ut("error",n),Ut("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ne(n,s,G,l,a,null)}return;default:if(jo(s)){for(tt in a)a.hasOwnProperty(tt)&&(l=a[tt],l!==void 0&&Gd(n,s,tt,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&ne(n,s,w,l,a,null))}function c6(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,w=null,M=null,G=null,tt=null;for($ in a){var st=a[$];if(a.hasOwnProperty($)&&st!=null)switch($){case"checked":break;case"value":break;case"defaultValue":M=st;default:l.hasOwnProperty($)||ne(n,s,$,null,l,st)}}for(var Y in l){var $=l[Y];if(st=a[Y],l.hasOwnProperty(Y)&&($!=null||st!=null))switch(Y){case"type":d=$;break;case"name":h=$;break;case"checked":G=$;break;case"defaultChecked":tt=$;break;case"value":E=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==st&&ne(n,s,Y,$,l,st)}}Dn(n,E,w,M,G,tt,d,h);return;case"select":$=E=w=Y=null;for(d in a)if(M=a[d],a.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":$=M;default:l.hasOwnProperty(d)||ne(n,s,d,null,l,M)}for(h in l)if(d=l[h],M=a[h],l.hasOwnProperty(h)&&(d!=null||M!=null))switch(h){case"value":Y=d;break;case"defaultValue":w=d;break;case"multiple":E=d;default:d!==M&&ne(n,s,h,d,l,M)}s=w,a=E,l=$,Y!=null?Fi(n,!!a,Y,!1):!!l!=!!a&&(s!=null?Fi(n,!!a,s,!0):Fi(n,!!a,a?[]:"",!1));return;case"textarea":$=Y=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ne(n,s,w,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":Y=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ne(n,s,E,h,l,d)}te(n,Y,$);return;case"option":for(var Ct in a)if(Y=a[Ct],a.hasOwnProperty(Ct)&&Y!=null&&!l.hasOwnProperty(Ct))switch(Ct){case"selected":n.selected=!1;break;default:ne(n,s,Ct,null,l,Y)}for(M in l)if(Y=l[M],$=a[M],l.hasOwnProperty(M)&&Y!==$&&(Y!=null||$!=null))switch(M){case"selected":n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ne(n,s,M,Y,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in a)Y=a[wt],a.hasOwnProperty(wt)&&Y!=null&&!l.hasOwnProperty(wt)&&ne(n,s,wt,null,l,Y);for(G in l)if(Y=l[G],$=a[G],l.hasOwnProperty(G)&&Y!==$&&(Y!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:ne(n,s,G,Y,l,$)}return;default:if(jo(s)){for(var ie in a)Y=a[ie],a.hasOwnProperty(ie)&&Y!==void 0&&!l.hasOwnProperty(ie)&&Gd(n,s,ie,void 0,l,Y);for(tt in l)Y=l[tt],$=a[tt],!l.hasOwnProperty(tt)||Y===$||Y===void 0&&$===void 0||Gd(n,s,tt,Y,l,$);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!l.hasOwnProperty(B)&&ne(n,s,B,null,l,Y);for(st in l)Y=l[st],$=a[st],!l.hasOwnProperty(st)||Y===$||Y==null&&$==null||ne(n,s,st,Y,l,$)}var Fd=null,Qd=null;function Vc(n){return n.nodeType===9?n:n.ownerDocument}function Jp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wp(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Yd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kd=null;function h6(){var n=window.event;return n&&n.type==="popstate"?n===Kd?!1:(Kd=n,!0):(Kd=null,!1)}var t2=typeof setTimeout=="function"?setTimeout:void 0,f6=typeof clearTimeout=="function"?clearTimeout:void 0,e2=typeof Promise=="function"?Promise:void 0,d6=typeof queueMicrotask=="function"?queueMicrotask:typeof e2<"u"?function(n){return e2.resolve(null).then(n).catch(m6)}:t2;function m6(n){setTimeout(function(){throw n})}function qs(n){return n==="head"}function n2(n,s){var a=s,l=0,h=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&bl(E.documentElement),a&2&&bl(E.body),a&4)for(a=E.head,bl(a),E=a.firstChild;E;){var w=E.nextSibling,M=E.nodeName;E[vr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=w}}if(h===0){n.removeChild(d),Dl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Dl(s)}function $d(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$d(a),ws(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function g6(n,s,a,l){for(;n.nodeType===1;){var h=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[vr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ui(n.nextSibling),n===null)break}return null}function p6(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ui(n.nextSibling),n===null))return null;return n}function Xd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function y6(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ui(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var Zd=null;function i2(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function s2(n,s,a){switch(s=Vc(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function bl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ws(n)}var Wn=new Map,r2=new Set;function Nc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var cs=ct.d;ct.d={f:_6,r:v6,D:E6,C:T6,L:b6,m:w6,X:A6,S:S6,M:C6};function _6(){var n=cs.f(),s=Sc();return n||s}function v6(n){var s=gi(n);s!==null&&s.tag===5&&s.type==="form"?A0(s):cs.r(n)}var Ya=typeof document>"u"?null:document;function a2(n,s,a){var l=Ya;if(l&&typeof s=="string"&&s){var h=Re(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),r2.has(h)||(r2.add(h),n={rel:n,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),We(s,"link",n),ve(s),l.head.appendChild(s)))}}function E6(n){cs.D(n),a2("dns-prefetch",n,null)}function T6(n,s){cs.C(n,s),a2("preconnect",n,s)}function b6(n,s,a){cs.L(n,s,a);var l=Ya;if(l&&n&&s){var h='link[rel="preload"][as="'+Re(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Re(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Re(a.imageSizes)+'"]')):h+='[href="'+Re(n)+'"]';var d=h;switch(s){case"style":d=Ka(n);break;case"script":d=$a(n)}Wn.has(d)||(n=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Wn.set(d,n),l.querySelector(h)!==null||s==="style"&&l.querySelector(wl(d))||s==="script"&&l.querySelector(Sl(d))||(s=l.createElement("link"),We(s,"link",n),ve(s),l.head.appendChild(s)))}}function w6(n,s){cs.m(n,s);var a=Ya;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Re(l)+'"][href="'+Re(n)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=$a(n)}if(!Wn.has(d)&&(n=v({rel:"modulepreload",href:n},s),Wn.set(d,n),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(d)))return}l=a.createElement("link"),We(l,"link",n),ve(l),a.head.appendChild(l)}}}function S6(n,s,a){cs.S(n,s,a);var l=Ya;if(l&&n){var h=mn(l).hoistableStyles,d=Ka(n);s=s||"default";var E=h.get(d);if(!E){var w={loading:0,preload:null};if(E=l.querySelector(wl(d)))w.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Wn.get(d))&&Jd(n,a);var M=E=l.createElement("link");ve(M),We(M,"link",n),M._p=new Promise(function(G,tt){M.onload=G,M.onerror=tt}),M.addEventListener("load",function(){w.loading|=1}),M.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Oc(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:w},h.set(d,E)}}}function A6(n,s){cs.X(n,s);var a=Ya;if(a&&n){var l=mn(a).hoistableScripts,h=$a(n),d=l.get(h);d||(d=a.querySelector(Sl(h)),d||(n=v({src:n,async:!0},s),(s=Wn.get(h))&&Wd(n,s),d=a.createElement("script"),ve(d),We(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function C6(n,s){cs.M(n,s);var a=Ya;if(a&&n){var l=mn(a).hoistableScripts,h=$a(n),d=l.get(h);d||(d=a.querySelector(Sl(h)),d||(n=v({src:n,async:!0,type:"module"},s),(s=Wn.get(h))&&Wd(n,s),d=a.createElement("script"),ve(d),We(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function o2(n,s,a,l){var h=(h=dt.current)?Nc(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ka(a.href),a=mn(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Ka(a.href);var d=mn(h).hoistableStyles,E=d.get(n);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,E),(d=h.querySelector(wl(n)))&&!d._p&&(E.instance=d,E.state.loading=5),Wn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(n,a),d||R6(h,n,a,E.state))),s&&l===null)throw Error(r(528,""));return E}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$a(a),a=mn(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Ka(n){return'href="'+Re(n)+'"'}function wl(n){return'link[rel="stylesheet"]['+n+"]"}function l2(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function R6(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),We(s,"link",a),ve(s),n.head.appendChild(s))}function $a(n){return'[src="'+Re(n)+'"]'}function Sl(n){return"script[async]"+n}function u2(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Re(a.href)+'"]');if(l)return s.instance=l,ve(l),l;var h=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),ve(l),We(l,"style",h),Oc(l,a.precedence,n),s.instance=l;case"stylesheet":h=Ka(a.href);var d=n.querySelector(wl(h));if(d)return s.state.loading|=4,s.instance=d,ve(d),d;l=l2(a),(h=Wn.get(h))&&Jd(l,h),d=(n.ownerDocument||n).createElement("link"),ve(d);var E=d;return E._p=new Promise(function(w,M){E.onload=w,E.onerror=M}),We(d,"link",l),s.state.loading|=4,Oc(d,a.precedence,n),s.instance=d;case"script":return d=$a(a.src),(h=n.querySelector(Sl(d)))?(s.instance=h,ve(h),h):(l=a,(h=Wn.get(d))&&(l=v({},a),Wd(l,h)),n=n.ownerDocument||n,h=n.createElement("script"),ve(h),We(h,"link",l),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Oc(l,a.precedence,n));return s.instance}function Oc(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var w=l[E];if(w.dataset.precedence===s)d=w;else if(d!==h)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Jd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Wd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Lc=null;function c2(n,s,a){if(Lc===null){var l=new Map,h=Lc=new Map;h.set(a,l)}else h=Lc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),h=0;h<a.length;h++){var d=a[h];if(!(d[vr]||d[Ve]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(s)||"";E=n+E;var w=l.get(E);w?w.push(d):l.set(E,[d])}}return l}function h2(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function x6(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function f2(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Al=null;function I6(){}function D6(n,s,a){if(Al===null)throw Error(r(475));var l=Al;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Ka(a.href),d=n.querySelector(wl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=kc.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=d,ve(d);return}d=n.ownerDocument||n,a=l2(a),(h=Wn.get(h))&&Jd(a,h),d=d.createElement("link"),ve(d);var E=d;E._p=new Promise(function(w,M){E.onload=w,E.onerror=M}),We(d,"link",a),s.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=kc.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function M6(){if(Al===null)throw Error(r(475));var n=Al;return n.stylesheets&&n.count===0&&t1(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&t1(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function kc(){if(this.count--,this.count===0){if(this.stylesheets)t1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var jc=null;function t1(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,jc=new Map,s.forEach(V6,n),jc=null,kc.call(n))}function V6(n,s){if(!(s.state.loading&4)){var a=jc.get(n);if(a)var l=a.get(null);else{a=new Map,jc.set(n,a);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=kc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var Cl={$$typeof:K,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function N6(n,s,a,l,h,d,E,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.hiddenUpdates=Bi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function d2(n,s,a,l,h,d,E,w,M,G,tt,st){return n=new N6(n,s,a,E,w,M,G,st),s=1,d===!0&&(s|=24),d=Vn(3,null,null,s),n.current=d,d.stateNode=n,s=Lf(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Uf(d),n}function m2(n){return n?(n=Ca,n):Ca}function g2(n,s,a,l,h,d){h=m2(h),l.context===null?l.context=h:l.pendingContext=h,l=Is(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ds(n,l,s),a!==null&&(jn(a,n,s),nl(a,n,s))}function p2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function e1(n,s){p2(n,s),(n=n.alternate)&&p2(n,s)}function y2(n){if(n.tag===13){var s=Aa(n,67108864);s!==null&&jn(s,n,67108864),e1(n,67108864)}}var Pc=!0;function O6(n,s,a,l){var h=Z.T;Z.T=null;var d=ct.p;try{ct.p=2,n1(n,s,a,l)}finally{ct.p=d,Z.T=h}}function L6(n,s,a,l){var h=Z.T;Z.T=null;var d=ct.p;try{ct.p=8,n1(n,s,a,l)}finally{ct.p=d,Z.T=h}}function n1(n,s,a,l){if(Pc){var h=i1(l);if(h===null)Hd(n,s,l,Uc,a),v2(n,l);else if(j6(h,n,s,a,l))l.stopPropagation();else if(v2(n,l),s&4&&-1<k6.indexOf(n)){for(;h!==null;){var d=gi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=si(d.pendingLanes);if(E!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var M=1<<31-an(E);w.entanglements[1]|=M,E&=~M}Ii(d),(Jt&6)===0&&(bc=Ae()+500,vl(0))}}break;case 13:w=Aa(d,2),w!==null&&jn(w,d,2),Sc(),e1(d,2)}if(d=i1(l),d===null&&Hd(n,s,l,Uc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Hd(n,s,l,null,a)}}function i1(n){return n=Gn(n),s1(n)}var Uc=null;function s1(n){if(Uc=null,n=qi(n),n!==null){var s=u(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=f(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Uc=n,null}function _2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xn()){case sn:return 2;case ze:return 8;case zn:case vn:return 32;case rn:return 268435456;default:return 32}default:return 32}}var r1=!1,Hs=null,Gs=null,Fs=null,Rl=new Map,xl=new Map,Qs=[],k6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v2(n,s){switch(n){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Rl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(s.pointerId)}}function Il(n,s,a,l,h,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},s!==null&&(s=gi(s),s!==null&&y2(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function j6(n,s,a,l,h){switch(s){case"focusin":return Hs=Il(Hs,n,s,a,l,h),!0;case"dragenter":return Gs=Il(Gs,n,s,a,l,h),!0;case"mouseover":return Fs=Il(Fs,n,s,a,l,h),!0;case"pointerover":var d=h.pointerId;return Rl.set(d,Il(Rl.get(d)||null,n,s,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,xl.set(d,Il(xl.get(d)||null,n,s,a,l,h)),!0}return!1}function E2(n){var s=qi(n.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){n.blockedOn=s,Su(n.priority,function(){if(a.tag===13){var l=kn();l=Es(l);var h=Aa(a,l);h!==null&&jn(h,a,l),e1(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=i1(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Qi=l,a.target.dispatchEvent(l),Qi=null}else return s=gi(a),s!==null&&y2(s),n.blockedOn=a,!1;s.shift()}return!0}function T2(n,s,a){Bc(n)&&a.delete(s)}function P6(){r1=!1,Hs!==null&&Bc(Hs)&&(Hs=null),Gs!==null&&Bc(Gs)&&(Gs=null),Fs!==null&&Bc(Fs)&&(Fs=null),Rl.forEach(T2),xl.forEach(T2)}function zc(n,s){n.blockedOn===s&&(n.blockedOn=null,r1||(r1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,P6)))}var qc=null;function b2(n){qc!==n&&(qc=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qc===n&&(qc=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],h=n[s+2];if(typeof l!="function"){if(s1(l||a)===null)continue;break}var d=gi(a);d!==null&&(n.splice(s,3),s-=3,sd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Dl(n){function s(M){return zc(M,n)}Hs!==null&&zc(Hs,n),Gs!==null&&zc(Gs,n),Fs!==null&&zc(Fs,n),Rl.forEach(s),xl.forEach(s);for(var a=0;a<Qs.length;a++){var l=Qs[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Qs.length&&(a=Qs[0],a.blockedOn===null);)E2(a),a.blockedOn===null&&Qs.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[Ce]||null;if(typeof d=="function")E||b2(a);else if(E){var w=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Ce]||null)w=E.formAction;else if(s1(h)!==null)continue}else w=E.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),b2(a)}}}function a1(n){this._internalRoot=n}Hc.prototype.render=a1.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=kn();g2(a,l,n,s,null,null)},Hc.prototype.unmount=a1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;g2(n.current,2,null,n,null,null),Sc(),s[qn]=null}};function Hc(n){this._internalRoot=n}Hc.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ts();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Qs.length&&s!==0&&s<Qs[a].priority;a++);Qs.splice(a,0,n),a===0&&E2(n)}};var w2=t.version;if(w2!=="19.1.0")throw Error(r(527,w2,"19.1.0"));ct.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var U6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{pe=Gc.inject(U6),Zt=Gc}catch{}}return Vl.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",h=U0,d=B0,E=z0,w=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=d2(n,1,!1,null,null,a,l,h,d,E,w,null),n[qn]=s.current,qd(n),new a1(s)},Vl.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,h="",d=U0,E=B0,w=z0,M=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),s=d2(n,1,!0,s,a??null,l,h,d,E,w,M,G),s.context=m2(null),a=s.current,l=kn(),l=Es(l),h=Is(l),h.callback=null,Ds(a,h,l),a=l,s.current.lanes=a,zi(s,a),Ii(s),n[qn]=s.current,qd(n),new Hc(s)},Vl.version="19.1.0",Vl}var N2;function $6(){if(N2)return u1.exports;N2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),u1.exports=K6(),u1.exports}var X6=$6(),d1={exports:{}},m1={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function Z6(){if(O2)return m1;O2=1;var e=Vh().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return m1.c=function(t){return e.H.useMemoCache(t)},m1}var L2;function J6(){return L2||(L2=1,d1.exports=Z6()),d1.exports}var we=J6();const W6=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}],Rn=X.createContext(null),t5=e=>{const t=we.c(10),{children:i}=e,[r,o]=X.useState(!0),u=X.useRef("prod"),[f,m]=X.useState(!1),y=X.useRef(null);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[0]=g):g=t[0];const v=X.useRef(g),T=X.useRef(null),b=X.useRef(null),R=X.useRef(null),V=X.useRef(null),P=X.useRef("");let k;t[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],t[1]=k):k=t[1];const z=X.useRef(k);let F,K;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(F=()=>(u.current==="testing"?(y.current||(console.log("Creating a peer connection!"),y.current=new RTCPeerConnection({iceServers:W6})),V.current||(V.current=new MediaStream),y.current.ontrack=Q=>{V.current.addTrack(Q.track)},o(!1)):(async()=>{const D=await(await fetch("https://boopp.metered.live/api/v1/turn/credentials?apiKey=4ed69c72a74b9dba8ccbda3d7e966f90f898")).json();console.log("Peer connection set up!"),y.current=new RTCPeerConnection({iceServers:D}),V.current||(V.current=new MediaStream),y.current.ontrack=C=>{V.current.addTrack(C.track)},o(!1)})(),(async()=>{const Q=await fetch("https://tenor.googleapis.com/v2/featured?key=AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k&client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low").then(e5);z.current=Q.results,console.log(z.current)})(),()=>{y.current&&(y.current.close(),y.current=null)}),K=[],t[2]=F,t[3]=K):(F=t[2],K=t[3]),X.useEffect(F,K),r){let Q;return t[4]===Symbol.for("react.memo_cache_sentinel")?(Q=S.jsx("div",{children:" Loading .. "}),t[4]=Q):Q=t[4],Q}let rt;t[5]!==f?(rt={peerConnection:y,iceCandidates:v,dataChannel:T,imageChannel:b,videoChannel:R,remoteStream:V,peerName:P,connected:f,setConnected:m,featuredGifs:z},t[5]=f,t[6]=rt):rt=t[6];let W;return t[7]!==i||t[8]!==rt?(W=S.jsx(Rn,{value:rt,children:i}),t[7]=i,t[8]=rt,t[9]=W):W=t[9],W};function e5(e){return e.json()}var _m=mu(),Nt=e=>du(e,_m),vm=mu();Nt.write=e=>du(e,vm);var Nh=mu();Nt.onStart=e=>du(e,Nh);var Em=mu();Nt.onFrame=e=>du(e,Em);var Tm=mu();Nt.onFinish=e=>du(e,Tm);var so=[];Nt.setTimeout=(e,t)=>{const i=Nt.now()+t,r=()=>{const u=so.findIndex(f=>f.cancel==r);~u&&so.splice(u,1),Ws-=~u?1:0},o={time:i,handler:e,cancel:r};return so.splice(M_(i),0,o),Ws+=1,V_(),o};var M_=e=>~(~so.findIndex(t=>t.time>e)||~so.length);Nt.cancel=e=>{Nh.delete(e),Em.delete(e),Tm.delete(e),_m.delete(e),vm.delete(e)};Nt.sync=e=>{L1=!0,Nt.batchedUpdates(e),L1=!1};Nt.throttle=e=>{let t;function i(){try{e(...t)}finally{t=null}}function r(...o){t=o,Nt.onStart(i)}return r.handler=e,r.cancel=()=>{Nh.delete(i),t=null},r};var bm=typeof window<"u"?window.requestAnimationFrame:()=>{};Nt.use=e=>bm=e;Nt.now=typeof performance<"u"?()=>performance.now():Date.now;Nt.batchedUpdates=e=>e();Nt.catch=console.error;Nt.frameLoop="always";Nt.advance=()=>{Nt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):O_()};var Js=-1,Ws=0,L1=!1;function du(e,t){L1?(t.delete(e),e(0)):(t.add(e),V_())}function V_(){Js<0&&(Js=0,Nt.frameLoop!=="demand"&&bm(N_))}function n5(){Js=-1}function N_(){~Js&&(bm(N_),Nt.batchedUpdates(O_))}function O_(){const e=Js;Js=Nt.now();const t=M_(Js);if(t&&(L_(so.splice(0,t),i=>i.handler()),Ws-=t),!Ws){n5();return}Nh.flush(),_m.flush(e?Math.min(64,Js-e):16.667),Em.flush(),vm.flush(),Tm.flush()}function mu(){let e=new Set,t=e;return{add(i){Ws+=t==e&&!e.has(i)?1:0,e.add(i)},delete(i){return Ws-=t==e&&e.has(i)?1:0,e.delete(i)},flush(i){t.size&&(e=new Set,Ws-=t.size,L_(t,r=>r(i)&&e.add(r)),Ws+=e.size,t=e)}}}function L_(e,t){e.forEach(i=>{try{t(i)}catch(r){Nt.catch(r)}})}var i5=Object.defineProperty,s5=(e,t)=>{for(var i in t)i5(e,i,{get:t[i],enumerable:!0})},fi={};s5(fi,{assign:()=>a5,colors:()=>er,createStringInterpolator:()=>Sm,skipAnimation:()=>j_,to:()=>k_,willAdvance:()=>Am});function k1(){}var r5=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),ht={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function ds(e,t){if(ht.arr(e)){if(!ht.arr(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return e===t}var zt=(e,t)=>e.forEach(t);function ji(e,t,i){if(ht.arr(e)){for(let r=0;r<e.length;r++)t.call(i,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(i,e[r],r)}var Un=e=>ht.und(e)?[]:ht.arr(e)?e:[e];function ql(e,t){if(e.size){const i=Array.from(e);e.clear(),zt(i,t)}}var jl=(e,...t)=>ql(e,i=>i(...t)),wm=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Sm,k_,er=null,j_=!1,Am=k1,a5=e=>{e.to&&(k_=e.to),e.now&&(Nt.now=e.now),e.colors!==void 0&&(er=e.colors),e.skipAnimation!=null&&(j_=e.skipAnimation),e.createStringInterpolator&&(Sm=e.createStringInterpolator),e.requestAnimationFrame&&Nt.use(e.requestAnimationFrame),e.batchedUpdates&&(Nt.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Am=e.willAdvance),e.frameLoop&&(Nt.frameLoop=e.frameLoop)},Hl=new Set,ni=[],g1=[],hh=0,Oh={get idle(){return!Hl.size&&!ni.length},start(e){hh>e.priority?(Hl.add(e),Nt.onStart(o5)):(P_(e),Nt(j1))},advance:j1,sort(e){if(hh)Nt.onFrame(()=>Oh.sort(e));else{const t=ni.indexOf(e);~t&&(ni.splice(t,1),U_(e))}},clear(){ni=[],Hl.clear()}};function o5(){Hl.forEach(P_),Hl.clear(),Nt(j1)}function P_(e){ni.includes(e)||U_(e)}function U_(e){ni.splice(l5(ni,t=>t.priority>e.priority),0,e)}function j1(e){const t=g1;for(let i=0;i<ni.length;i++){const r=ni[i];hh=r.priority,r.idle||(Am(r),r.advance(e),r.idle||t.push(r))}return hh=0,g1=ni,g1.length=0,ni=t,ni.length>0}function l5(e,t){const i=e.findIndex(t);return i<0?e.length:i}var u5={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},hi="[-+]?\\d*\\.?\\d+",fh=hi+"%";function Lh(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var c5=new RegExp("rgb"+Lh(hi,hi,hi)),h5=new RegExp("rgba"+Lh(hi,hi,hi,hi)),f5=new RegExp("hsl"+Lh(hi,fh,fh)),d5=new RegExp("hsla"+Lh(hi,fh,fh,hi)),m5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,g5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,p5=/^#([0-9a-fA-F]{6})$/,y5=/^#([0-9a-fA-F]{8})$/;function _5(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=p5.exec(e))?parseInt(t[1]+"ff",16)>>>0:er&&er[e]!==void 0?er[e]:(t=c5.exec(e))?(Xa(t[1])<<24|Xa(t[2])<<16|Xa(t[3])<<8|255)>>>0:(t=h5.exec(e))?(Xa(t[1])<<24|Xa(t[2])<<16|Xa(t[3])<<8|P2(t[4]))>>>0:(t=m5.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=y5.exec(e))?parseInt(t[1],16)>>>0:(t=g5.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=f5.exec(e))?(k2(j2(t[1]),Fc(t[2]),Fc(t[3]))|255)>>>0:(t=d5.exec(e))?(k2(j2(t[1]),Fc(t[2]),Fc(t[3]))|P2(t[4]))>>>0:null}function p1(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function k2(e,t,i){const r=i<.5?i*(1+t):i+t-i*t,o=2*i-r,u=p1(o,r,e+1/3),f=p1(o,r,e),m=p1(o,r,e-1/3);return Math.round(u*255)<<24|Math.round(f*255)<<16|Math.round(m*255)<<8}function Xa(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function j2(e){return(parseFloat(e)%360+360)%360/360}function P2(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Fc(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function U2(e){let t=_5(e);if(t===null)return e;t=t||0;const i=(t&4278190080)>>>24,r=(t&16711680)>>>16,o=(t&65280)>>>8,u=(t&255)/255;return`rgba(${i}, ${r}, ${o}, ${u})`}var Zl=(e,t,i)=>{if(ht.fun(e))return e;if(ht.arr(e))return Zl({range:e,output:t,extrapolate:i});if(ht.str(e.output[0]))return Sm(e);const r=e,o=r.output,u=r.range||[0,1],f=r.extrapolateLeft||r.extrapolate||"extend",m=r.extrapolateRight||r.extrapolate||"extend",y=r.easing||(g=>g);return g=>{const v=E5(g,u);return v5(g,u[v],u[v+1],o[v],o[v+1],y,f,m,r.map)}};function v5(e,t,i,r,o,u,f,m,y){let g=y?y(e):e;if(g<t){if(f==="identity")return g;f==="clamp"&&(g=t)}if(g>i){if(m==="identity")return g;m==="clamp"&&(g=i)}return r===o?r:t===i?e<=t?r:o:(t===-1/0?g=-g:i===1/0?g=g-t:g=(g-t)/(i-t),g=u(g),r===-1/0?g=-g:o===1/0?g=g+r:g=g*(o-r)+r,g)}function E5(e,t){for(var i=1;i<t.length-1&&!(t[i]>=e);++i);return i-1}var T5={linear:e=>e},Jl=Symbol.for("FluidValue.get"),uo=Symbol.for("FluidValue.observers"),ti=e=>!!(e&&e[Jl]),Sn=e=>e&&e[Jl]?e[Jl]():e,B2=e=>e[uo]||null;function b5(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Wl(e,t){const i=e[uo];i&&i.forEach(r=>{b5(r,t)})}var B_=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");w5(this,e)}},w5=(e,t)=>z_(e,Jl,t);function Eo(e,t){if(e[Jl]){let i=e[uo];i||z_(e,uo,i=new Set),i.has(t)||(i.add(t),e.observerAdded&&e.observerAdded(i.size,t))}return t}function tu(e,t){const i=e[uo];if(i&&i.has(t)){const r=i.size-1;r?i.delete(t):e[uo]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var z_=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),nh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,S5=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,z2=new RegExp(`(${nh.source})(%|[a-z]+)`,"i"),A5=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,kh=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,q_=e=>{const[t,i]=C5(e);if(!t||wm())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(i&&i.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||e}else{if(i&&kh.test(i))return q_(i);if(i)return i}return e},C5=e=>{const t=kh.exec(e);if(!t)return[,];const[,i,r]=t;return[i,r]},y1,R5=(e,t,i,r,o)=>`rgba(${Math.round(t)}, ${Math.round(i)}, ${Math.round(r)}, ${o})`,H_=e=>{y1||(y1=er?new RegExp(`(${Object.keys(er).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(u=>Sn(u).replace(kh,q_).replace(S5,U2).replace(y1,U2)),i=t.map(u=>u.match(nh).map(Number)),o=i[0].map((u,f)=>i.map(m=>{if(!(f in m))throw Error('The arity of each "output" value must be equal');return m[f]})).map(u=>Zl({...e,output:u}));return u=>{var y;const f=!z2.test(t[0])&&((y=t.find(g=>z2.test(g)))==null?void 0:y.replace(nh,""));let m=0;return t[0].replace(nh,()=>`${o[m++](u)}${f||""}`).replace(A5,R5)}},Cm="react-spring: ",G_=e=>{const t=e;let i=!1;if(typeof t!="function")throw new TypeError(`${Cm}once requires a function parameter`);return(...r)=>{i||(t(...r),i=!0)}},x5=G_(console.warn);function I5(){x5(`${Cm}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var D5=G_(console.warn);function M5(){D5(`${Cm}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function jh(e){return ht.str(e)&&(e[0]=="#"||/\d/.test(e)||!wm()&&kh.test(e)||e in(er||{}))}var Rm=wm()?X.useEffect:X.useLayoutEffect,V5=()=>{const e=X.useRef(!1);return Rm(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function F_(){const e=X.useState()[1],t=V5();return()=>{t.current&&e(Math.random())}}var Q_=e=>X.useEffect(e,N5),N5=[];function q2(e){const t=X.useRef(void 0);return X.useEffect(()=>{t.current=e}),t.current}var eu=Symbol.for("Animated:node"),O5=e=>!!e&&e[eu]===e,Vi=e=>e&&e[eu],xm=(e,t)=>r5(e,eu,t),Ph=e=>e&&e[eu]&&e[eu].getPayload(),Y_=class{constructor(){xm(this,this)}getPayload(){return this.payload||[]}},Uh=class K_ extends Y_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ht.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new K_(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,i){return ht.num(t)&&(this.lastPosition=t,i&&(t=Math.round(t/i)*i,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ht.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},dh=class $_ extends Uh{constructor(t){super(0),this._string=null,this._toString=Zl({output:[t,t]})}static create(t){return new $_(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ht.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Zl({output:[this.getValue(),t]})),this._value=0,super.reset()}},mh={dependencies:null},Bh=class extends Y_{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return ji(this.source,(i,r)=>{O5(i)?t[r]=i.getValue(e):ti(i)?t[r]=Sn(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&zt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return ji(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){mh.dependencies&&ti(e)&&mh.dependencies.add(e);const t=Ph(e);t&&zt(t,i=>this.add(i))}},L5=class X_ extends Bh{constructor(t){super(t)}static create(t){return new X_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const i=this.getPayload();return t.length==i.length?i.map((r,o)=>r.setValue(t[o])).some(Boolean):(super.setValue(t.map(k5)),!0)}};function k5(e){return(jh(e)?dh:Uh).create(e)}function P1(e){const t=Vi(e);return t?t.constructor:ht.arr(e)?L5:jh(e)?dh:Uh}var H2=(e,t)=>{const i=!ht.fun(e)||e.prototype&&e.prototype.isReactComponent;return X.forwardRef((r,o)=>{const u=X.useRef(null),f=i&&X.useCallback(V=>{u.current=U5(o,V)},[o]),[m,y]=P5(r,t),g=F_(),v=()=>{const V=u.current;if(i&&!V)return;(V?t.applyAnimatedValues(V,m.getValue(!0)):!1)===!1&&g()},T=new j5(v,y),b=X.useRef(void 0);Rm(()=>(b.current=T,zt(y,V=>Eo(V,T)),()=>{b.current&&(zt(b.current.deps,V=>tu(V,b.current)),Nt.cancel(b.current.update))})),X.useEffect(v,[]),Q_(()=>()=>{const V=b.current;zt(V.deps,P=>tu(P,V))});const R=t.getComponentProps(m.getValue());return X.createElement(e,{...R,ref:f})})},j5=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Nt.write(this.update)}};function P5(e,t){const i=new Set;return mh.dependencies=i,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Bh(e),mh.dependencies=null,[e,i]}function U5(e,t){return e&&(ht.fun(e)?e(t):e.current=t),t}var G2=Symbol.for("AnimatedComponent"),B5=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=o=>new Bh(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:r},u=f=>{const m=F2(f)||"Anonymous";return ht.str(f)?f=u[f]||(u[f]=H2(f,o)):f=f[G2]||(f[G2]=H2(f,o)),f.displayName=`Animated(${m})`,f};return ji(e,(f,m)=>{ht.arr(e)&&(m=F2(f)),u[m]=u(f)}),{animated:u}},F2=e=>ht.str(e)?e:e&&ht.str(e.displayName)?e.displayName:ht.fun(e)&&e.name||null;function $r(e,...t){return ht.fun(e)?e(...t):e}var Gl=(e,t)=>e===!0||!!(t&&e&&(ht.fun(e)?e(t):Un(e).includes(t))),Z_=(e,t)=>ht.obj(e)?t&&e[t]:e,J_=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,z5=e=>e,Im=(e,t=z5)=>{let i=q5;e.default&&e.default!==!0&&(e=e.default,i=Object.keys(e));const r={};for(const o of i){const u=t(e[o],o);ht.und(u)||(r[o]=u)}return r},q5=["config","onProps","onStart","onChange","onPause","onResume","onRest"],H5={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function G5(e){const t={};let i=0;if(ji(e,(r,o)=>{H5[o]||(t[o]=r,i++)}),i)return t}function W_(e){const t=G5(e);if(t){const i={to:t};return ji(e,(r,o)=>o in t||(i[o]=r)),i}return{...e}}function nu(e){return e=Sn(e),ht.arr(e)?e.map(nu):jh(e)?fi.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function F5(e){for(const t in e)return!0;return!1}function U1(e){return ht.fun(e)||ht.arr(e)&&ht.obj(e[0])}function Q5(e,t){var i;(i=e.ref)==null||i.delete(e),t==null||t.delete(e)}function Y5(e,t){var i;t&&e.ref!==t&&((i=e.ref)==null||i.delete(e),t.add(e),e.ref=t)}var B1={default:{tension:170,friction:26},stiff:{tension:210,friction:20}},z1={...B1.default,mass:1,damping:1,easing:T5.linear,clamp:!1},K5=class{constructor(){this.velocity=0,Object.assign(this,z1)}};function $5(e,t,i){i&&(i={...i},Q2(i,t),t={...i,...t}),Q2(e,t),Object.assign(e,t);for(const f in z1)e[f]==null&&(e[f]=z1[f]);let{frequency:r,damping:o}=e;const{mass:u}=e;return ht.und(r)||(r<.01&&(r=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/r,2)*u,e.friction=4*Math.PI*o*u/r),e}function Q2(e,t){if(!ht.und(t.decay))e.duration=void 0;else{const i=!ht.und(t.tension)||!ht.und(t.friction);(i||!ht.und(t.frequency)||!ht.und(t.damping)||!ht.und(t.mass))&&(e.duration=void 0,e.decay=void 0),i&&(e.frequency=void 0)}}var Y2=[],X5=class{constructor(){this.changed=!1,this.values=Y2,this.toValues=null,this.fromValues=Y2,this.config=new K5,this.immediate=!1}};function tv(e,{key:t,props:i,defaultProps:r,state:o,actions:u}){return new Promise((f,m)=>{let y,g,v=Gl(i.cancel??(r==null?void 0:r.cancel),t);if(v)R();else{ht.und(i.pause)||(o.paused=Gl(i.pause,t));let V=r==null?void 0:r.pause;V!==!0&&(V=o.paused||Gl(V,t)),y=$r(i.delay||0,t),V?(o.resumeQueue.add(b),u.pause()):(u.resume(),b())}function T(){o.resumeQueue.add(b),o.timeouts.delete(g),g.cancel(),y=g.time-Nt.now()}function b(){y>0&&!fi.skipAnimation?(o.delayed=!0,g=Nt.setTimeout(R,y),o.pauseQueue.add(T),o.timeouts.add(g)):R()}function R(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(T),o.timeouts.delete(g),e<=(o.cancelId||0)&&(v=!0);try{u.start({...i,callId:e,cancel:v},f)}catch(V){m(V)}}})}var Dm=(e,t)=>t.length==1?t[0]:t.some(i=>i.cancelled)?ro(e.get()):t.every(i=>i.noop)?ev(e.get()):ci(e.get(),t.every(i=>i.finished)),ev=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),ci=(e,t,i=!1)=>({value:e,finished:t,cancelled:i}),ro=e=>({value:e,cancelled:!0,finished:!1});function nv(e,t,i,r){const{callId:o,parentId:u,onRest:f}=t,{asyncTo:m,promise:y}=i;return!u&&e===m&&!t.reset?y:i.promise=(async()=>{i.asyncId=o,i.asyncTo=e;const g=Im(t,(k,z)=>z==="onRest"?void 0:k);let v,T;const b=new Promise((k,z)=>(v=k,T=z)),R=k=>{const z=o<=(i.cancelId||0)&&ro(r)||o!==i.asyncId&&ci(r,!1);if(z)throw k.result=z,T(k),k},V=(k,z)=>{const F=new K2,K=new $2;return(async()=>{if(fi.skipAnimation)throw iu(i),K.result=ci(r,!1),T(K),K;R(F);const rt=ht.obj(k)?{...k}:{...z,to:k};rt.parentId=o,ji(g,(Q,D)=>{ht.und(rt[D])&&(rt[D]=Q)});const W=await r.start(rt);return R(F),i.paused&&await new Promise(Q=>{i.resumeQueue.add(Q)}),W})()};let P;if(fi.skipAnimation)return iu(i),ci(r,!1);try{let k;ht.arr(e)?k=(async z=>{for(const F of z)await V(F)})(e):k=Promise.resolve(e(V,r.stop.bind(r))),await Promise.all([k.then(v),b]),P=ci(r.get(),!0,!1)}catch(k){if(k instanceof K2)P=k.result;else if(k instanceof $2)P=k.result;else throw k}finally{o==i.asyncId&&(i.asyncId=u,i.asyncTo=u?m:void 0,i.promise=u?y:void 0)}return ht.fun(f)&&Nt.batchedUpdates(()=>{f(P,r,r.item)}),P})()}function iu(e,t){ql(e.timeouts,i=>i.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var K2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},$2=class extends Error{constructor(){super("SkipAnimationSignal")}},q1=e=>e instanceof Mm,Z5=1,Mm=class extends B_{constructor(){super(...arguments),this.id=Z5++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Vi(this);return e&&e.getValue()}to(...e){return fi.to(this,e)}interpolate(...e){return I5(),fi.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Wl(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Oh.sort(this),Wl(this,{type:"priority",parent:this,priority:e})}},Jr=Symbol.for("SpringPhase"),iv=1,H1=2,G1=4,_1=e=>(e[Jr]&iv)>0,Ks=e=>(e[Jr]&H1)>0,Nl=e=>(e[Jr]&G1)>0,X2=(e,t)=>t?e[Jr]|=H1|iv:e[Jr]&=~H1,Z2=(e,t)=>t?e[Jr]|=G1:e[Jr]&=~G1,J5=class extends Mm{constructor(e,t){if(super(),this.animation=new X5,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ht.und(e)||!ht.und(t)){const i=ht.obj(e)?{...e}:{...t,from:e};ht.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Ks(this)||this._state.asyncTo)||Nl(this)}get goal(){return Sn(this.animation.to)}get velocity(){const e=Vi(this);return e instanceof Uh?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return _1(this)}get isAnimating(){return Ks(this)}get isPaused(){return Nl(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{toValues:o}=r;const{config:u}=r,f=Ph(r.to);!f&&ti(r.to)&&(o=Un(Sn(r.to))),r.values.forEach((g,v)=>{if(g.done)return;const T=g.constructor==dh?1:f?f[v].lastPosition:o[v];let b=r.immediate,R=T;if(!b){if(R=g.lastPosition,u.tension<=0){g.done=!0;return}let V=g.elapsedTime+=e;const P=r.fromValues[v],k=g.v0!=null?g.v0:g.v0=ht.arr(u.velocity)?u.velocity[v]:u.velocity;let z;const F=u.precision||(P==T?.005:Math.min(1,Math.abs(T-P)*.001));if(ht.und(u.duration))if(u.decay){const K=u.decay===!0?.998:u.decay,rt=Math.exp(-(1-K)*V);R=P+k/(1-K)*(1-rt),b=Math.abs(g.lastPosition-R)<=F,z=k*rt}else{z=g.lastVelocity==null?k:g.lastVelocity;const K=u.restVelocity||F/10,rt=u.clamp?0:u.bounce,W=!ht.und(rt),Q=P==T?g.v0>0:P<T;let D,C=!1;const x=1,L=Math.ceil(e/x);for(let O=0;O<L&&(D=Math.abs(z)>K,!(!D&&(b=Math.abs(T-R)<=F,b)));++O){W&&(C=R==T||R>T==Q,C&&(z=-z*rt,R=T));const U=-u.tension*1e-6*(R-T),I=-u.friction*.001*z,Mt=(U+I)/u.mass;z=z+Mt*x,R=R+z*x}}else{let K=1;u.duration>0&&(this._memoizedDuration!==u.duration&&(this._memoizedDuration=u.duration,g.durationProgress>0&&(g.elapsedTime=u.duration*g.durationProgress,V=g.elapsedTime+=e)),K=(u.progress||0)+V/this._memoizedDuration,K=K>1?1:K<0?0:K,g.durationProgress=K),R=P+u.easing(K)*(T-P),z=(R-g.lastPosition)/e,b=K==1}g.lastVelocity=z,Number.isNaN(R)&&(console.warn("Got NaN while animating:",this),b=!0)}f&&!f[v].done&&(b=!1),b?g.done=!0:t=!1,g.setValue(R,u.round)&&(i=!0)});const m=Vi(this),y=m.getValue();if(t){const g=Sn(r.to);(y!==g||i)&&!u.decay?(m.setValue(g),this._onChange(g)):i&&u.decay&&this._onChange(y),this._stop()}else i&&this._onChange(y)}set(e){return Nt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ks(this)){const{to:e,config:t}=this.animation;Nt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return ht.und(e)?(i=this.queue||[],this.queue=[]):i=[ht.obj(e)?e:{...t,to:e}],Promise.all(i.map(r=>this._update(r))).then(r=>Dm(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),iu(this._state,e&&this._lastCallId),Nt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=ht.obj(i)?i[t]:i,(i==null||U1(i))&&(i=void 0),r=ht.obj(r)?r[t]:r,r==null&&(r=void 0);const o={to:i,from:r};return _1(this)||(e.reverse&&([i,r]=[r,i]),r=Sn(r),ht.und(r)?Vi(this)||this._set(i):this._set(r)),o}_update({...e},t){const{key:i,defaultProps:r}=this;e.default&&Object.assign(r,Im(e,(f,m)=>/^on/.test(m)?Z_(f,i):f)),W2(this,e,"onProps"),Ll(this,"onProps",e,this);const o=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const u=this._state;return tv(++this._lastCallId,{key:i,props:e,defaultProps:r,state:u,actions:{pause:()=>{Nl(this)||(Z2(this,!0),jl(u.pauseQueue),Ll(this,"onPause",ci(this,Ol(this,this.animation.to)),this))},resume:()=>{Nl(this)&&(Z2(this,!1),Ks(this)&&this._resume(),jl(u.resumeQueue),Ll(this,"onResume",ci(this,Ol(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(f=>{if(e.loop&&f.finished&&!(t&&f.noop)){const m=sv(e);if(m)return this._update(m,!0)}return f})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(ro(this));const r=!ht.und(e.to),o=!ht.und(e.from);if(r||o)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(ro(this));const{key:u,defaultProps:f,animation:m}=this,{to:y,from:g}=m;let{to:v=y,from:T=g}=e;o&&!r&&(!t.default||ht.und(v))&&(v=T),t.reverse&&([v,T]=[T,v]);const b=!ds(T,g);b&&(m.from=T),T=Sn(T);const R=!ds(v,y);R&&this._focus(v);const V=U1(t.to),{config:P}=m,{decay:k,velocity:z}=P;(r||o)&&(P.velocity=0),t.config&&!V&&$5(P,$r(t.config,u),t.config!==f.config?$r(f.config,u):void 0);let F=Vi(this);if(!F||ht.und(v))return i(ci(this,!0));const K=ht.und(t.reset)?o&&!t.default:!ht.und(T)&&Gl(t.reset,u),rt=K?T:this.get(),W=nu(v),Q=ht.num(W)||ht.arr(W)||jh(W),D=!V&&(!Q||Gl(f.immediate||t.immediate,u));if(R){const O=P1(v);if(O!==F.constructor)if(D)F=this._set(W);else throw Error(`Cannot animate between ${F.constructor.name} and ${O.name}, as the "to" prop suggests`)}const C=F.constructor;let x=ti(v),L=!1;if(!x){const O=K||!_1(this)&&b;(R||O)&&(L=ds(nu(rt),W),x=!L),(!ds(m.immediate,D)&&!D||!ds(P.decay,k)||!ds(P.velocity,z))&&(x=!0)}if(L&&Ks(this)&&(m.changed&&!K?x=!0:x||this._stop(y)),!V&&((x||ti(y))&&(m.values=F.getPayload(),m.toValues=ti(v)?null:C==dh?[1]:Un(W)),m.immediate!=D&&(m.immediate=D,!D&&!K&&this._set(y)),x)){const{onRest:O}=m;zt(t9,I=>W2(this,t,I));const U=ci(this,Ol(this,y));jl(this._pendingCalls,U),this._pendingCalls.add(i),m.changed&&Nt.batchedUpdates(()=>{var I;m.changed=!K,O==null||O(U,this),K?$r(f.onRest,U):(I=m.onStart)==null||I.call(m,U,this)})}K&&this._set(rt),V?i(nv(t.to,t,this._state,this)):x?this._start():Ks(this)&&!R?this._pendingCalls.add(i):i(ev(rt))}_focus(e){const t=this.animation;e!==t.to&&(B2(this)&&this._detach(),t.to=e,B2(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;ti(t)&&(Eo(t,this),q1(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;ti(e)&&tu(e,this)}_set(e,t=!0){const i=Sn(e);if(!ht.und(i)){const r=Vi(this);if(!r||!ds(i,r.getValue())){const o=P1(i);!r||r.constructor!=o?xm(this,o.create(i)):r.setValue(i),r&&Nt.batchedUpdates(()=>{this._onChange(i,t)})}}return Vi(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Ll(this,"onStart",ci(this,Ol(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),$r(this.animation.onChange,e,this)),$r(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Vi(this).reset(Sn(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ks(this)||(X2(this,!0),Nl(this)||this._resume())}_resume(){fi.skipAnimation?this.finish():Oh.start(this)}_stop(e,t){if(Ks(this)){X2(this,!1);const i=this.animation;zt(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),Wl(this,{type:"idle",parent:this});const r=t?ro(this.get()):ci(this.get(),Ol(this,e??i.to));jl(this._pendingCalls,r),i.changed&&(i.changed=!1,Ll(this,"onRest",r,this))}}};function Ol(e,t){const i=nu(t),r=nu(e.get());return ds(r,i)}function sv(e,t=e.loop,i=e.to){const r=$r(t);if(r){const o=r!==!0&&W_(r),u=(o||e).reverse,f=!o||o.reset;return su({...e,loop:t,default:!1,pause:void 0,to:!u||U1(i)?i:void 0,from:f?e.from:void 0,reset:f,...o})}}function su(e){const{to:t,from:i}=e=W_(e),r=new Set;return ht.obj(t)&&J2(t,r),ht.obj(i)&&J2(i,r),e.keys=r.size?Array.from(r):null,e}function W5(e){const t=su(e);return ht.und(t.default)&&(t.default=Im(t)),t}function J2(e,t){ji(e,(i,r)=>i!=null&&t.add(r))}var t9=["onStart","onRest","onChange","onPause","onResume"];function W2(e,t,i){e.animation[i]=t[i]!==J_(t,i)?Z_(t[i],e.key):void 0}function Ll(e,t,...i){var r,o,u,f;(o=(r=e.animation)[t])==null||o.call(r,...i),(f=(u=e.defaultProps)[t])==null||f.call(u,...i)}var e9=["onStart","onChange","onRest"],n9=1,i9=class{constructor(t,i){this.id=n9++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),i&&(this._flush=i),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((i,r)=>t[r]=i.get()),t}set(t){for(const i in t){const r=t[i];ht.und(r)||this.springs[i].set(r)}}update(t){return t&&this.queue.push(su(t)),this}start(t){let{queue:i}=this;return t?i=Un(t).map(su):this.queue=[],this._flush?this._flush(this,i):(uv(this,i),F1(this,i))}stop(t,i){if(t!==!!t&&(i=t),i){const r=this.springs;zt(Un(i),o=>r[o].stop(!!t))}else iu(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(ht.und(t))this.start({pause:!0});else{const i=this.springs;zt(Un(t),r=>i[r].pause())}return this}resume(t){if(ht.und(t))this.start({pause:!1});else{const i=this.springs;zt(Un(t),r=>i[r].resume())}return this}each(t){ji(this.springs,t)}_onFrame(){const{onStart:t,onChange:i,onRest:r}=this._events,o=this._active.size>0,u=this._changed.size>0;(o&&!this._started||u&&!this._started)&&(this._started=!0,ql(t,([y,g])=>{g.value=this.get(),y(g,this,this._item)}));const f=!o&&this._started,m=u||f&&r.size?this.get():null;u&&i.size&&ql(i,([y,g])=>{g.value=m,y(g,this,this._item)}),f&&(this._started=!1,ql(r,([y,g])=>{g.value=m,y(g,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Nt.onFrame(this._onFrame)}};function F1(e,t){return Promise.all(t.map(i=>rv(e,i))).then(i=>Dm(e,i))}async function rv(e,t,i){const{keys:r,to:o,from:u,loop:f,onRest:m,onResolve:y}=t,g=ht.obj(t.default)&&t.default;f&&(t.loop=!1),o===!1&&(t.to=null),u===!1&&(t.from=null);const v=ht.arr(o)||ht.fun(o)?o:void 0;v?(t.to=void 0,t.onRest=void 0,g&&(g.onRest=void 0)):zt(e9,P=>{const k=t[P];if(ht.fun(k)){const z=e._events[P];t[P]=({finished:F,cancelled:K})=>{const rt=z.get(k);rt?(F||(rt.finished=!1),K&&(rt.cancelled=!0)):z.set(k,{value:null,finished:F||!1,cancelled:K||!1})},g&&(g[P]=t[P])}});const T=e._state;t.pause===!T.paused?(T.paused=t.pause,jl(t.pause?T.pauseQueue:T.resumeQueue)):T.paused&&(t.pause=!0);const b=(r||Object.keys(e.springs)).map(P=>e.springs[P].start(t)),R=t.cancel===!0||J_(t,"cancel")===!0;(v||R&&T.asyncId)&&b.push(tv(++e._lastAsyncId,{props:t,state:T,actions:{pause:k1,resume:k1,start(P,k){R?(iu(T,e._lastAsyncId),k(ro(e))):(P.onRest=m,k(nv(v,P,T,e)))}}})),T.paused&&await new Promise(P=>{T.resumeQueue.add(P)});const V=Dm(e,await Promise.all(b));if(f&&V.finished&&!(i&&V.noop)){const P=sv(t,f,o);if(P)return uv(e,[P]),rv(e,P,!0)}return y&&Nt.batchedUpdates(()=>y(V,e,e.item)),V}function ty(e,t){const i={...e.springs};return t&&zt(Un(t),r=>{ht.und(r.keys)&&(r=su(r)),ht.obj(r.to)||(r={...r,to:void 0}),lv(i,r,o=>ov(o))}),av(e,i),i}function av(e,t){ji(t,(i,r)=>{e.springs[r]||(e.springs[r]=i,Eo(i,e))})}function ov(e,t){const i=new J5;return i.key=e,t&&Eo(i,t),i}function lv(e,t,i){t.keys&&zt(t.keys,r=>{(e[r]||(e[r]=i(r)))._prepareNode(t)})}function uv(e,t){zt(t,i=>{lv(e.springs,i,r=>ov(r,e))})}var s9=X.createContext({pause:!1,immediate:!1}),r9=()=>{const e=[],t=function(r){M5();const o=[];return zt(e,(u,f)=>{if(ht.und(r))o.push(u.start());else{const m=i(r,u,f);m&&o.push(u.start(m))}}),o};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const o=e.indexOf(r);~o&&e.splice(o,1)},t.pause=function(){return zt(e,r=>r.pause(...arguments)),this},t.resume=function(){return zt(e,r=>r.resume(...arguments)),this},t.set=function(r){zt(e,(o,u)=>{const f=ht.fun(r)?r(u,o):r;f&&o.set(f)})},t.start=function(r){const o=[];return zt(e,(u,f)=>{if(ht.und(r))o.push(u.start());else{const m=this._getProps(r,u,f);m&&o.push(u.start(m))}}),o},t.stop=function(){return zt(e,r=>r.stop(...arguments)),this},t.update=function(r){return zt(e,(o,u)=>o.update(this._getProps(r,o,u))),this};const i=function(r,o,u){return ht.fun(r)?r(u,o):r};return t._getProps=i,t};function a9(e,t,i){const r=ht.fun(t)&&t;r&&!i&&(i=[]);const o=X.useMemo(()=>r||arguments.length==3?r9():void 0,[]),u=X.useRef(0),f=F_(),m=X.useMemo(()=>({ctrls:[],queue:[],flush(z,F){const K=ty(z,F);return u.current>0&&!m.queue.length&&!Object.keys(K).some(W=>!z.springs[W])?F1(z,F):new Promise(W=>{av(z,K),m.queue.push(()=>{W(F1(z,F))}),f()})}}),[]),y=X.useRef([...m.ctrls]),g=X.useRef([]),v=q2(e)||0;X.useMemo(()=>{zt(y.current.slice(e,v),z=>{Q5(z,o),z.stop(!0)}),y.current.length=e,T(v,e)},[e]),X.useMemo(()=>{T(0,Math.min(v,e))},i);function T(z,F){for(let K=z;K<F;K++){const rt=y.current[K]||(y.current[K]=new i9(null,m.flush)),W=r?r(K,rt):t[K];W&&(g.current[K]=W5(W))}}const b=y.current.map((z,F)=>ty(z,g.current[F])),R=X.useContext(s9),V=q2(R),P=R!==V&&F5(R);Rm(()=>{u.current++,m.ctrls=y.current;const{queue:z}=m;z.length&&(m.queue=[],zt(z,F=>F())),zt(y.current,(F,K)=>{o==null||o.add(F),P&&F.start({default:R});const rt=g.current[K];rt&&(Y5(F,rt.ref),F.ref?F.queue.push(rt):F.start(rt))})}),Q_(()=>()=>{zt(m.ctrls,z=>z.stop(!0))});const k=b.map(z=>({...z}));return o?[k,o]:k}function ea(e,t){const i=ht.fun(e),[[r],o]=a9(1,i?e:[e],i?[]:t);return i||arguments.length==2?[r,o]:r}var o9=class extends Mm{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Zl(...t);const i=this._get(),r=P1(i);xm(this,r.create(i))}advance(e){const t=this._get(),i=this.get();ds(t,i)||(Vi(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&ey(this._active)&&v1(this)}_get(){const e=ht.arr(this.source)?this.source.map(Sn):Un(Sn(this.source));return this.calc(...e)}_start(){this.idle&&!ey(this._active)&&(this.idle=!1,zt(Ph(this),e=>{e.done=!1}),fi.skipAnimation?(Nt.batchedUpdates(()=>this.advance()),v1(this)):Oh.start(this))}_attach(){let e=1;zt(Un(this.source),t=>{ti(t)&&Eo(t,this),q1(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){zt(Un(this.source),e=>{ti(e)&&tu(e,this)}),this._active.clear(),v1(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Un(this.source).reduce((t,i)=>Math.max(t,(q1(i)?i.priority:0)+1),0))}};function l9(e){return e.idle!==!1}function ey(e){return!e.size||Array.from(e).every(l9)}function v1(e){e.idle||(e.idle=!0,zt(Ph(e),t=>{t.done=!0}),Wl(e,{type:"idle",parent:e}))}fi.assign({createStringInterpolator:H_,to:(e,t)=>new o9(e,t)});var u9=D_(),cv=/^--/;function c9(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!cv.test(e)&&!(Fl.hasOwnProperty(e)&&Fl[e])?t+"px":(""+t).trim()}var ny={};function h9(e,t){if(!e.nodeType||!e.setAttribute)return!1;const i=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:o,children:u,scrollTop:f,scrollLeft:m,viewBox:y,...g}=t,v=Object.values(g),T=Object.keys(g).map(b=>i||e.hasAttribute(b)?b:ny[b]||(ny[b]=b.replace(/([A-Z])/g,R=>"-"+R.toLowerCase())));u!==void 0&&(e.textContent=u);for(const b in o)if(o.hasOwnProperty(b)){const R=c9(b,o[b]);cv.test(b)?e.style.setProperty(b,R):e.style[b]=R}T.forEach((b,R)=>{e.setAttribute(b,v[R])}),r!==void 0&&(e.className=r),f!==void 0&&(e.scrollTop=f),m!==void 0&&(e.scrollLeft=m),y!==void 0&&e.setAttribute("viewBox",y)}var Fl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f9=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),d9=["Webkit","Ms","Moz","O"];Fl=Object.keys(Fl).reduce((e,t)=>(d9.forEach(i=>e[f9(i,t)]=e[t]),e),Fl);var m9=/^(matrix|translate|scale|rotate|skew)/,g9=/^(translate)/,p9=/^(rotate|skew)/,E1=(e,t)=>ht.num(e)&&e!==0?e+t:e,ih=(e,t)=>ht.arr(e)?e.every(i=>ih(i,t)):ht.num(e)?e===t:parseFloat(e)===t,y9=class extends Bh{constructor({x:e,y:t,z:i,...r}){const o=[],u=[];(e||t||i)&&(o.push([e||0,t||0,i||0]),u.push(f=>[`translate3d(${f.map(m=>E1(m,"px")).join(",")})`,ih(f,0)])),ji(r,(f,m)=>{if(m==="transform")o.push([f||""]),u.push(y=>[y,y===""]);else if(m9.test(m)){if(delete r[m],ht.und(f))return;const y=g9.test(m)?"px":p9.test(m)?"deg":"";o.push(Un(f)),u.push(m==="rotate3d"?([g,v,T,b])=>[`rotate3d(${g},${v},${T},${E1(b,y)})`,ih(b,0)]:g=>[`${m}(${g.map(v=>E1(v,y)).join(",")})`,ih(g,m.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new _9(o,u)),super(r)}},_9=class extends B_{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return zt(this.inputs,(i,r)=>{const o=Sn(i[0]),[u,f]=this.transforms[r](ht.arr(o)?o:i.map(Sn));e+=" "+u,t=t&&f}),t?"none":e}observerAdded(e){e==1&&zt(this.inputs,t=>zt(t,i=>ti(i)&&Eo(i,this)))}observerRemoved(e){e==0&&zt(this.inputs,t=>zt(t,i=>ti(i)&&tu(i,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Wl(this,e)}},v9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];fi.assign({batchedUpdates:u9.unstable_batchedUpdates,createStringInterpolator:H_,colors:u5});var E9=B5(v9,{applyAnimatedValues:h9,createAnimatedStyle:e=>new y9(e),getComponentProps:({scrollTop:e,scrollLeft:t,...i})=>i}),ms=E9.animated;function T9(e,t,i){return Math.max(t,Math.min(e,i))}const le={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function iy(e,t,i){return t===0||Math.abs(t)===1/0?Math.pow(e,i*5):e*t*i/(t+i*e)}function sy(e,t,i,r=.15){return r===0?T9(e,t,i):e<t?-iy(t-e,i-t,r)+t:e>i?+iy(e-i,i-t,r)+i:e}function b9(e,[t,i],[r,o]){const[[u,f],[m,y]]=e;return[sy(t,u,f,r),sy(i,m,y,o)]}function w9(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S9(e){var t=w9(e,"string");return typeof t=="symbol"?t:String(t)}function Me(e,t,i){return t=S9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ry(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function de(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ry(Object(i),!0).forEach(function(r){Me(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ry(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}const hv={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ay(e){return e?e[0].toUpperCase()+e.slice(1):""}const A9=["enter","leave"];function C9(e=!1,t){return e&&!A9.includes(t)}function R9(e,t="",i=!1){const r=hv[e],o=r&&r[t]||t;return"on"+ay(e)+ay(o)+(C9(i,o)?"Capture":"")}const x9=["gotpointercapture","lostpointercapture"];function I9(e){let t=e.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const r=x9.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:i}}function D9(e,t=""){const i=hv[e],r=i&&i[t]||t;return e+r}function zh(e){return"touches"in e}function fv(e){return zh(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function M9(e){return Array.from(e.touches).filter(t=>{var i,r;return t.target===e.currentTarget||((i=e.currentTarget)===null||i===void 0||(r=i.contains)===null||r===void 0?void 0:r.call(i,t.target))})}function V9(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function dv(e){return zh(e)?V9(e)[0]:e}function Q1(e,t){try{const i=t.clientX-e.clientX,r=t.clientY-e.clientY,o=(t.clientX+e.clientX)/2,u=(t.clientY+e.clientY)/2,f=Math.hypot(i,r);return{angle:-(Math.atan2(i,r)*180)/Math.PI,distance:f,origin:[o,u]}}catch{}return null}function N9(e){return M9(e).map(t=>t.identifier)}function oy(e,t){const[i,r]=Array.from(e.touches).filter(o=>t.includes(o.identifier));return Q1(i,r)}function T1(e){const t=dv(e);return zh(e)?t.identifier:t.pointerId}function co(e){const t=dv(e);return[t.clientX,t.clientY]}const ly=40,uy=800;function mv(e){let{deltaX:t,deltaY:i,deltaMode:r}=e;return r===1?(t*=ly,i*=ly):r===2&&(t*=uy,i*=uy),[t,i]}function O9(e){var t,i;const{scrollX:r,scrollY:o,scrollLeft:u,scrollTop:f}=e.currentTarget;return[(t=r??u)!==null&&t!==void 0?t:0,(i=o??f)!==null&&i!==void 0?i:0]}function L9(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u}=e;Object.assign(t,{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u})}return t}function gh(e,...t){return typeof e=="function"?e(...t):e}function k9(){}function j9(...e){return e.length===0?k9:e.length===1?e[0]:function(){let t;for(const i of e)t=i.apply(this,arguments)||t;return t}}function cy(e,t){return Object.assign({},t,e||{})}const P9=32;class gv{constructor(t,i,r){this.ctrl=t,this.args=i,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:i,ingKey:r,args:o}=this;i[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=o,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const i=this.state,r=this.config;i._active||(this.reset(),this.computeInitial(),i._active=!0,i.target=t.target,i.currentTarget=t.currentTarget,i.lastOffset=r.from?gh(r.from,i):i.offset,i.offset=i.lastOffset,i.startTime=i.timeStamp=t.timeStamp)}computeValues(t){const i=this.state;i._values=t,i.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:i,config:r,shared:o}=this;i.args=this.args;let u=0;if(t&&(i.event=t,r.preventDefault&&t.cancelable&&i.event.preventDefault(),i.type=t.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,L9(t)),o.down=o.pressed=o.buttons%2===1||o.touches>0,u=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime),i._active){const Q=i._delta.map(Math.abs);le.addTo(i._distance,Q)}this.axisIntent&&this.axisIntent(t);const[f,m]=i._movement,[y,g]=r.threshold,{_step:v,values:T}=i;if(r.hasCustomTransform?(v[0]===!1&&(v[0]=Math.abs(f)>=y&&T[0]),v[1]===!1&&(v[1]=Math.abs(m)>=g&&T[1])):(v[0]===!1&&(v[0]=Math.abs(f)>=y&&Math.sign(f)*y),v[1]===!1&&(v[1]=Math.abs(m)>=g&&Math.sign(m)*g)),i.intentional=v[0]!==!1||v[1]!==!1,!i.intentional)return;const b=[0,0];if(r.hasCustomTransform){const[Q,D]=T;b[0]=v[0]!==!1?Q-v[0]:0,b[1]=v[1]!==!1?D-v[1]:0}else b[0]=v[0]!==!1?f-v[0]:0,b[1]=v[1]!==!1?m-v[1]:0;this.restrictToAxis&&!i._blocked&&this.restrictToAxis(b);const R=i.offset,V=i._active&&!i._blocked||i.active;V&&(i.first=i._active&&!i.active,i.last=!i._active&&i.active,i.active=o[this.ingKey]=i._active,t&&(i.first&&("bounds"in r&&(i._bounds=gh(r.bounds,i)),this.setup&&this.setup()),i.movement=b,this.computeOffset()));const[P,k]=i.offset,[[z,F],[K,rt]]=i._bounds;i.overflow=[P<z?-1:P>F?1:0,k<K?-1:k>rt?1:0],i._movementBound[0]=i.overflow[0]?i._movementBound[0]===!1?i._movement[0]:i._movementBound[0]:!1,i._movementBound[1]=i.overflow[1]?i._movementBound[1]===!1?i._movement[1]:i._movementBound[1]:!1;const W=i._active?r.rubberband||[0,0]:[0,0];if(i.offset=b9(i._bounds,i.offset,W),i.delta=le.sub(i.offset,R),this.computeMovement(),V&&(!i.last||u>P9)){i.delta=le.sub(i.offset,R);const Q=i.delta.map(Math.abs);le.addTo(i.distance,Q),i.direction=i.delta.map(Math.sign),i._direction=i._delta.map(Math.sign),!i.first&&u>0&&(i.velocity=[Q[0]/u,Q[1]/u],i.timeDelta=u)}}emit(){const t=this.state,i=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const o=this.handler(de(de(de({},i),t),{},{[this.aliasKey]:t.values}));o!==void 0&&(t.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function U9([e,t],i){const r=Math.abs(e),o=Math.abs(t);if(r>o&&r>i)return"x";if(o>r&&o>i)return"y"}class gu extends gv{constructor(...t){super(...t),Me(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=le.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=le.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const i=this.state,r=this.config;if(!i.axis&&t){const o=typeof r.axisThreshold=="object"?r.axisThreshold[fv(t)]:r.axisThreshold;i.axis=U9(i._movement,o)}i._blocked=(r.lockDirection||!!r.axis)&&!i.axis||!!r.axis&&r.axis!==i.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const B9=e=>e,hy=.15,pv={enabled(e=!0){return e},eventOptions(e,t,i){return de(de({},i.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[hy,hy];case!1:return[0,0];default:return le.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return le.toVector(e)},transform(e,t,i){const r=e||i.shared.transform;return this.hasCustomTransform=!!r,r||B9},threshold(e){return le.toVector(e,0)}},z9=0,na=de(de({},pv),{},{axis(e,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(e=z9){return e},bounds(e={}){if(typeof e=="function")return u=>na.bounds(e(u));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:i=1/0,top:r=-1/0,bottom:o=1/0}=e;return[[t,i],[r,o]]}}),fy={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class q9 extends gu{constructor(...t){super(...t),Me(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const i=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),o={left:i.left-r.left+t.offset[0],right:i.right-r.right+t.offset[0],top:i.top-r.top+t.offset[1],bottom:i.bottom-r.bottom+t.offset[1]};t._bounds=na.bounds(o)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const i=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(i.pointerButtons)?!i.pointerButtons.includes(t.buttons):i.pointerButtons!==-1&&i.pointerButtons!==t.buttons))return;const o=this.ctrl.setEventIds(t);i.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(o&&o.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=T1(t),r._pointerActive=!0,this.computeValues(co(t)),this.computeInitial(),i.preventScrollAxis&&fv(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):i.delay>0?(this.setupDelayTrigger(t),i.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const i=this.state;i._active=!0,i._preventScroll=!0,i._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const i=this.state,r=this.config;if(!i._pointerActive)return;const o=T1(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;const u=co(t);if(document.pointerLockElement===t.target?i._delta=[t.movementX,t.movementY]:(i._delta=le.sub(u,i._values),this.computeValues(u)),le.addTo(i._movement,i._delta),this.compute(t),i._delayed&&i.intentional){this.timeoutStore.remove("dragDelay"),i.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!i._preventScroll)if(i.axis)if(i.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){i._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const i=this.state,r=this.config;if(!i._active||!i._pointerActive)return;const o=T1(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[u,f]=i._distance;if(i.tap=u<=r.tapsThreshold&&f<=r.tapsThreshold,i.tap&&r.filterTaps)i._force=!0;else{const[m,y]=i._delta,[g,v]=i._movement,[T,b]=r.swipe.velocity,[R,V]=r.swipe.distance,P=r.swipe.duration;if(i.elapsedTime<P){const k=Math.abs(m/i.timeDelta),z=Math.abs(y/i.timeDelta);k>T&&Math.abs(g)>R&&(i.swipe[0]=Math.sign(m)),z>b&&Math.abs(v)>V&&(i.swipe[1]=Math.sign(y))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const i=this.config,r=i.device;i.pointerLock&&t.currentTarget.requestPointerLock(),i.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,H9(t);const i=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",i),this.eventStore.add(this.sharedConfig.window,"touch","cancel",i),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const i=fy[t.key];if(i){const r=this.state,o=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=i(this.config.keyboardDisplacement,o),r._keyboardActive=!0,le.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in fy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const i=this.config.device;t(i,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(i,"change",this.pointerMove.bind(this)),t(i,"end",this.pointerUp.bind(this)),t(i,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function H9(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const pu=typeof window<"u"&&window.document&&window.document.createElement;function yv(){return pu&&"ontouchstart"in window}function G9(){return yv()||pu&&window.navigator.maxTouchPoints>1}function F9(){return pu&&"onpointerdown"in window}function Q9(){return pu&&"exitPointerLock"in window.document}function Y9(){try{return"constructor"in GestureEvent}catch{return!1}}const ei={isBrowser:pu,gesture:Y9(),touch:yv(),touchscreen:G9(),pointer:F9(),pointerLock:Q9()},K9=250,$9=180,X9=.5,Z9=50,J9=250,W9=10,dy={mouse:0,touch:0,pen:8},t7=de(de({},na),{},{device(e,t,{pointer:{touch:i=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&ei.pointerLock,ei.touch&&i?"touch":this.pointerLock?"mouse":ei.pointer&&!o?"pointer":ei.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&e?K9:void 0,!(!ei.touchscreen||i===!1))return e||(i!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:i=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&i},threshold(e,t,{filterTaps:i=!1,tapsThreshold:r=3,axis:o=void 0}){const u=le.toVector(e,i?r:o?1:0);return this.filterTaps=i,this.tapsThreshold=r,u},swipe({velocity:e=X9,distance:t=Z9,duration:i=J9}={}){return{velocity:this.transform(le.toVector(e)),distance:this.transform(le.toVector(t)),duration:i}},delay(e=0){switch(e){case!0:return $9;case!1:return 0;default:return e}},axisThreshold(e){return e?de(de({},dy),e):dy},keyboardDisplacement(e=W9){return e}});function _v(e){const[t,i]=e.overflow,[r,o]=e._delta,[u,f]=e._direction;(t<0&&r>0&&u<0||t>0&&r<0&&u>0)&&(e._movement[0]=e._movementBound[0]),(i<0&&o>0&&f<0||i>0&&o<0&&f>0)&&(e._movement[1]=e._movementBound[1])}const e7=30,n7=100;class i7 extends gv{constructor(...t){super(...t),Me(this,"ingKey","pinching"),Me(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:i,lastOffset:r}=this.state;t==="wheel"?this.state.offset=le.add(i,r):this.state.offset=[(1+i[0])*r[0],i[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:i}=this.state;this.state.movement=[t[0]/i[0],t[1]-i[1]]}axisIntent(){const t=this.state,[i,r]=t._movement;if(!t.axis){const o=Math.abs(i)*e7-Math.abs(r);o<0?t.axis="angle":o>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const i=this.state,r=this.ctrl.touchIds;if(i._active&&i._touchIds.every(u=>r.has(u))||r.size<2)return;this.start(t),i._touchIds=Array.from(r).slice(0,2);const o=oy(t,i._touchIds);o&&this.pinchStart(t,o)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const i=this.state,r=i._pointerEvents,o=this.ctrl.pointerIds;if(i._active&&Array.from(r.keys()).every(f=>o.has(f))||(r.size<2&&r.set(t.pointerId,t),i._pointerEvents.size<2))return;this.start(t);const u=Q1(...Array.from(r.values()));u&&this.pinchStart(t,u)}pinchStart(t,i){const r=this.state;r.origin=i.origin,this.computeValues([i.distance,i.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const i=oy(t,this.state._touchIds);i&&this.pinchMove(t,i)}pointerMove(t){const i=this.state._pointerEvents;if(i.has(t.pointerId)&&i.set(t.pointerId,t),!this.state._active)return;const r=Q1(...Array.from(i.values()));r&&this.pinchMove(t,r)}pinchMove(t,i){const r=this.state,o=r._values[1],u=i.angle-o;let f=0;Math.abs(u)>270&&(f+=Math.sign(u)),this.computeValues([i.distance,i.angle-360*f]),r.origin=i.origin,r.turns=f,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(i=>!this.ctrl.touchIds.has(i))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const i=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}i._pointerEvents.has(t.pointerId)&&i._pointerEvents.delete(t.pointerId),i._active&&i._pointerEvents.size<2&&(i._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const i=this.state;i._active||(this.start(t),this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const i=this.state;this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY];const r=i._movement;i._movement=[t.scale-1,t.rotation],i._delta=le.sub(i._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const i=this.config.modifierKey;i&&(Array.isArray(i)?!i.find(r=>t[r]):!t[i])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-mv(t)[1]/n7*r.offset[0],0],le.addTo(r._movement,r._delta),_v(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const i=this.config.device;i&&(t(i,"start",this[i+"Start"].bind(this)),t(i,"change",this[i+"Move"].bind(this)),t(i,"end",this[i+"End"].bind(this)),t(i,"cancel",this[i+"End"].bind(this)),t("lostPointerCapture","",this[i+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const s7=de(de({},pv),{},{device(e,t,{shared:i,pointer:{touch:r=!1}={}}){if(i.target&&!ei.touch&&ei.gesture)return"gesture";if(ei.touch&&r)return"touch";if(ei.touchscreen){if(ei.pointer)return"pointer";if(ei.touch)return"touch"}},bounds(e,t,{scaleBounds:i={},angleBounds:r={}}){const o=f=>{const m=cy(gh(i,f),{min:-1/0,max:1/0});return[m.min,m.max]},u=f=>{const m=cy(gh(r,f),{min:-1/0,max:1/0});return[m.min,m.max]};return typeof i!="function"&&typeof r!="function"?[o(),u()]:f=>[o(f),u(f)]},threshold(e,t,i){return this.lockDirection=i.axis==="lock",le.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});class r7 extends gu{constructor(...t){super(...t),Me(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(co(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const i=co(t),r=this.state;r._delta=le.sub(i,r._values),le.addTo(r._movement,r._delta),this.computeValues(i),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const a7=de(de({},na),{},{mouseOnly:(e=!0)=>e});class o7 extends gu{constructor(...t){super(...t),Me(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const i=this.state,r=O9(t);i._delta=le.sub(r,i._values),le.addTo(i._movement,i._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const l7=na;class u7 extends gu{constructor(...t){super(...t),Me(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const i=this.state;i._delta=mv(t),le.addTo(i._movement,i._delta),_v(i),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const c7=na;class h7 extends gu{constructor(...t){super(...t),Me(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(co(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const i=this.state;if(!i._active)return;i._active=!1;const r=co(t);i._movement=i._delta=le.sub(r,i._values),this.computeValues(r),this.compute(t),i.delta=i.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const f7=de(de({},na),{},{mouseOnly:(e=!0)=>e}),Vm=new Map,Y1=new Map;function vv(e){Vm.set(e.key,e.engine),Y1.set(e.key,e.resolver)}const Ev={key:"drag",engine:q9,resolver:t7},d7={key:"hover",engine:h7,resolver:f7},m7={key:"move",engine:r7,resolver:a7},g7={key:"pinch",engine:i7,resolver:s7},p7={key:"scroll",engine:o7,resolver:l7},y7={key:"wheel",engine:u7,resolver:c7};function _7(e,t){if(e==null)return{};var i={},r=Object.keys(e),o,u;for(u=0;u<r.length;u++)o=r[u],!(t.indexOf(o)>=0)&&(i[o]=e[o]);return i}function v7(e,t){if(e==null)return{};var i=_7(e,t),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)r=u[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const E7={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=ei.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},T7=["target","eventOptions","window","enabled","transform"];function sh(e={},t){const i={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":i[r]=o.call(i,e[r],r,e);break;case"object":i[r]=sh(e[r],o);break;case"boolean":o&&(i[r]=e[r]);break}return i}function b7(e,t,i={}){const r=e,{target:o,eventOptions:u,window:f,enabled:m,transform:y}=r,g=v7(r,T7);if(i.shared=sh({target:o,eventOptions:u,window:f,enabled:m,transform:y},E7),t){const v=Y1.get(t);i[t]=sh(de({shared:i.shared},g),v)}else for(const v in g){const T=Y1.get(v);T&&(i[v]=sh(de({shared:i.shared},g[v]),T))}return i}class Tv{constructor(t,i){Me(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=i}add(t,i,r,o,u){const f=this._listeners,m=D9(i,r),y=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=de(de({},y),u);t.addEventListener(m,o,g);const v=()=>{t.removeEventListener(m,o,g),f.delete(v)};return f.add(v),v}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class w7{constructor(){Me(this,"_timeouts",new Map)}add(t,i,r=140,...o){this.remove(t),this._timeouts.set(t,window.setTimeout(i,r,...o))}remove(t){const i=this._timeouts.get(t);i&&window.clearTimeout(i)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class S7{constructor(t){Me(this,"gestures",new Set),Me(this,"_targetEventStore",new Tv(this)),Me(this,"gestureEventStores",{}),Me(this,"gestureTimeoutStores",{}),Me(this,"handlers",{}),Me(this,"config",{}),Me(this,"pointerIds",new Set),Me(this,"touchIds",new Set),Me(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),A7(this,t)}setEventIds(t){if(zh(t))return this.touchIds=new Set(N9(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,i){this.handlers=t,this.nativeHandlers=i}applyConfig(t,i){this.config=b7(t,i,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const i=this.config.shared,r={};let o;if(!(i.target&&(o=i.target(),!o))){if(i.enabled){for(const f of this.gestures){const m=this.config[f],y=my(r,m.eventOptions,!!o);if(m.enabled){const g=Vm.get(f);new g(this,t,f).bind(y)}}const u=my(r,i.eventOptions,!!o);for(const f in this.nativeHandlers)u(f,"",m=>this.nativeHandlers[f](de(de({},this.state.shared),{},{event:m,args:t})),void 0,!0)}for(const u in r)r[u]=j9(...r[u]);if(!o)return r;for(const u in r){const{device:f,capture:m,passive:y}=I9(u);this._targetEventStore.add(o,f,"",r[u],{capture:m,passive:y})}}}}function Za(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Tv(e,t),e.gestureTimeoutStores[t]=new w7}function A7(e,t){t.drag&&Za(e,"drag"),t.wheel&&Za(e,"wheel"),t.scroll&&Za(e,"scroll"),t.move&&Za(e,"move"),t.pinch&&Za(e,"pinch"),t.hover&&Za(e,"hover")}const my=(e,t,i)=>(r,o,u,f={},m=!1)=>{var y,g;const v=(y=f.capture)!==null&&y!==void 0?y:t.capture,T=(g=f.passive)!==null&&g!==void 0?g:t.passive;let b=m?r:R9(r,o,v);i&&T&&(b+="Passive"),e[b]=e[b]||[],e[b].push(u)},C7=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function R7(e){const t={},i={},r=new Set;for(let o in e)C7.test(o)?(r.add(RegExp.lastMatch),i[o]=e[o]):t[o]=e[o];return[i,t,r]}function Ja(e,t,i,r,o,u){if(!e.has(i)||!Vm.has(r))return;const f=i+"Start",m=i+"End",y=g=>{let v;return g.first&&f in t&&t[f](g),i in t&&(v=t[i](g)),g.last&&m in t&&t[m](g),v};o[r]=y,u[r]=u[r]||{}}function x7(e,t){const[i,r,o]=R7(e),u={};return Ja(o,i,"onDrag","drag",u,t),Ja(o,i,"onWheel","wheel",u,t),Ja(o,i,"onScroll","scroll",u,t),Ja(o,i,"onPinch","pinch",u,t),Ja(o,i,"onMove","move",u,t),Ja(o,i,"onHover","hover",u,t),{handlers:u,config:t,nativeHandlers:r}}function bv(e,t={},i,r){const o=Xr.useMemo(()=>new S7(e),[]);if(o.applyHandlers(e,r),o.applyConfig(t,i),Xr.useEffect(o.effect.bind(o)),Xr.useEffect(()=>o.clean.bind(o),[]),t.target===void 0)return o.bind.bind(o)}function yu(e,t){return vv(Ev),bv({drag:e},t||{},"drag")}function I7(e){return e.forEach(vv),function(i,r){const{handlers:o,nativeHandlers:u,config:f}=x7(i,r||{});return bv(o,f,void 0,u)}}function D7(e,t){return I7([Ev,g7,p7,y7,m7,d7])(e,t||{})}const M7="_popup_972k0_1",V7={popup:M7},N7=e=>{const t=we.c(13),{message:i,onClose:r}=e,[o,u]=X.useState(!1),[f,m]=ea(O7),{x:y,y:g,opacity:v}=f;let T;t[0]!==m||t[1]!==r?(T=k=>{const{down:z,movement:F,direction:K}=k,[rt]=F,[W]=K;if(!z&&Math.abs(rt)>100){u(!0),m.start({x:W>0?500:-500,opacity:0,onRest:r});return}m.start({x:z?rt:0,opacity:1})},t[0]=m,t[1]=r,t[2]=T):T=t[2];const b=yu(T);if(o)return null;let R;t[3]!==b?(R=b(),t[3]=b,t[4]=R):R=t[4];let V;t[5]!==v||t[6]!==y||t[7]!==g?(V={x:y,y:g,opacity:v},t[5]=v,t[6]=y,t[7]=g,t[8]=V):V=t[8];let P;return t[9]!==i||t[10]!==R||t[11]!==V?(P=S.jsx(ms.div,{...R,className:V7.popup,style:V,children:i}),t[9]=i,t[10]=R,t[11]=V,t[12]=P):P=t[12],P};function O7(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}const wv=X.createContext(),_u=()=>X.useContext(wv),L7=({children:e})=>{const[t,i]=X.useState([]),r=(f,m={})=>{const y=Date.now();i(g=>[...g,{id:y,message:f,...m}]),m.persistent||setTimeout(()=>o(y),m.duration||3e3)},o=f=>{i(m=>m.filter(y=>y.id!==f))},u=X.useMemo(()=>({showNotification:r,removeNotification:o}),[]);return S.jsxs(wv,{value:u,children:[e,S.jsx("div",{style:{position:"fixed",top:20,right:0,left:0,display:"flex",flexDirection:"column",padding:20,gap:10,zIndex:10,pointerEvents:"none"},children:t.map(f=>S.jsx(N7,{...f,onClose:()=>o(f.id)},f.id))})]})};function ao(e){const t=e.current.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function k7(e,t){let i=0;return function(...r){const o=Date.now();o-i>=t&&(i=o,e.apply(this,r))}}function j7(e,t){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>e(...r),t)}}async function P7(e,t=32*1024){const i=[];let r=0;const o=await e.arrayBuffer();for(;r<o.byteLength;){const u=o.slice(r,r+t);i.push(u),r+=t,i.length%50===0&&await new Promise(f=>setTimeout(f,0))}return i}async function U7(e,t){let i=0;t.send(JSON.stringify({type:"imageStart",sentId:e.sentId,receivedId:e.receivedId}));for(const r of e.chunks)i++,t.send(r),i%50===0&&await new Promise(o=>setTimeout(o,0));t.send(JSON.stringify({type:"imageEnd",imageType:e.fileType}))}const K1=({type:e,content:t,replying:i,setReplying:r,selectedMessage:o,dataChannel:u,addMessage:f,sentId:m,inputRef:y,atBottomRef:g,chatBottom:v})=>{const T={type:e,content:t,sentId:m.current,receivedId:null},b={sentId:m.current,receivedId:null,type:e==="text"?e:"image",status:"sending",reaction:-1,content:t,deleted:0};if(i){const R={sentId:o.receivedId,receivedId:o.sentId};T.replyTo={...o,...R},b.replyTo=o,r(!1)}u.send(JSON.stringify(T)),f(b),m.current=m.current+1,y&&(y.current.value=""),ao(v)&&(g.current=!0),console.log("The value of isInViewPort is ",ao(v))};function B7(e){return e?new RegExp("^(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F|\\p{Emoji_Modifier_Base}(?:\\p{Emoji_Modifier})?|\\p{Extended_Pictographic})+$","u").test(e.trim()):void 0}const gy=e=>{let t;const i=new Set,r=(g,v)=>{const T=typeof g=="function"?g(t):g;if(!Object.is(T,t)){const b=t;t=v??(typeof T!="object"||T===null)?T:Object.assign({},t,T),i.forEach(R=>R(t,b))}},o=()=>t,m={setState:r,getState:o,getInitialState:()=>y,subscribe:g=>(i.add(g),()=>i.delete(g))},y=t=e(r,o,m);return m},z7=e=>e?gy(e):gy,q7=e=>e;function H7(e,t=q7){const i=Xr.useSyncExternalStore(e.subscribe,Xr.useCallback(()=>t(e.getState()),[e,t]),Xr.useCallback(()=>t(e.getInitialState()),[e,t]));return Xr.useDebugValue(i),i}const py=e=>{const t=z7(e),i=r=>H7(t,r);return Object.assign(i,t),i},Sv=e=>e?py(e):py,It=Sv(e=>({messages:[],addMessage:t=>e(i=>({messages:[...i.messages,t]})),removeMessage:(t,i)=>e(r=>({messages:r.messages.filter(o=>o.sentId!==t&&o.receivedId!==i)})),updateMessage:(t,i,r)=>e(o=>({messages:o.messages.map(u=>u.sentId===t&&u.receivedId===i?{...u,...r}:u)})),highlightMessage:(t,i)=>e(r=>({messages:r.messages.map(o=>o.sentId===t&&o.receivedId===i?{...o,highlight:!o.highlight}:o)})),replying:null,setReplying:t=>e(()=>({replying:t})),actionsShown:!1,setActionsShown:t=>e(()=>({actionsShown:t})),reactionsShown:!1,setReactionsShown:t=>e(()=>({reactionsShown:t})),newMessage:!1,setNewMessage:t=>e(()=>({newMessage:t})),incomingCall:!1,setIncomingCall:t=>e(()=>({incomingCall:t})),typing:!1,setTyping:t=>e(()=>({typing:t})),imageDialog:null,setImageDialog:t=>e(()=>({imageDialog:t})),videoCall:"hidden",setVideoCall:t=>e(()=>({videoCall:t})),settings:!1,setSettings:t=>e(()=>({settings:t}))}));Sv(e=>({}));const ii=X.createContext(null),G7=({children:e})=>{console.log("Chat context rendered!");const{dataChannel:t,imageChannel:i}=X.useContext(Rn),{showNotification:r}=_u(),o=X.useRef(null),u=X.useRef([]),f=X.useRef(0),m=X.useRef(null),y=X.useRef({x:0,y:0}),g=X.useRef(!1),v=X.useRef(null),T=X.useRef(!1),b=X.useRef(null),R=It(W=>W.addMessage),V=It(W=>W.updateMessage),P=It(W=>W.removeMessage),k=It(W=>W.setNewMessage),z=It(W=>W.setVideoCall),F=It(W=>W.setIncomingCall),K=It(W=>W.setTyping);X.useEffect(()=>(t.current.onmessage=W=>{let Q=JSON.parse(W.data);if(Q.type==="typing")clearTimeout(v.current),K(!0),v.current=setTimeout(()=>{K(!1)},1400);else if(Q.type==="text"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:Q.type,reaction:-1,content:Q.content,deleted:0,hightlight:!1,replyTo:Q.replyTo};ao(m)?(console.log("I am in the bottom!"),T.current=!0):k(!0);let C={type:"ack",sentId:Q.sentId,receivedId:Q.receivedId};t.current.send(JSON.stringify(C)),R(D)}else if(Q.type==="ack")V(Q.sentId,null,{status:"sent"});else if(Q.type==="reaction"){let D={type:"ackReaction",sentId:Q.id,reaction:Q.reaction};t.current.send(JSON.stringify(D)),V(Q.id,null,{reaction:Q.reaction})}else if(Q.type==="ackReaction")console.log("I have received an ackReaction message: ",Q),V(null,Q.sentId,{reaction:Q.reaction});else if(Q.type==="gif"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:"image",reaction:-1,content:Q.content,deleted:0,hightlight:!1,replyTo:Q.replyTo};ao(m)?T.current=!0:k(!0);let C={type:"gifAck",sentId:Q.sentId,receivedId:Q.receivedId};t.current.send(JSON.stringify(C)),R(D)}else if(Q.type==="gifAck")V(Q.sentId,Q.receivedId,{status:"sent"});else if(Q.type==="imageRequest"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:Q.type,reaction:-1,deleted:0,hightlight:!1,replyTo:Q.replyTo};ao(m)?T.current=!0:k(!0),R(D)}else if(Q.type==="imageAccept"){const D=u.current.find(C=>C.sentId===Q.sentId&&C.receivedId===Q.receivedId);console.log(D),(async()=>await U7(D,i.current))()}else if(Q.type==="imageReject")console.log("The image I sent was rejected!"),P(Q.sentId,Q.receivedId);else if(Q.type==="imageReceived")V(Q.sentId,Q.receivedId,{status:"sent"});else if(Q.type==="delete"){let D={type:"ackDeletion",sentId:Q.sentId};t.current.send(JSON.stringify(D)),V(null,Q.sentId,{type:"text",content:"This message has been deleted",deleted:2})}else Q.type==="ackDeletion"?V(Q.sentId,null,{type:"text",content:"This message has been deleted",deleted:2}):Q.type==="callRequest"?(console.log("The other peer is trying to call me!"),F(!0)):Q.type==="callCancel"?F(!1):Q.type==="callReject"?(r("Your call was rejected!"),z("hidden")):Q.type==="callAccept"?z("connected"):Q.type==="callEnd"&&z("hidden")},i.current.onmessage=W=>{if(typeof W.data=="string"){const Q=JSON.parse(W.data);if(Q.type==="imageStart")b.current={sentId:Q.receivedId,receivedId:Q.sentId,chunks:[]};else if(Q.type==="imageEnd"){const D=new Blob(b.current.chunks,{type:Q.imageType}),C=URL.createObjectURL(D);t.current.send(JSON.stringify({type:"imageReceived",sentId:b.current.receivedId,receivedId:b.current.sentId})),V(b.current.sentId,b.current.receivedId,{type:"image",content:C,status:"received"}),b.current=null}}else b.current.chunks.push(W.data)},()=>{t.current.onmessage=null,i.current.onmessage=null}),[]);const rt=X.useMemo(()=>({chatBottom:m,sentId:f,selectedMessage:o,pointerPosition:y,longPressed:g,atBottomRef:T,images:u,receivingImage:b}),[]);return S.jsx(ii,{value:rt,children:e})},F7="_navContainer_1vwj8_1",Q7="_logo_1vwj8_10",Y7="_navList_1vwj8_16",K7="_hamburger_1vwj8_30",Di={navContainer:F7,logo:Q7,navList:Y7,hamburger:K7};function $7(){const e=we.c(5);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=S.jsx("a",{href:"/",className:Di.logo,"aria-label":"Homepage",children:"boop"}),e[0]=t):t=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx("a",{className:Di.hamburger,"aria-label":"Expand for menu",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[S.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),S.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),S.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),e[1]=i):i=e[1];let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=S.jsx("li",{className:Di.navItem,children:S.jsx("a",{href:"#about",className:Di.navLink,children:"About"})}),e[2]=r):r=e[2];let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=S.jsx("li",{className:Di.navItem,children:S.jsx("a",{href:"#projects",className:Di.navLink,children:"Policy"})}),e[3]=o):o=e[3];let u;return e[4]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsxs("nav",{"aria-label":"Main Navigation",className:Di.navContainer,children:[t,i,S.jsxs("ul",{className:Di.navList,children:[r,o,S.jsx("li",{className:Di.navItem,children:S.jsx("a",{href:"#contact",className:Di.navLink,children:"Contact"})})]})]}),e[4]=u):u=e[4],u}const X7="_mainContainer_15mr1_1",Z7="_inputCard_15mr1_13",J7="_linkInput_15mr1_41",W7="_loaderWrapper_15mr1_71",tE="_loader_15mr1_71",kl={mainContainer:X7,inputCard:Z7,linkInput:J7,loaderWrapper:W7,loader:tE},eE=()=>{};var yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=function(e){const t=[];let i=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},nE=function(e){const t=[];let i=0,r=0;for(;i<e.length;){const o=e[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=e[i++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=e[i++],f=e[i++],m=e[i++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=e[i++],f=e[i++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Cv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const u=e[o],f=o+1<e.length,m=f?e[o+1]:0,y=o+2<e.length,g=y?e[o+2]:0,v=u>>2,T=(u&3)<<4|m>>4;let b=(m&15)<<2|g>>6,R=g&63;y||(R=64,f||(b=64)),r.push(i[v],i[T],i[b],i[R])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Av(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):nE(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const u=i[e.charAt(o++)],m=o<e.length?i[e.charAt(o)]:0;++o;const g=o<e.length?i[e.charAt(o)]:64;++o;const T=o<e.length?i[e.charAt(o)]:64;if(++o,u==null||m==null||g==null||T==null)throw new iE;const b=u<<2|m>>4;if(r.push(b),g!==64){const R=m<<4&240|g>>2;if(r.push(R),T!==64){const V=g<<6&192|T;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class iE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sE=function(e){const t=Av(e);return Cv.encodeByteArray(t,!0)},ph=function(e){return sE(e).replace(/\./g,"")},rE=function(e){try{return Cv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=()=>aE().__FIREBASE_DEFAULTS__,lE=()=>{if(typeof process>"u"||typeof yy>"u")return;const e=yy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},uE=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&rE(e[1]);return t&&JSON.parse(t)},Nm=()=>{try{return eE()||oE()||lE()||uE()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},cE=e=>{var t,i;return(i=(t=Nm())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[e]},hE=e=>{const t=cE(e);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Rv=()=>{var e;return(e=Nm())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(e){return e.endsWith(".cloudworkstations.dev")}async function dE(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=e.iat||0,u=e.sub||e.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ph(JSON.stringify(i)),ph(JSON.stringify(f)),""].join(".")}const Ql={};function gE(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ql))Ql[t]?e.emulator.push(t):e.prod.push(t);return e}function pE(e){let t=document.getElementById(e),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),i=!0),{created:i,element:t}}let _y=!1;function yE(e,t){if(typeof window>"u"||typeof document>"u"||!Om(window.location.host)||Ql[e]===t||Ql[e]||_y)return;Ql[e]=t;function i(b){return`__firebase__banner__${b}`}const r="__firebase__banner",u=gE().prod.length>0;function f(){const b=document.getElementById(r);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function y(b,R){b.setAttribute("width","24"),b.setAttribute("id",R),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{_y=!0,f()},b}function v(b,R){b.setAttribute("id",R),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=pE(r),R=i("text"),V=document.getElementById(R)||document.createElement("span"),P=i("learnmore"),k=document.getElementById(P)||document.createElement("a"),z=i("preprendIcon"),F=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const K=b.element;m(K),v(k,P);const rt=g();y(F,z),K.append(F,V,k,rt),document.body.appendChild(K)}u?(V.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vE(){var e;const t=(e=Nm())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EE(){return!vE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TE(){try{return typeof indexedDB=="object"}catch{return!1}}function bE(){return new Promise((e,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="FirebaseError";class To extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=wE,Object.setPrototypeOf(this,To.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xv.prototype.create)}}class xv{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?SE(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new To(o,m,r)}}function SE(e,t){return e.replace(AE,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const AE=/\{\$([^}]+)}/g;function yh(e,t){if(e===t)return!0;const i=Object.keys(e),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const u=e[o],f=t[o];if(vy(u)&&vy(f)){if(!yh(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function vy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(e){return e&&e._delegate?e._delegate:e}class ru{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new fE;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xE(t))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Kr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Kr){return this.instances.has(t)}getOptions(t=Kr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(t,i){var r;const o=this.normalizeInstanceIdentifier(i),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RE(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Kr){return this.component?this.component.multipleInstances?t:Kr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RE(e){return e===Kr?void 0:e}function xE(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new CE(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Qt||(Qt={}));const DE={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},ME=Qt.INFO,VE={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},NE=(e,t,...i)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),o=VE[t];if(o)console[o](`[${r}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Iv{constructor(t){this.name=t,this._logLevel=ME,this._logHandler=NE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...t),this._logHandler(this,Qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...t),this._logHandler(this,Qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...t),this._logHandler(this,Qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...t),this._logHandler(this,Qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...t),this._logHandler(this,Qt.ERROR,...t)}}const OE=(e,t)=>t.some(i=>e instanceof i);let Ey,Ty;function LE(){return Ey||(Ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kE(){return Ty||(Ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dv=new WeakMap,$1=new WeakMap,Mv=new WeakMap,b1=new WeakMap,Lm=new WeakMap;function jE(e){const t=new Promise((i,r)=>{const o=()=>{e.removeEventListener("success",u),e.removeEventListener("error",f)},u=()=>{i(nr(e.result)),o()},f=()=>{r(e.error),o()};e.addEventListener("success",u),e.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&Dv.set(i,e)}).catch(()=>{}),Lm.set(t,e),t}function PE(e){if($1.has(e))return;const t=new Promise((i,r)=>{const o=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",f),e.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",u),e.addEventListener("error",f),e.addEventListener("abort",f)});$1.set(e,t)}let X1={get(e,t,i){if(e instanceof IDBTransaction){if(t==="done")return $1.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Mv.get(e);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return nr(e[t])},set(e,t,i){return e[t]=i,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function UE(e){X1=e(X1)}function BE(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=e.call(w1(this),t,...i);return Mv.set(r,t.sort?t.sort():[t]),nr(r)}:kE().includes(e)?function(...t){return e.apply(w1(this),t),nr(Dv.get(this))}:function(...t){return nr(e.apply(w1(this),t))}}function zE(e){return typeof e=="function"?BE(e):(e instanceof IDBTransaction&&PE(e),OE(e,LE())?new Proxy(e,X1):e)}function nr(e){if(e instanceof IDBRequest)return jE(e);if(b1.has(e))return b1.get(e);const t=zE(e);return t!==e&&(b1.set(e,t),Lm.set(t,e)),t}const w1=e=>Lm.get(e);function qE(e,t,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(e,t),m=nr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(nr(f.result),y.oldVersion,y.newVersion,nr(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const HE=["get","getKey","getAll","getAllKeys","count"],GE=["put","add","delete","clear"],S1=new Map;function by(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(S1.get(t))return S1.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=GE.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||HE.includes(i)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[i](...m),o&&y.done]))[0]};return S1.set(t,u),u}UE(e=>({...e,get:(t,i,r)=>by(t,i)||e.get(t,i,r),has:(t,i)=>!!by(t,i)||e.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(QE(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function QE(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Z1="@firebase/app",wy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Iv("@firebase/app"),YE="@firebase/app-compat",KE="@firebase/analytics-compat",$E="@firebase/analytics",XE="@firebase/app-check-compat",ZE="@firebase/app-check",JE="@firebase/auth",WE="@firebase/auth-compat",t8="@firebase/database",e8="@firebase/data-connect",n8="@firebase/database-compat",i8="@firebase/functions",s8="@firebase/functions-compat",r8="@firebase/installations",a8="@firebase/installations-compat",o8="@firebase/messaging",l8="@firebase/messaging-compat",u8="@firebase/performance",c8="@firebase/performance-compat",h8="@firebase/remote-config",f8="@firebase/remote-config-compat",d8="@firebase/storage",m8="@firebase/storage-compat",g8="@firebase/firestore",p8="@firebase/ai",y8="@firebase/firestore-compat",_8="firebase",v8="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="[DEFAULT]",E8={[Z1]:"fire-core",[YE]:"fire-core-compat",[$E]:"fire-analytics",[KE]:"fire-analytics-compat",[ZE]:"fire-app-check",[XE]:"fire-app-check-compat",[JE]:"fire-auth",[WE]:"fire-auth-compat",[t8]:"fire-rtdb",[e8]:"fire-data-connect",[n8]:"fire-rtdb-compat",[i8]:"fire-fn",[s8]:"fire-fn-compat",[r8]:"fire-iid",[a8]:"fire-iid-compat",[o8]:"fire-fcm",[l8]:"fire-fcm-compat",[u8]:"fire-perf",[c8]:"fire-perf-compat",[h8]:"fire-rc",[f8]:"fire-rc-compat",[d8]:"fire-gcs",[m8]:"fire-gcs-compat",[g8]:"fire-fst",[y8]:"fire-fst-compat",[p8]:"fire-vertex","fire-js":"fire-js",[_8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,T8=new Map,W1=new Map;function Sy(e,t){try{e.container.addComponent(t)}catch(i){ys.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function vh(e){const t=e.name;if(W1.has(t))return ys.debug(`There were multiple attempts to register component ${t}.`),!1;W1.set(t,e);for(const i of _h.values())Sy(i,e);for(const i of T8.values())Sy(i,e);return!0}function b8(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function w8(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new xv("app","Firebase",S8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ru("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=v8;function Vv(e,t={}){let i=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:J1,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw ir.create("bad-app-name",{appName:String(o)});if(i||(i=Rv()),!i)throw ir.create("no-options");const u=_h.get(o);if(u){if(yh(i,u.options)&&yh(r,u.config))return u;throw ir.create("duplicate-app",{appName:o})}const f=new IE(o);for(const y of W1.values())f.addComponent(y);const m=new A8(i,r,f);return _h.set(o,m),m}function R8(e=J1){const t=_h.get(e);if(!t&&e===J1&&Rv())return Vv();if(!t)throw ir.create("no-app",{appName:e});return t}function oo(e,t,i){var r;let o=(r=E8[e])!==null&&r!==void 0?r:e;i&&(o+=`-${i}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ys.warn(m.join(" "));return}vh(new ru(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8="firebase-heartbeat-database",I8=1,au="firebase-heartbeat-store";let A1=null;function Nv(){return A1||(A1=qE(x8,I8,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(au)}catch(i){console.warn(i)}}}}).catch(e=>{throw ir.create("idb-open",{originalErrorMessage:e.message})})),A1}async function D8(e){try{const i=(await Nv()).transaction(au),r=await i.objectStore(au).get(Ov(e));return await i.done,r}catch(t){if(t instanceof To)ys.warn(t.message);else{const i=ir.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ys.warn(i.message)}}}async function Ay(e,t){try{const r=(await Nv()).transaction(au,"readwrite");await r.objectStore(au).put(t,Ov(e)),await r.done}catch(i){if(i instanceof To)ys.warn(i.message);else{const r=ir.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});ys.warn(r.message)}}}function Ov(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=1024,V8=30;class N8{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new L8(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Cy();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>V8){const f=k8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ys.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Cy(),{heartbeatsToSend:r,unsentEntries:o}=O8(this._heartbeatsCache.heartbeats),u=ph(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return ys.warn(i),""}}}function Cy(){return new Date().toISOString().substring(0,10)}function O8(e,t=M8){const i=[];let r=e.slice();for(const o of e){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Ry(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Ry(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class L8{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TE()?bE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await D8(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Ry(e){return ph(JSON.stringify({version:2,heartbeats:e})).length}function k8(e){if(e.length===0)return-1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(e){vh(new ru("platform-logger",t=>new FE(t),"PRIVATE")),vh(new ru("heartbeat",t=>new N8(t),"PRIVATE")),oo(Z1,wy,e),oo(Z1,wy,"esm2017"),oo("fire-js","")}j8("");var P8="firebase",U8="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oo(P8,U8,"app");var xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sr,Lv;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,C){function x(){}x.prototype=C.prototype,D.D=C.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(L,O,U){for(var I=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)I[Mt-2]=arguments[Mt];return C.prototype[O].apply(L,I)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,C,x){x||(x=0);var L=Array(16);if(typeof C=="string")for(var O=0;16>O;++O)L[O]=C.charCodeAt(x++)|C.charCodeAt(x++)<<8|C.charCodeAt(x++)<<16|C.charCodeAt(x++)<<24;else for(O=0;16>O;++O)L[O]=C[x++]|C[x++]<<8|C[x++]<<16|C[x++]<<24;C=D.g[0],x=D.g[1],O=D.g[2];var U=D.g[3],I=C+(U^x&(O^U))+L[0]+3614090360&4294967295;C=x+(I<<7&4294967295|I>>>25),I=U+(O^C&(x^O))+L[1]+3905402710&4294967295,U=C+(I<<12&4294967295|I>>>20),I=O+(x^U&(C^x))+L[2]+606105819&4294967295,O=U+(I<<17&4294967295|I>>>15),I=x+(C^O&(U^C))+L[3]+3250441966&4294967295,x=O+(I<<22&4294967295|I>>>10),I=C+(U^x&(O^U))+L[4]+4118548399&4294967295,C=x+(I<<7&4294967295|I>>>25),I=U+(O^C&(x^O))+L[5]+1200080426&4294967295,U=C+(I<<12&4294967295|I>>>20),I=O+(x^U&(C^x))+L[6]+2821735955&4294967295,O=U+(I<<17&4294967295|I>>>15),I=x+(C^O&(U^C))+L[7]+4249261313&4294967295,x=O+(I<<22&4294967295|I>>>10),I=C+(U^x&(O^U))+L[8]+1770035416&4294967295,C=x+(I<<7&4294967295|I>>>25),I=U+(O^C&(x^O))+L[9]+2336552879&4294967295,U=C+(I<<12&4294967295|I>>>20),I=O+(x^U&(C^x))+L[10]+4294925233&4294967295,O=U+(I<<17&4294967295|I>>>15),I=x+(C^O&(U^C))+L[11]+2304563134&4294967295,x=O+(I<<22&4294967295|I>>>10),I=C+(U^x&(O^U))+L[12]+1804603682&4294967295,C=x+(I<<7&4294967295|I>>>25),I=U+(O^C&(x^O))+L[13]+4254626195&4294967295,U=C+(I<<12&4294967295|I>>>20),I=O+(x^U&(C^x))+L[14]+2792965006&4294967295,O=U+(I<<17&4294967295|I>>>15),I=x+(C^O&(U^C))+L[15]+1236535329&4294967295,x=O+(I<<22&4294967295|I>>>10),I=C+(O^U&(x^O))+L[1]+4129170786&4294967295,C=x+(I<<5&4294967295|I>>>27),I=U+(x^O&(C^x))+L[6]+3225465664&4294967295,U=C+(I<<9&4294967295|I>>>23),I=O+(C^x&(U^C))+L[11]+643717713&4294967295,O=U+(I<<14&4294967295|I>>>18),I=x+(U^C&(O^U))+L[0]+3921069994&4294967295,x=O+(I<<20&4294967295|I>>>12),I=C+(O^U&(x^O))+L[5]+3593408605&4294967295,C=x+(I<<5&4294967295|I>>>27),I=U+(x^O&(C^x))+L[10]+38016083&4294967295,U=C+(I<<9&4294967295|I>>>23),I=O+(C^x&(U^C))+L[15]+3634488961&4294967295,O=U+(I<<14&4294967295|I>>>18),I=x+(U^C&(O^U))+L[4]+3889429448&4294967295,x=O+(I<<20&4294967295|I>>>12),I=C+(O^U&(x^O))+L[9]+568446438&4294967295,C=x+(I<<5&4294967295|I>>>27),I=U+(x^O&(C^x))+L[14]+3275163606&4294967295,U=C+(I<<9&4294967295|I>>>23),I=O+(C^x&(U^C))+L[3]+4107603335&4294967295,O=U+(I<<14&4294967295|I>>>18),I=x+(U^C&(O^U))+L[8]+1163531501&4294967295,x=O+(I<<20&4294967295|I>>>12),I=C+(O^U&(x^O))+L[13]+2850285829&4294967295,C=x+(I<<5&4294967295|I>>>27),I=U+(x^O&(C^x))+L[2]+4243563512&4294967295,U=C+(I<<9&4294967295|I>>>23),I=O+(C^x&(U^C))+L[7]+1735328473&4294967295,O=U+(I<<14&4294967295|I>>>18),I=x+(U^C&(O^U))+L[12]+2368359562&4294967295,x=O+(I<<20&4294967295|I>>>12),I=C+(x^O^U)+L[5]+4294588738&4294967295,C=x+(I<<4&4294967295|I>>>28),I=U+(C^x^O)+L[8]+2272392833&4294967295,U=C+(I<<11&4294967295|I>>>21),I=O+(U^C^x)+L[11]+1839030562&4294967295,O=U+(I<<16&4294967295|I>>>16),I=x+(O^U^C)+L[14]+4259657740&4294967295,x=O+(I<<23&4294967295|I>>>9),I=C+(x^O^U)+L[1]+2763975236&4294967295,C=x+(I<<4&4294967295|I>>>28),I=U+(C^x^O)+L[4]+1272893353&4294967295,U=C+(I<<11&4294967295|I>>>21),I=O+(U^C^x)+L[7]+4139469664&4294967295,O=U+(I<<16&4294967295|I>>>16),I=x+(O^U^C)+L[10]+3200236656&4294967295,x=O+(I<<23&4294967295|I>>>9),I=C+(x^O^U)+L[13]+681279174&4294967295,C=x+(I<<4&4294967295|I>>>28),I=U+(C^x^O)+L[0]+3936430074&4294967295,U=C+(I<<11&4294967295|I>>>21),I=O+(U^C^x)+L[3]+3572445317&4294967295,O=U+(I<<16&4294967295|I>>>16),I=x+(O^U^C)+L[6]+76029189&4294967295,x=O+(I<<23&4294967295|I>>>9),I=C+(x^O^U)+L[9]+3654602809&4294967295,C=x+(I<<4&4294967295|I>>>28),I=U+(C^x^O)+L[12]+3873151461&4294967295,U=C+(I<<11&4294967295|I>>>21),I=O+(U^C^x)+L[15]+530742520&4294967295,O=U+(I<<16&4294967295|I>>>16),I=x+(O^U^C)+L[2]+3299628645&4294967295,x=O+(I<<23&4294967295|I>>>9),I=C+(O^(x|~U))+L[0]+4096336452&4294967295,C=x+(I<<6&4294967295|I>>>26),I=U+(x^(C|~O))+L[7]+1126891415&4294967295,U=C+(I<<10&4294967295|I>>>22),I=O+(C^(U|~x))+L[14]+2878612391&4294967295,O=U+(I<<15&4294967295|I>>>17),I=x+(U^(O|~C))+L[5]+4237533241&4294967295,x=O+(I<<21&4294967295|I>>>11),I=C+(O^(x|~U))+L[12]+1700485571&4294967295,C=x+(I<<6&4294967295|I>>>26),I=U+(x^(C|~O))+L[3]+2399980690&4294967295,U=C+(I<<10&4294967295|I>>>22),I=O+(C^(U|~x))+L[10]+4293915773&4294967295,O=U+(I<<15&4294967295|I>>>17),I=x+(U^(O|~C))+L[1]+2240044497&4294967295,x=O+(I<<21&4294967295|I>>>11),I=C+(O^(x|~U))+L[8]+1873313359&4294967295,C=x+(I<<6&4294967295|I>>>26),I=U+(x^(C|~O))+L[15]+4264355552&4294967295,U=C+(I<<10&4294967295|I>>>22),I=O+(C^(U|~x))+L[6]+2734768916&4294967295,O=U+(I<<15&4294967295|I>>>17),I=x+(U^(O|~C))+L[13]+1309151649&4294967295,x=O+(I<<21&4294967295|I>>>11),I=C+(O^(x|~U))+L[4]+4149444226&4294967295,C=x+(I<<6&4294967295|I>>>26),I=U+(x^(C|~O))+L[11]+3174756917&4294967295,U=C+(I<<10&4294967295|I>>>22),I=O+(C^(U|~x))+L[2]+718787259&4294967295,O=U+(I<<15&4294967295|I>>>17),I=x+(U^(O|~C))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.u=function(D,C){C===void 0&&(C=D.length);for(var x=C-this.blockSize,L=this.B,O=this.h,U=0;U<C;){if(O==0)for(;U<=x;)o(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<C;)if(L[O++]=D.charCodeAt(U++),O==this.blockSize){o(this,L),O=0;break}}else for(;U<C;)if(L[O++]=D[U++],O==this.blockSize){o(this,L),O=0;break}}this.h=O,this.o+=C},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;var x=8*this.o;for(C=D.length-8;C<D.length;++C)D[C]=x&255,x/=256;for(this.u(D),D=Array(16),C=x=0;4>C;++C)for(var L=0;32>L;L+=8)D[x++]=this.g[C]>>>L&255;return D};function u(D,C){var x=m;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=C(D)}function f(D,C){this.h=C;for(var x=[],L=!0,O=D.length-1;0<=O;O--){var U=D[O]|0;L&&U==C||(x[O]=U,L=!1)}this.g=x}var m={};function y(D){return-128<=D&&128>D?u(D,function(C){return new f([C|0],0>C?-1:0)}):new f([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return k(g(-D));for(var C=[],x=1,L=0;D>=x;L++)C[L]=D/x|0,x*=4294967296;return new f(C,0)}function v(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return k(v(D.substring(1),C));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(C,8)),L=T,O=0;O<D.length;O+=8){var U=Math.min(8,D.length-O),I=parseInt(D.substring(O,O+U),C);8>U?(U=g(Math.pow(C,U)),L=L.j(U).add(g(I))):(L=L.j(x),L=L.add(g(I)))}return L}var T=y(0),b=y(1),R=y(16777216);e=f.prototype,e.m=function(){if(P(this))return-k(this).m();for(var D=0,C=1,x=0;x<this.g.length;x++){var L=this.i(x);D+=(0<=L?L:4294967296+L)*C,C*=4294967296}return D},e.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(V(this))return"0";if(P(this))return"-"+k(this).toString(D);for(var C=g(Math.pow(D,6)),x=this,L="";;){var O=rt(x,C).g;x=z(x,O.j(C));var U=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=O,V(x))return U+L;for(;6>U.length;)U="0"+U;L=U+L}},e.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function V(D){if(D.h!=0)return!1;for(var C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function P(D){return D.h==-1}e.l=function(D){return D=z(this,D),P(D)?-1:V(D)?0:1};function k(D){for(var C=D.g.length,x=[],L=0;L<C;L++)x[L]=~D.g[L];return new f(x,~D.h).add(b)}e.abs=function(){return P(this)?k(this):this},e.add=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0,O=0;O<=C;O++){var U=L+(this.i(O)&65535)+(D.i(O)&65535),I=(U>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);L=I>>>16,U&=65535,I&=65535,x[O]=I<<16|U}return new f(x,x[x.length-1]&-2147483648?-1:0)};function z(D,C){return D.add(k(C))}e.j=function(D){if(V(this)||V(D))return T;if(P(this))return P(D)?k(this).j(k(D)):k(k(this).j(D));if(P(D))return k(this.j(k(D)));if(0>this.l(R)&&0>D.l(R))return g(this.m()*D.m());for(var C=this.g.length+D.g.length,x=[],L=0;L<2*C;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var O=0;O<D.g.length;O++){var U=this.i(L)>>>16,I=this.i(L)&65535,Mt=D.i(O)>>>16,Vt=D.i(O)&65535;x[2*L+2*O]+=I*Vt,F(x,2*L+2*O),x[2*L+2*O+1]+=U*Vt,F(x,2*L+2*O+1),x[2*L+2*O+1]+=I*Mt,F(x,2*L+2*O+1),x[2*L+2*O+2]+=U*Mt,F(x,2*L+2*O+2)}for(L=0;L<C;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=C;L<2*C;L++)x[L]=0;return new f(x,0)};function F(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function K(D,C){this.g=D,this.h=C}function rt(D,C){if(V(C))throw Error("division by zero");if(V(D))return new K(T,T);if(P(D))return C=rt(k(D),C),new K(k(C.g),k(C.h));if(P(C))return C=rt(D,k(C)),new K(k(C.g),C.h);if(30<D.g.length){if(P(D)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var x=b,L=C;0>=L.l(D);)x=W(x),L=W(L);var O=Q(x,1),U=Q(L,1);for(L=Q(L,2),x=Q(x,2);!V(L);){var I=U.add(L);0>=I.l(D)&&(O=O.add(x),U=I),L=Q(L,1),x=Q(x,1)}return C=z(D,O.j(C)),new K(O,C)}for(O=T;0<=D.l(C);){for(x=Math.max(1,Math.floor(D.m()/C.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),U=g(x),I=U.j(C);P(I)||0<I.l(D);)x-=L,U=g(x),I=U.j(C);V(U)&&(U=b),O=O.add(U),D=z(D,I)}return new K(O,D)}e.A=function(D){return rt(this,D).h},e.and=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0;L<C;L++)x[L]=this.i(L)&D.i(L);return new f(x,this.h&D.h)},e.or=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0;L<C;L++)x[L]=this.i(L)|D.i(L);return new f(x,this.h|D.h)},e.xor=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0;L<C;L++)x[L]=this.i(L)^D.i(L);return new f(x,this.h^D.h)};function W(D){for(var C=D.g.length+1,x=[],L=0;L<C;L++)x[L]=D.i(L)<<1|D.i(L-1)>>>31;return new f(x,D.h)}function Q(D,C){var x=C>>5;C%=32;for(var L=D.g.length-x,O=[],U=0;U<L;U++)O[U]=0<C?D.i(U+x)>>>C|D.i(U+x+1)<<32-C:D.i(U+x);return new f(O,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lv=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=v,sr=f}).apply(typeof xy<"u"?xy:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kv,Pl,jv,rh,tm,Pv,Uv,Bv;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=i(this);function o(c,p){if(p)t:{var _=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var q=c[A];if(!(q in _))break t;_=_[q]}c=c[c.length-1],A=_[c],p=p(A),p!=A&&p!=null&&t(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,A=!1,q={next:function(){if(!A&&_<c.length){var J=_++;return{value:p(J,c[J]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function v(c,p,_){return c.call.apply(c.bind,arguments)}function T(c,p,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),c.apply(p,q)}}return function(){return c.apply(p,arguments)}}function b(c,p,_){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:T,b.apply(null,arguments)}function R(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function V(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,q,J){for(var ft=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)ft[qt-2]=arguments[qt];return p.prototype[q].apply(A,ft)}}function P(c){const p=c.length;if(0<p){const _=Array(p);for(let A=0;A<p;A++)_[A]=c[A];return _}return[]}function k(c,p){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(y(A)){const q=c.length||0,J=A.length||0;c.length=q+J;for(let ft=0;ft<J;ft++)c[q+ft]=A[ft]}else c.push(A)}}class z{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function F(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function rt(c){return rt[" "](c),c}rt[" "]=function(){};var W=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Q(c,p,_){for(const A in c)p.call(_,c[A],A,c)}function D(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function C(c){const p={};for(const _ in c)p[_]=c[_];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(c,p){let _,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(_ in A)c[_]=A[_];for(let J=0;J<x.length;J++)_=x[J],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function O(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function U(c){m.setTimeout(()=>{throw c},0)}function I(){var c=Rt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Mt{constructor(){this.h=this.g=null}add(p,_){const A=Vt.get();A.set(p,_),this.h?this.h.next=A:this.g=A,this.h=A}}var Vt=new z(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,mt=!1,Rt=new Mt,N=()=>{const c=m.Promise.resolve(void 0);ct=()=>{c.then(et)}};var et=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(_){U(_)}var p=Vt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}mt=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function ut(c,p){if(at.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(W){t:{try{rt(p.nodeName);var q=!0;break t}catch{}q=!1}q||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:dt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ut.aa.h.call(this)}}V(ut,at);var dt={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),Tt=0;function re(c,p,_,A,q){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!A,this.ha=q,this.key=++Tt,this.da=this.fa=!1}function Se(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ge(c){this.src=c,this.g={},this.h=0}ge.prototype.add=function(c,p,_,A,q){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var ft=Be(c,p,A,q);return-1<ft?(p=c[ft],_||(p.fa=!1)):(p=new re(p,this.src,J,!!A,q),p.fa=_,c.push(p)),p};function fn(c,p){var _=p.type;if(_ in c.g){var A=c.g[_],q=Array.prototype.indexOf.call(A,p,void 0),J;(J=0<=q)&&Array.prototype.splice.call(A,q,1),J&&(Se(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Be(c,p,_,A){for(var q=0;q<c.length;++q){var J=c[q];if(!J.da&&J.listener==p&&J.capture==!!_&&J.ha==A)return q}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),dn={};function _n(c,p,_,A,q){if(Array.isArray(p)){for(var J=0;J<p.length;J++)_n(c,p[J],_,A,q);return null}return _=ra(_),c&&c[Et]?c.K(p,_,g(A)?!!A.capture:!1,q):Ae(c,p,_,!1,A,q)}function Ae(c,p,_,A,q,J){if(!p)throw Error("Invalid event type");var ft=g(q)?!!q.capture:!!q,qt=rn(c);if(qt||(c[Ke]=qt=new ge(c)),_=qt.add(p,_,A,ft,J),_.proxy)return _;if(A=xn(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)gt||(q=ft),q===void 0&&(q=!1),c.addEventListener(p.toString(),A,q);else if(c.attachEvent)c.attachEvent(zn(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xn(){function c(_){return p.call(c.src,c.listener,_)}const p=vn;return c}function sn(c,p,_,A,q){if(Array.isArray(p))for(var J=0;J<p.length;J++)sn(c,p[J],_,A,q);else A=g(A)?!!A.capture:!!A,_=ra(_),c&&c[Et]?(c=c.i,p=String(p).toString(),p in c.g&&(J=c.g[p],_=Be(J,_,A,q),-1<_&&(Se(J[_]),Array.prototype.splice.call(J,_,1),J.length==0&&(delete c.g[p],c.h--)))):c&&(c=rn(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Be(p,_,A,q)),(_=-1<c?p[c]:null)&&ze(_))}function ze(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Et])fn(p.i,c);else{var _=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(_,A,c.capture):p.detachEvent?p.detachEvent(zn(_),A):p.addListener&&p.removeListener&&p.removeListener(A),(_=rn(p))?(fn(_,c),_.h==0&&(_.src=null,p[Ke]=null)):Se(c)}}}function zn(c){return c in dn?dn[c]:dn[c]="on"+c}function vn(c,p){if(c.da)c=!0;else{p=new ut(p,this);var _=c.listener,A=c.ha||c.src;c.fa&&ze(c),c=_.call(A,p)}return c}function rn(c){return c=c[Ke],c instanceof ge?c:null}var di="__closure_events_fn_"+(1e9*Math.random()>>>0);function ra(c){return typeof c=="function"?c:(c[di]||(c[di]=function(p){return c.handleEvent(p)}),c[di])}function pe(){it.call(this),this.i=new ge(this),this.M=this,this.F=null}V(pe,it),pe.prototype[Et]=!0,pe.prototype.removeEventListener=function(c,p,_,A){sn(this,c,p,_,A)};function Zt(c,p){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new at(p,c);else if(p instanceof at)p.target=p.target||c;else{var q=p;p=new at(A,c),L(p,q)}if(q=!0,_)for(var J=_.length-1;0<=J;J--){var ft=p.g=_[J];q=In(ft,A,!0,p)&&q}if(ft=p.g=c,q=In(ft,A,!0,p)&&q,q=In(ft,A,!1,p)&&q,_)for(J=0;J<_.length;J++)ft=p.g=_[J],q=In(ft,A,!1,p)&&q}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],A=0;A<_.length;A++)Se(_[A]);delete c.g[p],c.h--}}this.F=null},pe.prototype.K=function(c,p,_,A){return this.i.add(String(c),p,!1,_,A)},pe.prototype.L=function(c,p,_,A){return this.i.add(String(c),p,!0,_,A)};function In(c,p,_,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var q=!0,J=0;J<p.length;++J){var ft=p[J];if(ft&&!ft.da&&ft.capture==_){var qt=ft.listener,Ne=ft.ha||ft.src;ft.fa&&fn(c.i,ft),q=qt.call(Ne,A)!==!1&&q}}return q&&!A.defaultPrevented}function an(c,p,_){if(typeof c=="function")_&&(c=b(c,_));else if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function wu(c){c.g=an(()=>{c.g=null,c.i&&(c.i=!1,wu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class uf extends it{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:wu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(c){it.call(this),this.h=c,this.g={}}V(gr,it);var pr=[];function yr(c){Q(c.g,function(p,_){this.g.hasOwnProperty(_)&&ze(p)},c),c.g={}}gr.prototype.N=function(){gr.aa.N.call(this),yr(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var si=m.JSON.stringify,aa=m.JSON.parse,_r=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Co(){}Co.prototype.h=null;function Ro(c){return c.h||(c.h=c.i())}function xo(){}var Bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zi(){at.call(this,"d")}V(zi,at);function Io(){at.call(this,"c")}V(Io,at);var mi={},Do=null;function Es(){return Do=Do||new pe}mi.La="serverreachability";function oa(c){at.call(this,mi.La,c)}V(oa,at);function Ts(c){const p=Es();Zt(p,new oa(p))}mi.STAT_EVENT="statevent";function Su(c,p){at.call(this,mi.STAT_EVENT,c),this.stat=p}V(Su,at);function ue(c){const p=Es();Zt(p,new Su(p,c))}mi.Ma="timingevent";function Ve(c,p){at.call(this,mi.Ma,c),this.size=p}V(Ve,at);function Ce(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Mo(c,p,_,A,q,J){c.info(function(){if(c.g)if(J)for(var ft="",qt=J.split("&"),Ne=0;Ne<qt.length;Ne++){var Ht=qt[Ne].split("=");if(1<Ht.length){var He=Ht[0];Ht=Ht[1];var Oe=He.split("_");ft=2<=Oe.length&&Oe[1]=="type"?ft+(He+"="+Ht+"&"):ft+(He+"=redacted&")}}else ft=null;else ft=J;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+p+`
`+_+`
`+ft})}function cf(c,p,_,A,q,J,ft){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+p+`
`+_+`
`+J+" "+ft})}function bs(c,p,_,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+vr(c,_)+(A?" "+A:"")})}function Au(c,p){c.info(function(){return"TIMEOUT: "+p})}qn.prototype.info=function(){};function vr(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ft=1;ft<q.length;ft++)q[ft]=""}}}}return si(_)}catch{return p}}var ws={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function pi(){}V(pi,Co),pi.prototype.g=function(){return new XMLHttpRequest},pi.prototype.i=function(){return{}},gi=new pi;function mn(c,p,_,A){this.j=c,this.i=p,this.l=_,this.R=A||1,this.U=new gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ve}function ve(){this.i=null,this.g="",this.h=!1}var Vo={},la={};function ri(c,p,_){c.L=1,c.v=Sr(Dn(p)),c.m=_,c.P=!0,Hi(c,null)}function Hi(c,p){c.F=Date.now(),Er(c),c.A=Dn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Po(_.i,"t",A),c.C=0,_=c.j.J,c.h=new ve,c.g=zu(c.j,_?p:null,!c.m),0<c.O&&(c.M=new uf(b(c.Y,c,c.g),c.O)),p=c.U,_=c.g,A=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(pr[0]=q.toString()),q=pr);for(var J=0;J<q.length;J++){var ft=_n(_,q[J],A||p.handleEvent,!1,p.h||p);if(!ft)break;p.g[ft.key]=ft}p=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Ts(),Mo(c.i,c.u,c.A,c.l,c.R,c.m)}mn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Qn(c)==3?p.j():this.Y(c)},mn.prototype.Y=function(c){try{if(c==this.g)t:{const Oe=Qn(this.g);var p=this.g.Ba();const Zi=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||Nu(this.g)))){this.J||Oe!=4||p==7||(p==8||0>=Zi?Ts(3):Ts(2)),Ss(this);var _=this.g.Z();this.X=_;e:if(Cu(this)){var A=Nu(this.g);c="";var q=A.length,J=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$e(this),yi(this);var ft="";break e}this.h.i=new m.TextDecoder}for(p=0;p<q;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(J&&p==q-1)});A.length=0,this.h.g+=c,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=_==200,cf(this.i,this.u,this.A,this.l,this.R,Oe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var qt,Ne=this.g;if((qt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(qt)){var Ht=qt;break e}}Ht=null}if(_=Ht)bs(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tr(this,_);else{this.o=!1,this.s=3,ue(12),$e(this),yi(this);break t}}if(this.P){_=!0;let Xe;for(;!this.J&&this.C<ft.length;)if(Xe=Ru(this,ft),Xe==la){Oe==4&&(this.s=4,ue(14),_=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Xe==Vo){this.s=4,ue(15),bs(this.i,this.l,ft,"[Invalid Chunk]"),_=!1;break}else bs(this.i,this.l,Xe,null),Tr(this,Xe);if(Cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||ft.length!=0||this.h.h||(this.s=1,ue(16),_=!1),this.o=this.o&&_,!_)bs(this.i,this.l,ft,"[Invalid Chunked Response]"),$e(this),yi(this);else if(0<ft.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),Vr(He),He.M=!0,ue(11))}}else bs(this.i,this.l,ft,null),Tr(this,ft);Oe==4&&$e(this),this.o&&!this.J&&(Oe==4?Pu(this.j,this):(this.o=!1,Er(this)))}else gf(this.g),_==400&&0<ft.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),$e(this),yi(this)}}}catch{}finally{}};function Cu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Ru(c,p){var _=c.C,A=p.indexOf(`
`,_);return A==-1?la:(_=Number(p.substring(_,A)),isNaN(_)?Vo:(A+=1,A+_>p.length?la:(p=p.slice(A,A+_),c.C=A+_,p)))}mn.prototype.cancel=function(){this.J=!0,$e(this)};function Er(c){c.S=Date.now()+c.I,xu(c,c.I)}function xu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ce(b(c.ba,c),p)}function Ss(c){c.B&&(m.clearTimeout(c.B),c.B=null)}mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Au(this.i,this.A),this.L!=2&&(Ts(),ue(17)),$e(this),this.s=2,yi(this)):xu(this,this.S-c)};function yi(c){c.j.G==0||c.J||Pu(c.j,c)}function $e(c){Ss(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,yr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Tr(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||No(_.h,c))){if(!c.K&&No(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ea(_),_a(_);else break t;Ho(_),ue(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ce(b(_.Za,_),6e3));if(1>=ca(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Xi(_,11)}else if((c.K||_.g==c)&&Ea(_),!F(p))for(q=_.Da.g.parse(p),p=0;p<q.length;p++){let Ht=q[p];if(_.T=Ht[0],Ht=Ht[1],_.G==2)if(Ht[0]=="c"){_.K=Ht[1],_.ia=Ht[2];const He=Ht[3];He!=null&&(_.la=He,_.j.info("VER="+_.la));const Oe=Ht[4];Oe!=null&&(_.Aa=Oe,_.j.info("SVER="+_.Aa));const Zi=Ht[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(A=1.5*Zi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Xe=c.g;if(Xe){const Si=Xe.g?Xe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var J=A.h;J.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ha(J,J.h),J.h=null))}if(A.D){const Fo=Xe.g?Xe.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(A.ya=Fo,te(A.I,A.D,Fo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var ft=c;if(A.qa=Bu(A,A.J?A.ia:null,A.W),ft.K){gn(A.h,ft);var qt=ft,Ne=A.L;Ne&&(qt.I=Ne),qt.B&&(Ss(qt),Er(qt)),A.g=ft}else ku(A);0<_.i.length&&va(_)}else Ht[0]!="stop"&&Ht[0]!="close"||Xi(_,7);else _.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Xi(_,7):zo(_):Ht[0]!="noop"&&_.l&&_.l.ta(Ht),_.v=0)}}Ts(4)}catch{}}var Iu=class{constructor(c,p){this.g=c,this.map=p}};function Gi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ua(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ca(c){return c.h?1:c.g?c.g.size:0}function No(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ha(c,p){c.g?c.g.add(p):c.h=p}function gn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Gi.prototype.cancel=function(){if(this.i=Oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Oo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return P(c.i)}function hf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],_=c.length,A=0;A<_;A++)p.push(c[A]);return p}p=[],_=0;for(A in c)p[_++]=c[A];return p}function fa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const A in c)p[_++]=A;return p}}}function Lo(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=fa(c),A=hf(c),q=A.length,J=0;J<q;J++)p.call(void 0,A[J],_&&_[J],c)}var br=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ff(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),q=null;if(0<=A){var J=c[_].substring(0,A);q=c[_].substring(A+1)}else J=c[_];p(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Re(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Re){this.h=c.h,wr(this,c.j),this.o=c.o,this.g=c.g,As(this,c.s),this.l=c.l;var p=c.i,_=new Qi;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Fi(this,_),this.m=c.m}else c&&(p=String(c).match(br))?(this.h=!1,wr(this,p[1]||"",!0),this.o=Hn(p[2]||""),this.g=Hn(p[3]||"",!0),As(this,p[4]),this.l=Hn(p[5]||"",!0),Fi(this,p[6]||"",!0),this.m=Hn(p[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}Re.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Ar(p,ko,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Ar(p,ko,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ar(_,_.charAt(0)=="/"?df:jo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ar(_,da)),c.join("")};function Dn(c){return new Re(c)}function wr(c,p,_){c.j=_?Hn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function As(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Fi(c,p,_){p instanceof Qi?(c.i=p,Mu(c.i,c.h)):(_||(p=Ar(p,mf)),c.i=new Qi(p,c.h))}function te(c,p,_){c.i.set(p,_)}function Sr(c){return te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Hn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ar(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,Du),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Du(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ko=/[#\/\?@]/g,jo=/[#\?:]/g,df=/[#\?]/g,mf=/[#\?@]/g,da=/#/g;function Qi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Gn(c){c.g||(c.g=new Map,c.h=0,c.i&&ff(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}e=Qi.prototype,e.add=function(c,p){Gn(this),this.i=null,c=_i(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function Yi(c,p){Gn(c),p=_i(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Ki(c,p){return Gn(c),p=_i(c,p),c.g.has(p)}e.forEach=function(c,p){Gn(this),this.g.forEach(function(_,A){_.forEach(function(q){c.call(p,q,A,this)},this)},this)},e.na=function(){Gn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let A=0;A<p.length;A++){const q=c[A];for(let J=0;J<q.length;J++)_.push(p[A])}return _},e.V=function(c){Gn(this);let p=[];if(typeof c=="string")Ki(this,c)&&(p=p.concat(this.g.get(_i(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},e.set=function(c,p){return Gn(this),this.i=null,c=_i(this,c),Ki(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},e.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Po(c,p,_){Yi(c,p),0<_.length&&(c.i=null,c.g.set(_i(c,p),P(_)),c.h+=_.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var A=p[_];const J=encodeURIComponent(String(A)),ft=this.V(A);for(A=0;A<ft.length;A++){var q=J;ft[A]!==""&&(q+="="+encodeURIComponent(String(ft[A]))),c.push(q)}}return this.i=c.join("&")};function _i(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Mu(c,p){p&&!c.j&&(Gn(c),c.i=null,c.g.forEach(function(_,A){var q=A.toLowerCase();A!=q&&(Yi(this,A),Po(this,q,_))},c)),c.j=p}function Cr(c,p){const _=new qn;if(m.Image){const A=new Image;A.onload=R(Fn,_,"TestLoadImage: loaded",!0,p,A),A.onerror=R(Fn,_,"TestLoadImage: error",!1,p,A),A.onabort=R(Fn,_,"TestLoadImage: abort",!1,p,A),A.ontimeout=R(Fn,_,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function ai(c,p){const _=new qn,A=new AbortController,q=setTimeout(()=>{A.abort(),Fn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(J=>{clearTimeout(q),J.ok?Fn(_,"TestPingServer: ok",!0,p):Fn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(q),Fn(_,"TestPingServer: error",!1,p)})}function Fn(c,p,_,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(_)}catch{}}function Rr(){this.g=new _r}function vi(c,p,_){const A=_||"";try{Lo(c,function(q,J){let ft=q;g(q)&&(ft=si(q)),p.push(A+J+"="+encodeURIComponent(ft))})}catch(q){throw p.push(A+"type="+encodeURIComponent("_badmap")),q}}function Cs(c){this.l=c.Ub||null,this.j=c.eb||!1}V(Cs,Co),Cs.prototype.g=function(){return new $i(this.l,this.j)},Cs.prototype.i=function(c){return function(){return c}}({});function $i(c,p){pe.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V($i,pe),e=$i.prototype,e.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ti(this)},e.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},e.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}e.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ei(this):Ti(this),this.readyState==3&&Uo(this)}},e.Ra=function(c){this.g&&(this.response=this.responseText=c,Ei(this))},e.Qa=function(c){this.g&&(this.response=c,Ei(this))},e.ga=function(){this.g&&Ei(this)};function Ei(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ti(c)}e.setRequestHeader=function(c,p){this.u.append(c,p)},e.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function Ti(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bo(c){let p="";return Q(c,function(_,A){p+=A,p+=":",p+=_,p+=`\r
`}),p}function qe(c,p,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=Bo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):te(c,p,_))}function $t(c){pe.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V($t,pe);var ma=/^https?$/i,xr=["POST","PUT"];e=$t.prototype,e.Ha=function(c){this.J=c},e.ea=function(c,p,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?Ro(this.o):Ro(gi),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(J){Vu(this,J);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)_.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())_.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(xr,p,void 0))||A||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ft]of _)this.g.setRequestHeader(J,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ir(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){Vu(this,J)}};function Vu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,ga(c),bi(c)}function ga(c){c.A||(c.A=!0,Zt(c,"complete"),Zt(c,"error"))}e.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Zt(this,"complete"),Zt(this,"abort"),bi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),$t.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},e.bb=function(){pa(this)};function pa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Qn(c)!=4||c.Z()!=2)){if(c.u&&Qn(c)==4)an(c.Ea,0,c);else if(Zt(c,"readystatechange"),Qn(c)==4){c.h=!1;try{const ft=c.Z();t:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var A;if(A=ft===0){var q=String(c.D).match(br)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),A=!ma.test(q?q.toLowerCase():"")}_=A}if(_)Zt(c,"complete"),Zt(c,"success");else{c.m=6;try{var J=2<Qn(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",ga(c)}}finally{bi(c)}}}}function bi(c,p){if(c.g){Ir(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Zt(c,"ready");try{_.onreadystatechange=A}catch{}}}function Ir(c){c.I&&(m.clearTimeout(c.I),c.I=null)}e.isActive=function(){return!!this.g};function Qn(c){return c.g?c.g.readyState:0}e.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),aa(p)}};function Nu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gf(c){const p={};c=(c.g&&2<=Qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(F(c[A]))continue;var _=O(c[A]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=p[q]||[];p[q]=J,J.push(_)}D(p,function(A){return A.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function ya(c){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,c),this.cb=Dr("retryDelaySeedMs",1e4,c),this.Wa=Dr("forwardChannelMaxRetries",2,c),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Gi(c&&c.concurrentRequestLimit),this.Da=new Rr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ya.prototype,e.la=8,e.G=1,e.connect=function(c,p,_,A){ue(0),this.W=c,this.H=p||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Bu(this,null,this.W),va(this)};function zo(c){if(Ou(c),c.G==3){var p=c.U++,_=Dn(c.I);if(te(_,"SID",c.K),te(_,"RID",p),te(_,"TYPE","terminate"),Mr(c,_),p=new mn(c,c.j,p),p.L=2,p.v=Sr(Dn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=zu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Er(p)}Uu(c)}function _a(c){c.g&&(Vr(c),c.g.cancel(),c.g=null)}function Ou(c){_a(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ea(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function va(c){if(!ua(c.h)&&!c.s){c.s=!0;var p=c.Ga;ct||N(),mt||(ct(),mt=!0),Rt.add(p,c),c.B=0}}function pf(c,p){return ca(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ce(b(c.Ga,c,p),Go(c,c.B)),c.B++,!0)}e.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new mn(this,this.j,c);let J=this.o;if(this.S&&(J?(J=C(J),L(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=Lu(this,q,p),_=Dn(this.I),te(_,"RID",c),te(_,"CVER",22),this.D&&te(_,"X-HTTP-Session-Id",this.D),Mr(this,_),J&&(this.O?p="headers="+encodeURIComponent(String(Bo(J)))+"&"+p:this.m&&qe(_,this.m,J)),ha(this.h,q),this.Ua&&te(_,"TYPE","init"),this.P?(te(_,"$req",p),te(_,"SID","null"),q.T=!0,ri(q,_,null)):ri(q,_,p),this.G=2}}else this.G==3&&(c?qo(this,c):this.i.length==0||ua(this.h)||qo(this))};function qo(c,p){var _;p?_=p.l:_=c.U++;const A=Dn(c.I);te(A,"SID",c.K),te(A,"RID",_),te(A,"AID",c.T),Mr(c,A),c.m&&c.o&&qe(A,c.m,c.o),_=new mn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Lu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ha(c.h,_),ri(_,A,p)}function Mr(c,p){c.H&&Q(c.H,function(_,A){te(p,A,_)}),c.l&&Lo({},function(_,A){te(p,A,_)})}function Lu(c,p,_){_=Math.min(c.i.length,_);var A=c.l?b(c.l.Na,c.l,c):null;t:{var q=c.i;let J=-1;for(;;){const ft=["count="+_];J==-1?0<_?(J=q[0].g,ft.push("ofs="+J)):J=0:ft.push("ofs="+J);let qt=!0;for(let Ne=0;Ne<_;Ne++){let Ht=q[Ne].g;const He=q[Ne].map;if(Ht-=J,0>Ht)J=Math.max(0,q[Ne].g-100),qt=!1;else try{vi(He,ft,"req"+Ht+"_")}catch{A&&A(He)}}if(qt){A=ft.join("&");break t}}}return c=c.i.splice(0,_),p.D=c,A}function ku(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ct||N(),mt||(ct(),mt=!0),Rt.add(p,c),c.v=0}}function Ho(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ce(b(c.Fa,c),Go(c,c.v)),c.v++,!0)}e.Fa=function(){if(this.u=null,ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ce(b(this.ab,this),c)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),_a(this),ju(this))};function Vr(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ju(c){c.g=new mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Dn(c.qa);te(p,"RID","rpc"),te(p,"SID",c.K),te(p,"AID",c.T),te(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&te(p,"TO",c.ja),te(p,"TYPE","xmlhttp"),Mr(c,p),c.m&&c.o&&qe(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Sr(Dn(p)),_.m=null,_.P=!0,Hi(_,c)}e.Za=function(){this.C!=null&&(this.C=null,_a(this),Ho(this),ue(19))};function Ea(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Pu(c,p){var _=null;if(c.g==p){Ea(c),Vr(c),c.g=null;var A=2}else if(No(c.h,p))_=p.D,gn(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var q=c.B;A=Es(),Zt(A,new Ve(A,_)),va(c)}else ku(c);else if(q=p.s,q==3||q==0&&0<p.X||!(A==1&&pf(c,p)||A==2&&Ho(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),q){case 1:Xi(c,5);break;case 4:Xi(c,10);break;case 3:Xi(c,6);break;default:Xi(c,2)}}}function Go(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Xi(c,p){if(c.j.info("Error code "+p),p==2){var _=b(c.fb,c),A=c.Xa;const q=!A;A=new Re(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||wr(A,"https"),Sr(A),q?Cr(A.toString(),_):ai(A.toString(),_)}else ue(2);c.G=0,c.l&&c.l.sa(p),Uu(c),Ou(c)}e.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Uu(c){if(c.G=0,c.ka=[],c.l){const p=Oo(c.h);(p.length!=0||c.i.length!=0)&&(k(c.ka,p),k(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function Bu(c,p,_){var A=_ instanceof Re?Dn(_):new Re(_);if(A.g!="")p&&(A.g=p+"."+A.g),As(A,A.s);else{var q=m.location;A=q.protocol,p=p?p+"."+q.hostname:q.hostname,q=+q.port;var J=new Re(null);A&&wr(J,A),p&&(J.g=p),q&&As(J,q),_&&(J.l=_),A=J}return _=c.D,p=c.ya,_&&p&&te(A,_,p),te(A,"VER",c.la),Mr(c,A),A}function zu(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new $t(new Cs({eb:_})):new $t(c.pa),p.Ha(c.J),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function qu(){}e=qu.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ta(){}Ta.prototype.g=function(c,p){return new pn(c,p)};function pn(c,p){pe.call(this),this.g=new ya(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!F(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!F(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new wi(this)}V(pn,pe),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){zo(this.g)},pn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=si(c),c=_);p.i.push(new Iu(p.Ya++,c)),p.G==3&&va(p)},pn.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,pn.aa.N.call(this)};function Hu(c){zi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const _ in p){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}V(Hu,zi);function Gu(){Io.call(this),this.status=1}V(Gu,Io);function wi(c){this.g=c}V(wi,qu),wi.prototype.ua=function(){Zt(this.g,"a")},wi.prototype.ta=function(c){Zt(this.g,new Hu(c))},wi.prototype.sa=function(c){Zt(this.g,new Gu)},wi.prototype.ra=function(){Zt(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,Bv=function(){return new Ta},Uv=function(){return Es()},Pv=mi,tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,rh=ws,qi.COMPLETE="complete",jv=qi,xo.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",pe.prototype.listen=pe.prototype.K,Pl=xo,$t.prototype.listenOnce=$t.prototype.L,$t.prototype.getLastError=$t.prototype.Ka,$t.prototype.getLastErrorCode=$t.prototype.Ba,$t.prototype.getStatus=$t.prototype.Z,$t.prototype.getResponseJson=$t.prototype.Oa,$t.prototype.getResponseText=$t.prototype.oa,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Ha,kv=$t}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const Iy="@firebase/firestore",Dy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new Iv("@firebase/firestore");function to(){return Wr.logLevel}function pt(e,...t){if(Wr.logLevel<=Qt.DEBUG){const i=t.map(km);Wr.debug(`Firestore (${bo}): ${e}`,...i)}}function _s(e,...t){if(Wr.logLevel<=Qt.ERROR){const i=t.map(km);Wr.error(`Firestore (${bo}): ${e}`,...i)}}function ho(e,...t){if(Wr.logLevel<=Qt.WARN){const i=t.map(km);Wr.warn(`Firestore (${bo}): ${e}`,...i)}}function km(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,zv(e,r,i)}function zv(e,t,i){let r=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw _s(r),new Error(r)}function Xt(e,t,i,r){let o="Unexpected state";typeof i=="string"?o=i:r=i,e||zv(t,o,r)}function Dt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends To{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class B8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(cn.UNAUTHENTICATED))}shutdown(){}}class z8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class q8{constructor(t){this.t=t,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Xt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new rr,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;t.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new rr)}},0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xt(typeof r.accessToken=="string",31837,{l:r}),new qv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Xt(t===null||typeof t=="string",2055,{h:t}),new cn(t)}}class H8{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class G8{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new H8(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class My{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F8{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,w8(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Xt(this.o===void 0,3512);const r=u=>{u.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,pt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new My(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Xt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new My(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<e;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Q8(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<i&&(r+=t.charAt(o[u]%62))}return r}}function kt(e,t){return e<t?-1:e>t?1:0}function em(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=e.codePointAt(i),o=t.codePointAt(i);if(r!==o){if(r<128&&o<128)return kt(r,o);{const u=Hv(),f=Y8(u.encode(Vy(e,i)),u.encode(Vy(t,i)));return f!==0?f:kt(r,o)}}i+=r>65535?2:1}return kt(e.length,t.length)}function Vy(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Y8(e,t){for(let i=0;i<e.length&&i<t.length;++i)if(e[i]!==t[i])return kt(e[i],t[i]);return kt(e.length,t.length)}function fo(e,t,i){return e.length===t.length&&e.every((r,o)=>i(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=-62135596800,Oy=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(t){return Pe.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*Oy);return new Pe(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new vt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new vt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Ny)throw new vt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Oy}_compareTo(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Ny;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static fromTimestamp(t){return new xt(t)}static min(){return new xt(new Pe(0,0))}static max(){return new xt(new Pe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="__name__";class Ni{constructor(t,i,r){i===void 0?i=0:i>t.length&&At(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&At(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Ni.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Ni?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let o=0;o<r;o++){const u=Ni.compareSegments(t.get(o),i.get(o));if(u!==0)return u}return kt(t.length,i.length)}static compareSegments(t,i){const r=Ni.isNumericId(t),o=Ni.isNumericId(i);return r&&!o?-1:!r&&o?1:r&&o?Ni.extractNumericId(t).compare(Ni.extractNumericId(i)):em(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return sr.fromString(t.substring(4,t.length-2))}}class he extends Ni{construct(t,i,r){return new he(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new vt(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(o=>o.length>0))}return new he(i)}static emptyPath(){return new he([])}}const K8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ni{construct(t,i,r){return new en(t,i,r)}static isValidIdentifier(t){return K8.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ly}static keyField(){return new en([Ly])}static fromServerFormat(t){const i=[];let r="",o=0;const u=()=>{if(r.length===0)throw new vt(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new vt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new vt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new vt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new en(i)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.path=t}static fromPath(t){return new bt(he.fromString(t))}static fromName(t){return new bt(he.fromString(t).popFirst(5))}static empty(){return new bt(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&he.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return he.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new he(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function $8(e,t){const i=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=xt.fromTimestamp(r===1e9?new Pe(i+1,0):new Pe(i,r));return new or(o,bt.empty(),t)}function X8(e){return new or(e.readTime,e.key,ou)}class or{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new or(xt.min(),bt.empty(),ou)}static max(){return new or(xt.max(),bt.empty(),ou)}}function Z8(e,t){let i=e.readTime.compareTo(t.readTime);return i!==0?i:(i=bt.comparator(e.documentKey,t.documentKey),i!==0?i:kt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(e){if(e.code!==lt.FAILED_PRECONDITION||e.message!==J8)throw e;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&At(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new ot((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,o)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof ot?i:ot.resolve(i)}catch(i){return ot.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):ot.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):ot.reject(i)}static resolve(t){return new ot((i,r)=>{i(t)})}static reject(t){return new ot((i,r)=>{r(t)})}static waitFor(t){return new ot((i,r)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&i()},y=>r(y))}),f=!0,u===o&&i()})}static or(t){let i=ot.resolve(!1);for(const r of t)i=i.next(o=>o?ot.resolve(o):r());return i}static forEach(t,i){const r=[];return t.forEach((o,u)=>{r.push(i.call(this,o,u))}),this.waitFor(r)}static mapArray(t,i){return new ot((r,o)=>{const u=t.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const g=y;i(t[g]).next(v=>{f[g]=v,++m,m===u&&r(f)},v=>o(v))}})}static doWhile(t,i){return new ot((r,o)=>{const u=()=>{t()===!0?i().next(()=>{u()},o):r()};u()})}}function tT(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function So(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>i.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}qh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function Hh(e){return e==null}function Eh(e){return e===0&&1/e==-1/0}function eT(e){return typeof e=="number"&&Number.isInteger(e)&&!Eh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="";function nT(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t=ky(t)),t=iT(e.get(i),t);return ky(t)}function iT(e,t){let i=t;const r=e.length;for(let o=0;o<r;o++){const u=e.charAt(o);switch(u){case"\0":i+="";break;case Fv:i+="";break;default:i+=u}}return i}function ky(e){return e+Fv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(e){let t=0;for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function dr(e,t){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function Qv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t,i){this.comparator=t,this.root=i||tn.EMPTY}insert(t,i){return new me(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return i+r.left.size;o<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yc(this.root,t,this.comparator,!0)}}class Yc{constructor(t,i,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class tn{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??tn.RED,this.left=o??tn.EMPTY,this.right=u??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,o,u){return new tn(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,r),null):u===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,o=this;if(i(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(t,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw At(43730,{key:this.key,value:this.value});if(this.right.isRed())throw At(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw At(27949);return t+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw At(57766)}get value(){throw At(16141)}get color(){throw At(16727)}get left(){throw At(29726)}get right(){throw At(36894)}copy(t,i,r,o,u){return this}insert(t,i,r){return new tn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;i(o.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(t){return new Py(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Ue)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Ue(this.comparator);return i.data=t,i}}class Py{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.fields=t,t.sort(en.comparator)}static empty(){return new Bn([])}unionWith(t){let i=new Ue(en.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Bn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return fo(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Yv("Invalid base64 string: "+u):u}}(t);return new nn(i)}static fromUint8Array(t){const i=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new nn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const sT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(e){if(Xt(!!e,39018),typeof e=="string"){let t=0;const i=sT.exec(e);if(Xt(!!i,46558,{timestamp:e}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:be(e.seconds),nanos:be(e.nanos)}}function be(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ur(e){return typeof e=="string"?nn.fromBase64String(e):nn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="server_timestamp",$v="__type__",Xv="__previous_value__",Zv="__local_write_time__";function Pm(e){var t,i;return((i=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[$v])===null||i===void 0?void 0:i.stringValue)===Kv}function Gh(e){const t=e.mapValue.fields[Xv];return Pm(t)?Gh(t):t}function lu(e){const t=lr(e.mapValue.fields[Zv].timestampValue);return new Pe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t,i,r,o,u,f,m,y,g,v){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=v}}const Th="(default)";class uu{constructor(t,i){this.projectId=t,this.database=i||Th}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===Th}isEqual(t){return t instanceof uu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="__type__",aT="__max__",Kc={mapValue:{}},Wv="__vector__",bh="value";function cr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pm(e)?4:lT(e)?9007199254740991:oT(e)?10:11:At(28295,{value:e})}function Pi(e,t){if(e===t)return!0;const i=cr(e);if(i!==cr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return lu(e).isEqual(lu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=lr(o.timestampValue),m=lr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(o,u){return ur(o.bytesValue).isEqual(ur(u.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(o,u){return be(o.geoPointValue.latitude)===be(u.geoPointValue.latitude)&&be(o.geoPointValue.longitude)===be(u.geoPointValue.longitude)}(e,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return be(o.integerValue)===be(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=be(o.doubleValue),m=be(u.doubleValue);return f===m?Eh(f)===Eh(m):isNaN(f)&&isNaN(m)}return!1}(e,t);case 9:return fo(e.arrayValue.values||[],t.arrayValue.values||[],Pi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(jy(f)!==jy(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Pi(f[y],m[y])))return!1;return!0}(e,t);default:return At(52216,{left:e})}}function cu(e,t){return(e.values||[]).find(i=>Pi(i,t))!==void 0}function mo(e,t){if(e===t)return 0;const i=cr(e),r=cr(t);if(i!==r)return kt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return kt(e.booleanValue,t.booleanValue);case 2:return function(u,f){const m=be(u.integerValue||u.doubleValue),y=be(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(e,t);case 3:return Uy(e.timestampValue,t.timestampValue);case 4:return Uy(lu(e),lu(t));case 5:return em(e.stringValue,t.stringValue);case 6:return function(u,f){const m=ur(u),y=ur(f);return m.compareTo(y)}(e.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),y=f.split("/");for(let g=0;g<m.length&&g<y.length;g++){const v=kt(m[g],y[g]);if(v!==0)return v}return kt(m.length,y.length)}(e.referenceValue,t.referenceValue);case 8:return function(u,f){const m=kt(be(u.latitude),be(f.latitude));return m!==0?m:kt(be(u.longitude),be(f.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return By(e.arrayValue,t.arrayValue);case 10:return function(u,f){var m,y,g,v;const T=u.fields||{},b=f.fields||{},R=(m=T[bh])===null||m===void 0?void 0:m.arrayValue,V=(y=b[bh])===null||y===void 0?void 0:y.arrayValue,P=kt(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return P!==0?P:By(R,V)}(e.mapValue,t.mapValue);case 11:return function(u,f){if(u===Kc.mapValue&&f===Kc.mapValue)return 0;if(u===Kc.mapValue)return 1;if(f===Kc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),g=f.fields||{},v=Object.keys(g);y.sort(),v.sort();for(let T=0;T<y.length&&T<v.length;++T){const b=em(y[T],v[T]);if(b!==0)return b;const R=mo(m[y[T]],g[v[T]]);if(R!==0)return R}return kt(y.length,v.length)}(e.mapValue,t.mapValue);default:throw At(23264,{Pe:i})}}function Uy(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return kt(e,t);const i=lr(e),r=lr(t),o=kt(i.seconds,r.seconds);return o!==0?o:kt(i.nanos,r.nanos)}function By(e,t){const i=e.values||[],r=t.values||[];for(let o=0;o<i.length&&o<r.length;++o){const u=mo(i[o],r[o]);if(u)return u}return kt(i.length,r.length)}function go(e){return nm(e)}function nm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(i){const r=lr(i);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(i){return ur(i).toBase64()}(e.bytesValue):"referenceValue"in e?function(i){return bt.fromName(i).toString()}(e.referenceValue):"geoPointValue"in e?function(i){return`geo(${i.latitude},${i.longitude})`}(e.geoPointValue):"arrayValue"in e?function(i){let r="[",o=!0;for(const u of i.values||[])o?o=!1:r+=",",r+=nm(u);return r+"]"}(e.arrayValue):"mapValue"in e?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${nm(i.fields[f])}`;return o+"}"}(e.mapValue):At(61005,{value:e})}function ah(e){switch(cr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gh(e);return t?16+ah(t):16;case 5:return 2*e.stringValue.length;case 6:return ur(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+ah(u),0)}(e.arrayValue);case 10:case 11:return function(r){let o=0;return dr(r.fields,(u,f)=>{o+=u.length+ah(f)}),o}(e.mapValue);default:throw At(13486,{value:e})}}function im(e){return!!e&&"integerValue"in e}function Um(e){return!!e&&"arrayValue"in e}function zy(e){return!!e&&"nullValue"in e}function qy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oh(e){return!!e&&"mapValue"in e}function oT(e){var t,i;return((i=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Jv])===null||i===void 0?void 0:i.stringValue)===Wv}function Yl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return dr(e.mapValue.fields,(i,r)=>t.mapValue.fields[i]=Yl(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Yl(e.arrayValue.values[i]);return t}return Object.assign({},e)}function lT(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===aT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.value=t}static empty(){return new An({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!oh(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yl(i)}setAll(t){let i=en.emptyPath(),r={},o=[];t.forEach((f,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,r,o),r={},o=[],i=m.popLast()}f?r[m.lastSegment()]=Yl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(i);this.applyChanges(u,r,o)}delete(t){const i=this.field(t.popLast());oh(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Pi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=i.mapValue.fields[t.get(r)];oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=o),i=o}return i.mapValue.fields}applyChanges(t,i,r){dr(i,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new An(Yl(this.value))}}function t3(e){const t=[];return dr(e.fields,(i,r)=>{const o=new en([i]);if(oh(r)){const u=t3(r.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new Bn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t,i,r,o,u,f,m){this.key=t,this.documentType=i,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new hn(t,0,xt.min(),xt.min(),xt.min(),An.empty(),0)}static newFoundDocument(t,i,r,o){return new hn(t,1,i,xt.min(),r,o,0)}static newNoDocument(t,i){return new hn(t,2,i,xt.min(),xt.min(),An.empty(),0)}static newUnknownDocument(t,i){return new hn(t,3,i,xt.min(),xt.min(),An.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof hn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t,i){this.position=t,this.inclusive=i}}function Hy(e,t,i){let r=0;for(let o=0;o<e.position.length;o++){const u=t[o],f=e.position[o];if(u.field.isKeyField()?r=bt.comparator(bt.fromName(f.referenceValue),i.key):r=mo(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gy(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!Pi(e.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,i="asc"){this.field=t,this.dir=i}}function uT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{}class je extends e3{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new hT(t,i,r):i==="array-contains"?new mT(t,r):i==="in"?new gT(t,r):i==="not-in"?new pT(t,r):i==="array-contains-any"?new yT(t,r):new je(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new fT(t,r):new dT(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(mo(i,this.value)):i!==null&&cr(this.value)===cr(i)&&this.matchesComparison(mo(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends e3{constructor(t,i){super(),this.filters=t,this.op=i,this.Te=null}static create(t,i){return new Ui(t,i)}matches(t){return n3(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function n3(e){return e.op==="and"}function i3(e){return cT(e)&&n3(e)}function cT(e){for(const t of e.filters)if(t instanceof Ui)return!1;return!0}function sm(e){if(e instanceof je)return e.field.canonicalString()+e.op.toString()+go(e.value);if(i3(e))return e.filters.map(t=>sm(t)).join(",");{const t=e.filters.map(i=>sm(i)).join(",");return`${e.op}(${t})`}}function s3(e,t){return e instanceof je?function(r,o){return o instanceof je&&r.op===o.op&&r.field.isEqual(o.field)&&Pi(r.value,o.value)}(e,t):e instanceof Ui?function(r,o){return o instanceof Ui&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&s3(f,o.filters[m]),!0):!1}(e,t):void At(19439)}function r3(e){return e instanceof je?function(i){return`${i.field.canonicalString()} ${i.op} ${go(i.value)}`}(e):e instanceof Ui?function(i){return i.op.toString()+" {"+i.getFilters().map(r3).join(" ,")+"}"}(e):"Filter"}class hT extends je{constructor(t,i,r){super(t,i,r),this.key=bt.fromName(r.referenceValue)}matches(t){const i=bt.comparator(t.key,this.key);return this.matchesComparison(i)}}class fT extends je{constructor(t,i){super(t,"in",i),this.keys=a3("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class dT extends je{constructor(t,i){super(t,"not-in",i),this.keys=a3("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function a3(e,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>bt.fromName(r.referenceValue))}class mT extends je{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Um(i)&&cu(i.arrayValue,this.value)}}class gT extends je{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&cu(this.value.arrayValue,i)}}class pT extends je{constructor(t,i){super(t,"not-in",i)}matches(t){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!cu(this.value.arrayValue,i)}}class yT extends je{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Um(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t,i=null,r=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function Fy(e,t=null,i=[],r=[],o=null,u=null,f=null){return new _T(e,t,i,r,o,u,f)}function Bm(e){const t=Dt(e);if(t.Ie===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>sm(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Hh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>go(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>go(r)).join(",")),t.Ie=i}return t.Ie}function zm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!uT(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!s3(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gy(e.startAt,t.startAt)&&Gy(e.endAt,t.endAt)}function rm(e){return bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(t,i=null,r=[],o=[],u=null,f="F",m=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function vT(e,t,i,r,o,u,f,m){return new Fh(e,t,i,r,o,u,f,m)}function Qh(e){return new Fh(e)}function Qy(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function ET(e){return e.collectionGroup!==null}function Kl(e){const t=Dt(e);if(t.Ee===null){t.Ee=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ee.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ue(en.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(t).forEach(u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ee.push(new Sh(u,r))}),i.has(en.keyField().canonicalString())||t.Ee.push(new Sh(en.keyField(),r))}return t.Ee}function Oi(e){const t=Dt(e);return t.de||(t.de=TT(t,Kl(e))),t.de}function TT(e,t){if(e.limitType==="F")return Fy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Sh(o.field,u)});const i=e.endAt?new wh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wh(e.startAt.position,e.startAt.inclusive):null;return Fy(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}}function am(e,t,i){return new Fh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function Yh(e,t){return zm(Oi(e),Oi(t))&&e.limitType===t.limitType}function o3(e){return`${Bm(Oi(e))}|lt:${e.limitType}`}function eo(e){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(o=>r3(o)).join(", ")}]`),Hh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(o=>go(o)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(o=>go(o)).join(",")),`Target(${r})`}(Oi(e))}; limitType=${e.limitType})`}function Kh(e,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):bt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(e,t)&&function(r,o){for(const u of Kl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(e,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(e,t)&&function(r,o){return!(r.startAt&&!function(f,m,y){const g=Hy(f,m,y);return f.inclusive?g<=0:g<0}(r.startAt,Kl(r),o)||r.endAt&&!function(f,m,y){const g=Hy(f,m,y);return f.inclusive?g>=0:g>0}(r.endAt,Kl(r),o))}(e,t)}function bT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function l3(e){return(t,i)=>{let r=!1;for(const o of Kl(e)){const u=wT(o,t,i);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function wT(e,t,i){const r=e.field.isKeyField()?bt.comparator(t.key,i.key):function(u,f,m){const y=f.data.field(u),g=m.data.field(u);return y!==null&&g!==null?mo(y,g):At(42886)}(e.field,t,i);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return At(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,i]);o.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[i]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){dr(this.inner,(i,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return Qv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new me(bt.comparator);function vs(){return ST}const u3=new me(bt.comparator);function Ul(...e){let t=u3;for(const i of e)t=t.insert(i.key,i);return t}function c3(e){let t=u3;return e.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function Zr(){return $l()}function h3(){return $l()}function $l(){return new ia(e=>e.toString(),(e,t)=>e.isEqual(t))}const AT=new me(bt.comparator),CT=new Ue(bt.comparator);function Bt(...e){let t=CT;for(const i of e)t=t.add(i);return t}const RT=new Ue(kt);function xT(){return RT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(t)?"-0":t}}function f3(e){return{integerValue:""+e}}function IT(e,t){return eT(t)?f3(t):qm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function DT(e,t,i){return e instanceof Ah?function(o,u){const f={fields:{[$v]:{stringValue:Kv},[Zv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Pm(u)&&(u=Gh(u)),u&&(f.fields[Xv]=u),{mapValue:f}}(i,t):e instanceof hu?m3(e,t):e instanceof fu?g3(e,t):function(o,u){const f=d3(o,u),m=Yy(f)+Yy(o.Re);return im(f)&&im(o.Re)?f3(m):qm(o.serializer,m)}(e,t)}function MT(e,t,i){return e instanceof hu?m3(e,t):e instanceof fu?g3(e,t):i}function d3(e,t){return e instanceof Ch?function(r){return im(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class Ah extends $h{}class hu extends $h{constructor(t){super(),this.elements=t}}function m3(e,t){const i=p3(t);for(const r of e.elements)i.some(o=>Pi(o,r))||i.push(r);return{arrayValue:{values:i}}}class fu extends $h{constructor(t){super(),this.elements=t}}function g3(e,t){let i=p3(t);for(const r of e.elements)i=i.filter(o=>!Pi(o,r));return{arrayValue:{values:i}}}class Ch extends $h{constructor(t,i){super(),this.serializer=t,this.Re=i}}function Yy(e){return be(e.integerValue||e.doubleValue)}function p3(e){return Um(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function VT(e,t){return e.field.isEqual(t.field)&&function(r,o){return r instanceof hu&&o instanceof hu||r instanceof fu&&o instanceof fu?fo(r.elements,o.elements,Pi):r instanceof Ch&&o instanceof Ch?Pi(r.Re,o.Re):r instanceof Ah&&o instanceof Ah}(e.transform,t.transform)}class NT{constructor(t,i){this.version=t,this.transformResults=i}}class Li{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Li}static exists(t){return new Li(void 0,t)}static updateTime(t){return new Li(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function lh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Xh{}function y3(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new v3(e.key,Li.none()):new vu(e.key,e.data,Li.none());{const i=e.data,r=An.empty();let o=new Ue(en.comparator);for(let u of t.fields)if(!o.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new mr(e.key,r,new Bn(o.toArray()),Li.none())}}function OT(e,t,i){e instanceof vu?function(o,u,f){const m=o.value.clone(),y=$y(o.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(e,t,i):e instanceof mr?function(o,u,f){if(!lh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=$y(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(_3(o)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(e,t,i):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,i)}function Xl(e,t,i,r){return e instanceof vu?function(u,f,m,y){if(!lh(u.precondition,f))return m;const g=u.value.clone(),v=Xy(u.fieldTransforms,y,f);return g.setAll(v),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(e,t,i,r):e instanceof mr?function(u,f,m,y){if(!lh(u.precondition,f))return m;const g=Xy(u.fieldTransforms,y,f),v=f.data;return v.setAll(_3(u)),v.setAll(g),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(e,t,i,r):function(u,f,m){return lh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(e,t,i)}function LT(e,t){let i=null;for(const r of e.fieldTransforms){const o=t.data.field(r.field),u=d3(r.transform,o||null);u!=null&&(i===null&&(i=An.empty()),i.set(r.field,u))}return i||null}function Ky(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&fo(r,o,(u,f)=>VT(u,f))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vu extends Xh{constructor(t,i,r,o=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class mr extends Xh{constructor(t,i,r,o,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _3(e){const t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=e.data.field(i);t.set(i,r)}}),t}function $y(e,t,i){const r=new Map;Xt(e.length===i.length,32656,{Ve:i.length,me:e.length});for(let o=0;o<i.length;o++){const u=e[o],f=u.transform,m=t.data.field(u.field);r.set(u.field,MT(f,m,i[o]))}return r}function Xy(e,t,i){const r=new Map;for(const o of e){const u=o.transform,f=i.data.field(o.field);r.set(o.field,DT(u,f,t))}return r}class v3 extends Xh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kT extends Xh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(t,i,r,o){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&OT(u,t,r[o])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Xl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Xl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=h3();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(o.key)?null:m;const y=y3(f,m);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(xt.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Bt())}isEqual(t){return this.batchId===t.batchId&&fo(this.mutations,t.mutations,(i,r)=>Ky(i,r))&&fo(this.baseMutations,t.baseMutations,(i,r)=>Ky(i,r))}}class Hm{constructor(t,i,r,o){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=o}static from(t,i,r){Xt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let o=function(){return AT}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Hm(t,i,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,Ft;function BT(e){switch(e){case lt.OK:return At(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return At(15467,{code:e})}}function E3(e){if(e===void 0)return _s("GRPC error has no .code"),lt.UNKNOWN;switch(e){case De.OK:return lt.OK;case De.CANCELLED:return lt.CANCELLED;case De.UNKNOWN:return lt.UNKNOWN;case De.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case De.INTERNAL:return lt.INTERNAL;case De.UNAVAILABLE:return lt.UNAVAILABLE;case De.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case De.NOT_FOUND:return lt.NOT_FOUND;case De.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case De.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case De.ABORTED:return lt.ABORTED;case De.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case De.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case De.DATA_LOSS:return lt.DATA_LOSS;default:return At(39323,{code:e})}}(Ft=De||(De={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new sr([4294967295,4294967295],0);function Zy(e){const t=Hv().encode(e),i=new Lv;return i.update(t),new Uint8Array(i.digest())}function Jy(e){const t=new DataView(e.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new sr([i,r],0),new sr([o,u],0)]}class Gm{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Bl(`Invalid padding: ${i}`);if(r<0)throw new Bl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${i}`);this.pe=8*t.length-i,this.ye=sr.fromNumber(this.pe)}we(t,i,r){let o=t.add(i.multiply(sr.fromNumber(r)));return o.compare(zT)===1&&(o=new sr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const i=Zy(t),[r,o]=Jy(i);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);if(!this.be(f))return!1}return!0}static create(t,i,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Gm(u,o,i);return r.forEach(m=>f.insert(m)),f}insert(t){if(this.pe===0)return;const i=Zy(t),[r,o]=Jy(i);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(t,i,r,o,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const o=new Map;return o.set(t,Eu.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Zh(xt.min(),o,new me(kt),vs(),Bt())}}class Eu{constructor(t,i,r,o,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new Eu(r,i,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(t,i,r,o){this.De=t,this.removedTargetIds=i,this.key=r,this.ve=o}}class T3{constructor(t,i){this.targetId=t,this.Ce=i}}class b3{constructor(t,i,r=nn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=o}}class Wy{constructor(){this.Fe=0,this.Me=t_(),this.xe=nn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Bt(),i=Bt(),r=Bt();return this.Me.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:i=i.add(o);break;case 1:r=r.add(o);break;default:At(38017,{changeType:u})}}),new Eu(this.xe,this.Oe,t,i,r)}Qe(){this.Ne=!1,this.Me=t_()}$e(t,i){this.Ne=!0,this.Me=this.Me.insert(t,i)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Xt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class qT{constructor(t){this.ze=t,this.je=new Map,this.He=vs(),this.Je=$c(),this.Ye=$c(),this.Ze=new me(kt)}Xe(t){for(const i of t.De)t.ve&&t.ve.isFoundDocument()?this.et(i,t.ve):this.tt(i,t.key,t.ve);for(const i of t.removedTargetIds)this.tt(i,t.key,t.ve)}nt(t){this.forEachTarget(t,i=>{const r=this.rt(i);switch(t.state){case 0:this.it(i)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(i);break;case 3:this.it(i)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(i)&&(this.st(i),r.ke(t.resumeToken));break;default:At(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.je.forEach((r,o)=>{this.it(o)&&i(o)})}ot(t){const i=t.targetId,r=t.Ce.count,o=this._t(i);if(o){const u=o.target;if(rm(u))if(r===0){const f=new bt(u.path);this.tt(i,f,hn.newNoDocument(f,xt.min()))}else Xt(r===1,20013,{expectedCount:r});else{const f=this.ut(i);if(f!==r){const m=this.ct(t),y=m?this.lt(m,t,f):1;if(y!==0){this.st(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,g)}}}}}ct(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=i;let f,m;try{f=ur(r).toUint8Array()}catch(y){if(y instanceof Yv)return ho("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Gm(f,o,u)}catch(y){return ho(y instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(t,i,r){return i.Ce.count===r-this.Tt(t,i.targetId)?0:2}Tt(t,i){const r=this.ze.getRemoteKeysForTarget(i);let o=0;return r.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.tt(i,u,null),o++)}),o}It(t){const i=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&rm(m.target)){const y=new bt(m.target.path);this.Et(y).has(f)||this.dt(f,y)||this.tt(f,y,hn.newNoDocument(y,t))}u.Le&&(i.set(f,u.qe()),u.Qe())}});let r=Bt();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(y=>{const g=this._t(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(t));const o=new Zh(t,i,this.Ze,this.He,r);return this.He=vs(),this.Je=$c(),this.Ye=$c(),this.Ze=new me(kt),o}et(t,i){if(!this.it(t))return;const r=this.dt(t,i.key)?2:0;this.rt(t).$e(i.key,r),this.He=this.He.insert(i.key,i),this.Je=this.Je.insert(i.key,this.Et(i.key).add(t)),this.Ye=this.Ye.insert(i.key,this.At(i.key).add(t))}tt(t,i,r){if(!this.it(t))return;const o=this.rt(t);this.dt(t,i)?o.$e(i,1):o.Ue(i),this.Ye=this.Ye.insert(i,this.At(i).delete(t)),this.Ye=this.Ye.insert(i,this.At(i).add(t)),r&&(this.He=this.He.insert(i,r))}removeTarget(t){this.je.delete(t)}ut(t){const i=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let i=this.je.get(t);return i||(i=new Wy,this.je.set(t,i)),i}At(t){let i=this.Ye.get(t);return i||(i=new Ue(kt),this.Ye=this.Ye.insert(t,i)),i}Et(t){let i=this.Je.get(t);return i||(i=new Ue(kt),this.Je=this.Je.insert(t,i)),i}it(t){const i=this._t(t)!==null;return i||pt("WatchChangeAggregator","Detected inactive target",t),i}_t(t){const i=this.je.get(t);return i&&i.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Wy),this.ze.getRemoteKeysForTarget(t).forEach(i=>{this.tt(t,i,null)})}dt(t,i){return this.ze.getRemoteKeysForTarget(t).has(i)}}function $c(){return new me(bt.comparator)}function t_(){return new me(bt.comparator)}const HT={asc:"ASCENDING",desc:"DESCENDING"},GT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FT={and:"AND",or:"OR"};class QT{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function om(e,t){return e.useProto3Json||Hh(t)?t:{value:t}}function Rh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function w3(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function YT(e,t){return Rh(e,t.toTimestamp())}function ki(e){return Xt(!!e,49232),xt.fromTimestamp(function(i){const r=lr(i);return new Pe(r.seconds,r.nanos)}(e))}function Fm(e,t){return lm(e,t).canonicalString()}function lm(e,t){const i=function(o){return new he(["projects",o.projectId,"databases",o.database])}(e).child("documents");return t===void 0?i:i.child(t)}function S3(e){const t=he.fromString(e);return Xt(I3(t),10190,{key:t.toString()}),t}function um(e,t){return Fm(e.databaseId,t.path)}function C1(e,t){const i=S3(t);if(i.get(1)!==e.databaseId.projectId)throw new vt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+e.databaseId.projectId);if(i.get(3)!==e.databaseId.database)throw new vt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+e.databaseId.database);return new bt(C3(i))}function A3(e,t){return Fm(e.databaseId,t)}function KT(e){const t=S3(e);return t.length===4?he.emptyPath():C3(t)}function cm(e){return new he(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function C3(e){return Xt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function e_(e,t,i){return{name:um(e,t),fields:i.value.mapValue.fields}}function $T(e,t){let i;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:At(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(g,v){return g.useProto3Json?(Xt(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(Xt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))}(e,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(g){const v=g.code===void 0?lt.UNKNOWN:E3(g.code);return new vt(v,g.message||"")}(f);i=new b3(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=C1(e,r.document.name),u=ki(r.document.updateTime),f=r.document.createTime?ki(r.document.createTime):xt.min(),m=new An({mapValue:{fields:r.document.fields}}),y=hn.newFoundDocument(o,u,f,m),g=r.targetIds||[],v=r.removedTargetIds||[];i=new uh(g,v,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=C1(e,r.document),u=r.readTime?ki(r.readTime):xt.min(),f=hn.newNoDocument(o,u),m=r.removedTargetIds||[];i=new uh([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=C1(e,r.document),u=r.removedTargetIds||[];i=new uh([],u,o,null)}else{if(!("filter"in t))return At(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new UT(o,u),m=r.targetId;i=new T3(m,f)}}return i}function XT(e,t){let i;if(t instanceof vu)i={update:e_(e,t.key,t.value)};else if(t instanceof v3)i={delete:um(e,t.key)};else if(t instanceof mr)i={update:e_(e,t.key,t.data),updateMask:rb(t.fieldMask)};else{if(!(t instanceof kT))return At(16599,{ft:t.type});i={verify:um(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof Ah)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof hu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ch)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw At(20930,{transform:f.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:YT(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:At(27497)}(e,t.precondition)),i}function ZT(e,t){return e&&e.length>0?(Xt(t!==void 0,14353),e.map(i=>function(o,u){let f=o.updateTime?ki(o.updateTime):ki(u);return f.isEqual(xt.min())&&(f=ki(u)),new NT(f,o.transformResults||[])}(i,t))):[]}function JT(e,t){return{documents:[A3(e,t.path)]}}function WT(e,t){const i={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=A3(e,o);const u=function(g){if(g.length!==0)return x3(Ui.create(g,"and"))}(t.filters);u&&(i.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(v=>function(b){return{field:no(b.field),direction:nb(b.dir)}}(v))}(t.orderBy);f&&(i.structuredQuery.orderBy=f);const m=om(e,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:i,parent:o}}function tb(e){let t=KT(e.parent);const i=e.structuredQuery,r=i.from?i.from.length:0;let o=null;if(r>0){Xt(r===1,65062);const v=i.from[0];v.allDescendants?o=v.collectionId:t=t.child(v.collectionId)}let u=[];i.where&&(u=function(T){const b=R3(T);return b instanceof Ui&&i3(b)?b.getFilters():[b]}(i.where));let f=[];i.orderBy&&(f=function(T){return T.map(b=>function(V){return new Sh(io(V.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(b))}(i.orderBy));let m=null;i.limit&&(m=function(T){let b;return b=typeof T=="object"?T.value:T,Hh(b)?null:b}(i.limit));let y=null;i.startAt&&(y=function(T){const b=!!T.before,R=T.values||[];return new wh(R,b)}(i.startAt));let g=null;return i.endAt&&(g=function(T){const b=!T.before,R=T.values||[];return new wh(R,b)}(i.endAt)),vT(t,o,f,u,m,"F",y,g)}function eb(e,t){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At(28987,{purpose:o})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function R3(e){return e.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=io(i.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=io(i.unaryFilter.field);return je.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(i.unaryFilter.field);return je.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=io(i.unaryFilter.field);return je.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return At(61313);default:return At(60726)}}(e):e.fieldFilter!==void 0?function(i){return je.create(io(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return At(58110);default:return At(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(i){return Ui.create(i.compositeFilter.filters.map(r=>R3(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return At(1026)}}(i.compositeFilter.op))}(e):At(30097,{filter:e})}function nb(e){return HT[e]}function ib(e){return GT[e]}function sb(e){return FT[e]}function no(e){return{fieldPath:e.canonicalString()}}function io(e){return en.fromServerFormat(e.fieldPath)}function x3(e){return e instanceof je?function(i){if(i.op==="=="){if(qy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NAN"}};if(zy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(qy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NOT_NAN"}};if(zy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(i.field),op:ib(i.op),value:i.value}}}(e):e instanceof Ui?function(i){const r=i.getFilters().map(o=>x3(o));return r.length===1?r[0]:{compositeFilter:{op:sb(i.op),filters:r}}}(e):At(54877,{filter:e})}function rb(e){const t=[];return e.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function I3(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t,i,r,o,u=xt.min(),f=xt.min(),m=nn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new tr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t){this.wt=t}}function ob(e){const t=tb({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?am(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.Cn=new ub}addToCollectionParentIndex(t,i){return this.Cn.add(i),ot.resolve()}getCollectionParents(t,i){return ot.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return ot.resolve()}deleteFieldIndex(t,i){return ot.resolve()}deleteAllFieldIndexes(t){return ot.resolve()}createTargetIndexes(t,i){return ot.resolve()}getDocumentsMatchingTarget(t,i){return ot.resolve(null)}getIndexType(t,i){return ot.resolve(0)}getFieldIndexes(t,i){return ot.resolve([])}getNextCollectionGroupToUpdate(t){return ot.resolve(null)}getMinOffset(t,i){return ot.resolve(or.min())}getMinOffsetFromCollectionGroup(t,i){return ot.resolve(or.min())}updateCollectionGroup(t,i,r){return ot.resolve()}updateIndexEntries(t,i){return ot.resolve()}}class ub{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i]||new Ue(he.comparator),u=!o.has(r);return this.index[i]=o.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Ue(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D3=41943040;class wn{static withCacheSize(t){return new wn(t,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(D3,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new po(0)}static lr(){return new po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="LruGarbageCollector",cb=1048576;function s_([e,t],[i,r]){const o=kt(e,i);return o===0?kt(t,r):o}class hb{constructor(t){this.Er=t,this.buffer=new Ue(s_),this.dr=0}Ar(){return++this.dr}Rr(t){const i=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();s_(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class fb{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){pt(i_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){So(i)?pt(i_,"Ignoring IndexedDB error during garbage collection: ",i):await wo(i)}await this.mr(3e5)})}}class db{constructor(t,i){this.gr=t,this.params=i}calculateTargetCount(t,i){return this.gr.pr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return ot.resolve(qh.le);const r=new hb(i);return this.gr.forEachTarget(t,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.gr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.gr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(n_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.wr(t,i))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,i){let r,o,u,f,m,y,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(t,o))).next(T=>(r=T,m=Date.now(),this.removeTargets(t,r,i))).next(T=>(u=T,y=Date.now(),this.removeOrphanedDocuments(t,r))).next(T=>(g=Date.now(),to()<=Qt.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-v}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${T} documents in `+(g-y)+`ms
Total Duration: ${g-v}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T})))}}function mb(e,t){return new db(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.changes=new ia(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,hn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?ot.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,i,r,o){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,i))).next(o=>(r!==null&&Xl(r.mutation,o,Bn.empty(),Pe.now()),o))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Bt()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Bt()){const o=Zr();return this.populateOverlays(t,o,i).next(()=>this.computeViews(t,i,o,r).next(u=>{let f=Ul();return u.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(t,i){const r=Zr();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Bt()))}populateOverlays(t,i,r){const o=[];return r.forEach(u=>{i.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{i.set(f,m)})})}computeViews(t,i,r,o){let u=vs();const f=$l(),m=function(){return $l()}();return i.forEach((y,g)=>{const v=r.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof mr)?u=u.insert(g.key,g):v!==void 0?(f.set(g.key,v.mutation.getFieldMask()),Xl(v.mutation,g,v.mutation.getFieldMask(),Pe.now())):f.set(g.key,Bn.empty())}),this.recalculateAndSaveOverlays(t,u).next(y=>(y.forEach((g,v)=>f.set(g,v)),i.forEach((g,v)=>{var T;return m.set(g,new pb(v,(T=f.get(g))!==null&&T!==void 0?T:null))}),m))}recalculateAndSaveOverlays(t,i){const r=$l();let o=new me((f,m)=>f-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(f=>{for(const m of f)m.keys().forEach(y=>{const g=i.get(y);if(g===null)return;let v=r.get(y)||Bn.empty();v=m.applyToLocalView(g,v),r.set(y,v);const T=(o.get(m.batchId)||Bt()).add(y);o=o.insert(m.batchId,T)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,v=y.value,T=h3();v.forEach(b=>{if(!u.has(b)){const R=y3(i.get(b),r.get(b));R!==null&&T.set(b,R),u=u.add(b)}}),f.push(this.documentOverlayCache.saveOverlays(t,g,T))}return ot.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,o){return function(f){return bt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):ET(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,o):this.getDocumentsMatchingCollectionQuery(t,i,r,o)}getNextDocuments(t,i,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,o-u.size):ot.resolve(Zr());let m=ou,y=u;return f.next(g=>ot.forEach(g,(v,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(v)?ot.resolve():this.remoteDocumentCache.getEntry(t,v).next(b=>{y=y.insert(v,b)}))).next(()=>this.populateOverlays(t,g,u)).next(()=>this.computeViews(t,y,g,Bt())).next(v=>({batchId:m,changes:c3(v)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new bt(i)).next(r=>{let o=Ul();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,i,r,o){const u=i.collectionGroup;let f=Ul();return this.indexManager.getCollectionParents(t,u).next(m=>ot.forEach(m,y=>{const g=function(T,b){return new Fh(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,o).next(v=>{v.forEach((T,b)=>{f=f.insert(T,b)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,i,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,o))).next(f=>{u.forEach((y,g)=>{const v=g.getKey();f.get(v)===null&&(f=f.insert(v,hn.newInvalidDocument(v)))});let m=Ul();return f.forEach((y,g)=>{const v=u.get(y);v!==void 0&&Xl(v.mutation,g,Bn.empty(),Pe.now()),Kh(i,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,i){return ot.resolve(this.kr.get(i))}saveBundleMetadata(t,i){return this.kr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}}(i)),ot.resolve()}getNamedQuery(t,i){return ot.resolve(this.qr.get(i))}saveNamedQuery(t,i){return this.qr.set(i.name,function(o){return{name:o.name,query:ob(o.bundledQuery),readTime:ki(o.readTime)}}(i)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.overlays=new me(bt.comparator),this.Qr=new Map}getOverlay(t,i){return ot.resolve(this.overlays.get(i))}getOverlays(t,i){const r=Zr();return ot.forEach(i,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((o,u)=>{this.St(t,i,u)}),ot.resolve()}removeOverlaysForBatchId(t,i,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),ot.resolve()}getOverlaysForCollection(t,i,r){const o=Zr(),u=i.length+1,f=new bt(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ot.resolve(o)}getOverlaysForCollectionGroup(t,i,r,o){let u=new me((g,v)=>g-v);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let v=u.get(g.largestBatchId);v===null&&(v=Zr(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=Zr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,v)=>m.set(g,v)),!(m.size()>=o)););return ot.resolve(m)}St(t,i,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new PT(i,r));let u=this.Qr.get(i);u===void 0&&(u=Bt(),this.Qr.set(i,u)),this.Qr.set(i,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return ot.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.$r=new Ue(Ye.Ur),this.Kr=new Ue(Ye.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,i){const r=new Ye(t,i);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.zr(new Ye(t,i))}jr(t,i){t.forEach(r=>this.removeReference(r,i))}Hr(t){const i=new bt(new he([])),r=new Ye(i,t),o=new Ye(i,t+1),u=[];return this.Kr.forEachInRange([r,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const i=new bt(new he([])),r=new Ye(i,t),o=new Ye(i,t+1);let u=Bt();return this.Kr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(t){const i=new Ye(t,0),r=this.$r.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Ye{constructor(t,i){this.key=t,this.Zr=i}static Ur(t,i){return bt.comparator(t.key,i.key)||kt(t.Zr,i.Zr)}static Wr(t,i){return kt(t.Zr,i.Zr)||bt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.nr=1,this.Xr=new Ue(Ye.Ur)}checkEmpty(t){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new jT(u,i,r,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new Ye(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return ot.resolve(f)}lookupMutationBatch(t,i){return ot.resolve(this.ei(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,o=this.ti(r),u=o<0?0:o;return ot.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?jm:this.nr-1)}getAllMutationBatches(t){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Ye(i,0),o=new Ye(i,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],f=>{const m=this.ei(f.Zr);u.push(m)}),ot.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Ue(kt);return i.forEach(o=>{const u=new Ye(o,0),f=new Ye(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{r=r.add(m.Zr)})}),ot.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,o=r.length+1;let u=r;bt.isDocumentKey(u)||(u=u.child(""));const f=new Ye(new bt(u),0);let m=new Ue(kt);return this.Xr.forEachWhile(y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(m=m.add(y.Zr)),!0)},f),ot.resolve(this.ni(m))}ni(t){const i=[];return t.forEach(r=>{const o=this.ei(r);o!==null&&i.push(o)}),i}removeMutationBatch(t,i){Xt(this.ri(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ot.forEach(i.mutations,o=>{const u=new Ye(o.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,i){const r=new Ye(i,0),o=this.Xr.firstAfterOrEqual(r);return ot.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ot.resolve()}ri(t,i){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const i=this.ti(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t){this.ii=t,this.docs=function(){return new me(bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,o=this.docs.get(r),u=o?o.size:0,f=this.ii(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return ot.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(i))}getEntries(t,i){let r=vs();return i.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():hn.newInvalidDocument(o))}),ot.resolve(r)}getDocumentsMatchingQuery(t,i,r,o){let u=vs();const f=i.path,m=new bt(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:v}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||Z8(X8(v),r)<=0||(o.has(v.key)||Kh(i,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ot.resolve(u)}getAllFromCollectionGroup(t,i,r,o){At(9500)}si(t,i){return ot.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new wb(this)}getSize(t){return ot.resolve(this.size)}}class wb extends gb{constructor(t){super(),this.Br=t}applyChanges(t){const i=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?i.push(this.Br.addEntry(t,o)):this.Br.removeEntry(r)}),ot.waitFor(i)}getFromCache(t,i){return this.Br.getEntry(t,i)}getAllFromCache(t,i){return this.Br.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t){this.persistence=t,this.oi=new ia(i=>Bm(i),zm),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this._i=0,this.ai=new Qm,this.targetCount=0,this.ui=po.cr()}forEachTarget(t,i){return this.oi.forEach((r,o)=>i(o)),ot.resolve()}getLastRemoteSnapshotVersion(t){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ot.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this._i&&(this._i=i),ot.resolve()}Tr(t){this.oi.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ui=new po(i),this.highestTargetId=i),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,i){return this.Tr(i),this.targetCount+=1,ot.resolve()}updateTargetData(t,i){return this.Tr(i),ot.resolve()}removeTargetData(t,i){return this.oi.delete(i.target),this.ai.Hr(i.targetId),this.targetCount-=1,ot.resolve()}removeTargets(t,i,r){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),ot.waitFor(u).next(()=>o)}getTargetCount(t){return ot.resolve(this.targetCount)}getTargetData(t,i){const r=this.oi.get(i)||null;return ot.resolve(r)}addMatchingKeys(t,i,r){return this.ai.Gr(i,r),ot.resolve()}removeMatchingKeys(t,i,r){this.ai.jr(i,r);const o=this.persistence.referenceDelegate,u=[];return o&&i.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),ot.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this.ai.Hr(i),ot.resolve()}getMatchingKeysForTargetId(t,i){const r=this.ai.Yr(i);return ot.resolve(r)}containsKey(t,i){return ot.resolve(this.ai.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(t,i){this.ci={},this.overlays={},this.li=new qh(0),this.hi=!1,this.hi=!0,this.Pi=new Eb,this.referenceDelegate=t(this),this.Ti=new Sb(this),this.indexManager=new lb,this.remoteDocumentCache=function(o){return new bb(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new ab(i),this.Ei=new _b(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new vb,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ci[t.toKey()];return r||(r=new Tb(i,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,i,r){pt("MemoryPersistence","Starting transaction:",t);const o=new Ab(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(t,i){return ot.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,i)))}}class Ab extends W8{constructor(t){super(),this.currentSequenceNumber=t}}class Ym{constructor(t){this.persistence=t,this.Vi=new Qm,this.mi=null}static fi(t){return new Ym(t)}get gi(){if(this.mi)return this.mi;throw At(60996)}addReference(t,i,r){return this.Vi.addReference(r,i),this.gi.delete(r.toString()),ot.resolve()}removeReference(t,i,r){return this.Vi.removeReference(r,i),this.gi.add(r.toString()),ot.resolve()}markPotentiallyOrphaned(t,i){return this.gi.add(i.toString()),ot.resolve()}removeTarget(t,i){this.Vi.Hr(i.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(t,i))}di(){this.mi=new Set}Ai(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.gi,r=>{const o=bt.fromPath(r);return this.pi(t,o).next(u=>{u||i.removeEntry(o,xt.min())})}).next(()=>(this.mi=null,i.apply(t)))}updateLimboDocument(t,i){return this.pi(t,i).next(r=>{r?this.gi.delete(i.toString()):this.gi.add(i.toString())})}Ii(t){return 0}pi(t,i){return ot.or([()=>ot.resolve(this.Vi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ri(t,i)])}}class xh{constructor(t,i){this.persistence=t,this.yi=new ia(r=>nT(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=mb(this,i)}static fi(t,i){return new xh(t,i)}di(){}Ai(t){return ot.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}pr(t){const i=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(o=>r+o))}br(t){let i=0;return this.yr(t,r=>{i++}).next(()=>i)}yr(t,i){return ot.forEach(this.yi,(r,o)=>this.Dr(t,r,o).next(u=>u?ot.resolve():i(o)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(t,f=>this.Dr(t,f,i).next(m=>{m||(r++,u.removeEntry(f,xt.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.yi.set(i,t.currentSequenceNumber),ot.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),ot.resolve()}removeReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),ot.resolve()}updateLimboDocument(t,i){return this.yi.set(i,t.currentSequenceNumber),ot.resolve()}Ii(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=ah(t.data.value)),i}Dr(t,i,r){return ot.or([()=>this.persistence.Ri(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const o=this.yi.get(i);return ot.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,i,r,o){this.targetId=t,this.fromCache=i,this.ds=r,this.As=o}static Rs(t,i){let r=Bt(),o=Bt();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Km(t,i.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return EE()?8:tT(_E())>0?6:4}()}initialize(t,i){this.ys=t,this.indexManager=i,this.Vs=!0}getDocumentsMatchingQuery(t,i,r,o){const u={result:null};return this.ws(t,i).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(t,i,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new Cb;return this.Ss(t,i,f).next(m=>{if(u.result=m,this.fs)return this.Ds(t,i,f,m.size)})}).next(()=>u.result)}Ds(t,i,r,o){return r.documentReadCount<this.gs?(to()<=Qt.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",eo(i),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ot.resolve()):(to()<=Qt.DEBUG&&pt("QueryEngine","Query:",eo(i),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(to()<=Qt.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",eo(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Oi(i))):ot.resolve())}ws(t,i){if(Qy(i))return ot.resolve(null);let r=Oi(i);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=am(i,null,"F"),r=Oi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const f=Bt(...u);return this.ys.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,r).next(y=>{const g=this.vs(i,m);return this.Cs(i,g,f,y.readTime)?this.ws(t,am(i,null,"F")):this.Fs(t,g,i,y)}))})))}bs(t,i,r,o){return Qy(i)||o.isEqual(xt.min())?ot.resolve(null):this.ys.getDocuments(t,r).next(u=>{const f=this.vs(i,u);return this.Cs(i,f,r,o)?ot.resolve(null):(to()<=Qt.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),eo(i)),this.Fs(t,f,i,$8(o,ou)).next(m=>m))})}vs(t,i){let r=new Ue(l3(t));return i.forEach((o,u)=>{Kh(t,u)&&(r=r.add(u))}),r}Cs(t,i,r,o){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,i,r){return to()<=Qt.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",eo(i)),this.ys.getDocumentsMatchingQuery(t,i,or.min(),r)}Fs(t,i,r,o){return this.ys.getDocumentsMatchingQuery(t,r,o).next(u=>(i.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="LocalStore",xb=3e8;class Ib{constructor(t,i,r,o){this.persistence=t,this.Ms=i,this.serializer=o,this.xs=new me(kt),this.Os=new ia(u=>Bm(u),zm),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yb(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.xs))}}function Db(e,t,i,r){return new Ib(e,t,i,r)}async function V3(e,t){const i=Dt(e);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let o;return i.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,i.Ls(t),i.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let y=Bt();for(const g of o){f.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}return i.localDocuments.getDocuments(r,y).next(g=>({ks:g,removedBatchIds:f,addedBatchIds:m}))})})}function Mb(e,t){const i=Dt(e);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=i.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,g,v){const T=g.batch,b=T.keys();let R=ot.resolve();return b.forEach(V=>{R=R.next(()=>v.getEntry(y,V)).next(P=>{const k=g.docVersions.get(V);Xt(k!==null,48541),P.version.compareTo(k)<0&&(T.applyToRemoteDocument(P,g),P.isValidDocument()&&(P.setReadTime(g.commitVersion),v.addEntry(P)))})}),R.next(()=>m.mutationQueue.removeMutationBatch(y,T))}(i,r,t,u).next(()=>u.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Bt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(t))).next(()=>i.localDocuments.getDocuments(r,o))})}function N3(e){const t=Dt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ti.getLastRemoteSnapshotVersion(i))}function Vb(e,t){const i=Dt(e),r=t.snapshotVersion;let o=i.xs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=i.Bs.newChangeBuffer({trackRemovals:!0});o=i.xs;const m=[];t.targetChanges.forEach((v,T)=>{const b=o.get(T);if(!b)return;m.push(i.Ti.removeMatchingKeys(u,v.removedDocuments,T).next(()=>i.Ti.addMatchingKeys(u,v.addedDocuments,T)));let R=b.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?R=R.withResumeToken(nn.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),o=o.insert(T,R),function(P,k,z){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=xb?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(b,R,v)&&m.push(i.Ti.updateTargetData(u,R))});let y=vs(),g=Bt();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,v))}),m.push(Nb(u,f,t.documentUpdates).next(v=>{y=v.qs,g=v.Qs})),!r.isEqual(xt.min())){const v=i.Ti.getLastRemoteSnapshotVersion(u).next(T=>i.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(v)}return ot.waitFor(m).next(()=>f.apply(u)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(i.xs=o,u))}function Nb(e,t,i){let r=Bt(),o=Bt();return i.forEach(u=>r=r.add(u)),t.getEntries(e,r).next(u=>{let f=vs();return i.forEach((m,y)=>{const g=u.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(xt.min())?(t.removeEntry(m,y.readTime),f=f.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),f=f.insert(m,y)):pt($m,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{qs:f,Qs:o}})}function Ob(e,t){const i=Dt(e);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=jm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Lb(e,t){const i=Dt(e);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return i.Ti.getTargetData(r,t).next(u=>u?(o=u,ot.resolve(o)):i.Ti.allocateTargetId(r).next(f=>(o=new tr(t,f,"TargetPurposeListen",r.currentSequenceNumber),i.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=i.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.xs=i.xs.insert(r.targetId,r),i.Os.set(t,r.targetId)),r})}async function hm(e,t,i){const r=Dt(e),o=r.xs.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!So(f))throw f;pt($m,`Failed to update sequence numbers for target ${t}: ${f}`)}r.xs=r.xs.remove(t),r.Os.delete(o.target)}function r_(e,t,i){const r=Dt(e);let o=xt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readwrite",f=>function(y,g,v){const T=Dt(y),b=T.Os.get(v);return b!==void 0?ot.resolve(T.xs.get(b)):T.Ti.getTargetData(g,v)}(r,f,Oi(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,m.targetId).next(y=>{u=y})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,t,i?o:xt.min(),i?u:Bt())).next(m=>(kb(r,bT(t),m),{documents:m,$s:u})))}function kb(e,t,i){let r=e.Ns.get(t)||xt.min();i.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),e.Ns.set(t,r)}class a_{constructor(){this.activeTargetIds=xT()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jb{constructor(){this.xo=new a_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,i,r){this.Oo[t]=i}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new a_,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="ConnectivityMonitor";class l_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){pt(o_,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){pt(o_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function fm(){return Xc===null?Xc=function(){return 268435456+Math.round(2147483648*Math.random())}():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="RestConnection",Ub={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bb{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=i+"://"+t.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Th?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(t,i,r,o,u){const f=fm(),m=this.jo(t,i.toUriEncodedString());pt(R1,`Sending RPC '${t}' ${f}:`,m,r);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:g}=new URL(m),v=Om(g);return this.Jo(t,m,y,r,v).then(T=>(pt(R1,`Received RPC '${t}' ${f}: `,T),T),T=>{throw ho(R1,`RPC '${t}' ${f} failed with error: `,T,"url: ",m,"request:",r),T})}Yo(t,i,r,o,u,f){return this.zo(t,i,r,o,u)}Ho(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}jo(t,i){const r=Ub[t];return`${this.Ko}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class qb extends Bb{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,o,u){const f=fm();return new Promise((m,y)=>{const g=new kv;g.setWithCredentials(!0),g.listenOnce(jv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case rh.NO_ERROR:const T=g.getResponseJson();pt(un,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(T)),m(T);break;case rh.TIMEOUT:pt(un,`RPC '${t}' ${f} timed out`),y(new vt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const b=g.getStatus();if(pt(un,`RPC '${t}' ${f} failed with status:`,b,"response text:",g.getResponseText()),b>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const P=function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(F)>=0?F:lt.UNKNOWN}(V.status);y(new vt(P,V.message))}else y(new vt(lt.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new vt(lt.UNAVAILABLE,"Connection failed."));break;default:At(9055,{h_:t,streamId:f,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{pt(un,`RPC '${t}' ${f} completed.`)}});const v=JSON.stringify(o);pt(un,`RPC '${t}' ${f} sending request:`,o),g.send(i,"POST",v,r,15)})}I_(t,i,r){const o=fm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=Bv(),m=Uv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const v=u.join("");pt(un,`Creating RPC '${t}' stream ${o}: ${v}`,y);const T=f.createWebChannel(v,y);this.E_(T);let b=!1,R=!1;const V=new zb({Zo:k=>{R?pt(un,`Not sending because RPC '${t}' stream ${o} is closed:`,k):(b||(pt(un,`Opening RPC '${t}' stream ${o} transport.`),T.open(),b=!0),pt(un,`RPC '${t}' stream ${o} sending:`,k),T.send(k))},Xo:()=>T.close()}),P=(k,z,F)=>{k.listen(z,K=>{try{F(K)}catch(rt){setTimeout(()=>{throw rt},0)}})};return P(T,Pl.EventType.OPEN,()=>{R||(pt(un,`RPC '${t}' stream ${o} transport opened.`),V.__())}),P(T,Pl.EventType.CLOSE,()=>{R||(R=!0,pt(un,`RPC '${t}' stream ${o} transport closed`),V.u_(),this.d_(T))}),P(T,Pl.EventType.ERROR,k=>{R||(R=!0,ho(un,`RPC '${t}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),V.u_(new vt(lt.UNAVAILABLE,"The operation could not be completed")))}),P(T,Pl.EventType.MESSAGE,k=>{var z;if(!R){const F=k.data[0];Xt(!!F,16349);const K=F,rt=(K==null?void 0:K.error)||((z=K[0])===null||z===void 0?void 0:z.error);if(rt){pt(un,`RPC '${t}' stream ${o} received error:`,rt);const W=rt.status;let Q=function(x){const L=De[x];if(L!==void 0)return E3(L)}(W),D=rt.message;Q===void 0&&(Q=lt.INTERNAL,D="Unknown error status: "+W+" with message "+rt.message),R=!0,V.u_(new vt(Q,D)),T.close()}else pt(un,`RPC '${t}' stream ${o} received:`,F),V.c_(F)}}),P(m,Pv.STAT_EVENT,k=>{k.stat===tm.PROXY?pt(un,`RPC '${t}' stream ${o} detected buffering proxy`):k.stat===tm.NOPROXY&&pt(un,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{V.a_()},0),V}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(i=>i===t)}}function x1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(e){return new QT(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(t,i,r=1e3,o=1.5,u=6e4){this.xi=t,this.timerId=i,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const i=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,i-r);o>0&&pt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="PersistentStream";class L3{constructor(t,i,r,o,u,f,m,y){this.xi=t,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new O3(t,i)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,i){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():i&&i.code===lt.RESOURCE_EXHAUSTED?(_s(i.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):i&&i.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(i)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),i=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===i&&this.z_(r,o)},r=>{t(()=>{const o=new vt(lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(t,i){const r=this.G_(this.v_);this.stream=this.H_(t,i),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return pt(u_,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return i=>{this.xi.enqueueAndForget(()=>this.v_===t?i():(pt(u_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hb extends L3{constructor(t,i,r,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,o,f),this.serializer=u}H_(t,i){return this.connection.I_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const i=$T(this.serializer,t),r=function(u){if(!("targetChange"in u))return xt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?xt.min():f.readTime?ki(f.readTime):xt.min()}(t);return this.listener.Y_(i,r)}Z_(t){const i={};i.database=cm(this.serializer),i.addTarget=function(u,f){let m;const y=f.target;if(m=rm(y)?{documents:JT(u,y)}:{query:WT(u,y).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=w3(u,f.resumeToken);const g=om(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(xt.min())>0){m.readTime=Rh(u,f.snapshotVersion.toTimestamp());const g=om(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,t);const r=eb(this.serializer,t);r&&(i.labels=r),this.Q_(i)}X_(t){const i={};i.database=cm(this.serializer),i.removeTarget=t,this.Q_(i)}}class Gb extends L3{constructor(t,i,r,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,i){return this.connection.I_("Write",t,i)}J_(t){return Xt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Xt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Xt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const i=ZT(t.writeResults,t.commitTime),r=ki(t.commitTime);return this.listener.ra(r,i)}ia(){const t={};t.database=cm(this.serializer),this.Q_(t)}ta(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>XT(this.serializer,r))};this.Q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{}class Qb extends Fb{constructor(t,i,r,o){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new vt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,i,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(t,lm(i,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new vt(lt.UNKNOWN,u.toString())})}Yo(t,i,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(t,lm(i,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new vt(lt.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Yb{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(_s(i),this.ua=!1):pt("OnlineStateTracker",i)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class Kb{constructor(t,i,r,o,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{r.enqueueAndForget(async()=>{sa(this)&&(pt(ta,"Restarting streams for network reachability change."),await async function(y){const g=Dt(y);g.da.add(4),await Tu(g),g.Va.set("Unknown"),g.da.delete(4),await Wh(g)}(this))})}),this.Va=new Yb(r,o)}}async function Wh(e){if(sa(e))for(const t of e.Aa)await t(!0)}async function Tu(e){for(const t of e.Aa)await t(!1)}function k3(e,t){const i=Dt(e);i.Ea.has(t.targetId)||(i.Ea.set(t.targetId,t),Wm(i)?Jm(i):Ao(i).N_()&&Zm(i,t))}function Xm(e,t){const i=Dt(e),r=Ao(i);i.Ea.delete(t),r.N_()&&j3(i,t),i.Ea.size===0&&(r.N_()?r.k_():sa(i)&&i.Va.set("Unknown"))}function Zm(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xt.min())>0){const i=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ao(e).Z_(t)}function j3(e,t){e.ma.Ke(t),Ao(e).X_(t)}function Jm(e){e.ma=new qT({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Ao(e).start(),e.Va.ca()}function Wm(e){return sa(e)&&!Ao(e).O_()&&e.Ea.size>0}function sa(e){return Dt(e).da.size===0}function P3(e){e.ma=void 0}async function $b(e){e.Va.set("Online")}async function Xb(e){e.Ea.forEach((t,i)=>{Zm(e,t)})}async function Zb(e,t){P3(e),Wm(e)?(e.Va.Pa(t),Jm(e)):e.Va.set("Unknown")}async function Jb(e,t,i){if(e.Va.set("Online"),t instanceof b3&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(e,t)}catch(r){pt(ta,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ih(e,r)}else if(t instanceof uh?e.ma.Xe(t):t instanceof T3?e.ma.ot(t):e.ma.nt(t),!i.isEqual(xt.min()))try{const r=await N3(e.localStore);i.compareTo(r)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const v=u.Ea.get(g);v&&u.Ea.set(g,v.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,g)=>{const v=u.Ea.get(y);if(!v)return;u.Ea.set(y,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),j3(u,y);const T=new tr(v.target,y,g,v.sequenceNumber);Zm(u,T)}),u.remoteSyncer.applyRemoteEvent(m)}(e,i)}catch(r){pt(ta,"Failed to raise snapshot:",r),await Ih(e,r)}}async function Ih(e,t,i){if(!So(t))throw t;e.da.add(1),await Tu(e),e.Va.set("Offline"),i||(i=()=>N3(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{pt(ta,"Retrying IndexedDB access"),await i(),e.da.delete(1),await Wh(e)})}function U3(e,t){return t().catch(i=>Ih(e,i,t))}async function tf(e){const t=Dt(e),i=hr(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:jm;for(;Wb(t);)try{const o=await Ob(t.localStore,r);if(o===null){t.Ia.length===0&&i.k_();break}r=o.batchId,tw(t,o)}catch(o){await Ih(t,o)}B3(t)&&z3(t)}function Wb(e){return sa(e)&&e.Ia.length<10}function tw(e,t){e.Ia.push(t);const i=hr(e);i.N_()&&i.ea&&i.ta(t.mutations)}function B3(e){return sa(e)&&!hr(e).O_()&&e.Ia.length>0}function z3(e){hr(e).start()}async function ew(e){hr(e).ia()}async function nw(e){const t=hr(e);for(const i of e.Ia)t.ta(i.mutations)}async function iw(e,t,i){const r=e.Ia.shift(),o=Hm.from(r,t,i);await U3(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await tf(e)}async function sw(e,t){t&&hr(e).ea&&await async function(r,o){if(function(f){return BT(f)&&f!==lt.ABORTED}(o.code)){const u=r.Ia.shift();hr(r).L_(),await U3(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await tf(r)}}(e,t),B3(e)&&z3(e)}async function c_(e,t){const i=Dt(e);i.asyncQueue.verifyOperationInProgress(),pt(ta,"RemoteStore received new credentials");const r=sa(i);i.da.add(3),await Tu(i),r&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.da.delete(3),await Wh(i)}async function rw(e,t){const i=Dt(e);t?(i.da.delete(2),await Wh(i)):t||(i.da.add(2),await Tu(i),i.Va.set("Unknown"))}function Ao(e){return e.fa||(e.fa=function(i,r,o){const u=Dt(i);return u.oa(),new Hb(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(e.datastore,e.asyncQueue,{e_:$b.bind(null,e),n_:Xb.bind(null,e),i_:Zb.bind(null,e),Y_:Jb.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),Wm(e)?Jm(e):e.Va.set("Unknown")):(await e.fa.stop(),P3(e))})),e.fa}function hr(e){return e.ga||(e.ga=function(i,r,o){const u=Dt(i);return u.oa(),new Gb(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:ew.bind(null,e),i_:sw.bind(null,e),na:nw.bind(null,e),ra:iw.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await tf(e)):(await e.ga.stop(),e.Ia.length>0&&(pt(ta,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,i,r,o,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,o,u){const f=Date.now()+r,m=new tg(t,i,f,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(e,t){if(_s("AsyncQueue",`${t}: ${e}`),So(e))return new vt(lt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(t){return new lo(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||bt.comparator(i.key,r.key):(i,r)=>bt.comparator(i.key,r.key),this.keyedMap=Ul(),this.sortedSet=new me(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof lo)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new lo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.pa=new me(bt.comparator)}track(t){const i=t.doc.key,r=this.pa.get(i);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(i,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(i):t.type===1&&r.type===2?this.pa=this.pa.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):At(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(i,t)}wa(){const t=[];return this.pa.inorderTraversal((i,r)=>{t.push(r)}),t}}class yo{constructor(t,i,r,o,u,f,m,y,g){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,i,r,o,u){const f=[];return i.forEach(m=>{f.push({type:0,doc:m})}),new yo(t,i,lo.emptySet(i),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==r[o].type||!i[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class ow{constructor(){this.queries=f_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const o=Dt(i),u=o.queries;o.queries=f_(),u.forEach((f,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new vt(lt.ABORTED,"Firestore shutting down"))}}function f_(){return new ia(e=>o3(e),Yh)}async function q3(e,t){const i=Dt(e);let r=3;const o=t.query;let u=i.queries.get(o);u?!u.Da()&&t.va()&&(r=2):(u=new aw,r=t.va()?0:1);try{switch(r){case 0:u.ba=await i.onListen(o,!0);break;case 1:u.ba=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=eg(f,`Initialization of query '${eo(t.query)}' failed`);return void t.onError(m)}i.queries.set(o,u),u.Sa.push(t),t.Fa(i.onlineState),u.ba&&t.Ma(u.ba)&&ng(i)}async function H3(e,t){const i=Dt(e),r=t.query;let o=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.va()?0:1:!u.Da()&&t.va()&&(o=2))}switch(o){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function lw(e,t){const i=Dt(e);let r=!1;for(const o of t){const u=o.query,f=i.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(r=!0);f.ba=o}}r&&ng(i)}function uw(e,t,i){const r=Dt(e),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(i);r.queries.delete(t)}function ng(e){e.Ca.forEach(t=>{t.next()})}var dm,d_;(d_=dm||(dm={})).xa="default",d_.Cache="cache";class G3{constructor(t,i,r){this.query=t,this.Oa=i,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new yo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Na?this.La(t)&&(this.Oa.next(t),i=!0):this.ka(t,this.onlineState)&&(this.qa(t),i=!0),this.Ba=t,i}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let i=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),i=!0),i}ka(t,i){if(!t.fromCache||!this.va())return!0;const r=i!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}La(t){if(t.docChanges.length>0)return!0;const i=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}qa(t){t=yo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==dm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(t){this.key=t}}class Q3{constructor(t){this.key=t}}class cw{constructor(t,i){this.query=t,this.Ha=i,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Bt(),this.mutatedKeys=Bt(),this.Za=l3(t),this.Xa=new lo(this.Za)}get eu(){return this.Ha}tu(t,i){const r=i?i.nu:new h_,o=i?i.Xa:this.Xa;let u=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((v,T)=>{const b=o.get(v),R=Kh(this.query,T)?T:null,V=!!b&&this.mutatedKeys.has(b.key),P=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;b&&R?b.data.isEqual(R.data)?V!==P&&(r.track({type:3,doc:R}),k=!0):this.ru(b,R)||(r.track({type:2,doc:R}),k=!0,(y&&this.Za(R,y)>0||g&&this.Za(R,g)<0)&&(m=!0)):!b&&R?(r.track({type:0,doc:R}),k=!0):b&&!R&&(r.track({type:1,doc:b}),k=!0,(y||g)&&(m=!0)),k&&(R?(f=f.add(R),u=P?u.add(v):u.delete(v)):(f=f.delete(v),u=u.delete(v)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const v=this.query.limitType==="F"?f.last():f.first();f=f.delete(v.key),u=u.delete(v.key),r.track({type:1,doc:v})}return{Xa:f,nu:r,Cs:m,mutatedKeys:u}}ru(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,o){const u=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const f=t.nu.wa();f.sort((v,T)=>function(R,V){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At(20277,{Vt:k})}};return P(R)-P(V)}(v.type,T.type)||this.Za(v.doc,T.doc)),this.iu(r),o=o!=null&&o;const m=i&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,g=y!==this.Ja;return this.Ja=y,f.length!==0||g?{snapshot:new yo(this.query,t.Xa,u,f,t.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new h_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Bt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const i=[];return t.forEach(r=>{this.Ya.has(r)||i.push(new Q3(r))}),this.Ya.forEach(r=>{t.has(r)||i.push(new F3(r))}),i}au(t){this.Ha=t.$s,this.Ya=Bt();const i=this.tu(t.documents);return this.applyChanges(i,!0)}uu(){return yo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ig="SyncEngine";class hw{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class fw{constructor(t){this.key=t,this.cu=!1}}class dw{constructor(t,i,r,o,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new ia(m=>o3(m),Yh),this.Pu=new Map,this.Tu=new Set,this.Iu=new me(bt.comparator),this.Eu=new Map,this.du=new Qm,this.Au={},this.Ru=new Map,this.Vu=po.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function mw(e,t,i=!0){const r=J3(e);let o;const u=r.hu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await Y3(r,t,i,!0),o}async function gw(e,t){const i=J3(e);await Y3(i,t,!0,!1)}async function Y3(e,t,i,r){const o=await Lb(e.localStore,Oi(t)),u=o.targetId,f=e.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await pw(e,t,u,f==="current",o.resumeToken)),e.isPrimaryClient&&i&&k3(e.remoteStore,o),m}async function pw(e,t,i,r,o){e.fu=(T,b,R)=>async function(P,k,z,F){let K=k.view.tu(z);K.Cs&&(K=await r_(P.localStore,k.query,!1).then(({documents:D})=>k.view.tu(D,K)));const rt=F&&F.targetChanges.get(k.targetId),W=F&&F.targetMismatches.get(k.targetId)!=null,Q=k.view.applyChanges(K,P.isPrimaryClient,rt,W);return g_(P,k.targetId,Q.ou),Q.snapshot}(e,T,b,R);const u=await r_(e.localStore,t,!0),f=new cw(t,u.$s),m=f.tu(u.documents),y=Eu.createSynthesizedTargetChangeForCurrentChange(i,r&&e.onlineState!=="Offline",o),g=f.applyChanges(m,e.isPrimaryClient,y);g_(e,i,g.ou);const v=new hw(t,i,f);return e.hu.set(t,v),e.Pu.has(i)?e.Pu.get(i).push(t):e.Pu.set(i,[t]),g.snapshot}async function yw(e,t,i){const r=Dt(e),o=r.hu.get(t),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(f=>!Yh(f,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await hm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),i&&Xm(r.remoteStore,o.targetId),mm(r,o.targetId)}).catch(wo)):(mm(r,o.targetId),await hm(r.localStore,o.targetId,!0))}async function _w(e,t){const i=Dt(e),r=i.hu.get(t),o=i.Pu.get(r.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),Xm(i.remoteStore,r.targetId))}async function vw(e,t,i){const r=Cw(e);try{const o=await function(f,m){const y=Dt(f),g=Pe.now(),v=m.reduce((R,V)=>R.add(V.key),Bt());let T,b;return y.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=vs(),P=Bt();return y.Bs.getEntries(R,v).next(k=>{V=k,V.forEach((z,F)=>{F.isValidDocument()||(P=P.add(z))})}).next(()=>y.localDocuments.getOverlayedDocuments(R,V)).next(k=>{T=k;const z=[];for(const F of m){const K=LT(F,T.get(F.key).overlayedDocument);K!=null&&z.push(new mr(F.key,K,t3(K.value.mapValue),Li.exists(!0)))}return y.mutationQueue.addMutationBatch(R,g,z,m)}).next(k=>{b=k;const z=k.applyToLocalDocumentSet(T,P);return y.documentOverlayCache.saveOverlays(R,k.batchId,z)})}).then(()=>({batchId:b.batchId,changes:c3(T)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let g=f.Au[f.currentUser.toKey()];g||(g=new me(kt)),g=g.insert(m,y),f.Au[f.currentUser.toKey()]=g}(r,o.batchId,i),await bu(r,o.changes),await tf(r.remoteStore)}catch(o){const u=eg(o,"Failed to persist write");i.reject(u)}}async function K3(e,t){const i=Dt(e);try{const r=await Vb(i.localStore,t);t.targetChanges.forEach((o,u)=>{const f=i.Eu.get(u);f&&(Xt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?Xt(f.cu,14607):o.removedDocuments.size>0&&(Xt(f.cu,42227),f.cu=!1))}),await bu(i,r,t)}catch(r){await wo(r)}}function m_(e,t,i){const r=Dt(e);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const o=[];r.hu.forEach((u,f)=>{const m=f.view.Fa(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Dt(f);y.onlineState=m;let g=!1;y.queries.forEach((v,T)=>{for(const b of T.Sa)b.Fa(m)&&(g=!0)}),g&&ng(y)}(r.eventManager,t),o.length&&r.lu.Y_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ew(e,t,i){const r=Dt(e);r.sharedClientState.updateQueryState(t,"rejected",i);const o=r.Eu.get(t),u=o&&o.key;if(u){let f=new me(bt.comparator);f=f.insert(u,hn.newNoDocument(u,xt.min()));const m=Bt().add(u),y=new Zh(xt.min(),new Map,new me(kt),f,m);await K3(r,y),r.Iu=r.Iu.remove(u),r.Eu.delete(t),sg(r)}else await hm(r.localStore,t,!1).then(()=>mm(r,t,i)).catch(wo)}async function Tw(e,t){const i=Dt(e),r=t.batch.batchId;try{const o=await Mb(i.localStore,t);X3(i,r,null),$3(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await bu(i,o)}catch(o){await wo(o)}}async function bw(e,t,i){const r=Dt(e);try{const o=await function(f,m){const y=Dt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return y.mutationQueue.lookupMutationBatch(g,m).next(T=>(Xt(T!==null,37113),v=T.keys(),y.mutationQueue.removeMutationBatch(g,T))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,v,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>y.localDocuments.getDocuments(g,v))})}(r.localStore,t);X3(r,t,i),$3(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await bu(r,o)}catch(o){await wo(o)}}function $3(e,t){(e.Ru.get(t)||[]).forEach(i=>{i.resolve()}),e.Ru.delete(t)}function X3(e,t,i){const r=Dt(e);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(i?u.reject(i):u.resolve(),o=o.remove(t)),r.Au[r.currentUser.toKey()]=o}}function mm(e,t,i=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),i&&e.lu.gu(r,i);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||Z3(e,r)})}function Z3(e,t){e.Tu.delete(t.path.canonicalString());const i=e.Iu.get(t);i!==null&&(Xm(e.remoteStore,i),e.Iu=e.Iu.remove(t),e.Eu.delete(i),sg(e))}function g_(e,t,i){for(const r of i)r instanceof F3?(e.du.addReference(r.key,t),ww(e,r)):r instanceof Q3?(pt(ig,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Z3(e,r.key)):At(19791,{pu:r})}function ww(e,t){const i=t.key,r=i.path.canonicalString();e.Iu.get(i)||e.Tu.has(r)||(pt(ig,"New document in limbo: "+i),e.Tu.add(r),sg(e))}function sg(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const i=new bt(he.fromString(t)),r=e.Vu.next();e.Eu.set(r,new fw(i)),e.Iu=e.Iu.insert(i,r),k3(e.remoteStore,new tr(Oi(Qh(i.path)),r,"TargetPurposeLimboResolution",qh.le))}}async function bu(e,t,i){const r=Dt(e),o=[],u=[],f=[];r.hu.isEmpty()||(r.hu.forEach((m,y)=>{f.push(r.fu(y,t,i).then(g=>{var v;if((g||i)&&r.isPrimaryClient){const T=g?!g.fromCache:(v=i==null?void 0:i.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){o.push(g);const T=Km.Rs(y.targetId,g);u.push(T)}}))}),await Promise.all(f),r.lu.Y_(o),await async function(y,g){const v=Dt(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ot.forEach(g,b=>ot.forEach(b.ds,R=>v.persistence.referenceDelegate.addReference(T,b.targetId,R)).next(()=>ot.forEach(b.As,R=>v.persistence.referenceDelegate.removeReference(T,b.targetId,R)))))}catch(T){if(!So(T))throw T;pt($m,"Failed to update sequence numbers: "+T)}for(const T of g){const b=T.targetId;if(!T.fromCache){const R=v.xs.get(b),V=R.snapshotVersion,P=R.withLastLimboFreeSnapshotVersion(V);v.xs=v.xs.insert(b,P)}}}(r.localStore,u))}async function Sw(e,t){const i=Dt(e);if(!i.currentUser.isEqual(t)){pt(ig,"User change. New user:",t.toKey());const r=await V3(i.localStore,t);i.currentUser=t,function(u,f){u.Ru.forEach(m=>{m.forEach(y=>{y.reject(new vt(lt.CANCELLED,f))})}),u.Ru.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await bu(i,r.ks)}}function Aw(e,t){const i=Dt(e),r=i.Eu.get(t);if(r&&r.cu)return Bt().add(r.key);{let o=Bt();const u=i.Pu.get(t);if(!u)return o;for(const f of u){const m=i.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function J3(e){const t=Dt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=K3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ew.bind(null,t),t.lu.Y_=lw.bind(null,t.eventManager),t.lu.gu=uw.bind(null,t.eventManager),t}function Cw(e){const t=Dt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bw.bind(null,t),t}class Dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,i){return null}Cu(t,i){return null}Du(t){return Db(this.persistence,new Rb,t.initialUser,this.serializer)}Su(t){return new M3(Ym.fi,this.serializer)}bu(t){return new jb}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dh.provider={build:()=>new Dh};class Rw extends Dh{constructor(t){super(),this.cacheSizeBytes=t}vu(t,i){Xt(this.persistence.referenceDelegate instanceof xh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fb(r,t.asyncQueue,i)}Su(t){const i=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new M3(r=>xh.fi(r,i),this.serializer)}}class gm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sw.bind(null,this.syncEngine),await rw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ow}()}createDatastore(t){const i=Jh(t.databaseInfo.databaseId),r=function(u){return new qb(u)}(t.databaseInfo);return function(u,f,m,y){return new Qb(u,f,m,y)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,u,f,m){return new Kb(r,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,i=>m_(this.syncEngine,i,0),function(){return l_.C()?new l_:new Pb}())}createSyncEngine(t,i){return function(o,u,f,m,y,g,v){const T=new dw(o,u,f,m,y,g);return v&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(o){const u=Dt(o);pt(ta,"RemoteStore shutting down."),u.da.add(5),await Tu(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):_s("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class xw{constructor(t,i,r,o,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Gv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{pt(fr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(pt(fr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=eg(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function I1(e,t){e.asyncQueue.verifyOperationInProgress(),pt(fr,"Initializing OfflineComponentProvider");const i=e.configuration;await t.initialize(i);let r=i.initialUser;e.setCredentialChangeListener(async o=>{r.isEqual(o)||(await V3(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function p_(e,t){e.asyncQueue.verifyOperationInProgress();const i=await Iw(e);pt(fr,"Initializing OnlineComponentProvider"),await t.initialize(i,e.configuration),e.setCredentialChangeListener(r=>c_(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,o)=>c_(t.remoteStore,o)),e._onlineComponents=t}async function Iw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){pt(fr,"Using user provided OfflineComponentProvider");try{await I1(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(o){return o.name==="FirebaseError"?o.code===lt.FAILED_PRECONDITION||o.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;ho("Error using user provided cache. Falling back to memory cache: "+i),await I1(e,new Dh)}}else pt(fr,"Using default OfflineComponentProvider"),await I1(e,new Rw(void 0));return e._offlineComponents}async function t4(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(pt(fr,"Using user provided OnlineComponentProvider"),await p_(e,e._uninitializedComponentsProvider._online)):(pt(fr,"Using default OnlineComponentProvider"),await p_(e,new gm))),e._onlineComponents}function Dw(e){return t4(e).then(t=>t.syncEngine)}async function pm(e){const t=await t4(e),i=t.eventManager;return i.onListen=mw.bind(null,t.syncEngine),i.onUnlisten=yw.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=gw.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=_w.bind(null,t.syncEngine),i}function Mw(e,t,i={}){const r=new rr;return e.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,g){const v=new W3({next:b=>{v.xu(),f.enqueueAndForget(()=>H3(u,T));const R=b.docs.has(m);!R&&b.fromCache?g.reject(new vt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&b.fromCache&&y&&y.source==="server"?g.reject(new vt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new G3(Qh(m.path),v,{includeMetadataChanges:!0,Qa:!0});return q3(u,T)}(await pm(e),e.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(e,t,i){if(!i)throw new vt(lt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Vw(e,t,i,r){if(t===!0&&r===!0)throw new vt(lt.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)}function __(e){if(!bt.isDocumentKey(e))throw new vt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function v_(e){if(bt.isDocumentKey(e))throw new vt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function rg(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":At(12329,{type:typeof e})}function gs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=rg(e);throw new vt(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="firestore.googleapis.com",E_=!0;class T_{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new vt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i4,this.ssl=E_}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:E_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=D3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cb)throw new vt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Vw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e4((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new vt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new vt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new vt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ef{constructor(t,i,r,o){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new vt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B8;switch(r.type){case"firstParty":return new G8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new vt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=y_.get(i);r&&(pt("ComponentProvider","Removing Datastore"),y_.delete(i),r.terminate())}(this),Promise.resolve()}}function Nw(e,t,i,r={}){var o;e=gs(e,ef);const u=Om(t),f=e._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:e._getEmulatorOptions()}),y=`${t}:${i}`;u&&(dE(`https://${y}`),yE("Firestore",!0)),f.host!==i4&&f.host!==y&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},f),{host:y,ssl:u,emulatorOptions:r});if(!yh(g,m)&&(e._setSettings(g),r.mockUserToken)){let v,T;if(typeof r.mockUserToken=="string")v=r.mockUserToken,T=cn.MOCK_USER;else{v=mE(r.mockUserToken,(o=e._app)===null||o===void 0?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new vt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(b)}e._authCredentials=new z8(new qv(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new nf(this.firestore,t,this._query)}}class Cn{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Cn(this.firestore,t,this._key)}}class ar extends nf{constructor(t,i,r){super(t,i,Qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Cn(this.firestore,null,new bt(t))}withConverter(t){return new ar(this.firestore,t,this._path)}}function Ow(e,t,...i){if(e=ps(e),n4("collection","path",t),e instanceof ef){const r=he.fromString(t,...i);return v_(r),new ar(e,null,r)}{if(!(e instanceof Cn||e instanceof ar))throw new vt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(he.fromString(t,...i));return v_(r),new ar(e.firestore,null,r)}}function sf(e,t,...i){if(e=ps(e),arguments.length===1&&(t=Gv.newId()),n4("doc","path",t),e instanceof ef){const r=he.fromString(t,...i);return __(r),new Cn(e,null,new bt(r))}{if(!(e instanceof Cn||e instanceof ar))throw new vt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(he.fromString(t,...i));return __(r),new Cn(e.firestore,e instanceof ar?e.converter:null,new bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="AsyncQueue";class w_{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new O3(this,"async_queue_retry"),this.rc=()=>{const r=x1();r&&pt(b_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const i=x1();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const i=x1();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const i=new rr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!So(t))throw t;pt(b_,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const i=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,_s("INTERNAL UNHANDLED ERROR: ",S_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=i,i}enqueueAfterDelay(t,i,r){this.oc(),this.nc.indexOf(t)>-1&&(i=0);const o=tg.createAndSchedule(this,t,i,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&At(47125,{cc:S_(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const i of this.Zu)if(i.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.Zu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const i=this.Zu.indexOf(t);this.Zu.splice(i,1)}}function S_(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(e){return function(i,r){if(typeof i!="object"||i===null)return!1;const o=i;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(e,["next","error","complete"])}class _o extends ef{constructor(t,i,r,o){super(t,i,r,o),this.type="firestore",this._queue=new w_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new w_(t),this._firestoreClient=void 0,await t}}}function Lw(e,t){const i=typeof e=="object"?e:R8(),r=typeof e=="string"?e:Th,o=b8(i,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=hE("firestore");u&&Nw(o,...u)}return o}function ag(e){if(e._terminated)throw new vt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||kw(e),e._firestoreClient}function kw(e){var t,i,r;const o=e._freezeSettings(),u=function(m,y,g,v){return new rT(m,y,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,e4(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,o);e._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new xw(e._authCredentials,e._appCheckCredentials,e._queue,u,e._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vo(nn.fromBase64String(t))}catch(i){throw new vt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new vo(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new vt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new vt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new vt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return kt(this._lat,t._lat)||kt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=/^__.*__$/;class Pw{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new mr(t,this.data,this.fieldMask,i,this.fieldTransforms):new vu(t,this.data,i,this.fieldTransforms)}}class s4{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new mr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function r4(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At(40011,{Ic:e})}}class cg{constructor(t,i,r,o,u,f){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new cg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Vc(t),o}mc(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Mh(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(r4(this.Ic)&&jw.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class Uw{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Jh(t)}bc(t,i,r,o=!1){return new cg({Ic:t,methodName:i,wc:r,path:en.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a4(e){const t=e._freezeSettings(),i=Jh(e._databaseId);return new Uw(e._databaseId,!!t.ignoreUndefinedProperties,i)}function Bw(e,t,i,r,o,u={}){const f=e.bc(u.merge||u.mergeFields?2:0,t,i,o);hg("Data must be an object, but it was:",f,r);const m=o4(r,f);let y,g;if(u.merge)y=new Bn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const v=[];for(const T of u.mergeFields){const b=ym(t,T,i);if(!f.contains(b))throw new vt(lt.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);u4(v,b)||v.push(b)}y=new Bn(v),g=f.fieldTransforms.filter(T=>y.covers(T.field))}else y=null,g=f.fieldTransforms;return new Pw(new An(m),y,g)}class af extends og{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof af}}function zw(e,t,i,r){const o=e.bc(1,t,i);hg("Data must be an object, but it was:",o,r);const u=[],f=An.empty();dr(r,(y,g)=>{const v=fg(t,y,i);g=ps(g);const T=o.mc(v);if(g instanceof af)u.push(v);else{const b=of(g,T);b!=null&&(u.push(v),f.set(v,b))}});const m=new Bn(u);return new s4(f,m,o.fieldTransforms)}function qw(e,t,i,r,o,u){const f=e.bc(1,t,i),m=[ym(t,r,i)],y=[o];if(u.length%2!=0)throw new vt(lt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)m.push(ym(t,u[b])),y.push(u[b+1]);const g=[],v=An.empty();for(let b=m.length-1;b>=0;--b)if(!u4(g,m[b])){const R=m[b];let V=y[b];V=ps(V);const P=f.mc(R);if(V instanceof af)g.push(R);else{const k=of(V,P);k!=null&&(g.push(R),v.set(R,k))}}const T=new Bn(g);return new s4(v,T,f.fieldTransforms)}function of(e,t){if(l4(e=ps(e)))return hg("Unsupported field value:",t,e),o4(e,t);if(e instanceof og)return function(r,o){if(!r4(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let y=of(m,o.fc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(e,t)}return function(r,o){if((r=ps(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IT(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Pe.fromDate(r);return{timestampValue:Rh(o.serializer,u)}}if(r instanceof Pe){const u=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rh(o.serializer,u)}}if(r instanceof lg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:w3(o.serializer,r._byteString)};if(r instanceof Cn){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Fm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ug)return function(f,m){return{mapValue:{fields:{[Jv]:{stringValue:Wv},[bh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return qm(m.serializer,g)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${rg(r)}`)}(e,t)}function o4(e,t){const i={};return Qv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dr(e,(r,o)=>{const u=of(o,t.Ac(r));u!=null&&(i[r]=u)}),{mapValue:{fields:i}}}function l4(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pe||e instanceof lg||e instanceof vo||e instanceof Cn||e instanceof og||e instanceof ug)}function hg(e,t,i){if(!l4(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const r=rg(i);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function ym(e,t,i){if((t=ps(t))instanceof rf)return t._internalPath;if(typeof t=="string")return fg(e,t);throw Mh("Field path arguments must be of type string or ",e,!1,void 0,i)}const Hw=new RegExp("[~\\*/\\[\\]]");function fg(e,t,i){if(t.search(Hw)>=0)throw Mh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new rf(...t.split("."))._internalPath}catch{throw Mh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function Mh(e,t,i,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new vt(lt.INVALID_ARGUMENT,m+e+y)}function u4(e,t){return e.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(t,i,r,o,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Gw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(h4("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Gw extends c4{data(){return super.data()}}function h4(e,t){return typeof t=="string"?fg(e,t):t instanceof rf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new vt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qw{convertValue(t,i="none"){switch(cr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return be(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(ur(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw At(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return dr(t,(o,u)=>{r[o]=this.convertValue(u,i)}),r}convertVectorValue(t){var i,r,o;const u=(o=(r=(i=t.fields)===null||i===void 0?void 0:i[bh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>be(f.doubleValue));return new ug(u)}convertGeoPoint(t){return new lg(be(t.latitude),be(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Gh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(lu(t));default:return null}}convertTimestamp(t){const i=lr(t);return new Pe(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=he.fromString(t);Xt(I3(r),9688,{name:t});const o=new uu(r.get(1),r.get(3)),u=new bt(r.popFirst(5));return o.isEqual(i)||_s(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(e,t,i){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class f4 extends c4{constructor(t,i,r,o,u,f){super(t,i,r,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(h4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}}class ch extends f4{data(t={}){return super.data(t)}}class Kw{constructor(t,i,r,o){this._firestore=t,this._userDataWriter=i,this._snapshot=o,this.metadata=new zl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new ch(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new vt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),v=f.indexOf(m.doc.key)),{type:$w(m.type),doc:y,oldIndex:g,newIndex:v}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function $w(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(e){e=gs(e,Cn);const t=gs(e.firestore,_o);return Mw(ag(t),e._key).then(i=>g4(t,e,i))}class d4 extends Qw{constructor(t){super(),this.firestore=t}convertBytes(t){return new vo(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Cn(this.firestore,null,i)}}function Zw(e,t,i,...r){e=gs(e,Cn);const o=gs(e.firestore,_o),u=a4(o);let f;return f=typeof(t=ps(t))=="string"||t instanceof rf?qw(u,"updateDoc",e._key,t,i,r):zw(u,"updateDoc",e._key,t),m4(o,[f.toMutation(e._key,Li.exists(!0))])}function Jw(e,t){const i=gs(e.firestore,_o),r=sf(e),o=Yw(e.converter,t);return m4(i,[Bw(a4(e.firestore),"addDoc",r._key,o,e.converter!==null,{}).toMutation(r._key,Li.exists(!1))]).then(()=>r)}function Ww(e,...t){var i,r,o;e=ps(e);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof t[f]!="object"||A_(t[f])||(u=t[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(A_(t[f])){const T=t[f];t[f]=(i=T.next)===null||i===void 0?void 0:i.bind(T),t[f+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),t[f+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let y,g,v;if(e instanceof Cn)g=gs(e.firestore,_o),v=Qh(e._key.path),y={next:T=>{t[f]&&t[f](g4(g,e,T))},error:t[f+1],complete:t[f+2]};else{const T=gs(e,nf);g=gs(T.firestore,_o),v=T._query;const b=new d4(g);y={next:R=>{t[f]&&t[f](new Kw(g,b,T,R))},error:t[f+1],complete:t[f+2]},Fw(e._query)}return function(b,R,V,P){const k=new W3(P),z=new G3(R,k,V);return b.asyncQueue.enqueueAndForget(async()=>q3(await pm(b),z)),()=>{k.xu(),b.asyncQueue.enqueueAndForget(async()=>H3(await pm(b),z))}}(ag(g),v,m,y)}function m4(e,t){return function(r,o){const u=new rr;return r.asyncQueue.enqueueAndForget(async()=>vw(await Dw(r),o,u)),u.promise}(ag(e),t)}function g4(e,t,i){const r=i.docs.get(t._key),o=new d4(e);return new f4(e,o,t._key,r,new zl(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(o){bo=o})(C8),vh(new ru("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new _o(new q8(r.getProvider("auth-internal")),new F8(f,r.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new vt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(g.options.projectId,v)}(f,o),f);return u=Object.assign({useFetchStreams:i},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),oo(Iy,Dy,t),oo(Iy,Dy,"esm2017")})();const tS={apiKey:"AIzaSyA1YHZuK7xQzrGf2sVPo8Qax__FqLaFg_g",authDomain:"boop-chat.firebaseapp.com",projectId:"boop-chat",storageBucket:"boop-chat.firebasestorage.app",messagingSenderId:"86390385381",appId:"1:86390385381:web:899e240ed5dedab2a8c20c",measurementId:"G-R49YGVYMFQ"},eS=Vv(tS),lf=Lw(eS),nS=async e=>(await Jw(Ow(lf,"sessions"),e)).id,iS=async e=>{const t=await Xw(sf(lf,"sessions",e));return t.exists()?(console.log("The data has been found at Firestore!"),t.data()):(console.log("The data doesn't exist at Firestore!"),null)},sS=async(e,t)=>{Zw(sf(lf,"sessions",e),t)},rS=async(e,t,i)=>{const r=sf(lf,"sessions",e),o=Ww(r,async u=>{var m;if(!u.exists())return;const f=u.data();f.receiverDescription&&((m=f.receiverCandidates)==null?void 0:m.length)>0&&(console.log("Receiver info available:",f),i.current=f.receiverName,t(f),o())});return o},C_=async(e,t,i,r,o,u,f,m,y)=>{console.log(t.current),t.current.onicecandidate=v=>{v.candidate?(console.log("Ice candidate found! Candidate = ",v.candidate),console.log(u.current),u.current.push(v.candidate.toJSON())):(console.log("The ice gathering state might have been completed by this time!"),console.log("State = ",t.current.iceGatheringState))},t.current.onicecandidateerror=v=>{console.warn("ICE candidate error:",v.errorCode,v.port,v.url)};const g=t.current.getConfiguration();if(console.log("ICE servers configured on this PC:",g.iceServers),e==="sender"){t.current.addTransceiver("video",{direction:"sendrecv"}),t.current.addTransceiver("audio",{direction:"sendrecv"}),i.current=t.current.createDataChannel("chat"),r.current=t.current.createDataChannel("image"),o.current=t.current.createDataChannel("video"),i.current.onopen=()=>{console.log("The data channel has been established!"),f(!0)},r.current.onopen=()=>{console.log("The image channel has been established!")},o.current.onopen=()=>{console.log("The video channel has been established!")};let v=await t.current.createOffer();console.log("The offer has been created!"),await t.current.setLocalDescription(v),console.log("The local description has been added!")}else{console.log(t.current);let v=await iS(y);if(!v)return null;m.current=v.senderName,await aS(t,v),console.log("The state of the peer connection = ",t.current.iceGatheringState)}console.log("The initial setup of the connection has been established.")},aS=async(e,t)=>{console.log(t.senderDescription),await e.current.setRemoteDescription(t.senderDescription),console.log("The remote description has been added!"),e.current.getTransceivers().forEach(o=>{o.direction="sendrecv"});let r=await e.current.createAnswer();console.log("The answer has been created!"),await e.current.setLocalDescription(r),console.log("The local description has been added!");for(const o of t.senderCandidates)try{await e.current.addIceCandidate(o)}catch(u){console.error("Error adding ICE candidate:",u)}};async function oS(e,t,i,r){console.log("Starting the createLink function! At the beginning of the function, the state = ",e.iceGatheringState),console.log("The iceCandidate object looks like this: ",t.current);let o=await nS({senderName:i,senderDescription:{type:e.current.localDescription.type,sdp:e.current.localDescription.sdp},senderCandidates:t.current,receiverName:"",receiverDescription:"",receiverCandidates:""});return console.log("The session has been added to Firebase by the sender! Now, waiting for the receiver!"),rS(o,async u=>{await e.current.setRemoteDescription(new RTCSessionDescription(u.receiverDescription));for(const f of u.receiverCandidates)await e.current.addIceCandidate(new RTCIceCandidate(f))},r),o}async function lS(e,t,i,r){return console.log("After the waiting, the state = ",e.current.iceGatheringState),await sS(r,{receiverName:i,receiverDescription:{type:e.current.localDescription.type,sdp:e.current.localDescription.sdp},receiverCandidates:t.current}),"success"}const uS=new URLSearchParams(window.location.search),$s=uS.get("link"),cS=()=>{const{peerConnection:e,iceCandidates:t,dataChannel:i,imageChannel:r,videoChannel:o,peerName:u,setConnected:f}=X.useContext(Rn),{showNotification:m}=_u(),[y,g]=X.useState(!1),v=X.useRef(null);function T(R){R.preventDefault(),navigator.clipboard.writeText(R.target.elements.link.value),m("The link has been copied!")}const b=async R=>{if(R.preventDefault(),g(!0),$s){let V=await lS(e,t,v.current.value,$s);console.log(V),V?V=="success"&&(e.current.ondatachannel=P=>{P.channel.label==="chat"&&(i.current=P.channel,console.log("The data channel has been established!"),f(!0)),P.channel.label==="image"&&(r.current=P.channel,console.log("The image channel has been established!")),P.channel.label==="video"&&(o.current=P.channel,console.log("The video channel has been established!"))}):alert("The link you gave doesn't exist.")}else{let V=await oS(e,t,v.current.value,u);v.current.value=`https://www.mukesharyal.com.np/boop?link=${V}`,v.current.disabled=!0,navigator.clipboard.writeText(v.current.value),m("The link has been copied!")}};return X.useEffect(()=>{C_($s?"receiver":"sender",e,i,r,o,t,f,u,$s)},[]),S.jsxs(S.Fragment,{children:[S.jsx($7,{}),S.jsx("main",{className:kl.mainContainer,children:S.jsx("section",{className:kl.inputCard,children:y?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:kl.loaderWrapper,children:S.jsx("div",{className:kl.loader})}),S.jsx("h1",{children:$s?"Joining the chat":"Waiting for other person to join"}),!$s&&S.jsxs("form",{onSubmit:T,children:[S.jsx("input",{autoFocus:!0,spellCheck:!1,autoComplete:"off",name:"link",ref:v,title:"Copy this link",className:kl.linkInput}),S.jsx("br",{}),S.jsx("button",{name:"copyLinkButton",children:"Copy Link"})]})]}):S.jsxs(S.Fragment,{children:[S.jsxs("h1",{children:["Welcome to Boop.",S.jsx("br",{}),"Let's Get Started!"]}),S.jsxs("form",{onSubmit:b,children:[S.jsx("input",{name:"name",required:!0,minLength:2,maxLength:20,autoComplete:"off",type:"text",spellCheck:!1,placeholder:"Your Name",title:"Enter your name",id:"name",ref:v}),S.jsx("br",{}),$s?S.jsx("button",{type:"submit",children:"Join Chat"}):S.jsx("button",{type:"submit",children:"Create Link"})]})]})})})]})},hS="_chatPage_14qlb_1",fS="_videoContainer_14qlb_7",dS="_settingsContainer_14qlb_13",mS="_chatContainer_14qlb_22",Zc={chatPage:hS,videoContainer:fS,settingsContainer:dS,chatContainer:mS},gS="_actionList_1e7p7_1",pS="_sent_1e7p7_21",yS="_received_1e7p7_25",D1={actionList:gS,sent:pS,received:yS};function _S(){const e=we.c(26);console.log("Actions List rendered!");const{dataChannel:t}=X.useContext(Rn),{selectedMessage:i}=X.useContext(ii),r=It(ES),o=It(vS),{showNotification:u}=_u();let f;e[0]!==i.current.content||e[1]!==i.current.type||e[2]!==u?(f=()=>{i.current.type==="text"?(navigator.clipboard.writeText(i.current.content),u("The message has been copied!")):u("This message cannot be copied!")},e[0]=i.current.content,e[1]=i.current.type,e[2]=u,e[3]=f):f=e[3];const m=f;let y;e[4]!==i.current||e[5]!==r?(y=()=>{r(i.current)},e[4]=i.current,e[5]=r,e[6]=y):y=e[6];const g=y;let v;e[7]!==t||e[8]!==o||e[9]!==i.current.receivedId||e[10]!==i.current.sentId?(v=()=>{if(i.current.sentId===null)o(i.current.sentId,i.current.receivedId);else{const rt={type:"delete",sentId:i.current.sentId};t.current.send(JSON.stringify(rt))}},e[7]=t,e[8]=o,e[9]=i.current.receivedId,e[10]=i.current.sentId,e[11]=v):v=e[11];const T=v,b=`${D1.actionList} ${i.current.sentId===null?D1.received:D1.sent}`;let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=S.jsxs("svg",{fill:"#000000",width:"2rem",height:"2rem",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("title",{children:"reply"}),S.jsx("path",{d:"M3.488 15.136q0 0.96 0.8 1.472l10.72 7.136q0.416 0.288 0.896 0.32t0.928-0.224 0.704-0.672 0.256-0.896v-3.584q3.456 0 6.208 1.984t3.872 5.152q0.64-1.792 0.64-3.552 0-2.912-1.44-5.376t-3.904-3.904-5.376-1.44v-3.584q0-0.48-0.256-0.896t-0.704-0.672-0.928-0.224-0.896 0.32l-10.72 7.136q-0.8 0.512-0.8 1.504z"})]}),e[12]=R):R=e[12];let V;e[13]!==g?(V=S.jsxs("li",{onClick:g,children:[R,"Reply"]}),e[13]=g,e[14]=V):V=e[14];let P;e[15]===Symbol.for("react.memo_cache_sentinel")?(P=S.jsxs("svg",{width:"2rem",height:"2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z",fill:"#292D32"}),S.jsx("path",{d:"M17.0998 2H12.8998C9.81668 2 8.37074 3.09409 8.06951 5.73901C8.00649 6.29235 8.46476 6.75 9.02167 6.75H11.0998C15.2998 6.75 17.2498 8.7 17.2498 12.9V14.9781C17.2498 15.535 17.7074 15.9933 18.2608 15.9303C20.9057 15.629 21.9998 14.1831 21.9998 11.1V6.9C21.9998 3.4 20.5998 2 17.0998 2Z",fill:"#292D32"})]}),e[15]=P):P=e[15];let k;e[16]!==m?(k=S.jsxs("li",{onClick:m,children:[P,"Copy"]}),e[16]=m,e[17]=k):k=e[17];let z;e[18]===Symbol.for("react.memo_cache_sentinel")?(z=S.jsx("svg",{width:"2rem",height:"2rem",viewBox:"-0.5 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"out",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:S.jsx("path",{d:"M4.91666667,14.8888889 C4.91666667,15.3571429 5.60416667,16 6.0625,16 L12.9375,16 C13.3958333,16 14.0833333,15.3571429 14.0833333,14.8888889 L14.0833333,6 L4.91666667,6 L4.91666667,14.8888889 L4.91666667,14.8888889 L4.91666667,14.8888889 Z M15,3.46500003 L12.5555556,3.46500003 L11.3333333,2 L7.66666667,2 L6.44444444,3.46500003 L4,3.46500003 L4,4.93000007 L15,4.93000007 L15,3.46500003 L15,3.46500003 L15,3.46500003 Z",id:"path",fill:"#000000","sketch:type":"MSShapeGroup"})})}),e[18]=z):z=e[18];let F;e[19]!==T?(F=S.jsxs("li",{onClick:T,children:[z,"Delete"]}),e[19]=T,e[20]=F):F=e[20];let K;return e[21]!==b||e[22]!==V||e[23]!==k||e[24]!==F?(K=S.jsxs("ul",{className:b,children:[V,k,F]}),e[21]=b,e[22]=V,e[23]=k,e[24]=F,e[25]=K):K=e[25],K}function vS(e){return e.removeMessage}function ES(e){return e.setReplying}const TS="_reactionList_qim9b_1",bS="_selectedReaction_qim9b_34",R_={reactionList:TS,selectedReaction:bS},wS=["","","","","",""];function SS(){const e=we.c(12);console.log("Reactions list rendered!");const{dataChannel:t}=X.useContext(Rn),{selectedMessage:i,pointerPosition:r}=X.useContext(ii);let o=r.current.y-70,u=r.current.x-90;o<0&&(o=10),u<0&&(u=10);let f;e[0]!==t||e[1]!==i?(f=T=>{T===i.current.reaction&&(T=-1);const R={type:"reaction",id:i.current.receivedId,reaction:T};t.current.send(JSON.stringify(R))},e[0]=t,e[1]=i,e[2]=f):f=e[2];const m=f;let y;e[3]!==u||e[4]!==o?(y={top:o,left:u},e[3]=u,e[4]=o,e[5]=y):y=e[5];let g;e[6]!==i||e[7]!==m?(g=wS.map((T,b)=>S.jsx("li",{onClick:()=>{m(b)},className:i.current.reaction===b?R_.selectedReaction:"",children:T},b)),e[6]=i,e[7]=m,e[8]=g):g=e[8];let v;return e[9]!==y||e[10]!==g?(v=S.jsx("ul",{className:R_.reactionList,style:y,children:g}),e[9]=y,e[10]=g,e[11]=v):v=e[11],v}const AS="_sent_1dofm_13",CS="_received_1dofm_17",RS="_actionsContainer_1dofm_25",M1={sent:AS,received:CS,actionsContainer:RS};function xS(e){const t=we.c(16),{imageSource:i,imageAlt:r,imageSent:o}=e,u=r===void 0?"Image":r;console.log("Image dialog rendered!");const f=It(DS),m=X.useRef(null),y=IS;let g;t[0]!==i?(g=()=>{window.open(i,"_blank")},t[0]=i,t[1]=g):g=t[1];const v=g;let T;t[2]!==f?(T=()=>{window.history.pushState("image","",null);const K=m.current;if(!K)return;const rt=Q=>{Q.target===K&&f(null)},W=Q=>{Q.state==="image"&&f(null)};return K.addEventListener("click",rt),window.addEventListener("popstate",W),()=>{K.removeEventListener("click",rt),window.removeEventListener("popstate",W)}},t[2]=f,t[3]=T):T=t[3];let b;t[4]===Symbol.for("react.memo_cache_sentinel")?(b=[],t[4]=b):b=t[4],X.useEffect(T,b);const R=o?M1.sent:M1.received;let V;t[5]===Symbol.for("react.memo_cache_sentinel")?(V=S.jsx("button",{onClick:y,children:S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),t[5]=V):V=t[5];let P;t[6]===Symbol.for("react.memo_cache_sentinel")?(P=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.163 2.819C9 3.139 9 3.559 9 4.4V11H7.803c-.883 0-1.325 0-1.534.176a.75.75 0 0 0-.266.62c.017.274.322.593.931 1.232l4.198 4.401c.302.318.453.476.63.535a.749.749 0 0 0 .476 0c.177-.059.328-.217.63-.535l4.198-4.4c.61-.64.914-.96.93-1.233a.75.75 0 0 0-.265-.62C17.522 11 17.081 11 16.197 11H15V4.4c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656C13.861 2 13.441 2 12.6 2h-1.2c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656zM5 21a1 1 0 0 0 1 1h12a1 1 0 1 0 0-2H6a1 1 0 0 0-1 1z",fill:"#000000"})}),t[6]=P):P=t[6];let k;t[7]!==v?(k=S.jsxs("div",{className:M1.actionsContainer,children:[V,S.jsx("button",{onClick:v,children:P})]}),t[7]=v,t[8]=k):k=t[8];let z;t[9]!==u||t[10]!==i?(z=S.jsx("img",{src:i,alt:u}),t[9]=u,t[10]=i,t[11]=z):z=t[11];let F;return t[12]!==R||t[13]!==k||t[14]!==z?(F=S.jsxs("dialog",{ref:m,className:R,children:[k,z]}),t[12]=R,t[13]=k,t[14]=z,t[15]=F):F=t[15],F}function IS(){window.history.back()}function DS(e){return e.setImageDialog}const MS="_navContainer_x74p5_1",VS="_profileContainer_x74p5_12",NS="_actionsContainer_x74p5_26",Wa={navContainer:MS,profileContainer:VS,actionsContainer:NS};function OS(){const e=we.c(21);console.log("Chat header rendered!");const{peerName:t}=X.useContext(Rn),i=It(jS),r=It(kS),o=It(LS),u=X.useRef(null);let f;e[0]!==r?(f=()=>{r("idle")},e[0]=r,e[1]=f):f=e[1];const m=f;let y;e[2]!==o?(y=()=>{window.innerWidth>1400||o(!0)},e[2]=o,e[3]=y):y=e[3];const g=y;let v,T;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=()=>{window.visualViewport&&window.visualViewport.addEventListener("scroll",()=>{u.current.style.top=`${window.visualViewport.offsetTop}px`})},T=[],e[4]=v,e[5]=T):(v=e[4],T=e[5]),X.useEffect(v,T);let b;e[6]===Symbol.for("react.memo_cache_sentinel")?(b=S.jsx("img",{src:"./pp.svg",width:32,height:32,className:Wa.profileImage}),e[6]=b):b=e[6];const R=t.current?t.current:"Receiver";let V;e[7]!==R?(V=S.jsxs("div",{className:Wa.profileContainer,children:[b,S.jsx("p",{children:R})]}),e[7]=R,e[8]=V):V=e[8];let P;e[9]!==m||e[10]!==i?(P=i==="hidden"&&S.jsx("button",{className:Wa.videoCallButton,onClick:m,children:S.jsx("svg",{width:"1.25rem",height:"1.25rem",viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})})}),e[9]=m,e[10]=i,e[11]=P):P=e[11];let k;e[12]===Symbol.for("react.memo_cache_sentinel")?(k=S.jsx("svg",{width:"1.25rem",height:"1.25rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2788 2.15224C13.9085 2 13.439 2 12.5 2C11.561 2 11.0915 2 10.7212 2.15224C10.2274 2.35523 9.83509 2.74458 9.63056 3.23463C9.53719 3.45834 9.50065 3.7185 9.48635 4.09799C9.46534 4.65568 9.17716 5.17189 8.69017 5.45093C8.20318 5.72996 7.60864 5.71954 7.11149 5.45876C6.77318 5.2813 6.52789 5.18262 6.28599 5.15102C5.75609 5.08178 5.22018 5.22429 4.79616 5.5472C4.47814 5.78938 4.24339 6.1929 3.7739 6.99993C3.30441 7.80697 3.06967 8.21048 3.01735 8.60491C2.94758 9.1308 3.09118 9.66266 3.41655 10.0835C3.56506 10.2756 3.77377 10.437 4.0977 10.639C4.57391 10.936 4.88032 11.4419 4.88029 12C4.88026 12.5581 4.57386 13.0639 4.0977 13.3608C3.77372 13.5629 3.56497 13.7244 3.41645 13.9165C3.09108 14.3373 2.94749 14.8691 3.01725 15.395C3.06957 15.7894 3.30432 16.193 3.7738 17C4.24329 17.807 4.47804 18.2106 4.79606 18.4527C5.22008 18.7756 5.75599 18.9181 6.28589 18.8489C6.52778 18.8173 6.77305 18.7186 7.11133 18.5412C7.60852 18.2804 8.2031 18.27 8.69012 18.549C9.17714 18.8281 9.46533 19.3443 9.48635 19.9021C9.50065 20.2815 9.53719 20.5417 9.63056 20.7654C9.83509 21.2554 10.2274 21.6448 10.7212 21.8478C11.0915 22 11.561 22 12.5 22C13.439 22 13.9085 22 14.2788 21.8478C14.7726 21.6448 15.1649 21.2554 15.3694 20.7654C15.4628 20.5417 15.4994 20.2815 15.5137 19.902C15.5347 19.3443 15.8228 18.8281 16.3098 18.549C16.7968 18.2699 17.3914 18.2804 17.8886 18.5412C18.2269 18.7186 18.4721 18.8172 18.714 18.8488C19.2439 18.9181 19.7798 18.7756 20.2038 18.4527C20.5219 18.2105 20.7566 17.807 21.2261 16.9999C21.6956 16.1929 21.9303 15.7894 21.9827 15.395C22.0524 14.8691 21.9088 14.3372 21.5835 13.9164C21.4349 13.7243 21.2262 13.5628 20.9022 13.3608C20.4261 13.0639 20.1197 12.558 20.1197 11.9999C20.1197 11.4418 20.4261 10.9361 20.9022 10.6392C21.2263 10.4371 21.435 10.2757 21.5836 10.0835C21.9089 9.66273 22.0525 9.13087 21.9828 8.60497C21.9304 8.21055 21.6957 7.80703 21.2262 7C20.7567 6.19297 20.522 5.78945 20.2039 5.54727C19.7799 5.22436 19.244 5.08185 18.7141 5.15109C18.4722 5.18269 18.2269 5.28136 17.8887 5.4588C17.3915 5.71959 16.7969 5.73002 16.3099 5.45096C15.8229 5.17191 15.5347 4.65566 15.5136 4.09794C15.4993 3.71848 15.4628 3.45833 15.3694 3.23463C15.1649 2.74458 14.7726 2.35523 14.2788 2.15224ZM12.5 15C14.1695 15 15.5228 13.6569 15.5228 12C15.5228 10.3431 14.1695 9 12.5 9C10.8305 9 9.47716 10.3431 9.47716 12C9.47716 13.6569 10.8305 15 12.5 15Z",fill:"#1C274C"})}),e[12]=k):k=e[12];let z;e[13]!==g?(z=S.jsx("button",{className:Wa.settingsButton,onClick:g,children:k}),e[13]=g,e[14]=z):z=e[14];let F;e[15]!==P||e[16]!==z?(F=S.jsxs("ul",{className:Wa.actionsContainer,children:[P,z]}),e[15]=P,e[16]=z,e[17]=F):F=e[17];let K;return e[18]!==F||e[19]!==V?(K=S.jsxs("nav",{"aria-label":"Main Navigation",className:Wa.navContainer,ref:u,children:[V,F]}),e[18]=F,e[19]=V,e[20]=K):K=e[20],K}function LS(e){return e.setSettings}function kS(e){return e.setVideoCall}function jS(e){return e.videoCall}const PS="_chatContainer_intrd_1",US="_chatBottom_intrd_18",x_={chatContainer:PS,chatBottom:US},BS="_textMessage_qznyh_1",zS="_sentMessage_qznyh_31",qS="_receivedMessage_qznyh_36",HS="_sending_qznyh_41",GS="_sent_qznyh_31",FS="_deletedMessage_qznyh_49",QS="_topMessage_qznyh_55",YS="_bottomMessage_qznyh_60",KS="_repliedMessage_qznyh_73",$S="_hasImage_qznyh_78",XS="_hasReaction_qznyh_84",ZS="_emoji_qznyh_88",JS="_optionsButton_qznyh_98",Pn={textMessage:BS,sentMessage:zS,receivedMessage:qS,sending:HS,sent:GS,deletedMessage:FS,topMessage:QS,bottomMessage:YS,repliedMessage:KS,hasImage:$S,hasReaction:XS,emoji:ZS,optionsButton:JS},WS="_reaction_1t2b5_1",tA="_sentReaction_1t2b5_11",eA="_receivedReaction_1t2b5_16",V1={reaction:WS,sentReaction:tA,receivedReaction:eA},nA=["","","","","",""];function iA(e){const t=we.c(8),{reaction:i,origin:r}=e,[o,u]=ea(sA);let f;t[0]!==u?(f=()=>{u.start({from:{scale:0},to:{scale:1},config:{tension:300,friction:15}})},t[0]=u,t[1]=f):f=t[1];let m;t[2]!==i?(m=[i],t[2]=i,t[3]=m):m=t[3],X.useEffect(f,m);let y;return t[4]!==r||t[5]!==i||t[6]!==o?(y=i!==-1?S.jsx(ms.span,{className:`${V1.reaction} ${r==="sent"?V1.sentReaction:V1.receivedReaction}`,style:{...o},children:nA[i]}):S.jsx(S.Fragment,{}),t[4]=r,t[5]=i,t[6]=o,t[7]=y):y=t[7],y}function sA(){return{scale:1}}const rA="_requestDiv_1axuz_1",aA="_decisionBox_1axuz_9",oA="_loading_1axuz_35",N1={requestDiv:rA,decisionBox:aA,loading:oA};function lA(e){const t=we.c(16),{sentId:i,receivedId:r}=e;console.log("Image request rendered!");const{dataChannel:o,peerName:u}=X.useContext(Rn),f=It(uA),{receivingImage:m}=X.useContext(ii),{showNotification:y}=_u(),[g,v]=X.useState(!1);let T;t[0]!==o.current||t[1]!==r||t[2]!==m.current||t[3]!==i||t[4]!==y?(T=()=>{m.current===null?(o.current.send(JSON.stringify({type:"imageAccept",sentId:r,receivedId:i})),v(!0)):y("Please wait for a while!")},t[0]=o.current,t[1]=r,t[2]=m.current,t[3]=i,t[4]=y,t[5]=T):T=t[5];const b=T;let R;t[6]!==o.current||t[7]!==r||t[8]!==f||t[9]!==i?(R=()=>{o.current.send(JSON.stringify({type:"imageReject",sentId:r,receivedId:i})),f(i,r)},t[6]=o.current,t[7]=r,t[8]=f,t[9]=i,t[10]=R):R=t[10];const V=R;let P;return t[11]!==b||t[12]!==g||t[13]!==u||t[14]!==V?(P=g?S.jsxs("div",{className:N1.loading,children:[S.jsx("span",{children:"L"}),S.jsx("span",{children:"o"}),S.jsx("span",{children:"a"}),S.jsx("span",{children:"d"}),S.jsx("span",{children:"i"}),S.jsx("span",{children:"n"}),S.jsx("span",{children:"g"}),S.jsx("span",{children:""}),S.jsx("span",{children:"i"}),S.jsx("span",{children:"m"}),S.jsx("span",{children:"a"}),S.jsx("span",{children:"g"}),S.jsx("span",{children:"e"})]}):S.jsxs("div",{className:N1.requestDiv,children:[S.jsxs("div",{children:[u.current," wants to send you an image"]}),S.jsxs("div",{className:N1.decisionBox,children:[S.jsx("button",{onClick:b,children:"Accept"}),S.jsx("button",{onClick:V,children:"Reject"})]})]}),t[11]=b,t[12]=g,t[13]=u,t[14]=V,t[15]=P):P=t[15],P}function uA(e){return e.removeMessage}const cA="_wrapperContainer_1jaxu_1",hA="_show_1jaxu_13",O1={wrapperContainer:cA,show:hA};function dg({imageData:e,imageSource:t,imageAlt:i="Image",backgroundColor:r,clickHandler:o}){const[u,f]=X.useState(!1),m={[`data-${e==null?void 0:e.label}`]:e==null?void 0:e.value};return S.jsx("div",{style:{backgroundColor:u?"transparent":r},className:`${O1.wrapperContainer} ${u?O1.stopAnimation:""}`,children:S.jsx("img",{onClick:o,...m,className:u?O1.show:"",onLoad:()=>{f(!0)},src:t,alt:i})})}const p4=X.memo(({message:e,prevMessageSentId:t,prevMessageReceivedId:i,prevMessageReaction:r,nextMessageSentId:o,nextMessageReceivedId:u,nextMessageReplyTo:f})=>{const{dataChannel:m}=X.useContext(Rn),y=It(it=>it.setReplying),g=It(it=>it.setActionsShown),v=It(it=>it.setReactionsShown),T=It(it=>it.setImageDialog),{chatBottom:b,pointerPosition:R,selectedMessage:V,longPressed:P,atBottomRef:k}=X.useContext(ii),{sentId:z,receivedId:F,type:K,status:rt,content:W,reaction:Q,deleted:D,highlight:C,replyTo:x}=e;console.log("Rendering message ",e);const L=()=>{T({src:W,sent:F===null})},O={text:()=>S.jsx("p",{children:W}),image:()=>S.jsx(dg,{imageSource:W,backgroundColor:F===null?"#FFD1B3":"#B3E0FF",clickHandler:L}),imageRequest:()=>S.jsx(lA,{sentId:z,receivedId:F})},[U,I]=ea(()=>({scale:1,x:0})),Mt=X.useRef(null),Vt=X.useRef(!1),Z=X.useRef(!0),ct=X.useRef(0),mt=X.useRef(null);X.useEffect(()=>{k.current&&(b.current.scrollIntoView({behavior:"smooth"}),k.current=!1),I.start({from:{scale:0,opacity:0},to:[{scale:1,opacity:1}],reset:!1,config:B1.stiff})},[]),X.useEffect(()=>{if(Z.current){Z.current=!1;return}(async()=>(mt.current.scrollIntoView({behavior:"instant"}),await new Promise(it=>setTimeout(it,100)),I.start({from:{scale:1},to:[{scale:1.2},{scale:1}],config:B1.stiff})))()},[C]);const Rt=()=>{if(z===null&&Q!==1){let it={type:"reaction",id:F,reaction:1};m.current.send(JSON.stringify(it))}},N=D7({onPointerDown:({event:it})=>{Vt.current=!1,Mt.current=setTimeout(()=>{Vt.current||(R.current.x=it.clientX,R.current.y=it.clientY,P.current=!0,I.start({from:{scale:1},to:[{scale:1.1},{scale:1}],config:{duration:150},onRest:()=>{g(!0),y(null),z===null&&v(!0),V.current=e}}))},500)},onPointerUp:()=>{setTimeout(()=>{P.current=!1},100),clearTimeout(Mt.current);const it=Date.now();it-ct.current<500?(Rt(),ct.current=0):ct.current=it},onPointerLeave:()=>{clearTimeout(Mt.current)},onDrag:({last:it,movement:[at]})=>{if(z===null){if(at<0)return}else if(at>0)return;if(Math.abs(at)<5)return;Vt.current=Math.abs(at)>5;let gt=F===null?Math.min(0,at):Math.max(0,at);I.start({x:gt,onRest:()=>{Math.abs(at)>60&&(V.current=e,y(V.current),g(!1),v(!1))}}),Vt.current&&Mt.current&&(clearTimeout(Mt.current),Mt.current=null),it&&I.start({x:0,config:{tension:500,friction:20}})}},{eventOptions:{passive:!1}}),et=it=>{it.stopPropagation(),!(D===2||K==="imageRequest"||rt==="sending")&&(V.current=e,g(!0),F!==null&&(R.current.x=it.clientX-mt.current.clientWidth/2-36,R.current.y=it.clientY,v(!0)))};return S.jsxs(ms.div,{ref:mt,...D!==0||K==="imageRequest"||rt==="sending"?{}:N(),style:{...U},className:`
        ${Pn.textMessage}
        ${rt==="sending"?Pn.sending:Pn.sent}
        ${F===null?Pn.sentMessage:Pn.receivedMessage}
        ${(o===z||u===F)&&e.reaction===-1&&!f?Pn.topMessage:""}
        ${(t===z||i===F)&&!r?Pn.bottomMessage:""}
        ${x?Pn.repliedMessage:""}
        ${D===2?Pn.deletedMessage:""}
        ${Q!==-1&&D!==2?Pn.hasReaction:""}
        ${K==="image"?Pn.hasImage:""}
        ${B7(W)?Pn.emoji:""}
      `,children:[(O[K]||(()=>S.jsx("p",{children:S.jsx("span",{children:"Unknown type"})})))(),D!==2&&S.jsx(iA,{reaction:Q,origin:z===null?"received":"sent"}),S.jsx("button",{onClick:()=>{et(event)},className:Pn.optionsButton,children:S.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M0 0h48v48H0z",fill:"none"}),S.jsxs("g",{children:[S.jsx("circle",{cx:"24",cy:"24",r:"5"}),S.jsx("circle",{cx:"24",cy:"11",r:"5"}),S.jsx("circle",{cx:"24",cy:"37",r:"5"})]})]})})]})}),fA="_replyToMessage_1f615_1",dA="_sentMessage_1f615_20",mA="_receivedMessage_1f615_25",Jc={replyToMessage:fA,sentMessage:dA,receivedMessage:mA};function gA(e){const t=we.c(18),{message:i,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}=e,f=It(pA);let m;t[0]!==f||t[1]!==i.replyTo.receivedId||t[2]!==i.replyTo.sentId?(m=()=>{setTimeout(()=>{f(i.replyTo.sentId,i.replyTo.receivedId)},100)},t[0]=f,t[1]=i.replyTo.receivedId,t[2]=i.replyTo.sentId,t[3]=m):m=t[3];const y=m,g=`
          ${Jc.replyToMessage}
          ${i.receivedId===null?Jc.sentMessage:Jc.receivedMessage}
          ${i.reaction!==-1?Jc.hasReaction:""}
        `,v=i.replyTo.type==="image"?"Image":i.replyTo.content;let T;t[4]!==v?(T=S.jsx("p",{children:v}),t[4]=v,t[5]=T):T=t[5];let b;t[6]!==y||t[7]!==g||t[8]!==T?(b=S.jsx("a",{onClick:y,className:g,children:T}),t[6]=y,t[7]=g,t[8]=T,t[9]=b):b=t[9];let R;t[10]!==i||t[11]!==o||t[12]!==u||t[13]!==r?(R=S.jsx(p4,{message:i,replied:!0,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}),t[10]=i,t[11]=o,t[12]=u,t[13]=r,t[14]=R):R=t[14];let V;return t[15]!==b||t[16]!==R?(V=S.jsxs(S.Fragment,{children:[b,R]}),t[15]=b,t[16]=R,t[17]=V):V=t[17],V}function pA(e){return e.highlightMessage}const yA="_typingIndicator_1w1tb_1",_A="_dot_1w1tb_12",Wc={typingIndicator:yA,dot:_A};function vA(){const e=we.c(1),{chatBottom:t}=X.useContext(ii);ao(t)&&setTimeout(()=>{t.current.scrollIntoView({behavior:"smooth"})},300);let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsxs("div",{className:Wc.typingIndicator,children:[S.jsx("span",{className:Wc.dot}),S.jsx("span",{className:Wc.dot}),S.jsx("span",{className:Wc.dot})]}),e[0]=i):i=e[0],i}const EA="_newMessageContainer_19iot_1",TA="_newMessage_19iot_1",I_={newMessageContainer:EA,newMessage:TA};function bA(){const e=we.c(4);console.log("New Message component rendered!");const{chatBottom:t}=X.useContext(ii);let i;e[0]!==t.current?(i=()=>{t.current.scrollIntoView({behavior:"smooth"})},e[0]=t.current,e[1]=i):i=e[1];const r=i;let o;return e[2]!==r?(o=S.jsx("div",{className:I_.newMessageContainer,children:S.jsx("div",{className:I_.newMessage,onClick:r,children:"New Message"})}),e[2]=r,e[3]=o):o=e[3],o}function wA(){const e=we.c(17);console.log("Chat component rendered!");const{chatBottom:t}=X.useContext(ii),i=It(xA),r=It(RA),o=It(CA),u=It(AA);let f;e[0]!==t||e[1]!==u?(f=()=>{const R=new IntersectionObserver(P=>{P.forEach(k=>{k.isIntersecting&&u(!1)})},{threshold:.1}),V=t.current;return V&&R.observe(V),()=>{V&&R.unobserve(V)}},e[0]=t,e[1]=u,e[2]=f):f=e[2];let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[3]=m):m=e[3],X.useLayoutEffect(f,m);let y;e[4]!==i?(y=i.map(SA),e[4]=i,e[5]=y):y=e[5];let g;e[6]!==r?(g=r&&S.jsx(vA,{}),e[6]=r,e[7]=g):g=e[7];let v;e[8]!==o?(v=o&&S.jsx(bA,{}),e[8]=o,e[9]=v):v=e[9];let T;e[10]!==t?(T=S.jsx("div",{ref:t,className:x_.chatBottom,children:"Hehe"},"chatBottom"),e[10]=t,e[11]=T):T=e[11];let b;return e[12]!==y||e[13]!==g||e[14]!==v||e[15]!==T?(b=S.jsxs("div",{className:x_.chatContainer,children:[y,g,v,T]}),e[12]=y,e[13]=g,e[14]=v,e[15]=T,e[16]=b):b=e[16],b}function SA(e,t,i){var r,o,u,f,m,y,g,v,T;return e.replyTo?S.jsx(gA,{message:e,nextMessageSentId:(r=i[t+1])==null?void 0:r.sentId,nextMessageReceivedId:(o=i[t+1])==null?void 0:o.receivedId,nextMessageReplyTo:(u=i[t+1])==null?void 0:u.replyTo},`${e.sentId} m ${e.receivedId}`):S.jsx(p4,{message:e,nextMessageSentId:(f=i[t+1])==null?void 0:f.sentId,nextMessageReceivedId:(m=i[t+1])==null?void 0:m.receivedId,nextMessageReplyTo:(y=i[t+1])==null?void 0:y.replyTo,prevMessageSentId:(g=i[t-1])==null?void 0:g.sentId,prevMessageReceivedId:(v=i[t-1])==null?void 0:v.receivedId,prevMessageReaction:((T=i[t-1])==null?void 0:T.reaction)!==-1},`${e.sentId} m ${e.receivedId}`)}function AA(e){return e.setNewMessage}function CA(e){return e.newMessage}function RA(e){return e.typing}function xA(e){return e.messages}const IA="_inputSpaceWrapper_18b5q_1",DA="_inputSpaceContainer_18b5q_7",MA="_textAreaWrapper_18b5q_15",VA="_gifSelector_18b5q_52",NA="_inputOptions_18b5q_65",OA="_sendButton_18b5q_87",LA="_imageBox_18b5q_107",kA="_inputImage_18b5q_118",jA="_closeImage_18b5q_125",hs={inputSpaceWrapper:IA,inputSpaceContainer:DA,textAreaWrapper:MA,gifSelector:VA,inputOptions:NA,sendButton:OA,imageBox:LA,inputImage:kA,closeImage:jA},PA="_gifBox_ov4sj_1",UA="_dragger_ov4sj_18",BA="_inputDiv_ov4sj_28",zA="_closeButton_ov4sj_34",qA="_gifInput_ov4sj_45",HA="_gifsContainer_ov4sj_65",GA="_containerColumn_ov4sj_76",Xs={gifBox:PA,dragger:UA,inputDiv:BA,closeButton:zA,gifInput:qA,gifsContainer:HA,containerColumn:GA},FA="AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k",QA="client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low";function YA(e){const t=we.c(50),{setGifPicker:i}=e;console.log("Gif Picker rendered!");const{dataChannel:r,featuredGifs:o}=X.useContext(Rn),{sentId:u,selectedMessage:f,atBottomRef:m}=X.useContext(ii),y=It(nC),g=It(eC),v=It(tC),[T,b]=X.useState(o.current),R=X.useRef(null),[V,P]=ea(WA),{h:k,pB:z}=V;let F;t[0]!==i?(F=Tt=>{Tt.state==="gifs"&&i(!1)},t[0]=i,t[1]=F):F=t[1];const K=F;let rt;t[2]!==P||t[3]!==i?(rt=()=>{P.start({h:0,pB:0,immediate:!1,onRest:()=>{i(!1)}})},t[2]=P,t[3]=i,t[4]=rt):rt=t[4];const W=rt;let Q;t[5]!==P||t[6]!==W?(Q=Tt=>{const{movement:re,last:Se}=Tt,[,ge]=re;Math.abs(ge)<2&&!Se||(Se?ge>60?W():P.start({h:85,immediate:!1}):ge>0&&P.start({h:85-ge/window.innerHeight*100,immediate:!0}))},t[5]=P,t[6]=W,t[7]=Q):Q=t[7];const D=yu(Q);let C;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=async Tt=>{const re=`https://tenor.googleapis.com/v2/search?q=${Tt}&key=${FA}&${QA}`,Se=await fetch(re).then(JA);b(Se.results)},t[8]=C):C=t[8];const x=C;let L;t[9]===Symbol.for("react.memo_cache_sentinel")?(L=j7(x,200),t[9]=L):L=t[9];const O=X.useRef(L);let U;t[10]!==o.current?(U=()=>{const Tt=R.current.value.trimEnd();Tt.length===0?b(o.current):O.current(Tt)},t[10]=o.current,t[11]=U):U=t[11];const I=U;let Mt;t[12]!==y||t[13]!==m||t[14]!==r||t[15]!==g||t[16]!==f||t[17]!==u||t[18]!==i||t[19]!==v?(Mt=Tt=>{console.log("Clicked!"),Tt.target.dataset.url&&(K1({type:"gif",content:Tt.target.dataset.url,replying:g,setReplying:v,selectedMessage:f.current,dataChannel:r.current,addMessage:y,sentId:u,inputRef:null,atBottomRef:m}),i(!1))},t[12]=y,t[13]=m,t[14]=r,t[15]=g,t[16]=f,t[17]=u,t[18]=i,t[19]=v,t[20]=Mt):Mt=t[20];const Vt=Mt;let Z;t[21]!==P||t[22]!==K?(Z=()=>(P.start({from:{h:0},to:[{h:85}],reset:!1}),window.history.pushState("gifs",""),window.addEventListener("popstate",K),()=>{window.removeEventListener("popstate",K)}),t[21]=P,t[22]=K,t[23]=Z):Z=t[23];let ct;t[24]===Symbol.for("react.memo_cache_sentinel")?(ct=[],t[24]=ct):ct=t[24],X.useEffect(Z,ct);let mt;t[25]!==D?(mt=D(),t[25]=D,t[26]=mt):mt=t[26];let Rt;t[27]!==k?(Rt=k.to(ZA),t[27]=k,t[28]=Rt):Rt=t[28];let N;t[29]!==z?(N=z.to(XA),t[29]=z,t[30]=N):N=t[30];let et;t[31]!==Rt||t[32]!==N?(et={height:Rt,paddingBottom:N},t[31]=Rt,t[32]=N,t[33]=et):et=t[33];let it;t[34]===Symbol.for("react.memo_cache_sentinel")?(it=S.jsx("div",{className:Xs.dragger}),t[34]=it):it=t[34];let at;t[35]!==I?(at=S.jsx("input",{ref:R,autoComplete:"off",placeholder:"Search",spellCheck:!1,name:"query",title:"Search for GIFs",className:Xs.gifInput,onChange:I}),t[35]=I,t[36]=at):at=t[36];let gt;t[37]!==W?(gt=S.jsx("button",{onClick:W,className:Xs.closeButton,children:" Close "}),t[37]=W,t[38]=gt):gt=t[38];let ut;t[39]!==at||t[40]!==gt?(ut=S.jsxs("div",{className:Xs.inputDiv,children:[at,gt]}),t[39]=at,t[40]=gt,t[41]=ut):ut=t[41];let dt;t[42]!==T||t[43]!==Vt?(dt=T.length>0?S.jsxs("div",{className:Xs.gifsContainer,onClick:Tt=>Vt(Tt),children:[S.jsx("div",{className:Xs.containerColumn,children:T.map($A)}),S.jsx("div",{className:Xs.containerColumn,children:T.map(KA)})]}):S.jsx(S.Fragment,{}),t[42]=T,t[43]=Vt,t[44]=dt):dt=t[44];let Et;return t[45]!==mt||t[46]!==et||t[47]!==ut||t[48]!==dt?(Et=S.jsxs(ms.div,{...mt,style:et,className:Xs.gifBox,children:[it,ut,dt]}),t[45]=mt,t[46]=et,t[47]=ut,t[48]=dt,t[49]=Et):Et=t[49],Et}function KA(e,t){return t%2===1&&S.jsx(dg,{imageData:{label:"url",value:e.media_formats.gif.url},imageSource:e.media_formats.tinygif.url,imageAlt:e.content_description,backgroundColor:"var(--opaque-background)"},e.id+t)}function $A(e,t){return t%2===0&&S.jsx(dg,{imageData:{label:"url",value:e.media_formats.gif.url},imageSource:e.media_formats.tinygif.url,imageAlt:e.content_description,backgroundColor:"var(--opaque-background)"},e.id+t)}function XA(e){return`${e}rem`}function ZA(e){return`${e}vh`}function JA(e){return e.json()}function WA(){return{h:85,pB:.5}}function tC(e){return e.setReplying}function eC(e){return e.replying}function nC(e){return e.addMessage}const iC="_replyInfo_oczyu_1",sC="_replyingTo_oczyu_34",rC="_selectedMessage_oczyu_39",th={replyInfo:iC,replyingTo:sC,selectedMessage:rC};function aC(){const e=we.c(15),{peerName:t}=X.useContext(Rn),{selectedMessage:i}=X.useContext(ii),r=It(oC),o=i.current.receivedId===null?"yourself":t.current,u=i.current.type==="image"?"Image":i.current.content;let f;e[0]!==r?(f=()=>{r(null)},e[0]=r,e[1]=f):f=e[1];const m=f;let y;e[2]!==o?(y=S.jsxs("p",{className:th.replyingTo,children:["Replying to ",o]}),e[2]=o,e[3]=y):y=e[3];let g;e[4]!==u?(g=S.jsx("p",{className:th.selectedMessage,children:u}),e[4]=u,e[5]=g):g=e[5];let v;e[6]!==y||e[7]!==g?(v=S.jsxs("div",{className:th.messageContents,children:[y,g]}),e[6]=y,e[7]=g,e[8]=v):v=e[8];let T;e[9]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"}),e[9]=T):T=e[9];let b;e[10]!==m?(b=S.jsx("svg",{width:"1rem",height:"1rem",onClick:m,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:T}),e[10]=m,e[11]=b):b=e[11];let R;return e[12]!==v||e[13]!==b?(R=S.jsxs("div",{className:th.replyInfo,children:[v,b]}),e[12]=v,e[13]=b,e[14]=R):R=e[14],R}function oC(e){return e.setReplying}function lC(){const e=we.c(70);console.log("Input space rendered!");const{showNotification:t}=_u(),{dataChannel:i}=X.useContext(Rn),{sentId:r,atBottomRef:o,images:u,selectedMessage:f,chatBottom:m}=X.useContext(ii),y=It(hC),g=It(cC),v=It(uC),T=X.useRef(""),b=X.useRef(null),R=X.useRef(null),V=X.useRef(null),[P,k]=X.useState(!1),[z,F]=X.useState(null),[K,rt]=X.useState(!1);let W;e[0]===Symbol.for("react.memo_cache_sentinel")?(W=function(){const rn=window.visualViewport.height+window.visualViewport.offsetTop,di=window.innerHeight,ra=Math.max(0,di-rn);R.current.style.bottom=`${ra}px`,console.log("Maybe the scrolling is due to this?")},e[0]=W):W=e[0];const Q=W;let D,C;e[1]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{window.visualViewport&&(window.visualViewport.addEventListener("resize",Q),window.visualViewport.addEventListener("scroll",Q))},C=[],e[1]=D,e[2]=C):(D=e[1],C=e[2]),X.useEffect(D,C);let x,L;e[3]!==y?(x=()=>{y&&b.current&&b.current.focus()},L=[y],e[3]=y,e[4]=x,e[5]=L):(x=e[4],L=e[5]),X.useLayoutEffect(x,L);let O;e[6]===Symbol.for("react.memo_cache_sentinel")?(O=()=>{rt(!0)},e[6]=O):O=e[6];const U=O;let I;e[7]!==i?(I=()=>{i.current.send(JSON.stringify({type:"typing"}))},e[7]=i,e[8]=I):I=e[8];const Mt=I;let Vt;e[9]!==Mt?(Vt=k7(Mt,800),e[9]=Mt,e[10]=Vt):Vt=e[10];const Z=X.useRef(Vt);let ct;e[11]===Symbol.for("react.memo_cache_sentinel")?(ct=()=>{Z.current(),k(!0),b.current.style.height="auto",b.current.scrollHeight>b.current.clientHeight&&(b.current.style.height=b.current.scrollHeight+"px"),T.current=b.current.value},e[11]=ct):ct=e[11];const mt=ct;let Rt;e[12]!==u.current||e[13]!==r||e[14]!==t?(Rt=async vn=>{const rn=vn.target.files[0];if(!rn)return;const di=await P7(rn);if(di.length>64){t("Please upload images upto 2 MB!");return}u.current.push({sentId:r.current,receivedId:null,fileType:rn.type,chunks:di}),F(URL.createObjectURL(rn))},e[12]=u.current,e[13]=r,e[14]=t,e[15]=Rt):Rt=e[15];const N=Rt;let et;e[16]!==v||e[17]!==o||e[18]!==m||e[19]!==i||e[20]!==y||e[21]!==f||e[22]!==r||e[23]!==g?(et=()=>{T.current.trim().length!==0&&(K1({type:"text",content:T.current.trimEnd(),replying:y,setReplying:g,selectedMessage:f.current,dataChannel:i.current,addMessage:v,sentId:r,inputRef:b,atBottomRef:o,chatBottom:m}),T.current="")},e[16]=v,e[17]=o,e[18]=m,e[19]=i,e[20]=y,e[21]=f,e[22]=r,e[23]=g,e[24]=et):et=e[24];const it=et;let at;e[25]!==v||e[26]!==o||e[27]!==m||e[28]!==i||e[29]!==z||e[30]!==y||e[31]!==f||e[32]!==r||e[33]!==g?(at=()=>{z!==null&&(K1({type:"imageRequest",content:z,replying:y,setReplying:g,selectedMessage:f.current,dataChannel:i.current,addMessage:v,sentId:r,inputRef:V,atBottomRef:o,chatBottom:m}),F(null))},e[25]=v,e[26]=o,e[27]=m,e[28]=i,e[29]=z,e[30]=y,e[31]=f,e[32]=r,e[33]=g,e[34]=at):at=e[34];const gt=at;let ut;e[35]===Symbol.for("react.memo_cache_sentinel")?(ut=()=>{setTimeout(()=>{k(!1),b.current.style.height="unset",b.current.scrollTop=b.current.scrollHeight},100)},e[35]=ut):ut=e[35];const dt=ut;let Et;e[36]!==u.current||e[37]!==r?(Et=()=>{V.current.value="";const vn=u.current.findIndex(rn=>rn.sentId===r.current&&rn.receivedId===null);u.current.splice(vn,1),F(null)},e[36]=u.current,e[37]=r,e[38]=Et):Et=e[38];const Tt=Et;let re;e[39]!==z||e[40]!==gt||e[41]!==it?(re=()=>{z===null?it():gt()},e[39]=z,e[40]=gt,e[41]=it,e[42]=re):re=e[42];const Se=re;let ge;e[43]!==it?(ge=vn=>{vn.key!=="Enter"||window.innerWidth<=1400||vn.shiftKey||(vn.preventDefault(),it(),b.current.blur())},e[43]=it,e[44]=ge):ge=e[44];const fn=ge;let Be;e[45]!==K?(Be=K?S.jsx(YA,{setGifPicker:rt}):null,e[45]=K,e[46]=Be):Be=e[46];let Ke;e[47]!==y?(Ke=y&&S.jsx(aC,{}),e[47]=y,e[48]=Ke):Ke=e[48];let dn;e[49]!==P||e[50]!==N?(dn=!P&&S.jsxs("div",{className:hs.inputOptions,children:[S.jsx("label",{htmlFor:"fileInput",children:S.jsx("svg",{width:"1.125rem",height:"1.125rem",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM6.016 24q0 0.832 0.576 1.44t1.408 0.576h16q0.832 0 1.408-0.576t0.608-1.44v-0.928q-0.224-0.448-1.12-2.688t-1.6-3.584-1.28-2.112q-0.544-0.576-1.12-0.608t-1.152 0.384-1.152 1.12-1.184 1.568-1.152 1.696-1.152 1.6-1.088 1.184-1.088 0.448q-0.576 0-1.664-1.44-0.16-0.192-0.48-0.608-1.12-1.504-1.6-1.824-0.768-0.512-1.184 0.352-0.224 0.512-0.928 2.24t-1.056 2.56v0.64zM6.016 9.024q0 1.248 0.864 2.112t2.112 0.864 2.144-0.864 0.864-2.112-0.864-2.144-2.144-0.864-2.112 0.864-0.864 2.144z"})})}),S.jsx("input",{ref:V,id:"fileInput",type:"file",accept:"image/*",onChange:vn=>N(vn)}),S.jsx("svg",{width:"1.125rem",height:"1.125rem",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--twemoji",preserveAspectRatio:"xMidYMid meet",children:S.jsx("path",{fill:"#FFAC33",d:"M27.287 34.627c-.404 0-.806-.124-1.152-.371L18 28.422l-8.135 5.834a1.97 1.97 0 0 1-2.312-.008a1.971 1.971 0 0 1-.721-2.194l3.034-9.792l-8.062-5.681a1.98 1.98 0 0 1-.708-2.203a1.978 1.978 0 0 1 1.866-1.363L12.947 13l3.179-9.549a1.976 1.976 0 0 1 3.749 0L23 13l10.036.015a1.975 1.975 0 0 1 1.159 3.566l-8.062 5.681l3.034 9.792a1.97 1.97 0 0 1-.72 2.194a1.957 1.957 0 0 1-1.16.379z"})})]}),e[49]=P,e[50]=N,e[51]=dn):dn=e[51];let _n;e[52]!==P||e[53]!==fn||e[54]!==z||e[55]!==Tt?(_n=z?S.jsxs("div",{className:hs.imageBox,children:[S.jsx("img",{src:z,className:hs.inputImage}),S.jsx("svg",{className:hs.closeImage,width:"1rem",height:"1rem",onClick:Tt,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})]}):S.jsxs("div",{className:hs.textAreaWrapper,children:[S.jsx("textarea",{onChange:mt,onFocus:mt,onBlur:dt,ref:b,name:"textMessage",placeholder:"Message",rows:1,spellCheck:!1,onKeyDown:fn}),!P&&S.jsx("svg",{className:hs.gifSelector,onClick:U,width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"ic_fluent_gif_24_filled",fillRule:"nonzero",children:S.jsx("path",{d:"M18.75,3.50054297 C20.5449254,3.50054297 22,4.95561754 22,6.75054297 L22,17.2531195 C22,19.048045 20.5449254,20.5031195 18.75,20.5031195 L5.25,20.5031195 C3.45507456,20.5031195 2,19.048045 2,17.2531195 L2,6.75054297 C2,4.95561754 3.45507456,3.50054297 5.25,3.50054297 L18.75,3.50054297 Z M8.01459972,8.87193666 C6.38839145,8.87193666 5.26103525,10.2816525 5.26103525,11.9943017 C5.26103525,13.707564 6.38857781,15.1202789 8.01459972,15.1202789 C8.90237918,15.1202789 9.71768065,14.6931811 10.1262731,13.9063503 L10.2024697,13.7442077 L10.226,13.674543 L10.2440163,13.5999276 L10.2440163,13.5999276 L10.2516169,13.5169334 L10.2518215,11.9961937 L10.2450448,11.9038358 C10.2053646,11.6359388 9.99569349,11.4234501 9.72919932,11.3795378 L9.62682145,11.3711937 L8.62521827,11.3711937 L8.53286035,11.3779703 C8.26496328,11.4176506 8.05247466,11.6273217 8.00856234,11.8938159 L8.00021827,11.9961937 L8.00699487,12.0885517 C8.0466751,12.3564487 8.25634623,12.5689373 8.5228404,12.6128497 L8.62521827,12.6211937 L9.00103525,12.6209367 L9.00103525,13.3549367 L8.99484486,13.3695045 C8.80607251,13.6904125 8.44322427,13.8702789 8.01459972,13.8702789 C7.14873038,13.8702789 6.51103525,13.0713011 6.51103525,11.9943017 C6.51103525,10.9182985 7.14788947,10.1219367 8.01459972,10.1219367 C8.43601415,10.1219367 8.67582824,10.1681491 8.97565738,10.3121334 C9.28681641,10.4615586 9.6601937,10.3304474 9.80961888,10.0192884 C9.95904407,9.70812933 9.82793289,9.33475204 9.51677386,9.18532686 C9.03352891,8.95326234 8.61149825,8.87193666 8.01459972,8.87193666 Z M12.6289445,8.99393497 C12.3151463,8.99393497 12.0553614,9.22519285 12.0107211,9.52657705 L12.0039445,9.61893497 L12.0039445,14.381065 L12.0107211,14.4734229 C12.0553614,14.7748072 12.3151463,15.006065 12.6289445,15.006065 C12.9427427,15.006065 13.2025276,14.7748072 13.2471679,14.4734229 L13.2539445,14.381065 L13.2539445,9.61893497 L13.2471679,9.52657705 C13.2025276,9.22519285 12.9427427,8.99393497 12.6289445,8.99393497 Z M17.6221579,9.00083497 L15.6247564,8.99393111 C15.3109601,8.99285493 15.0503782,9.22321481 15.0046948,9.52444312 L14.9975984,9.61677709 L14.9975984,14.3649711 L15.0043751,14.4573291 C15.0440553,14.7252261 15.2537265,14.9377148 15.5202206,14.9816271 L15.6225985,14.9899711 L15.7149564,14.9831945 C15.9828535,14.9435143 16.1953421,14.7338432 16.2392544,14.467349 L16.2475985,14.3649711 L16.2470353,13.2499367 L17.37,13.2504012 L17.4623579,13.2436246 C17.730255,13.2039444 17.9427436,12.9942732 17.9866559,12.7277791 L17.995,12.6254012 L17.9882234,12.5330433 C17.9485432,12.2651462 17.738872,12.0526576 17.4723779,12.0087453 L17.37,12.0004012 L16.2470353,11.9999367 L16.2470353,10.2449367 L17.6178421,10.2508313 L17.7102229,10.2443727 C18.0117595,10.2007704 18.2439132,9.94178541 18.2450039,9.62798912 C18.24608,9.31419284 18.0157202,9.05361096 17.7144919,9.00793041 L17.6221579,9.00083497 L15.6247564,8.99393111 L17.6221579,9.00083497 Z",id:"-Color"})})})]}),e[52]=P,e[53]=fn,e[54]=z,e[55]=Tt,e[56]=_n):_n=e[56];let Ae;e[57]===Symbol.for("react.memo_cache_sentinel")?(Ae=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",id:"send",className:"icon glyph",children:S.jsx("path",{d:"M21.66,12a2,2,0,0,1-1.14,1.81L5.87,20.75A2.08,2.08,0,0,1,5,21a2,2,0,0,1-1.82-2.82L5.46,13H11a1,1,0,0,0,0-2H5.46L3.18,5.87A2,2,0,0,1,5.86,3.25h0l14.65,6.94A2,2,0,0,1,21.66,12Z"})}),e[57]=Ae):Ae=e[57];let xn;e[58]!==Se?(xn=S.jsx("button",{className:hs.sendButton,onClick:Se,children:Ae}),e[58]=Se,e[59]=xn):xn=e[59];let sn;e[60]!==dn||e[61]!==_n||e[62]!==xn?(sn=S.jsxs("div",{className:hs.inputSpaceContainer,children:[dn,_n,xn]}),e[60]=dn,e[61]=_n,e[62]=xn,e[63]=sn):sn=e[63];let ze;e[64]!==Ke||e[65]!==sn?(ze=S.jsxs("div",{ref:R,className:hs.inputSpaceWrapper,children:[Ke,sn]}),e[64]=Ke,e[65]=sn,e[66]=ze):ze=e[66];let zn;return e[67]!==Be||e[68]!==ze?(zn=S.jsxs(S.Fragment,{children:[Be,ze]}),e[67]=Be,e[68]=ze,e[69]=zn):zn=e[69],zn}function uC(e){return e.addMessage}function cC(e){return e.setReplying}function hC(e){return e.replying}const fC="_containingDiv_1m6wd_1",dC="_incomingCall_1m6wd_8",mC="_incomingCallText_1m6wd_25",gC="_callingText_1m6wd_31",pC="_callActions_1m6wd_42",yC="_acceptCall_1m6wd_49",_C="_rejectCall_1m6wd_53",fs={containingDiv:fC,incomingCall:dC,incomingCallText:mC,callingText:gC,callActions:pC,acceptCall:yC,rejectCall:_C};function vC(){const e=we.c(34);console.log("Incoming call rendered!");const{peerName:t,dataChannel:i}=X.useContext(Rn),r=It(bC),o=It(TC),[u,f]=ea(EC),{x:m,y,opacity:g}=u;let v;e[0]!==i.current||e[1]!==r||e[2]!==o?(v=()=>{i.current.send(JSON.stringify({type:"callAccept"})),r(!1),o("connected")},e[0]=i.current,e[1]=r,e[2]=o,e[3]=v):v=e[3];const T=v;let b;e[4]!==i.current||e[5]!==r?(b=()=>{i.current.send(JSON.stringify({type:"callReject"})),r(!1)},e[4]=i.current,e[5]=r,e[6]=b):b=e[6];const R=b;let V;e[7]!==f||e[8]!==R?(V=O=>{const{down:U,movement:I,direction:Mt}=O,[Vt]=I,[Z]=Mt;if(!U&&Math.abs(Vt)>100){f.start({x:Z>0?500:-500,opacity:0,onRest:R});return}f.start({x:U?Vt:0,opacity:1})},e[7]=f,e[8]=R,e[9]=V):V=e[9];const P=yu(V);let k;e[10]!==P?(k=P(),e[10]=P,e[11]=k):k=e[11];let z;e[12]!==g||e[13]!==m||e[14]!==y?(z={x:m,y,opacity:g},e[12]=g,e[13]=m,e[14]=y,e[15]=z):z=e[15];let F,K;e[16]===Symbol.for("react.memo_cache_sentinel")?(F=S.jsx("div",{className:fs.profileImage,children:S.jsx("img",{src:"./pp.svg",width:50,height:50,className:fs.profileImage})}),K=S.jsx("p",{className:fs.incomingCallText,children:"Incoming Call"}),e[16]=F,e[17]=K):(F=e[16],K=e[17]);let rt;e[18]!==t.current?(rt=S.jsxs("div",{children:[K,S.jsxs("p",{className:fs.callingText,children:[t.current," is calling you"]})]}),e[18]=t.current,e[19]=rt):rt=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})}),e[20]=W):W=e[20];let Q;e[21]!==T?(Q=S.jsx("button",{className:fs.acceptCall,onClick:T,children:W}),e[21]=T,e[22]=Q):Q=e[22];let D;e[23]===Symbol.for("react.memo_cache_sentinel")?(D=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})}),e[23]=D):D=e[23];let C;e[24]!==R?(C=S.jsx("button",{className:fs.rejectCall,onClick:R,children:D}),e[24]=R,e[25]=C):C=e[25];let x;e[26]!==Q||e[27]!==C?(x=S.jsxs("div",{className:fs.callActions,children:[Q,C]}),e[26]=Q,e[27]=C,e[28]=x):x=e[28];let L;return e[29]!==x||e[30]!==k||e[31]!==z||e[32]!==rt?(L=S.jsx("div",{className:fs.containingDiv,children:S.jsxs(ms.div,{...k,className:fs.incomingCall,style:z,children:[F,rt,x]})}),e[29]=x,e[30]=k,e[31]=z,e[32]=rt,e[33]=L):L=e[33],L}function EC(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}function TC(e){return e.setVideoCall}function bC(e){return e.setIncomingCall}const wC="_videoCallContainer_1wgnk_1",SC="_actionList_1wgnk_17",AC="_cancelButton_1wgnk_21",CC="_expanded_1wgnk_40",RC="_videoContainer_1wgnk_44",xC="_contracted_1wgnk_62",IC="_video_1wgnk_1",DC="_expandButton_1wgnk_78",MC="_mutedButton_1wgnk_83",VC="_sendingVideo_1wgnk_88",NC="_receivingVideo_1wgnk_93",OC="_shown_1wgnk_120",LC="_hidden_1wgnk_124",kC="_startCall_1wgnk_140",jC="_endCall_1wgnk_153",PC="_rotateLogo_1wgnk_166",UC="_mini_1wgnk_243",BC="_callingIndicatorContainer_1wgnk_263",zC="_callingIndicator_1wgnk_263",se={videoCallContainer:wC,actionList:SC,cancelButton:AC,expanded:CC,videoContainer:RC,contracted:xC,video:IC,expandButton:DC,mutedButton:MC,sendingVideo:VC,receivingVideo:NC,shown:OC,hidden:LC,startCall:kC,endCall:jC,rotateLogo:PC,mini:UC,callingIndicatorContainer:BC,callingIndicator:zC};function qC({callState:e}){console.log("Call screen rendered!");const{peerConnection:t,remoteStream:i,videoChannel:r,dataChannel:o}=X.useContext(Rn),u=It(ut=>ut.setVideoCall),[f,m]=X.useState(!1),[y,g]=X.useState(!1),[v,T]=X.useState(!1),[b,R]=X.useState(!1),[V,P]=X.useState("front"),[k,z]=X.useState("normal"),[F,K]=X.useState(!0),rt=X.useRef(null),W=X.useRef(null),Q=X.useRef({x:0,y:0}),D=X.useRef(null),C=X.useRef(null),x=X.useRef(null),L=X.useRef(null),O=X.useRef(null),U=X.useRef(null),[{x:I,y:Mt},Vt]=ea(()=>({x:Q.current.x,y:Q.current.y,config:{tension:300,friction:15}}));X.useEffect(()=>{window.history.pushState("call",""),r.current.onmessage=dt=>{let Et=JSON.parse(dt.data);Et.message==="audioOn"?T(!0):Et.message==="audioOff"?T(!1):Et.message==="videoOn"?R(!0):Et.message==="videoOff"&&R(!1)},O.current=new MediaStream;const ut=t.current.getTransceivers();return W.current=ut.find(dt=>{var Et,Tt,re;return((Et=dt.receiver.track)==null?void 0:Et.kind)==="video"||((Tt=dt.sender.track)==null?void 0:Tt.kind)==="video"||((re=dt.mid)==null?void 0:re.includes("video"))}),rt.current=ut.find(dt=>{var Et,Tt,re;return((Et=dt.receiver.track)==null?void 0:Et.kind)==="audio"||((Tt=dt.sender.track)==null?void 0:Tt.kind)==="audio"||((re=dt.mid)==null?void 0:re.includes("audio"))}),window.addEventListener("popstate",ct),()=>{var dt;(dt=O.current)==null||dt.getTracks().forEach(Et=>{Et.stop()}),window.removeEventListener("popstate",ct)}},[]),X.useEffect(()=>{(async()=>{O.current.getTracks().forEach(Et=>Et.stop()),O.current.getTracks().forEach(Et=>O.current.removeTrack(Et));const ut=V==="front"?"user":"environment";(await navigator.mediaDevices.getUserMedia({video:{facingMode:ut},audio:!0})).getTracks().forEach(Et=>{O.current.addTrack(Et)}),e==="connected"&&(W.current.sender.replaceTrack(f?O.current.getVideoTracks()[0]:null),rt.current.sender.replaceTrack(y?O.current.getAudioTracks()[0]:null))})()},[V]),X.useEffect(()=>{e==="connected"&&r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"}))},[y]),X.useEffect(()=>{e==="connected"&&r.current.send(JSON.stringify({message:f?"videoOn":"videoOff"}))},[f]);const Z=yu(({down:ut,offset:[dt,Et],movement:[Tt],last:re})=>{if(!(Math.abs(Tt)<2)){if(ut)Q.current={x:dt,y:Et},Vt.start({x:dt,y:Et,immediate:!0});else if(re){L.current=!0;const Se=k==="mini"?window.innerWidth:x.current.clientWidth,ge=k==="mini"?window.innerHeight:x.current.clientHeight,fn=window.innerWidth,Be=fn>1400?.35*(.3*fn):.35*fn,Ke=Be,dn=16,_n=16,Ae=16,xn=128;let sn=0;dt>(Se-(Ae+_n)-Be)/2&&(sn=Se-(Ae+_n)-Be);let ze=Et;Et<0&&(ze=0),Et>ge-(dn+xn+Ke)&&(ze=ge-(dn+xn+Ke)),Q.current={x:sn,y:ze},Vt.start({x:sn,y:ze,immediate:!1,onRest:()=>{L.current=!1}})}}},{from:()=>[I.get(),Mt.get()]});X.useEffect(()=>{D.current.srcObject=b?i.current:null},[b]),X.useEffect(()=>{var ut;C.current.srcObject=f?O.current:null,(ut=W.current)==null||ut.sender.replaceTrack(f?O.current.getVideoTracks()[0]:null)},[f]),X.useEffect(()=>{var ut;(ut=rt.current)==null||ut.sender.replaceTrack(y?O.current.getAudioTracks()[0]:null)},[y]),X.useLayoutEffect(()=>{Vt.start({x:I.get(),y:Mt.get(),immediate:!0})}),X.useEffect(()=>{U.current=e,e==="connected"&&(r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"})),r.current.send(JSON.stringify({message:f?"videoOn":"videoOff"})))},[e]);const ct=ut=>{ut.state==="call"&&((U.current==="connected"||U.current==="calling")&&window.innerWidth<=1400?z("mini"):N())},mt=ut=>{ut.stopPropagation(),g(dt=>!dt)},Rt=ut=>{ut.stopPropagation(),m(dt=>!dt)},N=ut=>{ut&&ut.stopPropagation(),e==="connected"?o.current.send(JSON.stringify({type:"callEnd"})):o.current.send(JSON.stringify({type:"callCancel"})),u("hidden")},et=ut=>{ut.stopPropagation(),o.current.send(JSON.stringify({type:"callRequest"})),console.log("I am attempting a call!"),u("calling")},it=ut=>{ut.stopPropagation(),P(V==="front"?"back":"front")},at=()=>{L.current||K(ut=>!ut)},gt=(ut,dt)=>{ut.stopPropagation(),dt==="sending"?(console.log("The selected video was sending video!"),z(k==="expandSending"?"normal":"expandSending")):(console.log("The selected video was receiving video!"),z(k==="expandReceiving"?"normal":"expandReceiving"))};return S.jsxs(ms.div,{className:`
                ${se.videoCallContainer}
                ${k==="mini"?se.mini:""}
                ${k==="expandSending"||k==="expandReceiving"?se.expanded:""}
            `,onClick:at,ref:x,...k==="mini"?Z():{},style:k==="mini"?{x:I,y:Mt}:{},children:[S.jsxs(ms.div,{className:`
                    ${se.videoContainer}
                    ${se.receivingVideo}
                    ${k==="expandReceiving"?se.expanded:""}
                    ${k==="expandSending"?se.contracted:""}
                `,...k==="expandSending"?Z():{},style:k==="expandSending"?{x:I,y:Mt}:{},children:[S.jsx("video",{className:se.video,autoPlay:!0,ref:D,poster:"./pp.svg"}),!v&&S.jsx("button",{className:se.mutedButton,children:S.jsx("svg",{width:"0.75rem",height:"0.75rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:S.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),S.jsx("button",{className:se.expandButton,onClick:ut=>{gt(ut,"receiving")},children:S.jsxs("svg",{width:"0.75rem",height:"0.75rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M23 4C23 2.34315 21.6569 1 20 1H16C15.4477 1 15 1.44772 15 2C15 2.55228 15.4477 3 16 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 21.4477 9 22 9C22.5523 9 23 8.55228 23 8V4Z"}),S.jsx("path",{d:"M23 16C23 15.4477 22.5523 15 22 15C21.4477 15 21 15.4477 21 16V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23H20C21.6569 23 23 21.6569 23 20V16Z"}),S.jsx("path",{d:"M4 21H8C8.55228 21 9 21.4477 9 22C9 22.5523 8.55228 23 8 23H4C2.34315 23 1 21.6569 1 20V16C1 15.4477 1.44772 15 2 15C2.55228 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21Z"}),S.jsx("path",{d:"M1 8C1 8.55228 1.44772 9 2 9C2.55228 9 3 8.55228 3 8L3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1H4C2.34315 1 1 2.34315 1 4V8Z"})]})})]}),k!=="mini"&&S.jsxs(S.Fragment,{children:[S.jsxs(ms.div,{className:`
                            ${se.videoContainer} 
                            ${se.sendingVideo}
                            ${k==="expandSending"?se.expanded:""}
                            ${k==="expandReceiving"?se.contracted:""}
                            `,...k==="expandReceiving"?Z():{},style:k==="expandReceiving"?{x:I,y:Mt}:{},children:[S.jsx("video",{className:se.video,autoPlay:!0,poster:"./pp.svg",ref:C,muted:!0}),!y&&S.jsx("button",{className:se.mutedButton,children:S.jsx("svg",{width:"0.75rem",height:"0.75rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:S.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),S.jsx("button",{className:se.expandButton,onClick:ut=>{gt(ut,"sending")},children:S.jsxs("svg",{width:"0.75rem",height:"0.75rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M23 4C23 2.34315 21.6569 1 20 1H16C15.4477 1 15 1.44772 15 2C15 2.55228 15.4477 3 16 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 21.4477 9 22 9C22.5523 9 23 8.55228 23 8V4Z"}),S.jsx("path",{d:"M23 16C23 15.4477 22.5523 15 22 15C21.4477 15 21 15.4477 21 16V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23H20C21.6569 23 23 21.6569 23 20V16Z"}),S.jsx("path",{d:"M4 21H8C8.55228 21 9 21.4477 9 22C9 22.5523 8.55228 23 8 23H4C2.34315 23 1 21.6569 1 20V16C1 15.4477 1.44772 15 2 15C2.55228 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21Z"}),S.jsx("path",{d:"M1 8C1 8.55228 1.44772 9 2 9C2.55228 9 3 8.55228 3 8L3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1H4C2.34315 1 1 2.34315 1 4V8Z"})]})})]}),S.jsxs("ul",{className:`${se.actionList} ${F?se.shown:se.hidden}`,children:[S.jsx("li",{onClick:ut=>{mt(ut)},children:y?S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:S.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:S.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),S.jsx("li",{onClick:ut=>{Rt(ut)},children:f?S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):S.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),S.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),S.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),S.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),S.jsx("li",{onClick:ut=>it(ut),children:S.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),S.jsx("path",{className:se.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),e==="calling"||e==="connected"?S.jsx("li",{className:se.endCall,onClick:ut=>{N(ut)},children:S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})}):S.jsx("li",{className:se.startCall,onClick:ut=>{et(ut)},children:S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})})})]}),e==="idle"&&S.jsx("button",{onClick:()=>{u("hidden")},className:`${se.cancelButton} ${F?se.shown:se.hidden}`,children:S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})})]}),e==="calling"&&S.jsx("div",{className:se.callingIndicatorContainer,children:S.jsx("span",{className:se.callingIndicator,children:"Calling"})})]})}const HC="_videoCallContainer_1f00c_1",GC="_videoContainer_1f00c_13",FC="_image_1f00c_18",QC="_sendingImage_1f00c_25",YC="_receivingImage_1f00c_29",KC="_startCallButton_1f00c_40",Zs={videoCallContainer:HC,videoContainer:GC,image:FC,sendingImage:QC,receivingImage:YC,startCallButton:KC};function $C(){const e=we.c(7),t=It(XC);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx("div",{className:Zs.videoContainer,children:S.jsx("img",{className:`${Zs.image} ${Zs.receivingImage}`,src:"./pp.svg",alt:"Profile picture of receiver"})}),e[0]=i):i=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=S.jsx("div",{className:Zs.videoContainer,children:S.jsx("img",{className:`${Zs.image} ${Zs.sendingImage}`,src:"./pp.svg",alt:"Profile picture of sender"})}),e[1]=r):r=e[1];let o;e[2]!==t?(o=()=>{t("idle")},e[2]=t,e[3]=o):o=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsx("svg",{width:"2rem",height:"2rem",viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{fill:"#EEEEEE",d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})}),e[4]=u):u=e[4];let f;return e[5]!==o?(f=S.jsxs("div",{className:Zs.videoCallContainer,children:[i,r,S.jsx("button",{className:Zs.startCallButton,onClick:o,children:u})]}),e[5]=o,e[6]=f):f=e[6],f}function XC(e){return e.setVideoCall}const ZC="_settingsContainer_6ny24_1",JC="_settingsPage_6ny24_15",WC="_visible_6ny24_19",tR="_dragger_6ny24_25",eh={settingsContainer:ZC,settingsPage:JC,visible:WC,dragger:tR},eR="_listItem_vqbls_1",nR="_themeOption_vqbls_20",iR="_themes_vqbls_20",sR="_selected_vqbls_27",Mi={listItem:eR,themeOption:nR,themes:iR,selected:sR};function rR(){const e=we.c(26);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=localStorage.getItem("theme"),e[0]=t):t=e[0];const[i,r]=X.useState(t);let o,u;e[1]!==i?(o=()=>{localStorage.setItem("theme",i),document.body.className=i==="default"?"":i},u=[i],e[1]=i,e[2]=o,e[3]=u):(o=e[2],u=e[3]),X.useEffect(o,u);let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=()=>r("default"),e[4]=f):f=e[4];const m=i==="default"?Mi.selected:"";let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M21 16V7.2C21 6.0799 21 5.51984 20.782 5.09202C20.5903 4.71569 20.2843 4.40973 19.908 4.21799C19.4802 4 18.9201 4 17.8 4H6.2C5.07989 4 4.51984 4 4.09202 4.21799C3.71569 4.40973 3.40973 4.71569 3.21799 5.09202C3 5.51984 3 6.0799 3 7.2V16M4.66667 20H19.3333C19.9533 20 20.2633 20 20.5176 19.9319C21.2078 19.7469 21.7469 19.2078 21.9319 18.5176C22 18.2633 22 17.9533 22 17.3333C22 17.0233 22 16.8683 21.9659 16.7412C21.8735 16.3961 21.6039 16.1265 21.2588 16.0341C21.1317 16 20.9767 16 20.6667 16H3.33333C3.02334 16 2.86835 16 2.74118 16.0341C2.39609 16.1265 2.12654 16.3961 2.03407 16.7412C2 16.8683 2 17.0233 2 17.3333C2 17.9533 2 18.2633 2.06815 18.5176C2.25308 19.2078 2.79218 19.7469 3.48236 19.9319C3.73669 20 4.04669 20 4.66667 20Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e[5]=y):y=e[5];let g;e[6]!==m?(g=S.jsx("li",{children:S.jsx("button",{onClick:f,className:m,children:y})}),e[6]=m,e[7]=g):g=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=()=>r("light"),e[8]=v):v=e[8];const T=i==="light"?Mi.selected:"";let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=S.jsxs("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M15 12C15 13.6569 13.6569 15 12 15C10.3432 15 9.00004 13.6569 9.00004 12C9.00004 10.3432 10.3432 9.00004 12 9.00004C13.6569 9.00004 15 10.3432 15 12Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M7.64338 5.18899L7.56701 6.10541C7.52707 6.58478 7.50709 6.82447 7.40373 7.01167C7.31261 7.1767 7.1767 7.31261 7.01167 7.40373C6.82447 7.50709 6.58477 7.52707 6.10541 7.56701L5.18898 7.64338C4.16259 7.72892 3.6494 7.77168 3.39642 8.00615C3.17627 8.21018 3.05941 8.50232 3.07812 8.8019C3.09961 9.14615 3.44174 9.53105 4.126 10.3008L4.69153 10.9371C5.02586 11.3132 5.19302 11.5012 5.2565 11.7135C5.31243 11.9004 5.31243 12.0997 5.2565 12.2866C5.19302 12.4988 5.02586 12.6869 4.69153 13.063L4.126 13.6992C3.44174 14.469 3.09961 14.8539 3.07812 15.1982C3.05941 15.4978 3.17627 15.7899 3.39642 15.9939C3.6494 16.2284 4.16259 16.2712 5.18899 16.3567L6.10541 16.4331C6.58478 16.473 6.82446 16.493 7.01167 16.5964C7.1767 16.6875 7.31261 16.8234 7.40373 16.9884C7.50709 17.1756 7.52707 17.4153 7.56701 17.8947L7.64338 18.8111C7.72892 19.8375 7.77168 20.3507 8.00615 20.6037C8.21018 20.8238 8.50232 20.9407 8.8019 20.922C9.14615 20.9005 9.53105 20.5583 10.3008 19.8741L10.9371 19.3085C11.3132 18.9742 11.5012 18.8071 11.7135 18.7436C11.9004 18.6876 12.0997 18.6876 12.2866 18.7436C12.4988 18.8071 12.6869 18.9742 13.063 19.3085L13.6992 19.8741C14.469 20.5583 14.8539 20.9005 15.1982 20.922C15.4978 20.9407 15.7899 20.8238 15.9939 20.6037C16.2284 20.3507 16.2712 19.8375 16.3567 18.8111L16.4331 17.8947C16.473 17.4153 16.493 17.1756 16.5964 16.9884C16.6875 16.8234 16.8234 16.6875 16.9884 16.5964C17.1756 16.493 17.4153 16.473 17.8947 16.4331L18.8111 16.3567C19.8375 16.2712 20.3507 16.2284 20.6037 15.9939C20.8238 15.7899 20.9407 15.4978 20.922 15.1982C20.9005 14.8539 20.5583 14.469 19.8741 13.6992L19.3085 13.063C18.9742 12.6869 18.8071 12.4988 18.7436 12.2866C18.6876 12.0997 18.6876 11.9004 18.7436 11.7135C18.8071 11.5012 18.9742 11.3132 19.3085 10.9371L19.8741 10.3008C20.5583 9.53105 20.9005 9.14615 20.922 8.8019C20.9407 8.50232 20.8238 8.21018 20.6037 8.00615C20.3507 7.77168 19.8375 7.72892 18.8111 7.64338L17.8947 7.56701C17.4153 7.52707 17.1756 7.50709 16.9884 7.40373C16.8234 7.31261 16.6875 7.1767 16.5964 7.01167C16.493 6.82446 16.473 6.58478 16.4331 6.10541L16.3567 5.18898C16.2712 4.16259 16.2284 3.6494 15.9939 3.39642C15.7899 3.17627 15.4978 3.05941 15.1982 3.07812C14.8539 3.09961 14.469 3.44174 13.6992 4.126L13.063 4.69153C12.6869 5.02586 12.4988 5.19302 12.2866 5.2565C12.0997 5.31243 11.9004 5.31243 11.7135 5.2565C11.5012 5.19302 11.3132 5.02586 10.9371 4.69153L10.3008 4.126C9.53105 3.44174 9.14615 3.09961 8.8019 3.07812C8.50232 3.05941 8.21018 3.17627 8.00615 3.39642C7.77168 3.6494 7.72892 4.16259 7.64338 5.18899Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e[9]=b):b=e[9];let R;e[10]!==T?(R=S.jsx("li",{children:S.jsx("button",{onClick:v,className:T,children:b})}),e[10]=T,e[11]=R):R=e[11];let V;e[12]===Symbol.for("react.memo_cache_sentinel")?(V=()=>r("dark"),e[12]=V):V=e[12];const P=i==="dark"?Mi.selected:"";let k;e[13]===Symbol.for("react.memo_cache_sentinel")?(k=S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 11.5373 21.3065 11.4608 21.0672 11.8568C19.9289 13.7406 17.8615 15 15.5 15C11.9101 15 9 12.0899 9 8.5C9 6.13845 10.2594 4.07105 12.1432 2.93276C12.5392 2.69347 12.4627 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"var(--icon-color)"})}),e[13]=k):k=e[13];let z;e[14]!==P?(z=S.jsx("li",{children:S.jsx("button",{onClick:V,className:P,children:k})}),e[14]=P,e[15]=z):z=e[15];let F;e[16]!==R||e[17]!==z||e[18]!==g?(F=S.jsxs("li",{className:`${Mi.themeOption} ${Mi.listItem}`,children:["Theme",S.jsxs("ul",{className:Mi.themes,children:[g,R,z]})]}),e[16]=R,e[17]=z,e[18]=g,e[19]=F):F=e[19];let K;e[20]===Symbol.for("react.memo_cache_sentinel")?(K=S.jsxs("li",{className:Mi.listItem,children:["Disconnect from user",S.jsx("button",{children:S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z",fill:"var(--icon-color)"})})})]}),e[20]=K):K=e[20];let rt;e[21]===Symbol.for("react.memo_cache_sentinel")?(rt=S.jsxs("li",{className:Mi.listItem,children:["Connect to next user",S.jsx("button",{children:S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 -2 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:S.jsx("g",{transform:"translate(-144.000000, -3805.000000)",fill:"var(--icon-color)",children:S.jsx("g",{transform:"translate(56.000000, 160.000000)",children:S.jsx("path",{d:"M99.684,3649.69353 L95.207,3652.82453 C94.571,3653.25353 94,3652.84553 94,3652.13153 L94,3650.14053 L89.78,3652.82453 C89.145,3653.25353 88,3652.84553 88,3652.13153 L88,3645.86853 C88,3645.15453 89.145,3644.74653 89.78,3645.17453 L94,3647.85953 L94,3645.86853 C94,3645.15453 94.571,3644.74653 95.207,3645.17453 L99.516,3648.30653 C100.03,3648.65353 100.198,3649.34653 99.684,3649.69353"})})})})})})]}),e[21]=rt):rt=e[21];let W;e[22]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsxs("li",{className:Mi.listItem,children:["Download web app",S.jsx("button",{children:S.jsx("svg",{fill:"var(--icon-color)",width:"1.2rem",height:"1.2rem",viewBox:"0 0 56 56",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M 43.3749 20.7812 C 47.8048 20.7812 51.4844 17.1016 51.4844 12.6485 C 51.4844 8.1953 47.8283 4.5156 43.3749 4.5156 C 38.8984 4.5156 35.2421 8.1953 35.2421 12.6485 C 35.2421 17.1016 38.8984 20.7812 43.3749 20.7812 Z M 17.0312 51.4844 L 34.6796 51.4844 C 38.6640 51.4844 42.0390 51.1094 44.4296 48.7187 C 46.8203 46.3281 47.1716 43.0000 47.1716 38.9922 L 47.1716 23.2890 C 45.9765 23.7344 44.6874 23.9687 43.3749 23.9687 C 37.1405 23.9687 32.0312 18.8594 32.0312 12.6485 C 32.0312 11.3125 32.2656 10.0234 32.7109 8.8516 L 16.9609 8.8516 C 13.0234 8.8516 9.6484 9.2266 7.2578 11.6172 C 4.8671 14.0078 4.5156 17.3594 4.5156 21.2734 L 4.5156 38.9922 C 4.5156 43.0000 4.8671 46.3281 7.2578 48.7187 C 9.6484 51.1094 13.0234 51.4844 17.0312 51.4844 Z"})})})]}),e[22]=W):W=e[22];let Q;e[23]===Symbol.for("react.memo_cache_sentinel")?(Q=S.jsxs("li",{className:Mi.listItem,children:["Report for abuse",S.jsx("button",{children:S.jsx("svg",{fill:"var(--icon-color)",width:"1.2rem",height:"1.2rem",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M6.002 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm.195-12.01a1.81 1.81 0 1 1 3.602 0l-.701 7.015a1.105 1.105 0 0 1-2.2 0l-.7-7.015z"})})})]}),e[23]=Q):Q=e[23];let D;return e[24]!==F?(D=S.jsxs(S.Fragment,{children:[F,K,rt,W,Q]}),e[24]=F,e[25]=D):D=e[25],D}function aR(){const t=It(T=>T.settings),i=It(T=>T.setSettings),r=X.useRef(null),o=X.useRef(null),[{y:u},f]=ea(()=>({y:0}));X.useEffect(()=>(window.history.pushState("settings",""),window.addEventListener("popstate",y),()=>{window.removeEventListener("popstate",y)}),[]),X.useEffect(()=>{t&&f.start({from:{y:r.current.clientHeight},to:{y:0},immediate:!1})},[t]);const m=yu(({movement:[,T],last:b})=>{Math.abs(T)<2&&!b||(b?T>160?g():f.start({y:0,immediate:!1}):T>0&&f.start({y:T,immediate:!0}))}),y=T=>{T.state==="settings"&&i(!1)},g=()=>{f.start({y:r.current.clientHeight,immediate:!1,onRest:()=>{i(!1)}})},v=T=>{T.target===o.current&&g()};return S.jsx("div",{ref:o,onClick:v,className:`${eh.settingsPage} ${t?eh.visible:""}`,children:S.jsxs(ms.ul,{className:eh.settingsContainer,...m(),style:{y:u},ref:r,children:[S.jsx("li",{className:eh.dragger,children:S.jsx("span",{})}),S.jsx(rR,{})]})})}function oR(){const e=we.c(27);console.log("Chat Page rendered!");const{longPressed:t}=X.useContext(ii);It(gR);const i=It(mR),r=It(dR),o=It(fR),u=It(hR),f=It(cR),m=It(uR),y=It(lR);let g;e[0]!==t||e[1]!==m||e[2]!==y?(g=()=>{const Q=()=>{t.current===!1&&(m(!1),y(!1))};return document.addEventListener("click",Q),()=>{document.removeEventListener("click",Q)}},e[0]=t,e[1]=m,e[2]=y,e[3]=g):g=e[3];let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[4]=v):v=e[4],X.useLayoutEffect(g,v);let T;e[5]!==u?(T=S.jsx("div",{className:Zc.videoContainer,children:u!=="hidden"?S.jsx(qC,{callState:u}):S.jsx($C,{})}),e[5]=u,e[6]=T):T=e[6];let b,R,V;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=S.jsx(OS,{}),R=S.jsx(wA,{}),V=S.jsx(lC,{}),e[7]=b,e[8]=R,e[9]=V):(b=e[7],R=e[8],V=e[9]);let P;e[10]!==i?(P=i&&S.jsx(SS,{}),e[10]=i,e[11]=P):P=e[11];let k;e[12]!==r?(k=r&&S.jsx(_S,{}),e[12]=r,e[13]=k):k=e[13];let z;e[14]!==o?(z=o&&S.jsx(xS,{imageSource:o.src,imageSent:o.sent}),e[14]=o,e[15]=z):z=e[15];let F;e[16]!==f?(F=f&&S.jsx(vC,{}),e[16]=f,e[17]=F):F=e[17];let K;e[18]!==P||e[19]!==k||e[20]!==z||e[21]!==F?(K=S.jsxs("div",{className:Zc.chatContainer,children:[b,R,V,P,k,z,F]}),e[18]=P,e[19]=k,e[20]=z,e[21]=F,e[22]=K):K=e[22];let rt;e[23]===Symbol.for("react.memo_cache_sentinel")?(rt=S.jsx("div",{className:Zc.settingsContainer,children:S.jsx(aR,{})}),e[23]=rt):rt=e[23];let W;return e[24]!==K||e[25]!==T?(W=S.jsxs("div",{className:Zc.chatPage,children:[T,K,rt]}),e[24]=K,e[25]=T,e[26]=W):W=e[26],W}function lR(e){return e.setReactionsShown}function uR(e){return e.setActionsShown}function cR(e){return e.incomingCall}function hR(e){return e.videoCall}function fR(e){return e.imageDialog}function dR(e){return e.actionsShown}function mR(e){return e.reactionsShown}function gR(e){return e.replying}function pR(){const e=we.c(5),{connected:t,peerConnection:i}=X.useContext(Rn);let r;e[0]!==i.current?(r=()=>{const f=_R;return document.addEventListener("contextmenu",f),document.addEventListener("touchstart",yR,{passive:!1}),()=>{var m;document.removeEventListener("contextmenu",f),document.removeEventListener("touchstart",f),(m=i.current)==null||m.close()}},e[0]=i.current,e[1]=r):r=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[2]=o):o=e[2],X.useEffect(r,o);let u;return e[3]!==t?(u=S.jsx(L7,{children:t?S.jsx(G7,{children:S.jsx(oR,{})}):S.jsx(cS,{})}),e[3]=t,e[4]=u):u=e[4],u}function yR(e){e.touches.length>1&&e.preventDefault()}function _R(e){return e.preventDefault()}X6.createRoot(document.getElementById("root")).render(S.jsx(t5,{children:S.jsx(X.StrictMode,{children:S.jsx(pR,{})})}));
