(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function z6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o1={exports:{}},Nl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function q6(){if(S2)return Nl;S2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:e,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Nl.Fragment=t,Nl.jsx=i,Nl.jsxs=i,Nl}var C2;function H6(){return C2||(C2=1,o1.exports=q6()),o1.exports}var S=H6(),l1={exports:{}},Ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function G6(){if(A2)return Ot;A2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,U={};function N(O,nt,st){this.props=O,this.context=nt,this.refs=U,this.updater=st||R}N.prototype.isReactComponent={},N.prototype.setState=function(O,nt){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,nt,"setState")},N.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=N.prototype;function F(O,nt,st){this.props=O,this.context=nt,this.refs=U,this.updater=st||R}var K=F.prototype=new H;K.constructor=F,M(K,N.prototype),K.isPureReactComponent=!0;var tt=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function D(O,nt,st,at,gt,ct){return st=ct.ref,{$$typeof:e,type:O,key:nt,ref:st!==void 0?st:null,props:ct}}function A(O,nt){return D(O.type,nt,void 0,void 0,void 0,O.props)}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function k(O){var nt={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(st){return nt[st]})}var L=/\/+/g;function P(O,nt){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):nt.toString(36)}function I(){}function Dt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(I,I):(O.status="pending",O.then(function(nt){O.status==="pending"&&(O.status="fulfilled",O.value=nt)},function(nt){O.status==="pending"&&(O.status="rejected",O.reason=nt)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Mt(O,nt,st,at,gt){var ct=typeof O;(ct==="undefined"||ct==="boolean")&&(O=null);var dt=!1;if(O===null)dt=!0;else switch(ct){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(O.$$typeof){case e:case t:dt=!0;break;case _:return dt=O._init,Mt(dt(O._payload),nt,st,at,gt)}}if(dt)return gt=gt(O),dt=at===""?"."+P(O,0):at,tt(gt)?(st="",dt!=null&&(st=dt.replace(L,"$&/")+"/"),Mt(gt,nt,st,"",function(ae){return ae})):gt!=null&&(x(gt)&&(gt=A(gt,st+(gt.key==null||O&&O.key===gt.key?"":(""+gt.key).replace(L,"$&/")+"/")+dt)),nt.push(gt)),1;dt=0;var _t=at===""?".":at+":";if(tt(O))for(var Vt=0;Vt<O.length;Vt++)at=O[Vt],ct=_t+P(at,Vt),dt+=Mt(at,nt,st,ct,gt);else if(Vt=w(O),typeof Vt=="function")for(O=Vt.call(O),Vt=0;!(at=O.next()).done;)at=at.value,ct=_t+P(at,Vt++),dt+=Mt(at,nt,st,ct,gt);else if(ct==="object"){if(typeof O.then=="function")return Mt(Dt(O),nt,st,at,gt);throw nt=String(O),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return dt}function Z(O,nt,st){if(O==null)return O;var at=[],gt=0;return Mt(O,at,"","",function(ct){return nt.call(st,ct,gt++)}),at}function ut(O){if(O._status===-1){var nt=O._result;nt=nt(),nt.then(function(st){(O._status===0||O._status===-1)&&(O._status=1,O._result=st)},function(st){(O._status===0||O._status===-1)&&(O._status=2,O._result=st)}),O._status===-1&&(O._status=0,O._result=nt)}if(O._status===1)return O._result.default;throw O._result}var mt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function At(){}return Ot.Children={map:Z,forEach:function(O,nt,st){Z(O,function(){nt.apply(this,arguments)},st)},count:function(O){var nt=0;return Z(O,function(){nt++}),nt},toArray:function(O){return Z(O,function(nt){return nt})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ot.Component=N,Ot.Fragment=i,Ot.Profiler=o,Ot.PureComponent=F,Ot.StrictMode=r,Ot.Suspense=y,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(O){return W.H.useMemoCache(O)}},Ot.cache=function(O){return function(){return O.apply(null,arguments)}},Ot.cloneElement=function(O,nt,st){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var at=M({},O.props),gt=O.key,ct=void 0;if(nt!=null)for(dt in nt.ref!==void 0&&(ct=void 0),nt.key!==void 0&&(gt=""+nt.key),nt)!Q.call(nt,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&nt.ref===void 0||(at[dt]=nt[dt]);var dt=arguments.length-2;if(dt===1)at.children=st;else if(1<dt){for(var _t=Array(dt),Vt=0;Vt<dt;Vt++)_t[Vt]=arguments[Vt+2];at.children=_t}return D(O.type,gt,void 0,void 0,ct,at)},Ot.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ot.createElement=function(O,nt,st){var at,gt={},ct=null;if(nt!=null)for(at in nt.key!==void 0&&(ct=""+nt.key),nt)Q.call(nt,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(gt[at]=nt[at]);var dt=arguments.length-2;if(dt===1)gt.children=st;else if(1<dt){for(var _t=Array(dt),Vt=0;Vt<dt;Vt++)_t[Vt]=arguments[Vt+2];gt.children=_t}if(O&&O.defaultProps)for(at in dt=O.defaultProps,dt)gt[at]===void 0&&(gt[at]=dt[at]);return D(O,ct,void 0,void 0,null,gt)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(O){return{$$typeof:m,render:O}},Ot.isValidElement=x,Ot.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:ut}},Ot.memo=function(O,nt){return{$$typeof:g,type:O,compare:nt===void 0?null:nt}},Ot.startTransition=function(O){var nt=W.T,st={};W.T=st;try{var at=O(),gt=W.S;gt!==null&&gt(st,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(At,mt)}catch(ct){mt(ct)}finally{W.T=nt}},Ot.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ot.use=function(O){return W.H.use(O)},Ot.useActionState=function(O,nt,st){return W.H.useActionState(O,nt,st)},Ot.useCallback=function(O,nt){return W.H.useCallback(O,nt)},Ot.useContext=function(O){return W.H.useContext(O)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(O,nt){return W.H.useDeferredValue(O,nt)},Ot.useEffect=function(O,nt,st){var at=W.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(O,nt)},Ot.useId=function(){return W.H.useId()},Ot.useImperativeHandle=function(O,nt,st){return W.H.useImperativeHandle(O,nt,st)},Ot.useInsertionEffect=function(O,nt){return W.H.useInsertionEffect(O,nt)},Ot.useLayoutEffect=function(O,nt){return W.H.useLayoutEffect(O,nt)},Ot.useMemo=function(O,nt){return W.H.useMemo(O,nt)},Ot.useOptimistic=function(O,nt){return W.H.useOptimistic(O,nt)},Ot.useReducer=function(O,nt,st){return W.H.useReducer(O,nt,st)},Ot.useRef=function(O){return W.H.useRef(O)},Ot.useState=function(O){return W.H.useState(O)},Ot.useSyncExternalStore=function(O,nt,st){return W.H.useSyncExternalStore(O,nt,st)},Ot.useTransition=function(){return W.H.useTransition()},Ot.version="19.1.0",Ot}var R2;function Nh(){return R2||(R2=1,l1.exports=G6()),l1.exports}var X=Nh();const Jr=z6(X);var u1={exports:{}},Ol={},c1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function F6(){return x2||(x2=1,function(e){function t(Z,ut){var mt=Z.length;Z.push(ut);t:for(;0<mt;){var At=mt-1>>>1,O=Z[At];if(0<o(O,ut))Z[At]=ut,Z[mt]=O,mt=At;else break t}}function i(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ut=Z[0],mt=Z.pop();if(mt!==ut){Z[0]=mt;t:for(var At=0,O=Z.length,nt=O>>>1;At<nt;){var st=2*(At+1)-1,at=Z[st],gt=st+1,ct=Z[gt];if(0>o(at,mt))gt<O&&0>o(ct,at)?(Z[At]=ct,Z[gt]=mt,At=gt):(Z[At]=at,Z[st]=mt,At=st);else if(gt<O&&0>o(ct,mt))Z[At]=ct,Z[gt]=mt,At=gt;else break t}}return ut}function o(Z,ut){var mt=Z.sortIndex-ut.sortIndex;return mt!==0?mt:Z.id-ut.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();e.unstable_now=function(){return f.now()-m}}var y=[],g=[],_=1,T=null,w=3,R=!1,M=!1,U=!1,N=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function tt(Z){for(var ut=i(g);ut!==null;){if(ut.callback===null)r(g);else if(ut.startTime<=Z)r(g),ut.sortIndex=ut.expirationTime,t(y,ut);else break;ut=i(g)}}function W(Z){if(U=!1,tt(Z),!M)if(i(y)!==null)M=!0,Q||(Q=!0,P());else{var ut=i(g);ut!==null&&Mt(W,ut.startTime-Z)}}var Q=!1,D=-1,A=5,x=-1;function k(){return N?!0:!(e.unstable_now()-x<A)}function L(){if(N=!1,Q){var Z=e.unstable_now();x=Z;var ut=!0;try{t:{M=!1,U&&(U=!1,F(D),D=-1),R=!0;var mt=w;try{e:{for(tt(Z),T=i(y);T!==null&&!(T.expirationTime>Z&&k());){var At=T.callback;if(typeof At=="function"){T.callback=null,w=T.priorityLevel;var O=At(T.expirationTime<=Z);if(Z=e.unstable_now(),typeof O=="function"){T.callback=O,tt(Z),ut=!0;break e}T===i(y)&&r(y),tt(Z)}else r(y);T=i(y)}if(T!==null)ut=!0;else{var nt=i(g);nt!==null&&Mt(W,nt.startTime-Z),ut=!1}}break t}finally{T=null,w=mt,R=!1}ut=void 0}}finally{ut?P():Q=!1}}}var P;if(typeof K=="function")P=function(){K(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Dt=I.port2;I.port1.onmessage=L,P=function(){Dt.postMessage(null)}}else P=function(){H(L,0)};function Mt(Z,ut){D=H(function(){Z(e.unstable_now())},ut)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(Z){switch(w){case 1:case 2:case 3:var ut=3;break;default:ut=w}var mt=w;w=ut;try{return Z()}finally{w=mt}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(Z,ut){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var mt=w;w=Z;try{return ut()}finally{w=mt}},e.unstable_scheduleCallback=function(Z,ut,mt){var At=e.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?At+mt:At):mt=At,Z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=mt+O,Z={id:_++,callback:ut,priorityLevel:Z,startTime:mt,expirationTime:O,sortIndex:-1},mt>At?(Z.sortIndex=mt,t(g,Z),i(y)===null&&Z===i(g)&&(U?(F(D),D=-1):U=!0,Mt(W,mt-At))):(Z.sortIndex=O,t(y,Z),M||R||(M=!0,Q||(Q=!0,P()))),Z},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(Z){var ut=w;return function(){var mt=w;w=ut;try{return Z.apply(this,arguments)}finally{w=mt}}}}(h1)),h1}var I2;function Q6(){return I2||(I2=1,c1.exports=F6()),c1.exports}var f1={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function Y6(){if(D2)return on;D2=1;var e=Nh();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:y,containerInfo:g,implementation:_}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(y,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,_)},on.flushSync=function(y){var g=f.T,_=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=_,r.d.f()}},on.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},on.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},on.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var _=g.as,T=m(_,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:R}):_==="script"&&r.d.X(y,{crossOrigin:T,integrity:w,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},on.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=m(_,g.crossOrigin);r.d.L(y,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(y,g){if(typeof y=="string")if(g){var _=m(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},on.requestFormReset=function(y){r.d.r(y)},on.unstable_batchedUpdates=function(y,g){return y(g)},on.useFormState=function(y,g,_){return f.H.useFormState(y,g,_)},on.useFormStatus=function(){return f.H.useHostTransitionStatus()},on.version="19.1.0",on}var M2;function D_(){if(M2)return f1.exports;M2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),f1.exports=Y6(),f1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function K6(){if(V2)return Ol;V2=1;var e=Q6(),t=Nh(),i=D_();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function f(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(r(188))}function y(n){var s=n.alternate;if(!s){if(s=u(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),n;if(d===l)return m(h),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,b=h.child;b;){if(b===a){E=!0,a=h,l=d;break}if(b===l){E=!0,l=h,a=d;break}b=b.sibling}if(!E){for(b=d.child;b;){if(b===a){E=!0,a=d,l=h;break}if(b===l){E=!0,l=d,a=h;break}b=b.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),K=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=L&&n[L]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function Dt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case N:return"Profiler";case U:return"StrictMode";case W:return"Suspense";case Q:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case K:return(n.displayName||"Context")+".Provider";case F:return(n._context.displayName||"Context")+".Consumer";case tt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:Dt(n.type)||"Memo";case A:s=n._payload,n=n._init;try{return Dt(n(s))}catch{}}return null}var Mt=Array.isArray,Z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},At=[],O=-1;function nt(n){return{current:n}}function st(n){0>O||(n.current=At[O],At[O]=null,O--)}function at(n,s){O++,At[O]=n.current,n.current=s}var gt=nt(null),ct=nt(null),dt=nt(null),_t=nt(null);function Vt(n,s){switch(at(dt,s),at(ct,n),at(gt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?J0(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=J0(s),n=W0(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}st(gt),at(gt,n)}function ae(){st(gt),st(ct),st(dt)}function Ee(n){n.memoizedState!==null&&at(_t,n);var s=gt.current,a=W0(s,n.type);s!==a&&(at(ct,n),at(gt,a))}function sn(n){ct.current===n&&(st(gt),st(ct)),_t.current===n&&(st(_t),xl._currentValue=mt)}var rn=Object.prototype.hasOwnProperty,hn=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,fn=e.unstable_shouldYield,yn=e.unstable_requestPaint,Ve=e.unstable_now,ni=e.unstable_getCurrentPriorityLevel,_n=e.unstable_ImmediatePriority,ze=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,pr=e.unstable_LowPriority,ii=e.unstable_IdlePriority,Un=e.log,si=e.unstable_setDisableYieldValue,Jt=null,qt=null;function le(n){if(typeof Un=="function"&&si(n),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Jt,n)}catch{}}var ue=Math.clz32?Math.clz32:yr,zi=Math.log,Ro=Math.LN2;function yr(n){return n>>>=0,n===0?32:31-(zi(n)/Ro|0)|0}var _r=256,vr=4194304;function ri(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function oa(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var h=0,d=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=ri(l):(E&=b,E!==0?h=ri(E):a||(a=b&~n,a!==0&&(h=ri(a))))):(b=l&~d,b!==0?h=ri(b):E!==0?h=ri(E):a||(a=l&~n,a!==0&&(h=ri(a)))),h===0?0:s!==0&&s!==h&&(s&d)===0&&(d=h&-h,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:h}function Er(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function xo(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Io(){var n=_r;return _r<<=1,(_r&4194048)===0&&(_r=256),n}function Do(){var n=vr;return vr<<=1,(vr&62914560)===0&&(vr=4194304),n}function qi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Hi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Mo(n,s,a,l,h,d){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,V=n.expirationTimes,G=n.hiddenUpdates;for(a=E&~a;0<a;){var et=31-ue(a),rt=1<<et;b[et]=0,V[et]=-1;var Y=G[et];if(Y!==null)for(G[et]=null,et=0;et<Y.length;et++){var $=Y[et];$!==null&&($.lane&=-536870913)}a&=~rt}l!==0&&gi(n,l,0),d!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=d&~(E&~s))}function gi(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-ue(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Vo(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-ue(a),h=1<<l;h&s|n[l]&s&&(n[l]|=s),a&=~h}}function Ts(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function la(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ws(){var n=ut.p;return n!==0?n:(n=window.event,n===void 0?32:_2(n.type))}function Cu(n,s){var a=ut.p;try{return ut.p=n,s()}finally{ut.p=a}}var fe=Math.random().toString(36).slice(2),Ne="__reactFiber$"+fe,Ae="__reactProps$"+fe,Bn="__reactContainer$"+fe,No="__reactEvents$"+fe,cf="__reactListeners$"+fe,bs="__reactHandles$"+fe,Au="__reactResources$"+fe,Tr="__reactMarker$"+fe;function Ss(n){delete n[Ne],delete n[Ae],delete n[No],delete n[cf],delete n[bs]}function Gi(n){var s=n[Ne];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Bn]||a[Ne]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=i2(n);n!==null;){if(a=n[Ne])return a;n=i2(n)}return s}n=a,a=n.parentNode}return null}function pi(n){if(n=n[Ne]||n[Bn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function yi(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function dn(n){var s=n[Au];return s||(s=n[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Te(n){n[Tr]=!0}var Oo=new Set,ua={};function ai(n,s){Fi(n,s),Fi(n+"Capture",s)}function Fi(n,s){for(ua[n]=s,n=0;n<s.length;n++)Oo.add(s[n])}var Ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xu={},wr={};function Iu(n){return rn.call(wr,n)?!0:rn.call(xu,n)?!1:Ru.test(n)?wr[n]=!0:(xu[n]=!0,!1)}function Cs(n,s,a){if(Iu(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function _i(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function $e(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}var br,Du;function Qi(n){if(br===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);br=s&&s[1]||"",Du=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+br+n+Du}var ca=!1;function ha(n,s){if(!n||ca)return"";ca=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch($){var Y=$}Reflect.construct(n,[],rt)}else{try{rt.call()}catch($){Y=$}n.call(rt.prototype)}}else{try{throw Error()}catch($){Y=$}(rt=n())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch($){if($&&Y&&typeof $.stack=="string")return[$.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],b=d[1];if(E&&b){var V=E.split(`
`),G=b.split(`
`);for(h=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===V.length||h===G.length)for(l=V.length-1,h=G.length-1;1<=l&&0<=h&&V[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(V[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||V[l]!==G[h]){var et=`
`+V[l].replace(" at new "," at ");return n.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",n.displayName)),et}while(1<=l&&0<=h);break}}}finally{ca=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Qi(a):""}function Lo(n){switch(n.tag){case 26:case 27:case 5:return Qi(n.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 15:return ha(n.type,!1);case 11:return ha(n.type.render,!1);case 1:return ha(n.type,!0);case 31:return Qi("Activity");default:return""}}function fa(n){try{var s="";do s+=Lo(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ko(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hf(n){var s=ko(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function da(n){n._valueTracker||(n._valueTracker=hf(n))}function jo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=ko(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ff=/[\n"\\]/g;function Re(n){return n.replace(ff,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function xn(n,s,a,l,h,d,E,b){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+mn(s)):n.value!==""+mn(s)&&(n.value=""+mn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?As(n,E,mn(s)):a!=null?As(n,E,mn(a)):l!=null&&n.removeAttribute("value"),h==null&&d!=null&&(n.defaultChecked=!!d),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+mn(b):n.removeAttribute("name")}function Cr(n,s,a,l,h,d,E,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null))return;a=a!=null?""+mn(a):"",s=s!=null?""+mn(s):a,b||s===n.value||(n.value=s),n.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=b?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function As(n,s,a){s==="number"&&Sr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Yi(n,s,a,l){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&l&&(n[a].defaultSelected=!0)}else{for(a=""+mn(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,l&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function ee(n,s,a){if(s!=null&&(s=""+mn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+mn(a):""}function Ar(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Mt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=mn(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function zn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Rr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||Rr.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Po(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Mu(n,h,l)}else for(var d in s)s.hasOwnProperty(d)&&Mu(n,d,s[d])}function Uo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ma(n){return mf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ki=null;function qn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $i=null,Xi=null;function Bo(n){var s=pi(n);if(s&&(n=s.stateNode)){var a=n[Ae]||null;t:switch(n=s.stateNode,s.type){case"input":if(xn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Re(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var h=l[Ae]||null;if(!h)throw Error(r(90));xn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&jo(l)}break t;case"textarea":ee(n,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Yi(n,!!a.multiple,s,!1)}}}var vi=!1;function Vu(n,s,a){if(vi)return n(s,a);vi=!0;try{var l=n(s);return l}finally{if(vi=!1,($i!==null||Xi!==null)&&(Cc(),$i&&(s=$i,n=Xi,Xi=$i=null,Bo(s),n)))for(s=0;s<n.length;s++)Bo(n[s])}}function xr(n,s){var a=n.stateNode;if(a===null)return null;var l=a[Ae]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hn=!1;if(oi)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){Hn=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{Hn=!1}var Ei=null,Rs=null,Zi=null;function zo(){if(Zi)return Zi;var n,s=Rs,a=s.length,l,h="value"in Ei?Ei.value:Ei.textContent,d=h.length;for(n=0;n<a&&s[n]===h[n];n++);var E=a-n;for(l=1;l<=E&&s[a-l]===h[d-l];l++);return Zi=h.slice(n,1<l?1-l:void 0)}function Ti(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function wi(){return!0}function qo(){return!1}function qe(n){function s(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?wi:qo,this.isPropagationStopped=qo,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),s}var Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ga=qe(Xt),Dr=_({},Xt,{view:0,detail:0}),Nu=qe(Dr),pa,ya,bi,Mr=_({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bi&&(bi&&n.type==="mousemove"?(pa=n.screenX-bi.screenX,ya=n.screenY-bi.screenY):ya=pa=0,bi=n),pa)},movementY:function(n){return"movementY"in n?n.movementY:ya}}),Gn=qe(Mr),Ou=_({},Mr,{dataTransfer:0}),gf=qe(Ou),Vr=_({},Dr,{relatedTarget:0}),_a=qe(Vr),Ho=_({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0}),va=qe(Ho),Lu=_({},Xt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ea=qe(Lu),pf=_({},Xt,{data:0}),Go=qe(pf),Nr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fo(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=ju[n])?!!s[n]:!1}function Or(){return Fo}var Pu=_({},Dr,{key:function(n){if(n.key){var s=Nr[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ti(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ku[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(n){return n.type==="keypress"?Ti(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ti(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ta=qe(Pu),Uu=_({},Mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=qe(Uu),Ji=_({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),Bu=qe(Ji),zu=_({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),qu=qe(zu),Hu=_({},Mr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),wa=qe(Hu),gn=_({},Xt,{newState:0,oldState:0}),Gu=qe(gn),Fu=[9,13,27,32],Si=oi&&"CompositionEvent"in window,c=null;oi&&"documentMode"in document&&(c=document.documentMode);var p=oi&&"TextEvent"in window&&!c,v=oi&&(!Si||c&&8<c&&11>=c),C=" ",z=!1;function J(n,s){switch(n){case"keyup":return Fu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ft(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ht=!1;function Oe(n,s){switch(n){case"compositionend":return ft(s);case"keypress":return s.which!==32?null:(z=!0,C);case"textInput":return n=s.data,n===C&&z?null:n;default:return null}}function Gt(n,s){if(Ht)return n==="compositionend"||!Si&&J(n,s)?(n=zo(),Zi=Rs=Ei=null,Ht=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var He={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Le(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!He[n.type]:s==="textarea"}function Wi(n,s,a,l){$i?Xi?Xi.push(l):Xi=[l]:$i=l,s=Mc(s,"onChange"),0<s.length&&(a=new ga("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var Xe=null,Ci=null;function Yo(n){Y0(n,0)}function Qu(n){var s=yi(n);if(jo(s))return n}function mg(n,s){if(n==="change")return s}var gg=!1;if(oi){var yf;if(oi){var _f="oninput"in document;if(!_f){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),_f=typeof pg.oninput=="function"}yf=_f}else yf=!1;gg=yf&&(!document.documentMode||9<document.documentMode)}function yg(){Xe&&(Xe.detachEvent("onpropertychange",_g),Ci=Xe=null)}function _g(n){if(n.propertyName==="value"&&Qu(Ci)){var s=[];Wi(s,Ci,n,qn(n)),Vu(Yo,s)}}function y4(n,s,a){n==="focusin"?(yg(),Xe=s,Ci=a,Xe.attachEvent("onpropertychange",_g)):n==="focusout"&&yg()}function _4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qu(Ci)}function v4(n,s){if(n==="click")return Qu(s)}function E4(n,s){if(n==="input"||n==="change")return Qu(s)}function T4(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var In=typeof Object.is=="function"?Object.is:T4;function Ko(n,s){if(In(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!rn.call(s,h)||!In(n[h],s[h]))return!1}return!0}function vg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Eg(n,s){var a=vg(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=vg(a)}}function Tg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Tg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function wg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Sr(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Sr(n.document)}return s}function vf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var w4=oi&&"documentMode"in document&&11>=document.documentMode,ba=null,Ef=null,$o=null,Tf=!1;function bg(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tf||ba==null||ba!==Sr(l)||(l=ba,"selectionStart"in l&&vf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$o&&Ko($o,l)||($o=l,l=Mc(Ef,"onSelect"),0<l.length&&(s=new ga("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=ba)))}function Lr(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Sa={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},wf={},Sg={};oi&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function kr(n){if(wf[n])return wf[n];if(!Sa[n])return n;var s=Sa[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Sg)return wf[n]=s[a];return n}var Cg=kr("animationend"),Ag=kr("animationiteration"),Rg=kr("animationstart"),b4=kr("transitionrun"),S4=kr("transitionstart"),C4=kr("transitioncancel"),xg=kr("transitionend"),Ig=new Map,bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bf.push("scrollEnd");function li(n,s){Ig.set(n,s),ai(s,[n])}var Dg=new WeakMap;function Fn(n,s){if(typeof n=="object"&&n!==null){var a=Dg.get(n);return a!==void 0?a:(s={value:n,source:s,stack:fa(s)},Dg.set(n,s),s)}return{value:n,source:s,stack:fa(s)}}var Qn=[],Ca=0,Sf=0;function Yu(){for(var n=Ca,s=Sf=Ca=0;s<n;){var a=Qn[s];Qn[s++]=null;var l=Qn[s];Qn[s++]=null;var h=Qn[s];Qn[s++]=null;var d=Qn[s];if(Qn[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&Mg(a,h,d)}}function Ku(n,s,a,l){Qn[Ca++]=n,Qn[Ca++]=s,Qn[Ca++]=a,Qn[Ca++]=l,Sf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Cf(n,s,a,l){return Ku(n,s,a,l),$u(n)}function Aa(n,s){return Ku(n,null,null,s),$u(n)}function Mg(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(h=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,h&&s!==null&&(h=31-ue(a),n=d.hiddenUpdates,l=n[h],l===null?n[h]=[s]:l.push(s),s.lane=a|536870912),d):null}function $u(n){if(50<El)throw El=0,Md=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ra={};function A4(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(n,s,a,l){return new A4(n,s,a,l)}function Af(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ts(n,s){var a=n.alternate;return a===null?(a=Dn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Vg(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Xu(n,s,a,l,h,d){var E=0;if(l=n,typeof n=="function")Af(n)&&(E=1);else if(typeof n=="string")E=x6(n,a,gt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case x:return n=Dn(31,a,s,h),n.elementType=x,n.lanes=d,n;case M:return jr(a.children,h,d,s);case U:E=8,h|=24;break;case N:return n=Dn(12,a,s,h|2),n.elementType=N,n.lanes=d,n;case W:return n=Dn(13,a,s,h),n.elementType=W,n.lanes=d,n;case Q:return n=Dn(19,a,s,h),n.elementType=Q,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:case K:E=10;break t;case F:E=9;break t;case tt:E=11;break t;case D:E=14;break t;case A:E=16,l=null;break t}E=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=Dn(E,a,s,h),s.elementType=n,s.type=l,s.lanes=d,s}function jr(n,s,a,l){return n=Dn(7,n,l,s),n.lanes=a,n}function Rf(n,s,a){return n=Dn(6,n,null,s),n.lanes=a,n}function xf(n,s,a){return s=Dn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var xa=[],Ia=0,Zu=null,Ju=0,Yn=[],Kn=0,Pr=null,es=1,ns="";function Ur(n,s){xa[Ia++]=Ju,xa[Ia++]=Zu,Zu=n,Ju=s}function Ng(n,s,a){Yn[Kn++]=es,Yn[Kn++]=ns,Yn[Kn++]=Pr,Pr=n;var l=es;n=ns;var h=32-ue(l)-1;l&=~(1<<h),a+=1;var d=32-ue(s)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,es=1<<32-ue(s)+h|a<<h|l,ns=d+n}else es=1<<d|a<<h|l,ns=n}function If(n){n.return!==null&&(Ur(n,1),Ng(n,1,0))}function Df(n){for(;n===Zu;)Zu=xa[--Ia],xa[Ia]=null,Ju=xa[--Ia],xa[Ia]=null;for(;n===Pr;)Pr=Yn[--Kn],Yn[Kn]=null,ns=Yn[--Kn],Yn[Kn]=null,es=Yn[--Kn],Yn[Kn]=null}var pn=null,_e=null,$t=!1,Br=null,Ai=!1,Mf=Error(r(519));function zr(n){var s=Error(r(418,""));throw Jo(Fn(s,n)),Mf}function Og(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[Ne]=n,s[Ae]=l,a){case"dialog":Ut("cancel",s),Ut("close",s);break;case"iframe":case"object":case"embed":Ut("load",s);break;case"video":case"audio":for(a=0;a<wl.length;a++)Ut(wl[a],s);break;case"source":Ut("error",s);break;case"img":case"image":case"link":Ut("error",s),Ut("load",s);break;case"details":Ut("toggle",s);break;case"input":Ut("invalid",s),Cr(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),da(s);break;case"select":Ut("invalid",s);break;case"textarea":Ut("invalid",s),Ar(s,l.value,l.defaultValue,l.children),da(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Z0(s.textContent,a)?(l.popover!=null&&(Ut("beforetoggle",s),Ut("toggle",s)),l.onScroll!=null&&Ut("scroll",s),l.onScrollEnd!=null&&Ut("scrollend",s),l.onClick!=null&&(s.onclick=Vc),s=!0):s=!1,s||zr(n)}function Lg(n){for(pn=n.return;pn;)switch(pn.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:pn=pn.return}}function Xo(n){if(n!==pn)return!1;if(!$t)return Lg(n),$t=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Yd(n.type,n.memoizedProps)),a=!a),a&&_e&&zr(n),Lg(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){_e=ci(n.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}_e=null}}else s===27?(s=_e,Hs(n.type)?(n=Zd,Zd=null,_e=n):_e=s):_e=pn?ci(n.stateNode.nextSibling):null;return!0}function Zo(){_e=pn=null,$t=!1}function kg(){var n=Br;return n!==null&&(wn===null?wn=n:wn.push.apply(wn,n),Br=null),n}function Jo(n){Br===null?Br=[n]:Br.push(n)}var Vf=nt(null),qr=null,is=null;function xs(n,s,a){at(Vf,s._currentValue),s._currentValue=a}function ss(n){n._currentValue=Vf.current,st(Vf)}function Nf(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function Of(n,s,a,l){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;t:for(;d!==null;){var b=d;d=h;for(var V=0;V<s.length;V++)if(b.context===s[V]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Nf(d.return,a,n),l||(E=null);break t}d=b.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Nf(E,a,n),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===n){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Wo(n,s,a,l){n=null;for(var h=s,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var b=h.type;In(h.pendingProps.value,E.value)||(n!==null?n.push(b):n=[b])}}else if(h===_t.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(xl):n=[xl])}h=h.return}n!==null&&Of(s,n,a,l),s.flags|=262144}function Wu(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hr(n){qr=n,is=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function an(n){return jg(qr,n)}function tc(n,s){return qr===null&&Hr(n),jg(n,s)}function jg(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},is===null){if(n===null)throw Error(r(308));is=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else is=is.next=s;return a}var R4=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},x4=e.unstable_scheduleCallback,I4=e.unstable_NormalPriority,ke={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lf(){return{controller:new R4,data:new Map,refCount:0}}function tl(n){n.refCount--,n.refCount===0&&x4(I4,function(){n.controller.abort()})}var el=null,kf=0,Da=0,Ma=null;function D4(n,s){if(el===null){var a=el=[];kf=0,Da=Pd(),Ma={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kf++,s.then(Pg,Pg),s}function Pg(){if(--kf===0&&el!==null){Ma!==null&&(Ma.status="fulfilled");var n=el;el=null,Da=0,Ma=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function M4(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ug=Z.S;Z.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&D4(n,s),Ug!==null&&Ug(n,s)};var Gr=nt(null);function jf(){var n=Gr.current;return n!==null?n:ce.pooledCache}function ec(n,s){s===null?at(Gr,Gr.current):at(Gr,s.pool)}function Bg(){var n=jf();return n===null?null:{parent:ke._currentValue,pool:n}}var nl=Error(r(460)),zg=Error(r(474)),nc=Error(r(542)),Pf={then:function(){}};function qg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ic(){}function Hg(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(ic,ic),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Fg(n),n;default:if(typeof s.status=="string")s.then(ic,ic);else{if(n=ce,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Fg(n),n}throw il=s,nl}}var il=null;function Gg(){if(il===null)throw Error(r(459));var n=il;return il=null,n}function Fg(n){if(n===nl||n===nc)throw Error(r(483))}var Is=!1;function Uf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ds(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ms(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Wt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=$u(n),Mg(n,null,a),s}return Ku(n,l,s,a),$u(n)}function sl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Vo(n,a)}}function zf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=s:d=d.next=s}else h=d=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var qf=!1;function rl(){if(qf){var n=Ma;if(n!==null)throw n}}function al(n,s,a,l){qf=!1;var h=n.updateQueue;Is=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var V=b,G=V.next;V.next=null,E===null?d=G:E.next=G,E=V;var et=n.alternate;et!==null&&(et=et.updateQueue,b=et.lastBaseUpdate,b!==E&&(b===null?et.firstBaseUpdate=G:b.next=G,et.lastBaseUpdate=V))}if(d!==null){var rt=h.baseState;E=0,et=G=V=null,b=d;do{var Y=b.lane&-536870913,$=Y!==b.lane;if($?(Ft&Y)===Y:(l&Y)===Y){Y!==0&&Y===Da&&(qf=!0),et!==null&&(et=et.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var Ct=n,wt=b;Y=s;var se=a;switch(wt.tag){case 1:if(Ct=wt.payload,typeof Ct=="function"){rt=Ct.call(se,rt,Y);break t}rt=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=wt.payload,Y=typeof Ct=="function"?Ct.call(se,rt,Y):Ct,Y==null)break t;rt=_({},rt,Y);break t;case 2:Is=!0}}Y=b.callback,Y!==null&&(n.flags|=64,$&&(n.flags|=8192),$=h.callbacks,$===null?h.callbacks=[Y]:$.push(Y))}else $={lane:Y,tag:b.tag,payload:b.payload,callback:b.callback,next:null},et===null?(G=et=$,V=rt):et=et.next=$,E|=Y;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;$=b,b=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);et===null&&(V=rt),h.baseState=V,h.firstBaseUpdate=G,h.lastBaseUpdate=et,d===null&&(h.shared.lanes=0),Us|=E,n.lanes=E,n.memoizedState=rt}}function Qg(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function Yg(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Qg(a[n],s)}var Va=nt(null),sc=nt(0);function Kg(n,s){n=hs,at(sc,n),at(Va,s),hs=n|s.baseLanes}function Hf(){at(sc,hs),at(Va,Va.current)}function Gf(){hs=sc.current,st(Va),st(sc)}var Vs=0,Lt=null,ne=null,xe=null,rc=!1,Na=!1,Fr=!1,ac=0,ol=0,Oa=null,V4=0;function we(){throw Error(r(321))}function Ff(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!In(n[a],s[a]))return!1;return!0}function Qf(n,s,a,l,h,d){return Vs=d,Lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Z.H=n===null||n.memoizedState===null?Mp:Vp,Fr=!1,d=a(l,h),Fr=!1,Na&&(d=Xg(s,a,l,h)),$g(n),d}function $g(n){Z.H=fc;var s=ne!==null&&ne.next!==null;if(Vs=0,xe=ne=Lt=null,rc=!1,ol=0,Oa=null,s)throw Error(r(300));n===null||Ge||(n=n.dependencies,n!==null&&Wu(n)&&(Ge=!0))}function Xg(n,s,a,l){Lt=n;var h=0;do{if(Na&&(Oa=null),ol=0,Na=!1,25<=h)throw Error(r(301));if(h+=1,xe=ne=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Z.H=U4,d=s(a,l)}while(Na);return d}function N4(){var n=Z.H,s=n.useState()[0];return s=typeof s.then=="function"?ll(s):s,n=n.useState()[0],(ne!==null?ne.memoizedState:null)!==n&&(Lt.flags|=1024),s}function Yf(){var n=ac!==0;return ac=0,n}function Kf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function $f(n){if(rc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}rc=!1}Vs=0,xe=ne=Lt=null,Na=!1,ol=ac=0,Oa=null}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?Lt.memoizedState=xe=n:xe=xe.next=n,xe}function Ie(){if(ne===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=ne.next;var s=xe===null?Lt.memoizedState:xe.next;if(s!==null)xe=s,ne=n;else{if(n===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));ne=n,n={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},xe===null?Lt.memoizedState=xe=n:xe=xe.next=n}return xe}function Xf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(n){var s=ol;return ol+=1,Oa===null&&(Oa=[]),n=Hg(Oa,n,s),s=Lt,(xe===null?s.memoizedState:xe.next)===null&&(s=s.alternate,Z.H=s===null||s.memoizedState===null?Mp:Vp),n}function oc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ll(n);if(n.$$typeof===K)return an(n)}throw Error(r(438,String(n)))}function Zf(n){var s=null,a=Lt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Lt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Xf(),Lt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=k;return s.index++,a}function rs(n,s){return typeof s=="function"?s(n):s}function lc(n){var s=Ie();return Jf(s,ne,n)}function Jf(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=n.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}s.baseQueue=h=d,l.pending=null}if(d=n.baseState,h===null)n.memoizedState=d;else{s=h.next;var b=E=null,V=null,G=s,et=!1;do{var rt=G.lane&-536870913;if(rt!==G.lane?(Ft&rt)===rt:(Vs&rt)===rt){var Y=G.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),rt===Da&&(et=!0);else if((Vs&Y)===Y){G=G.next,Y===Da&&(et=!0);continue}else rt={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(b=V=rt,E=d):V=V.next=rt,Lt.lanes|=Y,Us|=Y;rt=G.action,Fr&&a(d,rt),d=G.hasEagerState?G.eagerState:a(d,rt)}else Y={lane:rt,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(b=V=Y,E=d):V=V.next=Y,Lt.lanes|=rt,Us|=rt;G=G.next}while(G!==null&&G!==s);if(V===null?E=d:V.next=b,!In(d,n.memoizedState)&&(Ge=!0,et&&(a=Ma,a!==null)))throw a;n.memoizedState=d,n.baseState=E,n.baseQueue=V,l.lastRenderedState=d}return h===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Wf(n){var s=Ie(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,h=a.pending,d=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=n(d,E.action),E=E.next;while(E!==h);In(d,s.memoizedState)||(Ge=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function Zg(n,s,a){var l=Lt,h=Ie(),d=$t;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var E=!In((ne||h).memoizedState,a);E&&(h.memoizedState=a,Ge=!0),h=h.queue;var b=tp.bind(null,l,h,n);if(ul(2048,8,b,[n]),h.getSnapshot!==s||E||xe!==null&&xe.memoizedState.tag&1){if(l.flags|=2048,La(9,uc(),Wg.bind(null,l,h,a,s),null),ce===null)throw Error(r(349));d||(Vs&124)!==0||Jg(l,s,a)}return a}function Jg(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Lt.updateQueue,s===null?(s=Xf(),Lt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Wg(n,s,a,l){s.value=a,s.getSnapshot=l,ep(s)&&np(n)}function tp(n,s,a){return a(function(){ep(s)&&np(n)})}function ep(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!In(n,a)}catch{return!0}}function np(n){var s=Aa(n,2);s!==null&&Ln(s,n,2)}function td(n){var s=En();if(typeof n=="function"){var a=n;if(n=a(),Fr){le(!0);try{a()}finally{le(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:n},s}function ip(n,s,a,l){return n.baseState=a,Jf(n,ne,typeof l=="function"?l:rs)}function O4(n,s,a,l,h){if(hc(n))throw Error(r(485));if(n=s.action,n!==null){var d={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};Z.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,sp(s,d)):(d.next=a.next,s.pending=a.next=d)}}function sp(n,s){var a=s.action,l=s.payload,h=n.state;if(s.isTransition){var d=Z.T,E={};Z.T=E;try{var b=a(h,l),V=Z.S;V!==null&&V(E,b),rp(n,s,b)}catch(G){ed(n,s,G)}finally{Z.T=d}}else try{d=a(h,l),rp(n,s,d)}catch(G){ed(n,s,G)}}function rp(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ap(n,s,l)},function(l){return ed(n,s,l)}):ap(n,s,a)}function ap(n,s,a){s.status="fulfilled",s.value=a,op(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,sp(n,a)))}function ed(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,op(s),s=s.next;while(s!==l)}n.action=null}function op(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function lp(n,s){return s}function up(n,s){if($t){var a=ce.formState;if(a!==null){t:{var l=Lt;if($t){if(_e){e:{for(var h=_e,d=Ai;h.nodeType!==8;){if(!d){h=null;break e}if(h=ci(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){_e=ci(h.nextSibling),l=h.data==="F!";break t}}zr(l)}l=!1}l&&(s=a[0])}}return a=En(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lp,lastRenderedState:s},a.queue=l,a=xp.bind(null,Lt,l),l.dispatch=a,l=td(!1),d=ad.bind(null,Lt,!1,l.queue),l=En(),h={state:s,dispatch:null,action:n,pending:null},l.queue=h,a=O4.bind(null,Lt,h,d,a),h.dispatch=a,l.memoizedState=n,[s,a,!1]}function cp(n){var s=Ie();return hp(s,ne,n)}function hp(n,s,a){if(s=Jf(n,s,lp)[0],n=lc(rs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=ll(s)}catch(E){throw E===nl?nc:E}else l=s;s=Ie();var h=s.queue,d=h.dispatch;return a!==s.memoizedState&&(Lt.flags|=2048,La(9,uc(),L4.bind(null,h,a),null)),[l,d,n]}function L4(n,s){n.action=s}function fp(n){var s=Ie(),a=ne;if(a!==null)return hp(s,a,n);Ie(),s=s.memoizedState,a=Ie();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function La(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Lt.updateQueue,s===null&&(s=Xf(),Lt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function uc(){return{destroy:void 0,resource:void 0}}function dp(){return Ie().memoizedState}function cc(n,s,a,l){var h=En();l=l===void 0?null:l,Lt.flags|=n,h.memoizedState=La(1|s,uc(),a,l)}function ul(n,s,a,l){var h=Ie();l=l===void 0?null:l;var d=h.memoizedState.inst;ne!==null&&l!==null&&Ff(l,ne.memoizedState.deps)?h.memoizedState=La(s,d,a,l):(Lt.flags|=n,h.memoizedState=La(1|s,d,a,l))}function mp(n,s){cc(8390656,8,n,s)}function gp(n,s){ul(2048,8,n,s)}function pp(n,s){return ul(4,2,n,s)}function yp(n,s){return ul(4,4,n,s)}function _p(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function vp(n,s,a){a=a!=null?a.concat([n]):null,ul(4,4,_p.bind(null,s,n),a)}function nd(){}function Ep(n,s){var a=Ie();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Ff(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function Tp(n,s){var a=Ie();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Ff(s,l[1]))return l[0];if(l=n(),Fr){le(!0);try{n()}finally{le(!1)}}return a.memoizedState=[l,s],l}function id(n,s,a){return a===void 0||(Vs&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=S0(),Lt.lanes|=n,Us|=n,a)}function wp(n,s,a,l){return In(a,s)?a:Va.current!==null?(n=id(n,a,l),In(n,s)||(Ge=!0),n):(Vs&42)===0?(Ge=!0,n.memoizedState=a):(n=S0(),Lt.lanes|=n,Us|=n,s)}function bp(n,s,a,l,h){var d=ut.p;ut.p=d!==0&&8>d?d:8;var E=Z.T,b={};Z.T=b,ad(n,!1,s,a);try{var V=h(),G=Z.S;if(G!==null&&G(b,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var et=M4(V,l);cl(n,s,et,On(n))}else cl(n,s,l,On(n))}catch(rt){cl(n,s,{then:function(){},status:"rejected",reason:rt},On())}finally{ut.p=d,Z.T=E}}function k4(){}function sd(n,s,a,l){if(n.tag!==5)throw Error(r(476));var h=Sp(n).queue;bp(n,h,s,mt,a===null?k4:function(){return Cp(n),a(l)})}function Sp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:mt},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Cp(n){var s=Sp(n).next.queue;cl(n,s,{},On())}function rd(){return an(xl)}function Ap(){return Ie().memoizedState}function Rp(){return Ie().memoizedState}function j4(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=On();n=Ds(a);var l=Ms(s,n,a);l!==null&&(Ln(l,s,a),sl(l,s,a)),s={cache:Lf()},n.payload=s;return}s=s.return}}function P4(n,s,a){var l=On();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},hc(n)?Ip(s,a):(a=Cf(n,s,a,l),a!==null&&(Ln(a,n,l),Dp(a,s,l)))}function xp(n,s,a){var l=On();cl(n,s,a,l)}function cl(n,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(hc(n))Ip(s,h);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var E=s.lastRenderedState,b=d(E,a);if(h.hasEagerState=!0,h.eagerState=b,In(b,E))return Ku(n,s,h,0),ce===null&&Yu(),!1}catch{}finally{}if(a=Cf(n,s,h,l),a!==null)return Ln(a,n,l),Dp(a,s,l),!0}return!1}function ad(n,s,a,l){if(l={lane:2,revertLane:Pd(),action:l,hasEagerState:!1,eagerState:null,next:null},hc(n)){if(s)throw Error(r(479))}else s=Cf(n,a,l,2),s!==null&&Ln(s,n,2)}function hc(n){var s=n.alternate;return n===Lt||s!==null&&s===Lt}function Ip(n,s){Na=rc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Dp(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Vo(n,a)}}var fc={readContext:an,use:oc,useCallback:we,useContext:we,useEffect:we,useImperativeHandle:we,useLayoutEffect:we,useInsertionEffect:we,useMemo:we,useReducer:we,useRef:we,useState:we,useDebugValue:we,useDeferredValue:we,useTransition:we,useSyncExternalStore:we,useId:we,useHostTransitionStatus:we,useFormState:we,useActionState:we,useOptimistic:we,useMemoCache:we,useCacheRefresh:we},Mp={readContext:an,use:oc,useCallback:function(n,s){return En().memoizedState=[n,s===void 0?null:s],n},useContext:an,useEffect:mp,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,cc(4194308,4,_p.bind(null,s,n),a)},useLayoutEffect:function(n,s){return cc(4194308,4,n,s)},useInsertionEffect:function(n,s){cc(4,2,n,s)},useMemo:function(n,s){var a=En();s=s===void 0?null:s;var l=n();if(Fr){le(!0);try{n()}finally{le(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=En();if(a!==void 0){var h=a(s);if(Fr){le(!0);try{a(s)}finally{le(!1)}}}else h=s;return l.memoizedState=l.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},l.queue=n,n=n.dispatch=P4.bind(null,Lt,n),[l.memoizedState,n]},useRef:function(n){var s=En();return n={current:n},s.memoizedState=n},useState:function(n){n=td(n);var s=n.queue,a=xp.bind(null,Lt,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:nd,useDeferredValue:function(n,s){var a=En();return id(a,n,s)},useTransition:function(){var n=td(!1);return n=bp.bind(null,Lt,n.queue,!0,!1),En().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Lt,h=En();if($t){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ce===null)throw Error(r(349));(Ft&124)!==0||Jg(l,s,a)}h.memoizedState=a;var d={value:a,getSnapshot:s};return h.queue=d,mp(tp.bind(null,l,d,n),[n]),l.flags|=2048,La(9,uc(),Wg.bind(null,l,d,a,s),null),a},useId:function(){var n=En(),s=ce.identifierPrefix;if($t){var a=ns,l=es;a=(l&~(1<<32-ue(l)-1)).toString(32)+a,s=""+s+"R"+a,a=ac++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=V4++,s=""+s+"r"+a.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:rd,useFormState:up,useActionState:up,useOptimistic:function(n){var s=En();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=ad.bind(null,Lt,!0,a),a.dispatch=s,[n,s]},useMemoCache:Zf,useCacheRefresh:function(){return En().memoizedState=j4.bind(null,Lt)}},Vp={readContext:an,use:oc,useCallback:Ep,useContext:an,useEffect:gp,useImperativeHandle:vp,useInsertionEffect:pp,useLayoutEffect:yp,useMemo:Tp,useReducer:lc,useRef:dp,useState:function(){return lc(rs)},useDebugValue:nd,useDeferredValue:function(n,s){var a=Ie();return wp(a,ne.memoizedState,n,s)},useTransition:function(){var n=lc(rs)[0],s=Ie().memoizedState;return[typeof n=="boolean"?n:ll(n),s]},useSyncExternalStore:Zg,useId:Ap,useHostTransitionStatus:rd,useFormState:cp,useActionState:cp,useOptimistic:function(n,s){var a=Ie();return ip(a,ne,n,s)},useMemoCache:Zf,useCacheRefresh:Rp},U4={readContext:an,use:oc,useCallback:Ep,useContext:an,useEffect:gp,useImperativeHandle:vp,useInsertionEffect:pp,useLayoutEffect:yp,useMemo:Tp,useReducer:Wf,useRef:dp,useState:function(){return Wf(rs)},useDebugValue:nd,useDeferredValue:function(n,s){var a=Ie();return ne===null?id(a,n,s):wp(a,ne.memoizedState,n,s)},useTransition:function(){var n=Wf(rs)[0],s=Ie().memoizedState;return[typeof n=="boolean"?n:ll(n),s]},useSyncExternalStore:Zg,useId:Ap,useHostTransitionStatus:rd,useFormState:fp,useActionState:fp,useOptimistic:function(n,s){var a=Ie();return ne!==null?ip(a,ne,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:Rp},ka=null,hl=0;function dc(n){var s=hl;return hl+=1,ka===null&&(ka=[]),Hg(ka,n,s)}function fl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function mc(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Np(n){var s=n._init;return s(n._payload)}function Op(n){function s(B,j){if(n){var q=B.deletions;q===null?(B.deletions=[j],B.flags|=16):q.push(j)}}function a(B,j){if(!n)return null;for(;j!==null;)s(B,j),j=j.sibling;return null}function l(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function h(B,j){return B=ts(B,j),B.index=0,B.sibling=null,B}function d(B,j,q){return B.index=q,n?(q=B.alternate,q!==null?(q=q.index,q<j?(B.flags|=67108866,j):q):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function E(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function b(B,j,q,it){return j===null||j.tag!==6?(j=Rf(q,B.mode,it),j.return=B,j):(j=h(j,q),j.return=B,j)}function V(B,j,q,it){var yt=q.type;return yt===M?et(B,j,q.props.children,it,q.key):j!==null&&(j.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===A&&Np(yt)===j.type)?(j=h(j,q.props),fl(j,q),j.return=B,j):(j=Xu(q.type,q.key,q.props,null,B.mode,it),fl(j,q),j.return=B,j)}function G(B,j,q,it){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=xf(q,B.mode,it),j.return=B,j):(j=h(j,q.children||[]),j.return=B,j)}function et(B,j,q,it,yt){return j===null||j.tag!==7?(j=jr(q,B.mode,it,yt),j.return=B,j):(j=h(j,q),j.return=B,j)}function rt(B,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Rf(""+j,B.mode,q),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return q=Xu(j.type,j.key,j.props,null,B.mode,q),fl(q,j),q.return=B,q;case R:return j=xf(j,B.mode,q),j.return=B,j;case A:var it=j._init;return j=it(j._payload),rt(B,j,q)}if(Mt(j)||P(j))return j=jr(j,B.mode,q,null),j.return=B,j;if(typeof j.then=="function")return rt(B,dc(j),q);if(j.$$typeof===K)return rt(B,tc(B,j),q);mc(B,j)}return null}function Y(B,j,q,it){var yt=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return yt!==null?null:b(B,j,""+q,it);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return q.key===yt?V(B,j,q,it):null;case R:return q.key===yt?G(B,j,q,it):null;case A:return yt=q._init,q=yt(q._payload),Y(B,j,q,it)}if(Mt(q)||P(q))return yt!==null?null:et(B,j,q,it,null);if(typeof q.then=="function")return Y(B,j,dc(q),it);if(q.$$typeof===K)return Y(B,j,tc(B,q),it);mc(B,q)}return null}function $(B,j,q,it,yt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return B=B.get(q)||null,b(j,B,""+it,yt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case w:return B=B.get(it.key===null?q:it.key)||null,V(j,B,it,yt);case R:return B=B.get(it.key===null?q:it.key)||null,G(j,B,it,yt);case A:var jt=it._init;return it=jt(it._payload),$(B,j,q,it,yt)}if(Mt(it)||P(it))return B=B.get(q)||null,et(j,B,it,yt,null);if(typeof it.then=="function")return $(B,j,q,dc(it),yt);if(it.$$typeof===K)return $(B,j,q,tc(j,it),yt);mc(j,it)}return null}function Ct(B,j,q,it){for(var yt=null,jt=null,vt=j,bt=j=0,Qe=null;vt!==null&&bt<q.length;bt++){vt.index>bt?(Qe=vt,vt=null):Qe=vt.sibling;var Kt=Y(B,vt,q[bt],it);if(Kt===null){vt===null&&(vt=Qe);break}n&&vt&&Kt.alternate===null&&s(B,vt),j=d(Kt,j,bt),jt===null?yt=Kt:jt.sibling=Kt,jt=Kt,vt=Qe}if(bt===q.length)return a(B,vt),$t&&Ur(B,bt),yt;if(vt===null){for(;bt<q.length;bt++)vt=rt(B,q[bt],it),vt!==null&&(j=d(vt,j,bt),jt===null?yt=vt:jt.sibling=vt,jt=vt);return $t&&Ur(B,bt),yt}for(vt=l(vt);bt<q.length;bt++)Qe=$(vt,B,bt,q[bt],it),Qe!==null&&(n&&Qe.alternate!==null&&vt.delete(Qe.key===null?bt:Qe.key),j=d(Qe,j,bt),jt===null?yt=Qe:jt.sibling=Qe,jt=Qe);return n&&vt.forEach(function(Ks){return s(B,Ks)}),$t&&Ur(B,bt),yt}function wt(B,j,q,it){if(q==null)throw Error(r(151));for(var yt=null,jt=null,vt=j,bt=j=0,Qe=null,Kt=q.next();vt!==null&&!Kt.done;bt++,Kt=q.next()){vt.index>bt?(Qe=vt,vt=null):Qe=vt.sibling;var Ks=Y(B,vt,Kt.value,it);if(Ks===null){vt===null&&(vt=Qe);break}n&&vt&&Ks.alternate===null&&s(B,vt),j=d(Ks,j,bt),jt===null?yt=Ks:jt.sibling=Ks,jt=Ks,vt=Qe}if(Kt.done)return a(B,vt),$t&&Ur(B,bt),yt;if(vt===null){for(;!Kt.done;bt++,Kt=q.next())Kt=rt(B,Kt.value,it),Kt!==null&&(j=d(Kt,j,bt),jt===null?yt=Kt:jt.sibling=Kt,jt=Kt);return $t&&Ur(B,bt),yt}for(vt=l(vt);!Kt.done;bt++,Kt=q.next())Kt=$(vt,B,bt,Kt.value,it),Kt!==null&&(n&&Kt.alternate!==null&&vt.delete(Kt.key===null?bt:Kt.key),j=d(Kt,j,bt),jt===null?yt=Kt:jt.sibling=Kt,jt=Kt);return n&&vt.forEach(function(B6){return s(B,B6)}),$t&&Ur(B,bt),yt}function se(B,j,q,it){if(typeof q=="object"&&q!==null&&q.type===M&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case w:t:{for(var yt=q.key;j!==null;){if(j.key===yt){if(yt=q.type,yt===M){if(j.tag===7){a(B,j.sibling),it=h(j,q.props.children),it.return=B,B=it;break t}}else if(j.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===A&&Np(yt)===j.type){a(B,j.sibling),it=h(j,q.props),fl(it,q),it.return=B,B=it;break t}a(B,j);break}else s(B,j);j=j.sibling}q.type===M?(it=jr(q.props.children,B.mode,it,q.key),it.return=B,B=it):(it=Xu(q.type,q.key,q.props,null,B.mode,it),fl(it,q),it.return=B,B=it)}return E(B);case R:t:{for(yt=q.key;j!==null;){if(j.key===yt)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){a(B,j.sibling),it=h(j,q.children||[]),it.return=B,B=it;break t}else{a(B,j);break}else s(B,j);j=j.sibling}it=xf(q,B.mode,it),it.return=B,B=it}return E(B);case A:return yt=q._init,q=yt(q._payload),se(B,j,q,it)}if(Mt(q))return Ct(B,j,q,it);if(P(q)){if(yt=P(q),typeof yt!="function")throw Error(r(150));return q=yt.call(q),wt(B,j,q,it)}if(typeof q.then=="function")return se(B,j,dc(q),it);if(q.$$typeof===K)return se(B,j,tc(B,q),it);mc(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,j!==null&&j.tag===6?(a(B,j.sibling),it=h(j,q),it.return=B,B=it):(a(B,j),it=Rf(q,B.mode,it),it.return=B,B=it),E(B)):a(B,j)}return function(B,j,q,it){try{hl=0;var yt=se(B,j,q,it);return ka=null,yt}catch(vt){if(vt===nl||vt===nc)throw vt;var jt=Dn(29,vt,null,B.mode);return jt.lanes=it,jt.return=B,jt}finally{}}}var ja=Op(!0),Lp=Op(!1),$n=nt(null),Ri=null;function Ns(n){var s=n.alternate;at(je,je.current&1),at($n,n),Ri===null&&(s===null||Va.current!==null||s.memoizedState!==null)&&(Ri=n)}function kp(n){if(n.tag===22){if(at(je,je.current),at($n,n),Ri===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Ri=n)}}else Os()}function Os(){at(je,je.current),at($n,$n.current)}function as(n){st($n),Ri===n&&(Ri=null),st(je)}var je=nt(0);function gc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Xd(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function od(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:_({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var ld={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=On(),h=Ds(l);h.payload=s,a!=null&&(h.callback=a),s=Ms(n,h,l),s!==null&&(Ln(s,n,l),sl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=On(),h=Ds(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ms(n,h,l),s!==null&&(Ln(s,n,l),sl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=On(),l=Ds(a);l.tag=2,s!=null&&(l.callback=s),s=Ms(n,l,a),s!==null&&(Ln(s,n,a),sl(s,n,a))}};function jp(n,s,a,l,h,d,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,E):s.prototype&&s.prototype.isPureReactComponent?!Ko(a,l)||!Ko(h,d):!0}function Pp(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&ld.enqueueReplaceState(s,s.state,null)}function Qr(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=_({},a));for(var h in n)a[h]===void 0&&(a[h]=n[h])}return a}var pc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Up(n){pc(n)}function Bp(n){console.error(n)}function zp(n){pc(n)}function yc(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function qp(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ud(n,s,a){return a=Ds(a),a.tag=3,a.payload={element:null},a.callback=function(){yc(n,s)},a}function Hp(n){return n=Ds(n),n.tag=3,n}function Gp(n,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;n.payload=function(){return h(d)},n.callback=function(){qp(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){qp(s,a,l),typeof h!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function B4(n,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Wo(s,a,h,!0),a=$n.current,a!==null){switch(a.tag){case 13:return Ri===null?Nd():a.alternate===null&&ve===0&&(ve=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Pf?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Ld(n,l,h)),!1;case 22:return a.flags|=65536,l===Pf?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Ld(n,l,h)),!1}throw Error(r(435,a.tag))}return Ld(n,l,h),Nd(),!1}if($t)return s=$n.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Mf&&(n=Error(r(422),{cause:l}),Jo(Fn(n,a)))):(l!==Mf&&(s=Error(r(423),{cause:l}),Jo(Fn(s,a))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,l=Fn(l,a),h=ud(n.stateNode,l,h),zf(n,h),ve!==4&&(ve=2)),!1;var d=Error(r(520),{cause:l});if(d=Fn(d,a),vl===null?vl=[d]:vl.push(d),ve!==4&&(ve=2),s===null)return!0;l=Fn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=h&-h,a.lanes|=n,n=ud(a.stateNode,l,n),zf(a,n),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Bs===null||!Bs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Hp(h),Gp(h,n,a,l),zf(a,h),!1}a=a.return}while(a!==null);return!1}var Fp=Error(r(461)),Ge=!1;function Ze(n,s,a,l){s.child=n===null?Lp(s,null,a,l):ja(s,n.child,a,l)}function Qp(n,s,a,l,h){a=a.render;var d=s.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return Hr(s),l=Qf(n,s,a,E,d,h),b=Yf(),n!==null&&!Ge?(Kf(n,s,h),os(n,s,h)):($t&&b&&If(s),s.flags|=1,Ze(n,s,l,h),s.child)}function Yp(n,s,a,l,h){if(n===null){var d=a.type;return typeof d=="function"&&!Af(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Kp(n,s,d,l,h)):(n=Xu(a.type,null,l,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(d=n.child,!yd(n,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Ko,a(E,l)&&n.ref===s.ref)return os(n,s,h)}return s.flags|=1,n=ts(d,l),n.ref=s.ref,n.return=s,s.child=n}function Kp(n,s,a,l,h){if(n!==null){var d=n.memoizedProps;if(Ko(d,l)&&n.ref===s.ref)if(Ge=!1,s.pendingProps=l=d,yd(n,h))(n.flags&131072)!==0&&(Ge=!0);else return s.lanes=n.lanes,os(n,s,h)}return cd(n,s,a,l,h)}function $p(n,s,a){var l=s.pendingProps,h=l.children,d=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,n!==null){for(h=s.child=n.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;s.childLanes=d&~l}else s.childLanes=0,s.child=null;return Xp(n,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ec(s,d!==null?d.cachePool:null),d!==null?Kg(s,d):Hf(),kp(s);else return s.lanes=s.childLanes=536870912,Xp(n,s,d!==null?d.baseLanes|a:a,a)}else d!==null?(ec(s,d.cachePool),Kg(s,d),Os(),s.memoizedState=null):(n!==null&&ec(s,null),Hf(),Os());return Ze(n,s,h,a),s.child}function Xp(n,s,a,l){var h=jf();return h=h===null?null:{parent:ke._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},n!==null&&ec(s,null),Hf(),kp(s),n!==null&&Wo(n,s,l,!0),null}function _c(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function cd(n,s,a,l,h){return Hr(s),a=Qf(n,s,a,l,void 0,h),l=Yf(),n!==null&&!Ge?(Kf(n,s,h),os(n,s,h)):($t&&l&&If(s),s.flags|=1,Ze(n,s,a,h),s.child)}function Zp(n,s,a,l,h,d){return Hr(s),s.updateQueue=null,a=Xg(s,l,a,h),$g(n),l=Yf(),n!==null&&!Ge?(Kf(n,s,d),os(n,s,d)):($t&&l&&If(s),s.flags|=1,Ze(n,s,a,d),s.child)}function Jp(n,s,a,l,h){if(Hr(s),s.stateNode===null){var d=Ra,E=a.contextType;typeof E=="object"&&E!==null&&(d=an(E)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ld,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Uf(s),E=a.contextType,d.context=typeof E=="object"&&E!==null?an(E):Ra,d.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(od(s,a,E,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&ld.enqueueReplaceState(d,d.state,null),al(s,l,d,h),rl(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){d=s.stateNode;var b=s.memoizedProps,V=Qr(a,b);d.props=V;var G=d.context,et=a.contextType;E=Ra,typeof et=="object"&&et!==null&&(E=an(et));var rt=a.getDerivedStateFromProps;et=typeof rt=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,et||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||G!==E)&&Pp(s,d,l,E),Is=!1;var Y=s.memoizedState;d.state=Y,al(s,l,d,h),rl(),G=s.memoizedState,b||Y!==G||Is?(typeof rt=="function"&&(od(s,a,rt,l),G=s.memoizedState),(V=Is||jp(s,a,V,l,Y,G,E))?(et||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=G),d.props=l,d.state=G,d.context=E,l=V):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Bf(n,s),E=s.memoizedProps,et=Qr(a,E),d.props=et,rt=s.pendingProps,Y=d.context,G=a.contextType,V=Ra,typeof G=="object"&&G!==null&&(V=an(G)),b=a.getDerivedStateFromProps,(G=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==rt||Y!==V)&&Pp(s,d,l,V),Is=!1,Y=s.memoizedState,d.state=Y,al(s,l,d,h),rl();var $=s.memoizedState;E!==rt||Y!==$||Is||n!==null&&n.dependencies!==null&&Wu(n.dependencies)?(typeof b=="function"&&(od(s,a,b,l),$=s.memoizedState),(et=Is||jp(s,a,et,l,Y,$,V)||n!==null&&n.dependencies!==null&&Wu(n.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,V)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=$),d.props=l,d.state=$,d.context=V,l=et):(typeof d.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),l=!1)}return d=l,_c(n,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,n!==null&&l?(s.child=ja(s,n.child,null,h),s.child=ja(s,null,a,h)):Ze(n,s,a,h),s.memoizedState=d.state,n=s.child):n=os(n,s,h),n}function Wp(n,s,a,l){return Zo(),s.flags|=256,Ze(n,s,a,l),s.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(n){return{baseLanes:n,cachePool:Bg()}}function dd(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Xn),n}function t0(n,s,a){var l=s.pendingProps,h=!1,d=(s.flags&128)!==0,E;if((E=d)||(E=n!==null&&n.memoizedState===null?!1:(je.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if($t){if(h?Ns(s):Os(),$t){var b=_e,V;if(V=b){t:{for(V=b,b=Ai;V.nodeType!==8;){if(!b){b=null;break t}if(V=ci(V.nextSibling),V===null){b=null;break t}}b=V}b!==null?(s.memoizedState={dehydrated:b,treeContext:Pr!==null?{id:es,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},V=Dn(18,null,null,0),V.stateNode=b,V.return=s,s.child=V,pn=s,_e=null,V=!0):V=!1}V||zr(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Xd(b)?s.lanes=32:s.lanes=536870912,null;as(s)}return b=l.children,l=l.fallback,h?(Os(),h=s.mode,b=vc({mode:"hidden",children:b},h),l=jr(l,h,a,null),b.return=s,l.return=s,b.sibling=l,s.child=b,h=s.child,h.memoizedState=fd(a),h.childLanes=dd(n,E,a),s.memoizedState=hd,l):(Ns(s),md(s,b))}if(V=n.memoizedState,V!==null&&(b=V.dehydrated,b!==null)){if(d)s.flags&256?(Ns(s),s.flags&=-257,s=gd(n,s,a)):s.memoizedState!==null?(Os(),s.child=n.child,s.flags|=128,s=null):(Os(),h=l.fallback,b=s.mode,l=vc({mode:"visible",children:l.children},b),h=jr(h,b,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,ja(s,n.child,null,a),l=s.child,l.memoizedState=fd(a),l.childLanes=dd(n,E,a),s.memoizedState=hd,s=h);else if(Ns(s),Xd(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var G=E.dgst;E=G,l=Error(r(419)),l.stack="",l.digest=E,Jo({value:l,source:null,stack:null}),s=gd(n,s,a)}else if(Ge||Wo(n,s,a,!1),E=(a&n.childLanes)!==0,Ge||E){if(E=ce,E!==null&&(l=a&-a,l=(l&42)!==0?1:Ts(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==V.retryLane))throw V.retryLane=l,Aa(n,l),Ln(E,n,l),Fp;b.data==="$?"||Nd(),s=gd(n,s,a)}else b.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=V.treeContext,_e=ci(b.nextSibling),pn=s,$t=!0,Br=null,Ai=!1,n!==null&&(Yn[Kn++]=es,Yn[Kn++]=ns,Yn[Kn++]=Pr,es=n.id,ns=n.overflow,Pr=s),s=md(s,l.children),s.flags|=4096);return s}return h?(Os(),h=l.fallback,b=s.mode,V=n.child,G=V.sibling,l=ts(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,G!==null?h=ts(G,h):(h=jr(h,b,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,b=n.child.memoizedState,b===null?b=fd(a):(V=b.cachePool,V!==null?(G=ke._currentValue,V=V.parent!==G?{parent:G,pool:G}:V):V=Bg(),b={baseLanes:b.baseLanes|a,cachePool:V}),h.memoizedState=b,h.childLanes=dd(n,E,a),s.memoizedState=hd,l):(Ns(s),a=n.child,n=a.sibling,a=ts(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=a,s.memoizedState=null,a)}function md(n,s){return s=vc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function vc(n,s){return n=Dn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function gd(n,s,a){return ja(s,n.child,null,a),n=md(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function e0(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),Nf(n.return,s,a)}function pd(n,s,a,l,h){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=s,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function n0(n,s,a){var l=s.pendingProps,h=l.revealOrder,d=l.tail;if(Ze(n,s,l.children,a),l=je.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&e0(n,a,s);else if(n.tag===19)e0(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(at(je,l),h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&gc(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),pd(s,!1,h,a,d);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&gc(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}pd(s,!0,a,null,d);break;case"together":pd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function os(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Us|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Wo(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=ts(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ts(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function yd(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Wu(n)))}function z4(n,s,a){switch(s.tag){case 3:Vt(s,s.stateNode.containerInfo),xs(s,ke,n.memoizedState.cache),Zo();break;case 27:case 5:Ee(s);break;case 4:Vt(s,s.stateNode.containerInfo);break;case 10:xs(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ns(s),s.flags|=128,null):(a&s.child.childLanes)!==0?t0(n,s,a):(Ns(s),n=os(n,s,a),n!==null?n.sibling:null);Ns(s);break;case 19:var h=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Wo(n,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return n0(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),at(je,je.current),l)break;return null;case 22:case 23:return s.lanes=0,$p(n,s,a);case 24:xs(s,ke,n.memoizedState.cache)}return os(n,s,a)}function i0(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ge=!0;else{if(!yd(n,a)&&(s.flags&128)===0)return Ge=!1,z4(n,s,a);Ge=(n.flags&131072)!==0}else Ge=!1,$t&&(s.flags&1048576)!==0&&Ng(s,Ju,s.index);switch(s.lanes=0,s.tag){case 16:t:{n=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Af(l)?(n=Qr(l,n),s.tag=1,s=Jp(null,s,l,n,a)):(s.tag=0,s=cd(null,s,l,n,a));else{if(l!=null){if(h=l.$$typeof,h===tt){s.tag=11,s=Qp(null,s,l,n,a);break t}else if(h===D){s.tag=14,s=Yp(null,s,l,n,a);break t}}throw s=Dt(l)||l,Error(r(306,s,""))}}return s;case 0:return cd(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Qr(l,s.pendingProps),Jp(n,s,l,h,a);case 3:t:{if(Vt(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;h=d.element,Bf(n,s),al(s,l,null,a);var E=s.memoizedState;if(l=E.cache,xs(s,ke,l),l!==d.cache&&Of(s,[ke],a,!0),rl(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=Wp(n,s,l,a);break t}else if(l!==h){h=Fn(Error(r(424)),s),Jo(h),s=Wp(n,s,l,a);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(_e=ci(n.firstChild),pn=s,$t=!0,Br=null,Ai=!0,a=Lp(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zo(),l===h){s=os(n,s,a);break t}Ze(n,s,l,a)}s=s.child}return s;case 26:return _c(n,s),n===null?(a=o2(s.type,null,s.pendingProps,null))?s.memoizedState=a:$t||(a=s.type,n=s.pendingProps,l=Nc(dt.current).createElement(a),l[Ne]=s,l[Ae]=n,We(l,a,n),Te(l),s.stateNode=l):s.memoizedState=o2(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Ee(s),n===null&&$t&&(l=s.stateNode=s2(s.type,s.pendingProps,dt.current),pn=s,Ai=!0,h=_e,Hs(s.type)?(Zd=h,_e=ci(l.firstChild)):_e=h),Ze(n,s,s.pendingProps.children,a),_c(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&$t&&((h=l=_e)&&(l=g6(l,s.type,s.pendingProps,Ai),l!==null?(s.stateNode=l,pn=s,_e=ci(l.firstChild),Ai=!1,h=!0):h=!1),h||zr(s)),Ee(s),h=s.type,d=s.pendingProps,E=n!==null?n.memoizedProps:null,l=d.children,Yd(h,d)?l=null:E!==null&&Yd(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=Qf(n,s,N4,null,null,a),xl._currentValue=h),_c(n,s),Ze(n,s,l,a),s.child;case 6:return n===null&&$t&&((n=a=_e)&&(a=p6(a,s.pendingProps,Ai),a!==null?(s.stateNode=a,pn=s,_e=null,n=!0):n=!1),n||zr(s)),null;case 13:return t0(n,s,a);case 4:return Vt(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=ja(s,null,l,a):Ze(n,s,l,a),s.child;case 11:return Qp(n,s,s.type,s.pendingProps,a);case 7:return Ze(n,s,s.pendingProps,a),s.child;case 8:return Ze(n,s,s.pendingProps.children,a),s.child;case 12:return Ze(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,xs(s,s.type,l.value),Ze(n,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Hr(s),h=an(h),l=l(h),s.flags|=1,Ze(n,s,l,a),s.child;case 14:return Yp(n,s,s.type,s.pendingProps,a);case 15:return Kp(n,s,s.type,s.pendingProps,a);case 19:return n0(n,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},n===null?(a=vc(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=ts(n.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return $p(n,s,a);case 24:return Hr(s),l=an(ke),n===null?(h=jf(),h===null&&(h=ce,d=Lf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),s.memoizedState={parent:l,cache:h},Uf(s),xs(s,ke,h)):((n.lanes&a)!==0&&(Bf(n,s),al(s,null,null,a),rl()),h=n.memoizedState,d=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),xs(s,ke,l)):(l=d.cache,xs(s,ke,l),l!==h.cache&&Of(s,[ke],a,!0))),Ze(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ls(n){n.flags|=4}function s0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!f2(s)){if(s=$n.current,s!==null&&((Ft&4194048)===Ft?Ri!==null:(Ft&62914560)!==Ft&&(Ft&536870912)===0||s!==Ri))throw il=Pf,zg;n.flags|=8192}}function Ec(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Do():536870912,n.lanes|=s,za|=s)}function dl(n,s){if(!$t)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ge(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function q4(n,s,a){var l=s.pendingProps;switch(Df(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(s),null;case 1:return ge(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ss(ke),ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Xo(s)?ls(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kg())),ge(s),null;case 26:return a=s.memoizedState,n===null?(ls(s),a!==null?(ge(s),s0(s,a)):(ge(s),s.flags&=-16777217)):a?a!==n.memoizedState?(ls(s),ge(s),s0(s,a)):(ge(s),s.flags&=-16777217):(n.memoizedProps!==l&&ls(s),ge(s),s.flags&=-16777217),null;case 27:sn(s),a=dt.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ls(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ge(s),null}n=gt.current,Xo(s)?Og(s):(n=s2(h,l,a),s.stateNode=n,ls(s))}return ge(s),null;case 5:if(sn(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&ls(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ge(s),null}if(n=gt.current,Xo(s))Og(s);else{switch(h=Nc(dt.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}n[Ne]=s,n[Ae]=l;t:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break t;for(;h.sibling===null;){if(h.return===null||h.return===s)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;t:switch(We(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&ls(s)}}return ge(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&ls(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=dt.current,Xo(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,h=pn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}n[Ne]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Z0(n.nodeValue,a)),n||zr(s)}else n=Nc(n).createTextNode(l),n[Ne]=s,s.stateNode=n}return ge(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=Xo(s),l!==null&&l.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ne]=s}else Zo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ge(s),h=!1}else h=kg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(as(s),s):(as(s),null)}if(as(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),Ec(s,s.updateQueue),ge(s),null;case 4:return ae(),n===null&&qd(s.stateNode.containerInfo),ge(s),null;case 10:return ss(s.type),ge(s),null;case 19:if(st(je),h=s.memoizedState,h===null)return ge(s),null;if(l=(s.flags&128)!==0,d=h.rendering,d===null)if(l)dl(h,!1);else{if(ve!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(d=gc(n),d!==null){for(s.flags|=128,dl(h,!1),n=d.updateQueue,s.updateQueue=n,Ec(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Vg(a,n),a=a.sibling;return at(je,je.current&1|2),s.child}n=n.sibling}h.tail!==null&&Ve()>bc&&(s.flags|=128,l=!0,dl(h,!1),s.lanes=4194304)}else{if(!l)if(n=gc(d),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,Ec(s,n),dl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!$t)return ge(s),null}else 2*Ve()-h.renderingStartTime>bc&&a!==536870912&&(s.flags|=128,l=!0,dl(h,!1),s.lanes=4194304);h.isBackwards?(d.sibling=s.child,s.child=d):(n=h.last,n!==null?n.sibling=d:s.child=d,h.last=d)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Ve(),s.sibling=null,n=je.current,at(je,l?n&1|2:n&1),s):(ge(s),null);case 22:case 23:return as(s),Gf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ge(s),s.subtreeFlags&6&&(s.flags|=8192)):ge(s),a=s.updateQueue,a!==null&&Ec(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&st(Gr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ss(ke),ge(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function H4(n,s){switch(Df(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ss(ke),ae(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return sn(s),null;case 13:if(as(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Zo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return st(je),null;case 4:return ae(),null;case 10:return ss(s.type),null;case 22:case 23:return as(s),Gf(),n!==null&&st(Gr),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ss(ke),null;case 25:return null;default:return null}}function r0(n,s){switch(Df(s),s.tag){case 3:ss(ke),ae();break;case 26:case 27:case 5:sn(s);break;case 4:ae();break;case 13:as(s);break;case 19:st(je);break;case 10:ss(s.type);break;case 22:case 23:as(s),Gf(),n!==null&&st(Gr);break;case 24:ss(ke)}}function ml(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&n)===n){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(b){oe(s,s.return,b)}}function Ls(n,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&n)===n){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,h=s;var V=a,G=b;try{G()}catch(et){oe(h,V,et)}}}l=l.next}while(l!==d)}}catch(et){oe(s,s.return,et)}}function a0(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{Yg(s,a)}catch(l){oe(n,n.return,l)}}}function o0(n,s,a){a.props=Qr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){oe(n,s,l)}}function gl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(h){oe(n,s,h)}}function xi(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){oe(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){oe(n,s,h)}else a.current=null}function l0(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){oe(n,n.return,h)}}function _d(n,s,a){try{var l=n.stateNode;c6(l,n.type,a,s),l[Ae]=s}catch(h){oe(n,n.return,h)}}function u0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Hs(n.type)||n.tag===4}function vd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||u0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Hs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ed(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Vc));else if(l!==4&&(l===27&&Hs(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Ed(n,s,a),n=n.sibling;n!==null;)Ed(n,s,a),n=n.sibling}function Tc(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&Hs(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Tc(n,s,a),n=n.sibling;n!==null;)Tc(n,s,a),n=n.sibling}function c0(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);We(s,l,a),s[Ne]=n,s[Ae]=a}catch(d){oe(n,n.return,d)}}var us=!1,be=!1,Td=!1,h0=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function G4(n,s){if(n=n.containerInfo,Fd=Uc,n=wg(n),vf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var E=0,b=-1,V=-1,G=0,et=0,rt=n,Y=null;e:for(;;){for(var $;rt!==a||h!==0&&rt.nodeType!==3||(b=E+h),rt!==d||l!==0&&rt.nodeType!==3||(V=E+l),rt.nodeType===3&&(E+=rt.nodeValue.length),($=rt.firstChild)!==null;)Y=rt,rt=$;for(;;){if(rt===n)break e;if(Y===a&&++G===h&&(b=E),Y===d&&++et===l&&(V=E),($=rt.nextSibling)!==null)break;rt=Y,Y=rt.parentNode}rt=$}a=b===-1||V===-1?null:{start:b,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:n,selectionRange:a},Uc=!1,Fe=s;Fe!==null;)if(s=Fe,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Fe=n;else for(;Fe!==null;){switch(s=Fe,d=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=s,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ct=Qr(a.type,h,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ct,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(wt){oe(a,a.return,wt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)$d(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":$d(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Fe=n;break}Fe=s.return}}function f0(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ks(n,a),l&4&&ml(5,a);break;case 1:if(ks(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(E){oe(a,a.return,E)}else{var h=Qr(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){oe(a,a.return,E)}}l&64&&a0(a),l&512&&gl(a,a.return);break;case 3:if(ks(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Yg(n,s)}catch(E){oe(a,a.return,E)}}break;case 27:s===null&&l&4&&c0(a);case 26:case 5:ks(n,a),s===null&&l&4&&l0(a),l&512&&gl(a,a.return);break;case 12:ks(n,a);break;case 13:ks(n,a),l&4&&g0(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=W4.bind(null,a),y6(n,a))));break;case 22:if(l=a.memoizedState!==null||us,!l){s=s!==null&&s.memoizedState!==null||be,h=us;var d=be;us=l,(be=s)&&!d?js(n,a,(a.subtreeFlags&8772)!==0):ks(n,a),us=h,be=d}break;case 30:break;default:ks(n,a)}}function d0(n){var s=n.alternate;s!==null&&(n.alternate=null,d0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ss(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var de=null,Tn=!1;function cs(n,s,a){for(a=a.child;a!==null;)m0(n,s,a),a=a.sibling}function m0(n,s,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Jt,a)}catch{}switch(a.tag){case 26:be||xi(a,s),cs(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:be||xi(a,s);var l=de,h=Tn;Hs(a.type)&&(de=a.stateNode,Tn=!1),cs(n,s,a),Sl(a.stateNode),de=l,Tn=h;break;case 5:be||xi(a,s);case 6:if(l=de,h=Tn,de=null,cs(n,s,a),de=l,Tn=h,de!==null)if(Tn)try{(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).removeChild(a.stateNode)}catch(d){oe(a,s,d)}else try{de.removeChild(a.stateNode)}catch(d){oe(a,s,d)}break;case 18:de!==null&&(Tn?(n=de,n2(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Vl(n)):n2(de,a.stateNode));break;case 4:l=de,h=Tn,de=a.stateNode.containerInfo,Tn=!0,cs(n,s,a),de=l,Tn=h;break;case 0:case 11:case 14:case 15:be||Ls(2,a,s),be||Ls(4,a,s),cs(n,s,a);break;case 1:be||(xi(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&o0(a,s,l)),cs(n,s,a);break;case 21:cs(n,s,a);break;case 22:be=(l=be)||a.memoizedState!==null,cs(n,s,a),be=l;break;default:cs(n,s,a)}}function g0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Vl(n)}catch(a){oe(s,s.return,a)}}function F4(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new h0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new h0),s;default:throw Error(r(435,n.tag))}}function wd(n,s){var a=F4(n);s.forEach(function(l){var h=t6.bind(null,n,l);a.has(l)||(a.add(l),l.then(h,h))})}function Mn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=n,E=s,b=E;t:for(;b!==null;){switch(b.tag){case 27:if(Hs(b.type)){de=b.stateNode,Tn=!1;break t}break;case 5:de=b.stateNode,Tn=!1;break t;case 3:case 4:de=b.stateNode.containerInfo,Tn=!0;break t}b=b.return}if(de===null)throw Error(r(160));m0(d,E,h),de=null,Tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)p0(s,n),s=s.sibling}var ui=null;function p0(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Mn(s,n),Vn(n),l&4&&(Ls(3,n,n.return),ml(3,n),Ls(5,n,n.return));break;case 1:Mn(s,n),Vn(n),l&512&&(be||a===null||xi(a,a.return)),l&64&&us&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ui;if(Mn(s,n),Vn(n),l&512&&(be||a===null||xi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Tr]||d[Ne]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),We(d,l,a),d[Ne]=n,Te(d),l=d;break t;case"link":var E=c2("link","href",h).get(l+(a.href||""));if(E){for(var b=0;b<E.length;b++)if(d=E[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(b,1);break e}}d=h.createElement(l),We(d,l,a),h.head.appendChild(d);break;case"meta":if(E=c2("meta","content",h).get(l+(a.content||""))){for(b=0;b<E.length;b++)if(d=E[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(b,1);break e}}d=h.createElement(l),We(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ne]=n,Te(d),l=d}n.stateNode=l}else h2(h,n.type,n.stateNode);else n.stateNode=u2(h,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?h2(h,n.type,n.stateNode):u2(h,l,n.memoizedProps)):l===null&&n.stateNode!==null&&_d(n,n.memoizedProps,a.memoizedProps)}break;case 27:Mn(s,n),Vn(n),l&512&&(be||a===null||xi(a,a.return)),a!==null&&l&4&&_d(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Mn(s,n),Vn(n),l&512&&(be||a===null||xi(a,a.return)),n.flags&32){h=n.stateNode;try{zn(h,"")}catch($){oe(n,n.return,$)}}l&4&&n.stateNode!=null&&(h=n.memoizedProps,_d(n,h,a!==null?a.memoizedProps:h)),l&1024&&(Td=!0);break;case 6:if(Mn(s,n),Vn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch($){oe(n,n.return,$)}}break;case 3:if(kc=null,h=ui,ui=Oc(s.containerInfo),Mn(s,n),ui=h,Vn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Vl(s.containerInfo)}catch($){oe(n,n.return,$)}Td&&(Td=!1,y0(n));break;case 4:l=ui,ui=Oc(n.stateNode.containerInfo),Mn(s,n),Vn(n),ui=l;break;case 12:Mn(s,n),Vn(n);break;case 13:Mn(s,n),Vn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xd=Ve()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,wd(n,l)));break;case 22:h=n.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,G=us,et=be;if(us=G||h,be=et||V,Mn(s,n),be=et,us=G,Vn(n),l&8192)t:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||V||us||be||Yr(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){V=a=s;try{if(d=V.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=V.stateNode;var rt=V.memoizedProps.style,Y=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;b.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch($){oe(V,V.return,$)}}}else if(s.tag===6){if(a===null){V=s;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch($){oe(V,V.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,wd(n,a))));break;case 19:Mn(s,n),Vn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,wd(n,l)));break;case 30:break;case 21:break;default:Mn(s,n),Vn(n)}}function Vn(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(u0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=vd(n);Tc(n,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(zn(E,""),a.flags&=-33);var b=vd(n);Tc(n,b,E);break;case 3:case 4:var V=a.stateNode.containerInfo,G=vd(n);Ed(n,G,V);break;default:throw Error(r(161))}}catch(et){oe(n,n.return,et)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function y0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;y0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ks(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)f0(n,s.alternate,s),s=s.sibling}function Yr(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Ls(4,s,s.return),Yr(s);break;case 1:xi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&o0(s,s.return,a),Yr(s);break;case 27:Sl(s.stateNode);case 26:case 5:xi(s,s.return),Yr(s);break;case 22:s.memoizedState===null&&Yr(s);break;case 30:Yr(s);break;default:Yr(s)}n=n.sibling}}function js(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=n,d=s,E=d.flags;switch(d.tag){case 0:case 11:case 15:js(h,d,a),ml(4,d);break;case 1:if(js(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){oe(l,l.return,G)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)Qg(V[h],b)}catch(G){oe(l,l.return,G)}}a&&E&64&&a0(d),gl(d,d.return);break;case 27:c0(d);case 26:case 5:js(h,d,a),a&&l===null&&E&4&&l0(d),gl(d,d.return);break;case 12:js(h,d,a);break;case 13:js(h,d,a),a&&E&4&&g0(h,d);break;case 22:d.memoizedState===null&&js(h,d,a),gl(d,d.return);break;case 30:break;default:js(h,d,a)}s=s.sibling}}function bd(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&tl(a))}function Sd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&tl(n))}function Ii(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_0(n,s,a,l),s=s.sibling}function _0(n,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Ii(n,s,a,l),h&2048&&ml(9,s);break;case 1:Ii(n,s,a,l);break;case 3:Ii(n,s,a,l),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&tl(n)));break;case 12:if(h&2048){Ii(n,s,a,l),n=s.stateNode;try{var d=s.memoizedProps,E=d.id,b=d.onPostCommit;typeof b=="function"&&b(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){oe(s,s.return,V)}}else Ii(n,s,a,l);break;case 13:Ii(n,s,a,l);break;case 23:break;case 22:d=s.stateNode,E=s.alternate,s.memoizedState!==null?d._visibility&2?Ii(n,s,a,l):pl(n,s):d._visibility&2?Ii(n,s,a,l):(d._visibility|=2,Pa(n,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&bd(E,s);break;case 24:Ii(n,s,a,l),h&2048&&Sd(s.alternate,s);break;default:Ii(n,s,a,l)}}function Pa(n,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var d=n,E=s,b=a,V=l,G=E.flags;switch(E.tag){case 0:case 11:case 15:Pa(d,E,b,V,h),ml(8,E);break;case 23:break;case 22:var et=E.stateNode;E.memoizedState!==null?et._visibility&2?Pa(d,E,b,V,h):pl(d,E):(et._visibility|=2,Pa(d,E,b,V,h)),h&&G&2048&&bd(E.alternate,E);break;case 24:Pa(d,E,b,V,h),h&&G&2048&&Sd(E.alternate,E);break;default:Pa(d,E,b,V,h)}s=s.sibling}}function pl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,h=l.flags;switch(l.tag){case 22:pl(a,l),h&2048&&bd(l.alternate,l);break;case 24:pl(a,l),h&2048&&Sd(l.alternate,l);break;default:pl(a,l)}s=s.sibling}}var yl=8192;function Ua(n){if(n.subtreeFlags&yl)for(n=n.child;n!==null;)v0(n),n=n.sibling}function v0(n){switch(n.tag){case 26:Ua(n),n.flags&yl&&n.memoizedState!==null&&D6(ui,n.memoizedState,n.memoizedProps);break;case 5:Ua(n);break;case 3:case 4:var s=ui;ui=Oc(n.stateNode.containerInfo),Ua(n),ui=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=yl,yl=16777216,Ua(n),yl=s):Ua(n));break;default:Ua(n)}}function E0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function _l(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Fe=l,w0(l,n)}E0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)T0(n),n=n.sibling}function T0(n){switch(n.tag){case 0:case 11:case 15:_l(n),n.flags&2048&&Ls(9,n,n.return);break;case 3:_l(n);break;case 12:_l(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,wc(n)):_l(n);break;default:_l(n)}}function wc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Fe=l,w0(l,n)}E0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Ls(8,s,s.return),wc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,wc(s));break;default:wc(s)}n=n.sibling}}function w0(n,s){for(;Fe!==null;){var a=Fe;switch(a.tag){case 0:case 11:case 15:Ls(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Fe=l;else t:for(a=n;Fe!==null;){l=Fe;var h=l.sibling,d=l.return;if(d0(l),l===a){Fe=null;break t}if(h!==null){h.return=d,Fe=h;break t}Fe=d}}}var Q4={getCacheForType:function(n){var s=an(ke),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},Y4=typeof WeakMap=="function"?WeakMap:Map,Wt=0,ce=null,Pt=null,Ft=0,te=0,Nn=null,Ps=!1,Ba=!1,Cd=!1,hs=0,ve=0,Us=0,Kr=0,Ad=0,Xn=0,za=0,vl=null,wn=null,Rd=!1,xd=0,bc=1/0,Sc=null,Bs=null,Je=0,zs=null,qa=null,Ha=0,Id=0,Dd=null,b0=null,El=0,Md=null;function On(){if((Wt&2)!==0&&Ft!==0)return Ft&-Ft;if(Z.T!==null){var n=Da;return n!==0?n:Pd()}return ws()}function S0(){Xn===0&&(Xn=(Ft&536870912)===0||$t?Io():536870912);var n=$n.current;return n!==null&&(n.flags|=32),Xn}function Ln(n,s,a){(n===ce&&(te===2||te===9)||n.cancelPendingCommit!==null)&&(Ga(n,0),qs(n,Ft,Xn,!1)),Hi(n,a),((Wt&2)===0||n!==ce)&&(n===ce&&((Wt&2)===0&&(Kr|=a),ve===4&&qs(n,Ft,Xn,!1)),Di(n))}function C0(n,s,a){if((Wt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&n.expiredLanes)===0||Er(n,s),h=l?X4(n,s):Od(n,s,!0),d=l;do{if(h===0){Ba&&!l&&qs(n,s,0,!1);break}else{if(a=n.current.alternate,d&&!K4(a)){h=Od(n,s,!1),d=!1;continue}if(h===2){if(d=s,n.errorRecoveryDisabledLanes&d)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var b=n;h=vl;var V=b.current.memoizedState.isDehydrated;if(V&&(Ga(b,E).flags|=256),E=Od(b,E,!1),E!==2){if(Cd&&!V){b.errorRecoveryDisabledLanes|=d,Kr|=d,h=4;break t}d=wn,wn=h,d!==null&&(wn===null?wn=d:wn.push.apply(wn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Ga(n,0),qs(n,s,0,!0);break}t:{switch(l=n,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:qs(l,s,Xn,!Ps);break t;case 2:wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=xd+300-Ve(),10<h)){if(qs(l,s,Xn,!Ps),oa(l,0,!0)!==0)break t;l.timeoutHandle=t2(A0.bind(null,l,a,wn,Sc,Rd,s,Xn,Kr,za,Ps,d,2,-0,0),h);break t}A0(l,a,wn,Sc,Rd,s,Xn,Kr,za,Ps,d,0,-0,0)}}break}while(!0);Di(n)}function A0(n,s,a,l,h,d,E,b,V,G,et,rt,Y,$){if(n.timeoutHandle=-1,rt=s.subtreeFlags,(rt&8192||(rt&16785408)===16785408)&&(Rl={stylesheets:null,count:0,unsuspend:I6},v0(s),rt=M6(),rt!==null)){n.cancelPendingCommit=rt(N0.bind(null,n,s,d,a,l,h,E,b,V,et,1,Y,$)),qs(n,d,E,!G);return}N0(n,s,d,a,l,h,E,b,V)}function K4(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!In(d(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function qs(n,s,a,l){s&=~Ad,s&=~Kr,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var h=s;0<h;){var d=31-ue(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&gi(n,a,s)}function Cc(){return(Wt&6)===0?(Tl(0),!1):!0}function Vd(){if(Pt!==null){if(te===0)var n=Pt.return;else n=Pt,is=qr=null,$f(n),ka=null,hl=0,n=Pt;for(;n!==null;)r0(n.alternate,n),n=n.return;Pt=null}}function Ga(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,f6(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Vd(),ce=n,Pt=a=ts(n.current,null),Ft=s,te=0,Nn=null,Ps=!1,Ba=Er(n,s),Cd=!1,za=Xn=Ad=Kr=Us=ve=0,wn=vl=null,Rd=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var h=31-ue(l),d=1<<h;s|=n[h],l&=~d}return hs=s,Yu(),a}function R0(n,s){Lt=null,Z.H=fc,s===nl||s===nc?(s=Gg(),te=3):s===zg?(s=Gg(),te=4):te=s===Fp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Nn=s,Pt===null&&(ve=1,yc(n,Fn(s,n.current)))}function x0(){var n=Z.H;return Z.H=fc,n===null?fc:n}function I0(){var n=Z.A;return Z.A=Q4,n}function Nd(){ve=4,Ps||(Ft&4194048)!==Ft&&$n.current!==null||(Ba=!0),(Us&134217727)===0&&(Kr&134217727)===0||ce===null||qs(ce,Ft,Xn,!1)}function Od(n,s,a){var l=Wt;Wt|=2;var h=x0(),d=I0();(ce!==n||Ft!==s)&&(Sc=null,Ga(n,s)),s=!1;var E=ve;t:do try{if(te!==0&&Pt!==null){var b=Pt,V=Nn;switch(te){case 8:Vd(),E=6;break t;case 3:case 2:case 9:case 6:$n.current===null&&(s=!0);var G=te;if(te=0,Nn=null,Fa(n,b,V,G),a&&Ba){E=0;break t}break;default:G=te,te=0,Nn=null,Fa(n,b,V,G)}}$4(),E=ve;break}catch(et){R0(n,et)}while(!0);return s&&n.shellSuspendCounter++,is=qr=null,Wt=l,Z.H=h,Z.A=d,Pt===null&&(ce=null,Ft=0,Yu()),E}function $4(){for(;Pt!==null;)D0(Pt)}function X4(n,s){var a=Wt;Wt|=2;var l=x0(),h=I0();ce!==n||Ft!==s?(Sc=null,bc=Ve()+500,Ga(n,s)):Ba=Er(n,s);t:do try{if(te!==0&&Pt!==null){s=Pt;var d=Nn;e:switch(te){case 1:te=0,Nn=null,Fa(n,s,d,1);break;case 2:case 9:if(qg(d)){te=0,Nn=null,M0(s);break}s=function(){te!==2&&te!==9||ce!==n||(te=7),Di(n)},d.then(s,s);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:qg(d)?(te=0,Nn=null,M0(s)):(te=0,Nn=null,Fa(n,s,d,7));break;case 5:var E=null;switch(Pt.tag){case 26:E=Pt.memoizedState;case 5:case 27:var b=Pt;if(!E||f2(E)){te=0,Nn=null;var V=b.sibling;if(V!==null)Pt=V;else{var G=b.return;G!==null?(Pt=G,Ac(G)):Pt=null}break e}}te=0,Nn=null,Fa(n,s,d,5);break;case 6:te=0,Nn=null,Fa(n,s,d,6);break;case 8:Vd(),ve=6;break t;default:throw Error(r(462))}}Z4();break}catch(et){R0(n,et)}while(!0);return is=qr=null,Z.H=l,Z.A=h,Wt=a,Pt!==null?0:(ce=null,Ft=0,Yu(),ve)}function Z4(){for(;Pt!==null&&!fn();)D0(Pt)}function D0(n){var s=i0(n.alternate,n,hs);n.memoizedProps=n.pendingProps,s===null?Ac(n):Pt=s}function M0(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=Zp(a,s,s.pendingProps,s.type,void 0,Ft);break;case 11:s=Zp(a,s,s.pendingProps,s.type.render,s.ref,Ft);break;case 5:$f(s);default:r0(a,s),s=Pt=Vg(s,hs),s=i0(a,s,hs)}n.memoizedProps=n.pendingProps,s===null?Ac(n):Pt=s}function Fa(n,s,a,l){is=qr=null,$f(s),ka=null,hl=0;var h=s.return;try{if(B4(n,h,s,a,Ft)){ve=1,yc(n,Fn(a,n.current)),Pt=null;return}}catch(d){if(h!==null)throw Pt=h,d;ve=1,yc(n,Fn(a,n.current)),Pt=null;return}s.flags&32768?($t||l===1?n=!0:Ba||(Ft&536870912)!==0?n=!1:(Ps=n=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),V0(s,n)):Ac(s)}function Ac(n){var s=n;do{if((s.flags&32768)!==0){V0(s,Ps);return}n=s.return;var a=q4(s.alternate,s,hs);if(a!==null){Pt=a;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=n}while(s!==null);ve===0&&(ve=5)}function V0(n,s){do{var a=H4(n.alternate,n);if(a!==null){a.flags&=32767,Pt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Pt=n;return}Pt=n=a}while(n!==null);ve=6,Pt=null}function N0(n,s,a,l,h,d,E,b,V){n.cancelPendingCommit=null;do Rc();while(Je!==0);if((Wt&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=Sf,Mo(n,a,d,E,b,V),n===ce&&(Pt=ce=null,Ft=0),qa=s,zs=n,Ha=a,Id=d,Dd=h,b0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,e6(vn,function(){return P0(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null,h=ut.p,ut.p=2,E=Wt,Wt|=4;try{G4(n,s,a)}finally{Wt=E,ut.p=h,Z.T=l}}Je=1,O0(),L0(),k0()}}function O0(){if(Je===1){Je=0;var n=zs,s=qa,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Z.T,Z.T=null;var l=ut.p;ut.p=2;var h=Wt;Wt|=4;try{p0(s,n);var d=Qd,E=wg(n.containerInfo),b=d.focusedElem,V=d.selectionRange;if(E!==b&&b&&b.ownerDocument&&Tg(b.ownerDocument.documentElement,b)){if(V!==null&&vf(b)){var G=V.start,et=V.end;if(et===void 0&&(et=G),"selectionStart"in b)b.selectionStart=G,b.selectionEnd=Math.min(et,b.value.length);else{var rt=b.ownerDocument||document,Y=rt&&rt.defaultView||window;if(Y.getSelection){var $=Y.getSelection(),Ct=b.textContent.length,wt=Math.min(V.start,Ct),se=V.end===void 0?wt:Math.min(V.end,Ct);!$.extend&&wt>se&&(E=se,se=wt,wt=E);var B=Eg(b,wt),j=Eg(b,se);if(B&&j&&($.rangeCount!==1||$.anchorNode!==B.node||$.anchorOffset!==B.offset||$.focusNode!==j.node||$.focusOffset!==j.offset)){var q=rt.createRange();q.setStart(B.node,B.offset),$.removeAllRanges(),wt>se?($.addRange(q),$.extend(j.node,j.offset)):(q.setEnd(j.node,j.offset),$.addRange(q))}}}}for(rt=[],$=b;$=$.parentNode;)$.nodeType===1&&rt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<rt.length;b++){var it=rt[b];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}Uc=!!Fd,Qd=Fd=null}finally{Wt=h,ut.p=l,Z.T=a}}n.current=s,Je=2}}function L0(){if(Je===2){Je=0;var n=zs,s=qa,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Z.T,Z.T=null;var l=ut.p;ut.p=2;var h=Wt;Wt|=4;try{f0(n,s.alternate,s)}finally{Wt=h,ut.p=l,Z.T=a}}Je=3}}function k0(){if(Je===4||Je===3){Je=0,yn();var n=zs,s=qa,a=Ha,l=b0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Je=5:(Je=0,qa=zs=null,j0(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(Bs=null),la(a),s=s.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Jt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Z.T,h=ut.p,ut.p=2,Z.T=null;try{for(var d=n.onRecoverableError,E=0;E<l.length;E++){var b=l[E];d(b.value,{componentStack:b.stack})}}finally{Z.T=s,ut.p=h}}(Ha&3)!==0&&Rc(),Di(n),h=n.pendingLanes,(a&4194090)!==0&&(h&42)!==0?n===Md?El++:(El=0,Md=n):El=0,Tl(0)}}function j0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,tl(s)))}function Rc(n){return O0(),L0(),k0(),P0()}function P0(){if(Je!==5)return!1;var n=zs,s=Id;Id=0;var a=la(Ha),l=Z.T,h=ut.p;try{ut.p=32>a?32:a,Z.T=null,a=Dd,Dd=null;var d=zs,E=Ha;if(Je=0,qa=zs=null,Ha=0,(Wt&6)!==0)throw Error(r(331));var b=Wt;if(Wt|=4,T0(d.current),_0(d,d.current,E,a),Wt=b,Tl(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Jt,d)}catch{}return!0}finally{ut.p=h,Z.T=l,j0(n,s)}}function U0(n,s,a){s=Fn(a,s),s=ud(n.stateNode,s,2),n=Ms(n,s,2),n!==null&&(Hi(n,2),Di(n))}function oe(n,s,a){if(n.tag===3)U0(n,n,a);else for(;s!==null;){if(s.tag===3){U0(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Bs===null||!Bs.has(l))){n=Fn(a,n),a=Hp(2),l=Ms(s,a,2),l!==null&&(Gp(a,l,s,n),Hi(l,2),Di(l));break}}s=s.return}}function Ld(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Y4;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Cd=!0,h.add(a),n=J4.bind(null,n,s,a),s.then(n,n))}function J4(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ce===n&&(Ft&a)===a&&(ve===4||ve===3&&(Ft&62914560)===Ft&&300>Ve()-xd?(Wt&2)===0&&Ga(n,0):Ad|=a,za===Ft&&(za=0)),Di(n)}function B0(n,s){s===0&&(s=Do()),n=Aa(n,s),n!==null&&(Hi(n,s),Di(n))}function W4(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),B0(n,a)}function t6(n,s){var a=0;switch(n.tag){case 13:var l=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),B0(n,a)}function e6(n,s){return hn(n,s)}var xc=null,Qa=null,kd=!1,Ic=!1,jd=!1,$r=0;function Di(n){n!==Qa&&n.next===null&&(Qa===null?xc=Qa=n:Qa=Qa.next=n),Ic=!0,kd||(kd=!0,i6())}function Tl(n,s){if(!jd&&Ic){jd=!0;do for(var a=!1,l=xc;l!==null;){if(n!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-ue(42|n)+1)-1,d&=h&~(E&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,G0(l,d))}else d=Ft,d=oa(l,l===ce?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Er(l,d)||(a=!0,G0(l,d));l=l.next}while(a);jd=!1}}function n6(){z0()}function z0(){Ic=kd=!1;var n=0;$r!==0&&(h6()&&(n=$r),$r=0);for(var s=Ve(),a=null,l=xc;l!==null;){var h=l.next,d=q0(l,s);d===0?(l.next=null,a===null?xc=h:a.next=h,h===null&&(Qa=a)):(a=l,(n!==0||(d&3)!==0)&&(Ic=!0)),l=h}Tl(n)}function q0(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,h=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var E=31-ue(d),b=1<<E,V=h[E];V===-1?((b&a)===0||(b&l)!==0)&&(h[E]=xo(b,s)):V<=s&&(n.expiredLanes|=b),d&=~b}if(s=ce,a=Ft,a=oa(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(te===2||te===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ke(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Er(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&Ke(l),la(a)){case 2:case 8:a=ze;break;case 32:a=vn;break;case 268435456:a=ii;break;default:a=vn}return l=H0.bind(null,n),a=hn(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&Ke(l),n.callbackPriority=2,n.callbackNode=null,2}function H0(n,s){if(Je!==0&&Je!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Rc()&&n.callbackNode!==a)return null;var l=Ft;return l=oa(n,n===ce?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(C0(n,l,s),q0(n,Ve()),n.callbackNode!=null&&n.callbackNode===a?H0.bind(null,n):null)}function G0(n,s){if(Rc())return null;C0(n,s,!0)}function i6(){d6(function(){(Wt&6)!==0?hn(_n,n6):z0()})}function Pd(){return $r===0&&($r=Io()),$r}function F0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ma(""+n)}function Q0(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function s6(n,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var d=F0((h[Ae]||null).action),E=l.submitter;E&&(s=(s=E[Ae]||null)?F0(s.formAction):E.getAttribute("formAction"),s!==null&&(d=s,E=null));var b=new ga("action","action",null,l,h);n.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($r!==0){var V=E?Q0(h,E):new FormData(h);sd(a,{pending:!0,data:V,method:h.method,action:d},null,V)}}else typeof d=="function"&&(b.preventDefault(),V=E?Q0(h,E):new FormData(h),sd(a,{pending:!0,data:V,method:h.method,action:d},d,V))},currentTarget:h}]})}}for(var Ud=0;Ud<bf.length;Ud++){var Bd=bf[Ud],r6=Bd.toLowerCase(),a6=Bd[0].toUpperCase()+Bd.slice(1);li(r6,"on"+a6)}li(Cg,"onAnimationEnd"),li(Ag,"onAnimationIteration"),li(Rg,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(b4,"onTransitionRun"),li(S4,"onTransitionStart"),li(C4,"onTransitionCancel"),li(xg,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl));function Y0(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],h=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var E=l.length-1;0<=E;E--){var b=l[E],V=b.instance,G=b.currentTarget;if(b=b.listener,V!==d&&h.isPropagationStopped())break t;d=b,h.currentTarget=G;try{d(h)}catch(et){pc(et)}h.currentTarget=null,d=V}else for(E=0;E<l.length;E++){if(b=l[E],V=b.instance,G=b.currentTarget,b=b.listener,V!==d&&h.isPropagationStopped())break t;d=b,h.currentTarget=G;try{d(h)}catch(et){pc(et)}h.currentTarget=null,d=V}}}}function Ut(n,s){var a=s[No];a===void 0&&(a=s[No]=new Set);var l=n+"__bubble";a.has(l)||(K0(s,n,2,!1),a.add(l))}function zd(n,s,a){var l=0;s&&(l|=4),K0(a,n,l,s)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function qd(n){if(!n[Dc]){n[Dc]=!0,Oo.forEach(function(a){a!=="selectionchange"&&(o6.has(a)||zd(a,!1,n),zd(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Dc]||(s[Dc]=!0,zd("selectionchange",!1,s))}}function K0(n,s,a,l){switch(_2(s)){case 2:var h=O6;break;case 8:h=L6;break;default:h=n1}a=h.bind(null,s,a,n),h=void 0,!Hn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function Hd(n,s,a,l,h){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===h)break;if(E===4)for(E=l.return;E!==null;){var V=E.tag;if((V===3||V===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;b!==null;){if(E=Gi(b),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){l=d=E;continue t}b=b.parentNode}}l=l.return}Vu(function(){var G=d,et=qn(a),rt=[];t:{var Y=Ig.get(n);if(Y!==void 0){var $=ga,Ct=n;switch(n){case"keypress":if(Ti(a)===0)break t;case"keydown":case"keyup":$=Ta;break;case"focusin":Ct="focus",$=_a;break;case"focusout":Ct="blur",$=_a;break;case"beforeblur":case"afterblur":$=_a;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Bu;break;case Cg:case Ag:case Rg:$=va;break;case xg:$=qu;break;case"scroll":case"scrollend":$=Nu;break;case"wheel":$=wa;break;case"copy":case"cut":case"paste":$=Ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Qo;break;case"toggle":case"beforetoggle":$=Gu}var wt=(s&4)!==0,se=!wt&&(n==="scroll"||n==="scrollend"),B=wt?Y!==null?Y+"Capture":null:Y;wt=[];for(var j=G,q;j!==null;){var it=j;if(q=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||q===null||B===null||(it=xr(j,B),it!=null&&wt.push(bl(j,it,q))),se)break;j=j.return}0<wt.length&&(Y=new $(Y,Ct,null,a,et),rt.push({event:Y,listeners:wt}))}}if((s&7)===0){t:{if(Y=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",Y&&a!==Ki&&(Ct=a.relatedTarget||a.fromElement)&&(Gi(Ct)||Ct[Bn]))break t;if(($||Y)&&(Y=et.window===et?et:(Y=et.ownerDocument)?Y.defaultView||Y.parentWindow:window,$?(Ct=a.relatedTarget||a.toElement,$=G,Ct=Ct?Gi(Ct):null,Ct!==null&&(se=u(Ct),wt=Ct.tag,Ct!==se||wt!==5&&wt!==27&&wt!==6)&&(Ct=null)):($=null,Ct=G),$!==Ct)){if(wt=Gn,it="onMouseLeave",B="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(wt=Qo,it="onPointerLeave",B="onPointerEnter",j="pointer"),se=$==null?Y:yi($),q=Ct==null?Y:yi(Ct),Y=new wt(it,j+"leave",$,a,et),Y.target=se,Y.relatedTarget=q,it=null,Gi(et)===G&&(wt=new wt(B,j+"enter",Ct,a,et),wt.target=q,wt.relatedTarget=se,it=wt),se=it,$&&Ct)e:{for(wt=$,B=Ct,j=0,q=wt;q;q=Ya(q))j++;for(q=0,it=B;it;it=Ya(it))q++;for(;0<j-q;)wt=Ya(wt),j--;for(;0<q-j;)B=Ya(B),q--;for(;j--;){if(wt===B||B!==null&&wt===B.alternate)break e;wt=Ya(wt),B=Ya(B)}wt=null}else wt=null;$!==null&&$0(rt,Y,$,wt,!1),Ct!==null&&se!==null&&$0(rt,se,Ct,wt,!0)}}t:{if(Y=G?yi(G):window,$=Y.nodeName&&Y.nodeName.toLowerCase(),$==="select"||$==="input"&&Y.type==="file")var yt=mg;else if(Le(Y))if(gg)yt=E4;else{yt=_4;var jt=y4}else $=Y.nodeName,!$||$.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&Uo(G.elementType)&&(yt=mg):yt=v4;if(yt&&(yt=yt(n,G))){Wi(rt,yt,a,et);break t}jt&&jt(n,Y,G),n==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&As(Y,"number",Y.value)}switch(jt=G?yi(G):window,n){case"focusin":(Le(jt)||jt.contentEditable==="true")&&(ba=jt,Ef=G,$o=null);break;case"focusout":$o=Ef=ba=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,bg(rt,a,et);break;case"selectionchange":if(w4)break;case"keydown":case"keyup":bg(rt,a,et)}var vt;if(Si)t:{switch(n){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else Ht?J(n,a)&&(bt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(bt="onCompositionStart");bt&&(v&&a.locale!=="ko"&&(Ht||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Ht&&(vt=zo()):(Ei=et,Rs="value"in Ei?Ei.value:Ei.textContent,Ht=!0)),jt=Mc(G,bt),0<jt.length&&(bt=new Go(bt,n,null,a,et),rt.push({event:bt,listeners:jt}),vt?bt.data=vt:(vt=ft(a),vt!==null&&(bt.data=vt)))),(vt=p?Oe(n,a):Gt(n,a))&&(bt=Mc(G,"onBeforeInput"),0<bt.length&&(jt=new Go("onBeforeInput","beforeinput",null,a,et),rt.push({event:jt,listeners:bt}),jt.data=vt)),s6(rt,n,G,a,et)}Y0(rt,s)})}function bl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Mc(n,s){for(var a=s+"Capture",l=[];n!==null;){var h=n,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=xr(n,a),h!=null&&l.unshift(bl(n,h,d)),h=xr(n,s),h!=null&&l.push(bl(n,h,d))),n.tag===3)return l;n=n.return}return[]}function Ya(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $0(n,s,a,l,h){for(var d=s._reactName,E=[];a!==null&&a!==l;){var b=a,V=b.alternate,G=b.stateNode;if(b=b.tag,V!==null&&V===l)break;b!==5&&b!==26&&b!==27||G===null||(V=G,h?(G=xr(a,d),G!=null&&E.unshift(bl(a,G,V))):h||(G=xr(a,d),G!=null&&E.push(bl(a,G,V)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var l6=/\r\n?/g,u6=/\u0000|\uFFFD/g;function X0(n){return(typeof n=="string"?n:""+n).replace(l6,`
`).replace(u6,"")}function Z0(n,s){return s=X0(s),X0(n)===s}function Vc(){}function ie(n,s,a,l,h,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||zn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&zn(n,""+l);break;case"className":_i(n,"class",l);break;case"tabIndex":_i(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(n,a,l);break;case"style":Po(n,l,d);break;case"data":if(s!=="object"){_i(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ma(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&ie(n,s,"name",h.name,h,null),ie(n,s,"formEncType",h.formEncType,h,null),ie(n,s,"formMethod",h.formMethod,h,null),ie(n,s,"formTarget",h.formTarget,h,null)):(ie(n,s,"encType",h.encType,h,null),ie(n,s,"method",h.method,h,null),ie(n,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ma(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Vc);break;case"onScroll":l!=null&&Ut("scroll",n);break;case"onScrollEnd":l!=null&&Ut("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=ma(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ut("beforetoggle",n),Ut("toggle",n),Cs(n,"popover",l);break;case"xlinkActuate":$e(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$e(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$e(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$e(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$e(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$e(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$e(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$e(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$e(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Cs(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=df.get(a)||a,Cs(n,a,l))}}function Gd(n,s,a,l,h,d){switch(a){case"style":Po(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?zn(n,l):(typeof l=="number"||typeof l=="bigint")&&zn(n,""+l);break;case"onScroll":l!=null&&Ut("scroll",n);break;case"onScrollEnd":l!=null&&Ut("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Vc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),d=n[Ae]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(s,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,h);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Cs(n,a,l)}}}function We(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",n),Ut("load",n);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ie(n,s,d,E,a,null)}}h&&ie(n,s,"srcSet",a.srcSet,a,null),l&&ie(n,s,"src",a.src,a,null);return;case"input":Ut("invalid",n);var b=d=E=h=null,V=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var et=a[l];if(et!=null)switch(l){case"name":h=et;break;case"type":E=et;break;case"checked":V=et;break;case"defaultChecked":G=et;break;case"value":d=et;break;case"defaultValue":b=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,s));break;default:ie(n,s,l,et,a,null)}}Cr(n,d,b,V,G,E,h,!1),da(n);return;case"select":Ut("invalid",n),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:ie(n,s,h,b,a,null)}s=d,a=E,n.multiple=!!l,s!=null?Yi(n,!!l,s,!1):a!=null&&Yi(n,!!l,a,!0);return;case"textarea":Ut("invalid",n),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(b=a[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:ie(n,s,E,b,a,null)}Ar(n,l,h,d),da(n);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ie(n,s,V,l,a,null)}return;case"dialog":Ut("beforetoggle",n),Ut("toggle",n),Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":Ut("load",n);break;case"video":case"audio":for(l=0;l<wl.length;l++)Ut(wl[l],n);break;case"image":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"embed":case"source":case"link":Ut("error",n),Ut("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ie(n,s,G,l,a,null)}return;default:if(Uo(s)){for(et in a)a.hasOwnProperty(et)&&(l=a[et],l!==void 0&&Gd(n,s,et,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ie(n,s,b,l,a,null))}function c6(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,b=null,V=null,G=null,et=null;for($ in a){var rt=a[$];if(a.hasOwnProperty($)&&rt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":V=rt;default:l.hasOwnProperty($)||ie(n,s,$,null,l,rt)}}for(var Y in l){var $=l[Y];if(rt=a[Y],l.hasOwnProperty(Y)&&($!=null||rt!=null))switch(Y){case"type":d=$;break;case"name":h=$;break;case"checked":G=$;break;case"defaultChecked":et=$;break;case"value":E=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==rt&&ie(n,s,Y,$,l,rt)}}xn(n,E,b,V,G,et,d,h);return;case"select":$=E=b=Y=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":$=V;default:l.hasOwnProperty(d)||ie(n,s,d,null,l,V)}for(h in l)if(d=l[h],V=a[h],l.hasOwnProperty(h)&&(d!=null||V!=null))switch(h){case"value":Y=d;break;case"defaultValue":b=d;break;case"multiple":E=d;default:d!==V&&ie(n,s,h,d,l,V)}s=b,a=E,l=$,Y!=null?Yi(n,!!a,Y,!1):!!l!=!!a&&(s!=null?Yi(n,!!a,s,!0):Yi(n,!!a,a?[]:"",!1));return;case"textarea":$=Y=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ie(n,s,b,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":Y=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ie(n,s,E,h,l,d)}ee(n,Y,$);return;case"option":for(var Ct in a)if(Y=a[Ct],a.hasOwnProperty(Ct)&&Y!=null&&!l.hasOwnProperty(Ct))switch(Ct){case"selected":n.selected=!1;break;default:ie(n,s,Ct,null,l,Y)}for(V in l)if(Y=l[V],$=a[V],l.hasOwnProperty(V)&&Y!==$&&(Y!=null||$!=null))switch(V){case"selected":n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ie(n,s,V,Y,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in a)Y=a[wt],a.hasOwnProperty(wt)&&Y!=null&&!l.hasOwnProperty(wt)&&ie(n,s,wt,null,l,Y);for(G in l)if(Y=l[G],$=a[G],l.hasOwnProperty(G)&&Y!==$&&(Y!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:ie(n,s,G,Y,l,$)}return;default:if(Uo(s)){for(var se in a)Y=a[se],a.hasOwnProperty(se)&&Y!==void 0&&!l.hasOwnProperty(se)&&Gd(n,s,se,void 0,l,Y);for(et in l)Y=l[et],$=a[et],!l.hasOwnProperty(et)||Y===$||Y===void 0&&$===void 0||Gd(n,s,et,Y,l,$);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!l.hasOwnProperty(B)&&ie(n,s,B,null,l,Y);for(rt in l)Y=l[rt],$=a[rt],!l.hasOwnProperty(rt)||Y===$||Y==null&&$==null||ie(n,s,rt,Y,l,$)}var Fd=null,Qd=null;function Nc(n){return n.nodeType===9?n:n.ownerDocument}function J0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function W0(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Yd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kd=null;function h6(){var n=window.event;return n&&n.type==="popstate"?n===Kd?!1:(Kd=n,!0):(Kd=null,!1)}var t2=typeof setTimeout=="function"?setTimeout:void 0,f6=typeof clearTimeout=="function"?clearTimeout:void 0,e2=typeof Promise=="function"?Promise:void 0,d6=typeof queueMicrotask=="function"?queueMicrotask:typeof e2<"u"?function(n){return e2.resolve(null).then(n).catch(m6)}:t2;function m6(n){setTimeout(function(){throw n})}function Hs(n){return n==="head"}function n2(n,s){var a=s,l=0,h=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&Sl(E.documentElement),a&2&&Sl(E.body),a&4)for(a=E.head,Sl(a),E=a.firstChild;E;){var b=E.nextSibling,V=E.nodeName;E[Tr]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=b}}if(h===0){n.removeChild(d),Vl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Vl(s)}function $d(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$d(a),Ss(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function g6(n,s,a,l){for(;n.nodeType===1;){var h=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Tr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ci(n.nextSibling),n===null)break}return null}function p6(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ci(n.nextSibling),n===null))return null;return n}function Xd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function y6(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ci(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var Zd=null;function i2(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function s2(n,s,a){switch(s=Nc(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Sl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ss(n)}var Zn=new Map,r2=new Set;function Oc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fs=ut.d;ut.d={f:_6,r:v6,D:E6,C:T6,L:w6,m:b6,X:C6,S:S6,M:A6};function _6(){var n=fs.f(),s=Cc();return n||s}function v6(n){var s=pi(n);s!==null&&s.tag===5&&s.type==="form"?Cp(s):fs.r(n)}var Ka=typeof document>"u"?null:document;function a2(n,s,a){var l=Ka;if(l&&typeof s=="string"&&s){var h=Re(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),r2.has(h)||(r2.add(h),n={rel:n,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),We(s,"link",n),Te(s),l.head.appendChild(s)))}}function E6(n){fs.D(n),a2("dns-prefetch",n,null)}function T6(n,s){fs.C(n,s),a2("preconnect",n,s)}function w6(n,s,a){fs.L(n,s,a);var l=Ka;if(l&&n&&s){var h='link[rel="preload"][as="'+Re(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Re(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Re(a.imageSizes)+'"]')):h+='[href="'+Re(n)+'"]';var d=h;switch(s){case"style":d=$a(n);break;case"script":d=Xa(n)}Zn.has(d)||(n=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Zn.set(d,n),l.querySelector(h)!==null||s==="style"&&l.querySelector(Cl(d))||s==="script"&&l.querySelector(Al(d))||(s=l.createElement("link"),We(s,"link",n),Te(s),l.head.appendChild(s)))}}function b6(n,s){fs.m(n,s);var a=Ka;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Re(l)+'"][href="'+Re(n)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Xa(n)}if(!Zn.has(d)&&(n=_({rel:"modulepreload",href:n},s),Zn.set(d,n),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Al(d)))return}l=a.createElement("link"),We(l,"link",n),Te(l),a.head.appendChild(l)}}}function S6(n,s,a){fs.S(n,s,a);var l=Ka;if(l&&n){var h=dn(l).hoistableStyles,d=$a(n);s=s||"default";var E=h.get(d);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(Cl(d)))b.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Zn.get(d))&&Jd(n,a);var V=E=l.createElement("link");Te(V),We(V,"link",n),V._p=new Promise(function(G,et){V.onload=G,V.onerror=et}),V.addEventListener("load",function(){b.loading|=1}),V.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Lc(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:b},h.set(d,E)}}}function C6(n,s){fs.X(n,s);var a=Ka;if(a&&n){var l=dn(a).hoistableScripts,h=Xa(n),d=l.get(h);d||(d=a.querySelector(Al(h)),d||(n=_({src:n,async:!0},s),(s=Zn.get(h))&&Wd(n,s),d=a.createElement("script"),Te(d),We(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function A6(n,s){fs.M(n,s);var a=Ka;if(a&&n){var l=dn(a).hoistableScripts,h=Xa(n),d=l.get(h);d||(d=a.querySelector(Al(h)),d||(n=_({src:n,async:!0,type:"module"},s),(s=Zn.get(h))&&Wd(n,s),d=a.createElement("script"),Te(d),We(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function o2(n,s,a,l){var h=(h=dt.current)?Oc(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=$a(a.href),a=dn(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=$a(a.href);var d=dn(h).hoistableStyles,E=d.get(n);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,E),(d=h.querySelector(Cl(n)))&&!d._p&&(E.instance=d,E.state.loading=5),Zn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(n,a),d||R6(h,n,a,E.state))),s&&l===null)throw Error(r(528,""));return E}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xa(a),a=dn(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function $a(n){return'href="'+Re(n)+'"'}function Cl(n){return'link[rel="stylesheet"]['+n+"]"}function l2(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function R6(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),We(s,"link",a),Te(s),n.head.appendChild(s))}function Xa(n){return'[src="'+Re(n)+'"]'}function Al(n){return"script[async]"+n}function u2(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+Re(a.href)+'"]');if(l)return s.instance=l,Te(l),l;var h=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Te(l),We(l,"style",h),Lc(l,a.precedence,n),s.instance=l;case"stylesheet":h=$a(a.href);var d=n.querySelector(Cl(h));if(d)return s.state.loading|=4,s.instance=d,Te(d),d;l=l2(a),(h=Zn.get(h))&&Jd(l,h),d=(n.ownerDocument||n).createElement("link"),Te(d);var E=d;return E._p=new Promise(function(b,V){E.onload=b,E.onerror=V}),We(d,"link",l),s.state.loading|=4,Lc(d,a.precedence,n),s.instance=d;case"script":return d=Xa(a.src),(h=n.querySelector(Al(d)))?(s.instance=h,Te(h),h):(l=a,(h=Zn.get(d))&&(l=_({},a),Wd(l,h)),n=n.ownerDocument||n,h=n.createElement("script"),Te(h),We(h,"link",l),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Lc(l,a.precedence,n));return s.instance}function Lc(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===s)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(n,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Jd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Wd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var kc=null;function c2(n,s,a){if(kc===null){var l=new Map,h=kc=new Map;h.set(a,l)}else h=kc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),h=0;h<a.length;h++){var d=a[h];if(!(d[Tr]||d[Ne]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(s)||"";E=n+E;var b=l.get(E);b?b.push(d):l.set(E,[d])}}return l}function h2(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function x6(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function f2(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Rl=null;function I6(){}function D6(n,s,a){if(Rl===null)throw Error(r(475));var l=Rl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=$a(a.href),d=n.querySelector(Cl(h));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=jc.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=d,Te(d);return}d=n.ownerDocument||n,a=l2(a),(h=Zn.get(h))&&Jd(a,h),d=d.createElement("link"),Te(d);var E=d;E._p=new Promise(function(b,V){E.onload=b,E.onerror=V}),We(d,"link",a),s.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=jc.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function M6(){if(Rl===null)throw Error(r(475));var n=Rl;return n.stylesheets&&n.count===0&&t1(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&t1(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function jc(){if(this.count--,this.count===0){if(this.stylesheets)t1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Pc=null;function t1(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Pc=new Map,s.forEach(V6,n),Pc=null,jc.call(n))}function V6(n,s){if(!(s.state.loading&4)){var a=Pc.get(n);if(a)var l=a.get(null);else{a=new Map,Pc.set(n,a);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=jc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var xl={$$typeof:K,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function N6(n,s,a,l,h,d,E,b){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function d2(n,s,a,l,h,d,E,b,V,G,et,rt){return n=new N6(n,s,a,E,b,V,G,rt),s=1,d===!0&&(s|=24),d=Dn(3,null,null,s),n.current=d,d.stateNode=n,s=Lf(),s.refCount++,n.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Uf(d),n}function m2(n){return n?(n=Ra,n):Ra}function g2(n,s,a,l,h,d){h=m2(h),l.context===null?l.context=h:l.pendingContext=h,l=Ds(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ms(n,l,s),a!==null&&(Ln(a,n,s),sl(a,n,s))}function p2(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function e1(n,s){p2(n,s),(n=n.alternate)&&p2(n,s)}function y2(n){if(n.tag===13){var s=Aa(n,67108864);s!==null&&Ln(s,n,67108864),e1(n,67108864)}}var Uc=!0;function O6(n,s,a,l){var h=Z.T;Z.T=null;var d=ut.p;try{ut.p=2,n1(n,s,a,l)}finally{ut.p=d,Z.T=h}}function L6(n,s,a,l){var h=Z.T;Z.T=null;var d=ut.p;try{ut.p=8,n1(n,s,a,l)}finally{ut.p=d,Z.T=h}}function n1(n,s,a,l){if(Uc){var h=i1(l);if(h===null)Hd(n,s,l,Bc,a),v2(n,l);else if(j6(h,n,s,a,l))l.stopPropagation();else if(v2(n,l),s&4&&-1<k6.indexOf(n)){for(;h!==null;){var d=pi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=ri(d.pendingLanes);if(E!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var V=1<<31-ue(E);b.entanglements[1]|=V,E&=~V}Di(d),(Wt&6)===0&&(bc=Ve()+500,Tl(0))}}break;case 13:b=Aa(d,2),b!==null&&Ln(b,d,2),Cc(),e1(d,2)}if(d=i1(l),d===null&&Hd(n,s,l,Bc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Hd(n,s,l,null,a)}}function i1(n){return n=qn(n),s1(n)}var Bc=null;function s1(n){if(Bc=null,n=Gi(n),n!==null){var s=u(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=f(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Bc=n,null}function _2(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ni()){case _n:return 2;case ze:return 8;case vn:case pr:return 32;case ii:return 268435456;default:return 32}default:return 32}}var r1=!1,Gs=null,Fs=null,Qs=null,Il=new Map,Dl=new Map,Ys=[],k6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v2(n,s){switch(n){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Il.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(s.pointerId)}}function Ml(n,s,a,l,h,d){return n===null||n.nativeEvent!==d?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},s!==null&&(s=pi(s),s!==null&&y2(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function j6(n,s,a,l,h){switch(s){case"focusin":return Gs=Ml(Gs,n,s,a,l,h),!0;case"dragenter":return Fs=Ml(Fs,n,s,a,l,h),!0;case"mouseover":return Qs=Ml(Qs,n,s,a,l,h),!0;case"pointerover":var d=h.pointerId;return Il.set(d,Ml(Il.get(d)||null,n,s,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Dl.set(d,Ml(Dl.get(d)||null,n,s,a,l,h)),!0}return!1}function E2(n){var s=Gi(n.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){n.blockedOn=s,Cu(n.priority,function(){if(a.tag===13){var l=On();l=Ts(l);var h=Aa(a,l);h!==null&&Ln(h,a,l),e1(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=i1(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Ki=l,a.target.dispatchEvent(l),Ki=null}else return s=pi(a),s!==null&&y2(s),n.blockedOn=a,!1;s.shift()}return!0}function T2(n,s,a){zc(n)&&a.delete(s)}function P6(){r1=!1,Gs!==null&&zc(Gs)&&(Gs=null),Fs!==null&&zc(Fs)&&(Fs=null),Qs!==null&&zc(Qs)&&(Qs=null),Il.forEach(T2),Dl.forEach(T2)}function qc(n,s){n.blockedOn===s&&(n.blockedOn=null,r1||(r1=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,P6)))}var Hc=null;function w2(n){Hc!==n&&(Hc=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hc===n&&(Hc=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],h=n[s+2];if(typeof l!="function"){if(s1(l||a)===null)continue;break}var d=pi(a);d!==null&&(n.splice(s,3),s-=3,sd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Vl(n){function s(V){return qc(V,n)}Gs!==null&&qc(Gs,n),Fs!==null&&qc(Fs,n),Qs!==null&&qc(Qs,n),Il.forEach(s),Dl.forEach(s);for(var a=0;a<Ys.length;a++){var l=Ys[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ys.length&&(a=Ys[0],a.blockedOn===null);)E2(a),a.blockedOn===null&&Ys.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[Ae]||null;if(typeof d=="function")E||w2(a);else if(E){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Ae]||null)b=E.formAction;else if(s1(h)!==null)continue}else b=E.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),w2(a)}}}function a1(n){this._internalRoot=n}Gc.prototype.render=a1.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=On();g2(a,l,n,s,null,null)},Gc.prototype.unmount=a1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;g2(n.current,2,null,n,null,null),Cc(),s[Bn]=null}};function Gc(n){this._internalRoot=n}Gc.prototype.unstable_scheduleHydration=function(n){if(n){var s=ws();n={blockedOn:null,target:n,priority:s};for(var a=0;a<Ys.length&&s!==0&&s<Ys[a].priority;a++);Ys.splice(a,0,n),a===0&&E2(n)}};var b2=t.version;if(b2!=="19.1.0")throw Error(r(527,b2,"19.1.0"));ut.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var U6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Jt=Fc.inject(U6),qt=Fc}catch{}}return Ol.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",h=Up,d=Bp,E=zp,b=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=d2(n,1,!1,null,null,a,l,h,d,E,b,null),n[Bn]=s.current,qd(n),new a1(s)},Ol.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,h="",d=Up,E=Bp,b=zp,V=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(V=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),s=d2(n,1,!0,s,a??null,l,h,d,E,b,V,G),s.context=m2(null),a=s.current,l=On(),l=Ts(l),h=Ds(l),h.callback=null,Ms(a,h,l),a=l,s.current.lanes=a,Hi(s,a),Di(s),n[Bn]=s.current,qd(n),new Gc(s)},Ol.version="19.1.0",Ol}var N2;function $6(){if(N2)return u1.exports;N2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),u1.exports=K6(),u1.exports}var X6=$6(),d1={exports:{}},m1={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function Z6(){if(O2)return m1;O2=1;var e=Nh().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return m1.c=function(t){return e.H.useMemoCache(t)},m1}var L2;function J6(){return L2||(L2=1,d1.exports=Z6()),d1.exports}var Ce=J6();const W6=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}],Rn=X.createContext(null),t5=e=>{const t=Ce.c(10),{children:i}=e,[r,o]=X.useState(!0),u=X.useRef("prod"),[f,m]=X.useState(!1),y=X.useRef(null);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[0]=g):g=t[0];const _=X.useRef(g),T=X.useRef(null),w=X.useRef(null),R=X.useRef(null),M=X.useRef(null),U=X.useRef("");let N;t[1]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[1]=N):N=t[1];const H=X.useRef(N);let F,K;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(F=()=>(u.current==="testing"?(y.current||(console.log("Creating a peer connection!"),y.current=new RTCPeerConnection({iceServers:W6})),M.current||(M.current=new MediaStream),y.current.ontrack=Q=>{M.current.addTrack(Q.track)},o(!1)):(async()=>{const D=await(await fetch("https://boopp.metered.live/api/v1/turn/credentials?apiKey=4ed69c72a74b9dba8ccbda3d7e966f90f898")).json();console.log("Peer connection set up!"),y.current=new RTCPeerConnection({iceServers:D}),M.current||(M.current=new MediaStream),y.current.ontrack=A=>{M.current.addTrack(A.track)},o(!1)})(),(async()=>{const Q=await fetch("https://tenor.googleapis.com/v2/featured?key=AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k&client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low").then(e5);H.current=Q.results,console.log(H.current)})(),()=>{y.current&&(y.current.close(),y.current=null)}),K=[],t[2]=F,t[3]=K):(F=t[2],K=t[3]),X.useEffect(F,K),r){let Q;return t[4]===Symbol.for("react.memo_cache_sentinel")?(Q=S.jsx("div",{children:" Loading .. "}),t[4]=Q):Q=t[4],Q}let tt;t[5]!==f?(tt={peerConnection:y,iceCandidates:_,dataChannel:T,imageChannel:w,videoChannel:R,remoteStream:M,peerName:U,connected:f,setConnected:m,featuredGifs:H},t[5]=f,t[6]=tt):tt=t[6];let W;return t[7]!==i||t[8]!==tt?(W=S.jsx(Rn,{value:tt,children:i}),t[7]=i,t[8]=tt,t[9]=W):W=t[9],W};function e5(e){return e.json()}var _m=pu(),Nt=e=>gu(e,_m),vm=pu();Nt.write=e=>gu(e,vm);var Oh=pu();Nt.onStart=e=>gu(e,Oh);var Em=pu();Nt.onFrame=e=>gu(e,Em);var Tm=pu();Nt.onFinish=e=>gu(e,Tm);var ro=[];Nt.setTimeout=(e,t)=>{const i=Nt.now()+t,r=()=>{const u=ro.findIndex(f=>f.cancel==r);~u&&ro.splice(u,1),tr-=~u?1:0},o={time:i,handler:e,cancel:r};return ro.splice(M_(i),0,o),tr+=1,V_(),o};var M_=e=>~(~ro.findIndex(t=>t.time>e)||~ro.length);Nt.cancel=e=>{Oh.delete(e),Em.delete(e),Tm.delete(e),_m.delete(e),vm.delete(e)};Nt.sync=e=>{L1=!0,Nt.batchedUpdates(e),L1=!1};Nt.throttle=e=>{let t;function i(){try{e(...t)}finally{t=null}}function r(...o){t=o,Nt.onStart(i)}return r.handler=e,r.cancel=()=>{Oh.delete(i),t=null},r};var wm=typeof window<"u"?window.requestAnimationFrame:()=>{};Nt.use=e=>wm=e;Nt.now=typeof performance<"u"?()=>performance.now():Date.now;Nt.batchedUpdates=e=>e();Nt.catch=console.error;Nt.frameLoop="always";Nt.advance=()=>{Nt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):O_()};var Ws=-1,tr=0,L1=!1;function gu(e,t){L1?(t.delete(e),e(0)):(t.add(e),V_())}function V_(){Ws<0&&(Ws=0,Nt.frameLoop!=="demand"&&wm(N_))}function n5(){Ws=-1}function N_(){~Ws&&(wm(N_),Nt.batchedUpdates(O_))}function O_(){const e=Ws;Ws=Nt.now();const t=M_(Ws);if(t&&(L_(ro.splice(0,t),i=>i.handler()),tr-=t),!tr){n5();return}Oh.flush(),_m.flush(e?Math.min(64,Ws-e):16.667),Em.flush(),vm.flush(),Tm.flush()}function pu(){let e=new Set,t=e;return{add(i){tr+=t==e&&!e.has(i)?1:0,e.add(i)},delete(i){return tr-=t==e&&e.has(i)?1:0,e.delete(i)},flush(i){t.size&&(e=new Set,tr-=t.size,L_(t,r=>r(i)&&e.add(r)),tr+=e.size,t=e)}}}function L_(e,t){e.forEach(i=>{try{t(i)}catch(r){Nt.catch(r)}})}var i5=Object.defineProperty,s5=(e,t)=>{for(var i in t)i5(e,i,{get:t[i],enumerable:!0})},mi={};s5(mi,{assign:()=>a5,colors:()=>nr,createStringInterpolator:()=>Sm,skipAnimation:()=>j_,to:()=>k_,willAdvance:()=>Cm});function k1(){}var r5=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),ht={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function ms(e,t){if(ht.arr(e)){if(!ht.arr(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return e===t}var zt=(e,t)=>e.forEach(t);function Pi(e,t,i){if(ht.arr(e)){for(let r=0;r<e.length;r++)t.call(i,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(i,e[r],r)}var jn=e=>ht.und(e)?[]:ht.arr(e)?e:[e];function Gl(e,t){if(e.size){const i=Array.from(e);e.clear(),zt(i,t)}}var Ul=(e,...t)=>Gl(e,i=>i(...t)),bm=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Sm,k_,nr=null,j_=!1,Cm=k1,a5=e=>{e.to&&(k_=e.to),e.now&&(Nt.now=e.now),e.colors!==void 0&&(nr=e.colors),e.skipAnimation!=null&&(j_=e.skipAnimation),e.createStringInterpolator&&(Sm=e.createStringInterpolator),e.requestAnimationFrame&&Nt.use(e.requestAnimationFrame),e.batchedUpdates&&(Nt.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Cm=e.willAdvance),e.frameLoop&&(Nt.frameLoop=e.frameLoop)},Fl=new Set,ti=[],g1=[],fh=0,Lh={get idle(){return!Fl.size&&!ti.length},start(e){fh>e.priority?(Fl.add(e),Nt.onStart(o5)):(P_(e),Nt(j1))},advance:j1,sort(e){if(fh)Nt.onFrame(()=>Lh.sort(e));else{const t=ti.indexOf(e);~t&&(ti.splice(t,1),U_(e))}},clear(){ti=[],Fl.clear()}};function o5(){Fl.forEach(P_),Fl.clear(),Nt(j1)}function P_(e){ti.includes(e)||U_(e)}function U_(e){ti.splice(l5(ti,t=>t.priority>e.priority),0,e)}function j1(e){const t=g1;for(let i=0;i<ti.length;i++){const r=ti[i];fh=r.priority,r.idle||(Cm(r),r.advance(e),r.idle||t.push(r))}return fh=0,g1=ti,g1.length=0,ti=t,ti.length>0}function l5(e,t){const i=e.findIndex(t);return i<0?e.length:i}var u5={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},di="[-+]?\\d*\\.?\\d+",dh=di+"%";function kh(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var c5=new RegExp("rgb"+kh(di,di,di)),h5=new RegExp("rgba"+kh(di,di,di,di)),f5=new RegExp("hsl"+kh(di,dh,dh)),d5=new RegExp("hsla"+kh(di,dh,dh,di)),m5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,g5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,p5=/^#([0-9a-fA-F]{6})$/,y5=/^#([0-9a-fA-F]{8})$/;function _5(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=p5.exec(e))?parseInt(t[1]+"ff",16)>>>0:nr&&nr[e]!==void 0?nr[e]:(t=c5.exec(e))?(Za(t[1])<<24|Za(t[2])<<16|Za(t[3])<<8|255)>>>0:(t=h5.exec(e))?(Za(t[1])<<24|Za(t[2])<<16|Za(t[3])<<8|P2(t[4]))>>>0:(t=m5.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=y5.exec(e))?parseInt(t[1],16)>>>0:(t=g5.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=f5.exec(e))?(k2(j2(t[1]),Qc(t[2]),Qc(t[3]))|255)>>>0:(t=d5.exec(e))?(k2(j2(t[1]),Qc(t[2]),Qc(t[3]))|P2(t[4]))>>>0:null}function p1(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function k2(e,t,i){const r=i<.5?i*(1+t):i+t-i*t,o=2*i-r,u=p1(o,r,e+1/3),f=p1(o,r,e),m=p1(o,r,e-1/3);return Math.round(u*255)<<24|Math.round(f*255)<<16|Math.round(m*255)<<8}function Za(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function j2(e){return(parseFloat(e)%360+360)%360/360}function P2(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Qc(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function U2(e){let t=_5(e);if(t===null)return e;t=t||0;const i=(t&4278190080)>>>24,r=(t&16711680)>>>16,o=(t&65280)>>>8,u=(t&255)/255;return`rgba(${i}, ${r}, ${o}, ${u})`}var Wl=(e,t,i)=>{if(ht.fun(e))return e;if(ht.arr(e))return Wl({range:e,output:t,extrapolate:i});if(ht.str(e.output[0]))return Sm(e);const r=e,o=r.output,u=r.range||[0,1],f=r.extrapolateLeft||r.extrapolate||"extend",m=r.extrapolateRight||r.extrapolate||"extend",y=r.easing||(g=>g);return g=>{const _=E5(g,u);return v5(g,u[_],u[_+1],o[_],o[_+1],y,f,m,r.map)}};function v5(e,t,i,r,o,u,f,m,y){let g=y?y(e):e;if(g<t){if(f==="identity")return g;f==="clamp"&&(g=t)}if(g>i){if(m==="identity")return g;m==="clamp"&&(g=i)}return r===o?r:t===i?e<=t?r:o:(t===-1/0?g=-g:i===1/0?g=g-t:g=(g-t)/(i-t),g=u(g),r===-1/0?g=-g:o===1/0?g=g+r:g=g*(o-r)+r,g)}function E5(e,t){for(var i=1;i<t.length-1&&!(t[i]>=e);++i);return i-1}var T5={linear:e=>e},tu=Symbol.for("FluidValue.get"),co=Symbol.for("FluidValue.observers"),Jn=e=>!!(e&&e[tu]),Sn=e=>e&&e[tu]?e[tu]():e,B2=e=>e[co]||null;function w5(e,t){e.eventObserved?e.eventObserved(t):e(t)}function eu(e,t){const i=e[co];i&&i.forEach(r=>{w5(r,t)})}var B_=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");b5(this,e)}},b5=(e,t)=>z_(e,tu,t);function To(e,t){if(e[tu]){let i=e[co];i||z_(e,co,i=new Set),i.has(t)||(i.add(t),e.observerAdded&&e.observerAdded(i.size,t))}return t}function nu(e,t){const i=e[co];if(i&&i.has(t)){const r=i.size-1;r?i.delete(t):e[co]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var z_=(e,t,i)=>Object.defineProperty(e,t,{value:i,writable:!0,configurable:!0}),ih=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,S5=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,z2=new RegExp(`(${ih.source})(%|[a-z]+)`,"i"),C5=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,jh=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,q_=e=>{const[t,i]=A5(e);if(!t||bm())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(i&&i.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||e}else{if(i&&jh.test(i))return q_(i);if(i)return i}return e},A5=e=>{const t=jh.exec(e);if(!t)return[,];const[,i,r]=t;return[i,r]},y1,R5=(e,t,i,r,o)=>`rgba(${Math.round(t)}, ${Math.round(i)}, ${Math.round(r)}, ${o})`,H_=e=>{y1||(y1=nr?new RegExp(`(${Object.keys(nr).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(u=>Sn(u).replace(jh,q_).replace(S5,U2).replace(y1,U2)),i=t.map(u=>u.match(ih).map(Number)),o=i[0].map((u,f)=>i.map(m=>{if(!(f in m))throw Error('The arity of each "output" value must be equal');return m[f]})).map(u=>Wl({...e,output:u}));return u=>{var y;const f=!z2.test(t[0])&&((y=t.find(g=>z2.test(g)))==null?void 0:y.replace(ih,""));let m=0;return t[0].replace(ih,()=>`${o[m++](u)}${f||""}`).replace(C5,R5)}},Am="react-spring: ",G_=e=>{const t=e;let i=!1;if(typeof t!="function")throw new TypeError(`${Am}once requires a function parameter`);return(...r)=>{i||(t(...r),i=!0)}},x5=G_(console.warn);function I5(){x5(`${Am}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var D5=G_(console.warn);function M5(){D5(`${Am}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Ph(e){return ht.str(e)&&(e[0]=="#"||/\d/.test(e)||!bm()&&jh.test(e)||e in(nr||{}))}var Rm=bm()?X.useEffect:X.useLayoutEffect,V5=()=>{const e=X.useRef(!1);return Rm(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function F_(){const e=X.useState()[1],t=V5();return()=>{t.current&&e(Math.random())}}var Q_=e=>X.useEffect(e,N5),N5=[];function q2(e){const t=X.useRef(void 0);return X.useEffect(()=>{t.current=e}),t.current}var iu=Symbol.for("Animated:node"),O5=e=>!!e&&e[iu]===e,Ni=e=>e&&e[iu],xm=(e,t)=>r5(e,iu,t),Uh=e=>e&&e[iu]&&e[iu].getPayload(),Y_=class{constructor(){xm(this,this)}getPayload(){return this.payload||[]}},Bh=class K_ extends Y_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ht.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new K_(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,i){return ht.num(t)&&(this.lastPosition=t,i&&(t=Math.round(t/i)*i,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ht.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},mh=class $_ extends Bh{constructor(t){super(0),this._string=null,this._toString=Wl({output:[t,t]})}static create(t){return new $_(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ht.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Wl({output:[this.getValue(),t]})),this._value=0,super.reset()}},gh={dependencies:null},zh=class extends Y_{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return Pi(this.source,(i,r)=>{O5(i)?t[r]=i.getValue(e):Jn(i)?t[r]=Sn(i):e||(t[r]=i)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&zt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return Pi(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){gh.dependencies&&Jn(e)&&gh.dependencies.add(e);const t=Uh(e);t&&zt(t,i=>this.add(i))}},L5=class X_ extends zh{constructor(t){super(t)}static create(t){return new X_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const i=this.getPayload();return t.length==i.length?i.map((r,o)=>r.setValue(t[o])).some(Boolean):(super.setValue(t.map(k5)),!0)}};function k5(e){return(Ph(e)?mh:Bh).create(e)}function P1(e){const t=Ni(e);return t?t.constructor:ht.arr(e)?L5:Ph(e)?mh:Bh}var H2=(e,t)=>{const i=!ht.fun(e)||e.prototype&&e.prototype.isReactComponent;return X.forwardRef((r,o)=>{const u=X.useRef(null),f=i&&X.useCallback(M=>{u.current=U5(o,M)},[o]),[m,y]=P5(r,t),g=F_(),_=()=>{const M=u.current;if(i&&!M)return;(M?t.applyAnimatedValues(M,m.getValue(!0)):!1)===!1&&g()},T=new j5(_,y),w=X.useRef(void 0);Rm(()=>(w.current=T,zt(y,M=>To(M,T)),()=>{w.current&&(zt(w.current.deps,M=>nu(M,w.current)),Nt.cancel(w.current.update))})),X.useEffect(_,[]),Q_(()=>()=>{const M=w.current;zt(M.deps,U=>nu(U,M))});const R=t.getComponentProps(m.getValue());return X.createElement(e,{...R,ref:f})})},j5=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Nt.write(this.update)}};function P5(e,t){const i=new Set;return gh.dependencies=i,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new zh(e),gh.dependencies=null,[e,i]}function U5(e,t){return e&&(ht.fun(e)?e(t):e.current=t),t}var G2=Symbol.for("AnimatedComponent"),B5=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=o=>new zh(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:r},u=f=>{const m=F2(f)||"Anonymous";return ht.str(f)?f=u[f]||(u[f]=H2(f,o)):f=f[G2]||(f[G2]=H2(f,o)),f.displayName=`Animated(${m})`,f};return Pi(e,(f,m)=>{ht.arr(e)&&(m=F2(f)),u[m]=u(f)}),{animated:u}},F2=e=>ht.str(e)?e:e&&ht.str(e.displayName)?e.displayName:ht.fun(e)&&e.name||null;function Zr(e,...t){return ht.fun(e)?e(...t):e}var Ql=(e,t)=>e===!0||!!(t&&e&&(ht.fun(e)?e(t):jn(e).includes(t))),Z_=(e,t)=>ht.obj(e)?t&&e[t]:e,J_=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,z5=e=>e,Im=(e,t=z5)=>{let i=q5;e.default&&e.default!==!0&&(e=e.default,i=Object.keys(e));const r={};for(const o of i){const u=t(e[o],o);ht.und(u)||(r[o]=u)}return r},q5=["config","onProps","onStart","onChange","onPause","onResume","onRest"],H5={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function G5(e){const t={};let i=0;if(Pi(e,(r,o)=>{H5[o]||(t[o]=r,i++)}),i)return t}function W_(e){const t=G5(e);if(t){const i={to:t};return Pi(e,(r,o)=>o in t||(i[o]=r)),i}return{...e}}function su(e){return e=Sn(e),ht.arr(e)?e.map(su):Ph(e)?mi.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function F5(e){for(const t in e)return!0;return!1}function U1(e){return ht.fun(e)||ht.arr(e)&&ht.obj(e[0])}function Q5(e,t){var i;(i=e.ref)==null||i.delete(e),t==null||t.delete(e)}function Y5(e,t){var i;t&&e.ref!==t&&((i=e.ref)==null||i.delete(e),t.add(e),e.ref=t)}var B1={default:{tension:170,friction:26},stiff:{tension:210,friction:20}},z1={...B1.default,mass:1,damping:1,easing:T5.linear,clamp:!1},K5=class{constructor(){this.velocity=0,Object.assign(this,z1)}};function $5(e,t,i){i&&(i={...i},Q2(i,t),t={...i,...t}),Q2(e,t),Object.assign(e,t);for(const f in z1)e[f]==null&&(e[f]=z1[f]);let{frequency:r,damping:o}=e;const{mass:u}=e;return ht.und(r)||(r<.01&&(r=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/r,2)*u,e.friction=4*Math.PI*o*u/r),e}function Q2(e,t){if(!ht.und(t.decay))e.duration=void 0;else{const i=!ht.und(t.tension)||!ht.und(t.friction);(i||!ht.und(t.frequency)||!ht.und(t.damping)||!ht.und(t.mass))&&(e.duration=void 0,e.decay=void 0),i&&(e.frequency=void 0)}}var Y2=[],X5=class{constructor(){this.changed=!1,this.values=Y2,this.toValues=null,this.fromValues=Y2,this.config=new K5,this.immediate=!1}};function tv(e,{key:t,props:i,defaultProps:r,state:o,actions:u}){return new Promise((f,m)=>{let y,g,_=Ql(i.cancel??(r==null?void 0:r.cancel),t);if(_)R();else{ht.und(i.pause)||(o.paused=Ql(i.pause,t));let M=r==null?void 0:r.pause;M!==!0&&(M=o.paused||Ql(M,t)),y=Zr(i.delay||0,t),M?(o.resumeQueue.add(w),u.pause()):(u.resume(),w())}function T(){o.resumeQueue.add(w),o.timeouts.delete(g),g.cancel(),y=g.time-Nt.now()}function w(){y>0&&!mi.skipAnimation?(o.delayed=!0,g=Nt.setTimeout(R,y),o.pauseQueue.add(T),o.timeouts.add(g)):R()}function R(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(T),o.timeouts.delete(g),e<=(o.cancelId||0)&&(_=!0);try{u.start({...i,callId:e,cancel:_},f)}catch(M){m(M)}}})}var Dm=(e,t)=>t.length==1?t[0]:t.some(i=>i.cancelled)?ao(e.get()):t.every(i=>i.noop)?ev(e.get()):fi(e.get(),t.every(i=>i.finished)),ev=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),fi=(e,t,i=!1)=>({value:e,finished:t,cancelled:i}),ao=e=>({value:e,cancelled:!0,finished:!1});function nv(e,t,i,r){const{callId:o,parentId:u,onRest:f}=t,{asyncTo:m,promise:y}=i;return!u&&e===m&&!t.reset?y:i.promise=(async()=>{i.asyncId=o,i.asyncTo=e;const g=Im(t,(N,H)=>H==="onRest"?void 0:N);let _,T;const w=new Promise((N,H)=>(_=N,T=H)),R=N=>{const H=o<=(i.cancelId||0)&&ao(r)||o!==i.asyncId&&fi(r,!1);if(H)throw N.result=H,T(N),N},M=(N,H)=>{const F=new K2,K=new $2;return(async()=>{if(mi.skipAnimation)throw ru(i),K.result=fi(r,!1),T(K),K;R(F);const tt=ht.obj(N)?{...N}:{...H,to:N};tt.parentId=o,Pi(g,(Q,D)=>{ht.und(tt[D])&&(tt[D]=Q)});const W=await r.start(tt);return R(F),i.paused&&await new Promise(Q=>{i.resumeQueue.add(Q)}),W})()};let U;if(mi.skipAnimation)return ru(i),fi(r,!1);try{let N;ht.arr(e)?N=(async H=>{for(const F of H)await M(F)})(e):N=Promise.resolve(e(M,r.stop.bind(r))),await Promise.all([N.then(_),w]),U=fi(r.get(),!0,!1)}catch(N){if(N instanceof K2)U=N.result;else if(N instanceof $2)U=N.result;else throw N}finally{o==i.asyncId&&(i.asyncId=u,i.asyncTo=u?m:void 0,i.promise=u?y:void 0)}return ht.fun(f)&&Nt.batchedUpdates(()=>{f(U,r,r.item)}),U})()}function ru(e,t){Gl(e.timeouts,i=>i.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var K2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},$2=class extends Error{constructor(){super("SkipAnimationSignal")}},q1=e=>e instanceof Mm,Z5=1,Mm=class extends B_{constructor(){super(...arguments),this.id=Z5++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Ni(this);return e&&e.getValue()}to(...e){return mi.to(this,e)}interpolate(...e){return I5(),mi.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){eu(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Lh.sort(this),eu(this,{type:"priority",parent:this,priority:e})}},ta=Symbol.for("SpringPhase"),iv=1,H1=2,G1=4,_1=e=>(e[ta]&iv)>0,$s=e=>(e[ta]&H1)>0,Ll=e=>(e[ta]&G1)>0,X2=(e,t)=>t?e[ta]|=H1|iv:e[ta]&=~H1,Z2=(e,t)=>t?e[ta]|=G1:e[ta]&=~G1,J5=class extends Mm{constructor(e,t){if(super(),this.animation=new X5,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ht.und(e)||!ht.und(t)){const i=ht.obj(e)?{...e}:{...t,from:e};ht.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!($s(this)||this._state.asyncTo)||Ll(this)}get goal(){return Sn(this.animation.to)}get velocity(){const e=Ni(this);return e instanceof Bh?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return _1(this)}get isAnimating(){return $s(this)}get isPaused(){return Ll(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,i=!1;const r=this.animation;let{toValues:o}=r;const{config:u}=r,f=Uh(r.to);!f&&Jn(r.to)&&(o=jn(Sn(r.to))),r.values.forEach((g,_)=>{if(g.done)return;const T=g.constructor==mh?1:f?f[_].lastPosition:o[_];let w=r.immediate,R=T;if(!w){if(R=g.lastPosition,u.tension<=0){g.done=!0;return}let M=g.elapsedTime+=e;const U=r.fromValues[_],N=g.v0!=null?g.v0:g.v0=ht.arr(u.velocity)?u.velocity[_]:u.velocity;let H;const F=u.precision||(U==T?.005:Math.min(1,Math.abs(T-U)*.001));if(ht.und(u.duration))if(u.decay){const K=u.decay===!0?.998:u.decay,tt=Math.exp(-(1-K)*M);R=U+N/(1-K)*(1-tt),w=Math.abs(g.lastPosition-R)<=F,H=N*tt}else{H=g.lastVelocity==null?N:g.lastVelocity;const K=u.restVelocity||F/10,tt=u.clamp?0:u.bounce,W=!ht.und(tt),Q=U==T?g.v0>0:U<T;let D,A=!1;const x=1,k=Math.ceil(e/x);for(let L=0;L<k&&(D=Math.abs(H)>K,!(!D&&(w=Math.abs(T-R)<=F,w)));++L){W&&(A=R==T||R>T==Q,A&&(H=-H*tt,R=T));const P=-u.tension*1e-6*(R-T),I=-u.friction*.001*H,Dt=(P+I)/u.mass;H=H+Dt*x,R=R+H*x}}else{let K=1;u.duration>0&&(this._memoizedDuration!==u.duration&&(this._memoizedDuration=u.duration,g.durationProgress>0&&(g.elapsedTime=u.duration*g.durationProgress,M=g.elapsedTime+=e)),K=(u.progress||0)+M/this._memoizedDuration,K=K>1?1:K<0?0:K,g.durationProgress=K),R=U+u.easing(K)*(T-U),H=(R-g.lastPosition)/e,w=K==1}g.lastVelocity=H,Number.isNaN(R)&&(console.warn("Got NaN while animating:",this),w=!0)}f&&!f[_].done&&(w=!1),w?g.done=!0:t=!1,g.setValue(R,u.round)&&(i=!0)});const m=Ni(this),y=m.getValue();if(t){const g=Sn(r.to);(y!==g||i)&&!u.decay?(m.setValue(g),this._onChange(g)):i&&u.decay&&this._onChange(y),this._stop()}else i&&this._onChange(y)}set(e){return Nt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if($s(this)){const{to:e,config:t}=this.animation;Nt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let i;return ht.und(e)?(i=this.queue||[],this.queue=[]):i=[ht.obj(e)?e:{...t,to:e}],Promise.all(i.map(r=>this._update(r))).then(r=>Dm(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),ru(this._state,e&&this._lastCallId),Nt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:i,from:r}=e;i=ht.obj(i)?i[t]:i,(i==null||U1(i))&&(i=void 0),r=ht.obj(r)?r[t]:r,r==null&&(r=void 0);const o={to:i,from:r};return _1(this)||(e.reverse&&([i,r]=[r,i]),r=Sn(r),ht.und(r)?Ni(this)||this._set(i):this._set(r)),o}_update({...e},t){const{key:i,defaultProps:r}=this;e.default&&Object.assign(r,Im(e,(f,m)=>/^on/.test(m)?Z_(f,i):f)),W2(this,e,"onProps"),jl(this,"onProps",e,this);const o=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const u=this._state;return tv(++this._lastCallId,{key:i,props:e,defaultProps:r,state:u,actions:{pause:()=>{Ll(this)||(Z2(this,!0),Ul(u.pauseQueue),jl(this,"onPause",fi(this,kl(this,this.animation.to)),this))},resume:()=>{Ll(this)&&(Z2(this,!1),$s(this)&&this._resume(),Ul(u.resumeQueue),jl(this,"onResume",fi(this,kl(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(f=>{if(e.loop&&f.finished&&!(t&&f.noop)){const m=sv(e);if(m)return this._update(m,!0)}return f})}_merge(e,t,i){if(t.cancel)return this.stop(!0),i(ao(this));const r=!ht.und(e.to),o=!ht.und(e.from);if(r||o)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(ao(this));const{key:u,defaultProps:f,animation:m}=this,{to:y,from:g}=m;let{to:_=y,from:T=g}=e;o&&!r&&(!t.default||ht.und(_))&&(_=T),t.reverse&&([_,T]=[T,_]);const w=!ms(T,g);w&&(m.from=T),T=Sn(T);const R=!ms(_,y);R&&this._focus(_);const M=U1(t.to),{config:U}=m,{decay:N,velocity:H}=U;(r||o)&&(U.velocity=0),t.config&&!M&&$5(U,Zr(t.config,u),t.config!==f.config?Zr(f.config,u):void 0);let F=Ni(this);if(!F||ht.und(_))return i(fi(this,!0));const K=ht.und(t.reset)?o&&!t.default:!ht.und(T)&&Ql(t.reset,u),tt=K?T:this.get(),W=su(_),Q=ht.num(W)||ht.arr(W)||Ph(W),D=!M&&(!Q||Ql(f.immediate||t.immediate,u));if(R){const L=P1(_);if(L!==F.constructor)if(D)F=this._set(W);else throw Error(`Cannot animate between ${F.constructor.name} and ${L.name}, as the "to" prop suggests`)}const A=F.constructor;let x=Jn(_),k=!1;if(!x){const L=K||!_1(this)&&w;(R||L)&&(k=ms(su(tt),W),x=!k),(!ms(m.immediate,D)&&!D||!ms(U.decay,N)||!ms(U.velocity,H))&&(x=!0)}if(k&&$s(this)&&(m.changed&&!K?x=!0:x||this._stop(y)),!M&&((x||Jn(y))&&(m.values=F.getPayload(),m.toValues=Jn(_)?null:A==mh?[1]:jn(W)),m.immediate!=D&&(m.immediate=D,!D&&!K&&this._set(y)),x)){const{onRest:L}=m;zt(t9,I=>W2(this,t,I));const P=fi(this,kl(this,y));Ul(this._pendingCalls,P),this._pendingCalls.add(i),m.changed&&Nt.batchedUpdates(()=>{var I;m.changed=!K,L==null||L(P,this),K?Zr(f.onRest,P):(I=m.onStart)==null||I.call(m,P,this)})}K&&this._set(tt),M?i(nv(t.to,t,this._state,this)):x?this._start():$s(this)&&!R?this._pendingCalls.add(i):i(ev(tt))}_focus(e){const t=this.animation;e!==t.to&&(B2(this)&&this._detach(),t.to=e,B2(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Jn(t)&&(To(t,this),q1(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Jn(e)&&nu(e,this)}_set(e,t=!0){const i=Sn(e);if(!ht.und(i)){const r=Ni(this);if(!r||!ms(i,r.getValue())){const o=P1(i);!r||r.constructor!=o?xm(this,o.create(i)):r.setValue(i),r&&Nt.batchedUpdates(()=>{this._onChange(i,t)})}}return Ni(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,jl(this,"onStart",fi(this,kl(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Zr(this.animation.onChange,e,this)),Zr(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Ni(this).reset(Sn(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),$s(this)||(X2(this,!0),Ll(this)||this._resume())}_resume(){mi.skipAnimation?this.finish():Lh.start(this)}_stop(e,t){if($s(this)){X2(this,!1);const i=this.animation;zt(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),eu(this,{type:"idle",parent:this});const r=t?ao(this.get()):fi(this.get(),kl(this,e??i.to));Ul(this._pendingCalls,r),i.changed&&(i.changed=!1,jl(this,"onRest",r,this))}}};function kl(e,t){const i=su(t),r=su(e.get());return ms(r,i)}function sv(e,t=e.loop,i=e.to){const r=Zr(t);if(r){const o=r!==!0&&W_(r),u=(o||e).reverse,f=!o||o.reset;return au({...e,loop:t,default:!1,pause:void 0,to:!u||U1(i)?i:void 0,from:f?e.from:void 0,reset:f,...o})}}function au(e){const{to:t,from:i}=e=W_(e),r=new Set;return ht.obj(t)&&J2(t,r),ht.obj(i)&&J2(i,r),e.keys=r.size?Array.from(r):null,e}function W5(e){const t=au(e);return ht.und(t.default)&&(t.default=Im(t)),t}function J2(e,t){Pi(e,(i,r)=>i!=null&&t.add(r))}var t9=["onStart","onRest","onChange","onPause","onResume"];function W2(e,t,i){e.animation[i]=t[i]!==J_(t,i)?Z_(t[i],e.key):void 0}function jl(e,t,...i){var r,o,u,f;(o=(r=e.animation)[t])==null||o.call(r,...i),(f=(u=e.defaultProps)[t])==null||f.call(u,...i)}var e9=["onStart","onChange","onRest"],n9=1,i9=class{constructor(t,i){this.id=n9++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),i&&(this._flush=i),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((i,r)=>t[r]=i.get()),t}set(t){for(const i in t){const r=t[i];ht.und(r)||this.springs[i].set(r)}}update(t){return t&&this.queue.push(au(t)),this}start(t){let{queue:i}=this;return t?i=jn(t).map(au):this.queue=[],this._flush?this._flush(this,i):(uv(this,i),F1(this,i))}stop(t,i){if(t!==!!t&&(i=t),i){const r=this.springs;zt(jn(i),o=>r[o].stop(!!t))}else ru(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(ht.und(t))this.start({pause:!0});else{const i=this.springs;zt(jn(t),r=>i[r].pause())}return this}resume(t){if(ht.und(t))this.start({pause:!1});else{const i=this.springs;zt(jn(t),r=>i[r].resume())}return this}each(t){Pi(this.springs,t)}_onFrame(){const{onStart:t,onChange:i,onRest:r}=this._events,o=this._active.size>0,u=this._changed.size>0;(o&&!this._started||u&&!this._started)&&(this._started=!0,Gl(t,([y,g])=>{g.value=this.get(),y(g,this,this._item)}));const f=!o&&this._started,m=u||f&&r.size?this.get():null;u&&i.size&&Gl(i,([y,g])=>{g.value=m,y(g,this,this._item)}),f&&(this._started=!1,Gl(r,([y,g])=>{g.value=m,y(g,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Nt.onFrame(this._onFrame)}};function F1(e,t){return Promise.all(t.map(i=>rv(e,i))).then(i=>Dm(e,i))}async function rv(e,t,i){const{keys:r,to:o,from:u,loop:f,onRest:m,onResolve:y}=t,g=ht.obj(t.default)&&t.default;f&&(t.loop=!1),o===!1&&(t.to=null),u===!1&&(t.from=null);const _=ht.arr(o)||ht.fun(o)?o:void 0;_?(t.to=void 0,t.onRest=void 0,g&&(g.onRest=void 0)):zt(e9,U=>{const N=t[U];if(ht.fun(N)){const H=e._events[U];t[U]=({finished:F,cancelled:K})=>{const tt=H.get(N);tt?(F||(tt.finished=!1),K&&(tt.cancelled=!0)):H.set(N,{value:null,finished:F||!1,cancelled:K||!1})},g&&(g[U]=t[U])}});const T=e._state;t.pause===!T.paused?(T.paused=t.pause,Ul(t.pause?T.pauseQueue:T.resumeQueue)):T.paused&&(t.pause=!0);const w=(r||Object.keys(e.springs)).map(U=>e.springs[U].start(t)),R=t.cancel===!0||J_(t,"cancel")===!0;(_||R&&T.asyncId)&&w.push(tv(++e._lastAsyncId,{props:t,state:T,actions:{pause:k1,resume:k1,start(U,N){R?(ru(T,e._lastAsyncId),N(ao(e))):(U.onRest=m,N(nv(_,U,T,e)))}}})),T.paused&&await new Promise(U=>{T.resumeQueue.add(U)});const M=Dm(e,await Promise.all(w));if(f&&M.finished&&!(i&&M.noop)){const U=sv(t,f,o);if(U)return uv(e,[U]),rv(e,U,!0)}return y&&Nt.batchedUpdates(()=>y(M,e,e.item)),M}function ty(e,t){const i={...e.springs};return t&&zt(jn(t),r=>{ht.und(r.keys)&&(r=au(r)),ht.obj(r.to)||(r={...r,to:void 0}),lv(i,r,o=>ov(o))}),av(e,i),i}function av(e,t){Pi(t,(i,r)=>{e.springs[r]||(e.springs[r]=i,To(i,e))})}function ov(e,t){const i=new J5;return i.key=e,t&&To(i,t),i}function lv(e,t,i){t.keys&&zt(t.keys,r=>{(e[r]||(e[r]=i(r)))._prepareNode(t)})}function uv(e,t){zt(t,i=>{lv(e.springs,i,r=>ov(r,e))})}var s9=X.createContext({pause:!1,immediate:!1}),r9=()=>{const e=[],t=function(r){M5();const o=[];return zt(e,(u,f)=>{if(ht.und(r))o.push(u.start());else{const m=i(r,u,f);m&&o.push(u.start(m))}}),o};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const o=e.indexOf(r);~o&&e.splice(o,1)},t.pause=function(){return zt(e,r=>r.pause(...arguments)),this},t.resume=function(){return zt(e,r=>r.resume(...arguments)),this},t.set=function(r){zt(e,(o,u)=>{const f=ht.fun(r)?r(u,o):r;f&&o.set(f)})},t.start=function(r){const o=[];return zt(e,(u,f)=>{if(ht.und(r))o.push(u.start());else{const m=this._getProps(r,u,f);m&&o.push(u.start(m))}}),o},t.stop=function(){return zt(e,r=>r.stop(...arguments)),this},t.update=function(r){return zt(e,(o,u)=>o.update(this._getProps(r,o,u))),this};const i=function(r,o,u){return ht.fun(r)?r(u,o):r};return t._getProps=i,t};function a9(e,t,i){const r=ht.fun(t)&&t;r&&!i&&(i=[]);const o=X.useMemo(()=>r||arguments.length==3?r9():void 0,[]),u=X.useRef(0),f=F_(),m=X.useMemo(()=>({ctrls:[],queue:[],flush(H,F){const K=ty(H,F);return u.current>0&&!m.queue.length&&!Object.keys(K).some(W=>!H.springs[W])?F1(H,F):new Promise(W=>{av(H,K),m.queue.push(()=>{W(F1(H,F))}),f()})}}),[]),y=X.useRef([...m.ctrls]),g=X.useRef([]),_=q2(e)||0;X.useMemo(()=>{zt(y.current.slice(e,_),H=>{Q5(H,o),H.stop(!0)}),y.current.length=e,T(_,e)},[e]),X.useMemo(()=>{T(0,Math.min(_,e))},i);function T(H,F){for(let K=H;K<F;K++){const tt=y.current[K]||(y.current[K]=new i9(null,m.flush)),W=r?r(K,tt):t[K];W&&(g.current[K]=W5(W))}}const w=y.current.map((H,F)=>ty(H,g.current[F])),R=X.useContext(s9),M=q2(R),U=R!==M&&F5(R);Rm(()=>{u.current++,m.ctrls=y.current;const{queue:H}=m;H.length&&(m.queue=[],zt(H,F=>F())),zt(y.current,(F,K)=>{o==null||o.add(F),U&&F.start({default:R});const tt=g.current[K];tt&&(Y5(F,tt.ref),F.ref?F.queue.push(tt):F.start(tt))})}),Q_(()=>()=>{zt(m.ctrls,H=>H.stop(!0))});const N=w.map(H=>({...H}));return o?[N,o]:N}function ia(e,t){const i=ht.fun(e),[[r],o]=a9(1,i?e:[e],i?[]:t);return i||arguments.length==2?[r,o]:r}var o9=class extends Mm{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Wl(...t);const i=this._get(),r=P1(i);xm(this,r.create(i))}advance(e){const t=this._get(),i=this.get();ms(t,i)||(Ni(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&ey(this._active)&&v1(this)}_get(){const e=ht.arr(this.source)?this.source.map(Sn):jn(Sn(this.source));return this.calc(...e)}_start(){this.idle&&!ey(this._active)&&(this.idle=!1,zt(Uh(this),e=>{e.done=!1}),mi.skipAnimation?(Nt.batchedUpdates(()=>this.advance()),v1(this)):Lh.start(this))}_attach(){let e=1;zt(jn(this.source),t=>{Jn(t)&&To(t,this),q1(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){zt(jn(this.source),e=>{Jn(e)&&nu(e,this)}),this._active.clear(),v1(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=jn(this.source).reduce((t,i)=>Math.max(t,(q1(i)?i.priority:0)+1),0))}};function l9(e){return e.idle!==!1}function ey(e){return!e.size||Array.from(e).every(l9)}function v1(e){e.idle||(e.idle=!0,zt(Uh(e),t=>{t.done=!0}),eu(e,{type:"idle",parent:e}))}mi.assign({createStringInterpolator:H_,to:(e,t)=>new o9(e,t)});var u9=D_(),cv=/^--/;function c9(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!cv.test(e)&&!(Yl.hasOwnProperty(e)&&Yl[e])?t+"px":(""+t).trim()}var ny={};function h9(e,t){if(!e.nodeType||!e.setAttribute)return!1;const i=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:o,children:u,scrollTop:f,scrollLeft:m,viewBox:y,...g}=t,_=Object.values(g),T=Object.keys(g).map(w=>i||e.hasAttribute(w)?w:ny[w]||(ny[w]=w.replace(/([A-Z])/g,R=>"-"+R.toLowerCase())));u!==void 0&&(e.textContent=u);for(const w in o)if(o.hasOwnProperty(w)){const R=c9(w,o[w]);cv.test(w)?e.style.setProperty(w,R):e.style[w]=R}T.forEach((w,R)=>{e.setAttribute(w,_[R])}),r!==void 0&&(e.className=r),f!==void 0&&(e.scrollTop=f),m!==void 0&&(e.scrollLeft=m),y!==void 0&&e.setAttribute("viewBox",y)}var Yl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f9=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),d9=["Webkit","Ms","Moz","O"];Yl=Object.keys(Yl).reduce((e,t)=>(d9.forEach(i=>e[f9(i,t)]=e[t]),e),Yl);var m9=/^(matrix|translate|scale|rotate|skew)/,g9=/^(translate)/,p9=/^(rotate|skew)/,E1=(e,t)=>ht.num(e)&&e!==0?e+t:e,sh=(e,t)=>ht.arr(e)?e.every(i=>sh(i,t)):ht.num(e)?e===t:parseFloat(e)===t,y9=class extends zh{constructor({x:e,y:t,z:i,...r}){const o=[],u=[];(e||t||i)&&(o.push([e||0,t||0,i||0]),u.push(f=>[`translate3d(${f.map(m=>E1(m,"px")).join(",")})`,sh(f,0)])),Pi(r,(f,m)=>{if(m==="transform")o.push([f||""]),u.push(y=>[y,y===""]);else if(m9.test(m)){if(delete r[m],ht.und(f))return;const y=g9.test(m)?"px":p9.test(m)?"deg":"";o.push(jn(f)),u.push(m==="rotate3d"?([g,_,T,w])=>[`rotate3d(${g},${_},${T},${E1(w,y)})`,sh(w,0)]:g=>[`${m}(${g.map(_=>E1(_,y)).join(",")})`,sh(g,m.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new _9(o,u)),super(r)}},_9=class extends B_{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return zt(this.inputs,(i,r)=>{const o=Sn(i[0]),[u,f]=this.transforms[r](ht.arr(o)?o:i.map(Sn));e+=" "+u,t=t&&f}),t?"none":e}observerAdded(e){e==1&&zt(this.inputs,t=>zt(t,i=>Jn(i)&&To(i,this)))}observerRemoved(e){e==0&&zt(this.inputs,t=>zt(t,i=>Jn(i)&&nu(i,this)))}eventObserved(e){e.type=="change"&&(this._value=null),eu(this,e)}},v9=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];mi.assign({batchedUpdates:u9.unstable_batchedUpdates,createStringInterpolator:H_,colors:u5});var E9=B5(v9,{applyAnimatedValues:h9,createAnimatedStyle:e=>new y9(e),getComponentProps:({scrollTop:e,scrollLeft:t,...i})=>i}),gs=E9.animated;function T9(e,t,i){return Math.max(t,Math.min(e,i))}const he={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function iy(e,t,i){return t===0||Math.abs(t)===1/0?Math.pow(e,i*5):e*t*i/(t+i*e)}function sy(e,t,i,r=.15){return r===0?T9(e,t,i):e<t?-iy(t-e,i-t,r)+t:e>i?+iy(e-i,i-t,r)+i:e}function w9(e,[t,i],[r,o]){const[[u,f],[m,y]]=e;return[sy(t,u,f,r),sy(i,m,y,o)]}function b9(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S9(e){var t=b9(e,"string");return typeof t=="symbol"?t:String(t)}function Me(e,t,i){return t=S9(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ry(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function pe(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ry(Object(i),!0).forEach(function(r){Me(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ry(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}const hv={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ay(e){return e?e[0].toUpperCase()+e.slice(1):""}const C9=["enter","leave"];function A9(e=!1,t){return e&&!C9.includes(t)}function R9(e,t="",i=!1){const r=hv[e],o=r&&r[t]||t;return"on"+ay(e)+ay(o)+(A9(i,o)?"Capture":"")}const x9=["gotpointercapture","lostpointercapture"];function I9(e){let t=e.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const r=x9.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:i}}function D9(e,t=""){const i=hv[e],r=i&&i[t]||t;return e+r}function qh(e){return"touches"in e}function fv(e){return qh(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function M9(e){return Array.from(e.touches).filter(t=>{var i,r;return t.target===e.currentTarget||((i=e.currentTarget)===null||i===void 0||(r=i.contains)===null||r===void 0?void 0:r.call(i,t.target))})}function V9(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function dv(e){return qh(e)?V9(e)[0]:e}function Q1(e,t){try{const i=t.clientX-e.clientX,r=t.clientY-e.clientY,o=(t.clientX+e.clientX)/2,u=(t.clientY+e.clientY)/2,f=Math.hypot(i,r);return{angle:-(Math.atan2(i,r)*180)/Math.PI,distance:f,origin:[o,u]}}catch{}return null}function N9(e){return M9(e).map(t=>t.identifier)}function oy(e,t){const[i,r]=Array.from(e.touches).filter(o=>t.includes(o.identifier));return Q1(i,r)}function T1(e){const t=dv(e);return qh(e)?t.identifier:t.pointerId}function ho(e){const t=dv(e);return[t.clientX,t.clientY]}const ly=40,uy=800;function mv(e){let{deltaX:t,deltaY:i,deltaMode:r}=e;return r===1?(t*=ly,i*=ly):r===2&&(t*=uy,i*=uy),[t,i]}function O9(e){var t,i;const{scrollX:r,scrollY:o,scrollLeft:u,scrollTop:f}=e.currentTarget;return[(t=r??u)!==null&&t!==void 0?t:0,(i=o??f)!==null&&i!==void 0?i:0]}function L9(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u}=e;Object.assign(t,{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u})}return t}function ph(e,...t){return typeof e=="function"?e(...t):e}function k9(){}function j9(...e){return e.length===0?k9:e.length===1?e[0]:function(){let t;for(const i of e)t=i.apply(this,arguments)||t;return t}}function cy(e,t){return Object.assign({},t,e||{})}const P9=32;class gv{constructor(t,i,r){this.ctrl=t,this.args=i,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:i,ingKey:r,args:o}=this;i[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=o,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const i=this.state,r=this.config;i._active||(this.reset(),this.computeInitial(),i._active=!0,i.target=t.target,i.currentTarget=t.currentTarget,i.lastOffset=r.from?ph(r.from,i):i.offset,i.offset=i.lastOffset,i.startTime=i.timeStamp=t.timeStamp)}computeValues(t){const i=this.state;i._values=t,i.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:i,config:r,shared:o}=this;i.args=this.args;let u=0;if(t&&(i.event=t,r.preventDefault&&t.cancelable&&i.event.preventDefault(),i.type=t.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,L9(t)),o.down=o.pressed=o.buttons%2===1||o.touches>0,u=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime),i._active){const Q=i._delta.map(Math.abs);he.addTo(i._distance,Q)}this.axisIntent&&this.axisIntent(t);const[f,m]=i._movement,[y,g]=r.threshold,{_step:_,values:T}=i;if(r.hasCustomTransform?(_[0]===!1&&(_[0]=Math.abs(f)>=y&&T[0]),_[1]===!1&&(_[1]=Math.abs(m)>=g&&T[1])):(_[0]===!1&&(_[0]=Math.abs(f)>=y&&Math.sign(f)*y),_[1]===!1&&(_[1]=Math.abs(m)>=g&&Math.sign(m)*g)),i.intentional=_[0]!==!1||_[1]!==!1,!i.intentional)return;const w=[0,0];if(r.hasCustomTransform){const[Q,D]=T;w[0]=_[0]!==!1?Q-_[0]:0,w[1]=_[1]!==!1?D-_[1]:0}else w[0]=_[0]!==!1?f-_[0]:0,w[1]=_[1]!==!1?m-_[1]:0;this.restrictToAxis&&!i._blocked&&this.restrictToAxis(w);const R=i.offset,M=i._active&&!i._blocked||i.active;M&&(i.first=i._active&&!i.active,i.last=!i._active&&i.active,i.active=o[this.ingKey]=i._active,t&&(i.first&&("bounds"in r&&(i._bounds=ph(r.bounds,i)),this.setup&&this.setup()),i.movement=w,this.computeOffset()));const[U,N]=i.offset,[[H,F],[K,tt]]=i._bounds;i.overflow=[U<H?-1:U>F?1:0,N<K?-1:N>tt?1:0],i._movementBound[0]=i.overflow[0]?i._movementBound[0]===!1?i._movement[0]:i._movementBound[0]:!1,i._movementBound[1]=i.overflow[1]?i._movementBound[1]===!1?i._movement[1]:i._movementBound[1]:!1;const W=i._active?r.rubberband||[0,0]:[0,0];if(i.offset=w9(i._bounds,i.offset,W),i.delta=he.sub(i.offset,R),this.computeMovement(),M&&(!i.last||u>P9)){i.delta=he.sub(i.offset,R);const Q=i.delta.map(Math.abs);he.addTo(i.distance,Q),i.direction=i.delta.map(Math.sign),i._direction=i._delta.map(Math.sign),!i.first&&u>0&&(i.velocity=[Q[0]/u,Q[1]/u],i.timeDelta=u)}}emit(){const t=this.state,i=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const o=this.handler(pe(pe(pe({},i),t),{},{[this.aliasKey]:t.values}));o!==void 0&&(t.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function U9([e,t],i){const r=Math.abs(e),o=Math.abs(t);if(r>o&&r>i)return"x";if(o>r&&o>i)return"y"}class yu extends gv{constructor(...t){super(...t),Me(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=he.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=he.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const i=this.state,r=this.config;if(!i.axis&&t){const o=typeof r.axisThreshold=="object"?r.axisThreshold[fv(t)]:r.axisThreshold;i.axis=U9(i._movement,o)}i._blocked=(r.lockDirection||!!r.axis)&&!i.axis||!!r.axis&&r.axis!==i.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const B9=e=>e,hy=.15,pv={enabled(e=!0){return e},eventOptions(e,t,i){return pe(pe({},i.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[hy,hy];case!1:return[0,0];default:return he.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return he.toVector(e)},transform(e,t,i){const r=e||i.shared.transform;return this.hasCustomTransform=!!r,r||B9},threshold(e){return he.toVector(e,0)}},z9=0,sa=pe(pe({},pv),{},{axis(e,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(e=z9){return e},bounds(e={}){if(typeof e=="function")return u=>sa.bounds(e(u));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:i=1/0,top:r=-1/0,bottom:o=1/0}=e;return[[t,i],[r,o]]}}),fy={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class q9 extends yu{constructor(...t){super(...t),Me(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const i=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),o={left:i.left-r.left+t.offset[0],right:i.right-r.right+t.offset[0],top:i.top-r.top+t.offset[1],bottom:i.bottom-r.bottom+t.offset[1]};t._bounds=sa.bounds(o)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const i=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(i.pointerButtons)?!i.pointerButtons.includes(t.buttons):i.pointerButtons!==-1&&i.pointerButtons!==t.buttons))return;const o=this.ctrl.setEventIds(t);i.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(o&&o.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=T1(t),r._pointerActive=!0,this.computeValues(ho(t)),this.computeInitial(),i.preventScrollAxis&&fv(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):i.delay>0?(this.setupDelayTrigger(t),i.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const i=this.state;i._active=!0,i._preventScroll=!0,i._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const i=this.state,r=this.config;if(!i._pointerActive)return;const o=T1(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;const u=ho(t);if(document.pointerLockElement===t.target?i._delta=[t.movementX,t.movementY]:(i._delta=he.sub(u,i._values),this.computeValues(u)),he.addTo(i._movement,i._delta),this.compute(t),i._delayed&&i.intentional){this.timeoutStore.remove("dragDelay"),i.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!i._preventScroll)if(i.axis)if(i.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){i._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const i=this.state,r=this.config;if(!i._active||!i._pointerActive)return;const o=T1(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[u,f]=i._distance;if(i.tap=u<=r.tapsThreshold&&f<=r.tapsThreshold,i.tap&&r.filterTaps)i._force=!0;else{const[m,y]=i._delta,[g,_]=i._movement,[T,w]=r.swipe.velocity,[R,M]=r.swipe.distance,U=r.swipe.duration;if(i.elapsedTime<U){const N=Math.abs(m/i.timeDelta),H=Math.abs(y/i.timeDelta);N>T&&Math.abs(g)>R&&(i.swipe[0]=Math.sign(m)),H>w&&Math.abs(_)>M&&(i.swipe[1]=Math.sign(y))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const i=this.config,r=i.device;i.pointerLock&&t.currentTarget.requestPointerLock(),i.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,H9(t);const i=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",i),this.eventStore.add(this.sharedConfig.window,"touch","cancel",i),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const i=fy[t.key];if(i){const r=this.state,o=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=i(this.config.keyboardDisplacement,o),r._keyboardActive=!0,he.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in fy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const i=this.config.device;t(i,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(i,"change",this.pointerMove.bind(this)),t(i,"end",this.pointerUp.bind(this)),t(i,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function H9(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const _u=typeof window<"u"&&window.document&&window.document.createElement;function yv(){return _u&&"ontouchstart"in window}function G9(){return yv()||_u&&window.navigator.maxTouchPoints>1}function F9(){return _u&&"onpointerdown"in window}function Q9(){return _u&&"exitPointerLock"in window.document}function Y9(){try{return"constructor"in GestureEvent}catch{return!1}}const Wn={isBrowser:_u,gesture:Y9(),touch:yv(),touchscreen:G9(),pointer:F9(),pointerLock:Q9()},K9=250,$9=180,X9=.5,Z9=50,J9=250,W9=10,dy={mouse:0,touch:0,pen:8},t7=pe(pe({},sa),{},{device(e,t,{pointer:{touch:i=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&Wn.pointerLock,Wn.touch&&i?"touch":this.pointerLock?"mouse":Wn.pointer&&!o?"pointer":Wn.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&e?K9:void 0,!(!Wn.touchscreen||i===!1))return e||(i!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:i=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&i},threshold(e,t,{filterTaps:i=!1,tapsThreshold:r=3,axis:o=void 0}){const u=he.toVector(e,i?r:o?1:0);return this.filterTaps=i,this.tapsThreshold=r,u},swipe({velocity:e=X9,distance:t=Z9,duration:i=J9}={}){return{velocity:this.transform(he.toVector(e)),distance:this.transform(he.toVector(t)),duration:i}},delay(e=0){switch(e){case!0:return $9;case!1:return 0;default:return e}},axisThreshold(e){return e?pe(pe({},dy),e):dy},keyboardDisplacement(e=W9){return e}});function _v(e){const[t,i]=e.overflow,[r,o]=e._delta,[u,f]=e._direction;(t<0&&r>0&&u<0||t>0&&r<0&&u>0)&&(e._movement[0]=e._movementBound[0]),(i<0&&o>0&&f<0||i>0&&o<0&&f>0)&&(e._movement[1]=e._movementBound[1])}const e7=30,n7=100;class i7 extends gv{constructor(...t){super(...t),Me(this,"ingKey","pinching"),Me(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:i,lastOffset:r}=this.state;t==="wheel"?this.state.offset=he.add(i,r):this.state.offset=[(1+i[0])*r[0],i[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:i}=this.state;this.state.movement=[t[0]/i[0],t[1]-i[1]]}axisIntent(){const t=this.state,[i,r]=t._movement;if(!t.axis){const o=Math.abs(i)*e7-Math.abs(r);o<0?t.axis="angle":o>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const i=this.state,r=this.ctrl.touchIds;if(i._active&&i._touchIds.every(u=>r.has(u))||r.size<2)return;this.start(t),i._touchIds=Array.from(r).slice(0,2);const o=oy(t,i._touchIds);o&&this.pinchStart(t,o)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const i=this.state,r=i._pointerEvents,o=this.ctrl.pointerIds;if(i._active&&Array.from(r.keys()).every(f=>o.has(f))||(r.size<2&&r.set(t.pointerId,t),i._pointerEvents.size<2))return;this.start(t);const u=Q1(...Array.from(r.values()));u&&this.pinchStart(t,u)}pinchStart(t,i){const r=this.state;r.origin=i.origin,this.computeValues([i.distance,i.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const i=oy(t,this.state._touchIds);i&&this.pinchMove(t,i)}pointerMove(t){const i=this.state._pointerEvents;if(i.has(t.pointerId)&&i.set(t.pointerId,t),!this.state._active)return;const r=Q1(...Array.from(i.values()));r&&this.pinchMove(t,r)}pinchMove(t,i){const r=this.state,o=r._values[1],u=i.angle-o;let f=0;Math.abs(u)>270&&(f+=Math.sign(u)),this.computeValues([i.distance,i.angle-360*f]),r.origin=i.origin,r.turns=f,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(i=>!this.ctrl.touchIds.has(i))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const i=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}i._pointerEvents.has(t.pointerId)&&i._pointerEvents.delete(t.pointerId),i._active&&i._pointerEvents.size<2&&(i._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const i=this.state;i._active||(this.start(t),this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const i=this.state;this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY];const r=i._movement;i._movement=[t.scale-1,t.rotation],i._delta=he.sub(i._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const i=this.config.modifierKey;i&&(Array.isArray(i)?!i.find(r=>t[r]):!t[i])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-mv(t)[1]/n7*r.offset[0],0],he.addTo(r._movement,r._delta),_v(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const i=this.config.device;i&&(t(i,"start",this[i+"Start"].bind(this)),t(i,"change",this[i+"Move"].bind(this)),t(i,"end",this[i+"End"].bind(this)),t(i,"cancel",this[i+"End"].bind(this)),t("lostPointerCapture","",this[i+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const s7=pe(pe({},pv),{},{device(e,t,{shared:i,pointer:{touch:r=!1}={}}){if(i.target&&!Wn.touch&&Wn.gesture)return"gesture";if(Wn.touch&&r)return"touch";if(Wn.touchscreen){if(Wn.pointer)return"pointer";if(Wn.touch)return"touch"}},bounds(e,t,{scaleBounds:i={},angleBounds:r={}}){const o=f=>{const m=cy(ph(i,f),{min:-1/0,max:1/0});return[m.min,m.max]},u=f=>{const m=cy(ph(r,f),{min:-1/0,max:1/0});return[m.min,m.max]};return typeof i!="function"&&typeof r!="function"?[o(),u()]:f=>[o(f),u(f)]},threshold(e,t,i){return this.lockDirection=i.axis==="lock",he.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});class r7 extends yu{constructor(...t){super(...t),Me(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(ho(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const i=ho(t),r=this.state;r._delta=he.sub(i,r._values),he.addTo(r._movement,r._delta),this.computeValues(i),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const a7=pe(pe({},sa),{},{mouseOnly:(e=!0)=>e});class o7 extends yu{constructor(...t){super(...t),Me(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const i=this.state,r=O9(t);i._delta=he.sub(r,i._values),he.addTo(i._movement,i._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const l7=sa;class u7 extends yu{constructor(...t){super(...t),Me(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const i=this.state;i._delta=mv(t),he.addTo(i._movement,i._delta),_v(i),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const c7=sa;class h7 extends yu{constructor(...t){super(...t),Me(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(ho(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const i=this.state;if(!i._active)return;i._active=!1;const r=ho(t);i._movement=i._delta=he.sub(r,i._values),this.computeValues(r),this.compute(t),i.delta=i.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const f7=pe(pe({},sa),{},{mouseOnly:(e=!0)=>e}),Vm=new Map,Y1=new Map;function vv(e){Vm.set(e.key,e.engine),Y1.set(e.key,e.resolver)}const Ev={key:"drag",engine:q9,resolver:t7},d7={key:"hover",engine:h7,resolver:f7},m7={key:"move",engine:r7,resolver:a7},g7={key:"pinch",engine:i7,resolver:s7},p7={key:"scroll",engine:o7,resolver:l7},y7={key:"wheel",engine:u7,resolver:c7};function _7(e,t){if(e==null)return{};var i={},r=Object.keys(e),o,u;for(u=0;u<r.length;u++)o=r[u],!(t.indexOf(o)>=0)&&(i[o]=e[o]);return i}function v7(e,t){if(e==null)return{};var i=_7(e,t),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)r=u[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const E7={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=Wn.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},T7=["target","eventOptions","window","enabled","transform"];function rh(e={},t){const i={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":i[r]=o.call(i,e[r],r,e);break;case"object":i[r]=rh(e[r],o);break;case"boolean":o&&(i[r]=e[r]);break}return i}function w7(e,t,i={}){const r=e,{target:o,eventOptions:u,window:f,enabled:m,transform:y}=r,g=v7(r,T7);if(i.shared=rh({target:o,eventOptions:u,window:f,enabled:m,transform:y},E7),t){const _=Y1.get(t);i[t]=rh(pe({shared:i.shared},g),_)}else for(const _ in g){const T=Y1.get(_);T&&(i[_]=rh(pe({shared:i.shared},g[_]),T))}return i}class Tv{constructor(t,i){Me(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=i}add(t,i,r,o,u){const f=this._listeners,m=D9(i,r),y=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=pe(pe({},y),u);t.addEventListener(m,o,g);const _=()=>{t.removeEventListener(m,o,g),f.delete(_)};return f.add(_),_}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class b7{constructor(){Me(this,"_timeouts",new Map)}add(t,i,r=140,...o){this.remove(t),this._timeouts.set(t,window.setTimeout(i,r,...o))}remove(t){const i=this._timeouts.get(t);i&&window.clearTimeout(i)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class S7{constructor(t){Me(this,"gestures",new Set),Me(this,"_targetEventStore",new Tv(this)),Me(this,"gestureEventStores",{}),Me(this,"gestureTimeoutStores",{}),Me(this,"handlers",{}),Me(this,"config",{}),Me(this,"pointerIds",new Set),Me(this,"touchIds",new Set),Me(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),C7(this,t)}setEventIds(t){if(qh(t))return this.touchIds=new Set(N9(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,i){this.handlers=t,this.nativeHandlers=i}applyConfig(t,i){this.config=w7(t,i,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const i=this.config.shared,r={};let o;if(!(i.target&&(o=i.target(),!o))){if(i.enabled){for(const f of this.gestures){const m=this.config[f],y=my(r,m.eventOptions,!!o);if(m.enabled){const g=Vm.get(f);new g(this,t,f).bind(y)}}const u=my(r,i.eventOptions,!!o);for(const f in this.nativeHandlers)u(f,"",m=>this.nativeHandlers[f](pe(pe({},this.state.shared),{},{event:m,args:t})),void 0,!0)}for(const u in r)r[u]=j9(...r[u]);if(!o)return r;for(const u in r){const{device:f,capture:m,passive:y}=I9(u);this._targetEventStore.add(o,f,"",r[u],{capture:m,passive:y})}}}}function Ja(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Tv(e,t),e.gestureTimeoutStores[t]=new b7}function C7(e,t){t.drag&&Ja(e,"drag"),t.wheel&&Ja(e,"wheel"),t.scroll&&Ja(e,"scroll"),t.move&&Ja(e,"move"),t.pinch&&Ja(e,"pinch"),t.hover&&Ja(e,"hover")}const my=(e,t,i)=>(r,o,u,f={},m=!1)=>{var y,g;const _=(y=f.capture)!==null&&y!==void 0?y:t.capture,T=(g=f.passive)!==null&&g!==void 0?g:t.passive;let w=m?r:R9(r,o,_);i&&T&&(w+="Passive"),e[w]=e[w]||[],e[w].push(u)},A7=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function R7(e){const t={},i={},r=new Set;for(let o in e)A7.test(o)?(r.add(RegExp.lastMatch),i[o]=e[o]):t[o]=e[o];return[i,t,r]}function Wa(e,t,i,r,o,u){if(!e.has(i)||!Vm.has(r))return;const f=i+"Start",m=i+"End",y=g=>{let _;return g.first&&f in t&&t[f](g),i in t&&(_=t[i](g)),g.last&&m in t&&t[m](g),_};o[r]=y,u[r]=u[r]||{}}function x7(e,t){const[i,r,o]=R7(e),u={};return Wa(o,i,"onDrag","drag",u,t),Wa(o,i,"onWheel","wheel",u,t),Wa(o,i,"onScroll","scroll",u,t),Wa(o,i,"onPinch","pinch",u,t),Wa(o,i,"onMove","move",u,t),Wa(o,i,"onHover","hover",u,t),{handlers:u,config:t,nativeHandlers:r}}function wv(e,t={},i,r){const o=Jr.useMemo(()=>new S7(e),[]);if(o.applyHandlers(e,r),o.applyConfig(t,i),Jr.useEffect(o.effect.bind(o)),Jr.useEffect(()=>o.clean.bind(o),[]),t.target===void 0)return o.bind.bind(o)}function vu(e,t){return vv(Ev),wv({drag:e},t||{},"drag")}function I7(e){return e.forEach(vv),function(i,r){const{handlers:o,nativeHandlers:u,config:f}=x7(i,r||{});return wv(o,f,void 0,u)}}function D7(e,t){return I7([Ev,g7,p7,y7,m7,d7])(e,t||{})}const M7="_popup_1om69_1",V7={popup:M7},N7=e=>{const t=Ce.c(13),{message:i,onClose:r}=e,[o,u]=X.useState(!1),[f,m]=ia(O7),{x:y,y:g,opacity:_}=f;let T;t[0]!==m||t[1]!==r?(T=N=>{const{down:H,movement:F,direction:K}=N,[tt]=F,[W]=K;if(!H&&Math.abs(tt)>100){u(!0),m.start({x:W>0?500:-500,opacity:0,onRest:r});return}m.start({x:H?tt:0,opacity:1})},t[0]=m,t[1]=r,t[2]=T):T=t[2];const w=vu(T);if(o)return null;let R;t[3]!==w?(R=w(),t[3]=w,t[4]=R):R=t[4];let M;t[5]!==_||t[6]!==y||t[7]!==g?(M={x:y,y:g,opacity:_},t[5]=_,t[6]=y,t[7]=g,t[8]=M):M=t[8];let U;return t[9]!==i||t[10]!==R||t[11]!==M?(U=S.jsx(gs.div,{...R,className:V7.popup,style:M,children:i}),t[9]=i,t[10]=R,t[11]=M,t[12]=U):U=t[12],U};function O7(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}const bv=X.createContext(),Eu=()=>X.useContext(bv),L7=({children:e})=>{const[t,i]=X.useState([]),r=(f,m={})=>{const y=Date.now();i(g=>[...g,{id:y,message:f,...m}]),m.persistent||setTimeout(()=>o(y),m.duration||3e3)},o=f=>{i(m=>m.filter(y=>y.id!==f))},u=X.useMemo(()=>({showNotification:r,removeNotification:o}),[]);return S.jsxs(bv,{value:u,children:[e,S.jsx("div",{style:{position:"fixed",top:20,right:0,left:0,display:"flex",flexDirection:"column",padding:20,gap:10,zIndex:10,pointerEvents:"none"},children:t.map(f=>S.jsx(N7,{...f,onClose:()=>o(f.id)},f.id))})]})};function oo(e){const t=e.current.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function k7(e,t){let i=0;return function(...r){const o=Date.now();o-i>=t&&(i=o,e.apply(this,r))}}function j7(e,t){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>e(...r),t)}}async function P7(e,t=32*1024){const i=[];let r=0;const o=await e.arrayBuffer();for(;r<o.byteLength;){const u=o.slice(r,r+t);i.push(u),r+=t,i.length%50===0&&await new Promise(f=>setTimeout(f,0))}return i}async function U7(e,t){let i=0;t.send(JSON.stringify({type:"imageStart",sentId:e.sentId,receivedId:e.receivedId}));for(const r of e.chunks)i++,t.send(r),i%50===0&&await new Promise(o=>setTimeout(o,0));t.send(JSON.stringify({type:"imageEnd",imageType:e.fileType}))}const K1=({type:e,content:t,replying:i,setReplying:r,selectedMessage:o,dataChannel:u,addMessage:f,sentId:m,inputRef:y,atBottomRef:g,chatBottom:_})=>{const T={type:e,content:t,sentId:m.current,receivedId:null},w={sentId:m.current,receivedId:null,type:e==="text"?e:"image",status:"sending",reaction:-1,content:t,deleted:0};if(i){const R={sentId:o.receivedId,receivedId:o.sentId};T.replyTo={...o,...R},w.replyTo=o,r(!1)}u.send(JSON.stringify(T)),f(w),m.current=m.current+1,y&&(y.current.value=""),oo(_)&&(g.current=!0),console.log("The value of isInViewPort is ",oo(_))};function B7(e){return e?new RegExp("^(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F|\\p{Emoji_Modifier_Base}(?:\\p{Emoji_Modifier})?|\\p{Extended_Pictographic})+$","u").test(e.trim()):void 0}function z7(e,t){return e.length<=t?e:e.slice(0,t)+"..."}const gy=e=>{let t;const i=new Set,r=(g,_)=>{const T=typeof g=="function"?g(t):g;if(!Object.is(T,t)){const w=t;t=_??(typeof T!="object"||T===null)?T:Object.assign({},t,T),i.forEach(R=>R(t,w))}},o=()=>t,m={setState:r,getState:o,getInitialState:()=>y,subscribe:g=>(i.add(g),()=>i.delete(g))},y=t=e(r,o,m);return m},q7=e=>e?gy(e):gy,H7=e=>e;function G7(e,t=H7){const i=Jr.useSyncExternalStore(e.subscribe,Jr.useCallback(()=>t(e.getState()),[e,t]),Jr.useCallback(()=>t(e.getInitialState()),[e,t]));return Jr.useDebugValue(i),i}const py=e=>{const t=q7(e),i=r=>G7(t,r);return Object.assign(i,t),i},Sv=e=>e?py(e):py,xt=Sv(e=>({messages:[],addMessage:t=>e(i=>({messages:[...i.messages,t]})),removeMessage:(t,i)=>e(r=>({messages:r.messages.filter(o=>o.sentId!==t&&o.receivedId!==i)})),updateMessage:(t,i,r)=>e(o=>({messages:o.messages.map(u=>u.sentId===t&&u.receivedId===i?{...u,...r}:u)})),highlightMessage:(t,i)=>e(r=>({messages:r.messages.map(o=>o.sentId===t&&o.receivedId===i?{...o,highlight:!o.highlight}:o)})),replying:null,setReplying:t=>e(()=>({replying:t})),actionsShown:!1,setActionsShown:t=>e(()=>({actionsShown:t})),reactionsShown:!1,setReactionsShown:t=>e(()=>({reactionsShown:t})),newMessage:!1,setNewMessage:t=>e(()=>({newMessage:t})),incomingCall:!1,setIncomingCall:t=>e(()=>({incomingCall:t})),typing:!1,setTyping:t=>e(()=>({typing:t})),imageDialog:null,setImageDialog:t=>e(()=>({imageDialog:t})),videoCall:"hidden",setVideoCall:t=>e(()=>({videoCall:t})),settings:!1,setSettings:t=>e(()=>({settings:t}))}));Sv(e=>({}));const ei=X.createContext(null),F7=({children:e})=>{console.log("Chat context rendered!");const{dataChannel:t,imageChannel:i}=X.useContext(Rn),{showNotification:r}=Eu(),o=X.useRef(null),u=X.useRef([]),f=X.useRef(0),m=X.useRef(null),y=X.useRef({x:0,y:0}),g=X.useRef(!1),_=X.useRef(null),T=X.useRef(!1),w=X.useRef(null),R=xt(W=>W.addMessage),M=xt(W=>W.updateMessage),U=xt(W=>W.removeMessage),N=xt(W=>W.setNewMessage),H=xt(W=>W.setVideoCall),F=xt(W=>W.setIncomingCall),K=xt(W=>W.setTyping);X.useEffect(()=>(t.current.onmessage=W=>{let Q=JSON.parse(W.data);if(Q.type==="typing")clearTimeout(_.current),K(!0),_.current=setTimeout(()=>{K(!1)},1400);else if(Q.type==="text"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:Q.type,reaction:-1,content:Q.content,deleted:0,hightlight:!1,replyTo:Q.replyTo};oo(m)?(console.log("I am in the bottom!"),T.current=!0):N(!0);let A={type:"ack",sentId:Q.sentId,receivedId:Q.receivedId};t.current.send(JSON.stringify(A)),R(D)}else if(Q.type==="ack")M(Q.sentId,null,{status:"sent"});else if(Q.type==="reaction"){let D={type:"ackReaction",sentId:Q.id,reaction:Q.reaction};t.current.send(JSON.stringify(D)),M(Q.id,null,{reaction:Q.reaction})}else if(Q.type==="ackReaction")console.log("I have received an ackReaction message: ",Q),M(null,Q.sentId,{reaction:Q.reaction});else if(Q.type==="gif"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:"image",reaction:-1,content:Q.content,deleted:0,hightlight:!1,replyTo:Q.replyTo};oo(m)?T.current=!0:N(!0);let A={type:"gifAck",sentId:Q.sentId,receivedId:Q.receivedId};t.current.send(JSON.stringify(A)),R(D)}else if(Q.type==="gifAck")M(Q.sentId,Q.receivedId,{status:"sent"});else if(Q.type==="imageRequest"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:Q.type,reaction:-1,deleted:0,hightlight:!1,replyTo:Q.replyTo};oo(m)?T.current=!0:N(!0),R(D)}else if(Q.type==="imageAccept"){const D=u.current.find(A=>A.sentId===Q.sentId&&A.receivedId===Q.receivedId);console.log(D),(async()=>await U7(D,i.current))()}else if(Q.type==="imageReject")console.log("The image I sent was rejected!"),U(Q.sentId,Q.receivedId);else if(Q.type==="imageReceived")M(Q.sentId,Q.receivedId,{status:"sent"});else if(Q.type==="delete"){let D={type:"ackDeletion",sentId:Q.sentId};t.current.send(JSON.stringify(D)),M(null,Q.sentId,{type:"text",content:"This message has been deleted",deleted:2})}else Q.type==="ackDeletion"?M(Q.sentId,null,{type:"text",content:"This message has been deleted",deleted:2}):Q.type==="callRequest"?(console.log("The other peer is trying to call me!"),F(!0)):Q.type==="callCancel"?F(!1):Q.type==="callReject"?(r("Your call was rejected!"),H("hidden")):Q.type==="callAccept"?H("connected"):Q.type==="callEnd"&&H("hidden")},i.current.onmessage=W=>{if(typeof W.data=="string"){const Q=JSON.parse(W.data);if(Q.type==="imageStart")w.current={sentId:Q.receivedId,receivedId:Q.sentId,chunks:[]};else if(Q.type==="imageEnd"){const D=new Blob(w.current.chunks,{type:Q.imageType}),A=URL.createObjectURL(D);t.current.send(JSON.stringify({type:"imageReceived",sentId:w.current.receivedId,receivedId:w.current.sentId})),M(w.current.sentId,w.current.receivedId,{type:"image",content:A,status:"received"}),w.current=null}}else w.current.chunks.push(W.data)},()=>{t.current.onmessage=null,i.current.onmessage=null}),[]);const tt=X.useMemo(()=>({chatBottom:m,sentId:f,selectedMessage:o,pointerPosition:y,longPressed:g,atBottomRef:T,images:u,receivingImage:w}),[]);return S.jsx(ei,{value:tt,children:e})},Q7="_navContainer_1vwj8_1",Y7="_logo_1vwj8_10",K7="_navList_1vwj8_16",$7="_hamburger_1vwj8_30",Mi={navContainer:Q7,logo:Y7,navList:K7,hamburger:$7};function X7(){const e=Ce.c(5);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=S.jsx("a",{href:"/",className:Mi.logo,"aria-label":"Homepage",children:"boop"}),e[0]=t):t=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx("a",{className:Mi.hamburger,"aria-label":"Expand for menu",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[S.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),S.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),S.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),e[1]=i):i=e[1];let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=S.jsx("li",{className:Mi.navItem,children:S.jsx("a",{href:"#about",className:Mi.navLink,children:"About"})}),e[2]=r):r=e[2];let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=S.jsx("li",{className:Mi.navItem,children:S.jsx("a",{href:"#projects",className:Mi.navLink,children:"Policy"})}),e[3]=o):o=e[3];let u;return e[4]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsxs("nav",{"aria-label":"Main Navigation",className:Mi.navContainer,children:[t,i,S.jsxs("ul",{className:Mi.navList,children:[r,o,S.jsx("li",{className:Mi.navItem,children:S.jsx("a",{href:"#contact",className:Mi.navLink,children:"Contact"})})]})]}),e[4]=u):u=e[4],u}const Z7="_mainContainer_15mr1_1",J7="_inputCard_15mr1_13",W7="_linkInput_15mr1_41",tE="_loaderWrapper_15mr1_71",eE="_loader_15mr1_71",Pl={mainContainer:Z7,inputCard:J7,linkInput:W7,loaderWrapper:tE,loader:eE},nE=()=>{};var yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=function(e){const t=[];let i=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},iE=function(e){const t=[];let i=0,r=0;for(;i<e.length;){const o=e[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=e[i++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=e[i++],f=e[i++],m=e[i++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=e[i++],f=e[i++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Av={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const u=e[o],f=o+1<e.length,m=f?e[o+1]:0,y=o+2<e.length,g=y?e[o+2]:0,_=u>>2,T=(u&3)<<4|m>>4;let w=(m&15)<<2|g>>6,R=g&63;y||(R=64,f||(w=64)),r.push(i[_],i[T],i[w],i[R])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Cv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):iE(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const u=i[e.charAt(o++)],m=o<e.length?i[e.charAt(o)]:0;++o;const g=o<e.length?i[e.charAt(o)]:64;++o;const T=o<e.length?i[e.charAt(o)]:64;if(++o,u==null||m==null||g==null||T==null)throw new sE;const w=u<<2|m>>4;if(r.push(w),g!==64){const R=m<<4&240|g>>2;if(r.push(R),T!==64){const M=g<<6&192|T;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class sE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rE=function(e){const t=Cv(e);return Av.encodeByteArray(t,!0)},yh=function(e){return rE(e).replace(/\./g,"")},aE=function(e){try{return Av.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=()=>oE().__FIREBASE_DEFAULTS__,uE=()=>{if(typeof process>"u"||typeof yy>"u")return;const e=yy.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},cE=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&aE(e[1]);return t&&JSON.parse(t)},Nm=()=>{try{return nE()||lE()||uE()||cE()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},hE=e=>{var t,i;return(i=(t=Nm())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[e]},fE=e=>{const t=hE(e);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Rv=()=>{var e;return(e=Nm())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(e){return e.endsWith(".cloudworkstations.dev")}async function mE(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=e.iat||0,u=e.sub||e.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},e);return[yh(JSON.stringify(i)),yh(JSON.stringify(f)),""].join(".")}const Kl={};function pE(){const e={prod:[],emulator:[]};for(const t of Object.keys(Kl))Kl[t]?e.emulator.push(t):e.prod.push(t);return e}function yE(e){let t=document.getElementById(e),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),i=!0),{created:i,element:t}}let _y=!1;function _E(e,t){if(typeof window>"u"||typeof document>"u"||!Om(window.location.host)||Kl[e]===t||Kl[e]||_y)return;Kl[e]=t;function i(w){return`__firebase__banner__${w}`}const r="__firebase__banner",u=pE().prod.length>0;function f(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function y(w,R){w.setAttribute("width","24"),w.setAttribute("id",R),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function g(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{_y=!0,f()},w}function _(w,R){w.setAttribute("id",R),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=yE(r),R=i("text"),M=document.getElementById(R)||document.createElement("span"),U=i("learnmore"),N=document.getElementById(U)||document.createElement("a"),H=i("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const K=w.element;m(K),_(N,U);const tt=g();y(F,H),K.append(F,M,N,tt),document.body.appendChild(K)}u?(M.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EE(){var e;const t=(e=Nm())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TE(){return!EE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wE(){try{return typeof indexedDB=="object"}catch{return!1}}function bE(){return new Promise((e,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="FirebaseError";class wo extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=SE,Object.setPrototypeOf(this,wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xv.prototype.create)}}class xv{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?CE(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new wo(o,m,r)}}function CE(e,t){return e.replace(AE,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const AE=/\{\$([^}]+)}/g;function _h(e,t){if(e===t)return!0;const i=Object.keys(e),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const u=e[o],f=t[o];if(vy(u)&&vy(f)){if(!_h(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function vy(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(e){return e&&e._delegate?e._delegate:e}class ou{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new dE;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IE(t))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Xr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xr){return this.instances.has(t)}getOptions(t=Xr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(t,i){var r;const o=this.normalizeInstanceIdentifier(i),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xE(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Xr){return this.component?this.component.multipleInstances?t:Xr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xE(e){return e===Xr?void 0:e}function IE(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new RE(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Yt||(Yt={}));const ME={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},VE=Yt.INFO,NE={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},OE=(e,t,...i)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),o=NE[t];if(o)console[o](`[${r}]  ${e.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Iv{constructor(t){this.name=t,this._logLevel=VE,this._logHandler=OE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?ME[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...t),this._logHandler(this,Yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...t),this._logHandler(this,Yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...t),this._logHandler(this,Yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...t),this._logHandler(this,Yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...t),this._logHandler(this,Yt.ERROR,...t)}}const LE=(e,t)=>t.some(i=>e instanceof i);let Ey,Ty;function kE(){return Ey||(Ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jE(){return Ty||(Ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dv=new WeakMap,$1=new WeakMap,Mv=new WeakMap,w1=new WeakMap,Lm=new WeakMap;function PE(e){const t=new Promise((i,r)=>{const o=()=>{e.removeEventListener("success",u),e.removeEventListener("error",f)},u=()=>{i(ir(e.result)),o()},f=()=>{r(e.error),o()};e.addEventListener("success",u),e.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&Dv.set(i,e)}).catch(()=>{}),Lm.set(t,e),t}function UE(e){if($1.has(e))return;const t=new Promise((i,r)=>{const o=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",f),e.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",u),e.addEventListener("error",f),e.addEventListener("abort",f)});$1.set(e,t)}let X1={get(e,t,i){if(e instanceof IDBTransaction){if(t==="done")return $1.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Mv.get(e);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ir(e[t])},set(e,t,i){return e[t]=i,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function BE(e){X1=e(X1)}function zE(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=e.call(b1(this),t,...i);return Mv.set(r,t.sort?t.sort():[t]),ir(r)}:jE().includes(e)?function(...t){return e.apply(b1(this),t),ir(Dv.get(this))}:function(...t){return ir(e.apply(b1(this),t))}}function qE(e){return typeof e=="function"?zE(e):(e instanceof IDBTransaction&&UE(e),LE(e,kE())?new Proxy(e,X1):e)}function ir(e){if(e instanceof IDBRequest)return PE(e);if(w1.has(e))return w1.get(e);const t=qE(e);return t!==e&&(w1.set(e,t),Lm.set(t,e)),t}const b1=e=>Lm.get(e);function HE(e,t,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(e,t),m=ir(f);return r&&f.addEventListener("upgradeneeded",y=>{r(ir(f.result),y.oldVersion,y.newVersion,ir(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const GE=["get","getKey","getAll","getAllKeys","count"],FE=["put","add","delete","clear"],S1=new Map;function wy(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(S1.get(t))return S1.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=FE.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||GE.includes(i)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[i](...m),o&&y.done]))[0]};return S1.set(t,u),u}BE(e=>({...e,get:(t,i,r)=>wy(t,i)||e.get(t,i,r),has:(t,i)=>!!wy(t,i)||e.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(YE(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function YE(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Z1="@firebase/app",by="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Iv("@firebase/app"),KE="@firebase/app-compat",$E="@firebase/analytics-compat",XE="@firebase/analytics",ZE="@firebase/app-check-compat",JE="@firebase/app-check",WE="@firebase/auth",t8="@firebase/auth-compat",e8="@firebase/database",n8="@firebase/data-connect",i8="@firebase/database-compat",s8="@firebase/functions",r8="@firebase/functions-compat",a8="@firebase/installations",o8="@firebase/installations-compat",l8="@firebase/messaging",u8="@firebase/messaging-compat",c8="@firebase/performance",h8="@firebase/performance-compat",f8="@firebase/remote-config",d8="@firebase/remote-config-compat",m8="@firebase/storage",g8="@firebase/storage-compat",p8="@firebase/firestore",y8="@firebase/ai",_8="@firebase/firestore-compat",v8="firebase",E8="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="[DEFAULT]",T8={[Z1]:"fire-core",[KE]:"fire-core-compat",[XE]:"fire-analytics",[$E]:"fire-analytics-compat",[JE]:"fire-app-check",[ZE]:"fire-app-check-compat",[WE]:"fire-auth",[t8]:"fire-auth-compat",[e8]:"fire-rtdb",[n8]:"fire-data-connect",[i8]:"fire-rtdb-compat",[s8]:"fire-fn",[r8]:"fire-fn-compat",[a8]:"fire-iid",[o8]:"fire-iid-compat",[l8]:"fire-fcm",[u8]:"fire-fcm-compat",[c8]:"fire-perf",[h8]:"fire-perf-compat",[f8]:"fire-rc",[d8]:"fire-rc-compat",[m8]:"fire-gcs",[g8]:"fire-gcs-compat",[p8]:"fire-fst",[_8]:"fire-fst-compat",[y8]:"fire-vertex","fire-js":"fire-js",[v8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Map,w8=new Map,W1=new Map;function Sy(e,t){try{e.container.addComponent(t)}catch(i){_s.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function Eh(e){const t=e.name;if(W1.has(t))return _s.debug(`There were multiple attempts to register component ${t}.`),!1;W1.set(t,e);for(const i of vh.values())Sy(i,e);for(const i of w8.values())Sy(i,e);return!0}function b8(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function S8(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new xv("app","Firebase",C8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ou("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=E8;function Vv(e,t={}){let i=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:J1,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw sr.create("bad-app-name",{appName:String(o)});if(i||(i=Rv()),!i)throw sr.create("no-options");const u=vh.get(o);if(u){if(_h(i,u.options)&&_h(r,u.config))return u;throw sr.create("duplicate-app",{appName:o})}const f=new DE(o);for(const y of W1.values())f.addComponent(y);const m=new A8(i,r,f);return vh.set(o,m),m}function x8(e=J1){const t=vh.get(e);if(!t&&e===J1&&Rv())return Vv();if(!t)throw sr.create("no-app",{appName:e});return t}function lo(e,t,i){var r;let o=(r=T8[e])!==null&&r!==void 0?r:e;i&&(o+=`-${i}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),_s.warn(m.join(" "));return}Eh(new ou(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="firebase-heartbeat-database",D8=1,lu="firebase-heartbeat-store";let C1=null;function Nv(){return C1||(C1=HE(I8,D8,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(lu)}catch(i){console.warn(i)}}}}).catch(e=>{throw sr.create("idb-open",{originalErrorMessage:e.message})})),C1}async function M8(e){try{const i=(await Nv()).transaction(lu),r=await i.objectStore(lu).get(Ov(e));return await i.done,r}catch(t){if(t instanceof wo)_s.warn(t.message);else{const i=sr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});_s.warn(i.message)}}}async function Cy(e,t){try{const r=(await Nv()).transaction(lu,"readwrite");await r.objectStore(lu).put(t,Ov(e)),await r.done}catch(i){if(i instanceof wo)_s.warn(i.message);else{const r=sr.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});_s.warn(r.message)}}}function Ov(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=1024,N8=30;class O8{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new k8(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Ay();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>N8){const f=j8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_s.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Ay(),{heartbeatsToSend:r,unsentEntries:o}=L8(this._heartbeatsCache.heartbeats),u=yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return _s.warn(i),""}}}function Ay(){return new Date().toISOString().substring(0,10)}function L8(e,t=V8){const i=[];let r=e.slice();for(const o of e){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Ry(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Ry(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class k8{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wE()?bE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await M8(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Ry(e){return yh(JSON.stringify({version:2,heartbeats:e})).length}function j8(e){if(e.length===0)return-1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(e){Eh(new ou("platform-logger",t=>new QE(t),"PRIVATE")),Eh(new ou("heartbeat",t=>new O8(t),"PRIVATE")),lo(Z1,by,e),lo(Z1,by,"esm2017"),lo("fire-js","")}P8("");var U8="firebase",B8="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lo(U8,B8,"app");var xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,Lv;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,A){function x(){}x.prototype=A.prototype,D.D=A.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(k,L,P){for(var I=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)I[Dt-2]=arguments[Dt];return A.prototype[L].apply(k,I)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,A,x){x||(x=0);var k=Array(16);if(typeof A=="string")for(var L=0;16>L;++L)k[L]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(L=0;16>L;++L)k[L]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=D.g[0],x=D.g[1],L=D.g[2];var P=D.g[3],I=A+(P^x&(L^P))+k[0]+3614090360&4294967295;A=x+(I<<7&4294967295|I>>>25),I=P+(L^A&(x^L))+k[1]+3905402710&4294967295,P=A+(I<<12&4294967295|I>>>20),I=L+(x^P&(A^x))+k[2]+606105819&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(A^L&(P^A))+k[3]+3250441966&4294967295,x=L+(I<<22&4294967295|I>>>10),I=A+(P^x&(L^P))+k[4]+4118548399&4294967295,A=x+(I<<7&4294967295|I>>>25),I=P+(L^A&(x^L))+k[5]+1200080426&4294967295,P=A+(I<<12&4294967295|I>>>20),I=L+(x^P&(A^x))+k[6]+2821735955&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(A^L&(P^A))+k[7]+4249261313&4294967295,x=L+(I<<22&4294967295|I>>>10),I=A+(P^x&(L^P))+k[8]+1770035416&4294967295,A=x+(I<<7&4294967295|I>>>25),I=P+(L^A&(x^L))+k[9]+2336552879&4294967295,P=A+(I<<12&4294967295|I>>>20),I=L+(x^P&(A^x))+k[10]+4294925233&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(A^L&(P^A))+k[11]+2304563134&4294967295,x=L+(I<<22&4294967295|I>>>10),I=A+(P^x&(L^P))+k[12]+1804603682&4294967295,A=x+(I<<7&4294967295|I>>>25),I=P+(L^A&(x^L))+k[13]+4254626195&4294967295,P=A+(I<<12&4294967295|I>>>20),I=L+(x^P&(A^x))+k[14]+2792965006&4294967295,L=P+(I<<17&4294967295|I>>>15),I=x+(A^L&(P^A))+k[15]+1236535329&4294967295,x=L+(I<<22&4294967295|I>>>10),I=A+(L^P&(x^L))+k[1]+4129170786&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(A^x))+k[6]+3225465664&4294967295,P=A+(I<<9&4294967295|I>>>23),I=L+(A^x&(P^A))+k[11]+643717713&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(L^P))+k[0]+3921069994&4294967295,x=L+(I<<20&4294967295|I>>>12),I=A+(L^P&(x^L))+k[5]+3593408605&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(A^x))+k[10]+38016083&4294967295,P=A+(I<<9&4294967295|I>>>23),I=L+(A^x&(P^A))+k[15]+3634488961&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(L^P))+k[4]+3889429448&4294967295,x=L+(I<<20&4294967295|I>>>12),I=A+(L^P&(x^L))+k[9]+568446438&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(A^x))+k[14]+3275163606&4294967295,P=A+(I<<9&4294967295|I>>>23),I=L+(A^x&(P^A))+k[3]+4107603335&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(L^P))+k[8]+1163531501&4294967295,x=L+(I<<20&4294967295|I>>>12),I=A+(L^P&(x^L))+k[13]+2850285829&4294967295,A=x+(I<<5&4294967295|I>>>27),I=P+(x^L&(A^x))+k[2]+4243563512&4294967295,P=A+(I<<9&4294967295|I>>>23),I=L+(A^x&(P^A))+k[7]+1735328473&4294967295,L=P+(I<<14&4294967295|I>>>18),I=x+(P^A&(L^P))+k[12]+2368359562&4294967295,x=L+(I<<20&4294967295|I>>>12),I=A+(x^L^P)+k[5]+4294588738&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^L)+k[8]+2272392833&4294967295,P=A+(I<<11&4294967295|I>>>21),I=L+(P^A^x)+k[11]+1839030562&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^A)+k[14]+4259657740&4294967295,x=L+(I<<23&4294967295|I>>>9),I=A+(x^L^P)+k[1]+2763975236&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^L)+k[4]+1272893353&4294967295,P=A+(I<<11&4294967295|I>>>21),I=L+(P^A^x)+k[7]+4139469664&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^A)+k[10]+3200236656&4294967295,x=L+(I<<23&4294967295|I>>>9),I=A+(x^L^P)+k[13]+681279174&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^L)+k[0]+3936430074&4294967295,P=A+(I<<11&4294967295|I>>>21),I=L+(P^A^x)+k[3]+3572445317&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^A)+k[6]+76029189&4294967295,x=L+(I<<23&4294967295|I>>>9),I=A+(x^L^P)+k[9]+3654602809&4294967295,A=x+(I<<4&4294967295|I>>>28),I=P+(A^x^L)+k[12]+3873151461&4294967295,P=A+(I<<11&4294967295|I>>>21),I=L+(P^A^x)+k[15]+530742520&4294967295,L=P+(I<<16&4294967295|I>>>16),I=x+(L^P^A)+k[2]+3299628645&4294967295,x=L+(I<<23&4294967295|I>>>9),I=A+(L^(x|~P))+k[0]+4096336452&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~L))+k[7]+1126891415&4294967295,P=A+(I<<10&4294967295|I>>>22),I=L+(A^(P|~x))+k[14]+2878612391&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~A))+k[5]+4237533241&4294967295,x=L+(I<<21&4294967295|I>>>11),I=A+(L^(x|~P))+k[12]+1700485571&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~L))+k[3]+2399980690&4294967295,P=A+(I<<10&4294967295|I>>>22),I=L+(A^(P|~x))+k[10]+4293915773&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~A))+k[1]+2240044497&4294967295,x=L+(I<<21&4294967295|I>>>11),I=A+(L^(x|~P))+k[8]+1873313359&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~L))+k[15]+4264355552&4294967295,P=A+(I<<10&4294967295|I>>>22),I=L+(A^(P|~x))+k[6]+2734768916&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~A))+k[13]+1309151649&4294967295,x=L+(I<<21&4294967295|I>>>11),I=A+(L^(x|~P))+k[4]+4149444226&4294967295,A=x+(I<<6&4294967295|I>>>26),I=P+(x^(A|~L))+k[11]+3174756917&4294967295,P=A+(I<<10&4294967295|I>>>22),I=L+(A^(P|~x))+k[2]+718787259&4294967295,L=P+(I<<15&4294967295|I>>>17),I=x+(P^(L|~A))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+A&4294967295,D.g[1]=D.g[1]+(L+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+P&4294967295}r.prototype.u=function(D,A){A===void 0&&(A=D.length);for(var x=A-this.blockSize,k=this.B,L=this.h,P=0;P<A;){if(L==0)for(;P<=x;)o(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<A;)if(k[L++]=D.charCodeAt(P++),L==this.blockSize){o(this,k),L=0;break}}else for(;P<A;)if(k[L++]=D[P++],L==this.blockSize){o(this,k),L=0;break}}this.h=L,this.o+=A},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var A=1;A<D.length-8;++A)D[A]=0;var x=8*this.o;for(A=D.length-8;A<D.length;++A)D[A]=x&255,x/=256;for(this.u(D),D=Array(16),A=x=0;4>A;++A)for(var k=0;32>k;k+=8)D[x++]=this.g[A]>>>k&255;return D};function u(D,A){var x=m;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=A(D)}function f(D,A){this.h=A;for(var x=[],k=!0,L=D.length-1;0<=L;L--){var P=D[L]|0;k&&P==A||(x[L]=P,k=!1)}this.g=x}var m={};function y(D){return-128<=D&&128>D?u(D,function(A){return new f([A|0],0>A?-1:0)}):new f([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return T;if(0>D)return N(g(-D));for(var A=[],x=1,k=0;D>=x;k++)A[k]=D/x|0,x*=4294967296;return new f(A,0)}function _(D,A){if(D.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D.charAt(0)=="-")return N(_(D.substring(1),A));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(A,8)),k=T,L=0;L<D.length;L+=8){var P=Math.min(8,D.length-L),I=parseInt(D.substring(L,L+P),A);8>P?(P=g(Math.pow(A,P)),k=k.j(P).add(g(I))):(k=k.j(x),k=k.add(g(I)))}return k}var T=y(0),w=y(1),R=y(16777216);e=f.prototype,e.m=function(){if(U(this))return-N(this).m();for(var D=0,A=1,x=0;x<this.g.length;x++){var k=this.i(x);D+=(0<=k?k:4294967296+k)*A,A*=4294967296}return D},e.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(U(this))return"-"+N(this).toString(D);for(var A=g(Math.pow(D,6)),x=this,k="";;){var L=tt(x,A).g;x=H(x,L.j(A));var P=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=L,M(x))return P+k;for(;6>P.length;)P="0"+P;k=P+k}},e.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var A=0;A<D.g.length;A++)if(D.g[A]!=0)return!1;return!0}function U(D){return D.h==-1}e.l=function(D){return D=H(this,D),U(D)?-1:M(D)?0:1};function N(D){for(var A=D.g.length,x=[],k=0;k<A;k++)x[k]=~D.g[k];return new f(x,~D.h).add(w)}e.abs=function(){return U(this)?N(this):this},e.add=function(D){for(var A=Math.max(this.g.length,D.g.length),x=[],k=0,L=0;L<=A;L++){var P=k+(this.i(L)&65535)+(D.i(L)&65535),I=(P>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);k=I>>>16,P&=65535,I&=65535,x[L]=I<<16|P}return new f(x,x[x.length-1]&-2147483648?-1:0)};function H(D,A){return D.add(N(A))}e.j=function(D){if(M(this)||M(D))return T;if(U(this))return U(D)?N(this).j(N(D)):N(N(this).j(D));if(U(D))return N(this.j(N(D)));if(0>this.l(R)&&0>D.l(R))return g(this.m()*D.m());for(var A=this.g.length+D.g.length,x=[],k=0;k<2*A;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var L=0;L<D.g.length;L++){var P=this.i(k)>>>16,I=this.i(k)&65535,Dt=D.i(L)>>>16,Mt=D.i(L)&65535;x[2*k+2*L]+=I*Mt,F(x,2*k+2*L),x[2*k+2*L+1]+=P*Mt,F(x,2*k+2*L+1),x[2*k+2*L+1]+=I*Dt,F(x,2*k+2*L+1),x[2*k+2*L+2]+=P*Dt,F(x,2*k+2*L+2)}for(k=0;k<A;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=A;k<2*A;k++)x[k]=0;return new f(x,0)};function F(D,A){for(;(D[A]&65535)!=D[A];)D[A+1]+=D[A]>>>16,D[A]&=65535,A++}function K(D,A){this.g=D,this.h=A}function tt(D,A){if(M(A))throw Error("division by zero");if(M(D))return new K(T,T);if(U(D))return A=tt(N(D),A),new K(N(A.g),N(A.h));if(U(A))return A=tt(D,N(A)),new K(N(A.g),A.h);if(30<D.g.length){if(U(D)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var x=w,k=A;0>=k.l(D);)x=W(x),k=W(k);var L=Q(x,1),P=Q(k,1);for(k=Q(k,2),x=Q(x,2);!M(k);){var I=P.add(k);0>=I.l(D)&&(L=L.add(x),P=I),k=Q(k,1),x=Q(x,1)}return A=H(D,L.j(A)),new K(L,A)}for(L=T;0<=D.l(A);){for(x=Math.max(1,Math.floor(D.m()/A.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),P=g(x),I=P.j(A);U(I)||0<I.l(D);)x-=k,P=g(x),I=P.j(A);M(P)&&(P=w),L=L.add(P),D=H(D,I)}return new K(L,D)}e.A=function(D){return tt(this,D).h},e.and=function(D){for(var A=Math.max(this.g.length,D.g.length),x=[],k=0;k<A;k++)x[k]=this.i(k)&D.i(k);return new f(x,this.h&D.h)},e.or=function(D){for(var A=Math.max(this.g.length,D.g.length),x=[],k=0;k<A;k++)x[k]=this.i(k)|D.i(k);return new f(x,this.h|D.h)},e.xor=function(D){for(var A=Math.max(this.g.length,D.g.length),x=[],k=0;k<A;k++)x[k]=this.i(k)^D.i(k);return new f(x,this.h^D.h)};function W(D){for(var A=D.g.length+1,x=[],k=0;k<A;k++)x[k]=D.i(k)<<1|D.i(k-1)>>>31;return new f(x,D.h)}function Q(D,A){var x=A>>5;A%=32;for(var k=D.g.length-x,L=[],P=0;P<k;P++)L[P]=0<A?D.i(P+x)>>>A|D.i(P+x+1)<<32-A:D.i(P+x);return new f(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lv=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=_,rr=f}).apply(typeof xy<"u"?xy:typeof self<"u"?self:typeof window<"u"?window:{});var Yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kv,Bl,jv,ah,tm,Pv,Uv,Bv;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,v){return c==Array.prototype||c==Object.prototype||(c[p]=v.value),c};function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yc=="object"&&Yc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=i(this);function o(c,p){if(p)t:{var v=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var z=c[C];if(!(z in v))break t;v=v[z]}c=c[c.length-1],C=v[c],p=p(C),p!=C&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var v=0,C=!1,z={next:function(){if(!C&&v<c.length){var J=v++;return{value:p(J,c[J]),done:!1}}return C=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function _(c,p,v){return c.call.apply(c.bind,arguments)}function T(c,p,v){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,C),c.apply(p,z)}}return function(){return c.apply(p,arguments)}}function w(c,p,v){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,w.apply(null,arguments)}function R(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var C=v.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function M(c,p){function v(){}v.prototype=p.prototype,c.aa=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(C,z,J){for(var ft=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)ft[Ht-2]=arguments[Ht];return p.prototype[z].apply(C,ft)}}function U(c){const p=c.length;if(0<p){const v=Array(p);for(let C=0;C<p;C++)v[C]=c[C];return v}return[]}function N(c,p){for(let v=1;v<arguments.length;v++){const C=arguments[v];if(y(C)){const z=c.length||0,J=C.length||0;c.length=z+J;for(let ft=0;ft<J;ft++)c[z+ft]=C[ft]}else c.push(C)}}class H{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function F(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function tt(c){return tt[" "](c),c}tt[" "]=function(){};var W=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Q(c,p,v){for(const C in c)p.call(v,c[C],C,c)}function D(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function A(c){const p={};for(const v in c)p[v]=c[v];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,p){let v,C;for(let z=1;z<arguments.length;z++){C=arguments[z];for(v in C)c[v]=C[v];for(let J=0;J<x.length;J++)v=x[J],Object.prototype.hasOwnProperty.call(C,v)&&(c[v]=C[v])}}function L(c){var p=1;c=c.split(":");const v=[];for(;0<p&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function P(c){m.setTimeout(()=>{throw c},0)}function I(){var c=At;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Dt{constructor(){this.h=this.g=null}add(p,v){const C=Mt.get();C.set(p,v),this.h?this.h.next=C:this.g=C,this.h=C}}var Mt=new H(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,mt=!1,At=new Dt,O=()=>{const c=m.Promise.resolve(void 0);ut=()=>{c.then(nt)}};var nt=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(v){P(v)}var p=Mt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}mt=!1};function st(){this.s=this.s,this.C=this.C}st.prototype.s=!1,st.prototype.ma=function(){this.s||(this.s=!0,this.N())},st.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,p),m.removeEventListener("test",v,p)}catch{}return c}();function ct(c,p){if(at.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(W){t:{try{tt(p.nodeName);var z=!0;break t}catch{}z=!1}z||(p=null)}}else v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement);this.relatedTarget=p,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:dt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ct.aa.h.call(this)}}M(ct,at);var dt={2:"touch",3:"pen",4:"mouse"};ct.prototype.h=function(){ct.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function ae(c,p,v,C,z){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!C,this.ha=z,this.key=++Vt,this.da=this.fa=!1}function Ee(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function sn(c){this.src=c,this.g={},this.h=0}sn.prototype.add=function(c,p,v,C,z){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var ft=hn(c,p,C,z);return-1<ft?(p=c[ft],v||(p.fa=!1)):(p=new ae(p,this.src,J,!!C,z),p.fa=v,c.push(p)),p};function rn(c,p){var v=p.type;if(v in c.g){var C=c.g[v],z=Array.prototype.indexOf.call(C,p,void 0),J;(J=0<=z)&&Array.prototype.splice.call(C,z,1),J&&(Ee(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function hn(c,p,v,C){for(var z=0;z<c.length;++z){var J=c[z];if(!J.da&&J.listener==p&&J.capture==!!v&&J.ha==C)return z}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),fn={};function yn(c,p,v,C,z){if(Array.isArray(p)){for(var J=0;J<p.length;J++)yn(c,p[J],v,C,z);return null}return v=si(v),c&&c[_t]?c.K(p,v,g(C)?!!C.capture:!1,z):Ve(c,p,v,!1,C,z)}function Ve(c,p,v,C,z,J){if(!p)throw Error("Invalid event type");var ft=g(z)?!!z.capture:!!z,Ht=ii(c);if(Ht||(c[Ke]=Ht=new sn(c)),v=Ht.add(p,v,C,ft,J),v.proxy)return v;if(C=ni(),v.proxy=C,C.src=c,C.listener=v,c.addEventListener)gt||(z=ft),z===void 0&&(z=!1),c.addEventListener(p.toString(),C,z);else if(c.attachEvent)c.attachEvent(vn(p.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ni(){function c(v){return p.call(c.src,c.listener,v)}const p=pr;return c}function _n(c,p,v,C,z){if(Array.isArray(p))for(var J=0;J<p.length;J++)_n(c,p[J],v,C,z);else C=g(C)?!!C.capture:!!C,v=si(v),c&&c[_t]?(c=c.i,p=String(p).toString(),p in c.g&&(J=c.g[p],v=hn(J,v,C,z),-1<v&&(Ee(J[v]),Array.prototype.splice.call(J,v,1),J.length==0&&(delete c.g[p],c.h--)))):c&&(c=ii(c))&&(p=c.g[p.toString()],c=-1,p&&(c=hn(p,v,C,z)),(v=-1<c?p[c]:null)&&ze(v))}function ze(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[_t])rn(p.i,c);else{var v=c.type,C=c.proxy;p.removeEventListener?p.removeEventListener(v,C,c.capture):p.detachEvent?p.detachEvent(vn(v),C):p.addListener&&p.removeListener&&p.removeListener(C),(v=ii(p))?(rn(v,c),v.h==0&&(v.src=null,p[Ke]=null)):Ee(c)}}}function vn(c){return c in fn?fn[c]:fn[c]="on"+c}function pr(c,p){if(c.da)c=!0;else{p=new ct(p,this);var v=c.listener,C=c.ha||c.src;c.fa&&ze(c),c=v.call(C,p)}return c}function ii(c){return c=c[Ke],c instanceof sn?c:null}var Un="__closure_events_fn_"+(1e9*Math.random()>>>0);function si(c){return typeof c=="function"?c:(c[Un]||(c[Un]=function(p){return c.handleEvent(p)}),c[Un])}function Jt(){st.call(this),this.i=new sn(this),this.M=this,this.F=null}M(Jt,st),Jt.prototype[_t]=!0,Jt.prototype.removeEventListener=function(c,p,v,C){_n(this,c,p,v,C)};function qt(c,p){var v,C=c.F;if(C)for(v=[];C;C=C.F)v.push(C);if(c=c.M,C=p.type||p,typeof p=="string")p=new at(p,c);else if(p instanceof at)p.target=p.target||c;else{var z=p;p=new at(C,c),k(p,z)}if(z=!0,v)for(var J=v.length-1;0<=J;J--){var ft=p.g=v[J];z=le(ft,C,!0,p)&&z}if(ft=p.g=c,z=le(ft,C,!0,p)&&z,z=le(ft,C,!1,p)&&z,v)for(J=0;J<v.length;J++)ft=p.g=v[J],z=le(ft,C,!1,p)&&z}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var v=c.g[p],C=0;C<v.length;C++)Ee(v[C]);delete c.g[p],c.h--}}this.F=null},Jt.prototype.K=function(c,p,v,C){return this.i.add(String(c),p,!1,v,C)},Jt.prototype.L=function(c,p,v,C){return this.i.add(String(c),p,!0,v,C)};function le(c,p,v,C){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var z=!0,J=0;J<p.length;++J){var ft=p[J];if(ft&&!ft.da&&ft.capture==v){var Ht=ft.listener,Oe=ft.ha||ft.src;ft.fa&&rn(c.i,ft),z=Ht.call(Oe,C)!==!1&&z}}return z&&!C.defaultPrevented}function ue(c,p,v){if(typeof c=="function")v&&(c=w(c,v));else if(c&&typeof c.handleEvent=="function")c=w(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function zi(c){c.g=ue(()=>{c.g=null,c.i&&(c.i=!1,zi(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Ro extends st{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:zi(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(c){st.call(this),this.h=c,this.g={}}M(yr,st);var _r=[];function vr(c){Q(c.g,function(p,v){this.g.hasOwnProperty(v)&&ze(p)},c),c.g={}}yr.prototype.N=function(){yr.aa.N.call(this),vr(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=m.JSON.stringify,oa=m.JSON.parse,Er=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function xo(){}xo.prototype.h=null;function Io(c){return c.h||(c.h=c.i())}function Do(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hi(){at.call(this,"d")}M(Hi,at);function Mo(){at.call(this,"c")}M(Mo,at);var gi={},Vo=null;function Ts(){return Vo=Vo||new Jt}gi.La="serverreachability";function la(c){at.call(this,gi.La,c)}M(la,at);function ws(c){const p=Ts();qt(p,new la(p))}gi.STAT_EVENT="statevent";function Cu(c,p){at.call(this,gi.STAT_EVENT,c),this.stat=p}M(Cu,at);function fe(c){const p=Ts();qt(p,new Cu(p,c))}gi.Ma="timingevent";function Ne(c,p){at.call(this,gi.Ma,c),this.size=p}M(Ne,at);function Ae(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function No(c,p,v,C,z,J){c.info(function(){if(c.g)if(J)for(var ft="",Ht=J.split("&"),Oe=0;Oe<Ht.length;Oe++){var Gt=Ht[Oe].split("=");if(1<Gt.length){var He=Gt[0];Gt=Gt[1];var Le=He.split("_");ft=2<=Le.length&&Le[1]=="type"?ft+(He+"="+Gt+"&"):ft+(He+"=redacted&")}}else ft=null;else ft=J;return"XMLHTTP REQ ("+C+") [attempt "+z+"]: "+p+`
`+v+`
`+ft})}function cf(c,p,v,C,z,J,ft){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+z+"]: "+p+`
`+v+`
`+J+" "+ft})}function bs(c,p,v,C){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Tr(c,v)+(C?" "+C:"")})}function Au(c,p){c.info(function(){return"TIMEOUT: "+p})}Bn.prototype.info=function(){};function Tr(c,p){if(!c.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var C=v[c];if(!(2>C.length)){var z=C[1];if(Array.isArray(z)&&!(1>z.length)){var J=z[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ft=1;ft<z.length;ft++)z[ft]=""}}}}return ri(v)}catch{return p}}var Ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pi;function yi(){}M(yi,xo),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},pi=new yi;function dn(c,p,v,C){this.j=c,this.i=p,this.l=v,this.R=C||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Te}function Te(){this.i=null,this.g="",this.h=!1}var Oo={},ua={};function ai(c,p,v){c.L=1,c.v=Ar(xn(p)),c.m=v,c.P=!0,Fi(c,null)}function Fi(c,p){c.F=Date.now(),wr(c),c.A=xn(c.v);var v=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),Bo(v.i,"t",C),c.C=0,v=c.j.J,c.h=new Te,c.g=qu(c.j,v?p:null,!c.m),0<c.O&&(c.M=new Ro(w(c.Y,c,c.g),c.O)),p=c.U,v=c.g,C=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(_r[0]=z.toString()),z=_r);for(var J=0;J<z.length;J++){var ft=yn(v,z[J],C||p.handleEvent,!1,p.h||p);if(!ft)break;p.g[ft.key]=ft}p=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),ws(),No(c.i,c.u,c.A,c.l,c.R,c.m)}dn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Gn(c)==3?p.j():this.Y(c)},dn.prototype.Y=function(c){try{if(c==this.g)t:{const Le=Gn(this.g);var p=this.g.Ba();const Wi=this.g.Z();if(!(3>Le)&&(Le!=3||this.g&&(this.h.h||this.g.oa()||Ou(this.g)))){this.J||Le!=4||p==7||(p==8||0>=Wi?ws(3):ws(2)),Cs(this);var v=this.g.Z();this.X=v;e:if(Ru(this)){var C=Ou(this.g);c="";var z=C.length,J=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$e(this),_i(this);var ft="";break e}this.h.i=new m.TextDecoder}for(p=0;p<z;p++)this.h.h=!0,c+=this.h.i.decode(C[p],{stream:!(J&&p==z-1)});C.length=0,this.h.g+=c,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=v==200,cf(this.i,this.u,this.A,this.l,this.R,Le,v),this.o){if(this.T&&!this.K){e:{if(this.g){var Ht,Oe=this.g;if((Ht=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Ht)){var Gt=Ht;break e}}Gt=null}if(v=Gt)bs(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,br(this,v);else{this.o=!1,this.s=3,fe(12),$e(this),_i(this);break t}}if(this.P){v=!0;let Xe;for(;!this.J&&this.C<ft.length;)if(Xe=xu(this,ft),Xe==ua){Le==4&&(this.s=4,fe(14),v=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Xe==Oo){this.s=4,fe(15),bs(this.i,this.l,ft,"[Invalid Chunk]"),v=!1;break}else bs(this.i,this.l,Xe,null),br(this,Xe);if(Ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||ft.length!=0||this.h.h||(this.s=1,fe(16),v=!1),this.o=this.o&&v,!v)bs(this.i,this.l,ft,"[Invalid Chunked Response]"),$e(this),_i(this);else if(0<ft.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),Or(He),He.M=!0,fe(11))}}else bs(this.i,this.l,ft,null),br(this,ft);Le==4&&$e(this),this.o&&!this.J&&(Le==4?Uu(this.j,this):(this.o=!1,wr(this)))}else gf(this.g),v==400&&0<ft.indexOf("Unknown SID")?(this.s=3,fe(12)):(this.s=0,fe(13)),$e(this),_i(this)}}}catch{}finally{}};function Ru(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function xu(c,p){var v=c.C,C=p.indexOf(`
`,v);return C==-1?ua:(v=Number(p.substring(v,C)),isNaN(v)?Oo:(C+=1,C+v>p.length?ua:(p=p.slice(C,C+v),c.C=C+v,p)))}dn.prototype.cancel=function(){this.J=!0,$e(this)};function wr(c){c.S=Date.now()+c.I,Iu(c,c.I)}function Iu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ae(w(c.ba,c),p)}function Cs(c){c.B&&(m.clearTimeout(c.B),c.B=null)}dn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Au(this.i,this.A),this.L!=2&&(ws(),fe(17)),$e(this),this.s=2,_i(this)):Iu(this,this.S-c)};function _i(c){c.j.G==0||c.J||Uu(c.j,c)}function $e(c){Cs(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,vr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function br(c,p){try{var v=c.j;if(v.G!=0&&(v.g==c||Lo(v.h,c))){if(!c.K&&Lo(v.h,c)&&v.G==3){try{var C=v.Da.g.parse(p)}catch{C=null}if(Array.isArray(C)&&C.length==3){var z=C;if(z[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ta(v),va(v);else break t;Fo(v),fe(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ae(w(v.Za,v),6e3));if(1>=ha(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ji(v,11)}else if((c.K||v.g==c)&&Ta(v),!F(p))for(z=v.Da.g.parse(p),p=0;p<z.length;p++){let Gt=z[p];if(v.T=Gt[0],Gt=Gt[1],v.G==2)if(Gt[0]=="c"){v.K=Gt[1],v.ia=Gt[2];const He=Gt[3];He!=null&&(v.la=He,v.j.info("VER="+v.la));const Le=Gt[4];Le!=null&&(v.Aa=Le,v.j.info("SVER="+v.Aa));const Wi=Gt[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(C=1.5*Wi,v.L=C,v.j.info("backChannelRequestTimeoutMs_="+C)),C=v;const Xe=c.g;if(Xe){const Ci=Xe.g?Xe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ci){var J=C.h;J.g||Ci.indexOf("spdy")==-1&&Ci.indexOf("quic")==-1&&Ci.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(fa(J,J.h),J.h=null))}if(C.D){const Yo=Xe.g?Xe.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(C.ya=Yo,ee(C.I,C.D,Yo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),C=v;var ft=c;if(C.qa=zu(C,C.J?C.ia:null,C.W),ft.K){mn(C.h,ft);var Ht=ft,Oe=C.L;Oe&&(Ht.I=Oe),Ht.B&&(Cs(Ht),wr(Ht)),C.g=ft}else ju(C);0<v.i.length&&Ea(v)}else Gt[0]!="stop"&&Gt[0]!="close"||Ji(v,7);else v.G==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?Ji(v,7):Ho(v):Gt[0]!="noop"&&v.l&&v.l.ta(Gt),v.v=0)}}ws(4)}catch{}}var Du=class{constructor(c,p){this.g=c,this.map=p}};function Qi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ca(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ha(c){return c.h?1:c.g?c.g.size:0}function Lo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function fa(c,p){c.g?c.g.add(p):c.h=p}function mn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Qi.prototype.cancel=function(){if(this.i=ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ko(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.D);return p}return U(c.i)}function hf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],v=c.length,C=0;C<v;C++)p.push(c[C]);return p}p=[],v=0;for(C in c)p[v++]=c[C];return p}function da(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var v=0;v<c;v++)p.push(v);return p}p=[],v=0;for(const C in c)p[v++]=C;return p}}}function jo(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var v=da(c),C=hf(c),z=C.length,J=0;J<z;J++)p.call(void 0,C[J],v&&v[J],c)}var Sr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ff(c,p){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var C=c[v].indexOf("="),z=null;if(0<=C){var J=c[v].substring(0,C);z=c[v].substring(C+1)}else J=c[v];p(J,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Re(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Re){this.h=c.h,Cr(this,c.j),this.o=c.o,this.g=c.g,As(this,c.s),this.l=c.l;var p=c.i,v=new Ki;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Yi(this,v),this.m=c.m}else c&&(p=String(c).match(Sr))?(this.h=!1,Cr(this,p[1]||"",!0),this.o=zn(p[2]||""),this.g=zn(p[3]||"",!0),As(this,p[4]),this.l=zn(p[5]||"",!0),Yi(this,p[6]||"",!0),this.m=zn(p[7]||"")):(this.h=!1,this.i=new Ki(null,this.h))}Re.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Rr(p,Po,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Rr(p,Po,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Rr(v,v.charAt(0)=="/"?df:Uo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Rr(v,ma)),c.join("")};function xn(c){return new Re(c)}function Cr(c,p,v){c.j=v?zn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function As(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Yi(c,p,v){p instanceof Ki?(c.i=p,Vu(c.i,c.h)):(v||(p=Rr(p,mf)),c.i=new Ki(p,c.h))}function ee(c,p,v){c.i.set(p,v)}function Ar(c){return ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rr(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,Mu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Mu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Po=/[#\/\?@]/g,Uo=/[#\?:]/g,df=/[#\?]/g,mf=/[#\?@]/g,ma=/#/g;function Ki(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function qn(c){c.g||(c.g=new Map,c.h=0,c.i&&ff(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}e=Ki.prototype,e.add=function(c,p){qn(this),this.i=null,c=vi(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function $i(c,p){qn(c),p=vi(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Xi(c,p){return qn(c),p=vi(c,p),c.g.has(p)}e.forEach=function(c,p){qn(this),this.g.forEach(function(v,C){v.forEach(function(z){c.call(p,z,C,this)},this)},this)},e.na=function(){qn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let C=0;C<p.length;C++){const z=c[C];for(let J=0;J<z.length;J++)v.push(p[C])}return v},e.V=function(c){qn(this);let p=[];if(typeof c=="string")Xi(this,c)&&(p=p.concat(this.g.get(vi(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)p=p.concat(c[v])}return p},e.set=function(c,p){return qn(this),this.i=null,c=vi(this,c),Xi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},e.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Bo(c,p,v){$i(c,p),0<v.length&&(c.i=null,c.g.set(vi(c,p),U(v)),c.h+=v.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var C=p[v];const J=encodeURIComponent(String(C)),ft=this.V(C);for(C=0;C<ft.length;C++){var z=J;ft[C]!==""&&(z+="="+encodeURIComponent(String(ft[C]))),c.push(z)}}return this.i=c.join("&")};function vi(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Vu(c,p){p&&!c.j&&(qn(c),c.i=null,c.g.forEach(function(v,C){var z=C.toLowerCase();C!=z&&($i(this,C),Bo(this,z,v))},c)),c.j=p}function xr(c,p){const v=new Bn;if(m.Image){const C=new Image;C.onload=R(Hn,v,"TestLoadImage: loaded",!0,p,C),C.onerror=R(Hn,v,"TestLoadImage: error",!1,p,C),C.onabort=R(Hn,v,"TestLoadImage: abort",!1,p,C),C.ontimeout=R(Hn,v,"TestLoadImage: timeout",!1,p,C),m.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else p(!1)}function oi(c,p){const v=new Bn,C=new AbortController,z=setTimeout(()=>{C.abort(),Hn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:C.signal}).then(J=>{clearTimeout(z),J.ok?Hn(v,"TestPingServer: ok",!0,p):Hn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),Hn(v,"TestPingServer: error",!1,p)})}function Hn(c,p,v,C,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),C(v)}catch{}}function Ir(){this.g=new Er}function Ei(c,p,v){const C=v||"";try{jo(c,function(z,J){let ft=z;g(z)&&(ft=ri(z)),p.push(C+J+"="+encodeURIComponent(ft))})}catch(z){throw p.push(C+"type="+encodeURIComponent("_badmap")),z}}function Rs(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Rs,xo),Rs.prototype.g=function(){return new Zi(this.l,this.j)},Rs.prototype.i=function(c){return function(){return c}}({});function Zi(c,p){Jt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Zi,Jt),e=Zi.prototype,e.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,wi(this)},e.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},e.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function zo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}e.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ti(this):wi(this),this.readyState==3&&zo(this)}},e.Ra=function(c){this.g&&(this.response=this.responseText=c,Ti(this))},e.Qa=function(c){this.g&&(this.response=c,Ti(this))},e.ga=function(){this.g&&Ti(this)};function Ti(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wi(c)}e.setRequestHeader=function(c,p){this.u.append(c,p)},e.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function wi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qo(c){let p="";return Q(c,function(v,C){p+=C,p+=":",p+=v,p+=`\r
`}),p}function qe(c,p,v){t:{for(C in v){var C=!1;break t}C=!0}C||(v=qo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):ee(c,p,v))}function Xt(c){Jt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Xt,Jt);var ga=/^https?$/i,Dr=["POST","PUT"];e=Xt.prototype,e.Ha=function(c){this.J=c},e.ea=function(c,p,v,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pi.g(),this.v=this.o?Io(this.o):Io(pi),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(J){Nu(this,J);return}if(c=v||"",v=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var z in C)v.set(z,C[z]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const J of C.keys())v.set(J,C.get(J));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),z=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Dr,p,void 0))||C||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ft]of v)this.g.setRequestHeader(J,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mr(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){Nu(this,J)}};function Nu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,pa(c),bi(c)}function pa(c){c.A||(c.A=!0,qt(c,"complete"),qt(c,"error"))}e.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,qt(this,"complete"),qt(this,"abort"),bi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),Xt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ya(this):this.bb())},e.bb=function(){ya(this)};function ya(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Gn(c)!=4||c.Z()!=2)){if(c.u&&Gn(c)==4)ue(c.Ea,0,c);else if(qt(c,"readystatechange"),Gn(c)==4){c.h=!1;try{const ft=c.Z();t:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var C;if(C=ft===0){var z=String(c.D).match(Sr)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),C=!ga.test(z?z.toLowerCase():"")}v=C}if(v)qt(c,"complete"),qt(c,"success");else{c.m=6;try{var J=2<Gn(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",pa(c)}}finally{bi(c)}}}}function bi(c,p){if(c.g){Mr(c);const v=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||qt(c,"ready");try{v.onreadystatechange=C}catch{}}}function Mr(c){c.I&&(m.clearTimeout(c.I),c.I=null)}e.isActive=function(){return!!this.g};function Gn(c){return c.g?c.g.readyState:0}e.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),oa(p)}};function Ou(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gf(c){const p={};c=(c.g&&2<=Gn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(F(c[C]))continue;var v=L(c[C]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=p[z]||[];p[z]=J,J.push(v)}D(p,function(C){return C.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function _a(c){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,c),this.cb=Vr("retryDelaySeedMs",1e4,c),this.Wa=Vr("forwardChannelMaxRetries",2,c),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Qi(c&&c.concurrentRequestLimit),this.Da=new Ir,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=_a.prototype,e.la=8,e.G=1,e.connect=function(c,p,v,C){fe(0),this.W=c,this.H=p||{},v&&C!==void 0&&(this.H.OSID=v,this.H.OAID=C),this.F=this.X,this.I=zu(this,null,this.W),Ea(this)};function Ho(c){if(Lu(c),c.G==3){var p=c.U++,v=xn(c.I);if(ee(v,"SID",c.K),ee(v,"RID",p),ee(v,"TYPE","terminate"),Nr(c,v),p=new dn(c,c.j,p),p.L=2,p.v=Ar(xn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=p.v,v=!0),v||(p.g=qu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),wr(p)}Bu(c)}function va(c){c.g&&(Or(c),c.g.cancel(),c.g=null)}function Lu(c){va(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ta(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ea(c){if(!ca(c.h)&&!c.s){c.s=!0;var p=c.Ga;ut||O(),mt||(ut(),mt=!0),At.add(p,c),c.B=0}}function pf(c,p){return ha(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ae(w(c.Ga,c,p),Qo(c,c.B)),c.B++,!0)}e.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new dn(this,this.j,c);let J=this.o;if(this.S&&(J?(J=A(J),k(J,this.S)):J=this.S),this.m!==null||this.O||(z.H=J,J=null),this.P)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var C=this.i[v];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(p+=C,4096<p){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=ku(this,z,p),v=xn(this.I),ee(v,"RID",c),ee(v,"CVER",22),this.D&&ee(v,"X-HTTP-Session-Id",this.D),Nr(this,v),J&&(this.O?p="headers="+encodeURIComponent(String(qo(J)))+"&"+p:this.m&&qe(v,this.m,J)),fa(this.h,z),this.Ua&&ee(v,"TYPE","init"),this.P?(ee(v,"$req",p),ee(v,"SID","null"),z.T=!0,ai(z,v,null)):ai(z,v,p),this.G=2}}else this.G==3&&(c?Go(this,c):this.i.length==0||ca(this.h)||Go(this))};function Go(c,p){var v;p?v=p.l:v=c.U++;const C=xn(c.I);ee(C,"SID",c.K),ee(C,"RID",v),ee(C,"AID",c.T),Nr(c,C),c.m&&c.o&&qe(C,c.m,c.o),v=new dn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),p&&(c.i=p.D.concat(c.i)),p=ku(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),fa(c.h,v),ai(v,C,p)}function Nr(c,p){c.H&&Q(c.H,function(v,C){ee(p,C,v)}),c.l&&jo({},function(v,C){ee(p,C,v)})}function ku(c,p,v){v=Math.min(c.i.length,v);var C=c.l?w(c.l.Na,c.l,c):null;t:{var z=c.i;let J=-1;for(;;){const ft=["count="+v];J==-1?0<v?(J=z[0].g,ft.push("ofs="+J)):J=0:ft.push("ofs="+J);let Ht=!0;for(let Oe=0;Oe<v;Oe++){let Gt=z[Oe].g;const He=z[Oe].map;if(Gt-=J,0>Gt)J=Math.max(0,z[Oe].g-100),Ht=!1;else try{Ei(He,ft,"req"+Gt+"_")}catch{C&&C(He)}}if(Ht){C=ft.join("&");break t}}}return c=c.i.splice(0,v),p.D=c,C}function ju(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;ut||O(),mt||(ut(),mt=!0),At.add(p,c),c.v=0}}function Fo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ae(w(c.Fa,c),Qo(c,c.v)),c.v++,!0)}e.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ae(w(this.ab,this),c)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fe(10),va(this),Pu(this))};function Or(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Pu(c){c.g=new dn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=xn(c.qa);ee(p,"RID","rpc"),ee(p,"SID",c.K),ee(p,"AID",c.T),ee(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&ee(p,"TO",c.ja),ee(p,"TYPE","xmlhttp"),Nr(c,p),c.m&&c.o&&qe(p,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ar(xn(p)),v.m=null,v.P=!0,Fi(v,c)}e.Za=function(){this.C!=null&&(this.C=null,va(this),Fo(this),fe(19))};function Ta(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Uu(c,p){var v=null;if(c.g==p){Ta(c),Or(c),c.g=null;var C=2}else if(Lo(c.h,p))v=p.D,mn(c.h,p),C=1;else return;if(c.G!=0){if(p.o)if(C==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var z=c.B;C=Ts(),qt(C,new Ne(C,v)),Ea(c)}else ju(c);else if(z=p.s,z==3||z==0&&0<p.X||!(C==1&&pf(c,p)||C==2&&Fo(c)))switch(v&&0<v.length&&(p=c.h,p.i=p.i.concat(v)),z){case 1:Ji(c,5);break;case 4:Ji(c,10);break;case 3:Ji(c,6);break;default:Ji(c,2)}}}function Qo(c,p){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*p}function Ji(c,p){if(c.j.info("Error code "+p),p==2){var v=w(c.fb,c),C=c.Xa;const z=!C;C=new Re(C||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Cr(C,"https"),Ar(C),z?xr(C.toString(),v):oi(C.toString(),v)}else fe(2);c.G=0,c.l&&c.l.sa(p),Bu(c),Lu(c)}e.fb=function(c){c?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Bu(c){if(c.G=0,c.ka=[],c.l){const p=ko(c.h);(p.length!=0||c.i.length!=0)&&(N(c.ka,p),N(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function zu(c,p,v){var C=v instanceof Re?xn(v):new Re(v);if(C.g!="")p&&(C.g=p+"."+C.g),As(C,C.s);else{var z=m.location;C=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;var J=new Re(null);C&&Cr(J,C),p&&(J.g=p),z&&As(J,z),v&&(J.l=v),C=J}return v=c.D,p=c.ya,v&&p&&ee(C,v,p),ee(C,"VER",c.la),Nr(c,C),C}function qu(c,p,v){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Xt(new Rs({eb:v})):new Xt(c.pa),p.Ha(c.J),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}e=Hu.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function wa(){}wa.prototype.g=function(c,p){return new gn(c,p)};function gn(c,p){Jt.call(this),this.g=new _a(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!F(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!F(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Si(this)}M(gn,Jt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Ho(this.g)},gn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=ri(c),c=v);p.i.push(new Du(p.Ya++,c)),p.G==3&&Ea(p)},gn.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,gn.aa.N.call(this)};function Gu(c){Hi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}M(Gu,Hi);function Fu(){Mo.call(this),this.status=1}M(Fu,Mo);function Si(c){this.g=c}M(Si,Hu),Si.prototype.ua=function(){qt(this.g,"a")},Si.prototype.ta=function(c){qt(this.g,new Gu(c))},Si.prototype.sa=function(c){qt(this.g,new Fu)},Si.prototype.ra=function(){qt(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Bv=function(){return new wa},Uv=function(){return Ts()},Pv=gi,tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,ah=Ss,Gi.COMPLETE="complete",jv=Gi,Do.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,Bl=Do,Xt.prototype.listenOnce=Xt.prototype.L,Xt.prototype.getLastError=Xt.prototype.Ka,Xt.prototype.getLastErrorCode=Xt.prototype.Ba,Xt.prototype.getStatus=Xt.prototype.Z,Xt.prototype.getResponseJson=Xt.prototype.Oa,Xt.prototype.getResponseText=Xt.prototype.oa,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Ha,kv=Xt}).apply(typeof Yc<"u"?Yc:typeof self<"u"?self:typeof window<"u"?window:{});const Iy="@firebase/firestore",Dy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Iv("@firebase/firestore");function eo(){return ea.logLevel}function pt(e,...t){if(ea.logLevel<=Yt.DEBUG){const i=t.map(km);ea.debug(`Firestore (${bo}): ${e}`,...i)}}function vs(e,...t){if(ea.logLevel<=Yt.ERROR){const i=t.map(km);ea.error(`Firestore (${bo}): ${e}`,...i)}}function fo(e,...t){if(ea.logLevel<=Yt.WARN){const i=t.map(km);ea.warn(`Firestore (${bo}): ${e}`,...i)}}function km(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,zv(e,r,i)}function zv(e,t,i){let r=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw vs(r),new Error(r)}function Zt(e,t,i,r){let o="Unexpected state";typeof i=="string"?o=i:r=i,e||zv(t,o,r)}function It(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends wo{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class z8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(un.UNAUTHENTICATED))}shutdown(){}}class q8{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class H8{constructor(t){this.t=t,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Zt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ar,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;t.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ar)}},0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string",31837,{l:r}),new qv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new un(t)}}class G8{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F8{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new G8(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class My{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q8{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,S8(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Zt(this.o===void 0,3512);const r=u=>{u.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,pt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new My(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Zt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new My(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<e;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Y8(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<i&&(r+=t.charAt(o[u]%62))}return r}}function kt(e,t){return e<t?-1:e>t?1:0}function em(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=e.codePointAt(i),o=t.codePointAt(i);if(r!==o){if(r<128&&o<128)return kt(r,o);{const u=Hv(),f=K8(u.encode(Vy(e,i)),u.encode(Vy(t,i)));return f!==0?f:kt(r,o)}}i+=r>65535?2:1}return kt(e.length,t.length)}function Vy(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function K8(e,t){for(let i=0;i<e.length&&i<t.length;++i)if(e[i]!==t[i])return kt(e[i],t[i]);return kt(e.length,t.length)}function mo(e,t,i){return e.length===t.length&&e.every((r,o)=>i(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=-62135596800,Oy=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(t){return Ue.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*Oy);return new Ue(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new Et(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Et(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Ny)throw new Et(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Oy}_compareTo(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Ny;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{static fromTimestamp(t){return new Rt(t)}static min(){return new Rt(new Ue(0,0))}static max(){return new Rt(new Ue(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="__name__";class Oi{constructor(t,i,r){i===void 0?i=0:i>t.length&&St(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&St(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Oi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let o=0;o<r;o++){const u=Oi.compareSegments(t.get(o),i.get(o));if(u!==0)return u}return kt(t.length,i.length)}static compareSegments(t,i){const r=Oi.isNumericId(t),o=Oi.isNumericId(i);return r&&!o?-1:!r&&o?1:r&&o?Oi.extractNumericId(t).compare(Oi.extractNumericId(i)):em(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return rr.fromString(t.substring(4,t.length-2))}}class me extends Oi{construct(t,i,r){return new me(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(o=>o.length>0))}return new me(i)}static emptyPath(){return new me([])}}const $8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Oi{construct(t,i,r){return new en(t,i,r)}static isValidIdentifier(t){return $8.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ly}static keyField(){return new en([Ly])}static fromServerFormat(t){const i=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Et(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new Et(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Et(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new Et(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new en(i)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.path=t}static fromPath(t){return new Tt(me.fromString(t))}static fromName(t){return new Tt(me.fromString(t).popFirst(5))}static empty(){return new Tt(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&me.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return me.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Tt(new me(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function X8(e,t){const i=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=Rt.fromTimestamp(r===1e9?new Ue(i+1,0):new Ue(i,r));return new lr(o,Tt.empty(),t)}function Z8(e){return new lr(e.readTime,e.key,uu)}class lr{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new lr(Rt.min(),Tt.empty(),uu)}static max(){return new lr(Rt.max(),Tt.empty(),uu)}}function J8(e,t){let i=e.readTime.compareTo(t.readTime);return i!==0?i:(i=Tt.comparator(e.documentKey,t.documentKey),i!==0?i:kt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(e){if(e.code!==lt.FAILED_PRECONDITION||e.message!==W8)throw e;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&St(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new ot((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,o)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof ot?i:ot.resolve(i)}catch(i){return ot.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):ot.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):ot.reject(i)}static resolve(t){return new ot((i,r)=>{i(t)})}static reject(t){return new ot((i,r)=>{r(t)})}static waitFor(t){return new ot((i,r)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&i()},y=>r(y))}),f=!0,u===o&&i()})}static or(t){let i=ot.resolve(!1);for(const r of t)i=i.next(o=>o?ot.resolve(o):r());return i}static forEach(t,i){const r=[];return t.forEach((o,u)=>{r.push(i.call(this,o,u))}),this.waitFor(r)}static mapArray(t,i){return new ot((r,o)=>{const u=t.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const g=y;i(t[g]).next(_=>{f[g]=_,++m,m===u&&r(f)},_=>o(_))}})}static doWhile(t,i){return new ot((r,o)=>{const u=()=>{t()===!0?i().next(()=>{u()},o):r()};u()})}}function eT(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Co(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>i.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Hh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm=-1;function Gh(e){return e==null}function Th(e){return e===0&&1/e==-1/0}function nT(e){return typeof e=="number"&&Number.isInteger(e)&&!Th(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="";function iT(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t=ky(t)),t=sT(e.get(i),t);return ky(t)}function sT(e,t){let i=t;const r=e.length;for(let o=0;o<r;o++){const u=e.charAt(o);switch(u){case"\0":i+="";break;case Fv:i+="";break;default:i+=u}}return i}function ky(e){return e+Fv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(e){let t=0;for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function mr(e,t){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function Qv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,i){this.comparator=t,this.root=i||tn.EMPTY}insert(t,i){return new ye(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(t){return new ye(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return i+r.left.size;o<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Kc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Kc(this.root,t,this.comparator,!0)}}class Kc{constructor(t,i,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class tn{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??tn.RED,this.left=o??tn.EMPTY,this.right=u??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,o,u){return new tn(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,r),null):u===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,o=this;if(i(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(t,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw St(43730,{key:this.key,value:this.value});if(this.right.isRed())throw St(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw St(27949);return t+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw St(57766)}get value(){throw St(16141)}get color(){throw St(16727)}get left(){throw St(29726)}get right(){throw St(36894)}copy(t,i,r,o,u){return this}insert(t,i,r){return new tn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.comparator=t,this.data=new ye(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;i(o.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(t){return new Py(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Be)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Be(this.comparator);return i.data=t,i}}class Py{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.fields=t,t.sort(en.comparator)}static empty(){return new Pn([])}unionWith(t){let i=new Be(en.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Pn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return mo(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Yv("Invalid base64 string: "+u):u}}(t);return new nn(i)}static fromUint8Array(t){const i=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new nn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const rT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(e){if(Zt(!!e,39018),typeof e=="string"){let t=0;const i=rT.exec(e);if(Zt(!!i,46558,{timestamp:e}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Se(e.seconds),nanos:Se(e.nanos)}}function Se(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function cr(e){return typeof e=="string"?nn.fromBase64String(e):nn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="server_timestamp",$v="__type__",Xv="__previous_value__",Zv="__local_write_time__";function Pm(e){var t,i;return((i=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[$v])===null||i===void 0?void 0:i.stringValue)===Kv}function Fh(e){const t=e.mapValue.fields[Xv];return Pm(t)?Fh(t):t}function cu(e){const t=ur(e.mapValue.fields[Zv].timestampValue);return new Ue(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(t,i,r,o,u,f,m,y,g,_){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=_}}const wh="(default)";class hu{constructor(t,i){this.projectId=t,this.database=i||wh}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===wh}isEqual(t){return t instanceof hu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="__type__",oT="__max__",$c={mapValue:{}},Wv="__vector__",bh="value";function hr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pm(e)?4:uT(e)?9007199254740991:lT(e)?10:11:St(28295,{value:e})}function Ui(e,t){if(e===t)return!0;const i=hr(e);if(i!==hr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cu(e).isEqual(cu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ur(o.timestampValue),m=ur(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(o,u){return cr(o.bytesValue).isEqual(cr(u.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(o,u){return Se(o.geoPointValue.latitude)===Se(u.geoPointValue.latitude)&&Se(o.geoPointValue.longitude)===Se(u.geoPointValue.longitude)}(e,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Se(o.integerValue)===Se(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Se(o.doubleValue),m=Se(u.doubleValue);return f===m?Th(f)===Th(m):isNaN(f)&&isNaN(m)}return!1}(e,t);case 9:return mo(e.arrayValue.values||[],t.arrayValue.values||[],Ui);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(jy(f)!==jy(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Ui(f[y],m[y])))return!1;return!0}(e,t);default:return St(52216,{left:e})}}function fu(e,t){return(e.values||[]).find(i=>Ui(i,t))!==void 0}function go(e,t){if(e===t)return 0;const i=hr(e),r=hr(t);if(i!==r)return kt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return kt(e.booleanValue,t.booleanValue);case 2:return function(u,f){const m=Se(u.integerValue||u.doubleValue),y=Se(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(e,t);case 3:return Uy(e.timestampValue,t.timestampValue);case 4:return Uy(cu(e),cu(t));case 5:return em(e.stringValue,t.stringValue);case 6:return function(u,f){const m=cr(u),y=cr(f);return m.compareTo(y)}(e.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),y=f.split("/");for(let g=0;g<m.length&&g<y.length;g++){const _=kt(m[g],y[g]);if(_!==0)return _}return kt(m.length,y.length)}(e.referenceValue,t.referenceValue);case 8:return function(u,f){const m=kt(Se(u.latitude),Se(f.latitude));return m!==0?m:kt(Se(u.longitude),Se(f.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return By(e.arrayValue,t.arrayValue);case 10:return function(u,f){var m,y,g,_;const T=u.fields||{},w=f.fields||{},R=(m=T[bh])===null||m===void 0?void 0:m.arrayValue,M=(y=w[bh])===null||y===void 0?void 0:y.arrayValue,U=kt(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((_=M==null?void 0:M.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:By(R,M)}(e.mapValue,t.mapValue);case 11:return function(u,f){if(u===$c.mapValue&&f===$c.mapValue)return 0;if(u===$c.mapValue)return 1;if(f===$c.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),g=f.fields||{},_=Object.keys(g);y.sort(),_.sort();for(let T=0;T<y.length&&T<_.length;++T){const w=em(y[T],_[T]);if(w!==0)return w;const R=go(m[y[T]],g[_[T]]);if(R!==0)return R}return kt(y.length,_.length)}(e.mapValue,t.mapValue);default:throw St(23264,{Pe:i})}}function Uy(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return kt(e,t);const i=ur(e),r=ur(t),o=kt(i.seconds,r.seconds);return o!==0?o:kt(i.nanos,r.nanos)}function By(e,t){const i=e.values||[],r=t.values||[];for(let o=0;o<i.length&&o<r.length;++o){const u=go(i[o],r[o]);if(u)return u}return kt(i.length,r.length)}function po(e){return nm(e)}function nm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(i){const r=ur(i);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(i){return cr(i).toBase64()}(e.bytesValue):"referenceValue"in e?function(i){return Tt.fromName(i).toString()}(e.referenceValue):"geoPointValue"in e?function(i){return`geo(${i.latitude},${i.longitude})`}(e.geoPointValue):"arrayValue"in e?function(i){let r="[",o=!0;for(const u of i.values||[])o?o=!1:r+=",",r+=nm(u);return r+"]"}(e.arrayValue):"mapValue"in e?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${nm(i.fields[f])}`;return o+"}"}(e.mapValue):St(61005,{value:e})}function oh(e){switch(hr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fh(e);return t?16+oh(t):16;case 5:return 2*e.stringValue.length;case 6:return cr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+oh(u),0)}(e.arrayValue);case 10:case 11:return function(r){let o=0;return mr(r.fields,(u,f)=>{o+=u.length+oh(f)}),o}(e.mapValue);default:throw St(13486,{value:e})}}function im(e){return!!e&&"integerValue"in e}function Um(e){return!!e&&"arrayValue"in e}function zy(e){return!!e&&"nullValue"in e}function qy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lh(e){return!!e&&"mapValue"in e}function lT(e){var t,i;return((i=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Jv])===null||i===void 0?void 0:i.stringValue)===Wv}function $l(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return mr(e.mapValue.fields,(i,r)=>t.mapValue.fields[i]=$l(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=$l(e.arrayValue.values[i]);return t}return Object.assign({},e)}function uT(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===oT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.value=t}static empty(){return new Cn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!lh(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=$l(i)}setAll(t){let i=en.emptyPath(),r={},o=[];t.forEach((f,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,r,o),r={},o=[],i=m.popLast()}f?r[m.lastSegment()]=$l(f):o.push(m.lastSegment())});const u=this.getFieldsMap(i);this.applyChanges(u,r,o)}delete(t){const i=this.field(t.popLast());lh(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ui(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=i.mapValue.fields[t.get(r)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=o),i=o}return i.mapValue.fields}applyChanges(t,i,r){mr(i,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new Cn($l(this.value))}}function t3(e){const t=[];return mr(e.fields,(i,r)=>{const o=new en([i]);if(lh(r)){const u=t3(r.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new Pn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,i,r,o,u,f,m){this.key=t,this.documentType=i,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,Rt.min(),Rt.min(),Rt.min(),Cn.empty(),0)}static newFoundDocument(t,i,r,o){return new cn(t,1,i,Rt.min(),r,o,0)}static newNoDocument(t,i){return new cn(t,2,i,Rt.min(),Rt.min(),Cn.empty(),0)}static newUnknownDocument(t,i){return new cn(t,3,i,Rt.min(),Rt.min(),Cn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,i){this.position=t,this.inclusive=i}}function Hy(e,t,i){let r=0;for(let o=0;o<e.position.length;o++){const u=t[o],f=e.position[o];if(u.field.isKeyField()?r=Tt.comparator(Tt.fromName(f.referenceValue),i.key):r=go(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gy(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!Ui(e.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(t,i="asc"){this.field=t,this.dir=i}}function cT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{}class Pe extends e3{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new fT(t,i,r):i==="array-contains"?new gT(t,r):i==="in"?new pT(t,r):i==="not-in"?new yT(t,r):i==="array-contains-any"?new _T(t,r):new Pe(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new dT(t,r):new mT(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(go(i,this.value)):i!==null&&hr(this.value)===hr(i)&&this.matchesComparison(go(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return St(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bi extends e3{constructor(t,i){super(),this.filters=t,this.op=i,this.Te=null}static create(t,i){return new Bi(t,i)}matches(t){return n3(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function n3(e){return e.op==="and"}function i3(e){return hT(e)&&n3(e)}function hT(e){for(const t of e.filters)if(t instanceof Bi)return!1;return!0}function sm(e){if(e instanceof Pe)return e.field.canonicalString()+e.op.toString()+po(e.value);if(i3(e))return e.filters.map(t=>sm(t)).join(",");{const t=e.filters.map(i=>sm(i)).join(",");return`${e.op}(${t})`}}function s3(e,t){return e instanceof Pe?function(r,o){return o instanceof Pe&&r.op===o.op&&r.field.isEqual(o.field)&&Ui(r.value,o.value)}(e,t):e instanceof Bi?function(r,o){return o instanceof Bi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&s3(f,o.filters[m]),!0):!1}(e,t):void St(19439)}function r3(e){return e instanceof Pe?function(i){return`${i.field.canonicalString()} ${i.op} ${po(i.value)}`}(e):e instanceof Bi?function(i){return i.op.toString()+" {"+i.getFilters().map(r3).join(" ,")+"}"}(e):"Filter"}class fT extends Pe{constructor(t,i,r){super(t,i,r),this.key=Tt.fromName(r.referenceValue)}matches(t){const i=Tt.comparator(t.key,this.key);return this.matchesComparison(i)}}class dT extends Pe{constructor(t,i){super(t,"in",i),this.keys=a3("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class mT extends Pe{constructor(t,i){super(t,"not-in",i),this.keys=a3("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function a3(e,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>Tt.fromName(r.referenceValue))}class gT extends Pe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Um(i)&&fu(i.arrayValue,this.value)}}class pT extends Pe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&fu(this.value.arrayValue,i)}}class yT extends Pe{constructor(t,i){super(t,"not-in",i)}matches(t){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!fu(this.value.arrayValue,i)}}class _T extends Pe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Um(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>fu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,i=null,r=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function Fy(e,t=null,i=[],r=[],o=null,u=null,f=null){return new vT(e,t,i,r,o,u,f)}function Bm(e){const t=It(e);if(t.Ie===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>sm(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Gh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>po(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>po(r)).join(",")),t.Ie=i}return t.Ie}function zm(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!cT(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!s3(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gy(e.startAt,t.startAt)&&Gy(e.endAt,t.endAt)}function rm(e){return Tt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,i=null,r=[],o=[],u=null,f="F",m=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ET(e,t,i,r,o,u,f,m){return new Qh(e,t,i,r,o,u,f,m)}function Yh(e){return new Qh(e)}function Qy(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function TT(e){return e.collectionGroup!==null}function Xl(e){const t=It(e);if(t.Ee===null){t.Ee=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ee.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Be(en.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(t).forEach(u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ee.push(new Ch(u,r))}),i.has(en.keyField().canonicalString())||t.Ee.push(new Ch(en.keyField(),r))}return t.Ee}function Li(e){const t=It(e);return t.de||(t.de=wT(t,Xl(e))),t.de}function wT(e,t){if(e.limitType==="F")return Fy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Ch(o.field,u)});const i=e.endAt?new Sh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Sh(e.startAt.position,e.startAt.inclusive):null;return Fy(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}}function am(e,t,i){return new Qh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function Kh(e,t){return zm(Li(e),Li(t))&&e.limitType===t.limitType}function o3(e){return`${Bm(Li(e))}|lt:${e.limitType}`}function no(e){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(o=>r3(o)).join(", ")}]`),Gh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(o=>po(o)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(o=>po(o)).join(",")),`Target(${r})`}(Li(e))}; limitType=${e.limitType})`}function $h(e,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Tt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(e,t)&&function(r,o){for(const u of Xl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(e,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(e,t)&&function(r,o){return!(r.startAt&&!function(f,m,y){const g=Hy(f,m,y);return f.inclusive?g<=0:g<0}(r.startAt,Xl(r),o)||r.endAt&&!function(f,m,y){const g=Hy(f,m,y);return f.inclusive?g>=0:g>0}(r.endAt,Xl(r),o))}(e,t)}function bT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function l3(e){return(t,i)=>{let r=!1;for(const o of Xl(e)){const u=ST(o,t,i);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function ST(e,t,i){const r=e.field.isKeyField()?Tt.comparator(t.key,i.key):function(u,f,m){const y=f.data.field(u),g=m.data.field(u);return y!==null&&g!==null?go(y,g):St(42886)}(e.field,t,i);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return St(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,i]);o.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[i]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){mr(this.inner,(i,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return Qv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new ye(Tt.comparator);function Es(){return CT}const u3=new ye(Tt.comparator);function zl(...e){let t=u3;for(const i of e)t=t.insert(i.key,i);return t}function c3(e){let t=u3;return e.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function Wr(){return Zl()}function h3(){return Zl()}function Zl(){return new ra(e=>e.toString(),(e,t)=>e.isEqual(t))}const AT=new ye(Tt.comparator),RT=new Be(Tt.comparator);function Bt(...e){let t=RT;for(const i of e)t=t.add(i);return t}const xT=new Be(kt);function IT(){return xT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(t)?"-0":t}}function f3(e){return{integerValue:""+e}}function DT(e,t){return nT(t)?f3(t):qm(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this._=void 0}}function MT(e,t,i){return e instanceof Ah?function(o,u){const f={fields:{[$v]:{stringValue:Kv},[Zv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Pm(u)&&(u=Fh(u)),u&&(f.fields[Xv]=u),{mapValue:f}}(i,t):e instanceof du?m3(e,t):e instanceof mu?g3(e,t):function(o,u){const f=d3(o,u),m=Yy(f)+Yy(o.Re);return im(f)&&im(o.Re)?f3(m):qm(o.serializer,m)}(e,t)}function VT(e,t,i){return e instanceof du?m3(e,t):e instanceof mu?g3(e,t):i}function d3(e,t){return e instanceof Rh?function(r){return im(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class Ah extends Xh{}class du extends Xh{constructor(t){super(),this.elements=t}}function m3(e,t){const i=p3(t);for(const r of e.elements)i.some(o=>Ui(o,r))||i.push(r);return{arrayValue:{values:i}}}class mu extends Xh{constructor(t){super(),this.elements=t}}function g3(e,t){let i=p3(t);for(const r of e.elements)i=i.filter(o=>!Ui(o,r));return{arrayValue:{values:i}}}class Rh extends Xh{constructor(t,i){super(),this.serializer=t,this.Re=i}}function Yy(e){return Se(e.integerValue||e.doubleValue)}function p3(e){return Um(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function NT(e,t){return e.field.isEqual(t.field)&&function(r,o){return r instanceof du&&o instanceof du||r instanceof mu&&o instanceof mu?mo(r.elements,o.elements,Ui):r instanceof Rh&&o instanceof Rh?Ui(r.Re,o.Re):r instanceof Ah&&o instanceof Ah}(e.transform,t.transform)}class OT{constructor(t,i){this.version=t,this.transformResults=i}}class ki{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new ki}static exists(t){return new ki(void 0,t)}static updateTime(t){return new ki(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function uh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Zh{}function y3(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new v3(e.key,ki.none()):new Tu(e.key,e.data,ki.none());{const i=e.data,r=Cn.empty();let o=new Be(en.comparator);for(let u of t.fields)if(!o.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new gr(e.key,r,new Pn(o.toArray()),ki.none())}}function LT(e,t,i){e instanceof Tu?function(o,u,f){const m=o.value.clone(),y=$y(o.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(e,t,i):e instanceof gr?function(o,u,f){if(!uh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=$y(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(_3(o)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(e,t,i):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,i)}function Jl(e,t,i,r){return e instanceof Tu?function(u,f,m,y){if(!uh(u.precondition,f))return m;const g=u.value.clone(),_=Xy(u.fieldTransforms,y,f);return g.setAll(_),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(e,t,i,r):e instanceof gr?function(u,f,m,y){if(!uh(u.precondition,f))return m;const g=Xy(u.fieldTransforms,y,f),_=f.data;return _.setAll(_3(u)),_.setAll(g),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(T=>T.field))}(e,t,i,r):function(u,f,m){return uh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(e,t,i)}function kT(e,t){let i=null;for(const r of e.fieldTransforms){const o=t.data.field(r.field),u=d3(r.transform,o||null);u!=null&&(i===null&&(i=Cn.empty()),i.set(r.field,u))}return i||null}function Ky(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&mo(r,o,(u,f)=>NT(u,f))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Tu extends Zh{constructor(t,i,r,o=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gr extends Zh{constructor(t,i,r,o,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function _3(e){const t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=e.data.field(i);t.set(i,r)}}),t}function $y(e,t,i){const r=new Map;Zt(e.length===i.length,32656,{Ve:i.length,me:e.length});for(let o=0;o<i.length;o++){const u=e[o],f=u.transform,m=t.data.field(u.field);r.set(u.field,VT(f,m,i[o]))}return r}function Xy(e,t,i){const r=new Map;for(const o of e){const u=o.transform,f=i.data.field(o.field);r.set(o.field,MT(u,f,t))}return r}class v3 extends Zh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jT extends Zh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t,i,r,o){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&LT(u,t,r[o])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Jl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Jl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=h3();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(o.key)?null:m;const y=y3(f,m);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Bt())}isEqual(t){return this.batchId===t.batchId&&mo(this.mutations,t.mutations,(i,r)=>Ky(i,r))&&mo(this.baseMutations,t.baseMutations,(i,r)=>Ky(i,r))}}class Hm{constructor(t,i,r,o){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=o}static from(t,i,r){Zt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let o=function(){return AT}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Hm(t,i,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,Qt;function zT(e){switch(e){case lt.OK:return St(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return St(15467,{code:e})}}function E3(e){if(e===void 0)return vs("GRPC error has no .code"),lt.UNKNOWN;switch(e){case De.OK:return lt.OK;case De.CANCELLED:return lt.CANCELLED;case De.UNKNOWN:return lt.UNKNOWN;case De.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case De.INTERNAL:return lt.INTERNAL;case De.UNAVAILABLE:return lt.UNAVAILABLE;case De.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case De.NOT_FOUND:return lt.NOT_FOUND;case De.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case De.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case De.ABORTED:return lt.ABORTED;case De.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case De.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case De.DATA_LOSS:return lt.DATA_LOSS;default:return St(39323,{code:e})}}(Qt=De||(De={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=new rr([4294967295,4294967295],0);function Zy(e){const t=Hv().encode(e),i=new Lv;return i.update(t),new Uint8Array(i.digest())}function Jy(e){const t=new DataView(e.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new rr([i,r],0),new rr([o,u],0)]}class Gm{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new ql(`Invalid padding: ${i}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new ql(`Invalid padding when bitmap length is 0: ${i}`);this.pe=8*t.length-i,this.ye=rr.fromNumber(this.pe)}we(t,i,r){let o=t.add(i.multiply(rr.fromNumber(r)));return o.compare(qT)===1&&(o=new rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const i=Zy(t),[r,o]=Jy(i);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);if(!this.be(f))return!1}return!0}static create(t,i,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Gm(u,o,i);return r.forEach(m=>f.insert(m)),f}insert(t){if(this.pe===0)return;const i=Zy(t),[r,o]=Jy(i);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(t,i,r,o,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const o=new Map;return o.set(t,wu.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Jh(Rt.min(),o,new ye(kt),Es(),Bt())}}class wu{constructor(t,i,r,o,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new wu(r,i,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t,i,r,o){this.De=t,this.removedTargetIds=i,this.key=r,this.ve=o}}class T3{constructor(t,i){this.targetId=t,this.Ce=i}}class w3{constructor(t,i,r=nn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=o}}class Wy{constructor(){this.Fe=0,this.Me=t_(),this.xe=nn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Bt(),i=Bt(),r=Bt();return this.Me.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:i=i.add(o);break;case 1:r=r.add(o);break;default:St(38017,{changeType:u})}}),new wu(this.xe,this.Oe,t,i,r)}Qe(){this.Ne=!1,this.Me=t_()}$e(t,i){this.Ne=!0,this.Me=this.Me.insert(t,i)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Zt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class HT{constructor(t){this.ze=t,this.je=new Map,this.He=Es(),this.Je=Xc(),this.Ye=Xc(),this.Ze=new ye(kt)}Xe(t){for(const i of t.De)t.ve&&t.ve.isFoundDocument()?this.et(i,t.ve):this.tt(i,t.key,t.ve);for(const i of t.removedTargetIds)this.tt(i,t.key,t.ve)}nt(t){this.forEachTarget(t,i=>{const r=this.rt(i);switch(t.state){case 0:this.it(i)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(i);break;case 3:this.it(i)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(i)&&(this.st(i),r.ke(t.resumeToken));break;default:St(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.je.forEach((r,o)=>{this.it(o)&&i(o)})}ot(t){const i=t.targetId,r=t.Ce.count,o=this._t(i);if(o){const u=o.target;if(rm(u))if(r===0){const f=new Tt(u.path);this.tt(i,f,cn.newNoDocument(f,Rt.min()))}else Zt(r===1,20013,{expectedCount:r});else{const f=this.ut(i);if(f!==r){const m=this.ct(t),y=m?this.lt(m,t,f):1;if(y!==0){this.st(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,g)}}}}}ct(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=i;let f,m;try{f=cr(r).toUint8Array()}catch(y){if(y instanceof Yv)return fo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Gm(f,o,u)}catch(y){return fo(y instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(t,i,r){return i.Ce.count===r-this.Tt(t,i.targetId)?0:2}Tt(t,i){const r=this.ze.getRemoteKeysForTarget(i);let o=0;return r.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.tt(i,u,null),o++)}),o}It(t){const i=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&rm(m.target)){const y=new Tt(m.target.path);this.Et(y).has(f)||this.dt(f,y)||this.tt(f,y,cn.newNoDocument(y,t))}u.Le&&(i.set(f,u.qe()),u.Qe())}});let r=Bt();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(y=>{const g=this._t(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(t));const o=new Jh(t,i,this.Ze,this.He,r);return this.He=Es(),this.Je=Xc(),this.Ye=Xc(),this.Ze=new ye(kt),o}et(t,i){if(!this.it(t))return;const r=this.dt(t,i.key)?2:0;this.rt(t).$e(i.key,r),this.He=this.He.insert(i.key,i),this.Je=this.Je.insert(i.key,this.Et(i.key).add(t)),this.Ye=this.Ye.insert(i.key,this.At(i.key).add(t))}tt(t,i,r){if(!this.it(t))return;const o=this.rt(t);this.dt(t,i)?o.$e(i,1):o.Ue(i),this.Ye=this.Ye.insert(i,this.At(i).delete(t)),this.Ye=this.Ye.insert(i,this.At(i).add(t)),r&&(this.He=this.He.insert(i,r))}removeTarget(t){this.je.delete(t)}ut(t){const i=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let i=this.je.get(t);return i||(i=new Wy,this.je.set(t,i)),i}At(t){let i=this.Ye.get(t);return i||(i=new Be(kt),this.Ye=this.Ye.insert(t,i)),i}Et(t){let i=this.Je.get(t);return i||(i=new Be(kt),this.Je=this.Je.insert(t,i)),i}it(t){const i=this._t(t)!==null;return i||pt("WatchChangeAggregator","Detected inactive target",t),i}_t(t){const i=this.je.get(t);return i&&i.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Wy),this.ze.getRemoteKeysForTarget(t).forEach(i=>{this.tt(t,i,null)})}dt(t,i){return this.ze.getRemoteKeysForTarget(t).has(i)}}function Xc(){return new ye(Tt.comparator)}function t_(){return new ye(Tt.comparator)}const GT={asc:"ASCENDING",desc:"DESCENDING"},FT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QT={and:"AND",or:"OR"};class YT{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function om(e,t){return e.useProto3Json||Gh(t)?t:{value:t}}function xh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function b3(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function KT(e,t){return xh(e,t.toTimestamp())}function ji(e){return Zt(!!e,49232),Rt.fromTimestamp(function(i){const r=ur(i);return new Ue(r.seconds,r.nanos)}(e))}function Fm(e,t){return lm(e,t).canonicalString()}function lm(e,t){const i=function(o){return new me(["projects",o.projectId,"databases",o.database])}(e).child("documents");return t===void 0?i:i.child(t)}function S3(e){const t=me.fromString(e);return Zt(I3(t),10190,{key:t.toString()}),t}function um(e,t){return Fm(e.databaseId,t.path)}function A1(e,t){const i=S3(t);if(i.get(1)!==e.databaseId.projectId)throw new Et(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+e.databaseId.projectId);if(i.get(3)!==e.databaseId.database)throw new Et(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+e.databaseId.database);return new Tt(A3(i))}function C3(e,t){return Fm(e.databaseId,t)}function $T(e){const t=S3(e);return t.length===4?me.emptyPath():A3(t)}function cm(e){return new me(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function A3(e){return Zt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function e_(e,t,i){return{name:um(e,t),fields:i.value.mapValue.fields}}function XT(e,t){let i;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:St(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(g,_){return g.useProto3Json?(Zt(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(Zt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))}(e,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(g){const _=g.code===void 0?lt.UNKNOWN:E3(g.code);return new Et(_,g.message||"")}(f);i=new w3(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=A1(e,r.document.name),u=ji(r.document.updateTime),f=r.document.createTime?ji(r.document.createTime):Rt.min(),m=new Cn({mapValue:{fields:r.document.fields}}),y=cn.newFoundDocument(o,u,f,m),g=r.targetIds||[],_=r.removedTargetIds||[];i=new ch(g,_,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=A1(e,r.document),u=r.readTime?ji(r.readTime):Rt.min(),f=cn.newNoDocument(o,u),m=r.removedTargetIds||[];i=new ch([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=A1(e,r.document),u=r.removedTargetIds||[];i=new ch([],u,o,null)}else{if(!("filter"in t))return St(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new BT(o,u),m=r.targetId;i=new T3(m,f)}}return i}function ZT(e,t){let i;if(t instanceof Tu)i={update:e_(e,t.key,t.value)};else if(t instanceof v3)i={delete:um(e,t.key)};else if(t instanceof gr)i={update:e_(e,t.key,t.data),updateMask:aw(t.fieldMask)};else{if(!(t instanceof jT))return St(16599,{ft:t.type});i={verify:um(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof Ah)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof du)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof mu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Rh)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw St(20930,{transform:f.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:KT(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:St(27497)}(e,t.precondition)),i}function JT(e,t){return e&&e.length>0?(Zt(t!==void 0,14353),e.map(i=>function(o,u){let f=o.updateTime?ji(o.updateTime):ji(u);return f.isEqual(Rt.min())&&(f=ji(u)),new OT(f,o.transformResults||[])}(i,t))):[]}function WT(e,t){return{documents:[C3(e,t.path)]}}function tw(e,t){const i={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=C3(e,o);const u=function(g){if(g.length!==0)return x3(Bi.create(g,"and"))}(t.filters);u&&(i.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(_=>function(w){return{field:io(w.field),direction:iw(w.dir)}}(_))}(t.orderBy);f&&(i.structuredQuery.orderBy=f);const m=om(e,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:i,parent:o}}function ew(e){let t=$T(e.parent);const i=e.structuredQuery,r=i.from?i.from.length:0;let o=null;if(r>0){Zt(r===1,65062);const _=i.from[0];_.allDescendants?o=_.collectionId:t=t.child(_.collectionId)}let u=[];i.where&&(u=function(T){const w=R3(T);return w instanceof Bi&&i3(w)?w.getFilters():[w]}(i.where));let f=[];i.orderBy&&(f=function(T){return T.map(w=>function(M){return new Ch(so(M.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(i.orderBy));let m=null;i.limit&&(m=function(T){let w;return w=typeof T=="object"?T.value:T,Gh(w)?null:w}(i.limit));let y=null;i.startAt&&(y=function(T){const w=!!T.before,R=T.values||[];return new Sh(R,w)}(i.startAt));let g=null;return i.endAt&&(g=function(T){const w=!T.before,R=T.values||[];return new Sh(R,w)}(i.endAt)),ET(t,o,f,u,m,"F",y,g)}function nw(e,t){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St(28987,{purpose:o})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function R3(e){return e.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=so(i.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=so(i.unaryFilter.field);return Pe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=so(i.unaryFilter.field);return Pe.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=so(i.unaryFilter.field);return Pe.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return St(61313);default:return St(60726)}}(e):e.fieldFilter!==void 0?function(i){return Pe.create(so(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return St(58110);default:return St(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(i){return Bi.create(i.compositeFilter.filters.map(r=>R3(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return St(1026)}}(i.compositeFilter.op))}(e):St(30097,{filter:e})}function iw(e){return GT[e]}function sw(e){return FT[e]}function rw(e){return QT[e]}function io(e){return{fieldPath:e.canonicalString()}}function so(e){return en.fromServerFormat(e.fieldPath)}function x3(e){return e instanceof Pe?function(i){if(i.op==="=="){if(qy(i.value))return{unaryFilter:{field:io(i.field),op:"IS_NAN"}};if(zy(i.value))return{unaryFilter:{field:io(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(qy(i.value))return{unaryFilter:{field:io(i.field),op:"IS_NOT_NAN"}};if(zy(i.value))return{unaryFilter:{field:io(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(i.field),op:sw(i.op),value:i.value}}}(e):e instanceof Bi?function(i){const r=i.getFilters().map(o=>x3(o));return r.length===1?r[0]:{compositeFilter:{op:rw(i.op),filters:r}}}(e):St(54877,{filter:e})}function aw(e){const t=[];return e.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function I3(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(t,i,r,o,u=Rt.min(),f=Rt.min(),m=nn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new er(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t){this.wt=t}}function lw(e){const t=ew({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?am(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.Cn=new cw}addToCollectionParentIndex(t,i){return this.Cn.add(i),ot.resolve()}getCollectionParents(t,i){return ot.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return ot.resolve()}deleteFieldIndex(t,i){return ot.resolve()}deleteAllFieldIndexes(t){return ot.resolve()}createTargetIndexes(t,i){return ot.resolve()}getDocumentsMatchingTarget(t,i){return ot.resolve(null)}getIndexType(t,i){return ot.resolve(0)}getFieldIndexes(t,i){return ot.resolve([])}getNextCollectionGroupToUpdate(t){return ot.resolve(null)}getMinOffset(t,i){return ot.resolve(lr.min())}getMinOffsetFromCollectionGroup(t,i){return ot.resolve(lr.min())}updateCollectionGroup(t,i,r){return ot.resolve()}updateIndexEntries(t,i){return ot.resolve()}}class cw{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i]||new Be(me.comparator),u=!o.has(r);return this.index[i]=o.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Be(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D3=41943040;class bn{static withCacheSize(t){return new bn(t,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(D3,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new yo(0)}static lr(){return new yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="LruGarbageCollector",hw=1048576;function s_([e,t],[i,r]){const o=kt(e,i);return o===0?kt(t,r):o}class fw{constructor(t){this.Er=t,this.buffer=new Be(s_),this.dr=0}Ar(){return++this.dr}Rr(t){const i=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();s_(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class dw{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){pt(i_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Co(i)?pt(i_,"Ignoring IndexedDB error during garbage collection: ",i):await So(i)}await this.mr(3e5)})}}class mw{constructor(t,i){this.gr=t,this.params=i}calculateTargetCount(t,i){return this.gr.pr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return ot.resolve(Hh.le);const r=new fw(i);return this.gr.forEachTarget(t,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.gr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.gr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),ot.resolve(n_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.wr(t,i))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,i){let r,o,u,f,m,y,g;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(t,o))).next(T=>(r=T,m=Date.now(),this.removeTargets(t,r,i))).next(T=>(u=T,y=Date.now(),this.removeOrphanedDocuments(t,r))).next(T=>(g=Date.now(),eo()<=Yt.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${T} documents in `+(g-y)+`ms
Total Duration: ${g-_}ms`),ot.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T})))}}function gw(e,t){return new mw(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.changes=new ra(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?ot.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t,i,r,o){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,i))).next(o=>(r!==null&&Jl(r.mutation,o,Pn.empty(),Ue.now()),o))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Bt()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Bt()){const o=Wr();return this.populateOverlays(t,o,i).next(()=>this.computeViews(t,i,o,r).next(u=>{let f=zl();return u.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(t,i){const r=Wr();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Bt()))}populateOverlays(t,i,r){const o=[];return r.forEach(u=>{i.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{i.set(f,m)})})}computeViews(t,i,r,o){let u=Es();const f=Zl(),m=function(){return Zl()}();return i.forEach((y,g)=>{const _=r.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof gr)?u=u.insert(g.key,g):_!==void 0?(f.set(g.key,_.mutation.getFieldMask()),Jl(_.mutation,g,_.mutation.getFieldMask(),Ue.now())):f.set(g.key,Pn.empty())}),this.recalculateAndSaveOverlays(t,u).next(y=>(y.forEach((g,_)=>f.set(g,_)),i.forEach((g,_)=>{var T;return m.set(g,new yw(_,(T=f.get(g))!==null&&T!==void 0?T:null))}),m))}recalculateAndSaveOverlays(t,i){const r=Zl();let o=new ye((f,m)=>f-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(f=>{for(const m of f)m.keys().forEach(y=>{const g=i.get(y);if(g===null)return;let _=r.get(y)||Pn.empty();_=m.applyToLocalView(g,_),r.set(y,_);const T=(o.get(m.batchId)||Bt()).add(y);o=o.insert(m.batchId,T)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,_=y.value,T=h3();_.forEach(w=>{if(!u.has(w)){const R=y3(i.get(w),r.get(w));R!==null&&T.set(w,R),u=u.add(w)}}),f.push(this.documentOverlayCache.saveOverlays(t,g,T))}return ot.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,o){return function(f){return Tt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):TT(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,o):this.getDocumentsMatchingCollectionQuery(t,i,r,o)}getNextDocuments(t,i,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,o-u.size):ot.resolve(Wr());let m=uu,y=u;return f.next(g=>ot.forEach(g,(_,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(_)?ot.resolve():this.remoteDocumentCache.getEntry(t,_).next(w=>{y=y.insert(_,w)}))).next(()=>this.populateOverlays(t,g,u)).next(()=>this.computeViews(t,y,g,Bt())).next(_=>({batchId:m,changes:c3(_)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new Tt(i)).next(r=>{let o=zl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,i,r,o){const u=i.collectionGroup;let f=zl();return this.indexManager.getCollectionParents(t,u).next(m=>ot.forEach(m,y=>{const g=function(T,w){return new Qh(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,o).next(_=>{_.forEach((T,w)=>{f=f.insert(T,w)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,i,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,o))).next(f=>{u.forEach((y,g)=>{const _=g.getKey();f.get(_)===null&&(f=f.insert(_,cn.newInvalidDocument(_)))});let m=zl();return f.forEach((y,g)=>{const _=u.get(y);_!==void 0&&Jl(_.mutation,g,Pn.empty(),Ue.now()),$h(i,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,i){return ot.resolve(this.kr.get(i))}saveBundleMetadata(t,i){return this.kr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:ji(o.createTime)}}(i)),ot.resolve()}getNamedQuery(t,i){return ot.resolve(this.qr.get(i))}saveNamedQuery(t,i){return this.qr.set(i.name,function(o){return{name:o.name,query:lw(o.bundledQuery),readTime:ji(o.readTime)}}(i)),ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.overlays=new ye(Tt.comparator),this.Qr=new Map}getOverlay(t,i){return ot.resolve(this.overlays.get(i))}getOverlays(t,i){const r=Wr();return ot.forEach(i,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((o,u)=>{this.St(t,i,u)}),ot.resolve()}removeOverlaysForBatchId(t,i,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),ot.resolve()}getOverlaysForCollection(t,i,r){const o=Wr(),u=i.length+1,f=new Tt(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ot.resolve(o)}getOverlaysForCollectionGroup(t,i,r,o){let u=new ye((g,_)=>g-_);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let _=u.get(g.largestBatchId);_===null&&(_=Wr(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=Wr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,_)=>m.set(g,_)),!(m.size()>=o)););return ot.resolve(m)}St(t,i,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new UT(i,r));let u=this.Qr.get(i);u===void 0&&(u=Bt(),this.Qr.set(i,u)),this.Qr.set(i,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return ot.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.$r=new Be(Ye.Ur),this.Kr=new Be(Ye.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,i){const r=new Ye(t,i);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.zr(new Ye(t,i))}jr(t,i){t.forEach(r=>this.removeReference(r,i))}Hr(t){const i=new Tt(new me([])),r=new Ye(i,t),o=new Ye(i,t+1),u=[];return this.Kr.forEachInRange([r,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const i=new Tt(new me([])),r=new Ye(i,t),o=new Ye(i,t+1);let u=Bt();return this.Kr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(t){const i=new Ye(t,0),r=this.$r.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Ye{constructor(t,i){this.key=t,this.Zr=i}static Ur(t,i){return Tt.comparator(t.key,i.key)||kt(t.Zr,i.Zr)}static Wr(t,i){return kt(t.Zr,i.Zr)||Tt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.nr=1,this.Xr=new Be(Ye.Ur)}checkEmpty(t){return ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new PT(u,i,r,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new Ye(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return ot.resolve(f)}lookupMutationBatch(t,i){return ot.resolve(this.ei(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,o=this.ti(r),u=o<0?0:o;return ot.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ot.resolve(this.mutationQueue.length===0?jm:this.nr-1)}getAllMutationBatches(t){return ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Ye(i,0),o=new Ye(i,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],f=>{const m=this.ei(f.Zr);u.push(m)}),ot.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Be(kt);return i.forEach(o=>{const u=new Ye(o,0),f=new Ye(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{r=r.add(m.Zr)})}),ot.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,o=r.length+1;let u=r;Tt.isDocumentKey(u)||(u=u.child(""));const f=new Ye(new Tt(u),0);let m=new Be(kt);return this.Xr.forEachWhile(y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(m=m.add(y.Zr)),!0)},f),ot.resolve(this.ni(m))}ni(t){const i=[];return t.forEach(r=>{const o=this.ei(r);o!==null&&i.push(o)}),i}removeMutationBatch(t,i){Zt(this.ri(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ot.forEach(i.mutations,o=>{const u=new Ye(o.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,i){const r=new Ye(i,0),o=this.Xr.firstAfterOrEqual(r);return ot.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ot.resolve()}ri(t,i){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const i=this.ti(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t){this.ii=t,this.docs=function(){return new ye(Tt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,o=this.docs.get(r),u=o?o.size:0,f=this.ii(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return ot.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(i))}getEntries(t,i){let r=Es();return i.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():cn.newInvalidDocument(o))}),ot.resolve(r)}getDocumentsMatchingQuery(t,i,r,o){let u=Es();const f=i.path,m=new Tt(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:_}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||J8(Z8(_),r)<=0||(o.has(_.key)||$h(i,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ot.resolve(u)}getAllFromCollectionGroup(t,i,r,o){St(9500)}si(t,i){return ot.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new Sw(this)}getSize(t){return ot.resolve(this.size)}}class Sw extends pw{constructor(t){super(),this.Br=t}applyChanges(t){const i=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?i.push(this.Br.addEntry(t,o)):this.Br.removeEntry(r)}),ot.waitFor(i)}getFromCache(t,i){return this.Br.getEntry(t,i)}getAllFromCache(t,i){return this.Br.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t){this.persistence=t,this.oi=new ra(i=>Bm(i),zm),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this._i=0,this.ai=new Qm,this.targetCount=0,this.ui=yo.cr()}forEachTarget(t,i){return this.oi.forEach((r,o)=>i(o)),ot.resolve()}getLastRemoteSnapshotVersion(t){return ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ot.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),ot.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this._i&&(this._i=i),ot.resolve()}Tr(t){this.oi.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ui=new yo(i),this.highestTargetId=i),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,i){return this.Tr(i),this.targetCount+=1,ot.resolve()}updateTargetData(t,i){return this.Tr(i),ot.resolve()}removeTargetData(t,i){return this.oi.delete(i.target),this.ai.Hr(i.targetId),this.targetCount-=1,ot.resolve()}removeTargets(t,i,r){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),ot.waitFor(u).next(()=>o)}getTargetCount(t){return ot.resolve(this.targetCount)}getTargetData(t,i){const r=this.oi.get(i)||null;return ot.resolve(r)}addMatchingKeys(t,i,r){return this.ai.Gr(i,r),ot.resolve()}removeMatchingKeys(t,i,r){this.ai.jr(i,r);const o=this.persistence.referenceDelegate,u=[];return o&&i.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),ot.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this.ai.Hr(i),ot.resolve()}getMatchingKeysForTargetId(t,i){const r=this.ai.Yr(i);return ot.resolve(r)}containsKey(t,i){return ot.resolve(this.ai.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(t,i){this.ci={},this.overlays={},this.li=new Hh(0),this.hi=!1,this.hi=!0,this.Pi=new Tw,this.referenceDelegate=t(this),this.Ti=new Cw(this),this.indexManager=new uw,this.remoteDocumentCache=function(o){return new bw(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new ow(i),this.Ei=new vw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new Ew,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ci[t.toKey()];return r||(r=new ww(i,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,i,r){pt("MemoryPersistence","Starting transaction:",t);const o=new Aw(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(t,i){return ot.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,i)))}}class Aw extends tT{constructor(t){super(),this.currentSequenceNumber=t}}class Ym{constructor(t){this.persistence=t,this.Vi=new Qm,this.mi=null}static fi(t){return new Ym(t)}get gi(){if(this.mi)return this.mi;throw St(60996)}addReference(t,i,r){return this.Vi.addReference(r,i),this.gi.delete(r.toString()),ot.resolve()}removeReference(t,i,r){return this.Vi.removeReference(r,i),this.gi.add(r.toString()),ot.resolve()}markPotentiallyOrphaned(t,i){return this.gi.add(i.toString()),ot.resolve()}removeTarget(t,i){this.Vi.Hr(i.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(t,i))}di(){this.mi=new Set}Ai(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ot.forEach(this.gi,r=>{const o=Tt.fromPath(r);return this.pi(t,o).next(u=>{u||i.removeEntry(o,Rt.min())})}).next(()=>(this.mi=null,i.apply(t)))}updateLimboDocument(t,i){return this.pi(t,i).next(r=>{r?this.gi.delete(i.toString()):this.gi.add(i.toString())})}Ii(t){return 0}pi(t,i){return ot.or([()=>ot.resolve(this.Vi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ri(t,i)])}}class Ih{constructor(t,i){this.persistence=t,this.yi=new ra(r=>iT(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=gw(this,i)}static fi(t,i){return new Ih(t,i)}di(){}Ai(t){return ot.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}pr(t){const i=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(o=>r+o))}br(t){let i=0;return this.yr(t,r=>{i++}).next(()=>i)}yr(t,i){return ot.forEach(this.yi,(r,o)=>this.Dr(t,r,o).next(u=>u?ot.resolve():i(o)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(t,f=>this.Dr(t,f,i).next(m=>{m||(r++,u.removeEntry(f,Rt.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.yi.set(i,t.currentSequenceNumber),ot.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),ot.resolve()}removeReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),ot.resolve()}updateLimboDocument(t,i){return this.yi.set(i,t.currentSequenceNumber),ot.resolve()}Ii(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=oh(t.data.value)),i}Dr(t,i,r){return ot.or([()=>this.persistence.Ri(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const o=this.yi.get(i);return ot.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(t,i,r,o){this.targetId=t,this.fromCache=i,this.ds=r,this.As=o}static Rs(t,i){let r=Bt(),o=Bt();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Km(t,i.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return TE()?8:eT(vE())>0?6:4}()}initialize(t,i){this.ys=t,this.indexManager=i,this.Vs=!0}getDocumentsMatchingQuery(t,i,r,o){const u={result:null};return this.ws(t,i).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(t,i,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new Rw;return this.Ss(t,i,f).next(m=>{if(u.result=m,this.fs)return this.Ds(t,i,f,m.size)})}).next(()=>u.result)}Ds(t,i,r,o){return r.documentReadCount<this.gs?(eo()<=Yt.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",no(i),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ot.resolve()):(eo()<=Yt.DEBUG&&pt("QueryEngine","Query:",no(i),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(eo()<=Yt.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",no(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Li(i))):ot.resolve())}ws(t,i){if(Qy(i))return ot.resolve(null);let r=Li(i);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=am(i,null,"F"),r=Li(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const f=Bt(...u);return this.ys.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,r).next(y=>{const g=this.vs(i,m);return this.Cs(i,g,f,y.readTime)?this.ws(t,am(i,null,"F")):this.Fs(t,g,i,y)}))})))}bs(t,i,r,o){return Qy(i)||o.isEqual(Rt.min())?ot.resolve(null):this.ys.getDocuments(t,r).next(u=>{const f=this.vs(i,u);return this.Cs(i,f,r,o)?ot.resolve(null):(eo()<=Yt.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),no(i)),this.Fs(t,f,i,X8(o,uu)).next(m=>m))})}vs(t,i){let r=new Be(l3(t));return i.forEach((o,u)=>{$h(t,u)&&(r=r.add(u))}),r}Cs(t,i,r,o){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,i,r){return eo()<=Yt.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",no(i)),this.ys.getDocumentsMatchingQuery(t,i,lr.min(),r)}Fs(t,i,r,o){return this.ys.getDocumentsMatchingQuery(t,r,o).next(u=>(i.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="LocalStore",Iw=3e8;class Dw{constructor(t,i,r,o){this.persistence=t,this.Ms=i,this.serializer=o,this.xs=new ye(kt),this.Os=new ra(u=>Bm(u),zm),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _w(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.xs))}}function Mw(e,t,i,r){return new Dw(e,t,i,r)}async function V3(e,t){const i=It(e);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let o;return i.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,i.Ls(t),i.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let y=Bt();for(const g of o){f.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}for(const g of u){m.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}return i.localDocuments.getDocuments(r,y).next(g=>({ks:g,removedBatchIds:f,addedBatchIds:m}))})})}function Vw(e,t){const i=It(e);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=i.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,g,_){const T=g.batch,w=T.keys();let R=ot.resolve();return w.forEach(M=>{R=R.next(()=>_.getEntry(y,M)).next(U=>{const N=g.docVersions.get(M);Zt(N!==null,48541),U.version.compareTo(N)<0&&(T.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),_.addEntry(U)))})}),R.next(()=>m.mutationQueue.removeMutationBatch(y,T))}(i,r,t,u).next(()=>u.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Bt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(t))).next(()=>i.localDocuments.getDocuments(r,o))})}function N3(e){const t=It(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ti.getLastRemoteSnapshotVersion(i))}function Nw(e,t){const i=It(e),r=t.snapshotVersion;let o=i.xs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=i.Bs.newChangeBuffer({trackRemovals:!0});o=i.xs;const m=[];t.targetChanges.forEach((_,T)=>{const w=o.get(T);if(!w)return;m.push(i.Ti.removeMatchingKeys(u,_.removedDocuments,T).next(()=>i.Ti.addMatchingKeys(u,_.addedDocuments,T)));let R=w.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?R=R.withResumeToken(nn.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),o=o.insert(T,R),function(U,N,H){return U.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=Iw?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(w,R,_)&&m.push(i.Ti.updateTargetData(u,R))});let y=Es(),g=Bt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,_))}),m.push(Ow(u,f,t.documentUpdates).next(_=>{y=_.qs,g=_.Qs})),!r.isEqual(Rt.min())){const _=i.Ti.getLastRemoteSnapshotVersion(u).next(T=>i.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(_)}return ot.waitFor(m).next(()=>f.apply(u)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(i.xs=o,u))}function Ow(e,t,i){let r=Bt(),o=Bt();return i.forEach(u=>r=r.add(u)),t.getEntries(e,r).next(u=>{let f=Es();return i.forEach((m,y)=>{const g=u.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Rt.min())?(t.removeEntry(m,y.readTime),f=f.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),f=f.insert(m,y)):pt($m,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{qs:f,Qs:o}})}function Lw(e,t){const i=It(e);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=jm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function kw(e,t){const i=It(e);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return i.Ti.getTargetData(r,t).next(u=>u?(o=u,ot.resolve(o)):i.Ti.allocateTargetId(r).next(f=>(o=new er(t,f,"TargetPurposeListen",r.currentSequenceNumber),i.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=i.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.xs=i.xs.insert(r.targetId,r),i.Os.set(t,r.targetId)),r})}async function hm(e,t,i){const r=It(e),o=r.xs.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Co(f))throw f;pt($m,`Failed to update sequence numbers for target ${t}: ${f}`)}r.xs=r.xs.remove(t),r.Os.delete(o.target)}function r_(e,t,i){const r=It(e);let o=Rt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readwrite",f=>function(y,g,_){const T=It(y),w=T.Os.get(_);return w!==void 0?ot.resolve(T.xs.get(w)):T.Ti.getTargetData(g,_)}(r,f,Li(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,m.targetId).next(y=>{u=y})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,t,i?o:Rt.min(),i?u:Bt())).next(m=>(jw(r,bT(t),m),{documents:m,$s:u})))}function jw(e,t,i){let r=e.Ns.get(t)||Rt.min();i.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),e.Ns.set(t,r)}class a_{constructor(){this.activeTargetIds=IT()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Pw{constructor(){this.xo=new a_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,i,r){this.Oo[t]=i}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new a_,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="ConnectivityMonitor";class l_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){pt(o_,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){pt(o_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zc=null;function fm(){return Zc===null?Zc=function(){return 268435456+Math.round(2147483648*Math.random())}():Zc++,"0x"+Zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="RestConnection",Bw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zw{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=i+"://"+t.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===wh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(t,i,r,o,u){const f=fm(),m=this.jo(t,i.toUriEncodedString());pt(R1,`Sending RPC '${t}' ${f}:`,m,r);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:g}=new URL(m),_=Om(g);return this.Jo(t,m,y,r,_).then(T=>(pt(R1,`Received RPC '${t}' ${f}: `,T),T),T=>{throw fo(R1,`RPC '${t}' ${f} failed with error: `,T,"url: ",m,"request:",r),T})}Yo(t,i,r,o,u,f){return this.zo(t,i,r,o,u)}Ho(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}jo(t,i){const r=Bw[t];return`${this.Ko}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Hw extends zw{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,o,u){const f=fm();return new Promise((m,y)=>{const g=new kv;g.setWithCredentials(!0),g.listenOnce(jv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case ah.NO_ERROR:const T=g.getResponseJson();pt(ln,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(T)),m(T);break;case ah.TIMEOUT:pt(ln,`RPC '${t}' ${f} timed out`),y(new Et(lt.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const w=g.getStatus();if(pt(ln,`RPC '${t}' ${f} failed with status:`,w,"response text:",g.getResponseText()),w>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const U=function(H){const F=H.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(F)>=0?F:lt.UNKNOWN}(M.status);y(new Et(U,M.message))}else y(new Et(lt.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new Et(lt.UNAVAILABLE,"Connection failed."));break;default:St(9055,{h_:t,streamId:f,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{pt(ln,`RPC '${t}' ${f} completed.`)}});const _=JSON.stringify(o);pt(ln,`RPC '${t}' ${f} sending request:`,o),g.send(i,"POST",_,r,15)})}I_(t,i,r){const o=fm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=Bv(),m=Uv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const _=u.join("");pt(ln,`Creating RPC '${t}' stream ${o}: ${_}`,y);const T=f.createWebChannel(_,y);this.E_(T);let w=!1,R=!1;const M=new qw({Zo:N=>{R?pt(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,N):(w||(pt(ln,`Opening RPC '${t}' stream ${o} transport.`),T.open(),w=!0),pt(ln,`RPC '${t}' stream ${o} sending:`,N),T.send(N))},Xo:()=>T.close()}),U=(N,H,F)=>{N.listen(H,K=>{try{F(K)}catch(tt){setTimeout(()=>{throw tt},0)}})};return U(T,Bl.EventType.OPEN,()=>{R||(pt(ln,`RPC '${t}' stream ${o} transport opened.`),M.__())}),U(T,Bl.EventType.CLOSE,()=>{R||(R=!0,pt(ln,`RPC '${t}' stream ${o} transport closed`),M.u_(),this.d_(T))}),U(T,Bl.EventType.ERROR,N=>{R||(R=!0,fo(ln,`RPC '${t}' stream ${o} transport errored. Name:`,N.name,"Message:",N.message),M.u_(new Et(lt.UNAVAILABLE,"The operation could not be completed")))}),U(T,Bl.EventType.MESSAGE,N=>{var H;if(!R){const F=N.data[0];Zt(!!F,16349);const K=F,tt=(K==null?void 0:K.error)||((H=K[0])===null||H===void 0?void 0:H.error);if(tt){pt(ln,`RPC '${t}' stream ${o} received error:`,tt);const W=tt.status;let Q=function(x){const k=De[x];if(k!==void 0)return E3(k)}(W),D=tt.message;Q===void 0&&(Q=lt.INTERNAL,D="Unknown error status: "+W+" with message "+tt.message),R=!0,M.u_(new Et(Q,D)),T.close()}else pt(ln,`RPC '${t}' stream ${o} received:`,F),M.c_(F)}}),U(m,Pv.STAT_EVENT,N=>{N.stat===tm.PROXY?pt(ln,`RPC '${t}' stream ${o} detected buffering proxy`):N.stat===tm.NOPROXY&&pt(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(i=>i===t)}}function x1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(e){return new YT(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(t,i,r=1e3,o=1.5,u=6e4){this.xi=t,this.timerId=i,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const i=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,i-r);o>0&&pt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="PersistentStream";class L3{constructor(t,i,r,o,u,f,m,y){this.xi=t,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new O3(t,i)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,i){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():i&&i.code===lt.RESOURCE_EXHAUSTED?(vs(i.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):i&&i.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(i)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),i=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===i&&this.z_(r,o)},r=>{t(()=>{const o=new Et(lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(t,i){const r=this.G_(this.v_);this.stream=this.H_(t,i),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return pt(u_,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return i=>{this.xi.enqueueAndForget(()=>this.v_===t?i():(pt(u_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gw extends L3{constructor(t,i,r,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,o,f),this.serializer=u}H_(t,i){return this.connection.I_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const i=XT(this.serializer,t),r=function(u){if(!("targetChange"in u))return Rt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Rt.min():f.readTime?ji(f.readTime):Rt.min()}(t);return this.listener.Y_(i,r)}Z_(t){const i={};i.database=cm(this.serializer),i.addTarget=function(u,f){let m;const y=f.target;if(m=rm(y)?{documents:WT(u,y)}:{query:tw(u,y).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=b3(u,f.resumeToken);const g=om(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Rt.min())>0){m.readTime=xh(u,f.snapshotVersion.toTimestamp());const g=om(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,t);const r=nw(this.serializer,t);r&&(i.labels=r),this.Q_(i)}X_(t){const i={};i.database=cm(this.serializer),i.removeTarget=t,this.Q_(i)}}class Fw extends L3{constructor(t,i,r,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,i){return this.connection.I_("Write",t,i)}J_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const i=JT(t.writeResults,t.commitTime),r=ji(t.commitTime);return this.listener.ra(r,i)}ia(){const t={};t.database=cm(this.serializer),this.Q_(t)}ta(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>ZT(this.serializer,r))};this.Q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{}class Yw extends Qw{constructor(t,i,r,o){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Et(lt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,i,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(t,lm(i,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Et(lt.UNKNOWN,u.toString())})}Yo(t,i,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(t,lm(i,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Et(lt.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Kw{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(vs(i),this.ua=!1):pt("OnlineStateTracker",i)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RemoteStore";class $w{constructor(t,i,r,o,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{r.enqueueAndForget(async()=>{aa(this)&&(pt(na,"Restarting streams for network reachability change."),await async function(y){const g=It(y);g.da.add(4),await bu(g),g.Va.set("Unknown"),g.da.delete(4),await tf(g)}(this))})}),this.Va=new Kw(r,o)}}async function tf(e){if(aa(e))for(const t of e.Aa)await t(!0)}async function bu(e){for(const t of e.Aa)await t(!1)}function k3(e,t){const i=It(e);i.Ea.has(t.targetId)||(i.Ea.set(t.targetId,t),Wm(i)?Jm(i):Ao(i).N_()&&Zm(i,t))}function Xm(e,t){const i=It(e),r=Ao(i);i.Ea.delete(t),r.N_()&&j3(i,t),i.Ea.size===0&&(r.N_()?r.k_():aa(i)&&i.Va.set("Unknown"))}function Zm(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Rt.min())>0){const i=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ao(e).Z_(t)}function j3(e,t){e.ma.Ke(t),Ao(e).X_(t)}function Jm(e){e.ma=new HT({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Ao(e).start(),e.Va.ca()}function Wm(e){return aa(e)&&!Ao(e).O_()&&e.Ea.size>0}function aa(e){return It(e).da.size===0}function P3(e){e.ma=void 0}async function Xw(e){e.Va.set("Online")}async function Zw(e){e.Ea.forEach((t,i)=>{Zm(e,t)})}async function Jw(e,t){P3(e),Wm(e)?(e.Va.Pa(t),Jm(e)):e.Va.set("Unknown")}async function Ww(e,t,i){if(e.Va.set("Online"),t instanceof w3&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(e,t)}catch(r){pt(na,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Dh(e,r)}else if(t instanceof ch?e.ma.Xe(t):t instanceof T3?e.ma.ot(t):e.ma.nt(t),!i.isEqual(Rt.min()))try{const r=await N3(e.localStore);i.compareTo(r)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const _=u.Ea.get(g);_&&u.Ea.set(g,_.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,g)=>{const _=u.Ea.get(y);if(!_)return;u.Ea.set(y,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),j3(u,y);const T=new er(_.target,y,g,_.sequenceNumber);Zm(u,T)}),u.remoteSyncer.applyRemoteEvent(m)}(e,i)}catch(r){pt(na,"Failed to raise snapshot:",r),await Dh(e,r)}}async function Dh(e,t,i){if(!Co(t))throw t;e.da.add(1),await bu(e),e.Va.set("Offline"),i||(i=()=>N3(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{pt(na,"Retrying IndexedDB access"),await i(),e.da.delete(1),await tf(e)})}function U3(e,t){return t().catch(i=>Dh(e,i,t))}async function ef(e){const t=It(e),i=fr(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:jm;for(;tb(t);)try{const o=await Lw(t.localStore,r);if(o===null){t.Ia.length===0&&i.k_();break}r=o.batchId,eb(t,o)}catch(o){await Dh(t,o)}B3(t)&&z3(t)}function tb(e){return aa(e)&&e.Ia.length<10}function eb(e,t){e.Ia.push(t);const i=fr(e);i.N_()&&i.ea&&i.ta(t.mutations)}function B3(e){return aa(e)&&!fr(e).O_()&&e.Ia.length>0}function z3(e){fr(e).start()}async function nb(e){fr(e).ia()}async function ib(e){const t=fr(e);for(const i of e.Ia)t.ta(i.mutations)}async function sb(e,t,i){const r=e.Ia.shift(),o=Hm.from(r,t,i);await U3(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await ef(e)}async function rb(e,t){t&&fr(e).ea&&await async function(r,o){if(function(f){return zT(f)&&f!==lt.ABORTED}(o.code)){const u=r.Ia.shift();fr(r).L_(),await U3(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ef(r)}}(e,t),B3(e)&&z3(e)}async function c_(e,t){const i=It(e);i.asyncQueue.verifyOperationInProgress(),pt(na,"RemoteStore received new credentials");const r=aa(i);i.da.add(3),await bu(i),r&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.da.delete(3),await tf(i)}async function ab(e,t){const i=It(e);t?(i.da.delete(2),await tf(i)):t||(i.da.add(2),await bu(i),i.Va.set("Unknown"))}function Ao(e){return e.fa||(e.fa=function(i,r,o){const u=It(i);return u.oa(),new Gw(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(e.datastore,e.asyncQueue,{e_:Xw.bind(null,e),n_:Zw.bind(null,e),i_:Jw.bind(null,e),Y_:Ww.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),Wm(e)?Jm(e):e.Va.set("Unknown")):(await e.fa.stop(),P3(e))})),e.fa}function fr(e){return e.ga||(e.ga=function(i,r,o){const u=It(i);return u.oa(),new Fw(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:nb.bind(null,e),i_:rb.bind(null,e),na:ib.bind(null,e),ra:sb.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await ef(e)):(await e.ga.stop(),e.Ia.length>0&&(pt(na,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,i,r,o,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,o,u){const f=Date.now()+r,m=new tg(t,i,f,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(e,t){if(vs("AsyncQueue",`${t}: ${e}`),Co(e))return new Et(lt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{static emptySet(t){return new uo(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||Tt.comparator(i.key,r.key):(i,r)=>Tt.comparator(i.key,r.key),this.keyedMap=zl(),this.sortedSet=new ye(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof uo)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new uo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.pa=new ye(Tt.comparator)}track(t){const i=t.doc.key,r=this.pa.get(i);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(i,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(i):t.type===1&&r.type===2?this.pa=this.pa.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):St(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(i,t)}wa(){const t=[];return this.pa.inorderTraversal((i,r)=>{t.push(r)}),t}}class _o{constructor(t,i,r,o,u,f,m,y,g){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,i,r,o,u){const f=[];return i.forEach(m=>{f.push({type:0,doc:m})}),new _o(t,i,uo.emptySet(i),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Kh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==r[o].type||!i[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class lb{constructor(){this.queries=f_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const o=It(i),u=o.queries;o.queries=f_(),u.forEach((f,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new Et(lt.ABORTED,"Firestore shutting down"))}}function f_(){return new ra(e=>o3(e),Kh)}async function q3(e,t){const i=It(e);let r=3;const o=t.query;let u=i.queries.get(o);u?!u.Da()&&t.va()&&(r=2):(u=new ob,r=t.va()?0:1);try{switch(r){case 0:u.ba=await i.onListen(o,!0);break;case 1:u.ba=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=eg(f,`Initialization of query '${no(t.query)}' failed`);return void t.onError(m)}i.queries.set(o,u),u.Sa.push(t),t.Fa(i.onlineState),u.ba&&t.Ma(u.ba)&&ng(i)}async function H3(e,t){const i=It(e),r=t.query;let o=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.va()?0:1:!u.Da()&&t.va()&&(o=2))}switch(o){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function ub(e,t){const i=It(e);let r=!1;for(const o of t){const u=o.query,f=i.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(r=!0);f.ba=o}}r&&ng(i)}function cb(e,t,i){const r=It(e),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(i);r.queries.delete(t)}function ng(e){e.Ca.forEach(t=>{t.next()})}var dm,d_;(d_=dm||(dm={})).xa="default",d_.Cache="cache";class G3{constructor(t,i,r){this.query=t,this.Oa=i,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new _o(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Na?this.La(t)&&(this.Oa.next(t),i=!0):this.ka(t,this.onlineState)&&(this.qa(t),i=!0),this.Ba=t,i}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let i=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),i=!0),i}ka(t,i){if(!t.fromCache||!this.va())return!0;const r=i!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}La(t){if(t.docChanges.length>0)return!0;const i=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}qa(t){t=_o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==dm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(t){this.key=t}}class Q3{constructor(t){this.key=t}}class hb{constructor(t,i){this.query=t,this.Ha=i,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Bt(),this.mutatedKeys=Bt(),this.Za=l3(t),this.Xa=new uo(this.Za)}get eu(){return this.Ha}tu(t,i){const r=i?i.nu:new h_,o=i?i.Xa:this.Xa;let u=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((_,T)=>{const w=o.get(_),R=$h(this.query,T)?T:null,M=!!w&&this.mutatedKeys.has(w.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let N=!1;w&&R?w.data.isEqual(R.data)?M!==U&&(r.track({type:3,doc:R}),N=!0):this.ru(w,R)||(r.track({type:2,doc:R}),N=!0,(y&&this.Za(R,y)>0||g&&this.Za(R,g)<0)&&(m=!0)):!w&&R?(r.track({type:0,doc:R}),N=!0):w&&!R&&(r.track({type:1,doc:w}),N=!0,(y||g)&&(m=!0)),N&&(R?(f=f.add(R),u=U?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{Xa:f,nu:r,Cs:m,mutatedKeys:u}}ru(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,o){const u=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const f=t.nu.wa();f.sort((_,T)=>function(R,M){const U=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St(20277,{Vt:N})}};return U(R)-U(M)}(_.type,T.type)||this.Za(_.doc,T.doc)),this.iu(r),o=o!=null&&o;const m=i&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,g=y!==this.Ja;return this.Ja=y,f.length!==0||g?{snapshot:new _o(this.query,t.Xa,u,f,t.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new h_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Bt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const i=[];return t.forEach(r=>{this.Ya.has(r)||i.push(new Q3(r))}),this.Ya.forEach(r=>{t.has(r)||i.push(new F3(r))}),i}au(t){this.Ha=t.$s,this.Ya=Bt();const i=this.tu(t.documents);return this.applyChanges(i,!0)}uu(){return _o.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ig="SyncEngine";class fb{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class db{constructor(t){this.key=t,this.cu=!1}}class mb{constructor(t,i,r,o,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new ra(m=>o3(m),Kh),this.Pu=new Map,this.Tu=new Set,this.Iu=new ye(Tt.comparator),this.Eu=new Map,this.du=new Qm,this.Au={},this.Ru=new Map,this.Vu=yo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function gb(e,t,i=!0){const r=J3(e);let o;const u=r.hu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await Y3(r,t,i,!0),o}async function pb(e,t){const i=J3(e);await Y3(i,t,!0,!1)}async function Y3(e,t,i,r){const o=await kw(e.localStore,Li(t)),u=o.targetId,f=e.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await yb(e,t,u,f==="current",o.resumeToken)),e.isPrimaryClient&&i&&k3(e.remoteStore,o),m}async function yb(e,t,i,r,o){e.fu=(T,w,R)=>async function(U,N,H,F){let K=N.view.tu(H);K.Cs&&(K=await r_(U.localStore,N.query,!1).then(({documents:D})=>N.view.tu(D,K)));const tt=F&&F.targetChanges.get(N.targetId),W=F&&F.targetMismatches.get(N.targetId)!=null,Q=N.view.applyChanges(K,U.isPrimaryClient,tt,W);return g_(U,N.targetId,Q.ou),Q.snapshot}(e,T,w,R);const u=await r_(e.localStore,t,!0),f=new hb(t,u.$s),m=f.tu(u.documents),y=wu.createSynthesizedTargetChangeForCurrentChange(i,r&&e.onlineState!=="Offline",o),g=f.applyChanges(m,e.isPrimaryClient,y);g_(e,i,g.ou);const _=new fb(t,i,f);return e.hu.set(t,_),e.Pu.has(i)?e.Pu.get(i).push(t):e.Pu.set(i,[t]),g.snapshot}async function _b(e,t,i){const r=It(e),o=r.hu.get(t),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(f=>!Kh(f,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await hm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),i&&Xm(r.remoteStore,o.targetId),mm(r,o.targetId)}).catch(So)):(mm(r,o.targetId),await hm(r.localStore,o.targetId,!0))}async function vb(e,t){const i=It(e),r=i.hu.get(t),o=i.Pu.get(r.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),Xm(i.remoteStore,r.targetId))}async function Eb(e,t,i){const r=Rb(e);try{const o=await function(f,m){const y=It(f),g=Ue.now(),_=m.reduce((R,M)=>R.add(M.key),Bt());let T,w;return y.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Es(),U=Bt();return y.Bs.getEntries(R,_).next(N=>{M=N,M.forEach((H,F)=>{F.isValidDocument()||(U=U.add(H))})}).next(()=>y.localDocuments.getOverlayedDocuments(R,M)).next(N=>{T=N;const H=[];for(const F of m){const K=kT(F,T.get(F.key).overlayedDocument);K!=null&&H.push(new gr(F.key,K,t3(K.value.mapValue),ki.exists(!0)))}return y.mutationQueue.addMutationBatch(R,g,H,m)}).next(N=>{w=N;const H=N.applyToLocalDocumentSet(T,U);return y.documentOverlayCache.saveOverlays(R,N.batchId,H)})}).then(()=>({batchId:w.batchId,changes:c3(T)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let g=f.Au[f.currentUser.toKey()];g||(g=new ye(kt)),g=g.insert(m,y),f.Au[f.currentUser.toKey()]=g}(r,o.batchId,i),await Su(r,o.changes),await ef(r.remoteStore)}catch(o){const u=eg(o,"Failed to persist write");i.reject(u)}}async function K3(e,t){const i=It(e);try{const r=await Nw(i.localStore,t);t.targetChanges.forEach((o,u)=>{const f=i.Eu.get(u);f&&(Zt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?Zt(f.cu,14607):o.removedDocuments.size>0&&(Zt(f.cu,42227),f.cu=!1))}),await Su(i,r,t)}catch(r){await So(r)}}function m_(e,t,i){const r=It(e);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const o=[];r.hu.forEach((u,f)=>{const m=f.view.Fa(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=It(f);y.onlineState=m;let g=!1;y.queries.forEach((_,T)=>{for(const w of T.Sa)w.Fa(m)&&(g=!0)}),g&&ng(y)}(r.eventManager,t),o.length&&r.lu.Y_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Tb(e,t,i){const r=It(e);r.sharedClientState.updateQueryState(t,"rejected",i);const o=r.Eu.get(t),u=o&&o.key;if(u){let f=new ye(Tt.comparator);f=f.insert(u,cn.newNoDocument(u,Rt.min()));const m=Bt().add(u),y=new Jh(Rt.min(),new Map,new ye(kt),f,m);await K3(r,y),r.Iu=r.Iu.remove(u),r.Eu.delete(t),sg(r)}else await hm(r.localStore,t,!1).then(()=>mm(r,t,i)).catch(So)}async function wb(e,t){const i=It(e),r=t.batch.batchId;try{const o=await Vw(i.localStore,t);X3(i,r,null),$3(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await Su(i,o)}catch(o){await So(o)}}async function bb(e,t,i){const r=It(e);try{const o=await function(f,m){const y=It(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return y.mutationQueue.lookupMutationBatch(g,m).next(T=>(Zt(T!==null,37113),_=T.keys(),y.mutationQueue.removeMutationBatch(g,T))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,_,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>y.localDocuments.getDocuments(g,_))})}(r.localStore,t);X3(r,t,i),$3(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await Su(r,o)}catch(o){await So(o)}}function $3(e,t){(e.Ru.get(t)||[]).forEach(i=>{i.resolve()}),e.Ru.delete(t)}function X3(e,t,i){const r=It(e);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(i?u.reject(i):u.resolve(),o=o.remove(t)),r.Au[r.currentUser.toKey()]=o}}function mm(e,t,i=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),i&&e.lu.gu(r,i);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(r=>{e.du.containsKey(r)||Z3(e,r)})}function Z3(e,t){e.Tu.delete(t.path.canonicalString());const i=e.Iu.get(t);i!==null&&(Xm(e.remoteStore,i),e.Iu=e.Iu.remove(t),e.Eu.delete(i),sg(e))}function g_(e,t,i){for(const r of i)r instanceof F3?(e.du.addReference(r.key,t),Sb(e,r)):r instanceof Q3?(pt(ig,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Z3(e,r.key)):St(19791,{pu:r})}function Sb(e,t){const i=t.key,r=i.path.canonicalString();e.Iu.get(i)||e.Tu.has(r)||(pt(ig,"New document in limbo: "+i),e.Tu.add(r),sg(e))}function sg(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const i=new Tt(me.fromString(t)),r=e.Vu.next();e.Eu.set(r,new db(i)),e.Iu=e.Iu.insert(i,r),k3(e.remoteStore,new er(Li(Yh(i.path)),r,"TargetPurposeLimboResolution",Hh.le))}}async function Su(e,t,i){const r=It(e),o=[],u=[],f=[];r.hu.isEmpty()||(r.hu.forEach((m,y)=>{f.push(r.fu(y,t,i).then(g=>{var _;if((g||i)&&r.isPrimaryClient){const T=g?!g.fromCache:(_=i==null?void 0:i.targetChanges.get(y.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(g){o.push(g);const T=Km.Rs(y.targetId,g);u.push(T)}}))}),await Promise.all(f),r.lu.Y_(o),await async function(y,g){const _=It(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ot.forEach(g,w=>ot.forEach(w.ds,R=>_.persistence.referenceDelegate.addReference(T,w.targetId,R)).next(()=>ot.forEach(w.As,R=>_.persistence.referenceDelegate.removeReference(T,w.targetId,R)))))}catch(T){if(!Co(T))throw T;pt($m,"Failed to update sequence numbers: "+T)}for(const T of g){const w=T.targetId;if(!T.fromCache){const R=_.xs.get(w),M=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(M);_.xs=_.xs.insert(w,U)}}}(r.localStore,u))}async function Cb(e,t){const i=It(e);if(!i.currentUser.isEqual(t)){pt(ig,"User change. New user:",t.toKey());const r=await V3(i.localStore,t);i.currentUser=t,function(u,f){u.Ru.forEach(m=>{m.forEach(y=>{y.reject(new Et(lt.CANCELLED,f))})}),u.Ru.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Su(i,r.ks)}}function Ab(e,t){const i=It(e),r=i.Eu.get(t);if(r&&r.cu)return Bt().add(r.key);{let o=Bt();const u=i.Pu.get(t);if(!u)return o;for(const f of u){const m=i.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function J3(e){const t=It(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=K3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ab.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Tb.bind(null,t),t.lu.Y_=ub.bind(null,t.eventManager),t.lu.gu=cb.bind(null,t.eventManager),t}function Rb(e){const t=It(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bb.bind(null,t),t}class Mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,i){return null}Cu(t,i){return null}Du(t){return Mw(this.persistence,new xw,t.initialUser,this.serializer)}Su(t){return new M3(Ym.fi,this.serializer)}bu(t){return new Pw}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mh.provider={build:()=>new Mh};class xb extends Mh{constructor(t){super(),this.cacheSizeBytes=t}vu(t,i){Zt(this.persistence.referenceDelegate instanceof Ih,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dw(r,t.asyncQueue,i)}Su(t){const i=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new M3(r=>Ih.fi(r,i),this.serializer)}}class gm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cb.bind(null,this.syncEngine),await ab(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new lb}()}createDatastore(t){const i=Wh(t.databaseInfo.databaseId),r=function(u){return new Hw(u)}(t.databaseInfo);return function(u,f,m,y){return new Yw(u,f,m,y)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,u,f,m){return new $w(r,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,i=>m_(this.syncEngine,i,0),function(){return l_.C()?new l_:new Uw}())}createSyncEngine(t,i){return function(o,u,f,m,y,g,_){const T=new mb(o,u,f,m,y,g);return _&&(T.mu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(o){const u=It(o);pt(na,"RemoteStore shutting down."),u.da.add(5),await bu(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}gm.provider={build:()=>new gm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):vs("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="FirestoreClient";class Ib{constructor(t,i,r,o,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=Gv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{pt(dr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(pt(dr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=eg(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function I1(e,t){e.asyncQueue.verifyOperationInProgress(),pt(dr,"Initializing OfflineComponentProvider");const i=e.configuration;await t.initialize(i);let r=i.initialUser;e.setCredentialChangeListener(async o=>{r.isEqual(o)||(await V3(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function p_(e,t){e.asyncQueue.verifyOperationInProgress();const i=await Db(e);pt(dr,"Initializing OnlineComponentProvider"),await t.initialize(i,e.configuration),e.setCredentialChangeListener(r=>c_(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,o)=>c_(t.remoteStore,o)),e._onlineComponents=t}async function Db(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){pt(dr,"Using user provided OfflineComponentProvider");try{await I1(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(o){return o.name==="FirebaseError"?o.code===lt.FAILED_PRECONDITION||o.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;fo("Error using user provided cache. Falling back to memory cache: "+i),await I1(e,new Mh)}}else pt(dr,"Using default OfflineComponentProvider"),await I1(e,new xb(void 0));return e._offlineComponents}async function t4(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(pt(dr,"Using user provided OnlineComponentProvider"),await p_(e,e._uninitializedComponentsProvider._online)):(pt(dr,"Using default OnlineComponentProvider"),await p_(e,new gm))),e._onlineComponents}function Mb(e){return t4(e).then(t=>t.syncEngine)}async function pm(e){const t=await t4(e),i=t.eventManager;return i.onListen=gb.bind(null,t.syncEngine),i.onUnlisten=_b.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=pb.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=vb.bind(null,t.syncEngine),i}function Vb(e,t,i={}){const r=new ar;return e.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,g){const _=new W3({next:w=>{_.xu(),f.enqueueAndForget(()=>H3(u,T));const R=w.docs.has(m);!R&&w.fromCache?g.reject(new Et(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&w.fromCache&&y&&y.source==="server"?g.reject(new Et(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(w)},error:w=>g.reject(w)}),T=new G3(Yh(m.path),_,{includeMetadataChanges:!0,Qa:!0});return q3(u,T)}(await pm(e),e.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(e,t,i){if(!i)throw new Et(lt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Nb(e,t,i,r){if(t===!0&&r===!0)throw new Et(lt.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)}function __(e){if(!Tt.isDocumentKey(e))throw new Et(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function v_(e){if(Tt.isDocumentKey(e))throw new Et(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function rg(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":St(12329,{type:typeof e})}function ps(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Et(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=rg(e);throw new Et(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4="firestore.googleapis.com",E_=!0;class T_{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i4,this.ssl=E_}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:E_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=D3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<hw)throw new Et(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Nb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e4((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Et(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Et(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Et(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nf{constructor(t,i,r,o){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new z8;switch(r.type){case"firstParty":return new F8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=y_.get(i);r&&(pt("ComponentProvider","Removing Datastore"),y_.delete(i),r.terminate())}(this),Promise.resolve()}}function Ob(e,t,i,r={}){var o;e=ps(e,nf);const u=Om(t),f=e._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:e._getEmulatorOptions()}),y=`${t}:${i}`;u&&(mE(`https://${y}`),_E("Firestore",!0)),f.host!==i4&&f.host!==y&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},f),{host:y,ssl:u,emulatorOptions:r});if(!_h(g,m)&&(e._setSettings(g),r.mockUserToken)){let _,T;if(typeof r.mockUserToken=="string")_=r.mockUserToken,T=un.MOCK_USER;else{_=gE(r.mockUserToken,(o=e._app)===null||o===void 0?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Et(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new un(w)}e._authCredentials=new q8(new qv(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new sf(this.firestore,t,this._query)}}class An{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new An(this.firestore,t,this._key)}}class or extends sf{constructor(t,i,r){super(t,i,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new An(this.firestore,null,new Tt(t))}withConverter(t){return new or(this.firestore,t,this._path)}}function Lb(e,t,...i){if(e=ys(e),n4("collection","path",t),e instanceof nf){const r=me.fromString(t,...i);return v_(r),new or(e,null,r)}{if(!(e instanceof An||e instanceof or))throw new Et(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(me.fromString(t,...i));return v_(r),new or(e.firestore,null,r)}}function rf(e,t,...i){if(e=ys(e),arguments.length===1&&(t=Gv.newId()),n4("doc","path",t),e instanceof nf){const r=me.fromString(t,...i);return __(r),new An(e,null,new Tt(r))}{if(!(e instanceof An||e instanceof or))throw new Et(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(me.fromString(t,...i));return __(r),new An(e.firestore,e instanceof or?e.converter:null,new Tt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="AsyncQueue";class b_{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new O3(this,"async_queue_retry"),this.rc=()=>{const r=x1();r&&pt(w_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const i=x1();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const i=x1();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const i=new ar;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!Co(t))throw t;pt(w_,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const i=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,vs("INTERNAL UNHANDLED ERROR: ",S_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=i,i}enqueueAfterDelay(t,i,r){this.oc(),this.nc.indexOf(t)>-1&&(i=0);const o=tg.createAndSchedule(this,t,i,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&St(47125,{cc:S_(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const i of this.Zu)if(i.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.Zu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const i=this.Zu.indexOf(t);this.Zu.splice(i,1)}}function S_(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(e){return function(i,r){if(typeof i!="object"||i===null)return!1;const o=i;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(e,["next","error","complete"])}class vo extends nf{constructor(t,i,r,o){super(t,i,r,o),this.type="firestore",this._queue=new b_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new b_(t),this._firestoreClient=void 0,await t}}}function kb(e,t){const i=typeof e=="object"?e:x8(),r=typeof e=="string"?e:wh,o=b8(i,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=fE("firestore");u&&Ob(o,...u)}return o}function ag(e){if(e._terminated)throw new Et(lt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||jb(e),e._firestoreClient}function jb(e){var t,i,r;const o=e._freezeSettings(),u=function(m,y,g,_){return new aT(m,y,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,e4(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,o);e._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new Ib(e._authCredentials,e._appCheckCredentials,e._queue,u,e._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Eo(nn.fromBase64String(t))}catch(i){throw new Et(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Eo(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new Et(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new Et(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new Et(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return kt(this._lat,t._lat)||kt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=/^__.*__$/;class Ub{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new gr(t,this.data,this.fieldMask,i,this.fieldTransforms):new Tu(t,this.data,i,this.fieldTransforms)}}class s4{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new gr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function r4(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St(40011,{Ic:e})}}class cg{constructor(t,i,r,o,u,f){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new cg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Vc(t),o}mc(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Vh(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(r4(this.Ic)&&Pb.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class Bb{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Wh(t)}bc(t,i,r,o=!1){return new cg({Ic:t,methodName:i,wc:r,path:en.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function a4(e){const t=e._freezeSettings(),i=Wh(e._databaseId);return new Bb(e._databaseId,!!t.ignoreUndefinedProperties,i)}function zb(e,t,i,r,o,u={}){const f=e.bc(u.merge||u.mergeFields?2:0,t,i,o);hg("Data must be an object, but it was:",f,r);const m=o4(r,f);let y,g;if(u.merge)y=new Pn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const w=ym(t,T,i);if(!f.contains(w))throw new Et(lt.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);u4(_,w)||_.push(w)}y=new Pn(_),g=f.fieldTransforms.filter(T=>y.covers(T.field))}else y=null,g=f.fieldTransforms;return new Ub(new Cn(m),y,g)}class of extends og{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof of}}function qb(e,t,i,r){const o=e.bc(1,t,i);hg("Data must be an object, but it was:",o,r);const u=[],f=Cn.empty();mr(r,(y,g)=>{const _=fg(t,y,i);g=ys(g);const T=o.mc(_);if(g instanceof of)u.push(_);else{const w=lf(g,T);w!=null&&(u.push(_),f.set(_,w))}});const m=new Pn(u);return new s4(f,m,o.fieldTransforms)}function Hb(e,t,i,r,o,u){const f=e.bc(1,t,i),m=[ym(t,r,i)],y=[o];if(u.length%2!=0)throw new Et(lt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)m.push(ym(t,u[w])),y.push(u[w+1]);const g=[],_=Cn.empty();for(let w=m.length-1;w>=0;--w)if(!u4(g,m[w])){const R=m[w];let M=y[w];M=ys(M);const U=f.mc(R);if(M instanceof of)g.push(R);else{const N=lf(M,U);N!=null&&(g.push(R),_.set(R,N))}}const T=new Pn(g);return new s4(_,T,f.fieldTransforms)}function lf(e,t){if(l4(e=ys(e)))return hg("Unsupported field value:",t,e),o4(e,t);if(e instanceof og)return function(r,o){if(!r4(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let y=lf(m,o.fc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(e,t)}return function(r,o){if((r=ys(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DT(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Ue.fromDate(r);return{timestampValue:xh(o.serializer,u)}}if(r instanceof Ue){const u=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xh(o.serializer,u)}}if(r instanceof lg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Eo)return{bytesValue:b3(o.serializer,r._byteString)};if(r instanceof An){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Fm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ug)return function(f,m){return{mapValue:{fields:{[Jv]:{stringValue:Wv},[bh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return qm(m.serializer,g)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${rg(r)}`)}(e,t)}function o4(e,t){const i={};return Qv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mr(e,(r,o)=>{const u=lf(o,t.Ac(r));u!=null&&(i[r]=u)}),{mapValue:{fields:i}}}function l4(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ue||e instanceof lg||e instanceof Eo||e instanceof An||e instanceof og||e instanceof ug)}function hg(e,t,i){if(!l4(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const r=rg(i);throw r==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function ym(e,t,i){if((t=ys(t))instanceof af)return t._internalPath;if(typeof t=="string")return fg(e,t);throw Vh("Field path arguments must be of type string or ",e,!1,void 0,i)}const Gb=new RegExp("[~\\*/\\[\\]]");function fg(e,t,i){if(t.search(Gb)>=0)throw Vh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new af(...t.split("."))._internalPath}catch{throw Vh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function Vh(e,t,i,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new Et(lt.INVALID_ARGUMENT,m+e+y)}function u4(e,t){return e.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(t,i,r,o,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Fb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(h4("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Fb extends c4{data(){return super.data()}}function h4(e,t){return typeof t=="string"?fg(e,t):t instanceof af?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Et(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yb{convertValue(t,i="none"){switch(hr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Se(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(cr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw St(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return mr(t,(o,u)=>{r[o]=this.convertValue(u,i)}),r}convertVectorValue(t){var i,r,o;const u=(o=(r=(i=t.fields)===null||i===void 0?void 0:i[bh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>Se(f.doubleValue));return new ug(u)}convertGeoPoint(t){return new lg(Se(t.latitude),Se(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Fh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(cu(t));default:return null}}convertTimestamp(t){const i=ur(t);return new Ue(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=me.fromString(t);Zt(I3(r),9688,{name:t});const o=new hu(r.get(1),r.get(3)),u=new Tt(r.popFirst(5));return o.isEqual(i)||vs(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(e,t,i){let r;return r=e?e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class f4 extends c4{constructor(t,i,r,o,u,f){super(t,i,r,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(h4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}}class hh extends f4{data(t={}){return super.data(t)}}class $b{constructor(t,i,r,o){this._firestore=t,this._userDataWriter=i,this._snapshot=o,this.metadata=new Hl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new hh(this._firestore,this._userDataWriter,r.key,r,new Hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Et(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Hl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),_=f.indexOf(m.doc.key)),{type:Xb(m.type),doc:y,oldIndex:g,newIndex:_}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function Xb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(e){e=ps(e,An);const t=ps(e.firestore,vo);return Vb(ag(t),e._key).then(i=>g4(t,e,i))}class d4 extends Yb{constructor(t){super(),this.firestore=t}convertBytes(t){return new Eo(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new An(this.firestore,null,i)}}function Jb(e,t,i,...r){e=ps(e,An);const o=ps(e.firestore,vo),u=a4(o);let f;return f=typeof(t=ys(t))=="string"||t instanceof af?Hb(u,"updateDoc",e._key,t,i,r):qb(u,"updateDoc",e._key,t),m4(o,[f.toMutation(e._key,ki.exists(!0))])}function Wb(e,t){const i=ps(e.firestore,vo),r=rf(e),o=Kb(e.converter,t);return m4(i,[zb(a4(e.firestore),"addDoc",r._key,o,e.converter!==null,{}).toMutation(r._key,ki.exists(!1))]).then(()=>r)}function tS(e,...t){var i,r,o;e=ys(e);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof t[f]!="object"||C_(t[f])||(u=t[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(C_(t[f])){const T=t[f];t[f]=(i=T.next)===null||i===void 0?void 0:i.bind(T),t[f+1]=(r=T.error)===null||r===void 0?void 0:r.bind(T),t[f+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let y,g,_;if(e instanceof An)g=ps(e.firestore,vo),_=Yh(e._key.path),y={next:T=>{t[f]&&t[f](g4(g,e,T))},error:t[f+1],complete:t[f+2]};else{const T=ps(e,sf);g=ps(T.firestore,vo),_=T._query;const w=new d4(g);y={next:R=>{t[f]&&t[f](new $b(g,w,T,R))},error:t[f+1],complete:t[f+2]},Qb(e._query)}return function(w,R,M,U){const N=new W3(U),H=new G3(R,N,M);return w.asyncQueue.enqueueAndForget(async()=>q3(await pm(w),H)),()=>{N.xu(),w.asyncQueue.enqueueAndForget(async()=>H3(await pm(w),H))}}(ag(g),_,m,y)}function m4(e,t){return function(r,o){const u=new ar;return r.asyncQueue.enqueueAndForget(async()=>Eb(await Mb(r),o,u)),u.promise}(ag(e),t)}function g4(e,t,i){const r=i.docs.get(t._key),o=new d4(e);return new f4(e,o,t._key,r,new Hl(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(o){bo=o})(R8),Eh(new ou("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new vo(new H8(r.getProvider("auth-internal")),new Q8(f,r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Et(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(g.options.projectId,_)}(f,o),f);return u=Object.assign({useFetchStreams:i},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),lo(Iy,Dy,t),lo(Iy,Dy,"esm2017")})();const eS={apiKey:"AIzaSyA1YHZuK7xQzrGf2sVPo8Qax__FqLaFg_g",authDomain:"boop-chat.firebaseapp.com",projectId:"boop-chat",storageBucket:"boop-chat.firebasestorage.app",messagingSenderId:"86390385381",appId:"1:86390385381:web:899e240ed5dedab2a8c20c",measurementId:"G-R49YGVYMFQ"},nS=Vv(eS),uf=kb(nS),iS=async e=>(await Wb(Lb(uf,"sessions"),e)).id,sS=async e=>{const t=await Zb(rf(uf,"sessions",e));return t.exists()?(console.log("The data has been found at Firestore!"),t.data()):(console.log("The data doesn't exist at Firestore!"),null)},rS=async(e,t)=>{Jb(rf(uf,"sessions",e),t)},aS=async(e,t,i)=>{const r=rf(uf,"sessions",e),o=tS(r,async u=>{var m;if(!u.exists())return;const f=u.data();f.receiverDescription&&((m=f.receiverCandidates)==null?void 0:m.length)>0&&(console.log("Receiver info available:",f),i.current=f.receiverName,t(f),o())});return o},A_=async(e,t,i,r,o,u,f,m,y)=>{console.log(t.current),t.current.onicecandidate=_=>{_.candidate?(console.log("Ice candidate found! Candidate = ",_.candidate),console.log(u.current),u.current.push(_.candidate.toJSON())):(console.log("The ice gathering state might have been completed by this time!"),console.log("State = ",t.current.iceGatheringState))},t.current.onicecandidateerror=_=>{console.warn("ICE candidate error:",_.errorCode,_.port,_.url)};const g=t.current.getConfiguration();if(console.log("ICE servers configured on this PC:",g.iceServers),e==="sender"){t.current.addTransceiver("video",{direction:"sendrecv"}),t.current.addTransceiver("audio",{direction:"sendrecv"}),i.current=t.current.createDataChannel("chat"),r.current=t.current.createDataChannel("image"),o.current=t.current.createDataChannel("video"),i.current.onopen=()=>{console.log("The data channel has been established!"),f(!0)},r.current.onopen=()=>{console.log("The image channel has been established!")},o.current.onopen=()=>{console.log("The video channel has been established!")};let _=await t.current.createOffer();console.log("The offer has been created!"),await t.current.setLocalDescription(_),console.log("The local description has been added!")}else{console.log(t.current);let _=await sS(y);if(!_)return null;m.current=_.senderName,await oS(t,_),console.log("The state of the peer connection = ",t.current.iceGatheringState)}console.log("The initial setup of the connection has been established.")},oS=async(e,t)=>{console.log(t.senderDescription),await e.current.setRemoteDescription(t.senderDescription),console.log("The remote description has been added!"),e.current.getTransceivers().forEach(o=>{o.direction="sendrecv"});let r=await e.current.createAnswer();console.log("The answer has been created!"),await e.current.setLocalDescription(r),console.log("The local description has been added!");for(const o of t.senderCandidates)try{await e.current.addIceCandidate(o)}catch(u){console.error("Error adding ICE candidate:",u)}};async function lS(e,t,i,r){console.log("Starting the createLink function! At the beginning of the function, the state = ",e.iceGatheringState),console.log("The iceCandidate object looks like this: ",t.current);let o=await iS({senderName:i,senderDescription:{type:e.current.localDescription.type,sdp:e.current.localDescription.sdp},senderCandidates:t.current,receiverName:"",receiverDescription:"",receiverCandidates:""});return console.log("The session has been added to Firebase by the sender! Now, waiting for the receiver!"),aS(o,async u=>{await e.current.setRemoteDescription(new RTCSessionDescription(u.receiverDescription));for(const f of u.receiverCandidates)await e.current.addIceCandidate(new RTCIceCandidate(f))},r),o}async function uS(e,t,i,r){return console.log("After the waiting, the state = ",e.current.iceGatheringState),await rS(r,{receiverName:i,receiverDescription:{type:e.current.localDescription.type,sdp:e.current.localDescription.sdp},receiverCandidates:t.current}),"success"}const cS=new URLSearchParams(window.location.search),Xs=cS.get("link"),hS=()=>{const{peerConnection:e,iceCandidates:t,dataChannel:i,imageChannel:r,videoChannel:o,peerName:u,setConnected:f}=X.useContext(Rn),{showNotification:m}=Eu(),[y,g]=X.useState(!1),_=X.useRef(null);function T(R){R.preventDefault(),navigator.clipboard.writeText(R.target.elements.link.value),m("The link has been copied!")}const w=async R=>{if(R.preventDefault(),g(!0),Xs){let M=await uS(e,t,_.current.value,Xs);console.log(M),M?M=="success"&&(e.current.ondatachannel=U=>{U.channel.label==="chat"&&(i.current=U.channel,console.log("The data channel has been established!"),f(!0)),U.channel.label==="image"&&(r.current=U.channel,console.log("The image channel has been established!")),U.channel.label==="video"&&(o.current=U.channel,console.log("The video channel has been established!"))}):alert("The link you gave doesn't exist.")}else{let M=await lS(e,t,_.current.value,u);_.current.value=`https://www.mukesharyal.com.np/boop?link=${M}`,_.current.disabled=!0,navigator.clipboard.writeText(_.current.value),m("The link has been copied!")}};return X.useEffect(()=>{A_(Xs?"receiver":"sender",e,i,r,o,t,f,u,Xs)},[]),S.jsxs(S.Fragment,{children:[S.jsx(X7,{}),S.jsx("main",{className:Pl.mainContainer,children:S.jsx("section",{className:Pl.inputCard,children:y?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:Pl.loaderWrapper,children:S.jsx("div",{className:Pl.loader})}),S.jsx("h1",{children:Xs?"Joining the chat":"Waiting for other person to join"}),!Xs&&S.jsxs("form",{onSubmit:T,children:[S.jsx("input",{autoFocus:!0,spellCheck:!1,autoComplete:"off",name:"link",ref:_,title:"Copy this link",className:Pl.linkInput}),S.jsx("br",{}),S.jsx("button",{name:"copyLinkButton",children:"Copy Link"})]})]}):S.jsxs(S.Fragment,{children:[S.jsxs("h1",{children:["Welcome to Boop.",S.jsx("br",{}),"Let's Get Started!"]}),S.jsxs("form",{onSubmit:w,children:[S.jsx("input",{name:"name",required:!0,minLength:2,maxLength:20,autoComplete:"off",type:"text",spellCheck:!1,placeholder:"Your Name",title:"Enter your name",id:"name",ref:_}),S.jsx("br",{}),Xs?S.jsx("button",{type:"submit",children:"Join Chat"}):S.jsx("button",{type:"submit",children:"Create Link"})]})]})})})]})},fS="_chatPage_14qlb_1",dS="_videoContainer_14qlb_7",mS="_settingsContainer_14qlb_13",gS="_chatContainer_14qlb_22",Jc={chatPage:fS,videoContainer:dS,settingsContainer:mS,chatContainer:gS},pS="_actionList_19djp_1",D1={actionList:pS};function yS(){const e=Ce.c(26);console.log("Actions List rendered!");const{dataChannel:t}=X.useContext(Rn),{selectedMessage:i}=X.useContext(ei),r=xt(vS),o=xt(_S),{showNotification:u}=Eu();let f;e[0]!==i.current.content||e[1]!==i.current.type||e[2]!==u?(f=()=>{i.current.type==="text"?(navigator.clipboard.writeText(i.current.content),u("The message has been copied!")):u("This message cannot be copied!")},e[0]=i.current.content,e[1]=i.current.type,e[2]=u,e[3]=f):f=e[3];const m=f;let y;e[4]!==i.current||e[5]!==r?(y=()=>{r(i.current)},e[4]=i.current,e[5]=r,e[6]=y):y=e[6];const g=y;let _;e[7]!==t||e[8]!==o||e[9]!==i.current.receivedId||e[10]!==i.current.sentId?(_=()=>{if(i.current.sentId===null)o(i.current.sentId,i.current.receivedId);else{const tt={type:"delete",sentId:i.current.sentId};t.current.send(JSON.stringify(tt))}},e[7]=t,e[8]=o,e[9]=i.current.receivedId,e[10]=i.current.sentId,e[11]=_):_=e[11];const T=_,w=`${D1.actionList} ${i.current.sentId===null?D1.received:D1.sent}`;let R;e[12]===Symbol.for("react.memo_cache_sentinel")?(R=S.jsxs("svg",{fill:"#000000",width:"2rem",height:"2rem",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("title",{children:"reply"}),S.jsx("path",{d:"M3.488 15.136q0 0.96 0.8 1.472l10.72 7.136q0.416 0.288 0.896 0.32t0.928-0.224 0.704-0.672 0.256-0.896v-3.584q3.456 0 6.208 1.984t3.872 5.152q0.64-1.792 0.64-3.552 0-2.912-1.44-5.376t-3.904-3.904-5.376-1.44v-3.584q0-0.48-0.256-0.896t-0.704-0.672-0.928-0.224-0.896 0.32l-10.72 7.136q-0.8 0.512-0.8 1.504z"})]}),e[12]=R):R=e[12];let M;e[13]!==g?(M=S.jsxs("li",{onClick:g,children:[R,"Reply"]}),e[13]=g,e[14]=M):M=e[14];let U;e[15]===Symbol.for("react.memo_cache_sentinel")?(U=S.jsxs("svg",{width:"2rem",height:"2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z",fill:"#292D32"}),S.jsx("path",{d:"M17.0998 2H12.8998C9.81668 2 8.37074 3.09409 8.06951 5.73901C8.00649 6.29235 8.46476 6.75 9.02167 6.75H11.0998C15.2998 6.75 17.2498 8.7 17.2498 12.9V14.9781C17.2498 15.535 17.7074 15.9933 18.2608 15.9303C20.9057 15.629 21.9998 14.1831 21.9998 11.1V6.9C21.9998 3.4 20.5998 2 17.0998 2Z",fill:"#292D32"})]}),e[15]=U):U=e[15];let N;e[16]!==m?(N=S.jsxs("li",{onClick:m,children:[U,"Copy"]}),e[16]=m,e[17]=N):N=e[17];let H;e[18]===Symbol.for("react.memo_cache_sentinel")?(H=S.jsx("svg",{width:"2rem",height:"2rem",viewBox:"-0.5 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"out",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:S.jsx("path",{d:"M4.91666667,14.8888889 C4.91666667,15.3571429 5.60416667,16 6.0625,16 L12.9375,16 C13.3958333,16 14.0833333,15.3571429 14.0833333,14.8888889 L14.0833333,6 L4.91666667,6 L4.91666667,14.8888889 L4.91666667,14.8888889 L4.91666667,14.8888889 Z M15,3.46500003 L12.5555556,3.46500003 L11.3333333,2 L7.66666667,2 L6.44444444,3.46500003 L4,3.46500003 L4,4.93000007 L15,4.93000007 L15,3.46500003 L15,3.46500003 L15,3.46500003 Z",id:"path",fill:"#000000","sketch:type":"MSShapeGroup"})})}),e[18]=H):H=e[18];let F;e[19]!==T?(F=S.jsxs("li",{onClick:T,children:[H,"Delete"]}),e[19]=T,e[20]=F):F=e[20];let K;return e[21]!==w||e[22]!==M||e[23]!==N||e[24]!==F?(K=S.jsxs("ul",{className:w,children:[M,N,F]}),e[21]=w,e[22]=M,e[23]=N,e[24]=F,e[25]=K):K=e[25],K}function _S(e){return e.removeMessage}function vS(e){return e.setReplying}const ES="_reactionList_1s4ks_1",TS="_selectedReaction_1s4ks_35",R_={reactionList:ES,selectedReaction:TS},wS=["","","","","",""];function bS(){const e=Ce.c(12);console.log("Reactions list rendered!");const{dataChannel:t}=X.useContext(Rn),{selectedMessage:i,pointerPosition:r}=X.useContext(ei);let o=r.current.y-80,u=r.current.x-110;o<0&&(o=10),u<0&&(u=10);let f;e[0]!==t||e[1]!==i?(f=T=>{T===i.current.reaction&&(T=-1);const R={type:"reaction",id:i.current.receivedId,reaction:T};t.current.send(JSON.stringify(R))},e[0]=t,e[1]=i,e[2]=f):f=e[2];const m=f;let y;e[3]!==u||e[4]!==o?(y={top:o,left:u},e[3]=u,e[4]=o,e[5]=y):y=e[5];let g;e[6]!==i||e[7]!==m?(g=wS.map((T,w)=>S.jsx("li",{onClick:()=>{m(w)},className:i.current.reaction===w?R_.selectedReaction:"",children:T},w)),e[6]=i,e[7]=m,e[8]=g):g=e[8];let _;return e[9]!==y||e[10]!==g?(_=S.jsx("ul",{className:R_.reactionList,style:y,children:g}),e[9]=y,e[10]=g,e[11]=_):_=e[11],_}const SS="_actionsContainer_xyqd3_26",M1={actionsContainer:SS};function CS(e){const t=Ce.c(24),{imageSource:i,imageAlt:r,imageSent:o}=e,u=r===void 0?"Image":r;console.log("Image dialog rendered!");const f=xt(AS),m=X.useRef(null);let y;t[0]!==f?(y=()=>{f(!1),window.history.state==="image"&&window.history.back()},t[0]=f,t[1]=y):y=t[1];const g=y;let _;t[2]!==i?(_=()=>{window.open(i,"_blank")},t[2]=i,t[3]=_):_=t[3];const T=_;let w;t[4]!==g||t[5]!==f?(w=()=>{window.history.pushState("image","",null);const Q=m.current;if(!Q)return;const D=A=>{A.target===Q&&f(null)};return Q.addEventListener("click",D),window.addEventListener("popstate",g),()=>{Q.removeEventListener("click",D),window.removeEventListener("popstate",g)}},t[4]=g,t[5]=f,t[6]=w):w=t[6];let R;t[7]===Symbol.for("react.memo_cache_sentinel")?(R=[],t[7]=R):R=t[7],X.useEffect(w,R);const M=o?M1.sent:M1.received;let U;t[8]===Symbol.for("react.memo_cache_sentinel")?(U=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})}),t[8]=U):U=t[8];let N;t[9]!==g?(N=S.jsx("button",{onClick:g,children:U}),t[9]=g,t[10]=N):N=t[10];let H;t[11]===Symbol.for("react.memo_cache_sentinel")?(H=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.163 2.819C9 3.139 9 3.559 9 4.4V11H7.803c-.883 0-1.325 0-1.534.176a.75.75 0 0 0-.266.62c.017.274.322.593.931 1.232l4.198 4.401c.302.318.453.476.63.535a.749.749 0 0 0 .476 0c.177-.059.328-.217.63-.535l4.198-4.4c.61-.64.914-.96.93-1.233a.75.75 0 0 0-.265-.62C17.522 11 17.081 11 16.197 11H15V4.4c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656C13.861 2 13.441 2 12.6 2h-1.2c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656zM5 21a1 1 0 0 0 1 1h12a1 1 0 1 0 0-2H6a1 1 0 0 0-1 1z",fill:"#000000"})}),t[11]=H):H=t[11];let F;t[12]!==T?(F=S.jsx("button",{onClick:T,children:H}),t[12]=T,t[13]=F):F=t[13];let K;t[14]!==F||t[15]!==N?(K=S.jsxs("div",{className:M1.actionsContainer,children:[N,F]}),t[14]=F,t[15]=N,t[16]=K):K=t[16];let tt;t[17]!==u||t[18]!==i?(tt=S.jsx("img",{src:i,alt:u}),t[17]=u,t[18]=i,t[19]=tt):tt=t[19];let W;return t[20]!==K||t[21]!==tt||t[22]!==M?(W=S.jsxs("dialog",{ref:m,className:M,children:[K,tt]}),t[20]=K,t[21]=tt,t[22]=M,t[23]=W):W=t[23],W}function AS(e){return e.setImageDialog}const RS="_navContainer_as0vj_1",xS="_profileContainer_as0vj_12",IS="_actionsContainer_as0vj_26",to={navContainer:RS,profileContainer:xS,actionsContainer:IS};function DS(){const e=Ce.c(21);console.log("Chat header rendered!");const{peerName:t}=X.useContext(Rn),i=xt(NS),r=xt(VS),o=xt(MS),u=X.useRef(null);let f;e[0]!==r?(f=()=>{r("idle")},e[0]=r,e[1]=f):f=e[1];const m=f;let y;e[2]!==o?(y=()=>{window.innerWidth>1400||o(!0)},e[2]=o,e[3]=y):y=e[3];const g=y;let _,T;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{window.visualViewport&&window.visualViewport.addEventListener("scroll",()=>{u.current.style.top=`${window.visualViewport.offsetTop}px`})},T=[],e[4]=_,e[5]=T):(_=e[4],T=e[5]),X.useEffect(_,T);let w;e[6]===Symbol.for("react.memo_cache_sentinel")?(w=S.jsx("img",{src:"./pp.svg",width:32,height:32,className:to.profileImage}),e[6]=w):w=e[6];const R=t.current?t.current:"Receiver";let M;e[7]!==R?(M=S.jsxs("div",{className:to.profileContainer,children:[w,S.jsx("p",{children:R})]}),e[7]=R,e[8]=M):M=e[8];let U;e[9]!==m||e[10]!==i?(U=i==="hidden"&&S.jsx("button",{className:to.videoCallButton,onClick:m,children:S.jsx("svg",{width:"1.25rem",height:"1.25rem",viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})})}),e[9]=m,e[10]=i,e[11]=U):U=e[11];let N;e[12]===Symbol.for("react.memo_cache_sentinel")?(N=S.jsx("svg",{width:"1.25rem",height:"1.25rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2788 2.15224C13.9085 2 13.439 2 12.5 2C11.561 2 11.0915 2 10.7212 2.15224C10.2274 2.35523 9.83509 2.74458 9.63056 3.23463C9.53719 3.45834 9.50065 3.7185 9.48635 4.09799C9.46534 4.65568 9.17716 5.17189 8.69017 5.45093C8.20318 5.72996 7.60864 5.71954 7.11149 5.45876C6.77318 5.2813 6.52789 5.18262 6.28599 5.15102C5.75609 5.08178 5.22018 5.22429 4.79616 5.5472C4.47814 5.78938 4.24339 6.1929 3.7739 6.99993C3.30441 7.80697 3.06967 8.21048 3.01735 8.60491C2.94758 9.1308 3.09118 9.66266 3.41655 10.0835C3.56506 10.2756 3.77377 10.437 4.0977 10.639C4.57391 10.936 4.88032 11.4419 4.88029 12C4.88026 12.5581 4.57386 13.0639 4.0977 13.3608C3.77372 13.5629 3.56497 13.7244 3.41645 13.9165C3.09108 14.3373 2.94749 14.8691 3.01725 15.395C3.06957 15.7894 3.30432 16.193 3.7738 17C4.24329 17.807 4.47804 18.2106 4.79606 18.4527C5.22008 18.7756 5.75599 18.9181 6.28589 18.8489C6.52778 18.8173 6.77305 18.7186 7.11133 18.5412C7.60852 18.2804 8.2031 18.27 8.69012 18.549C9.17714 18.8281 9.46533 19.3443 9.48635 19.9021C9.50065 20.2815 9.53719 20.5417 9.63056 20.7654C9.83509 21.2554 10.2274 21.6448 10.7212 21.8478C11.0915 22 11.561 22 12.5 22C13.439 22 13.9085 22 14.2788 21.8478C14.7726 21.6448 15.1649 21.2554 15.3694 20.7654C15.4628 20.5417 15.4994 20.2815 15.5137 19.902C15.5347 19.3443 15.8228 18.8281 16.3098 18.549C16.7968 18.2699 17.3914 18.2804 17.8886 18.5412C18.2269 18.7186 18.4721 18.8172 18.714 18.8488C19.2439 18.9181 19.7798 18.7756 20.2038 18.4527C20.5219 18.2105 20.7566 17.807 21.2261 16.9999C21.6956 16.1929 21.9303 15.7894 21.9827 15.395C22.0524 14.8691 21.9088 14.3372 21.5835 13.9164C21.4349 13.7243 21.2262 13.5628 20.9022 13.3608C20.4261 13.0639 20.1197 12.558 20.1197 11.9999C20.1197 11.4418 20.4261 10.9361 20.9022 10.6392C21.2263 10.4371 21.435 10.2757 21.5836 10.0835C21.9089 9.66273 22.0525 9.13087 21.9828 8.60497C21.9304 8.21055 21.6957 7.80703 21.2262 7C20.7567 6.19297 20.522 5.78945 20.2039 5.54727C19.7799 5.22436 19.244 5.08185 18.7141 5.15109C18.4722 5.18269 18.2269 5.28136 17.8887 5.4588C17.3915 5.71959 16.7969 5.73002 16.3099 5.45096C15.8229 5.17191 15.5347 4.65566 15.5136 4.09794C15.4993 3.71848 15.4628 3.45833 15.3694 3.23463C15.1649 2.74458 14.7726 2.35523 14.2788 2.15224ZM12.5 15C14.1695 15 15.5228 13.6569 15.5228 12C15.5228 10.3431 14.1695 9 12.5 9C10.8305 9 9.47716 10.3431 9.47716 12C9.47716 13.6569 10.8305 15 12.5 15Z",fill:"#1C274C"})}),e[12]=N):N=e[12];let H;e[13]!==g?(H=S.jsx("button",{className:to.settingsButton,onClick:g,children:N}),e[13]=g,e[14]=H):H=e[14];let F;e[15]!==U||e[16]!==H?(F=S.jsxs("ul",{className:to.actionsContainer,children:[U,H]}),e[15]=U,e[16]=H,e[17]=F):F=e[17];let K;return e[18]!==F||e[19]!==M?(K=S.jsxs("nav",{"aria-label":"Main Navigation",className:to.navContainer,ref:u,children:[M,F]}),e[18]=F,e[19]=M,e[20]=K):K=e[20],K}function MS(e){return e.setSettings}function VS(e){return e.setVideoCall}function NS(e){return e.videoCall}const OS="_chatContainer_intrd_1",LS="_chatBottom_intrd_18",x_={chatContainer:OS,chatBottom:LS},kS="_textMessage_qznyh_1",jS="_sentMessage_qznyh_31",PS="_receivedMessage_qznyh_36",US="_sending_qznyh_41",BS="_sent_qznyh_31",zS="_deletedMessage_qznyh_49",qS="_topMessage_qznyh_55",HS="_bottomMessage_qznyh_60",GS="_repliedMessage_qznyh_73",FS="_hasImage_qznyh_78",QS="_hasReaction_qznyh_84",YS="_emoji_qznyh_88",KS="_optionsButton_qznyh_98",kn={textMessage:kS,sentMessage:jS,receivedMessage:PS,sending:US,sent:BS,deletedMessage:zS,topMessage:qS,bottomMessage:HS,repliedMessage:GS,hasImage:FS,hasReaction:QS,emoji:YS,optionsButton:KS},$S="_reaction_mi0kw_1",XS="_sentReaction_mi0kw_14",ZS="_receivedReaction_mi0kw_18",V1={reaction:$S,sentReaction:XS,receivedReaction:ZS},JS=["","","","","",""];function WS(e){const t=Ce.c(8),{reaction:i,origin:r}=e,[o,u]=ia(tC);let f;t[0]!==u?(f=()=>{u.start({from:{scale:0},to:{scale:1},config:{tension:300,friction:15}})},t[0]=u,t[1]=f):f=t[1];let m;t[2]!==i?(m=[i],t[2]=i,t[3]=m):m=t[3],X.useEffect(f,m);let y;return t[4]!==r||t[5]!==i||t[6]!==o?(y=i!==-1?S.jsx(gs.div,{className:`${V1.reaction} ${r==="sent"?V1.sentReaction:V1.receivedReaction}`,style:{...o},children:JS[i]}):S.jsx(S.Fragment,{}),t[4]=r,t[5]=i,t[6]=o,t[7]=y):y=t[7],y}function tC(){return{scale:1}}const eC="_requestDiv_1axuz_1",nC="_decisionBox_1axuz_9",iC="_loading_1axuz_35",N1={requestDiv:eC,decisionBox:nC,loading:iC};function sC(e){const t=Ce.c(16),{sentId:i,receivedId:r}=e;console.log("Image request rendered!");const{dataChannel:o,peerName:u}=X.useContext(Rn),f=xt(rC),{receivingImage:m}=X.useContext(ei),{showNotification:y}=Eu(),[g,_]=X.useState(!1);let T;t[0]!==o.current||t[1]!==r||t[2]!==m.current||t[3]!==i||t[4]!==y?(T=()=>{m.current===null?(o.current.send(JSON.stringify({type:"imageAccept",sentId:r,receivedId:i})),_(!0)):y("Please wait for a while!")},t[0]=o.current,t[1]=r,t[2]=m.current,t[3]=i,t[4]=y,t[5]=T):T=t[5];const w=T;let R;t[6]!==o.current||t[7]!==r||t[8]!==f||t[9]!==i?(R=()=>{o.current.send(JSON.stringify({type:"imageReject",sentId:r,receivedId:i})),f(i,r)},t[6]=o.current,t[7]=r,t[8]=f,t[9]=i,t[10]=R):R=t[10];const M=R;let U;return t[11]!==w||t[12]!==g||t[13]!==u||t[14]!==M?(U=g?S.jsxs("div",{className:N1.loading,children:[S.jsx("span",{children:"L"}),S.jsx("span",{children:"o"}),S.jsx("span",{children:"a"}),S.jsx("span",{children:"d"}),S.jsx("span",{children:"i"}),S.jsx("span",{children:"n"}),S.jsx("span",{children:"g"}),S.jsx("span",{children:""}),S.jsx("span",{children:"i"}),S.jsx("span",{children:"m"}),S.jsx("span",{children:"a"}),S.jsx("span",{children:"g"}),S.jsx("span",{children:"e"})]}):S.jsxs("div",{className:N1.requestDiv,children:[S.jsxs("div",{children:[u.current," wants to send you an image"]}),S.jsxs("div",{className:N1.decisionBox,children:[S.jsx("button",{onClick:w,children:"Accept"}),S.jsx("button",{onClick:M,children:"Reject"})]})]}),t[11]=w,t[12]=g,t[13]=u,t[14]=M,t[15]=U):U=t[15],U}function rC(e){return e.removeMessage}const aC="_wrapperContainer_1jaxu_1",oC="_show_1jaxu_13",O1={wrapperContainer:aC,show:oC};function dg({imageData:e,imageSource:t,imageAlt:i="Image",backgroundColor:r,clickHandler:o}){const[u,f]=X.useState(!1),m={[`data-${e==null?void 0:e.label}`]:e==null?void 0:e.value};return S.jsx("div",{style:{backgroundColor:u?"transparent":r},className:`${O1.wrapperContainer} ${u?O1.stopAnimation:""}`,children:S.jsx("img",{onClick:o,...m,className:u?O1.show:"",onLoad:()=>{f(!0)},src:t,alt:i})})}const p4=X.memo(({message:e,prevMessageSentId:t,prevMessageReceivedId:i,prevMessageReaction:r,nextMessageSentId:o,nextMessageReceivedId:u,nextMessageReplyTo:f})=>{const{dataChannel:m}=X.useContext(Rn),y=xt(st=>st.setReplying),g=xt(st=>st.setActionsShown),_=xt(st=>st.setReactionsShown),T=xt(st=>st.setImageDialog),{chatBottom:w,pointerPosition:R,selectedMessage:M,longPressed:U,atBottomRef:N}=X.useContext(ei),{sentId:H,receivedId:F,type:K,status:tt,content:W,reaction:Q,deleted:D,highlight:A,replyTo:x}=e;console.log("Rendering message ",e);const k=()=>{T({src:W,sent:F===null})},L={text:()=>S.jsx("p",{children:W}),image:()=>S.jsx(dg,{imageSource:W,backgroundColor:F===null?"#FFD1B3":"#B3E0FF",clickHandler:k}),imageRequest:()=>S.jsx(sC,{sentId:H,receivedId:F})},[P,I]=ia(()=>({scale:1,x:0})),Dt=X.useRef(null),Mt=X.useRef(!1),Z=X.useRef(!0),ut=X.useRef(0),mt=X.useRef(null);X.useEffect(()=>{N.current&&(w.current.scrollIntoView({behavior:"smooth"}),N.current=!1),I.start({from:{scale:0,opacity:0},to:[{scale:1,opacity:1}],reset:!0,config:B1.stiff})},[]),X.useEffect(()=>{if(Z.current){Z.current=!1;return}(async()=>(mt.current.scrollIntoView({behavior:"instant"}),await new Promise(st=>setTimeout(st,100)),I.start({from:{scale:1},to:[{scale:1.2},{scale:1}],reset:!0,config:B1.stiff})))()},[A]);const At=()=>{if(H===null&&Q!==1){let st={type:"reaction",id:F,reaction:1};m.current.send(JSON.stringify(st))}},O=D7({onPointerDown:({event:st})=>{Mt.current=!1,Dt.current=setTimeout(()=>{Mt.current||(R.current.x=st.clientX,R.current.y=st.clientY,U.current=!0,I.start({from:{scale:1},to:[{scale:1.1},{scale:1}],reset:!0,config:{duration:150},onRest:()=>{g(!0),y(null),H===null&&_(!0),M.current=e}}))},500)},onPointerUp:()=>{setTimeout(()=>{U.current=!1},100),clearTimeout(Dt.current);const st=Date.now();st-ut.current<500?(At(),ut.current=0):ut.current=st},onPointerLeave:()=>{clearTimeout(Dt.current)},onDrag:({last:st,movement:[at]})=>{if(H===null){if(at<0)return}else if(at>0)return;if(Math.abs(at)<5){I.set({x:0});return}Mt.current=!0,Mt.current&&Dt.current&&(clearTimeout(Dt.current),Dt.current=null),st?I.start({x:0,config:{tension:500,friction:20},onRest:()=>{Math.abs(at)>60&&(M.current=e,y(M.current),g(!1),_(!1))}}):I.start({x:at,config:{tension:500,friction:20},immediate:!0})}},{eventOptions:{passive:!1}}),nt=st=>{st.stopPropagation(),!(D===2||K==="imageRequest"||tt==="sending")&&(M.current=e,g(!0),F!==null&&(R.current.x=st.clientX-mt.current.clientWidth/2-36,R.current.y=st.clientY,_(!0)))};return S.jsxs(gs.div,{ref:mt,...D!==0||K==="imageRequest"||tt==="sending"?{}:O(),style:{...P},className:`
        ${kn.textMessage}
        ${tt==="sending"?kn.sending:kn.sent}
        ${F===null?kn.sentMessage:kn.receivedMessage}
        ${(o===H||u===F)&&e.reaction===-1&&!f?kn.topMessage:""}
        ${(t===H||i===F)&&!r?kn.bottomMessage:""}
        ${x?kn.repliedMessage:""}
        ${D===2?kn.deletedMessage:""}
        ${Q!==-1&&D!==2?kn.hasReaction:""}
        ${K==="image"?kn.hasImage:""}
        ${B7(W)?kn.emoji:""}
      `,children:[(L[K]||(()=>S.jsx("p",{children:S.jsx("span",{children:"Unknown type"})})))(),D!==2&&S.jsx(WS,{reaction:Q,origin:H===null?"received":"sent"}),S.jsx("button",{onClick:()=>{nt(event)},className:kn.optionsButton,children:S.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M0 0h48v48H0z",fill:"none"}),S.jsxs("g",{children:[S.jsx("circle",{cx:"24",cy:"24",r:"5"}),S.jsx("circle",{cx:"24",cy:"11",r:"5"}),S.jsx("circle",{cx:"24",cy:"37",r:"5"})]})]})})]})}),lC="_replyToMessage_1f615_1",uC="_sentMessage_1f615_20",cC="_receivedMessage_1f615_25",Wc={replyToMessage:lC,sentMessage:uC,receivedMessage:cC};function hC(e){const t=Ce.c(18),{message:i,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}=e,f=xt(fC);let m;t[0]!==f||t[1]!==i.replyTo.receivedId||t[2]!==i.replyTo.sentId?(m=()=>{setTimeout(()=>{f(i.replyTo.sentId,i.replyTo.receivedId)},100)},t[0]=f,t[1]=i.replyTo.receivedId,t[2]=i.replyTo.sentId,t[3]=m):m=t[3];const y=m,g=`
          ${Wc.replyToMessage}
          ${i.receivedId===null?Wc.sentMessage:Wc.receivedMessage}
          ${i.reaction!==-1?Wc.hasReaction:""}
        `,_=i.replyTo.type==="image"?"Image":i.replyTo.content;let T;t[4]!==_?(T=S.jsx("p",{children:_}),t[4]=_,t[5]=T):T=t[5];let w;t[6]!==y||t[7]!==g||t[8]!==T?(w=S.jsx("a",{onClick:y,className:g,children:T}),t[6]=y,t[7]=g,t[8]=T,t[9]=w):w=t[9];let R;t[10]!==i||t[11]!==o||t[12]!==u||t[13]!==r?(R=S.jsx(p4,{message:i,replied:!0,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}),t[10]=i,t[11]=o,t[12]=u,t[13]=r,t[14]=R):R=t[14];let M;return t[15]!==w||t[16]!==R?(M=S.jsxs(S.Fragment,{children:[w,R]}),t[15]=w,t[16]=R,t[17]=M):M=t[17],M}function fC(e){return e.highlightMessage}const dC="_typingIndicator_1w1tb_1",mC="_dot_1w1tb_12",th={typingIndicator:dC,dot:mC};function gC(){const e=Ce.c(1),{chatBottom:t}=X.useContext(ei);oo(t)&&setTimeout(()=>{t.current.scrollIntoView({behavior:"smooth"})},300);let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsxs("div",{className:th.typingIndicator,children:[S.jsx("span",{className:th.dot}),S.jsx("span",{className:th.dot}),S.jsx("span",{className:th.dot})]}),e[0]=i):i=e[0],i}const pC="_newMessageContainer_19iot_1",yC="_newMessage_19iot_1",I_={newMessageContainer:pC,newMessage:yC};function _C(){const e=Ce.c(4);console.log("New Message component rendered!");const{chatBottom:t}=X.useContext(ei);let i;e[0]!==t.current?(i=()=>{t.current.scrollIntoView({behavior:"smooth"})},e[0]=t.current,e[1]=i):i=e[1];const r=i;let o;return e[2]!==r?(o=S.jsx("div",{className:I_.newMessageContainer,children:S.jsx("div",{className:I_.newMessage,onClick:r,children:"New Message"})}),e[2]=r,e[3]=o):o=e[3],o}function vC(){const e=Ce.c(17);console.log("Chat component rendered!");const{chatBottom:t}=X.useContext(ei),i=xt(SC),r=xt(bC),o=xt(wC),u=xt(TC);let f;e[0]!==t||e[1]!==u?(f=()=>{const R=new IntersectionObserver(U=>{U.forEach(N=>{N.isIntersecting&&u(!1)})},{threshold:.1}),M=t.current;return M&&R.observe(M),()=>{M&&R.unobserve(M)}},e[0]=t,e[1]=u,e[2]=f):f=e[2];let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[3]=m):m=e[3],X.useLayoutEffect(f,m);let y;e[4]!==i?(y=i.map(EC),e[4]=i,e[5]=y):y=e[5];let g;e[6]!==r?(g=r&&S.jsx(gC,{}),e[6]=r,e[7]=g):g=e[7];let _;e[8]!==o?(_=o&&S.jsx(_C,{}),e[8]=o,e[9]=_):_=e[9];let T;e[10]!==t?(T=S.jsx("div",{ref:t,className:x_.chatBottom,children:"Hehe"},"chatBottom"),e[10]=t,e[11]=T):T=e[11];let w;return e[12]!==y||e[13]!==g||e[14]!==_||e[15]!==T?(w=S.jsxs("div",{className:x_.chatContainer,children:[y,g,_,T]}),e[12]=y,e[13]=g,e[14]=_,e[15]=T,e[16]=w):w=e[16],w}function EC(e,t,i){var r,o,u,f,m,y,g,_,T;return e.replyTo?S.jsx(hC,{message:e,nextMessageSentId:(r=i[t+1])==null?void 0:r.sentId,nextMessageReceivedId:(o=i[t+1])==null?void 0:o.receivedId,nextMessageReplyTo:(u=i[t+1])==null?void 0:u.replyTo},`${e.sentId} m ${e.receivedId}`):S.jsx(p4,{message:e,nextMessageSentId:(f=i[t+1])==null?void 0:f.sentId,nextMessageReceivedId:(m=i[t+1])==null?void 0:m.receivedId,nextMessageReplyTo:(y=i[t+1])==null?void 0:y.replyTo,prevMessageSentId:(g=i[t-1])==null?void 0:g.sentId,prevMessageReceivedId:(_=i[t-1])==null?void 0:_.receivedId,prevMessageReaction:((T=i[t-1])==null?void 0:T.reaction)!==-1},`${e.sentId} m ${e.receivedId}`)}function TC(e){return e.setNewMessage}function wC(e){return e.newMessage}function bC(e){return e.typing}function SC(e){return e.messages}const CC="_inputSpaceWrapper_ohpjy_1",AC="_inputSpaceContainer_ohpjy_7",RC="_textAreaWrapper_ohpjy_15",xC="_optionsContainer_ohpjy_66",IC="_sendButton_ohpjy_108",DC="_active_ohpjy_116",MC="_addButton_ohpjy_124",VC="_optionsShown_ohpjy_141",NC="_imageBox_ohpjy_157",OC="_inputImage_ohpjy_168",LC="_closeImage_ohpjy_175",hi={inputSpaceWrapper:CC,inputSpaceContainer:AC,textAreaWrapper:RC,optionsContainer:xC,sendButton:IC,active:DC,addButton:MC,optionsShown:VC,imageBox:NC,inputImage:OC,closeImage:LC},kC="_gifBox_ov4sj_1",jC="_dragger_ov4sj_18",PC="_inputDiv_ov4sj_28",UC="_closeButton_ov4sj_34",BC="_gifInput_ov4sj_45",zC="_gifsContainer_ov4sj_65",qC="_containerColumn_ov4sj_76",Zs={gifBox:kC,dragger:jC,inputDiv:PC,closeButton:UC,gifInput:BC,gifsContainer:zC,containerColumn:qC},HC="AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k",GC="client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low";function FC(e){const t=Ce.c(49),{setGifPicker:i}=e;console.log("Gif Picker rendered!");const{dataChannel:r,featuredGifs:o}=X.useContext(Rn),{sentId:u,selectedMessage:f,atBottomRef:m,chatBottom:y}=X.useContext(ei),g=xt(tA),_=xt(WC),T=xt(JC),[w,R]=X.useState(o.current),M=X.useRef(null),[U,N]=ia(ZC),{h:H,pB:F}=U;let K;t[0]!==N||t[1]!==i?(K=()=>{N.start({h:0,pB:0,onRest:()=>{i(!1),window.history.state==="gifs"&&window.history.back()}})},t[0]=N,t[1]=i,t[2]=K):K=t[2];const tt=K;let W;t[3]!==N||t[4]!==tt?(W=_t=>{const{movement:Vt,last:ae}=_t,[,Ee]=Vt;Math.abs(Ee)<2&&!ae||(ae?Ee>60?tt():N.start({h:85,immediate:!1}):Ee>0&&N.start({h:85-Ee/window.innerHeight*100,immediate:!0}))},t[3]=N,t[4]=tt,t[5]=W):W=t[5];const Q=vu(W);let D;t[6]===Symbol.for("react.memo_cache_sentinel")?(D=async _t=>{const Vt=`https://tenor.googleapis.com/v2/search?q=${_t}&key=${HC}&${GC}`,ae=await fetch(Vt).then(XC);R(ae.results)},t[6]=D):D=t[6];const A=D;let x;t[7]===Symbol.for("react.memo_cache_sentinel")?(x=j7(A,200),t[7]=x):x=t[7];const k=X.useRef(x);let L;t[8]!==o.current?(L=()=>{const _t=M.current.value.trimEnd();_t.length===0?R(o.current):k.current(_t)},t[8]=o.current,t[9]=L):L=t[9];const P=L;let I;t[10]!==g||t[11]!==m||t[12]!==y||t[13]!==r||t[14]!==_||t[15]!==f||t[16]!==u||t[17]!==i||t[18]!==T?(I=_t=>{console.log("Clicked!"),_t.target.dataset.url&&(K1({type:"gif",content:_t.target.dataset.url,replying:_,setReplying:T,selectedMessage:f.current,dataChannel:r.current,addMessage:g,sentId:u,inputRef:null,atBottomRef:m,chatBottom:y}),i(!1))},t[10]=g,t[11]=m,t[12]=y,t[13]=r,t[14]=_,t[15]=f,t[16]=u,t[17]=i,t[18]=T,t[19]=I):I=t[19];const Dt=I;let Mt;t[20]!==N||t[21]!==tt?(Mt=()=>(N.start({from:{h:0},to:[{h:85}]}),window.history.pushState("gifs",""),window.addEventListener("popstate",tt),()=>{window.removeEventListener("popstate",tt)}),t[20]=N,t[21]=tt,t[22]=Mt):Mt=t[22];let Z;t[23]===Symbol.for("react.memo_cache_sentinel")?(Z=[],t[23]=Z):Z=t[23],X.useEffect(Mt,Z);let ut;t[24]!==Q?(ut=Q(),t[24]=Q,t[25]=ut):ut=t[25];let mt;t[26]!==H?(mt=H.to($C),t[26]=H,t[27]=mt):mt=t[27];let At;t[28]!==F?(At=F.to(KC),t[28]=F,t[29]=At):At=t[29];let O;t[30]!==mt||t[31]!==At?(O={height:mt,paddingBottom:At},t[30]=mt,t[31]=At,t[32]=O):O=t[32];let nt;t[33]===Symbol.for("react.memo_cache_sentinel")?(nt=S.jsx("div",{className:Zs.dragger}),t[33]=nt):nt=t[33];let st;t[34]!==P?(st=S.jsx("input",{ref:M,autoComplete:"off",placeholder:"Search",spellCheck:!1,name:"query",title:"Search for GIFs",className:Zs.gifInput,onChange:P}),t[34]=P,t[35]=st):st=t[35];let at;t[36]!==tt?(at=S.jsx("button",{onClick:tt,className:Zs.closeButton,children:" Close "}),t[36]=tt,t[37]=at):at=t[37];let gt;t[38]!==st||t[39]!==at?(gt=S.jsxs("div",{className:Zs.inputDiv,children:[st,at]}),t[38]=st,t[39]=at,t[40]=gt):gt=t[40];let ct;t[41]!==w||t[42]!==Dt?(ct=w.length>0?S.jsxs("div",{className:Zs.gifsContainer,onClick:_t=>Dt(_t),children:[S.jsx("div",{className:Zs.containerColumn,children:w.map(YC)}),S.jsx("div",{className:Zs.containerColumn,children:w.map(QC)})]}):S.jsx(S.Fragment,{}),t[41]=w,t[42]=Dt,t[43]=ct):ct=t[43];let dt;return t[44]!==ut||t[45]!==O||t[46]!==gt||t[47]!==ct?(dt=S.jsxs(gs.div,{...ut,style:O,className:Zs.gifBox,children:[nt,gt,ct]}),t[44]=ut,t[45]=O,t[46]=gt,t[47]=ct,t[48]=dt):dt=t[48],dt}function QC(e,t){return t%2===1&&S.jsx(dg,{imageData:{label:"url",value:e.media_formats.gif.url},imageSource:e.media_formats.tinygif.url,imageAlt:e.content_description,backgroundColor:"var(--opaque-background)"},e.id+t)}function YC(e,t){return t%2===0&&S.jsx(dg,{imageData:{label:"url",value:e.media_formats.gif.url},imageSource:e.media_formats.tinygif.url,imageAlt:e.content_description,backgroundColor:"var(--opaque-background)"},e.id+t)}function KC(e){return`${e}rem`}function $C(e){return`${e}vh`}function XC(e){return e.json()}function ZC(){return{h:85,pB:.5}}function JC(e){return e.setReplying}function WC(e){return e.replying}function tA(e){return e.addMessage}const eA="_replyInfo_fj03s_1",nA="_messageContents_fj03s_14",iA="_replyingTo_fj03s_40",sA="_selectedMessage_fj03s_45",eh={replyInfo:eA,messageContents:nA,replyingTo:iA,selectedMessage:sA};function rA(){const e=Ce.c(16),{peerName:t}=X.useContext(Rn),{selectedMessage:i}=X.useContext(ei),r=xt(aA),o=i.current.receivedId===null?"yourself":t.current;let u;e[0]!==i.current.content||e[1]!==i.current.type?(u=i.current.type==="image"?"Image":z7(i.current.content,40),e[0]=i.current.content,e[1]=i.current.type,e[2]=u):u=e[2];const f=u;let m;e[3]!==r?(m=()=>{r(null)},e[3]=r,e[4]=m):m=e[4];const y=m;let g;e[5]!==o?(g=S.jsxs("p",{className:eh.replyingTo,children:["Replying to ",o]}),e[5]=o,e[6]=g):g=e[6];let _;e[7]!==f?(_=S.jsx("p",{className:eh.selectedMessage,children:f}),e[7]=f,e[8]=_):_=e[8];let T;e[9]===Symbol.for("react.memo_cache_sentinel")?(T=S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"}),e[9]=T):T=e[9];let w;e[10]!==y?(w=S.jsx("svg",{width:"1rem",height:"1rem",onClick:y,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:T}),e[10]=y,e[11]=w):w=e[11];let R;return e[12]!==g||e[13]!==_||e[14]!==w?(R=S.jsx("div",{className:eh.replyInfo,children:S.jsxs("div",{className:eh.messageContents,children:[g,_,w]})}),e[12]=g,e[13]=_,e[14]=w,e[15]=R):R=e[15],R}function aA(e){return e.setReplying}function oA(){const e=Ce.c(76);console.log("Input space rendered!");const{showNotification:t}=Eu(),{dataChannel:i}=X.useContext(Rn),{sentId:r,atBottomRef:o,images:u,selectedMessage:f,chatBottom:m}=X.useContext(ei),y=xt(hA),g=xt(cA),_=xt(uA),T=X.useRef(null),w=X.useRef(null),R=X.useRef(null),[M,U]=X.useState(null),[N,H]=X.useState(!1),[F,K]=X.useState(!1),[tt,W]=X.useState("");let Q;e[0]===Symbol.for("react.memo_cache_sentinel")?(Q=function(){const ue=window.visualViewport.height+window.visualViewport.offsetTop,zi=window.innerHeight,Ro=Math.max(0,zi-ue);w.current.style.bottom=`${Ro}px`},e[0]=Q):Q=e[0];const D=Q;let A,x;e[1]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{window.visualViewport&&(window.visualViewport.addEventListener("resize",D),window.visualViewport.addEventListener("scroll",D))},x=[],e[1]=A,e[2]=x):(A=e[1],x=e[2]),X.useEffect(A,x);let k,L;e[3]!==y?(k=()=>{y&&T.current&&T.current.focus()},L=[y],e[3]=y,e[4]=k,e[5]=L):(k=e[4],L=e[5]),X.useLayoutEffect(k,L);let P;e[6]===Symbol.for("react.memo_cache_sentinel")?(P=()=>{H(!0)},e[6]=P):P=e[6];const I=P;let Dt;e[7]!==i?(Dt=()=>{i.current.send(JSON.stringify({type:"typing"}))},e[7]=i,e[8]=Dt):Dt=e[8];const Mt=Dt;let Z;e[9]!==Mt?(Z=k7(Mt,800),e[9]=Mt,e[10]=Z):Z=e[10];const ut=X.useRef(Z);let mt;e[11]===Symbol.for("react.memo_cache_sentinel")?(mt=le=>{W(le.target.value),ut.current(),T.current.style.height="auto",T.current.scrollHeight>T.current.clientHeight&&(T.current.style.height=T.current.scrollHeight+"px")},e[11]=mt):mt=e[11];const At=mt;let O;e[12]!==u.current||e[13]!==r||e[14]!==t?(O=async le=>{const ue=le.target.files[0];if(!ue)return;const zi=await P7(ue);if(zi.length>64){t("Please upload images upto 2 MB!");return}u.current.push({sentId:r.current,receivedId:null,fileType:ue.type,chunks:zi}),U(URL.createObjectURL(ue))},e[12]=u.current,e[13]=r,e[14]=t,e[15]=O):O=e[15];const nt=O;let st;e[16]!==_||e[17]!==o||e[18]!==m||e[19]!==i||e[20]!==tt||e[21]!==y||e[22]!==f||e[23]!==r||e[24]!==g?(st=()=>{tt.trim().length!==0&&(K1({type:"text",content:tt.trimEnd(),replying:y,setReplying:g,selectedMessage:f.current,dataChannel:i.current,addMessage:_,sentId:r,inputRef:T,atBottomRef:o,chatBottom:m}),W(""))},e[16]=_,e[17]=o,e[18]=m,e[19]=i,e[20]=tt,e[21]=y,e[22]=f,e[23]=r,e[24]=g,e[25]=st):st=e[25];const at=st;let gt;e[26]!==_||e[27]!==o||e[28]!==m||e[29]!==i||e[30]!==M||e[31]!==y||e[32]!==f||e[33]!==r||e[34]!==g?(gt=()=>{M!==null&&(K1({type:"imageRequest",content:M,replying:y,setReplying:g,selectedMessage:f.current,dataChannel:i.current,addMessage:_,sentId:r,inputRef:R,atBottomRef:o,chatBottom:m}),U(null))},e[26]=_,e[27]=o,e[28]=m,e[29]=i,e[30]=M,e[31]=y,e[32]=f,e[33]=r,e[34]=g,e[35]=gt):gt=e[35];const ct=gt;let dt;e[36]===Symbol.for("react.memo_cache_sentinel")?(dt=()=>{T.current.style.height="unset",T.current.scrollTop=T.current.scrollHeight},e[36]=dt):dt=e[36];const _t=dt;let Vt;e[37]!==u.current||e[38]!==r?(Vt=()=>{R.current.value="";const le=u.current.findIndex(ue=>ue.sentId===r.current&&ue.receivedId===null);u.current.splice(le,1),U(null)},e[37]=u.current,e[38]=r,e[39]=Vt):Vt=e[39];const ae=Vt;let Ee;e[40]!==M||e[41]!==ct||e[42]!==at?(Ee=()=>{M===null?at():ct()},e[40]=M,e[41]=ct,e[42]=at,e[43]=Ee):Ee=e[43];const sn=Ee;let rn;e[44]!==at?(rn=le=>{le.key!=="Enter"||window.innerWidth<=1400||le.shiftKey||(le.preventDefault(),at(),T.current.blur())},e[44]=at,e[45]=rn):rn=e[45];const hn=rn;let Ke;e[46]!==N?(Ke=N?S.jsx(FC,{setGifPicker:H}):null,e[46]=N,e[47]=Ke):Ke=e[47];let fn;e[48]!==nt?(fn=S.jsx("input",{ref:R,id:"fileInput",type:"file",accept:"image/*",onChange:le=>nt(le)}),e[48]=nt,e[49]=fn):fn=e[49];let yn;e[50]!==y?(yn=y&&S.jsx(rA,{}),e[50]=y,e[51]=yn):yn=e[51];const Ve=`${hi.addButton} ${F?hi.optionsShown:""}`;let ni;e[52]===Symbol.for("react.memo_cache_sentinel")?(ni=()=>{K(lA)},e[52]=ni):ni=e[52];let _n;e[53]===Symbol.for("react.memo_cache_sentinel")?(_n=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{id:"Vector",d:"M6 12H12M12 12H18M12 12V18M12 12V6","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),e[53]=_n):_n=e[53];let ze;e[54]!==Ve?(ze=S.jsx("button",{className:Ve,onClick:ni,children:_n}),e[54]=Ve,e[55]=ze):ze=e[55];let vn;e[56]!==hn||e[57]!==M||e[58]!==F||e[59]!==ae?(vn=M?S.jsxs("div",{className:hi.imageBox,children:[S.jsx("img",{src:M,className:hi.inputImage}),S.jsx("svg",{className:hi.closeImage,width:"1rem",height:"1rem",onClick:ae,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})]}):S.jsx("div",{className:hi.textAreaWrapper,children:F?S.jsxs("div",{className:hi.optionsContainer,children:[S.jsx("div",{children:S.jsx("label",{htmlFor:"fileInput",children:S.jsx("svg",{width:"1.125rem",height:"1.125rem",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM6.016 24q0 0.832 0.576 1.44t1.408 0.576h16q0.832 0 1.408-0.576t0.608-1.44v-0.928q-0.224-0.448-1.12-2.688t-1.6-3.584-1.28-2.112q-0.544-0.576-1.12-0.608t-1.152 0.384-1.152 1.12-1.184 1.568-1.152 1.696-1.152 1.6-1.088 1.184-1.088 0.448q-0.576 0-1.664-1.44-0.16-0.192-0.48-0.608-1.12-1.504-1.6-1.824-0.768-0.512-1.184 0.352-0.224 0.512-0.928 2.24t-1.056 2.56v0.64zM6.016 9.024q0 1.248 0.864 2.112t2.112 0.864 2.144-0.864 0.864-2.112-0.864-2.144-2.144-0.864-2.112 0.864-0.864 2.144z"})})})}),S.jsx("button",{children:S.jsx("svg",{onClick:I,width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"ic_fluent_gif_24_filled",fillRule:"nonzero",children:S.jsx("path",{d:"M18.75,3.50054297 C20.5449254,3.50054297 22,4.95561754 22,6.75054297 L22,17.2531195 C22,19.048045 20.5449254,20.5031195 18.75,20.5031195 L5.25,20.5031195 C3.45507456,20.5031195 2,19.048045 2,17.2531195 L2,6.75054297 C2,4.95561754 3.45507456,3.50054297 5.25,3.50054297 L18.75,3.50054297 Z M8.01459972,8.87193666 C6.38839145,8.87193666 5.26103525,10.2816525 5.26103525,11.9943017 C5.26103525,13.707564 6.38857781,15.1202789 8.01459972,15.1202789 C8.90237918,15.1202789 9.71768065,14.6931811 10.1262731,13.9063503 L10.2024697,13.7442077 L10.226,13.674543 L10.2440163,13.5999276 L10.2440163,13.5999276 L10.2516169,13.5169334 L10.2518215,11.9961937 L10.2450448,11.9038358 C10.2053646,11.6359388 9.99569349,11.4234501 9.72919932,11.3795378 L9.62682145,11.3711937 L8.62521827,11.3711937 L8.53286035,11.3779703 C8.26496328,11.4176506 8.05247466,11.6273217 8.00856234,11.8938159 L8.00021827,11.9961937 L8.00699487,12.0885517 C8.0466751,12.3564487 8.25634623,12.5689373 8.5228404,12.6128497 L8.62521827,12.6211937 L9.00103525,12.6209367 L9.00103525,13.3549367 L8.99484486,13.3695045 C8.80607251,13.6904125 8.44322427,13.8702789 8.01459972,13.8702789 C7.14873038,13.8702789 6.51103525,13.0713011 6.51103525,11.9943017 C6.51103525,10.9182985 7.14788947,10.1219367 8.01459972,10.1219367 C8.43601415,10.1219367 8.67582824,10.1681491 8.97565738,10.3121334 C9.28681641,10.4615586 9.6601937,10.3304474 9.80961888,10.0192884 C9.95904407,9.70812933 9.82793289,9.33475204 9.51677386,9.18532686 C9.03352891,8.95326234 8.61149825,8.87193666 8.01459972,8.87193666 Z M12.6289445,8.99393497 C12.3151463,8.99393497 12.0553614,9.22519285 12.0107211,9.52657705 L12.0039445,9.61893497 L12.0039445,14.381065 L12.0107211,14.4734229 C12.0553614,14.7748072 12.3151463,15.006065 12.6289445,15.006065 C12.9427427,15.006065 13.2025276,14.7748072 13.2471679,14.4734229 L13.2539445,14.381065 L13.2539445,9.61893497 L13.2471679,9.52657705 C13.2025276,9.22519285 12.9427427,8.99393497 12.6289445,8.99393497 Z M17.6221579,9.00083497 L15.6247564,8.99393111 C15.3109601,8.99285493 15.0503782,9.22321481 15.0046948,9.52444312 L14.9975984,9.61677709 L14.9975984,14.3649711 L15.0043751,14.4573291 C15.0440553,14.7252261 15.2537265,14.9377148 15.5202206,14.9816271 L15.6225985,14.9899711 L15.7149564,14.9831945 C15.9828535,14.9435143 16.1953421,14.7338432 16.2392544,14.467349 L16.2475985,14.3649711 L16.2470353,13.2499367 L17.37,13.2504012 L17.4623579,13.2436246 C17.730255,13.2039444 17.9427436,12.9942732 17.9866559,12.7277791 L17.995,12.6254012 L17.9882234,12.5330433 C17.9485432,12.2651462 17.738872,12.0526576 17.4723779,12.0087453 L17.37,12.0004012 L16.2470353,11.9999367 L16.2470353,10.2449367 L17.6178421,10.2508313 L17.7102229,10.2443727 C18.0117595,10.2007704 18.2439132,9.94178541 18.2450039,9.62798912 C18.24608,9.31419284 18.0157202,9.05361096 17.7144919,9.00793041 L17.6221579,9.00083497 L15.6247564,8.99393111 L17.6221579,9.00083497 Z",id:"-Color"})})})}),S.jsx("button",{children:S.jsx("svg",{width:"1.125rem",height:"1.125rem",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--twemoji",preserveAspectRatio:"xMidYMid meet",children:S.jsx("path",{fill:"#FFAC33",d:"M27.287 34.627c-.404 0-.806-.124-1.152-.371L18 28.422l-8.135 5.834a1.97 1.97 0 0 1-2.312-.008a1.971 1.971 0 0 1-.721-2.194l3.034-9.792l-8.062-5.681a1.98 1.98 0 0 1-.708-2.203a1.978 1.978 0 0 1 1.866-1.363L12.947 13l3.179-9.549a1.976 1.976 0 0 1 3.749 0L23 13l10.036.015a1.975 1.975 0 0 1 1.159 3.566l-8.062 5.681l3.034 9.792a1.97 1.97 0 0 1-.72 2.194a1.957 1.957 0 0 1-1.16.379z"})})})]}):S.jsx("textarea",{onChange:At,onFocus:At,onBlur:_t,ref:T,name:"textMessage",placeholder:"Message",rows:1,spellCheck:!1,onKeyDown:hn})}),e[56]=hn,e[57]=M,e[58]=F,e[59]=ae,e[60]=vn):vn=e[60];const pr=`${hi.sendButton} ${M||tt.trim()!==""?hi.active:""}`;let ii;e[61]===Symbol.for("react.memo_cache_sentinel")?(ii=S.jsx("path",{d:"M9.11933 4.38421C6.32524 2.98547 3.22434 5.63695 4.17515 8.61184L5.26247 12.0138L4.18106 15.3845C3.22719 18.3576 6.32366 21.0124 9.11924 19.6182L18.0461 15.1663C20.6491 13.8682 20.6519 10.1575 18.0509 8.85543L9.11933 4.38421Z"}),e[61]=ii):ii=e[61];let Un;e[62]!==sn||e[63]!==pr?(Un=S.jsx("svg",{className:pr,onClick:sn,width:"2rem",height:"2rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:ii}),e[62]=sn,e[63]=pr,e[64]=Un):Un=e[64];let si;e[65]!==ze||e[66]!==vn||e[67]!==Un?(si=S.jsxs("div",{className:hi.inputSpaceContainer,children:[ze,vn,Un]}),e[65]=ze,e[66]=vn,e[67]=Un,e[68]=si):si=e[68];let Jt;e[69]!==fn||e[70]!==yn||e[71]!==si?(Jt=S.jsxs("div",{ref:w,className:hi.inputSpaceWrapper,children:[fn,yn,si]}),e[69]=fn,e[70]=yn,e[71]=si,e[72]=Jt):Jt=e[72];let qt;return e[73]!==Ke||e[74]!==Jt?(qt=S.jsxs(S.Fragment,{children:[Ke,Jt]}),e[73]=Ke,e[74]=Jt,e[75]=qt):qt=e[75],qt}function lA(e){return!e}function uA(e){return e.addMessage}function cA(e){return e.setReplying}function hA(e){return e.replying}const fA="_containingDiv_1e4vm_1",dA="_incomingCall_1e4vm_8",mA="_incomingCallText_1e4vm_25",gA="_profileImage_1e4vm_31",pA="_callingText_1e4vm_35",yA="_callActions_1e4vm_46",_A="_acceptCall_1e4vm_53",vA="_rejectCall_1e4vm_57",ds={containingDiv:fA,incomingCall:dA,incomingCallText:mA,profileImage:gA,callingText:pA,callActions:yA,acceptCall:_A,rejectCall:vA};function EA(){const e=Ce.c(34);console.log("Incoming call rendered!");const{peerName:t,dataChannel:i}=X.useContext(Rn),r=xt(bA),o=xt(wA),[u,f]=ia(TA),{x:m,y,opacity:g}=u;let _;e[0]!==i.current||e[1]!==r||e[2]!==o?(_=()=>{i.current.send(JSON.stringify({type:"callAccept"})),r(!1),o("connected")},e[0]=i.current,e[1]=r,e[2]=o,e[3]=_):_=e[3];const T=_;let w;e[4]!==i.current||e[5]!==r?(w=()=>{i.current.send(JSON.stringify({type:"callReject"})),r(!1)},e[4]=i.current,e[5]=r,e[6]=w):w=e[6];const R=w;let M;e[7]!==f||e[8]!==R?(M=L=>{const{down:P,movement:I,direction:Dt}=L,[Mt]=I,[Z]=Dt;if(!P&&Math.abs(Mt)>100){f.start({x:Z>0?500:-500,opacity:0,onRest:R});return}f.start({x:P?Mt:0,opacity:1})},e[7]=f,e[8]=R,e[9]=M):M=e[9];const U=vu(M);let N;e[10]!==U?(N=U(),e[10]=U,e[11]=N):N=e[11];let H;e[12]!==g||e[13]!==m||e[14]!==y?(H={x:m,y,opacity:g},e[12]=g,e[13]=m,e[14]=y,e[15]=H):H=e[15];let F,K;e[16]===Symbol.for("react.memo_cache_sentinel")?(F=S.jsx("div",{className:ds.profileImage,children:S.jsx("img",{src:"./pp.svg",width:50,height:50,className:ds.profileImage})}),K=S.jsx("p",{className:ds.incomingCallText,children:"Incoming Call"}),e[16]=F,e[17]=K):(F=e[16],K=e[17]);let tt;e[18]!==t.current?(tt=S.jsxs("div",{children:[K,S.jsxs("p",{className:ds.callingText,children:[t.current," is calling you"]})]}),e[18]=t.current,e[19]=tt):tt=e[19];let W;e[20]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})}),e[20]=W):W=e[20];let Q;e[21]!==T?(Q=S.jsx("button",{className:ds.acceptCall,onClick:T,children:W}),e[21]=T,e[22]=Q):Q=e[22];let D;e[23]===Symbol.for("react.memo_cache_sentinel")?(D=S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})}),e[23]=D):D=e[23];let A;e[24]!==R?(A=S.jsx("button",{className:ds.rejectCall,onClick:R,children:D}),e[24]=R,e[25]=A):A=e[25];let x;e[26]!==Q||e[27]!==A?(x=S.jsxs("div",{className:ds.callActions,children:[Q,A]}),e[26]=Q,e[27]=A,e[28]=x):x=e[28];let k;return e[29]!==x||e[30]!==N||e[31]!==H||e[32]!==tt?(k=S.jsx("div",{className:ds.containingDiv,children:S.jsxs(gs.div,{...N,className:ds.incomingCall,style:H,children:[F,tt,x]})}),e[29]=x,e[30]=N,e[31]=H,e[32]=tt,e[33]=k):k=e[33],k}function TA(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}function wA(e){return e.setVideoCall}function bA(e){return e.setIncomingCall}const SA="_videoCallContainer_1wgnk_1",CA="_actionList_1wgnk_17",AA="_cancelButton_1wgnk_21",RA="_expanded_1wgnk_40",xA="_videoContainer_1wgnk_44",IA="_contracted_1wgnk_62",DA="_video_1wgnk_1",MA="_expandButton_1wgnk_78",VA="_mutedButton_1wgnk_83",NA="_sendingVideo_1wgnk_88",OA="_receivingVideo_1wgnk_93",LA="_shown_1wgnk_120",kA="_hidden_1wgnk_124",jA="_startCall_1wgnk_140",PA="_endCall_1wgnk_153",UA="_rotateLogo_1wgnk_166",BA="_mini_1wgnk_243",zA="_callingIndicatorContainer_1wgnk_263",qA="_callingIndicator_1wgnk_263",re={videoCallContainer:SA,actionList:CA,cancelButton:AA,expanded:RA,videoContainer:xA,contracted:IA,video:DA,expandButton:MA,mutedButton:VA,sendingVideo:NA,receivingVideo:OA,shown:LA,hidden:kA,startCall:jA,endCall:PA,rotateLogo:UA,mini:BA,callingIndicatorContainer:zA,callingIndicator:qA};function HA({callState:e}){console.log("Call screen rendered!");const{peerConnection:t,remoteStream:i,videoChannel:r,dataChannel:o}=X.useContext(Rn),u=xt(ct=>ct.setVideoCall),[f,m]=X.useState(!1),[y,g]=X.useState(!1),[_,T]=X.useState(!1),[w,R]=X.useState(!1),[M,U]=X.useState("front"),[N,H]=X.useState("normal"),[F,K]=X.useState(!0),tt=X.useRef(null),W=X.useRef(null),Q=X.useRef({x:0,y:0}),D=X.useRef(null),A=X.useRef(null),x=X.useRef(null),k=X.useRef(null),L=X.useRef(null),P=X.useRef(null),[{x:I,y:Dt},Mt]=ia(()=>({x:Q.current.x,y:Q.current.y,config:{tension:300,friction:15}}));X.useEffect(()=>{window.history.pushState("call",""),r.current.onmessage=dt=>{let _t=JSON.parse(dt.data);_t.message==="audioOn"?T(!0):_t.message==="audioOff"?T(!1):_t.message==="videoOn"?R(!0):_t.message==="videoOff"&&R(!1)},L.current=new MediaStream;const ct=t.current.getTransceivers();return W.current=ct.find(dt=>{var _t,Vt,ae;return((_t=dt.receiver.track)==null?void 0:_t.kind)==="video"||((Vt=dt.sender.track)==null?void 0:Vt.kind)==="video"||((ae=dt.mid)==null?void 0:ae.includes("video"))}),tt.current=ct.find(dt=>{var _t,Vt,ae;return((_t=dt.receiver.track)==null?void 0:_t.kind)==="audio"||((Vt=dt.sender.track)==null?void 0:Vt.kind)==="audio"||((ae=dt.mid)==null?void 0:ae.includes("audio"))}),window.addEventListener("popstate",ut),()=>{var dt;(dt=L.current)==null||dt.getTracks().forEach(_t=>{_t.stop()}),window.removeEventListener("popstate",ut)}},[]),X.useEffect(()=>{(async()=>{L.current.getTracks().forEach(_t=>_t.stop()),L.current.getTracks().forEach(_t=>L.current.removeTrack(_t));const ct=M==="front"?"user":"environment";(await navigator.mediaDevices.getUserMedia({video:{facingMode:ct},audio:!0})).getTracks().forEach(_t=>{L.current.addTrack(_t)}),e==="connected"&&(W.current.sender.replaceTrack(f?L.current.getVideoTracks()[0]:null),tt.current.sender.replaceTrack(y?L.current.getAudioTracks()[0]:null))})()},[M]),X.useEffect(()=>{e==="connected"&&r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"}))},[y]),X.useEffect(()=>{e==="connected"&&r.current.send(JSON.stringify({message:f?"videoOn":"videoOff"}))},[f]);const Z=vu(({down:ct,offset:[dt,_t],movement:[Vt],last:ae})=>{if(!(Math.abs(Vt)<2)){if(ct)Q.current={x:dt,y:_t},Mt.start({x:dt,y:_t,immediate:!0});else if(ae){k.current=!0;const Ee=N==="mini"?window.innerWidth:x.current.clientWidth,sn=N==="mini"?window.innerHeight:x.current.clientHeight,rn=window.innerWidth,hn=rn>1400?.35*(.3*rn):.35*rn,Ke=hn,fn=16,yn=16,Ve=16,ni=128;let _n=0;dt>(Ee-(Ve+yn)-hn)/2&&(_n=Ee-(Ve+yn)-hn);let ze=_t;_t<0&&(ze=0),_t>sn-(fn+ni+Ke)&&(ze=sn-(fn+ni+Ke)),Q.current={x:_n,y:ze},Mt.start({x:_n,y:ze,immediate:!1,onRest:()=>{k.current=!1}})}}},{from:()=>[I.get(),Dt.get()]});X.useEffect(()=>{D.current.srcObject=w?i.current:null},[w]),X.useEffect(()=>{var ct;A.current.srcObject=f?L.current:null,(ct=W.current)==null||ct.sender.replaceTrack(f?L.current.getVideoTracks()[0]:null)},[f]),X.useEffect(()=>{var ct;(ct=tt.current)==null||ct.sender.replaceTrack(y?L.current.getAudioTracks()[0]:null)},[y]),X.useLayoutEffect(()=>{Mt.start({x:I.get(),y:Dt.get(),immediate:!0})}),X.useEffect(()=>{P.current=e,e==="connected"&&(r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"})),r.current.send(JSON.stringify({message:f?"videoOn":"videoOff"})))},[e]);const ut=()=>{(P.current==="connected"||P.current==="calling")&&window.innerWidth<=1400?(H("mini"),window.history.pushState("call","")):O()},mt=ct=>{ct.stopPropagation(),g(dt=>!dt)},At=ct=>{ct.stopPropagation(),m(dt=>!dt)},O=ct=>{ct&&ct.stopPropagation(),e==="connected"?o.current.send(JSON.stringify({type:"callEnd"})):o.current.send(JSON.stringify({type:"callCancel"})),u("hidden"),window.history.state==="call"&&window.history.back()},nt=ct=>{ct.stopPropagation(),o.current.send(JSON.stringify({type:"callRequest"})),console.log("I am attempting a call!"),u("calling")},st=ct=>{ct.stopPropagation(),U(M==="front"?"back":"front")},at=()=>{k.current||K(ct=>!ct)},gt=(ct,dt)=>{ct.stopPropagation(),dt==="sending"?(console.log("The selected video was sending video!"),H(N==="expandSending"?"normal":"expandSending")):(console.log("The selected video was receiving video!"),H(N==="expandReceiving"?"normal":"expandReceiving"))};return S.jsxs(gs.div,{className:`
                ${re.videoCallContainer}
                ${N==="mini"?re.mini:""}
                ${N==="expandSending"||N==="expandReceiving"?re.expanded:""}
            `,onClick:at,ref:x,...N==="mini"?Z():{},style:N==="mini"?{x:I,y:Dt}:{},children:[S.jsxs(gs.div,{className:`
                    ${re.videoContainer}
                    ${re.receivingVideo}
                    ${N==="expandReceiving"?re.expanded:""}
                    ${N==="expandSending"?re.contracted:""}
                `,...N==="expandSending"?Z():{},style:N==="expandSending"?{x:I,y:Dt}:{},children:[S.jsx("video",{className:re.video,autoPlay:!0,ref:D,poster:"./pp.svg"}),!_&&S.jsx("button",{className:re.mutedButton,children:S.jsx("svg",{width:"0.75rem",height:"0.75rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:S.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),S.jsx("button",{className:re.expandButton,onClick:ct=>{gt(ct,"receiving")},children:S.jsxs("svg",{width:"0.75rem",height:"0.75rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M23 4C23 2.34315 21.6569 1 20 1H16C15.4477 1 15 1.44772 15 2C15 2.55228 15.4477 3 16 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 21.4477 9 22 9C22.5523 9 23 8.55228 23 8V4Z"}),S.jsx("path",{d:"M23 16C23 15.4477 22.5523 15 22 15C21.4477 15 21 15.4477 21 16V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23H20C21.6569 23 23 21.6569 23 20V16Z"}),S.jsx("path",{d:"M4 21H8C8.55228 21 9 21.4477 9 22C9 22.5523 8.55228 23 8 23H4C2.34315 23 1 21.6569 1 20V16C1 15.4477 1.44772 15 2 15C2.55228 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21Z"}),S.jsx("path",{d:"M1 8C1 8.55228 1.44772 9 2 9C2.55228 9 3 8.55228 3 8L3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1H4C2.34315 1 1 2.34315 1 4V8Z"})]})})]}),N!=="mini"&&S.jsxs(S.Fragment,{children:[S.jsxs(gs.div,{className:`
                            ${re.videoContainer} 
                            ${re.sendingVideo}
                            ${N==="expandSending"?re.expanded:""}
                            ${N==="expandReceiving"?re.contracted:""}
                            `,...N==="expandReceiving"?Z():{},style:N==="expandReceiving"?{x:I,y:Dt}:{},children:[S.jsx("video",{className:re.video,autoPlay:!0,poster:"./pp.svg",ref:A,muted:!0}),!y&&S.jsx("button",{className:re.mutedButton,children:S.jsx("svg",{width:"0.75rem",height:"0.75rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:S.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),S.jsx("button",{className:re.expandButton,onClick:ct=>{gt(ct,"sending")},children:S.jsxs("svg",{width:"0.75rem",height:"0.75rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M23 4C23 2.34315 21.6569 1 20 1H16C15.4477 1 15 1.44772 15 2C15 2.55228 15.4477 3 16 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 21.4477 9 22 9C22.5523 9 23 8.55228 23 8V4Z"}),S.jsx("path",{d:"M23 16C23 15.4477 22.5523 15 22 15C21.4477 15 21 15.4477 21 16V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23H20C21.6569 23 23 21.6569 23 20V16Z"}),S.jsx("path",{d:"M4 21H8C8.55228 21 9 21.4477 9 22C9 22.5523 8.55228 23 8 23H4C2.34315 23 1 21.6569 1 20V16C1 15.4477 1.44772 15 2 15C2.55228 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21Z"}),S.jsx("path",{d:"M1 8C1 8.55228 1.44772 9 2 9C2.55228 9 3 8.55228 3 8L3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1H4C2.34315 1 1 2.34315 1 4V8Z"})]})})]}),S.jsxs("ul",{className:`${re.actionList} ${F?re.shown:re.hidden}`,children:[S.jsx("li",{onClick:ct=>{mt(ct)},children:y?S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:S.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:S.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:S.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),S.jsx("li",{onClick:ct=>{At(ct)},children:f?S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):S.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),S.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),S.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),S.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),S.jsx("li",{onClick:ct=>st(ct),children:S.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),S.jsx("path",{className:re.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),e==="calling"||e==="connected"?S.jsx("li",{className:re.endCall,onClick:ct=>{O(ct)},children:S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})}):S.jsx("li",{className:re.startCall,onClick:ct=>{nt(ct)},children:S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})})})]}),e==="idle"&&S.jsx("button",{onClick:()=>{u("hidden")},className:`${re.cancelButton} ${F?re.shown:re.hidden}`,children:S.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})})]}),e==="calling"&&S.jsx("div",{className:re.callingIndicatorContainer,children:S.jsx("span",{className:re.callingIndicator,children:"Calling"})})]})}const GA="_videoCallContainer_1py5o_1",FA="_videoContainer_1py5o_13",QA="_image_1py5o_18",YA="_sendingImage_1py5o_25",KA="_receivingImage_1py5o_29",$A="_startCallButton_1py5o_40",Js={videoCallContainer:GA,videoContainer:FA,image:QA,sendingImage:YA,receivingImage:KA,startCallButton:$A};function XA(){const e=Ce.c(7),t=xt(ZA);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=S.jsx("div",{className:Js.videoContainer,children:S.jsx("img",{className:`${Js.image} ${Js.receivingImage}`,src:"./pp.svg",alt:"Profile picture of receiver"})}),e[0]=i):i=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=S.jsx("div",{className:Js.videoContainer,children:S.jsx("img",{className:`${Js.image} ${Js.sendingImage}`,src:"./pp.svg",alt:"Profile picture of sender"})}),e[1]=r):r=e[1];let o;e[2]!==t?(o=()=>{t("idle")},e[2]=t,e[3]=o):o=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=S.jsx("svg",{width:"2rem",height:"2rem",viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{fill:"#EEEEEE",d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})}),e[4]=u):u=e[4];let f;return e[5]!==o?(f=S.jsxs("div",{className:Js.videoCallContainer,children:[i,r,S.jsx("button",{className:Js.startCallButton,onClick:o,children:u})]}),e[5]=o,e[6]=f):f=e[6],f}function ZA(e){return e.setVideoCall}const JA="_settingsContainer_6ny24_1",WA="_settingsPage_6ny24_15",tR="_visible_6ny24_19",eR="_dragger_6ny24_25",nh={settingsContainer:JA,settingsPage:WA,visible:tR,dragger:eR},nR="_listItem_vqbls_1",iR="_themeOption_vqbls_20",sR="_themes_vqbls_20",rR="_selected_vqbls_27",Vi={listItem:nR,themeOption:iR,themes:sR,selected:rR};function aR(){const e=Ce.c(26);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=localStorage.getItem("theme"),e[0]=t):t=e[0];const[i,r]=X.useState(t);let o,u;e[1]!==i?(o=()=>{localStorage.setItem("theme",i),document.body.className=i==="default"?"":i},u=[i],e[1]=i,e[2]=o,e[3]=u):(o=e[2],u=e[3]),X.useEffect(o,u);let f;e[4]===Symbol.for("react.memo_cache_sentinel")?(f=()=>r("default"),e[4]=f):f=e[4];const m=i==="default"?Vi.selected:"";let y;e[5]===Symbol.for("react.memo_cache_sentinel")?(y=S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M21 16V7.2C21 6.0799 21 5.51984 20.782 5.09202C20.5903 4.71569 20.2843 4.40973 19.908 4.21799C19.4802 4 18.9201 4 17.8 4H6.2C5.07989 4 4.51984 4 4.09202 4.21799C3.71569 4.40973 3.40973 4.71569 3.21799 5.09202C3 5.51984 3 6.0799 3 7.2V16M4.66667 20H19.3333C19.9533 20 20.2633 20 20.5176 19.9319C21.2078 19.7469 21.7469 19.2078 21.9319 18.5176C22 18.2633 22 17.9533 22 17.3333C22 17.0233 22 16.8683 21.9659 16.7412C21.8735 16.3961 21.6039 16.1265 21.2588 16.0341C21.1317 16 20.9767 16 20.6667 16H3.33333C3.02334 16 2.86835 16 2.74118 16.0341C2.39609 16.1265 2.12654 16.3961 2.03407 16.7412C2 16.8683 2 17.0233 2 17.3333C2 17.9533 2 18.2633 2.06815 18.5176C2.25308 19.2078 2.79218 19.7469 3.48236 19.9319C3.73669 20 4.04669 20 4.66667 20Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e[5]=y):y=e[5];let g;e[6]!==m?(g=S.jsx("li",{children:S.jsx("button",{onClick:f,className:m,children:y})}),e[6]=m,e[7]=g):g=e[7];let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=()=>r("light"),e[8]=_):_=e[8];const T=i==="light"?Vi.selected:"";let w;e[9]===Symbol.for("react.memo_cache_sentinel")?(w=S.jsxs("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[S.jsx("path",{d:"M15 12C15 13.6569 13.6569 15 12 15C10.3432 15 9.00004 13.6569 9.00004 12C9.00004 10.3432 10.3432 9.00004 12 9.00004C13.6569 9.00004 15 10.3432 15 12Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),S.jsx("path",{d:"M7.64338 5.18899L7.56701 6.10541C7.52707 6.58478 7.50709 6.82447 7.40373 7.01167C7.31261 7.1767 7.1767 7.31261 7.01167 7.40373C6.82447 7.50709 6.58477 7.52707 6.10541 7.56701L5.18898 7.64338C4.16259 7.72892 3.6494 7.77168 3.39642 8.00615C3.17627 8.21018 3.05941 8.50232 3.07812 8.8019C3.09961 9.14615 3.44174 9.53105 4.126 10.3008L4.69153 10.9371C5.02586 11.3132 5.19302 11.5012 5.2565 11.7135C5.31243 11.9004 5.31243 12.0997 5.2565 12.2866C5.19302 12.4988 5.02586 12.6869 4.69153 13.063L4.126 13.6992C3.44174 14.469 3.09961 14.8539 3.07812 15.1982C3.05941 15.4978 3.17627 15.7899 3.39642 15.9939C3.6494 16.2284 4.16259 16.2712 5.18899 16.3567L6.10541 16.4331C6.58478 16.473 6.82446 16.493 7.01167 16.5964C7.1767 16.6875 7.31261 16.8234 7.40373 16.9884C7.50709 17.1756 7.52707 17.4153 7.56701 17.8947L7.64338 18.8111C7.72892 19.8375 7.77168 20.3507 8.00615 20.6037C8.21018 20.8238 8.50232 20.9407 8.8019 20.922C9.14615 20.9005 9.53105 20.5583 10.3008 19.8741L10.9371 19.3085C11.3132 18.9742 11.5012 18.8071 11.7135 18.7436C11.9004 18.6876 12.0997 18.6876 12.2866 18.7436C12.4988 18.8071 12.6869 18.9742 13.063 19.3085L13.6992 19.8741C14.469 20.5583 14.8539 20.9005 15.1982 20.922C15.4978 20.9407 15.7899 20.8238 15.9939 20.6037C16.2284 20.3507 16.2712 19.8375 16.3567 18.8111L16.4331 17.8947C16.473 17.4153 16.493 17.1756 16.5964 16.9884C16.6875 16.8234 16.8234 16.6875 16.9884 16.5964C17.1756 16.493 17.4153 16.473 17.8947 16.4331L18.8111 16.3567C19.8375 16.2712 20.3507 16.2284 20.6037 15.9939C20.8238 15.7899 20.9407 15.4978 20.922 15.1982C20.9005 14.8539 20.5583 14.469 19.8741 13.6992L19.3085 13.063C18.9742 12.6869 18.8071 12.4988 18.7436 12.2866C18.6876 12.0997 18.6876 11.9004 18.7436 11.7135C18.8071 11.5012 18.9742 11.3132 19.3085 10.9371L19.8741 10.3008C20.5583 9.53105 20.9005 9.14615 20.922 8.8019C20.9407 8.50232 20.8238 8.21018 20.6037 8.00615C20.3507 7.77168 19.8375 7.72892 18.8111 7.64338L17.8947 7.56701C17.4153 7.52707 17.1756 7.50709 16.9884 7.40373C16.8234 7.31261 16.6875 7.1767 16.5964 7.01167C16.493 6.82446 16.473 6.58478 16.4331 6.10541L16.3567 5.18898C16.2712 4.16259 16.2284 3.6494 15.9939 3.39642C15.7899 3.17627 15.4978 3.05941 15.1982 3.07812C14.8539 3.09961 14.469 3.44174 13.6992 4.126L13.063 4.69153C12.6869 5.02586 12.4988 5.19302 12.2866 5.2565C12.0997 5.31243 11.9004 5.31243 11.7135 5.2565C11.5012 5.19302 11.3132 5.02586 10.9371 4.69153L10.3008 4.126C9.53105 3.44174 9.14615 3.09961 8.8019 3.07812C8.50232 3.05941 8.21018 3.17627 8.00615 3.39642C7.77168 3.6494 7.72892 4.16259 7.64338 5.18899Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e[9]=w):w=e[9];let R;e[10]!==T?(R=S.jsx("li",{children:S.jsx("button",{onClick:_,className:T,children:w})}),e[10]=T,e[11]=R):R=e[11];let M;e[12]===Symbol.for("react.memo_cache_sentinel")?(M=()=>r("dark"),e[12]=M):M=e[12];const U=i==="dark"?Vi.selected:"";let N;e[13]===Symbol.for("react.memo_cache_sentinel")?(N=S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 11.5373 21.3065 11.4608 21.0672 11.8568C19.9289 13.7406 17.8615 15 15.5 15C11.9101 15 9 12.0899 9 8.5C9 6.13845 10.2594 4.07105 12.1432 2.93276C12.5392 2.69347 12.4627 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"var(--icon-color)"})}),e[13]=N):N=e[13];let H;e[14]!==U?(H=S.jsx("li",{children:S.jsx("button",{onClick:M,className:U,children:N})}),e[14]=U,e[15]=H):H=e[15];let F;e[16]!==R||e[17]!==H||e[18]!==g?(F=S.jsxs("li",{className:`${Vi.themeOption} ${Vi.listItem}`,children:["Theme",S.jsxs("ul",{className:Vi.themes,children:[g,R,H]})]}),e[16]=R,e[17]=H,e[18]=g,e[19]=F):F=e[19];let K;e[20]===Symbol.for("react.memo_cache_sentinel")?(K=S.jsxs("li",{className:Vi.listItem,children:["Disconnect from user",S.jsx("button",{children:S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z",fill:"var(--icon-color)"})})})]}),e[20]=K):K=e[20];let tt;e[21]===Symbol.for("react.memo_cache_sentinel")?(tt=S.jsxs("li",{className:Vi.listItem,children:["Connect to next user",S.jsx("button",{children:S.jsx("svg",{width:"1.2rem",height:"1.2rem",viewBox:"0 -2 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:S.jsx("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:S.jsx("g",{transform:"translate(-144.000000, -3805.000000)",fill:"var(--icon-color)",children:S.jsx("g",{transform:"translate(56.000000, 160.000000)",children:S.jsx("path",{d:"M99.684,3649.69353 L95.207,3652.82453 C94.571,3653.25353 94,3652.84553 94,3652.13153 L94,3650.14053 L89.78,3652.82453 C89.145,3653.25353 88,3652.84553 88,3652.13153 L88,3645.86853 C88,3645.15453 89.145,3644.74653 89.78,3645.17453 L94,3647.85953 L94,3645.86853 C94,3645.15453 94.571,3644.74653 95.207,3645.17453 L99.516,3648.30653 C100.03,3648.65353 100.198,3649.34653 99.684,3649.69353"})})})})})})]}),e[21]=tt):tt=e[21];let W;e[22]===Symbol.for("react.memo_cache_sentinel")?(W=S.jsxs("li",{className:Vi.listItem,children:["Download web app",S.jsx("button",{children:S.jsx("svg",{fill:"var(--icon-color)",width:"1.2rem",height:"1.2rem",viewBox:"0 0 56 56",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M 43.3749 20.7812 C 47.8048 20.7812 51.4844 17.1016 51.4844 12.6485 C 51.4844 8.1953 47.8283 4.5156 43.3749 4.5156 C 38.8984 4.5156 35.2421 8.1953 35.2421 12.6485 C 35.2421 17.1016 38.8984 20.7812 43.3749 20.7812 Z M 17.0312 51.4844 L 34.6796 51.4844 C 38.6640 51.4844 42.0390 51.1094 44.4296 48.7187 C 46.8203 46.3281 47.1716 43.0000 47.1716 38.9922 L 47.1716 23.2890 C 45.9765 23.7344 44.6874 23.9687 43.3749 23.9687 C 37.1405 23.9687 32.0312 18.8594 32.0312 12.6485 C 32.0312 11.3125 32.2656 10.0234 32.7109 8.8516 L 16.9609 8.8516 C 13.0234 8.8516 9.6484 9.2266 7.2578 11.6172 C 4.8671 14.0078 4.5156 17.3594 4.5156 21.2734 L 4.5156 38.9922 C 4.5156 43.0000 4.8671 46.3281 7.2578 48.7187 C 9.6484 51.1094 13.0234 51.4844 17.0312 51.4844 Z"})})})]}),e[22]=W):W=e[22];let Q;e[23]===Symbol.for("react.memo_cache_sentinel")?(Q=S.jsxs("li",{className:Vi.listItem,children:["Report for abuse",S.jsx("button",{children:S.jsx("svg",{fill:"var(--icon-color)",width:"1.2rem",height:"1.2rem",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{d:"M6.002 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm.195-12.01a1.81 1.81 0 1 1 3.602 0l-.701 7.015a1.105 1.105 0 0 1-2.2 0l-.7-7.015z"})})})]}),e[23]=Q):Q=e[23];let D;return e[24]!==F?(D=S.jsxs(S.Fragment,{children:[F,K,tt,W,Q]}),e[24]=F,e[25]=D):D=e[25],D}function oR(){const t=xt(_=>_.settings),i=xt(_=>_.setSettings),r=X.useRef(null),o=X.useRef(null),[{y:u},f]=ia(()=>({y:0}));X.useEffect(()=>(window.addEventListener("popstate",y),()=>{window.removeEventListener("popstate",y)}),[]),X.useEffect(()=>{t&&(window.history.pushState("settings",""),f.start({from:{y:r.current.clientHeight},to:{y:0},immediate:!1}))},[t]);const m=vu(({movement:[,_],last:T})=>{Math.abs(_)<2&&!T||(T?_>160?y():f.start({y:0,immediate:!1}):_>0&&f.start({y:_,immediate:!0}))}),y=()=>{f.start({y:r.current.clientHeight,immediate:!1,onRest:()=>{i(!1),window.history.state==="settings"&&window.history.back()}})},g=_=>{_.target===o.current&&y()};return S.jsx("div",{ref:o,onClick:g,className:`${nh.settingsPage} ${t?nh.visible:""}`,children:S.jsxs(gs.ul,{className:nh.settingsContainer,...m(),style:{y:u},ref:r,children:[S.jsx("li",{className:nh.dragger,children:S.jsx("span",{})}),S.jsx(aR,{})]})})}function lR(){const e=Ce.c(27);console.log("Chat Page rendered!");const{longPressed:t}=X.useContext(ei);xt(pR);const i=xt(gR),r=xt(mR),o=xt(dR),u=xt(fR),f=xt(hR),m=xt(cR),y=xt(uR);let g;e[0]!==t||e[1]!==m||e[2]!==y?(g=()=>{const Q=()=>{t.current===!1&&(m(!1),y(!1))};return document.addEventListener("click",Q),()=>{document.removeEventListener("click",Q)}},e[0]=t,e[1]=m,e[2]=y,e[3]=g):g=e[3];let _;e[4]===Symbol.for("react.memo_cache_sentinel")?(_=[],e[4]=_):_=e[4],X.useLayoutEffect(g,_);let T;e[5]!==u?(T=S.jsx("div",{className:Jc.videoContainer,children:u!=="hidden"?S.jsx(HA,{callState:u}):S.jsx(XA,{})}),e[5]=u,e[6]=T):T=e[6];let w,R,M;e[7]===Symbol.for("react.memo_cache_sentinel")?(w=S.jsx(DS,{}),R=S.jsx(vC,{}),M=S.jsx(oA,{}),e[7]=w,e[8]=R,e[9]=M):(w=e[7],R=e[8],M=e[9]);let U;e[10]!==i?(U=i&&S.jsx(bS,{}),e[10]=i,e[11]=U):U=e[11];let N;e[12]!==r?(N=r&&S.jsx(yS,{}),e[12]=r,e[13]=N):N=e[13];let H;e[14]!==o?(H=o&&S.jsx(CS,{imageSource:o.src,imageSent:o.sent}),e[14]=o,e[15]=H):H=e[15];let F;e[16]!==f?(F=f&&S.jsx(EA,{}),e[16]=f,e[17]=F):F=e[17];let K;e[18]!==U||e[19]!==N||e[20]!==H||e[21]!==F?(K=S.jsxs("div",{className:Jc.chatContainer,children:[w,R,M,U,N,H,F]}),e[18]=U,e[19]=N,e[20]=H,e[21]=F,e[22]=K):K=e[22];let tt;e[23]===Symbol.for("react.memo_cache_sentinel")?(tt=S.jsx("div",{className:Jc.settingsContainer,children:S.jsx(oR,{})}),e[23]=tt):tt=e[23];let W;return e[24]!==K||e[25]!==T?(W=S.jsxs("div",{className:Jc.chatPage,children:[T,K,tt]}),e[24]=K,e[25]=T,e[26]=W):W=e[26],W}function uR(e){return e.setReactionsShown}function cR(e){return e.setActionsShown}function hR(e){return e.incomingCall}function fR(e){return e.videoCall}function dR(e){return e.imageDialog}function mR(e){return e.actionsShown}function gR(e){return e.reactionsShown}function pR(e){return e.replying}function yR(){const e=Ce.c(5),{connected:t,peerConnection:i}=X.useContext(Rn);let r;e[0]!==i.current?(r=()=>{const f=vR;return document.addEventListener("contextmenu",f),document.addEventListener("touchstart",_R,{passive:!1}),()=>{var m;document.removeEventListener("contextmenu",f),document.removeEventListener("touchstart",f),(m=i.current)==null||m.close()}},e[0]=i.current,e[1]=r):r=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[2]=o):o=e[2],X.useEffect(r,o);let u;return e[3]!==t?(u=S.jsx(L7,{children:t?S.jsx(F7,{children:S.jsx(lR,{})}):S.jsx(hS,{})}),e[3]=t,e[4]=u):u=e[4],u}function _R(e){e.touches.length>1&&e.preventDefault()}function vR(e){return e.preventDefault()}X6.createRoot(document.getElementById("root")).render(S.jsx(t5,{children:S.jsx(yR,{})}));
