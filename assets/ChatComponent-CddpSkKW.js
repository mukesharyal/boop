import{j as t,r as M,b as u}from"./index-GUb0HLa5.js";const I="_chatContainer_iy9gp_1",x={chatContainer:I},$="_textMessage_w1fz3_1",j="_receivedMessage_w1fz3_14",w="_hasReaction_w1fz3_14",y="_sentMessage_w1fz3_18",b="_topMessage_w1fz3_35",z="_bottomMessage_w1fz3_40",C="_sending_w1fz3_60",R="_sent_w1fz3_18",m="_reaction_w1fz3_22",T="_repliedMessage_w1fz3_98",o={textMessage:$,receivedMessage:j,hasReaction:w,sentMessage:y,topMessage:b,bottomMessage:z,sending:C,sent:R,reaction:m,repliedMessage:T},N=["👍","❤️","😆","😮","😢","😡"];function v({sentId:d,origin:a,content:_,reaction:r,prevMessage:c,nextMessage:e,status:s,receivedId:n,index:i,reply:g}){return t.jsxs("div",{id:i,"data-sent-id":d,"data-received-id":n,"data-index":i,className:`
        ${o.textMessage}
        ${s==="sending"?o.sending:o.sent}
        ${a==="sent"?o.sentMessage:o.receivedMessage}
        ${(e==null?void 0:e.origin)===a?o.topMessage:""}
        ${(c==null?void 0:c.origin)===a?o.bottomMessage:""}
        ${r!=null?o.hasReaction:""}
        ${g?o.repliedMessage:""}
      `,children:[t.jsx("p",{children:_}),r!=null&&t.jsx("span",{className:o.reaction,children:N[r]})]})}const E="_replyToMessage_9s3el_1",B="_sentMessage_9s3el_19",F="_receivedMessage_9s3el_24",l={replyToMessage:E,sentMessage:B,receivedMessage:F};function L({sentId:d,origin:a,content:_,reaction:r,status:c,receivedId:e,index:s,reply:n,nextMessage:i}){const{messages:g}=M.useContext(u),h=n.receivedId?g.findIndex(f=>f.receivedId===n.receivedId):g.findIndex(f=>f.sentId===n.sentId),p=g[h];return console.log(p),t.jsxs(t.Fragment,{children:[t.jsx("a",{href:`#${h}`,className:`
                        ${l.replyToMessage}
                        ${a==="sent"?l.sentMessage:l.receivedMessage}
                        ${r?l.hasReaction:""}
                      `,children:t.jsx("p",{children:p.content})}),t.jsx(v,{index:s,sentId:d,receivedId:e,status:c,origin:a,content:_,reaction:r,reply:!0,nextMessage:i},s)]})}function k(){const{messages:d,chatBottom:a,newMessage:_,setNewMessage:r}=M.useContext(u),c=M.useRef(null);return M.useEffect(()=>{const e=new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&_&&r(!1)})},{threshold:.1}),s=c.current;return s&&e.observe(s),a.current=c.current,()=>{s&&e.unobserve(s)}},[]),t.jsxs("div",{className:x.chatContainer,children:[d.map((e,s,n)=>e.reply?t.jsx(L,{index:s,sentId:e.sentId,receivedId:e.receivedId,status:e.status,origin:e.origin,content:e.content,reaction:e.reaction,reply:e.reply,nextMessage:n[s+1]},s):t.jsx(v,{index:s,sentId:e.sentId,receivedId:e.receivedId,status:e.status,origin:e.origin,content:e.content,reaction:e.reaction,prevMessage:n[s-1],nextMessage:n[s+1]},s)),t.jsx("div",{ref:c})]})}export{k as default};
