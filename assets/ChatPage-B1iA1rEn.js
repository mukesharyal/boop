const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatHeader-D2n8HhbP.js","./index-BwGppaVX.js","./ChatHeader-DGdiadS_.css","./ChatComponent-Daxl7DRs.js","./ChatComponent-lo6nrjan.css","./InputSpace-B-_MNpW8.js","./InputSpace-RjrZKuam.css"])))=>i.map(i=>d[i]);
import{r as c,b as E,C as N,j as t,R as g,_ as u}from"./index-BwGppaVX.js";const P="_chatContainer_11rxj_1",S="_reactionList_11rxj_9",A="_actionList_11rxj_27",D="_replyInfo_11rxj_55",H="_replyingTo_11rxj_69",O="_selectedMessage_11rxj_74",n={chatContainer:P,reactionList:S,actionList:A,replyInfo:D,replyingTo:H,selectedMessage:O},X=g.lazy(()=>u(()=>import("./ChatHeader-D2n8HhbP.js"),__vite__mapDeps([0,1,2]),import.meta.url)),$=g.lazy(()=>u(()=>import("./ChatComponent-Daxl7DRs.js"),__vite__mapDeps([3,1,4]),import.meta.url)),q=g.lazy(()=>u(()=>import("./InputSpace-B-_MNpW8.js"),__vite__mapDeps([5,1,6]),import.meta.url)),z=["👍","❤️","😆","😮","😢","😡"];function W(){const{selectedMessageId:r,messages:y,replying:j,setReplying:m,setSelectedMessageId:C}=c.useContext(E),I=()=>{m(!1)},R=()=>{const e=document.querySelector(`[data-index="${r}"]`);navigator.clipboard.writeText(e.querySelector("p").innerHTML),i.current.style.display="none"},v=()=>{i.current.style.display="none",m(!0)},L=e=>{console.log("I was clicked!");let a={type:"reaction",id:document.querySelector(`[data-index="${r}"]`).dataset.receivedId,reaction:e};M.current.send(JSON.stringify(a)),console.log("Something happened!"),s.current.style.display="none"},{dataChannel:M,peerName:T}=c.useContext(N),x=c.useRef(null),k=c.useRef(null),s=c.useRef(null),i=c.useRef(null),w=e=>{var h,_;let o=(h=s.current)==null?void 0:h.contains(e.target),a=e.target.dataset.receivedId!=null;((_=i.current)==null?void 0:_.contains(e.target))||(i.current.style.display="none"),!a&&!o&&(s.current.style.display="none"),(e.target.closest("div").dataset.receivedId!=null||e.target.closest("div").dataset.sentId!=null)&&(x.current=setTimeout(()=>{if(i.current.style.display="flex",e.target.closest("div").dataset.receivedId!=null){s.current.style.display="flex";const f=s.current.offsetWidth;console.log("A received message was clicked!"),console.log("ClientX = ",e.clientX," & Width of reactions = ",f),console.log(e.clientX,e.clientY);let d=e.clientY-50,p=e.clientX-f/2;d<0&&(d=10),p<0&&(p=10),s.current.style.top=`${d}px`,s.current.style.left=`${p}px`}C(e.target.closest("div").dataset.index)},500))},l=()=>{clearTimeout(x.current)};return t.jsxs("div",{className:n.chatContainer,ref:k,onPointerDown:w,onPointerUp:l,onPointerMove:l,onPointerCancel:l,children:[t.jsx(X,{}),t.jsx($,{}),j&&t.jsxs("div",{className:n.replyInfo,children:[t.jsxs("div",{className:n.messageContents,children:[t.jsxs("p",{className:n.replyingTo,children:["Replying to ",y[r].sentId!=null?"yourself":T.current]}),t.jsx("p",{className:n.selectedMessage,children:y[r].content})]}),t.jsx("img",{src:"./close.svg",width:16,height:16,onClick:I})]}),t.jsx(q,{}),t.jsx("ul",{ref:s,className:n.reactionList,children:z.map((e,o)=>t.jsx("li",{onClick:()=>{L(o)},children:e},o))}),t.jsxs("ul",{className:n.actionList,ref:i,children:[t.jsxs("li",{children:[t.jsx("img",{src:"./reply.svg",width:30,height:30,onClick:v}),"Reply"]}),t.jsxs("li",{children:[t.jsx("img",{src:"./copy.svg",width:30,height:30,onClick:R}),"Copy"]}),t.jsxs("li",{children:[t.jsx("img",{src:"./delete.svg",width:30,height:30}),"Delete"]})]})]})}export{W as default};
