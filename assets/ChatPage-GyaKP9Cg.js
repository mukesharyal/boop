const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatHeader-nzWQrPUH.js","./index-GUb0HLa5.js","./ChatHeader-DGdiadS_.css","./ChatComponent-CddpSkKW.js","./ChatComponent-ilACymqT.css","./InputSpace-BhwxSqw3.js","./InputSpace-RjrZKuam.css"])))=>i.map(i=>d[i]);
import{r as s,b as g,j as e,C,R as _,_ as y}from"./index-GUb0HLa5.js";const M="_chatContainer_us48c_1",v={chatContainer:M},w="_actionList_5s365_1",I={actionList:w};function R(){const n=()=>{console.log("Something happened!"),navigator.clipboard.writeText(t[c].content)},o=()=>{a(!0)},{selectedMessageId:c,setReplying:a,messages:t}=s.useContext(g);return e.jsxs("ul",{className:I.actionList,children:[e.jsxs("li",{children:[e.jsx("img",{src:"./reply.svg",width:30,height:30,onClick:o}),"Reply"]}),e.jsxs("li",{children:[e.jsx("img",{src:"./copy.svg",width:30,height:30,onClick:n}),"Copy"]}),e.jsxs("li",{children:[e.jsx("img",{src:"./delete.svg",width:30,height:30}),"Delete"]})]})}const L="_reactionList_1yci3_1",T={reactionList:L},N=["👍","❤️","😆","😮","😢","😡"];function E({pointerPosition:n}){const{dataChannel:o}=s.useContext(C),{messages:c,selectedMessageId:a}=s.useContext(g);let t=n.y-70,i=n.x-90;t<0&&(t=10),i<0&&(i=10);const r=u=>{let h={type:"reaction",id:c[a].receivedId,reaction:u};o.current.send(JSON.stringify(h))};return e.jsx("ul",{className:T.reactionList,style:{top:t,left:i},children:N.map((u,l)=>e.jsx("li",{onClick:()=>{r(l)},children:u},l))})}const P="_replyInfo_12k6b_1",k="_replyingTo_12k6b_15",S="_selectedMessage_12k6b_20",m={replyInfo:P,replyingTo:k,selectedMessage:S};function b(){const{peerName:n}=s.useContext(C),{messages:o,selectedMessageId:c,setReplying:a}=s.useContext(g),t=o[c].sentId!=null?"yourself":n.current,i=o[c].content,r=()=>{a(!1)};return e.jsxs("div",{className:m.replyInfo,children:[e.jsxs("div",{className:m.messageContents,children:[e.jsxs("p",{className:m.replyingTo,children:["Replying to ",t]}),e.jsx("p",{className:m.selectedMessage,children:i})]}),e.jsx("img",{src:"./close.svg",width:16,height:16,onClick:r})]})}const A="_newMessageContainer_jxad6_1",D={newMessageContainer:A};function O(){const n=()=>{o.current.scrollIntoView({behavior:"smooth"})},{chatBottom:o}=s.useContext(g);return e.jsx("div",{className:D.newMessageContainer,onClick:n,children:"New Message"})}const V=_.lazy(()=>y(()=>import("./ChatHeader-nzWQrPUH.js"),__vite__mapDeps([0,1,2]),import.meta.url)),$=_.lazy(()=>y(()=>import("./ChatComponent-CddpSkKW.js"),__vite__mapDeps([3,1,4]),import.meta.url)),z=_.lazy(()=>y(()=>import("./InputSpace-BhwxSqw3.js"),__vite__mapDeps([5,1,6]),import.meta.url));function B(){s.useEffect(()=>{const d=()=>{r(!1),l(!1)};return document.addEventListener("click",d),()=>{document.removeEventListener("click",d),clearTimeout(t.current)}},[]);const{replying:n,setSelectedMessageId:o,newMessage:c,setNewMessage:a}=s.useContext(g),t=s.useRef(null),[i,r]=s.useState(!1),[u,l]=s.useState(!1),[h,f]=s.useState({}),j=d=>{const x=d.target.closest("[data-index]");x!==null&&(t.current=setTimeout(()=>{r(!0),x.dataset.receivedId&&(console.log("This message was sent by another user."),f({x:d.clientX,y:d.clientY}),l(!0)),o(x.dataset.index)},400))},p=()=>{clearTimeout(t.current)};return e.jsxs("div",{className:v.chatContainer,onPointerDown:j,onPointerUp:p,onPointerMove:p,onPointerCancel:p,children:[e.jsx(V,{}),e.jsx($,{}),n&&e.jsx(b,{}),e.jsx(z,{}),u&&e.jsx(E,{pointerPosition:h}),i&&e.jsx(R,{}),c&&e.jsx(O,{})]})}export{B as default};
