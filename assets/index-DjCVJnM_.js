(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function G6(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var u1={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function F6(){if(R2)return Cl;R2=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Cl.Fragment=t,Cl.jsx=n,Cl.jsxs=n,Cl}var x2;function Q6(){return x2||(x2=1,u1.exports=F6()),u1.exports}var w=Q6(),c1={exports:{}},Mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function Y6(){if(I2)return Mt;I2=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,P={};function N(O,st,ht){this.props=O,this.context=st,this.refs=P,this.updater=ht||R}N.prototype.isReactComponent={},N.prototype.setState=function(O,st){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,st,"setState")},N.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function q(){}q.prototype=N.prototype;function J(O,st,ht){this.props=O,this.context=st,this.refs=P,this.updater=ht||R}var B=J.prototype=new q;B.constructor=J,I(B,N.prototype),B.isPureReactComponent=!0;var H=Array.isArray,et={H:null,A:null,T:null,S:null,V:null},tt=Object.prototype.hasOwnProperty;function D(O,st,ht,ut,_t,bt){return ht=bt.ref,{$$typeof:i,type:O,key:st,ref:ht!==void 0?ht:null,props:bt}}function C(O,st){return D(O.type,st,void 0,void 0,void 0,O.props)}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function L(O){var st={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ht){return st[ht]})}var k=/\/+/g;function U(O,st){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):st.toString(36)}function V(){}function mt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(V,V):(O.status="pending",O.then(function(st){O.status==="pending"&&(O.status="fulfilled",O.value=st)},function(st){O.status==="pending"&&(O.status="rejected",O.reason=st)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function dt(O,st,ht,ut,_t){var bt=typeof O;(bt==="undefined"||bt==="boolean")&&(O=null);var Tt=!1;if(O===null)Tt=!0;else switch(bt){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(O.$$typeof){case i:case t:Tt=!0;break;case v:return Tt=O._init,dt(Tt(O._payload),st,ht,ut,_t)}}if(Tt)return _t=_t(O),Tt=ut===""?"."+U(O,0):ut,H(_t)?(ht="",Tt!=null&&(ht=Tt.replace(k,"$&/")+"/"),dt(_t,st,ht,"",function(de){return de})):_t!=null&&(x(_t)&&(_t=C(_t,ht+(_t.key==null||O&&O.key===_t.key?"":(""+_t.key).replace(k,"$&/")+"/")+Tt)),st.push(_t)),1;Tt=0;var Kt=ut===""?".":ut+":";if(H(O))for(var zt=0;zt<O.length;zt++)ut=O[zt],bt=Kt+U(ut,zt),Tt+=dt(ut,st,ht,bt,_t);else if(zt=T(O),typeof zt=="function")for(O=zt.call(O),zt=0;!(ut=O.next()).done;)ut=ut.value,bt=Kt+U(ut,zt++),Tt+=dt(ut,st,ht,bt,_t);else if(bt==="object"){if(typeof O.then=="function")return dt(mt(O),st,ht,ut,_t);throw st=String(O),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function Y(O,st,ht){if(O==null)return O;var ut=[],_t=0;return dt(O,ut,"","",function(bt){return st.call(ht,bt,_t++)}),ut}function Z(O){if(O._status===-1){var st=O._result;st=st(),st.then(function(ht){(O._status===0||O._status===-1)&&(O._status=1,O._result=ht)},function(ht){(O._status===0||O._status===-1)&&(O._status=2,O._result=ht)}),O._status===-1&&(O._status=0,O._result=st)}if(O._status===1)return O._result.default;throw O._result}var ct=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function pt(){}return Mt.Children={map:Y,forEach:function(O,st,ht){Y(O,function(){st.apply(this,arguments)},ht)},count:function(O){var st=0;return Y(O,function(){st++}),st},toArray:function(O){return Y(O,function(st){return st})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Mt.Component=N,Mt.Fragment=n,Mt.Profiler=o,Mt.PureComponent=J,Mt.StrictMode=r,Mt.Suspense=y,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return et.H.useMemoCache(O)}},Mt.cache=function(O){return function(){return O.apply(null,arguments)}},Mt.cloneElement=function(O,st,ht){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ut=I({},O.props),_t=O.key,bt=void 0;if(st!=null)for(Tt in st.ref!==void 0&&(bt=void 0),st.key!==void 0&&(_t=""+st.key),st)!tt.call(st,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&st.ref===void 0||(ut[Tt]=st[Tt]);var Tt=arguments.length-2;if(Tt===1)ut.children=ht;else if(1<Tt){for(var Kt=Array(Tt),zt=0;zt<Tt;zt++)Kt[zt]=arguments[zt+2];ut.children=Kt}return D(O.type,_t,void 0,void 0,bt,ut)},Mt.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Mt.createElement=function(O,st,ht){var ut,_t={},bt=null;if(st!=null)for(ut in st.key!==void 0&&(bt=""+st.key),st)tt.call(st,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(_t[ut]=st[ut]);var Tt=arguments.length-2;if(Tt===1)_t.children=ht;else if(1<Tt){for(var Kt=Array(Tt),zt=0;zt<Tt;zt++)Kt[zt]=arguments[zt+2];_t.children=Kt}if(O&&O.defaultProps)for(ut in Tt=O.defaultProps,Tt)_t[ut]===void 0&&(_t[ut]=Tt[ut]);return D(O,bt,void 0,void 0,null,_t)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(O){return{$$typeof:m,render:O}},Mt.isValidElement=x,Mt.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:Z}},Mt.memo=function(O,st){return{$$typeof:g,type:O,compare:st===void 0?null:st}},Mt.startTransition=function(O){var st=et.T,ht={};et.T=ht;try{var ut=O(),_t=et.S;_t!==null&&_t(ht,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(pt,ct)}catch(bt){ct(bt)}finally{et.T=st}},Mt.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()},Mt.use=function(O){return et.H.use(O)},Mt.useActionState=function(O,st,ht){return et.H.useActionState(O,st,ht)},Mt.useCallback=function(O,st){return et.H.useCallback(O,st)},Mt.useContext=function(O){return et.H.useContext(O)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(O,st){return et.H.useDeferredValue(O,st)},Mt.useEffect=function(O,st,ht){var ut=et.H;if(typeof ht=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ut.useEffect(O,st)},Mt.useId=function(){return et.H.useId()},Mt.useImperativeHandle=function(O,st,ht){return et.H.useImperativeHandle(O,st,ht)},Mt.useInsertionEffect=function(O,st){return et.H.useInsertionEffect(O,st)},Mt.useLayoutEffect=function(O,st){return et.H.useLayoutEffect(O,st)},Mt.useMemo=function(O,st){return et.H.useMemo(O,st)},Mt.useOptimistic=function(O,st){return et.H.useOptimistic(O,st)},Mt.useReducer=function(O,st,ht){return et.H.useReducer(O,st,ht)},Mt.useRef=function(O){return et.H.useRef(O)},Mt.useState=function(O){return et.H.useState(O)},Mt.useSyncExternalStore=function(O,st,ht){return et.H.useSyncExternalStore(O,st,ht)},Mt.useTransition=function(){return et.H.useTransition()},Mt.version="19.1.0",Mt}var D2;function Ih(){return D2||(D2=1,c1.exports=Y6()),c1.exports}var K=Ih();const zr=G6(K);var h1={exports:{}},Rl={},f1={exports:{}},d1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function K6(){return V2||(V2=1,function(i){function t(Y,Z){var ct=Y.length;Y.push(Z);t:for(;0<ct;){var pt=ct-1>>>1,O=Y[pt];if(0<o(O,Z))Y[pt]=Z,Y[ct]=O,ct=pt;else break t}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var Z=Y[0],ct=Y.pop();if(ct!==Z){Y[0]=ct;t:for(var pt=0,O=Y.length,st=O>>>1;pt<st;){var ht=2*(pt+1)-1,ut=Y[ht],_t=ht+1,bt=Y[_t];if(0>o(ut,ct))_t<O&&0>o(bt,ut)?(Y[pt]=bt,Y[_t]=ct,pt=_t):(Y[pt]=ut,Y[ht]=ct,pt=ht);else if(_t<O&&0>o(bt,ct))Y[pt]=bt,Y[_t]=ct,pt=_t;else break t}}return Z}function o(Y,Z){var ct=Y.sortIndex-Z.sortIndex;return ct!==0?ct:Y.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],g=[],v=1,b=null,T=3,R=!1,I=!1,P=!1,N=!1,q=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function H(Y){for(var Z=n(g);Z!==null;){if(Z.callback===null)r(g);else if(Z.startTime<=Y)r(g),Z.sortIndex=Z.expirationTime,t(y,Z);else break;Z=n(g)}}function et(Y){if(P=!1,H(Y),!I)if(n(y)!==null)I=!0,tt||(tt=!0,U());else{var Z=n(g);Z!==null&&dt(et,Z.startTime-Y)}}var tt=!1,D=-1,C=5,x=-1;function L(){return N?!0:!(i.unstable_now()-x<C)}function k(){if(N=!1,tt){var Y=i.unstable_now();x=Y;var Z=!0;try{t:{I=!1,P&&(P=!1,J(D),D=-1),R=!0;var ct=T;try{e:{for(H(Y),b=n(y);b!==null&&!(b.expirationTime>Y&&L());){var pt=b.callback;if(typeof pt=="function"){b.callback=null,T=b.priorityLevel;var O=pt(b.expirationTime<=Y);if(Y=i.unstable_now(),typeof O=="function"){b.callback=O,H(Y),Z=!0;break e}b===n(y)&&r(y),H(Y)}else r(y);b=n(y)}if(b!==null)Z=!0;else{var st=n(g);st!==null&&dt(et,st.startTime-Y),Z=!1}}break t}finally{b=null,T=ct,R=!1}Z=void 0}}finally{Z?U():tt=!1}}}var U;if(typeof B=="function")U=function(){B(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,mt=V.port2;V.port1.onmessage=k,U=function(){mt.postMessage(null)}}else U=function(){q(k,0)};function dt(Y,Z){D=q(function(){Y(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var ct=T;T=Z;try{return Y()}finally{T=ct}},i.unstable_requestPaint=function(){N=!0},i.unstable_runWithPriority=function(Y,Z){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ct=T;T=Y;try{return Z()}finally{T=ct}},i.unstable_scheduleCallback=function(Y,Z,ct){var pt=i.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?pt+ct:pt):ct=pt,Y){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ct+O,Y={id:v++,callback:Z,priorityLevel:Y,startTime:ct,expirationTime:O,sortIndex:-1},ct>pt?(Y.sortIndex=ct,t(g,Y),n(y)===null&&Y===n(g)&&(P?(J(D),D=-1):P=!0,dt(et,ct-pt))):(Y.sortIndex=O,t(y,Y),I||R||(I=!0,tt||(tt=!0,U()))),Y},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(Y){var Z=T;return function(){var ct=T;T=Z;try{return Y.apply(this,arguments)}finally{T=ct}}}}(d1)),d1}var M2;function X6(){return M2||(M2=1,f1.exports=K6()),f1.exports}var m1={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2;function $6(){if(O2)return tn;O2=1;var i=Ih();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:g,implementation:v}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,v)},tn.flushSync=function(y){var g=f.T,v=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=v,r.d.f()}},tn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},tn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},tn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:R}):v==="script"&&r.d.X(y,{crossOrigin:b,integrity:T,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},tn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},tn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin);r.d.L(y,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},tn.preloadModule=function(y,g){if(typeof y=="string")if(g){var v=m(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},tn.requestFormReset=function(y){r.d.r(y)},tn.unstable_batchedUpdates=function(y,g){return y(g)},tn.useFormState=function(y,g,v){return f.H.useFormState(y,g,v)},tn.useFormStatus=function(){return f.H.useHostTransitionStatus()},tn.version="19.1.0",tn}var N2;function M_(){if(N2)return m1.exports;N2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),m1.exports=$6(),m1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L2;function Z6(){if(L2)return Rl;L2=1;var i=X6(),t=Ih(),n=M_();function r(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function f(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(r(188))}function y(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(r(188));return s!==e?null:e}for(var a=e,l=s;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),e;if(d===l)return m(h),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,S=h.child;S;){if(S===a){E=!0,a=h,l=d;break}if(S===l){E=!0,l=h,a=d;break}S=S.sibling}if(!E){for(S=d.child;S;){if(S===a){E=!0,a=d,l=h;break}if(S===l){E=!0,l=d,a=h;break}S=S.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:s}function g(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=g(e),s!==null)return s;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),B=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var V=Symbol.for("react.client.reference");function mt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===V?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case N:return"Profiler";case P:return"StrictMode";case et:return"Suspense";case tt:return"SuspenseList";case x:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case B:return(e.displayName||"Context")+".Provider";case J:return(e._context.displayName||"Context")+".Consumer";case H:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return s=e.displayName||null,s!==null?s:mt(e.type)||"Memo";case C:s=e._payload,e=e._init;try{return mt(e(s))}catch{}}return null}var dt=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},pt=[],O=-1;function st(e){return{current:e}}function ht(e){0>O||(e.current=pt[O],pt[O]=null,O--)}function ut(e,s){O++,pt[O]=e.current,e.current=s}var _t=st(null),bt=st(null),Tt=st(null),Kt=st(null);function zt(e,s){switch(ut(Tt,s),ut(bt,e),ut(_t,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?e2(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=e2(s),e=n2(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ht(_t),ut(_t,e)}function de(){ht(_t),ht(bt),ht(Tt)}function qe(e){e.memoizedState!==null&&ut(Kt,e);var s=_t.current,a=n2(s,e.type);s!==a&&(ut(bt,e),ut(_t,a))}function Ri(e){bt.current===e&&(ht(_t),ht(bt)),Kt.current===e&&(ht(Kt),Tl._currentValue=ct)}var tr=Object.prototype.hasOwnProperty,er=i.unstable_scheduleCallback,nr=i.unstable_cancelCallback,_o=i.unstable_shouldYield,vu=i.unstable_requestPaint,In=i.unstable_now,uf=i.unstable_getCurrentPriorityLevel,vo=i.unstable_ImmediatePriority,$r=i.unstable_UserBlockingPriority,ir=i.unstable_NormalPriority,cf=i.unstable_LowPriority,Zr=i.unstable_IdlePriority,Eo=i.log,Eu=i.unstable_setDisableYieldValue,me=null,Zt=null;function vn(e){if(typeof Eo=="function"&&Eu(e),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(me,e)}catch{}}var Je=Math.clz32?Math.clz32:sr,Tu=Math.log,hf=Math.LN2;function sr(e){return e>>>=0,e===0?32:31-(Tu(e)/hf|0)|0}var rr=256,ar=4194304;function Yn(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jr(e,s,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=Yn(l):(E&=S,E!==0?h=Yn(E):a||(a=S&~e,a!==0&&(h=Yn(a))))):(S=l&~d,S!==0?h=Yn(S):E!==0?h=Yn(E):a||(a=l&~e,a!==0&&(h=Yn(a)))),h===0?0:s!==0&&s!==h&&(s&d)===0&&(d=h&-h,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:h}function or(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function To(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bo(){var e=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),e}function So(){var e=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),e}function xi(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function Ii(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ao(e,s,a,l,h,d){var E=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,M=e.expirationTimes,Q=e.hiddenUpdates;for(a=E&~a;0<a;){var nt=31-Je(a),rt=1<<nt;S[nt]=0,M[nt]=-1;var X=Q[nt];if(X!==null)for(Q[nt]=null,nt=0;nt<X.length;nt++){var $=X[nt];$!==null&&($.lane&=-536870913)}a&=~rt}l!==0&&ni(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(E&~s))}function ni(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-Je(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function wo(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var l=31-Je(a),h=1<<l;h&s|e[l]&s&&(e[l]|=s),a&=~h}}function as(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function os(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:T2(e.type))}function bu(e,s){var a=Z.p;try{return Z.p=e,s()}finally{Z.p=a}}var oe=Math.random().toString(36).slice(2),Re="__reactFiber$"+oe,Te="__reactProps$"+oe,Dn="__reactContainer$"+oe,Co="__reactEvents$"+oe,ff="__reactListeners$"+oe,ls="__reactHandles$"+oe,Su="__reactResources$"+oe,lr="__reactMarker$"+oe;function us(e){delete e[Re],delete e[Te],delete e[Co],delete e[ff],delete e[ls]}function Di(e){var s=e[Re];if(s)return s;for(var a=e.parentNode;a;){if(s=a[Dn]||a[Re]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=a2(e);e!==null;){if(a=e[Re])return a;e=a2(e)}return s}e=a,a=e.parentNode}return null}function ii(e){if(e=e[Re]||e[Dn]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function si(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(r(33))}function rn(e){var s=e[Su];return s||(s=e[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ye(e){e[lr]=!0}var Ro=new Set,ta={};function Kn(e,s){Vi(e,s),Vi(e+"Capture",s)}function Vi(e,s){for(ta[e]=s,e=0;e<s.length;e++)Ro.add(s[e])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wu={},ur={};function Cu(e){return tr.call(ur,e)?!0:tr.call(wu,e)?!1:Au.test(e)?ur[e]=!0:(wu[e]=!0,!1)}function cs(e,s,a){if(Cu(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function ri(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function He(e,s,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+l)}}var cr,Ru;function Mi(e){if(cr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);cr=s&&s[1]||"",Ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cr+e+Ru}var ea=!1;function na(e,s){if(!e||ea)return"";ea=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch($){var X=$}Reflect.construct(e,[],rt)}else{try{rt.call()}catch($){X=$}e.call(rt.prototype)}}else{try{throw Error()}catch($){X=$}(rt=e())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch($){if($&&X&&typeof $.stack=="string")return[$.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],S=d[1];if(E&&S){var M=E.split(`
`),Q=S.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<Q.length&&!Q[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===Q.length)for(l=M.length-1,h=Q.length-1;1<=l&&0<=h&&M[l]!==Q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==Q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==Q[h]){var nt=`
`+M[l].replace(" at new "," at ");return e.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",e.displayName)),nt}while(1<=l&&0<=h);break}}}finally{ea=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Mi(a):""}function xo(e){switch(e.tag){case 26:case 27:case 5:return Mi(e.type);case 16:return Mi("Lazy");case 13:return Mi("Suspense");case 19:return Mi("SuspenseList");case 0:case 15:return na(e.type,!1);case 11:return na(e.type.render,!1);case 1:return na(e.type,!0);case 31:return Mi("Activity");default:return""}}function ia(e){try{var s="";do s+=xo(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function an(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Io(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function df(e){var s=Io(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),l=""+e[s];if(!e.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function sa(e){e._valueTracker||(e._valueTracker=df(e))}function Do(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return e&&(l=Io(e)?e.checked?"true":"false":e.value),e=l,e!==a?(s.setValue(e),!0):!1}function hr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var mf=/[\n"\\]/g;function be(e){return e.replace(mf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function En(e,s,a,l,h,d,E,S){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),s!=null?E==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+an(s)):e.value!==""+an(s)&&(e.value=""+an(s)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),s!=null?hs(e,E,an(s)):a!=null?hs(e,E,an(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+an(S):e.removeAttribute("name")}function fr(e,s,a,l,h,d,E,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null))return;a=a!=null?""+an(a):"",s=s!=null?""+an(s):a,S||s===e.value||(e.value=s),e.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function hs(e,s,a){s==="number"&&hr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Oi(e,s,a,l){if(e=e.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=s.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+an(a),s=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}s!==null||e[h].disabled||(s=e[h])}s!==null&&(s.selected=!0)}}function te(e,s,a){if(s!=null&&(s=""+an(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+an(a):""}function dr(e,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(dt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=an(s),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Vn(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var mr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xu(e,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,a):typeof a!="number"||a===0||mr.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Vo(e,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&xu(e,h,l)}else for(var d in s)s.hasOwnProperty(d)&&xu(e,d,s[d])}function Mo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ra(e){return pf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ni=null;function Mn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Li=null,ki=null;function Oo(e){var s=ii(e);if(s&&(e=s.stateNode)){var a=e[Te]||null;t:switch(e=s.stateNode,s.type){case"input":if(En(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+be(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==e&&l.form===e.form){var h=l[Te]||null;if(!h)throw Error(r(90));En(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===e.form&&Do(l)}break t;case"textarea":te(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Oi(e,!!a.multiple,s,!1)}}}var ai=!1;function Iu(e,s,a){if(ai)return e(s,a);ai=!0;try{var l=e(s);return l}finally{if(ai=!1,(Li!==null||ki!==null)&&(bc(),Li&&(s=Li,e=ki,ki=Li=null,Oo(s),e)))for(s=0;s<e.length;s++)Oo(e[s])}}function gr(e,s){var a=e.stateNode;if(a===null)return null;var l=a[Te]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),On=!1;if(Xn)try{var pr={};Object.defineProperty(pr,"passive",{get:function(){On=!0}}),window.addEventListener("test",pr,pr),window.removeEventListener("test",pr,pr)}catch{On=!1}var oi=null,fs=null,Pi=null;function No(){if(Pi)return Pi;var e,s=fs,a=s.length,l,h="value"in oi?oi.value:oi.textContent,d=h.length;for(e=0;e<a&&s[e]===h[e];e++);var E=a-e;for(l=1;l<=E&&s[a-l]===h[d-l];l++);return Pi=h.slice(e,1<l?1-l:void 0)}function li(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function ui(){return!0}function Lo(){return!1}function Le(e){function s(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ui:Lo,this.isPropagationStopped=Lo,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),s}var Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=Le(Xt),yr=v({},Xt,{view:0,detail:0}),Du=Le(yr),oa,la,ci,_r=v({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&e.type==="mousemove"?(oa=e.screenX-ci.screenX,la=e.screenY-ci.screenY):la=oa=0,ci=e),oa)},movementY:function(e){return"movementY"in e?e.movementY:la}}),Nn=Le(_r),Vu=v({},_r,{dataTransfer:0}),yf=Le(Vu),vr=v({},yr,{relatedTarget:0}),ua=Le(vr),ko=v({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0}),ca=Le(ko),Mu=v({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ha=Le(Mu),_f=v({},Xt,{data:0}),Po=Le(_f),Er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jo(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Nu[e])?!!s[e]:!1}function Tr(){return jo}var Lu=v({},yr,{key:function(e){if(e.key){var s=Er[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ou[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fa=Le(Lu),ku=v({},_r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uo=Le(ku),ji=v({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr}),Pu=Le(ji),ju=v({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uu=Le(ju),zu=v({},_r,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),da=Le(zu),on=v({},Xt,{newState:0,oldState:0}),Bu=Le(on),qu=[9,13,27,32],hi=Xn&&"CompositionEvent"in window,c=null;Xn&&"documentMode"in document&&(c=document.documentMode);var p=Xn&&"TextEvent"in window&&!c,_=Xn&&(!hi||c&&8<c&&11>=c),A=" ",G=!1;function W(e,s){switch(e){case"keyup":return qu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ft(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bt=!1;function xe(e,s){switch(e){case"compositionend":return ft(s);case"keypress":return s.which!==32?null:(G=!0,A);case"textInput":return e=s.data,e===A&&G?null:e;default:return null}}function qt(e,s){if(Bt)return e==="compositionend"||!hi&&W(e,s)?(e=No(),Pi=fs=oi=null,Bt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _&&s.locale!=="ko"?null:s.data;default:return null}}var ke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ie(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!ke[e.type]:s==="textarea"}function Ui(e,s,a,l){Li?ki?ki.push(l):ki=[l]:Li=l,s=xc(s,"onChange"),0<s.length&&(a=new aa("onChange","change",null,a,l),e.push({event:a,listeners:s}))}var Ge=null,fi=null;function zo(e){$p(e,0)}function Hu(e){var s=si(e);if(Do(s))return e}function yg(e,s){if(e==="change")return s}var _g=!1;if(Xn){var vf;if(Xn){var Ef="oninput"in document;if(!Ef){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),Ef=typeof vg.oninput=="function"}vf=Ef}else vf=!1;_g=vf&&(!document.documentMode||9<document.documentMode)}function Eg(){Ge&&(Ge.detachEvent("onpropertychange",Tg),fi=Ge=null)}function Tg(e){if(e.propertyName==="value"&&Hu(fi)){var s=[];Ui(s,fi,e,Mn(e)),Iu(zo,s)}}function E4(e,s,a){e==="focusin"?(Eg(),Ge=s,fi=a,Ge.attachEvent("onpropertychange",Tg)):e==="focusout"&&Eg()}function T4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hu(fi)}function b4(e,s){if(e==="click")return Hu(s)}function S4(e,s){if(e==="input"||e==="change")return Hu(s)}function A4(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Tn=typeof Object.is=="function"?Object.is:A4;function Bo(e,s){if(Tn(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!tr.call(s,h)||!Tn(e[h],s[h]))return!1}return!0}function bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sg(e,s){var a=bg(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=s&&l>=s)return{node:a,offset:s-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=bg(a)}}function Ag(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Ag(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function wg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=hr(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=hr(e.document)}return s}function Tf(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var w4=Xn&&"documentMode"in document&&11>=document.documentMode,ma=null,bf=null,qo=null,Sf=!1;function Cg(e,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sf||ma==null||ma!==hr(l)||(l=ma,"selectionStart"in l&&Tf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),qo&&Bo(qo,l)||(qo=l,l=xc(bf,"onSelect"),0<l.length&&(s=new aa("onSelect","select",null,s,a),e.push({event:s,listeners:l}),s.target=ma)))}function br(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var ga={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionrun:br("Transition","TransitionRun"),transitionstart:br("Transition","TransitionStart"),transitioncancel:br("Transition","TransitionCancel"),transitionend:br("Transition","TransitionEnd")},Af={},Rg={};Xn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Sr(e){if(Af[e])return Af[e];if(!ga[e])return e;var s=ga[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in Rg)return Af[e]=s[a];return e}var xg=Sr("animationend"),Ig=Sr("animationiteration"),Dg=Sr("animationstart"),C4=Sr("transitionrun"),R4=Sr("transitionstart"),x4=Sr("transitioncancel"),Vg=Sr("transitionend"),Mg=new Map,wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wf.push("scrollEnd");function $n(e,s){Mg.set(e,s),Kn(s,[e])}var Og=new WeakMap;function Ln(e,s){if(typeof e=="object"&&e!==null){var a=Og.get(e);return a!==void 0?a:(s={value:e,source:s,stack:ia(s)},Og.set(e,s),s)}return{value:e,source:s,stack:ia(s)}}var kn=[],pa=0,Cf=0;function Gu(){for(var e=pa,s=Cf=pa=0;s<e;){var a=kn[s];kn[s++]=null;var l=kn[s];kn[s++]=null;var h=kn[s];kn[s++]=null;var d=kn[s];if(kn[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&Ng(a,h,d)}}function Fu(e,s,a,l){kn[pa++]=e,kn[pa++]=s,kn[pa++]=a,kn[pa++]=l,Cf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Rf(e,s,a,l){return Fu(e,s,a,l),Qu(e)}function ya(e,s){return Fu(e,null,null,s),Qu(e)}function Ng(e,s,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&s!==null&&(h=31-Je(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[s]:l.push(s),s.lane=a|536870912),d):null}function Qu(e){if(50<dl)throw dl=0,Od=null,Error(r(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var _a={};function I4(e,s,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,s,a,l){return new I4(e,s,a,l)}function xf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zi(e,s){var a=e.alternate;return a===null?(a=bn(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Lg(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Yu(e,s,a,l,h,d){var E=0;if(l=e,typeof e=="function")xf(e)&&(E=1);else if(typeof e=="string")E=V6(e,a,_t.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case x:return e=bn(31,a,s,h),e.elementType=x,e.lanes=d,e;case I:return Ar(a.children,h,d,s);case P:E=8,h|=24;break;case N:return e=bn(12,a,s,h|2),e.elementType=N,e.lanes=d,e;case et:return e=bn(13,a,s,h),e.elementType=et,e.lanes=d,e;case tt:return e=bn(19,a,s,h),e.elementType=tt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:case B:E=10;break t;case J:E=9;break t;case H:E=11;break t;case D:E=14;break t;case C:E=16,l=null;break t}E=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return s=bn(E,a,s,h),s.elementType=e,s.type=l,s.lanes=d,s}function Ar(e,s,a,l){return e=bn(7,e,l,s),e.lanes=a,e}function If(e,s,a){return e=bn(6,e,null,s),e.lanes=a,e}function Df(e,s,a){return s=bn(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var va=[],Ea=0,Ku=null,Xu=0,Pn=[],jn=0,wr=null,Bi=1,qi="";function Cr(e,s){va[Ea++]=Xu,va[Ea++]=Ku,Ku=e,Xu=s}function kg(e,s,a){Pn[jn++]=Bi,Pn[jn++]=qi,Pn[jn++]=wr,wr=e;var l=Bi;e=qi;var h=32-Je(l)-1;l&=~(1<<h),a+=1;var d=32-Je(s)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,Bi=1<<32-Je(s)+h|a<<h|l,qi=d+e}else Bi=1<<d|a<<h|l,qi=e}function Vf(e){e.return!==null&&(Cr(e,1),kg(e,1,0))}function Mf(e){for(;e===Ku;)Ku=va[--Ea],va[Ea]=null,Xu=va[--Ea],va[Ea]=null;for(;e===wr;)wr=Pn[--jn],Pn[jn]=null,qi=Pn[--jn],Pn[jn]=null,Bi=Pn[--jn],Pn[jn]=null}var ln=null,ge=null,Yt=!1,Rr=null,di=!1,Of=Error(r(519));function xr(e){var s=Error(r(418,""));throw Fo(Ln(s,e)),Of}function Pg(e){var s=e.stateNode,a=e.type,l=e.memoizedProps;switch(s[Re]=e,s[Te]=l,a){case"dialog":jt("cancel",s),jt("close",s);break;case"iframe":case"object":case"embed":jt("load",s);break;case"video":case"audio":for(a=0;a<gl.length;a++)jt(gl[a],s);break;case"source":jt("error",s);break;case"img":case"image":case"link":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"input":jt("invalid",s),fr(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),sa(s);break;case"select":jt("invalid",s);break;case"textarea":jt("invalid",s),dr(s,l.value,l.defaultValue,l.children),sa(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||t2(s.textContent,a)?(l.popover!=null&&(jt("beforetoggle",s),jt("toggle",s)),l.onScroll!=null&&jt("scroll",s),l.onScrollEnd!=null&&jt("scrollend",s),l.onClick!=null&&(s.onclick=Ic),s=!0):s=!1,s||xr(e)}function jg(e){for(ln=e.return;ln;)switch(ln.tag){case 5:case 13:di=!1;return;case 27:case 3:di=!0;return;default:ln=ln.return}}function Ho(e){if(e!==ln)return!1;if(!Yt)return jg(e),Yt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Xd(e.type,e.memoizedProps)),a=!a),a&&ge&&xr(e),jg(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){ge=Jn(e.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}ge=null}}else s===27?(s=ge,xs(e.type)?(e=Wd,Wd=null,ge=e):ge=s):ge=ln?Jn(e.stateNode.nextSibling):null;return!0}function Go(){ge=ln=null,Yt=!1}function Ug(){var e=Rr;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),Rr=null),e}function Fo(e){Rr===null?Rr=[e]:Rr.push(e)}var Nf=st(null),Ir=null,Hi=null;function ds(e,s,a){ut(Nf,s._currentValue),s._currentValue=a}function Gi(e){e._currentValue=Nf.current,ht(Nf)}function Lf(e,s,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===a)break;e=e.return}}function kf(e,s,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=h;for(var M=0;M<s.length;M++)if(S.context===s[M]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Lf(d.return,a,e),l||(E=null);break t}d=S.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Lf(E,a,e),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===e){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Qo(e,s,a,l){e=null;for(var h=s,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=h.type;Tn(h.pendingProps.value,E.value)||(e!==null?e.push(S):e=[S])}}else if(h===Kt.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Tl):e=[Tl])}h=h.return}e!==null&&kf(s,e,a,l),s.flags|=262144}function $u(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Dr(e){Ir=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return zg(Ir,e)}function Zu(e,s){return Ir===null&&Dr(e),zg(e,s)}function zg(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Hi===null){if(e===null)throw Error(r(308));Hi=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Hi=Hi.next=s;return a}var D4=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},V4=i.unstable_scheduleCallback,M4=i.unstable_NormalPriority,De={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pf(){return{controller:new D4,data:new Map,refCount:0}}function Yo(e){e.refCount--,e.refCount===0&&V4(M4,function(){e.controller.abort()})}var Ko=null,jf=0,Ta=0,ba=null;function O4(e,s){if(Ko===null){var a=Ko=[];jf=0,Ta=zd(),ba={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jf++,s.then(Bg,Bg),s}function Bg(){if(--jf===0&&Ko!==null){ba!==null&&(ba.status="fulfilled");var e=Ko;Ko=null,Ta=0,ba=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function N4(e,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var qg=Y.S;Y.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&O4(e,s),qg!==null&&qg(e,s)};var Vr=st(null);function Uf(){var e=Vr.current;return e!==null?e:re.pooledCache}function Ju(e,s){s===null?ut(Vr,Vr.current):ut(Vr,s.pool)}function Hg(){var e=Uf();return e===null?null:{parent:De._currentValue,pool:e}}var Xo=Error(r(460)),Gg=Error(r(474)),Wu=Error(r(542)),zf={then:function(){}};function Fg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tc(){}function Qg(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(tc,tc),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Kg(e),e;default:if(typeof s.status=="string")s.then(tc,tc);else{if(e=re,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Kg(e),e}throw $o=s,Xo}}var $o=null;function Yg(){if($o===null)throw Error(r(459));var e=$o;return $o=null,e}function Kg(e){if(e===Xo||e===Wu)throw Error(r(483))}var ms=!1;function Bf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qf(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function gs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ps(e,s,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Jt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=Qu(e),Ng(e,null,a),s}return Fu(e,l,s,a),Qu(e)}function Zo(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,wo(e,a)}}function Hf(e,s){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=s:d=d.next=s}else h=d=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var Gf=!1;function Jo(){if(Gf){var e=ba;if(e!==null)throw e}}function Wo(e,s,a,l){Gf=!1;var h=e.updateQueue;ms=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var M=S,Q=M.next;M.next=null,E===null?d=Q:E.next=Q,E=M;var nt=e.alternate;nt!==null&&(nt=nt.updateQueue,S=nt.lastBaseUpdate,S!==E&&(S===null?nt.firstBaseUpdate=Q:S.next=Q,nt.lastBaseUpdate=M))}if(d!==null){var rt=h.baseState;E=0,nt=Q=M=null,S=d;do{var X=S.lane&-536870913,$=X!==S.lane;if($?(Ht&X)===X:(l&X)===X){X!==0&&X===Ta&&(Gf=!0),nt!==null&&(nt=nt.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Rt=e,At=S;X=s;var ie=a;switch(At.tag){case 1:if(Rt=At.payload,typeof Rt=="function"){rt=Rt.call(ie,rt,X);break t}rt=Rt;break t;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=At.payload,X=typeof Rt=="function"?Rt.call(ie,rt,X):Rt,X==null)break t;rt=v({},rt,X);break t;case 2:ms=!0}}X=S.callback,X!==null&&(e.flags|=64,$&&(e.flags|=8192),$=h.callbacks,$===null?h.callbacks=[X]:$.push(X))}else $={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},nt===null?(Q=nt=$,M=rt):nt=nt.next=$,E|=X;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;$=S,S=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);nt===null&&(M=rt),h.baseState=M,h.firstBaseUpdate=Q,h.lastBaseUpdate=nt,d===null&&(h.shared.lanes=0),As|=E,e.lanes=E,e.memoizedState=rt}}function Xg(e,s){if(typeof e!="function")throw Error(r(191,e));e.call(s)}function $g(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Xg(a[e],s)}var Sa=st(null),ec=st(0);function Zg(e,s){e=Zi,ut(ec,e),ut(Sa,s),Zi=e|s.baseLanes}function Ff(){ut(ec,Zi),ut(Sa,Sa.current)}function Qf(){Zi=ec.current,ht(Sa),ht(ec)}var ys=0,Ot=null,ee=null,Se=null,nc=!1,Aa=!1,Mr=!1,ic=0,tl=0,wa=null,L4=0;function _e(){throw Error(r(321))}function Yf(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!Tn(e[a],s[a]))return!1;return!0}function Kf(e,s,a,l,h,d){return ys=d,Ot=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=e===null||e.memoizedState===null?N0:L0,Mr=!1,d=a(l,h),Mr=!1,Aa&&(d=Wg(s,a,l,h)),Jg(e),d}function Jg(e){Y.H=uc;var s=ee!==null&&ee.next!==null;if(ys=0,Se=ee=Ot=null,nc=!1,tl=0,wa=null,s)throw Error(r(300));e===null||Pe||(e=e.dependencies,e!==null&&$u(e)&&(Pe=!0))}function Wg(e,s,a,l){Ot=e;var h=0;do{if(Aa&&(wa=null),tl=0,Aa=!1,25<=h)throw Error(r(301));if(h+=1,Se=ee=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=q4,d=s(a,l)}while(Aa);return d}function k4(){var e=Y.H,s=e.useState()[0];return s=typeof s.then=="function"?el(s):s,e=e.useState()[0],(ee!==null?ee.memoizedState:null)!==e&&(Ot.flags|=1024),s}function Xf(){var e=ic!==0;return ic=0,e}function $f(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function Zf(e){if(nc){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}nc=!1}ys=0,Se=ee=Ot=null,Aa=!1,tl=ic=0,wa=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?Ot.memoizedState=Se=e:Se=Se.next=e,Se}function Ae(){if(ee===null){var e=Ot.alternate;e=e!==null?e.memoizedState:null}else e=ee.next;var s=Se===null?Ot.memoizedState:Se.next;if(s!==null)Se=s,ee=e;else{if(e===null)throw Ot.alternate===null?Error(r(467)):Error(r(310));ee=e,e={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},Se===null?Ot.memoizedState=Se=e:Se=Se.next=e}return Se}function Jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function el(e){var s=tl;return tl+=1,wa===null&&(wa=[]),e=Qg(wa,e,s),s=Ot,(Se===null?s.memoizedState:Se.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?N0:L0),e}function sc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return el(e);if(e.$$typeof===B)return We(e)}throw Error(r(438,String(e)))}function Wf(e){var s=null,a=Ot.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ot.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Jf(),Ot.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),l=0;l<e;l++)a[l]=L;return s.index++,a}function Fi(e,s){return typeof s=="function"?s(e):s}function rc(e){var s=Ae();return td(s,ee,e)}function td(e,s,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}s.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{s=h.next;var S=E=null,M=null,Q=s,nt=!1;do{var rt=Q.lane&-536870913;if(rt!==Q.lane?(Ht&rt)===rt:(ys&rt)===rt){var X=Q.revertLane;if(X===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),rt===Ta&&(nt=!0);else if((ys&X)===X){Q=Q.next,X===Ta&&(nt=!0);continue}else rt={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(S=M=rt,E=d):M=M.next=rt,Ot.lanes|=X,As|=X;rt=Q.action,Mr&&a(d,rt),d=Q.hasEagerState?Q.eagerState:a(d,rt)}else X={lane:rt,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},M===null?(S=M=X,E=d):M=M.next=X,Ot.lanes|=rt,As|=rt;Q=Q.next}while(Q!==null&&Q!==s);if(M===null?E=d:M.next=S,!Tn(d,e.memoizedState)&&(Pe=!0,nt&&(a=ba,a!==null)))throw a;e.memoizedState=d,e.baseState=E,e.baseQueue=M,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ed(e){var s=Ae(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=e(d,E.action),E=E.next;while(E!==h);Tn(d,s.memoizedState)||(Pe=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function t0(e,s,a){var l=Ot,h=Ae(),d=Yt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var E=!Tn((ee||h).memoizedState,a);E&&(h.memoizedState=a,Pe=!0),h=h.queue;var S=i0.bind(null,l,h,e);if(nl(2048,8,S,[e]),h.getSnapshot!==s||E||Se!==null&&Se.memoizedState.tag&1){if(l.flags|=2048,Ca(9,ac(),n0.bind(null,l,h,a,s),null),re===null)throw Error(r(349));d||(ys&124)!==0||e0(l,s,a)}return a}function e0(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=Ot.updateQueue,s===null?(s=Jf(),Ot.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function n0(e,s,a,l){s.value=a,s.getSnapshot=l,s0(s)&&r0(e)}function i0(e,s,a){return a(function(){s0(s)&&r0(e)})}function s0(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!Tn(e,a)}catch{return!0}}function r0(e){var s=ya(e,2);s!==null&&Rn(s,e,2)}function nd(e){var s=cn();if(typeof e=="function"){var a=e;if(e=a(),Mr){vn(!0);try{a()}finally{vn(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:e},s}function a0(e,s,a,l){return e.baseState=a,td(e,ee,typeof l=="function"?l:Fi)}function P4(e,s,a,l,h){if(lc(e))throw Error(r(485));if(e=s.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};Y.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,o0(s,d)):(d.next=a.next,s.pending=a.next=d)}}function o0(e,s){var a=s.action,l=s.payload,h=e.state;if(s.isTransition){var d=Y.T,E={};Y.T=E;try{var S=a(h,l),M=Y.S;M!==null&&M(E,S),l0(e,s,S)}catch(Q){id(e,s,Q)}finally{Y.T=d}}else try{d=a(h,l),l0(e,s,d)}catch(Q){id(e,s,Q)}}function l0(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){u0(e,s,l)},function(l){return id(e,s,l)}):u0(e,s,a)}function u0(e,s,a){s.status="fulfilled",s.value=a,c0(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,o0(e,a)))}function id(e,s,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,c0(s),s=s.next;while(s!==l)}e.action=null}function c0(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function h0(e,s){return s}function f0(e,s){if(Yt){var a=re.formState;if(a!==null){t:{var l=Ot;if(Yt){if(ge){e:{for(var h=ge,d=di;h.nodeType!==8;){if(!d){h=null;break e}if(h=Jn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ge=Jn(h.nextSibling),l=h.data==="F!";break t}}xr(l)}l=!1}l&&(s=a[0])}}return a=cn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h0,lastRenderedState:s},a.queue=l,a=V0.bind(null,Ot,l),l.dispatch=a,l=nd(!1),d=ld.bind(null,Ot,!1,l.queue),l=cn(),h={state:s,dispatch:null,action:e,pending:null},l.queue=h,a=P4.bind(null,Ot,h,d,a),h.dispatch=a,l.memoizedState=e,[s,a,!1]}function d0(e){var s=Ae();return m0(s,ee,e)}function m0(e,s,a){if(s=td(e,s,h0)[0],e=rc(Fi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=el(s)}catch(E){throw E===Xo?Wu:E}else l=s;s=Ae();var h=s.queue,d=h.dispatch;return a!==s.memoizedState&&(Ot.flags|=2048,Ca(9,ac(),j4.bind(null,h,a),null)),[l,d,e]}function j4(e,s){e.action=s}function g0(e){var s=Ae(),a=ee;if(a!==null)return m0(s,a,e);Ae(),s=s.memoizedState,a=Ae();var l=a.queue.dispatch;return a.memoizedState=e,[s,l,!1]}function Ca(e,s,a,l){return e={tag:e,create:a,deps:l,inst:s,next:null},s=Ot.updateQueue,s===null&&(s=Jf(),Ot.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,s.lastEffect=e),e}function ac(){return{destroy:void 0,resource:void 0}}function p0(){return Ae().memoizedState}function oc(e,s,a,l){var h=cn();l=l===void 0?null:l,Ot.flags|=e,h.memoizedState=Ca(1|s,ac(),a,l)}function nl(e,s,a,l){var h=Ae();l=l===void 0?null:l;var d=h.memoizedState.inst;ee!==null&&l!==null&&Yf(l,ee.memoizedState.deps)?h.memoizedState=Ca(s,d,a,l):(Ot.flags|=e,h.memoizedState=Ca(1|s,d,a,l))}function y0(e,s){oc(8390656,8,e,s)}function _0(e,s){nl(2048,8,e,s)}function v0(e,s){return nl(4,2,e,s)}function E0(e,s){return nl(4,4,e,s)}function T0(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function b0(e,s,a){a=a!=null?a.concat([e]):null,nl(4,4,T0.bind(null,s,e),a)}function sd(){}function S0(e,s){var a=Ae();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Yf(s,l[1])?l[0]:(a.memoizedState=[e,s],e)}function A0(e,s){var a=Ae();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Yf(s,l[1]))return l[0];if(l=e(),Mr){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[l,s],l}function rd(e,s,a){return a===void 0||(ys&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=Rp(),Ot.lanes|=e,As|=e,a)}function w0(e,s,a,l){return Tn(a,s)?a:Sa.current!==null?(e=rd(e,a,l),Tn(e,s)||(Pe=!0),e):(ys&42)===0?(Pe=!0,e.memoizedState=a):(e=Rp(),Ot.lanes|=e,As|=e,s)}function C0(e,s,a,l,h){var d=Z.p;Z.p=d!==0&&8>d?d:8;var E=Y.T,S={};Y.T=S,ld(e,!1,s,a);try{var M=h(),Q=Y.S;if(Q!==null&&Q(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var nt=N4(M,l);il(e,s,nt,Cn(e))}else il(e,s,l,Cn(e))}catch(rt){il(e,s,{then:function(){},status:"rejected",reason:rt},Cn())}finally{Z.p=d,Y.T=E}}function U4(){}function ad(e,s,a,l){if(e.tag!==5)throw Error(r(476));var h=R0(e).queue;C0(e,h,s,ct,a===null?U4:function(){return x0(e),a(l)})}function R0(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:ct},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function x0(e){var s=R0(e).next.queue;il(e,s,{},Cn())}function od(){return We(Tl)}function I0(){return Ae().memoizedState}function D0(){return Ae().memoizedState}function z4(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=Cn();e=gs(a);var l=ps(s,e,a);l!==null&&(Rn(l,s,a),Zo(l,s,a)),s={cache:Pf()},e.payload=s;return}s=s.return}}function B4(e,s,a){var l=Cn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},lc(e)?M0(s,a):(a=Rf(e,s,a,l),a!==null&&(Rn(a,e,l),O0(a,s,l)))}function V0(e,s,a){var l=Cn();il(e,s,a,l)}function il(e,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(lc(e))M0(s,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var E=s.lastRenderedState,S=d(E,a);if(h.hasEagerState=!0,h.eagerState=S,Tn(S,E))return Fu(e,s,h,0),re===null&&Gu(),!1}catch{}finally{}if(a=Rf(e,s,h,l),a!==null)return Rn(a,e,l),O0(a,s,l),!0}return!1}function ld(e,s,a,l){if(l={lane:2,revertLane:zd(),action:l,hasEagerState:!1,eagerState:null,next:null},lc(e)){if(s)throw Error(r(479))}else s=Rf(e,a,l,2),s!==null&&Rn(s,e,2)}function lc(e){var s=e.alternate;return e===Ot||s!==null&&s===Ot}function M0(e,s){Aa=nc=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function O0(e,s,a){if((a&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,wo(e,a)}}var uc={readContext:We,use:sc,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},N0={readContext:We,use:sc,useCallback:function(e,s){return cn().memoizedState=[e,s===void 0?null:s],e},useContext:We,useEffect:y0,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,oc(4194308,4,T0.bind(null,s,e),a)},useLayoutEffect:function(e,s){return oc(4194308,4,e,s)},useInsertionEffect:function(e,s){oc(4,2,e,s)},useMemo:function(e,s){var a=cn();s=s===void 0?null:s;var l=e();if(Mr){vn(!0);try{e()}finally{vn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(e,s,a){var l=cn();if(a!==void 0){var h=a(s);if(Mr){vn(!0);try{a(s)}finally{vn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=B4.bind(null,Ot,e),[l.memoizedState,e]},useRef:function(e){var s=cn();return e={current:e},s.memoizedState=e},useState:function(e){e=nd(e);var s=e.queue,a=V0.bind(null,Ot,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:sd,useDeferredValue:function(e,s){var a=cn();return rd(a,e,s)},useTransition:function(){var e=nd(!1);return e=C0.bind(null,Ot,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var l=Ot,h=cn();if(Yt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),re===null)throw Error(r(349));(Ht&124)!==0||e0(l,s,a)}h.memoizedState=a;var d={value:a,getSnapshot:s};return h.queue=d,y0(i0.bind(null,l,d,e),[e]),l.flags|=2048,Ca(9,ac(),n0.bind(null,l,d,a,s),null),a},useId:function(){var e=cn(),s=re.identifierPrefix;if(Yt){var a=qi,l=Bi;a=(l&~(1<<32-Je(l)-1)).toString(32)+a,s=""+s+"R"+a,a=ic++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=L4++,s=""+s+"r"+a.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:od,useFormState:f0,useActionState:f0,useOptimistic:function(e){var s=cn();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=ld.bind(null,Ot,!0,a),a.dispatch=s,[e,s]},useMemoCache:Wf,useCacheRefresh:function(){return cn().memoizedState=z4.bind(null,Ot)}},L0={readContext:We,use:sc,useCallback:S0,useContext:We,useEffect:_0,useImperativeHandle:b0,useInsertionEffect:v0,useLayoutEffect:E0,useMemo:A0,useReducer:rc,useRef:p0,useState:function(){return rc(Fi)},useDebugValue:sd,useDeferredValue:function(e,s){var a=Ae();return w0(a,ee.memoizedState,e,s)},useTransition:function(){var e=rc(Fi)[0],s=Ae().memoizedState;return[typeof e=="boolean"?e:el(e),s]},useSyncExternalStore:t0,useId:I0,useHostTransitionStatus:od,useFormState:d0,useActionState:d0,useOptimistic:function(e,s){var a=Ae();return a0(a,ee,e,s)},useMemoCache:Wf,useCacheRefresh:D0},q4={readContext:We,use:sc,useCallback:S0,useContext:We,useEffect:_0,useImperativeHandle:b0,useInsertionEffect:v0,useLayoutEffect:E0,useMemo:A0,useReducer:ed,useRef:p0,useState:function(){return ed(Fi)},useDebugValue:sd,useDeferredValue:function(e,s){var a=Ae();return ee===null?rd(a,e,s):w0(a,ee.memoizedState,e,s)},useTransition:function(){var e=ed(Fi)[0],s=Ae().memoizedState;return[typeof e=="boolean"?e:el(e),s]},useSyncExternalStore:t0,useId:I0,useHostTransitionStatus:od,useFormState:g0,useActionState:g0,useOptimistic:function(e,s){var a=Ae();return ee!==null?a0(a,ee,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Wf,useCacheRefresh:D0},Ra=null,sl=0;function cc(e){var s=sl;return sl+=1,Ra===null&&(Ra=[]),Qg(Ra,e,s)}function rl(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function hc(e,s){throw s.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(s),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function k0(e){var s=e._init;return s(e._payload)}function P0(e){function s(z,j){if(e){var F=z.deletions;F===null?(z.deletions=[j],z.flags|=16):F.push(j)}}function a(z,j){if(!e)return null;for(;j!==null;)s(z,j),j=j.sibling;return null}function l(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function h(z,j){return z=zi(z,j),z.index=0,z.sibling=null,z}function d(z,j,F){return z.index=F,e?(F=z.alternate,F!==null?(F=F.index,F<j?(z.flags|=67108866,j):F):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function E(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function S(z,j,F,it){return j===null||j.tag!==6?(j=If(F,z.mode,it),j.return=z,j):(j=h(j,F),j.return=z,j)}function M(z,j,F,it){var yt=F.type;return yt===I?nt(z,j,F.props.children,it,F.key):j!==null&&(j.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===C&&k0(yt)===j.type)?(j=h(j,F.props),rl(j,F),j.return=z,j):(j=Yu(F.type,F.key,F.props,null,z.mode,it),rl(j,F),j.return=z,j)}function Q(z,j,F,it){return j===null||j.tag!==4||j.stateNode.containerInfo!==F.containerInfo||j.stateNode.implementation!==F.implementation?(j=Df(F,z.mode,it),j.return=z,j):(j=h(j,F.children||[]),j.return=z,j)}function nt(z,j,F,it,yt){return j===null||j.tag!==7?(j=Ar(F,z.mode,it,yt),j.return=z,j):(j=h(j,F),j.return=z,j)}function rt(z,j,F){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=If(""+j,z.mode,F),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case T:return F=Yu(j.type,j.key,j.props,null,z.mode,F),rl(F,j),F.return=z,F;case R:return j=Df(j,z.mode,F),j.return=z,j;case C:var it=j._init;return j=it(j._payload),rt(z,j,F)}if(dt(j)||U(j))return j=Ar(j,z.mode,F,null),j.return=z,j;if(typeof j.then=="function")return rt(z,cc(j),F);if(j.$$typeof===B)return rt(z,Zu(z,j),F);hc(z,j)}return null}function X(z,j,F,it){var yt=j!==null?j.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return yt!==null?null:S(z,j,""+F,it);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return F.key===yt?M(z,j,F,it):null;case R:return F.key===yt?Q(z,j,F,it):null;case C:return yt=F._init,F=yt(F._payload),X(z,j,F,it)}if(dt(F)||U(F))return yt!==null?null:nt(z,j,F,it,null);if(typeof F.then=="function")return X(z,j,cc(F),it);if(F.$$typeof===B)return X(z,j,Zu(z,F),it);hc(z,F)}return null}function $(z,j,F,it,yt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return z=z.get(F)||null,S(j,z,""+it,yt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case T:return z=z.get(it.key===null?F:it.key)||null,M(j,z,it,yt);case R:return z=z.get(it.key===null?F:it.key)||null,Q(j,z,it,yt);case C:var kt=it._init;return it=kt(it._payload),$(z,j,F,it,yt)}if(dt(it)||U(it))return z=z.get(F)||null,nt(j,z,it,yt,null);if(typeof it.then=="function")return $(z,j,F,cc(it),yt);if(it.$$typeof===B)return $(z,j,F,Zu(j,it),yt);hc(j,it)}return null}function Rt(z,j,F,it){for(var yt=null,kt=null,vt=j,wt=j=0,Ue=null;vt!==null&&wt<F.length;wt++){vt.index>wt?(Ue=vt,vt=null):Ue=vt.sibling;var Qt=X(z,vt,F[wt],it);if(Qt===null){vt===null&&(vt=Ue);break}e&&vt&&Qt.alternate===null&&s(z,vt),j=d(Qt,j,wt),kt===null?yt=Qt:kt.sibling=Qt,kt=Qt,vt=Ue}if(wt===F.length)return a(z,vt),Yt&&Cr(z,wt),yt;if(vt===null){for(;wt<F.length;wt++)vt=rt(z,F[wt],it),vt!==null&&(j=d(vt,j,wt),kt===null?yt=vt:kt.sibling=vt,kt=vt);return Yt&&Cr(z,wt),yt}for(vt=l(vt);wt<F.length;wt++)Ue=$(vt,z,wt,F[wt],it),Ue!==null&&(e&&Ue.alternate!==null&&vt.delete(Ue.key===null?wt:Ue.key),j=d(Ue,j,wt),kt===null?yt=Ue:kt.sibling=Ue,kt=Ue);return e&&vt.forEach(function(Os){return s(z,Os)}),Yt&&Cr(z,wt),yt}function At(z,j,F,it){if(F==null)throw Error(r(151));for(var yt=null,kt=null,vt=j,wt=j=0,Ue=null,Qt=F.next();vt!==null&&!Qt.done;wt++,Qt=F.next()){vt.index>wt?(Ue=vt,vt=null):Ue=vt.sibling;var Os=X(z,vt,Qt.value,it);if(Os===null){vt===null&&(vt=Ue);break}e&&vt&&Os.alternate===null&&s(z,vt),j=d(Os,j,wt),kt===null?yt=Os:kt.sibling=Os,kt=Os,vt=Ue}if(Qt.done)return a(z,vt),Yt&&Cr(z,wt),yt;if(vt===null){for(;!Qt.done;wt++,Qt=F.next())Qt=rt(z,Qt.value,it),Qt!==null&&(j=d(Qt,j,wt),kt===null?yt=Qt:kt.sibling=Qt,kt=Qt);return Yt&&Cr(z,wt),yt}for(vt=l(vt);!Qt.done;wt++,Qt=F.next())Qt=$(vt,z,wt,Qt.value,it),Qt!==null&&(e&&Qt.alternate!==null&&vt.delete(Qt.key===null?wt:Qt.key),j=d(Qt,j,wt),kt===null?yt=Qt:kt.sibling=Qt,kt=Qt);return e&&vt.forEach(function(H6){return s(z,H6)}),Yt&&Cr(z,wt),yt}function ie(z,j,F,it){if(typeof F=="object"&&F!==null&&F.type===I&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case T:t:{for(var yt=F.key;j!==null;){if(j.key===yt){if(yt=F.type,yt===I){if(j.tag===7){a(z,j.sibling),it=h(j,F.props.children),it.return=z,z=it;break t}}else if(j.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===C&&k0(yt)===j.type){a(z,j.sibling),it=h(j,F.props),rl(it,F),it.return=z,z=it;break t}a(z,j);break}else s(z,j);j=j.sibling}F.type===I?(it=Ar(F.props.children,z.mode,it,F.key),it.return=z,z=it):(it=Yu(F.type,F.key,F.props,null,z.mode,it),rl(it,F),it.return=z,z=it)}return E(z);case R:t:{for(yt=F.key;j!==null;){if(j.key===yt)if(j.tag===4&&j.stateNode.containerInfo===F.containerInfo&&j.stateNode.implementation===F.implementation){a(z,j.sibling),it=h(j,F.children||[]),it.return=z,z=it;break t}else{a(z,j);break}else s(z,j);j=j.sibling}it=Df(F,z.mode,it),it.return=z,z=it}return E(z);case C:return yt=F._init,F=yt(F._payload),ie(z,j,F,it)}if(dt(F))return Rt(z,j,F,it);if(U(F)){if(yt=U(F),typeof yt!="function")throw Error(r(150));return F=yt.call(F),At(z,j,F,it)}if(typeof F.then=="function")return ie(z,j,cc(F),it);if(F.$$typeof===B)return ie(z,j,Zu(z,F),it);hc(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,j!==null&&j.tag===6?(a(z,j.sibling),it=h(j,F),it.return=z,z=it):(a(z,j),it=If(F,z.mode,it),it.return=z,z=it),E(z)):a(z,j)}return function(z,j,F,it){try{sl=0;var yt=ie(z,j,F,it);return Ra=null,yt}catch(vt){if(vt===Xo||vt===Wu)throw vt;var kt=bn(29,vt,null,z.mode);return kt.lanes=it,kt.return=z,kt}finally{}}}var xa=P0(!0),j0=P0(!1),Un=st(null),mi=null;function _s(e){var s=e.alternate;ut(Ve,Ve.current&1),ut(Un,e),mi===null&&(s===null||Sa.current!==null||s.memoizedState!==null)&&(mi=e)}function U0(e){if(e.tag===22){if(ut(Ve,Ve.current),ut(Un,e),mi===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(mi=e)}}else vs()}function vs(){ut(Ve,Ve.current),ut(Un,Un.current)}function Qi(e){ht(Un),mi===e&&(mi=null),ht(Ve)}var Ve=st(0);function fc(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jd(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ud(e,s,a,l){s=e.memoizedState,a=a(l,s),a=a==null?s:v({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var cd={enqueueSetState:function(e,s,a){e=e._reactInternals;var l=Cn(),h=gs(l);h.payload=s,a!=null&&(h.callback=a),s=ps(e,h,l),s!==null&&(Rn(s,e,l),Zo(s,e,l))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var l=Cn(),h=gs(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=ps(e,h,l),s!==null&&(Rn(s,e,l),Zo(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=Cn(),l=gs(a);l.tag=2,s!=null&&(l.callback=s),s=ps(e,l,a),s!==null&&(Rn(s,e,a),Zo(s,e,a))}};function z0(e,s,a,l,h,d,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,E):s.prototype&&s.prototype.isPureReactComponent?!Bo(a,l)||!Bo(h,d):!0}function B0(e,s,a,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==e&&cd.enqueueReplaceState(s,s.state,null)}function Or(e,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(e=e.defaultProps){a===s&&(a=v({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var dc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function q0(e){dc(e)}function H0(e){console.error(e)}function G0(e){dc(e)}function mc(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function F0(e,s,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hd(e,s,a){return a=gs(a),a.tag=3,a.payload={element:null},a.callback=function(){mc(e,s)},a}function Q0(e){return e=gs(e),e.tag=3,e}function Y0(e,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){F0(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){F0(s,a,l),typeof h!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function H4(e,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Qo(s,a,h,!0),a=Un.current,a!==null){switch(a.tag){case 13:return mi===null?Ld():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===zf?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Pd(e,l,h)),!1;case 22:return a.flags|=65536,l===zf?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Pd(e,l,h)),!1}throw Error(r(435,a.tag))}return Pd(e,l,h),Ld(),!1}if(Yt)return s=Un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Of&&(e=Error(r(422),{cause:l}),Fo(Ln(e,a)))):(l!==Of&&(s=Error(r(423),{cause:l}),Fo(Ln(s,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Ln(l,a),h=hd(e.stateNode,l,h),Hf(e,h),pe!==4&&(pe=2)),!1;var d=Error(r(520),{cause:l});if(d=Ln(d,a),fl===null?fl=[d]:fl.push(d),pe!==4&&(pe=2),s===null)return!0;l=Ln(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=hd(a.stateNode,l,e),Hf(a,e),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ws===null||!ws.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Q0(h),Y0(h,e,a,l),Hf(a,h),!1}a=a.return}while(a!==null);return!1}var K0=Error(r(461)),Pe=!1;function Fe(e,s,a,l){s.child=e===null?j0(s,null,a,l):xa(s,e.child,a,l)}function X0(e,s,a,l,h){a=a.render;var d=s.ref;if("ref"in l){var E={};for(var S in l)S!=="ref"&&(E[S]=l[S])}else E=l;return Dr(s),l=Kf(e,s,a,E,d,h),S=Xf(),e!==null&&!Pe?($f(e,s,h),Yi(e,s,h)):(Yt&&S&&Vf(s),s.flags|=1,Fe(e,s,l,h),s.child)}function $0(e,s,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!xf(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Z0(e,s,d,l,h)):(e=Yu(a.type,null,l,s,s.mode,h),e.ref=s.ref,e.return=s,s.child=e)}if(d=e.child,!vd(e,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Bo,a(E,l)&&e.ref===s.ref)return Yi(e,s,h)}return s.flags|=1,e=zi(d,l),e.ref=s.ref,e.return=s,s.child=e}function Z0(e,s,a,l,h){if(e!==null){var d=e.memoizedProps;if(Bo(d,l)&&e.ref===s.ref)if(Pe=!1,s.pendingProps=l=d,vd(e,h))(e.flags&131072)!==0&&(Pe=!0);else return s.lanes=e.lanes,Yi(e,s,h)}return fd(e,s,a,l,h)}function J0(e,s,a){var l=s.pendingProps,h=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(h=s.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;s.childLanes=d&~l}else s.childLanes=0,s.child=null;return W0(e,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ju(s,d!==null?d.cachePool:null),d!==null?Zg(s,d):Ff(),U0(s);else return s.lanes=s.childLanes=536870912,W0(e,s,d!==null?d.baseLanes|a:a,a)}else d!==null?(Ju(s,d.cachePool),Zg(s,d),vs(),s.memoizedState=null):(e!==null&&Ju(s,null),Ff(),vs());return Fe(e,s,h,a),s.child}function W0(e,s,a,l){var h=Uf();return h=h===null?null:{parent:De._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},e!==null&&Ju(s,null),Ff(),U0(s),e!==null&&Qo(e,s,l,!0),null}function gc(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function fd(e,s,a,l,h){return Dr(s),a=Kf(e,s,a,l,void 0,h),l=Xf(),e!==null&&!Pe?($f(e,s,h),Yi(e,s,h)):(Yt&&l&&Vf(s),s.flags|=1,Fe(e,s,a,h),s.child)}function tp(e,s,a,l,h,d){return Dr(s),s.updateQueue=null,a=Wg(s,l,a,h),Jg(e),l=Xf(),e!==null&&!Pe?($f(e,s,d),Yi(e,s,d)):(Yt&&l&&Vf(s),s.flags|=1,Fe(e,s,a,d),s.child)}function ep(e,s,a,l,h){if(Dr(s),s.stateNode===null){var d=_a,E=a.contextType;typeof E=="object"&&E!==null&&(d=We(E)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=cd,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Bf(s),E=a.contextType,d.context=typeof E=="object"&&E!==null?We(E):_a,d.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(ud(s,a,E,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&cd.enqueueReplaceState(d,d.state,null),Wo(s,l,d,h),Jo(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){d=s.stateNode;var S=s.memoizedProps,M=Or(a,S);d.props=M;var Q=d.context,nt=a.contextType;E=_a,typeof nt=="object"&&nt!==null&&(E=We(nt));var rt=a.getDerivedStateFromProps;nt=typeof rt=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,nt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||Q!==E)&&B0(s,d,l,E),ms=!1;var X=s.memoizedState;d.state=X,Wo(s,l,d,h),Jo(),Q=s.memoizedState,S||X!==Q||ms?(typeof rt=="function"&&(ud(s,a,rt,l),Q=s.memoizedState),(M=ms||z0(s,a,M,l,X,Q,E))?(nt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Q),d.props=l,d.state=Q,d.context=E,l=M):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,qf(e,s),E=s.memoizedProps,nt=Or(a,E),d.props=nt,rt=s.pendingProps,X=d.context,Q=a.contextType,M=_a,typeof Q=="object"&&Q!==null&&(M=We(Q)),S=a.getDerivedStateFromProps,(Q=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==rt||X!==M)&&B0(s,d,l,M),ms=!1,X=s.memoizedState,d.state=X,Wo(s,l,d,h),Jo();var $=s.memoizedState;E!==rt||X!==$||ms||e!==null&&e.dependencies!==null&&$u(e.dependencies)?(typeof S=="function"&&(ud(s,a,S,l),$=s.memoizedState),(nt=ms||z0(s,a,nt,l,X,$,M)||e!==null&&e.dependencies!==null&&$u(e.dependencies))?(Q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,M)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=$),d.props=l,d.state=$,d.context=M,l=nt):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=1024),l=!1)}return d=l,gc(e,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,e!==null&&l?(s.child=xa(s,e.child,null,h),s.child=xa(s,null,a,h)):Fe(e,s,a,h),s.memoizedState=d.state,e=s.child):e=Yi(e,s,h),e}function np(e,s,a,l){return Go(),s.flags|=256,Fe(e,s,a,l),s.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function md(e){return{baseLanes:e,cachePool:Hg()}}function gd(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=zn),e}function ip(e,s,a){var l=s.pendingProps,h=!1,d=(s.flags&128)!==0,E;if((E=d)||(E=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,e===null){if(Yt){if(h?_s(s):vs(),Yt){var S=ge,M;if(M=S){t:{for(M=S,S=di;M.nodeType!==8;){if(!S){S=null;break t}if(M=Jn(M.nextSibling),M===null){S=null;break t}}S=M}S!==null?(s.memoizedState={dehydrated:S,treeContext:wr!==null?{id:Bi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},M=bn(18,null,null,0),M.stateNode=S,M.return=s,s.child=M,ln=s,ge=null,M=!0):M=!1}M||xr(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Jd(S)?s.lanes=32:s.lanes=536870912,null;Qi(s)}return S=l.children,l=l.fallback,h?(vs(),h=s.mode,S=pc({mode:"hidden",children:S},h),l=Ar(l,h,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,h=s.child,h.memoizedState=md(a),h.childLanes=gd(e,E,a),s.memoizedState=dd,l):(_s(s),pd(s,S))}if(M=e.memoizedState,M!==null&&(S=M.dehydrated,S!==null)){if(d)s.flags&256?(_s(s),s.flags&=-257,s=yd(e,s,a)):s.memoizedState!==null?(vs(),s.child=e.child,s.flags|=128,s=null):(vs(),h=l.fallback,S=s.mode,l=pc({mode:"visible",children:l.children},S),h=Ar(h,S,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,xa(s,e.child,null,a),l=s.child,l.memoizedState=md(a),l.childLanes=gd(e,E,a),s.memoizedState=dd,s=h);else if(_s(s),Jd(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var Q=E.dgst;E=Q,l=Error(r(419)),l.stack="",l.digest=E,Fo({value:l,source:null,stack:null}),s=yd(e,s,a)}else if(Pe||Qo(e,s,a,!1),E=(a&e.childLanes)!==0,Pe||E){if(E=re,E!==null&&(l=a&-a,l=(l&42)!==0?1:as(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==M.retryLane))throw M.retryLane=l,ya(e,l),Rn(E,e,l),K0;S.data==="$?"||Ld(),s=yd(e,s,a)}else S.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=M.treeContext,ge=Jn(S.nextSibling),ln=s,Yt=!0,Rr=null,di=!1,e!==null&&(Pn[jn++]=Bi,Pn[jn++]=qi,Pn[jn++]=wr,Bi=e.id,qi=e.overflow,wr=s),s=pd(s,l.children),s.flags|=4096);return s}return h?(vs(),h=l.fallback,S=s.mode,M=e.child,Q=M.sibling,l=zi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,Q!==null?h=zi(Q,h):(h=Ar(h,S,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,S=e.child.memoizedState,S===null?S=md(a):(M=S.cachePool,M!==null?(Q=De._currentValue,M=M.parent!==Q?{parent:Q,pool:Q}:M):M=Hg(),S={baseLanes:S.baseLanes|a,cachePool:M}),h.memoizedState=S,h.childLanes=gd(e,E,a),s.memoizedState=dd,l):(_s(s),a=e.child,e=a.sibling,a=zi(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,e!==null&&(E=s.deletions,E===null?(s.deletions=[e],s.flags|=16):E.push(e)),s.child=a,s.memoizedState=null,a)}function pd(e,s){return s=pc({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function pc(e,s){return e=bn(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function yd(e,s,a){return xa(s,e.child,null,a),e=pd(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function sp(e,s,a){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),Lf(e.return,s,a)}function _d(e,s,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=s,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function rp(e,s,a){var l=s.pendingProps,h=l.revealOrder,d=l.tail;if(Fe(e,s,l.children,a),l=Ve.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sp(e,a,s);else if(e.tag===19)sp(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ut(Ve,l),h){case"forwards":for(a=s.child,h=null;a!==null;)e=a.alternate,e!==null&&fc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),_d(s,!1,h,a,d);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(e=h.alternate,e!==null&&fc(e)===null){s.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}_d(s,!0,a,null,d);break;case"together":_d(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Yi(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),As|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(Qo(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(r(153));if(s.child!==null){for(e=s.child,a=zi(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=zi(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function vd(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&$u(e)))}function G4(e,s,a){switch(s.tag){case 3:zt(s,s.stateNode.containerInfo),ds(s,De,e.memoizedState.cache),Go();break;case 27:case 5:qe(s);break;case 4:zt(s,s.stateNode.containerInfo);break;case 10:ds(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(_s(s),s.flags|=128,null):(a&s.child.childLanes)!==0?ip(e,s,a):(_s(s),e=Yi(e,s,a),e!==null?e.sibling:null);_s(s);break;case 19:var h=(e.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Qo(e,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return rp(e,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ut(Ve,Ve.current),l)break;return null;case 22:case 23:return s.lanes=0,J0(e,s,a);case 24:ds(s,De,e.memoizedState.cache)}return Yi(e,s,a)}function ap(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)Pe=!0;else{if(!vd(e,a)&&(s.flags&128)===0)return Pe=!1,G4(e,s,a);Pe=(e.flags&131072)!==0}else Pe=!1,Yt&&(s.flags&1048576)!==0&&kg(s,Xu,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")xf(l)?(e=Or(l,e),s.tag=1,s=ep(null,s,l,e,a)):(s.tag=0,s=fd(null,s,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===H){s.tag=11,s=X0(null,s,l,e,a);break t}else if(h===D){s.tag=14,s=$0(null,s,l,e,a);break t}}throw s=mt(l)||l,Error(r(306,s,""))}}return s;case 0:return fd(e,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Or(l,s.pendingProps),ep(e,s,l,h,a);case 3:t:{if(zt(s,s.stateNode.containerInfo),e===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;h=d.element,qf(e,s),Wo(s,l,null,a);var E=s.memoizedState;if(l=E.cache,ds(s,De,l),l!==d.cache&&kf(s,[De],a,!0),Jo(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=np(e,s,l,a);break t}else if(l!==h){h=Ln(Error(r(424)),s),Fo(h),s=np(e,s,l,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ge=Jn(e.firstChild),ln=s,Yt=!0,Rr=null,di=!0,a=j0(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Go(),l===h){s=Yi(e,s,a);break t}Fe(e,s,l,a)}s=s.child}return s;case 26:return gc(e,s),e===null?(a=c2(s.type,null,s.pendingProps,null))?s.memoizedState=a:Yt||(a=s.type,e=s.pendingProps,l=Dc(Tt.current).createElement(a),l[Re]=s,l[Te]=e,Ye(l,a,e),ye(l),s.stateNode=l):s.memoizedState=c2(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return qe(s),e===null&&Yt&&(l=s.stateNode=o2(s.type,s.pendingProps,Tt.current),ln=s,di=!0,h=ge,xs(s.type)?(Wd=h,ge=Jn(l.firstChild)):ge=h),Fe(e,s,s.pendingProps.children,a),gc(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Yt&&((h=l=ge)&&(l=_6(l,s.type,s.pendingProps,di),l!==null?(s.stateNode=l,ln=s,ge=Jn(l.firstChild),di=!1,h=!0):h=!1),h||xr(s)),qe(s),h=s.type,d=s.pendingProps,E=e!==null?e.memoizedProps:null,l=d.children,Xd(h,d)?l=null:E!==null&&Xd(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=Kf(e,s,k4,null,null,a),Tl._currentValue=h),gc(e,s),Fe(e,s,l,a),s.child;case 6:return e===null&&Yt&&((e=a=ge)&&(a=v6(a,s.pendingProps,di),a!==null?(s.stateNode=a,ln=s,ge=null,e=!0):e=!1),e||xr(s)),null;case 13:return ip(e,s,a);case 4:return zt(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=xa(s,null,l,a):Fe(e,s,l,a),s.child;case 11:return X0(e,s,s.type,s.pendingProps,a);case 7:return Fe(e,s,s.pendingProps,a),s.child;case 8:return Fe(e,s,s.pendingProps.children,a),s.child;case 12:return Fe(e,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,ds(s,s.type,l.value),Fe(e,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Dr(s),h=We(h),l=l(h),s.flags|=1,Fe(e,s,l,a),s.child;case 14:return $0(e,s,s.type,s.pendingProps,a);case 15:return Z0(e,s,s.type,s.pendingProps,a);case 19:return rp(e,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},e===null?(a=pc(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=zi(e.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return J0(e,s,a);case 24:return Dr(s),l=We(De),e===null?(h=Uf(),h===null&&(h=re,d=Pf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),s.memoizedState={parent:l,cache:h},Bf(s),ds(s,De,h)):((e.lanes&a)!==0&&(qf(e,s),Wo(s,null,null,a),Jo()),h=e.memoizedState,d=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ds(s,De,l)):(l=d.cache,ds(s,De,l),l!==h.cache&&kf(s,[De],a,!0))),Fe(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ki(e){e.flags|=4}function op(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!g2(s)){if(s=Un.current,s!==null&&((Ht&4194048)===Ht?mi!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||s!==mi))throw $o=zf,Gg;e.flags|=8192}}function yc(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?So():536870912,e.lanes|=s,Ma|=s)}function al(e,s){if(!Yt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ce(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(s)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,s}function F4(e,s,a){var l=s.pendingProps;switch(Mf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(s),null;case 1:return ce(s),null;case 3:return a=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Gi(De),de(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ho(s)?Ki(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ug())),ce(s),null;case 26:return a=s.memoizedState,e===null?(Ki(s),a!==null?(ce(s),op(s,a)):(ce(s),s.flags&=-16777217)):a?a!==e.memoizedState?(Ki(s),ce(s),op(s,a)):(ce(s),s.flags&=-16777217):(e.memoizedProps!==l&&Ki(s),ce(s),s.flags&=-16777217),null;case 27:Ri(s),a=Tt.current;var h=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Ki(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ce(s),null}e=_t.current,Ho(s)?Pg(s):(e=o2(h,l,a),s.stateNode=e,Ki(s))}return ce(s),null;case 5:if(Ri(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Ki(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ce(s),null}if(e=_t.current,Ho(s))Pg(s);else{switch(h=Dc(Tt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[Re]=s,e[Te]=l;t:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break t;for(;h.sibling===null;){if(h.return===null||h.return===s)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=e;t:switch(Ye(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Ki(s)}}return ce(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&Ki(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(e=Tt.current,Ho(s)){if(e=s.stateNode,a=s.memoizedProps,l=null,h=ln,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Re]=s,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||t2(e.nodeValue,a)),e||xr(s)}else e=Dc(e).createTextNode(l),e[Re]=s,s.stateNode=e}return ce(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ho(s),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Re]=s}else Go(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ce(s),h=!1}else h=Ug(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Qi(s),s):(Qi(s),null)}if(Qi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),yc(s,s.updateQueue),ce(s),null;case 4:return de(),e===null&&Gd(s.stateNode.containerInfo),ce(s),null;case 10:return Gi(s.type),ce(s),null;case 19:if(ht(Ve),h=s.memoizedState,h===null)return ce(s),null;if(l=(s.flags&128)!==0,d=h.rendering,d===null)if(l)al(h,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(d=fc(e),d!==null){for(s.flags|=128,al(h,!1),e=d.updateQueue,s.updateQueue=e,yc(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)Lg(a,e),a=a.sibling;return ut(Ve,Ve.current&1|2),s.child}e=e.sibling}h.tail!==null&&In()>Ec&&(s.flags|=128,l=!0,al(h,!1),s.lanes=4194304)}else{if(!l)if(e=fc(d),e!==null){if(s.flags|=128,l=!0,e=e.updateQueue,s.updateQueue=e,yc(s,e),al(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Yt)return ce(s),null}else 2*In()-h.renderingStartTime>Ec&&a!==536870912&&(s.flags|=128,l=!0,al(h,!1),s.lanes=4194304);h.isBackwards?(d.sibling=s.child,s.child=d):(e=h.last,e!==null?e.sibling=d:s.child=d,h.last=d)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=In(),s.sibling=null,e=Ve.current,ut(Ve,l?e&1|2:e&1),s):(ce(s),null);case 22:case 23:return Qi(s),Qf(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ce(s),s.subtreeFlags&6&&(s.flags|=8192)):ce(s),a=s.updateQueue,a!==null&&yc(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),e!==null&&ht(Vr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Gi(De),ce(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Q4(e,s){switch(Mf(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Gi(De),de(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Ri(s),null;case 13:if(Qi(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Go()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return ht(Ve),null;case 4:return de(),null;case 10:return Gi(s.type),null;case 22:case 23:return Qi(s),Qf(),e!==null&&ht(Vr),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Gi(De),null;case 25:return null;default:return null}}function lp(e,s){switch(Mf(s),s.tag){case 3:Gi(De),de();break;case 26:case 27:case 5:Ri(s);break;case 4:de();break;case 13:Qi(s);break;case 19:ht(Ve);break;case 10:Gi(s.type);break;case 22:case 23:Qi(s),Qf(),e!==null&&ht(Vr);break;case 24:Gi(De)}}function ol(e,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(S){se(s,s.return,S)}}function Es(e,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var E=l.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,h=s;var M=a,Q=S;try{Q()}catch(nt){se(h,M,nt)}}}l=l.next}while(l!==d)}}catch(nt){se(s,s.return,nt)}}function up(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{$g(s,a)}catch(l){se(e,e.return,l)}}}function cp(e,s,a){a.props=Or(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){se(e,s,l)}}function ll(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){se(e,s,h)}}function gi(e,s){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){se(e,s,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){se(e,s,h)}else a.current=null}function hp(e){var s=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){se(e,e.return,h)}}function Ed(e,s,a){try{var l=e.stateNode;d6(l,e.type,a,s),l[Te]=s}catch(h){se(e,e.return,h)}}function fp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xs(e.type)||e.tag===4}function Td(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||fp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bd(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ic));else if(l!==4&&(l===27&&xs(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(bd(e,s,a),e=e.sibling;e!==null;)bd(e,s,a),e=e.sibling}function _c(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(l!==4&&(l===27&&xs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(_c(e,s,a),e=e.sibling;e!==null;)_c(e,s,a),e=e.sibling}function dp(e){var s=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Ye(s,l,a),s[Re]=e,s[Te]=a}catch(d){se(e,e.return,d)}}var Xi=!1,ve=!1,Sd=!1,mp=typeof WeakSet=="function"?WeakSet:Set,je=null;function Y4(e,s){if(e=e.containerInfo,Yd=kc,e=wg(e),Tf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var E=0,S=-1,M=-1,Q=0,nt=0,rt=e,X=null;e:for(;;){for(var $;rt!==a||h!==0&&rt.nodeType!==3||(S=E+h),rt!==d||l!==0&&rt.nodeType!==3||(M=E+l),rt.nodeType===3&&(E+=rt.nodeValue.length),($=rt.firstChild)!==null;)X=rt,rt=$;for(;;){if(rt===e)break e;if(X===a&&++Q===h&&(S=E),X===d&&++nt===l&&(M=E),($=rt.nextSibling)!==null)break;rt=X,X=rt.parentNode}rt=$}a=S===-1||M===-1?null:{start:S,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kd={focusedElem:e,selectionRange:a},kc=!1,je=s;je!==null;)if(s=je,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,je=e;else for(;je!==null;){switch(s=je,d=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=s,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Rt=Or(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(Rt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(At){se(a,a.return,At)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)Zd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=s.sibling,e!==null){e.return=s.return,je=e;break}je=s.return}}function gp(e,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ts(e,a),l&4&&ol(5,a);break;case 1:if(Ts(e,a),l&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(E){se(a,a.return,E)}else{var h=Or(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(h,s,e.__reactInternalSnapshotBeforeUpdate)}catch(E){se(a,a.return,E)}}l&64&&up(a),l&512&&ll(a,a.return);break;case 3:if(Ts(e,a),l&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{$g(e,s)}catch(E){se(a,a.return,E)}}break;case 27:s===null&&l&4&&dp(a);case 26:case 5:Ts(e,a),s===null&&l&4&&hp(a),l&512&&ll(a,a.return);break;case 12:Ts(e,a);break;case 13:Ts(e,a),l&4&&_p(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=n6.bind(null,a),E6(e,a))));break;case 22:if(l=a.memoizedState!==null||Xi,!l){s=s!==null&&s.memoizedState!==null||ve,h=Xi;var d=ve;Xi=l,(ve=s)&&!d?bs(e,a,(a.subtreeFlags&8772)!==0):Ts(e,a),Xi=h,ve=d}break;case 30:break;default:Ts(e,a)}}function pp(e){var s=e.alternate;s!==null&&(e.alternate=null,pp(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&us(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var le=null,hn=!1;function $i(e,s,a){for(a=a.child;a!==null;)yp(e,s,a),a=a.sibling}function yp(e,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(me,a)}catch{}switch(a.tag){case 26:ve||gi(a,s),$i(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ve||gi(a,s);var l=le,h=hn;xs(a.type)&&(le=a.stateNode,hn=!1),$i(e,s,a),yl(a.stateNode),le=l,hn=h;break;case 5:ve||gi(a,s);case 6:if(l=le,h=hn,le=null,$i(e,s,a),le=l,hn=h,le!==null)if(hn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(a.stateNode)}catch(d){se(a,s,d)}else try{le.removeChild(a.stateNode)}catch(d){se(a,s,d)}break;case 18:le!==null&&(hn?(e=le,r2(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),wl(e)):r2(le,a.stateNode));break;case 4:l=le,h=hn,le=a.stateNode.containerInfo,hn=!0,$i(e,s,a),le=l,hn=h;break;case 0:case 11:case 14:case 15:ve||Es(2,a,s),ve||Es(4,a,s),$i(e,s,a);break;case 1:ve||(gi(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&cp(a,s,l)),$i(e,s,a);break;case 21:$i(e,s,a);break;case 22:ve=(l=ve)||a.memoizedState!==null,$i(e,s,a),ve=l;break;default:$i(e,s,a)}}function _p(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wl(e)}catch(a){se(s,s.return,a)}}function K4(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new mp),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new mp),s;default:throw Error(r(435,e.tag))}}function Ad(e,s){var a=K4(e);s.forEach(function(l){var h=i6.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function Sn(e,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,E=s,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(xs(S.type)){le=S.stateNode,hn=!1;break t}break;case 5:le=S.stateNode,hn=!1;break t;case 3:case 4:le=S.stateNode.containerInfo,hn=!0;break t}S=S.return}if(le===null)throw Error(r(160));yp(d,E,h),le=null,hn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)vp(s,e),s=s.sibling}var Zn=null;function vp(e,s){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Sn(s,e),An(e),l&4&&(Es(3,e,e.return),ol(3,e),Es(5,e,e.return));break;case 1:Sn(s,e),An(e),l&512&&(ve||a===null||gi(a,a.return)),l&64&&Xi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Zn;if(Sn(s,e),An(e),l&512&&(ve||a===null||gi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[lr]||d[Re]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Ye(d,l,a),d[Re]=e,ye(d),l=d;break t;case"link":var E=d2("link","href",h).get(l+(a.href||""));if(E){for(var S=0;S<E.length;S++)if(d=E[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(S,1);break e}}d=h.createElement(l),Ye(d,l,a),h.head.appendChild(d);break;case"meta":if(E=d2("meta","content",h).get(l+(a.content||""))){for(S=0;S<E.length;S++)if(d=E[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(S,1);break e}}d=h.createElement(l),Ye(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Re]=e,ye(d),l=d}e.stateNode=l}else m2(h,e.type,e.stateNode);else e.stateNode=f2(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?m2(h,e.type,e.stateNode):f2(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ed(e,e.memoizedProps,a.memoizedProps)}break;case 27:Sn(s,e),An(e),l&512&&(ve||a===null||gi(a,a.return)),a!==null&&l&4&&Ed(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Sn(s,e),An(e),l&512&&(ve||a===null||gi(a,a.return)),e.flags&32){h=e.stateNode;try{Vn(h,"")}catch($){se(e,e.return,$)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,Ed(e,h,a!==null?a.memoizedProps:h)),l&1024&&(Sd=!0);break;case 6:if(Sn(s,e),An(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch($){se(e,e.return,$)}}break;case 3:if(Oc=null,h=Zn,Zn=Vc(s.containerInfo),Sn(s,e),Zn=h,An(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{wl(s.containerInfo)}catch($){se(e,e.return,$)}Sd&&(Sd=!1,Ep(e));break;case 4:l=Zn,Zn=Vc(e.stateNode.containerInfo),Sn(s,e),An(e),Zn=l;break;case 12:Sn(s,e),An(e);break;case 13:Sn(s,e),An(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dd=In()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ad(e,l)));break;case 22:h=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,Q=Xi,nt=ve;if(Xi=Q||h,ve=nt||M,Sn(s,e),ve=nt,Xi=Q,An(e),l&8192)t:for(s=e.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||M||Xi||ve||Nr(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){M=a=s;try{if(d=M.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=M.stateNode;var rt=M.memoizedProps.style,X=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;S.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch($){se(M,M.return,$)}}}else if(s.tag===6){if(a===null){M=s;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch($){se(M,M.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ad(e,a))));break;case 19:Sn(s,e),An(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ad(e,l)));break;case 30:break;case 21:break;default:Sn(s,e),An(e)}}function An(e){var s=e.flags;if(s&2){try{for(var a,l=e.return;l!==null;){if(fp(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Td(e);_c(e,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(Vn(E,""),a.flags&=-33);var S=Td(e);_c(e,S,E);break;case 3:case 4:var M=a.stateNode.containerInfo,Q=Td(e);bd(e,Q,M);break;default:throw Error(r(161))}}catch(nt){se(e,e.return,nt)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Ep(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Ep(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Ts(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)gp(e,s.alternate,s),s=s.sibling}function Nr(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Es(4,s,s.return),Nr(s);break;case 1:gi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&cp(s,s.return,a),Nr(s);break;case 27:yl(s.stateNode);case 26:case 5:gi(s,s.return),Nr(s);break;case 22:s.memoizedState===null&&Nr(s);break;case 30:Nr(s);break;default:Nr(s)}e=e.sibling}}function bs(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=e,d=s,E=d.flags;switch(d.tag){case 0:case 11:case 15:bs(h,d,a),ol(4,d);break;case 1:if(bs(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(Q){se(l,l.return,Q)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)Xg(M[h],S)}catch(Q){se(l,l.return,Q)}}a&&E&64&&up(d),ll(d,d.return);break;case 27:dp(d);case 26:case 5:bs(h,d,a),a&&l===null&&E&4&&hp(d),ll(d,d.return);break;case 12:bs(h,d,a);break;case 13:bs(h,d,a),a&&E&4&&_p(h,d);break;case 22:d.memoizedState===null&&bs(h,d,a),ll(d,d.return);break;case 30:break;default:bs(h,d,a)}s=s.sibling}}function wd(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Yo(a))}function Cd(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Yo(e))}function pi(e,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Tp(e,s,a,l),s=s.sibling}function Tp(e,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:pi(e,s,a,l),h&2048&&ol(9,s);break;case 1:pi(e,s,a,l);break;case 3:pi(e,s,a,l),h&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Yo(e)));break;case 12:if(h&2048){pi(e,s,a,l),e=s.stateNode;try{var d=s.memoizedProps,E=d.id,S=d.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){se(s,s.return,M)}}else pi(e,s,a,l);break;case 13:pi(e,s,a,l);break;case 23:break;case 22:d=s.stateNode,E=s.alternate,s.memoizedState!==null?d._visibility&2?pi(e,s,a,l):ul(e,s):d._visibility&2?pi(e,s,a,l):(d._visibility|=2,Ia(e,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&wd(E,s);break;case 24:pi(e,s,a,l),h&2048&&Cd(s.alternate,s);break;default:pi(e,s,a,l)}}function Ia(e,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var d=e,E=s,S=a,M=l,Q=E.flags;switch(E.tag){case 0:case 11:case 15:Ia(d,E,S,M,h),ol(8,E);break;case 23:break;case 22:var nt=E.stateNode;E.memoizedState!==null?nt._visibility&2?Ia(d,E,S,M,h):ul(d,E):(nt._visibility|=2,Ia(d,E,S,M,h)),h&&Q&2048&&wd(E.alternate,E);break;case 24:Ia(d,E,S,M,h),h&&Q&2048&&Cd(E.alternate,E);break;default:Ia(d,E,S,M,h)}s=s.sibling}}function ul(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,l=s,h=l.flags;switch(l.tag){case 22:ul(a,l),h&2048&&wd(l.alternate,l);break;case 24:ul(a,l),h&2048&&Cd(l.alternate,l);break;default:ul(a,l)}s=s.sibling}}var cl=8192;function Da(e){if(e.subtreeFlags&cl)for(e=e.child;e!==null;)bp(e),e=e.sibling}function bp(e){switch(e.tag){case 26:Da(e),e.flags&cl&&e.memoizedState!==null&&O6(Zn,e.memoizedState,e.memoizedProps);break;case 5:Da(e);break;case 3:case 4:var s=Zn;Zn=Vc(e.stateNode.containerInfo),Da(e),Zn=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=cl,cl=16777216,Da(e),cl=s):Da(e));break;default:Da(e)}}function Sp(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function hl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];je=l,wp(l,e)}Sp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ap(e),e=e.sibling}function Ap(e){switch(e.tag){case 0:case 11:case 15:hl(e),e.flags&2048&&Es(9,e,e.return);break;case 3:hl(e);break;case 12:hl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,vc(e)):hl(e);break;default:hl(e)}}function vc(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];je=l,wp(l,e)}Sp(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Es(8,s,s.return),vc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,vc(s));break;default:vc(s)}e=e.sibling}}function wp(e,s){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:Es(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Yo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,je=l;else t:for(a=e;je!==null;){l=je;var h=l.sibling,d=l.return;if(pp(l),l===a){je=null;break t}if(h!==null){h.return=d,je=h;break t}je=d}}}var X4={getCacheForType:function(e){var s=We(De),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},$4=typeof WeakMap=="function"?WeakMap:Map,Jt=0,re=null,Pt=null,Ht=0,Wt=0,wn=null,Ss=!1,Va=!1,Rd=!1,Zi=0,pe=0,As=0,Lr=0,xd=0,zn=0,Ma=0,fl=null,fn=null,Id=!1,Dd=0,Ec=1/0,Tc=null,ws=null,Qe=0,Cs=null,Oa=null,Na=0,Vd=0,Md=null,Cp=null,dl=0,Od=null;function Cn(){if((Jt&2)!==0&&Ht!==0)return Ht&-Ht;if(Y.T!==null){var e=Ta;return e!==0?e:zd()}return os()}function Rp(){zn===0&&(zn=(Ht&536870912)===0||Yt?bo():536870912);var e=Un.current;return e!==null&&(e.flags|=32),zn}function Rn(e,s,a){(e===re&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)&&(La(e,0),Rs(e,Ht,zn,!1)),Ii(e,a),((Jt&2)===0||e!==re)&&(e===re&&((Jt&2)===0&&(Lr|=a),pe===4&&Rs(e,Ht,zn,!1)),yi(e))}function xp(e,s,a){if((Jt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&e.expiredLanes)===0||or(e,s),h=l?W4(e,s):kd(e,s,!0),d=l;do{if(h===0){Va&&!l&&Rs(e,s,0,!1);break}else{if(a=e.current.alternate,d&&!Z4(a)){h=kd(e,s,!1),d=!1;continue}if(h===2){if(d=s,e.errorRecoveryDisabledLanes&d)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var S=e;h=fl;var M=S.current.memoizedState.isDehydrated;if(M&&(La(S,E).flags|=256),E=kd(S,E,!1),E!==2){if(Rd&&!M){S.errorRecoveryDisabledLanes|=d,Lr|=d,h=4;break t}d=fn,fn=h,d!==null&&(fn===null?fn=d:fn.push.apply(fn,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){La(e,0),Rs(e,s,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Rs(l,s,zn,!Ss);break t;case 2:fn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=Dd+300-In(),10<h)){if(Rs(l,s,zn,!Ss),Jr(l,0,!0)!==0)break t;l.timeoutHandle=i2(Ip.bind(null,l,a,fn,Tc,Id,s,zn,Lr,Ma,Ss,d,2,-0,0),h);break t}Ip(l,a,fn,Tc,Id,s,zn,Lr,Ma,Ss,d,0,-0,0)}}break}while(!0);yi(e)}function Ip(e,s,a,l,h,d,E,S,M,Q,nt,rt,X,$){if(e.timeoutHandle=-1,rt=s.subtreeFlags,(rt&8192||(rt&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:M6},bp(s),rt=N6(),rt!==null)){e.cancelPendingCommit=rt(kp.bind(null,e,s,d,a,l,h,E,S,M,nt,1,X,$)),Rs(e,d,E,!Q);return}kp(e,s,d,a,l,h,E,S,M)}function Z4(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Tn(d(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rs(e,s,a,l){s&=~xd,s&=~Lr,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var h=s;0<h;){var d=31-Je(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&ni(e,a,s)}function bc(){return(Jt&6)===0?(ml(0),!1):!0}function Nd(){if(Pt!==null){if(Wt===0)var e=Pt.return;else e=Pt,Hi=Ir=null,Zf(e),Ra=null,sl=0,e=Pt;for(;e!==null;)lp(e.alternate,e),e=e.return;Pt=null}}function La(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,g6(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Nd(),re=e,Pt=a=zi(e.current,null),Ht=s,Wt=0,wn=null,Ss=!1,Va=or(e,s),Rd=!1,Ma=zn=xd=Lr=As=pe=0,fn=fl=null,Id=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var h=31-Je(l),d=1<<h;s|=e[h],l&=~d}return Zi=s,Gu(),a}function Dp(e,s){Ot=null,Y.H=uc,s===Xo||s===Wu?(s=Yg(),Wt=3):s===Gg?(s=Yg(),Wt=4):Wt=s===K0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,wn=s,Pt===null&&(pe=1,mc(e,Ln(s,e.current)))}function Vp(){var e=Y.H;return Y.H=uc,e===null?uc:e}function Mp(){var e=Y.A;return Y.A=X4,e}function Ld(){pe=4,Ss||(Ht&4194048)!==Ht&&Un.current!==null||(Va=!0),(As&134217727)===0&&(Lr&134217727)===0||re===null||Rs(re,Ht,zn,!1)}function kd(e,s,a){var l=Jt;Jt|=2;var h=Vp(),d=Mp();(re!==e||Ht!==s)&&(Tc=null,La(e,s)),s=!1;var E=pe;t:do try{if(Wt!==0&&Pt!==null){var S=Pt,M=wn;switch(Wt){case 8:Nd(),E=6;break t;case 3:case 2:case 9:case 6:Un.current===null&&(s=!0);var Q=Wt;if(Wt=0,wn=null,ka(e,S,M,Q),a&&Va){E=0;break t}break;default:Q=Wt,Wt=0,wn=null,ka(e,S,M,Q)}}J4(),E=pe;break}catch(nt){Dp(e,nt)}while(!0);return s&&e.shellSuspendCounter++,Hi=Ir=null,Jt=l,Y.H=h,Y.A=d,Pt===null&&(re=null,Ht=0,Gu()),E}function J4(){for(;Pt!==null;)Op(Pt)}function W4(e,s){var a=Jt;Jt|=2;var l=Vp(),h=Mp();re!==e||Ht!==s?(Tc=null,Ec=In()+500,La(e,s)):Va=or(e,s);t:do try{if(Wt!==0&&Pt!==null){s=Pt;var d=wn;e:switch(Wt){case 1:Wt=0,wn=null,ka(e,s,d,1);break;case 2:case 9:if(Fg(d)){Wt=0,wn=null,Np(s);break}s=function(){Wt!==2&&Wt!==9||re!==e||(Wt=7),yi(e)},d.then(s,s);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:Fg(d)?(Wt=0,wn=null,Np(s)):(Wt=0,wn=null,ka(e,s,d,7));break;case 5:var E=null;switch(Pt.tag){case 26:E=Pt.memoizedState;case 5:case 27:var S=Pt;if(!E||g2(E)){Wt=0,wn=null;var M=S.sibling;if(M!==null)Pt=M;else{var Q=S.return;Q!==null?(Pt=Q,Sc(Q)):Pt=null}break e}}Wt=0,wn=null,ka(e,s,d,5);break;case 6:Wt=0,wn=null,ka(e,s,d,6);break;case 8:Nd(),pe=6;break t;default:throw Error(r(462))}}t6();break}catch(nt){Dp(e,nt)}while(!0);return Hi=Ir=null,Y.H=l,Y.A=h,Jt=a,Pt!==null?0:(re=null,Ht=0,Gu(),pe)}function t6(){for(;Pt!==null&&!_o();)Op(Pt)}function Op(e){var s=ap(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,s===null?Sc(e):Pt=s}function Np(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=tp(a,s,s.pendingProps,s.type,void 0,Ht);break;case 11:s=tp(a,s,s.pendingProps,s.type.render,s.ref,Ht);break;case 5:Zf(s);default:lp(a,s),s=Pt=Lg(s,Zi),s=ap(a,s,Zi)}e.memoizedProps=e.pendingProps,s===null?Sc(e):Pt=s}function ka(e,s,a,l){Hi=Ir=null,Zf(s),Ra=null,sl=0;var h=s.return;try{if(H4(e,h,s,a,Ht)){pe=1,mc(e,Ln(a,e.current)),Pt=null;return}}catch(d){if(h!==null)throw Pt=h,d;pe=1,mc(e,Ln(a,e.current)),Pt=null;return}s.flags&32768?(Yt||l===1?e=!0:Va||(Ht&536870912)!==0?e=!1:(Ss=e=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),Lp(s,e)):Sc(s)}function Sc(e){var s=e;do{if((s.flags&32768)!==0){Lp(s,Ss);return}e=s.return;var a=F4(s.alternate,s,Zi);if(a!==null){Pt=a;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=e}while(s!==null);pe===0&&(pe=5)}function Lp(e,s){do{var a=Q4(e.alternate,e);if(a!==null){a.flags&=32767,Pt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){Pt=e;return}Pt=e=a}while(e!==null);pe=6,Pt=null}function kp(e,s,a,l,h,d,E,S,M){e.cancelPendingCommit=null;do Ac();while(Qe!==0);if((Jt&6)!==0)throw Error(r(327));if(s!==null){if(s===e.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=Cf,Ao(e,a,d,E,S,M),e===re&&(Pt=re=null,Ht=0),Oa=s,Cs=e,Na=a,Vd=d,Md=h,Cp=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s6(ir,function(){return Bp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,h=Z.p,Z.p=2,E=Jt,Jt|=4;try{Y4(e,s,a)}finally{Jt=E,Z.p=h,Y.T=l}}Qe=1,Pp(),jp(),Up()}}function Pp(){if(Qe===1){Qe=0;var e=Cs,s=Oa,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=Z.p;Z.p=2;var h=Jt;Jt|=4;try{vp(s,e);var d=Kd,E=wg(e.containerInfo),S=d.focusedElem,M=d.selectionRange;if(E!==S&&S&&S.ownerDocument&&Ag(S.ownerDocument.documentElement,S)){if(M!==null&&Tf(S)){var Q=M.start,nt=M.end;if(nt===void 0&&(nt=Q),"selectionStart"in S)S.selectionStart=Q,S.selectionEnd=Math.min(nt,S.value.length);else{var rt=S.ownerDocument||document,X=rt&&rt.defaultView||window;if(X.getSelection){var $=X.getSelection(),Rt=S.textContent.length,At=Math.min(M.start,Rt),ie=M.end===void 0?At:Math.min(M.end,Rt);!$.extend&&At>ie&&(E=ie,ie=At,At=E);var z=Sg(S,At),j=Sg(S,ie);if(z&&j&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==j.node||$.focusOffset!==j.offset)){var F=rt.createRange();F.setStart(z.node,z.offset),$.removeAllRanges(),At>ie?($.addRange(F),$.extend(j.node,j.offset)):(F.setEnd(j.node,j.offset),$.addRange(F))}}}}for(rt=[],$=S;$=$.parentNode;)$.nodeType===1&&rt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<rt.length;S++){var it=rt[S];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}kc=!!Yd,Kd=Yd=null}finally{Jt=h,Z.p=l,Y.T=a}}e.current=s,Qe=2}}function jp(){if(Qe===2){Qe=0;var e=Cs,s=Oa,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=Z.p;Z.p=2;var h=Jt;Jt|=4;try{gp(e,s.alternate,s)}finally{Jt=h,Z.p=l,Y.T=a}}Qe=3}}function Up(){if(Qe===4||Qe===3){Qe=0,vu();var e=Cs,s=Oa,a=Na,l=Cp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qe=5:(Qe=0,Oa=Cs=null,zp(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(ws=null),Wr(a),s=s.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(me,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Y.T,h=Z.p,Z.p=2,Y.T=null;try{for(var d=e.onRecoverableError,E=0;E<l.length;E++){var S=l[E];d(S.value,{componentStack:S.stack})}}finally{Y.T=s,Z.p=h}}(Na&3)!==0&&Ac(),yi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Od?dl++:(dl=0,Od=e):dl=0,ml(0)}}function zp(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Yo(s)))}function Ac(e){return Pp(),jp(),Up(),Bp()}function Bp(){if(Qe!==5)return!1;var e=Cs,s=Vd;Vd=0;var a=Wr(Na),l=Y.T,h=Z.p;try{Z.p=32>a?32:a,Y.T=null,a=Md,Md=null;var d=Cs,E=Na;if(Qe=0,Oa=Cs=null,Na=0,(Jt&6)!==0)throw Error(r(331));var S=Jt;if(Jt|=4,Ap(d.current),Tp(d,d.current,E,a),Jt=S,ml(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(me,d)}catch{}return!0}finally{Z.p=h,Y.T=l,zp(e,s)}}function qp(e,s,a){s=Ln(a,s),s=hd(e.stateNode,s,2),e=ps(e,s,2),e!==null&&(Ii(e,2),yi(e))}function se(e,s,a){if(e.tag===3)qp(e,e,a);else for(;s!==null;){if(s.tag===3){qp(s,e,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ws===null||!ws.has(l))){e=Ln(a,e),a=Q0(2),l=ps(s,a,2),l!==null&&(Y0(a,l,s,e),Ii(l,2),yi(l));break}}s=s.return}}function Pd(e,s,a){var l=e.pingCache;if(l===null){l=e.pingCache=new $4;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Rd=!0,h.add(a),e=e6.bind(null,e,s,a),s.then(e,e))}function e6(e,s,a){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,re===e&&(Ht&a)===a&&(pe===4||pe===3&&(Ht&62914560)===Ht&&300>In()-Dd?(Jt&2)===0&&La(e,0):xd|=a,Ma===Ht&&(Ma=0)),yi(e)}function Hp(e,s){s===0&&(s=So()),e=ya(e,s),e!==null&&(Ii(e,s),yi(e))}function n6(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),Hp(e,a)}function i6(e,s){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Hp(e,a)}function s6(e,s){return er(e,s)}var wc=null,Pa=null,jd=!1,Cc=!1,Ud=!1,kr=0;function yi(e){e!==Pa&&e.next===null&&(Pa===null?wc=Pa=e:Pa=Pa.next=e),Cc=!0,jd||(jd=!0,a6())}function ml(e,s){if(!Ud&&Cc){Ud=!0;do for(var a=!1,l=wc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-Je(42|e)+1)-1,d&=h&~(E&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Yp(l,d))}else d=Ht,d=Jr(l,l===re?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||or(l,d)||(a=!0,Yp(l,d));l=l.next}while(a);Ud=!1}}function r6(){Gp()}function Gp(){Cc=jd=!1;var e=0;kr!==0&&(m6()&&(e=kr),kr=0);for(var s=In(),a=null,l=wc;l!==null;){var h=l.next,d=Fp(l,s);d===0?(l.next=null,a===null?wc=h:a.next=h,h===null&&(Pa=a)):(a=l,(e!==0||(d&3)!==0)&&(Cc=!0)),l=h}ml(e)}function Fp(e,s){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var E=31-Je(d),S=1<<E,M=h[E];M===-1?((S&a)===0||(S&l)!==0)&&(h[E]=To(S,s)):M<=s&&(e.expiredLanes|=S),d&=~S}if(s=re,a=Ht,a=Jr(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===s&&(Wt===2||Wt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&nr(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||or(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(l!==null&&nr(l),Wr(a)){case 2:case 8:a=$r;break;case 32:a=ir;break;case 268435456:a=Zr;break;default:a=ir}return l=Qp.bind(null,e),a=er(a,l),e.callbackPriority=s,e.callbackNode=a,s}return l!==null&&l!==null&&nr(l),e.callbackPriority=2,e.callbackNode=null,2}function Qp(e,s){if(Qe!==0&&Qe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ac()&&e.callbackNode!==a)return null;var l=Ht;return l=Jr(e,e===re?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(xp(e,l,s),Fp(e,In()),e.callbackNode!=null&&e.callbackNode===a?Qp.bind(null,e):null)}function Yp(e,s){if(Ac())return null;xp(e,s,!0)}function a6(){p6(function(){(Jt&6)!==0?er(vo,r6):Gp()})}function zd(){return kr===0&&(kr=bo()),kr}function Kp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ra(""+e)}function Xp(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function o6(e,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var d=Kp((h[Te]||null).action),E=l.submitter;E&&(s=(s=E[Te]||null)?Kp(s.formAction):E.getAttribute("formAction"),s!==null&&(d=s,E=null));var S=new aa("action","action",null,l,h);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(kr!==0){var M=E?Xp(h,E):new FormData(h);ad(a,{pending:!0,data:M,method:h.method,action:d},null,M)}}else typeof d=="function"&&(S.preventDefault(),M=E?Xp(h,E):new FormData(h),ad(a,{pending:!0,data:M,method:h.method,action:d},d,M))},currentTarget:h}]})}}for(var Bd=0;Bd<wf.length;Bd++){var qd=wf[Bd],l6=qd.toLowerCase(),u6=qd[0].toUpperCase()+qd.slice(1);$n(l6,"on"+u6)}$n(xg,"onAnimationEnd"),$n(Ig,"onAnimationIteration"),$n(Dg,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(C4,"onTransitionRun"),$n(R4,"onTransitionStart"),$n(x4,"onTransitionCancel"),$n(Vg,"onTransitionEnd"),Vi("onMouseEnter",["mouseout","mouseover"]),Vi("onMouseLeave",["mouseout","mouseover"]),Vi("onPointerEnter",["pointerout","pointerover"]),Vi("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function $p(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var E=l.length-1;0<=E;E--){var S=l[E],M=S.instance,Q=S.currentTarget;if(S=S.listener,M!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=Q;try{d(h)}catch(nt){dc(nt)}h.currentTarget=null,d=M}else for(E=0;E<l.length;E++){if(S=l[E],M=S.instance,Q=S.currentTarget,S=S.listener,M!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=Q;try{d(h)}catch(nt){dc(nt)}h.currentTarget=null,d=M}}}}function jt(e,s){var a=s[Co];a===void 0&&(a=s[Co]=new Set);var l=e+"__bubble";a.has(l)||(Zp(s,e,2,!1),a.add(l))}function Hd(e,s,a){var l=0;s&&(l|=4),Zp(a,e,l,s)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Gd(e){if(!e[Rc]){e[Rc]=!0,Ro.forEach(function(a){a!=="selectionchange"&&(c6.has(a)||Hd(a,!1,e),Hd(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Rc]||(s[Rc]=!0,Hd("selectionchange",!1,s))}}function Zp(e,s,a,l){switch(T2(s)){case 2:var h=P6;break;case 8:h=j6;break;default:h=s1}a=h.bind(null,s,a,e),h=void 0,!On||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(s,a,{capture:!0,passive:h}):e.addEventListener(s,a,!0):h!==void 0?e.addEventListener(s,a,{passive:h}):e.addEventListener(s,a,!1)}function Fd(e,s,a,l,h){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var S=l.stateNode.containerInfo;if(S===h)break;if(E===4)for(E=l.return;E!==null;){var M=E.tag;if((M===3||M===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;S!==null;){if(E=Di(S),E===null)return;if(M=E.tag,M===5||M===6||M===26||M===27){l=d=E;continue t}S=S.parentNode}}l=l.return}Iu(function(){var Q=d,nt=Mn(a),rt=[];t:{var X=Mg.get(e);if(X!==void 0){var $=aa,Rt=e;switch(e){case"keypress":if(li(a)===0)break t;case"keydown":case"keyup":$=fa;break;case"focusin":Rt="focus",$=ua;break;case"focusout":Rt="blur",$=ua;break;case"beforeblur":case"afterblur":$=ua;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=yf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Pu;break;case xg:case Ig:case Dg:$=ca;break;case Vg:$=Uu;break;case"scroll":case"scrollend":$=Du;break;case"wheel":$=da;break;case"copy":case"cut":case"paste":$=ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Uo;break;case"toggle":case"beforetoggle":$=Bu}var At=(s&4)!==0,ie=!At&&(e==="scroll"||e==="scrollend"),z=At?X!==null?X+"Capture":null:X;At=[];for(var j=Q,F;j!==null;){var it=j;if(F=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||F===null||z===null||(it=gr(j,z),it!=null&&At.push(pl(j,it,F))),ie)break;j=j.return}0<At.length&&(X=new $(X,Rt,null,a,nt),rt.push({event:X,listeners:At}))}}if((s&7)===0){t:{if(X=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",X&&a!==Ni&&(Rt=a.relatedTarget||a.fromElement)&&(Di(Rt)||Rt[Dn]))break t;if(($||X)&&(X=nt.window===nt?nt:(X=nt.ownerDocument)?X.defaultView||X.parentWindow:window,$?(Rt=a.relatedTarget||a.toElement,$=Q,Rt=Rt?Di(Rt):null,Rt!==null&&(ie=u(Rt),At=Rt.tag,Rt!==ie||At!==5&&At!==27&&At!==6)&&(Rt=null)):($=null,Rt=Q),$!==Rt)){if(At=Nn,it="onMouseLeave",z="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(At=Uo,it="onPointerLeave",z="onPointerEnter",j="pointer"),ie=$==null?X:si($),F=Rt==null?X:si(Rt),X=new At(it,j+"leave",$,a,nt),X.target=ie,X.relatedTarget=F,it=null,Di(nt)===Q&&(At=new At(z,j+"enter",Rt,a,nt),At.target=F,At.relatedTarget=ie,it=At),ie=it,$&&Rt)e:{for(At=$,z=Rt,j=0,F=At;F;F=ja(F))j++;for(F=0,it=z;it;it=ja(it))F++;for(;0<j-F;)At=ja(At),j--;for(;0<F-j;)z=ja(z),F--;for(;j--;){if(At===z||z!==null&&At===z.alternate)break e;At=ja(At),z=ja(z)}At=null}else At=null;$!==null&&Jp(rt,X,$,At,!1),Rt!==null&&ie!==null&&Jp(rt,ie,Rt,At,!0)}}t:{if(X=Q?si(Q):window,$=X.nodeName&&X.nodeName.toLowerCase(),$==="select"||$==="input"&&X.type==="file")var yt=yg;else if(Ie(X))if(_g)yt=S4;else{yt=T4;var kt=E4}else $=X.nodeName,!$||$.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&Mo(Q.elementType)&&(yt=yg):yt=b4;if(yt&&(yt=yt(e,Q))){Ui(rt,yt,a,nt);break t}kt&&kt(e,X,Q),e==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&hs(X,"number",X.value)}switch(kt=Q?si(Q):window,e){case"focusin":(Ie(kt)||kt.contentEditable==="true")&&(ma=kt,bf=Q,qo=null);break;case"focusout":qo=bf=ma=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,Cg(rt,a,nt);break;case"selectionchange":if(w4)break;case"keydown":case"keyup":Cg(rt,a,nt)}var vt;if(hi)t:{switch(e){case"compositionstart":var wt="onCompositionStart";break t;case"compositionend":wt="onCompositionEnd";break t;case"compositionupdate":wt="onCompositionUpdate";break t}wt=void 0}else Bt?W(e,a)&&(wt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(wt="onCompositionStart");wt&&(_&&a.locale!=="ko"&&(Bt||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Bt&&(vt=No()):(oi=nt,fs="value"in oi?oi.value:oi.textContent,Bt=!0)),kt=xc(Q,wt),0<kt.length&&(wt=new Po(wt,e,null,a,nt),rt.push({event:wt,listeners:kt}),vt?wt.data=vt:(vt=ft(a),vt!==null&&(wt.data=vt)))),(vt=p?xe(e,a):qt(e,a))&&(wt=xc(Q,"onBeforeInput"),0<wt.length&&(kt=new Po("onBeforeInput","beforeinput",null,a,nt),rt.push({event:kt,listeners:wt}),kt.data=vt)),o6(rt,e,Q,a,nt)}$p(rt,s)})}function pl(e,s,a){return{instance:e,listener:s,currentTarget:a}}function xc(e,s){for(var a=s+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=gr(e,a),h!=null&&l.unshift(pl(e,h,d)),h=gr(e,s),h!=null&&l.push(pl(e,h,d))),e.tag===3)return l;e=e.return}return[]}function ja(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Jp(e,s,a,l,h){for(var d=s._reactName,E=[];a!==null&&a!==l;){var S=a,M=S.alternate,Q=S.stateNode;if(S=S.tag,M!==null&&M===l)break;S!==5&&S!==26&&S!==27||Q===null||(M=Q,h?(Q=gr(a,d),Q!=null&&E.unshift(pl(a,Q,M))):h||(Q=gr(a,d),Q!=null&&E.push(pl(a,Q,M)))),a=a.return}E.length!==0&&e.push({event:s,listeners:E})}var h6=/\r\n?/g,f6=/\u0000|\uFFFD/g;function Wp(e){return(typeof e=="string"?e:""+e).replace(h6,`
`).replace(f6,"")}function t2(e,s){return s=Wp(s),Wp(e)===s}function Ic(){}function ne(e,s,a,l,h,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Vn(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Vn(e,""+l);break;case"className":ri(e,"class",l);break;case"tabIndex":ri(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(e,a,l);break;case"style":Vo(e,l,d);break;case"data":if(s!=="object"){ri(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ra(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&ne(e,s,"name",h.name,h,null),ne(e,s,"formEncType",h.formEncType,h,null),ne(e,s,"formMethod",h.formMethod,h,null),ne(e,s,"formTarget",h.formTarget,h,null)):(ne(e,s,"encType",h.encType,h,null),ne(e,s,"method",h.method,h,null),ne(e,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ra(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Ic);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ra(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":jt("beforetoggle",e),jt("toggle",e),cs(e,"popover",l);break;case"xlinkActuate":He(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":He(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":He(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":He(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":He(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":He(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":He(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":He(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":He(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":cs(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=gf.get(a)||a,cs(e,a,l))}}function Qd(e,s,a,l,h,d){switch(a){case"style":Vo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Vn(e,l):(typeof l=="number"||typeof l=="bigint")&&Vn(e,""+l);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ta.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),d=e[Te]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(s,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):cs(e,a,l)}}}function Ye(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ne(e,s,d,E,a,null)}}h&&ne(e,s,"srcSet",a.srcSet,a,null),l&&ne(e,s,"src",a.src,a,null);return;case"input":jt("invalid",e);var S=d=E=h=null,M=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var nt=a[l];if(nt!=null)switch(l){case"name":h=nt;break;case"type":E=nt;break;case"checked":M=nt;break;case"defaultChecked":Q=nt;break;case"value":d=nt;break;case"defaultValue":S=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,s));break;default:ne(e,s,l,nt,a,null)}}fr(e,d,S,M,Q,E,h,!1),sa(e);return;case"select":jt("invalid",e),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":E=S;break;case"multiple":l=S;default:ne(e,s,h,S,a,null)}s=d,a=E,e.multiple=!!l,s!=null?Oi(e,!!l,s,!1):a!=null&&Oi(e,!!l,a,!0);return;case"textarea":jt("invalid",e),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(S=a[E],S!=null))switch(E){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:ne(e,s,E,S,a,null)}dr(e,l,h,d),sa(e);return;case"option":for(M in a)if(a.hasOwnProperty(M)&&(l=a[M],l!=null))switch(M){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ne(e,s,M,l,a,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(l=0;l<gl.length;l++)jt(gl[l],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ne(e,s,Q,l,a,null)}return;default:if(Mo(s)){for(nt in a)a.hasOwnProperty(nt)&&(l=a[nt],l!==void 0&&Qd(e,s,nt,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&ne(e,s,S,l,a,null))}function d6(e,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,S=null,M=null,Q=null,nt=null;for($ in a){var rt=a[$];if(a.hasOwnProperty($)&&rt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":M=rt;default:l.hasOwnProperty($)||ne(e,s,$,null,l,rt)}}for(var X in l){var $=l[X];if(rt=a[X],l.hasOwnProperty(X)&&($!=null||rt!=null))switch(X){case"type":d=$;break;case"name":h=$;break;case"checked":Q=$;break;case"defaultChecked":nt=$;break;case"value":E=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==rt&&ne(e,s,X,$,l,rt)}}En(e,E,S,M,Q,nt,d,h);return;case"select":$=E=S=X=null;for(d in a)if(M=a[d],a.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":$=M;default:l.hasOwnProperty(d)||ne(e,s,d,null,l,M)}for(h in l)if(d=l[h],M=a[h],l.hasOwnProperty(h)&&(d!=null||M!=null))switch(h){case"value":X=d;break;case"defaultValue":S=d;break;case"multiple":E=d;default:d!==M&&ne(e,s,h,d,l,M)}s=S,a=E,l=$,X!=null?Oi(e,!!a,X,!1):!!l!=!!a&&(s!=null?Oi(e,!!a,s,!0):Oi(e,!!a,a?[]:"",!1));return;case"textarea":$=X=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ne(e,s,S,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":X=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ne(e,s,E,h,l,d)}te(e,X,$);return;case"option":for(var Rt in a)if(X=a[Rt],a.hasOwnProperty(Rt)&&X!=null&&!l.hasOwnProperty(Rt))switch(Rt){case"selected":e.selected=!1;break;default:ne(e,s,Rt,null,l,X)}for(M in l)if(X=l[M],$=a[M],l.hasOwnProperty(M)&&X!==$&&(X!=null||$!=null))switch(M){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:ne(e,s,M,X,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in a)X=a[At],a.hasOwnProperty(At)&&X!=null&&!l.hasOwnProperty(At)&&ne(e,s,At,null,l,X);for(Q in l)if(X=l[Q],$=a[Q],l.hasOwnProperty(Q)&&X!==$&&(X!=null||$!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:ne(e,s,Q,X,l,$)}return;default:if(Mo(s)){for(var ie in a)X=a[ie],a.hasOwnProperty(ie)&&X!==void 0&&!l.hasOwnProperty(ie)&&Qd(e,s,ie,void 0,l,X);for(nt in l)X=l[nt],$=a[nt],!l.hasOwnProperty(nt)||X===$||X===void 0&&$===void 0||Qd(e,s,nt,X,l,$);return}}for(var z in a)X=a[z],a.hasOwnProperty(z)&&X!=null&&!l.hasOwnProperty(z)&&ne(e,s,z,null,l,X);for(rt in l)X=l[rt],$=a[rt],!l.hasOwnProperty(rt)||X===$||X==null&&$==null||ne(e,s,rt,X,l,$)}var Yd=null,Kd=null;function Dc(e){return e.nodeType===9?e:e.ownerDocument}function e2(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n2(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Xd(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $d=null;function m6(){var e=window.event;return e&&e.type==="popstate"?e===$d?!1:($d=e,!0):($d=null,!1)}var i2=typeof setTimeout=="function"?setTimeout:void 0,g6=typeof clearTimeout=="function"?clearTimeout:void 0,s2=typeof Promise=="function"?Promise:void 0,p6=typeof queueMicrotask=="function"?queueMicrotask:typeof s2<"u"?function(e){return s2.resolve(null).then(e).catch(y6)}:i2;function y6(e){setTimeout(function(){throw e})}function xs(e){return e==="head"}function r2(e,s){var a=s,l=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=e.ownerDocument;if(a&1&&yl(E.documentElement),a&2&&yl(E.body),a&4)for(a=E.head,yl(a),E=a.firstChild;E;){var S=E.nextSibling,M=E.nodeName;E[lr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=S}}if(h===0){e.removeChild(d),wl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);wl(s)}function Zd(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zd(a),us(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function _6(e,s,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[lr])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Jn(e.nextSibling),e===null)break}return null}function v6(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Jn(e.nextSibling),e===null))return null;return e}function Jd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function E6(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Jn(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Wd=null;function a2(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function o2(e,s,a){switch(s=Dc(a),e){case"html":if(e=s.documentElement,!e)throw Error(r(452));return e;case"head":if(e=s.head,!e)throw Error(r(453));return e;case"body":if(e=s.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function yl(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);us(e)}var Bn=new Map,l2=new Set;function Vc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ji=Z.d;Z.d={f:T6,r:b6,D:S6,C:A6,L:w6,m:C6,X:x6,S:R6,M:I6};function T6(){var e=Ji.f(),s=bc();return e||s}function b6(e){var s=ii(e);s!==null&&s.tag===5&&s.type==="form"?x0(s):Ji.r(e)}var Ua=typeof document>"u"?null:document;function u2(e,s,a){var l=Ua;if(l&&typeof s=="string"&&s){var h=be(s);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),l2.has(h)||(l2.add(h),e={rel:e,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),Ye(s,"link",e),ye(s),l.head.appendChild(s)))}}function S6(e){Ji.D(e),u2("dns-prefetch",e,null)}function A6(e,s){Ji.C(e,s),u2("preconnect",e,s)}function w6(e,s,a){Ji.L(e,s,a);var l=Ua;if(l&&e&&s){var h='link[rel="preload"][as="'+be(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+be(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+be(a.imageSizes)+'"]')):h+='[href="'+be(e)+'"]';var d=h;switch(s){case"style":d=za(e);break;case"script":d=Ba(e)}Bn.has(d)||(e=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),Bn.set(d,e),l.querySelector(h)!==null||s==="style"&&l.querySelector(_l(d))||s==="script"&&l.querySelector(vl(d))||(s=l.createElement("link"),Ye(s,"link",e),ye(s),l.head.appendChild(s)))}}function C6(e,s){Ji.m(e,s);var a=Ua;if(a&&e){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+be(l)+'"][href="'+be(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ba(e)}if(!Bn.has(d)&&(e=v({rel:"modulepreload",href:e},s),Bn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(vl(d)))return}l=a.createElement("link"),Ye(l,"link",e),ye(l),a.head.appendChild(l)}}}function R6(e,s,a){Ji.S(e,s,a);var l=Ua;if(l&&e){var h=rn(l).hoistableStyles,d=za(e);s=s||"default";var E=h.get(d);if(!E){var S={loading:0,preload:null};if(E=l.querySelector(_l(d)))S.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":s},a),(a=Bn.get(d))&&t1(e,a);var M=E=l.createElement("link");ye(M),Ye(M,"link",e),M._p=new Promise(function(Q,nt){M.onload=Q,M.onerror=nt}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Mc(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:S},h.set(d,E)}}}function x6(e,s){Ji.X(e,s);var a=Ua;if(a&&e){var l=rn(a).hoistableScripts,h=Ba(e),d=l.get(h);d||(d=a.querySelector(vl(h)),d||(e=v({src:e,async:!0},s),(s=Bn.get(h))&&e1(e,s),d=a.createElement("script"),ye(d),Ye(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function I6(e,s){Ji.M(e,s);var a=Ua;if(a&&e){var l=rn(a).hoistableScripts,h=Ba(e),d=l.get(h);d||(d=a.querySelector(vl(h)),d||(e=v({src:e,async:!0,type:"module"},s),(s=Bn.get(h))&&e1(e,s),d=a.createElement("script"),ye(d),Ye(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function c2(e,s,a,l){var h=(h=Tt.current)?Vc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=za(a.href),a=rn(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=za(a.href);var d=rn(h).hoistableStyles,E=d.get(e);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,E),(d=h.querySelector(_l(e)))&&!d._p&&(E.instance=d,E.state.loading=5),Bn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(e,a),d||D6(h,e,a,E.state))),s&&l===null)throw Error(r(528,""));return E}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ba(a),a=rn(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function za(e){return'href="'+be(e)+'"'}function _l(e){return'link[rel="stylesheet"]['+e+"]"}function h2(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function D6(e,s,a,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Ye(s,"link",a),ye(s),e.head.appendChild(s))}function Ba(e){return'[src="'+be(e)+'"]'}function vl(e){return"script[async]"+e}function f2(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+be(a.href)+'"]');if(l)return s.instance=l,ye(l),l;var h=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ye(l),Ye(l,"style",h),Mc(l,a.precedence,e),s.instance=l;case"stylesheet":h=za(a.href);var d=e.querySelector(_l(h));if(d)return s.state.loading|=4,s.instance=d,ye(d),d;l=h2(a),(h=Bn.get(h))&&t1(l,h),d=(e.ownerDocument||e).createElement("link"),ye(d);var E=d;return E._p=new Promise(function(S,M){E.onload=S,E.onerror=M}),Ye(d,"link",l),s.state.loading|=4,Mc(d,a.precedence,e),s.instance=d;case"script":return d=Ba(a.src),(h=e.querySelector(vl(d)))?(s.instance=h,ye(h),h):(l=a,(h=Bn.get(d))&&(l=v({},a),e1(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ye(h),Ye(h,"link",l),e.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Mc(l,a.precedence,e));return s.instance}function Mc(e,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var S=l[E];if(S.dataset.precedence===s)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function t1(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function e1(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Oc=null;function d2(e,s,a){if(Oc===null){var l=new Map,h=Oc=new Map;h.set(a,l)}else h=Oc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[lr]||d[Re]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(s)||"";E=e+E;var S=l.get(E);S?S.push(d):l.set(E,[d])}}return l}function m2(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function V6(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function g2(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var El=null;function M6(){}function O6(e,s,a){if(El===null)throw Error(r(475));var l=El;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=za(a.href),d=e.querySelector(_l(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Nc.bind(l),e.then(l,l)),s.state.loading|=4,s.instance=d,ye(d);return}d=e.ownerDocument||e,a=h2(a),(h=Bn.get(h))&&t1(a,h),d=d.createElement("link"),ye(d);var E=d;E._p=new Promise(function(S,M){E.onload=S,E.onerror=M}),Ye(d,"link",a),s.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Nc.bind(l),e.addEventListener("load",s),e.addEventListener("error",s))}}function N6(){if(El===null)throw Error(r(475));var e=El;return e.stylesheets&&e.count===0&&n1(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&n1(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Nc(){if(this.count--,this.count===0){if(this.stylesheets)n1(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Lc=null;function n1(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Lc=new Map,s.forEach(L6,e),Lc=null,Nc.call(e))}function L6(e,s){if(!(s.state.loading&4)){var a=Lc.get(e);if(a)var l=a.get(null);else{a=new Map,Lc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=Nc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),s.state.loading|=4}}var Tl={$$typeof:B,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function k6(e,s,a,l,h,d,E,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function p2(e,s,a,l,h,d,E,S,M,Q,nt,rt){return e=new k6(e,s,a,E,S,M,Q,rt),s=1,d===!0&&(s|=24),d=bn(3,null,null,s),e.current=d,d.stateNode=e,s=Pf(),s.refCount++,e.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Bf(d),e}function y2(e){return e?(e=_a,e):_a}function _2(e,s,a,l,h,d){h=y2(h),l.context===null?l.context=h:l.pendingContext=h,l=gs(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ps(e,l,s),a!==null&&(Rn(a,e,s),Zo(a,e,s))}function v2(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function i1(e,s){v2(e,s),(e=e.alternate)&&v2(e,s)}function E2(e){if(e.tag===13){var s=ya(e,67108864);s!==null&&Rn(s,e,67108864),i1(e,67108864)}}var kc=!0;function P6(e,s,a,l){var h=Y.T;Y.T=null;var d=Z.p;try{Z.p=2,s1(e,s,a,l)}finally{Z.p=d,Y.T=h}}function j6(e,s,a,l){var h=Y.T;Y.T=null;var d=Z.p;try{Z.p=8,s1(e,s,a,l)}finally{Z.p=d,Y.T=h}}function s1(e,s,a,l){if(kc){var h=r1(l);if(h===null)Fd(e,s,l,Pc,a),b2(e,l);else if(z6(h,e,s,a,l))l.stopPropagation();else if(b2(e,l),s&4&&-1<U6.indexOf(e)){for(;h!==null;){var d=ii(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=Yn(d.pendingLanes);if(E!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var M=1<<31-Je(E);S.entanglements[1]|=M,E&=~M}yi(d),(Jt&6)===0&&(Ec=In()+500,ml(0))}}break;case 13:S=ya(d,2),S!==null&&Rn(S,d,2),bc(),i1(d,2)}if(d=r1(l),d===null&&Fd(e,s,l,Pc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Fd(e,s,l,null,a)}}function r1(e){return e=Mn(e),a1(e)}var Pc=null;function a1(e){if(Pc=null,e=Di(e),e!==null){var s=u(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=f(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Pc=e,null}function T2(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(uf()){case vo:return 2;case $r:return 8;case ir:case cf:return 32;case Zr:return 268435456;default:return 32}default:return 32}}var o1=!1,Is=null,Ds=null,Vs=null,bl=new Map,Sl=new Map,Ms=[],U6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b2(e,s){switch(e){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":bl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(s.pointerId)}}function Al(e,s,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},s!==null&&(s=ii(s),s!==null&&E2(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),e)}function z6(e,s,a,l,h){switch(s){case"focusin":return Is=Al(Is,e,s,a,l,h),!0;case"dragenter":return Ds=Al(Ds,e,s,a,l,h),!0;case"mouseover":return Vs=Al(Vs,e,s,a,l,h),!0;case"pointerover":var d=h.pointerId;return bl.set(d,Al(bl.get(d)||null,e,s,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Sl.set(d,Al(Sl.get(d)||null,e,s,a,l,h)),!0}return!1}function S2(e){var s=Di(e.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){e.blockedOn=s,bu(e.priority,function(){if(a.tag===13){var l=Cn();l=as(l);var h=ya(a,l);h!==null&&Rn(h,a,l),i1(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=r1(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Ni=l,a.target.dispatchEvent(l),Ni=null}else return s=ii(a),s!==null&&E2(s),e.blockedOn=a,!1;s.shift()}return!0}function A2(e,s,a){jc(e)&&a.delete(s)}function B6(){o1=!1,Is!==null&&jc(Is)&&(Is=null),Ds!==null&&jc(Ds)&&(Ds=null),Vs!==null&&jc(Vs)&&(Vs=null),bl.forEach(A2),Sl.forEach(A2)}function Uc(e,s){e.blockedOn===s&&(e.blockedOn=null,o1||(o1=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,B6)))}var zc=null;function w2(e){zc!==e&&(zc=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zc===e&&(zc=null);for(var s=0;s<e.length;s+=3){var a=e[s],l=e[s+1],h=e[s+2];if(typeof l!="function"){if(a1(l||a)===null)continue;break}var d=ii(a);d!==null&&(e.splice(s,3),s-=3,ad(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function wl(e){function s(M){return Uc(M,e)}Is!==null&&Uc(Is,e),Ds!==null&&Uc(Ds,e),Vs!==null&&Uc(Vs,e),bl.forEach(s),Sl.forEach(s);for(var a=0;a<Ms.length;a++){var l=Ms[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ms.length&&(a=Ms[0],a.blockedOn===null);)S2(a),a.blockedOn===null&&Ms.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[Te]||null;if(typeof d=="function")E||w2(a);else if(E){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Te]||null)S=E.formAction;else if(a1(h)!==null)continue}else S=E.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),w2(a)}}}function l1(e){this._internalRoot=e}Bc.prototype.render=l1.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Cn();_2(a,l,e,s,null,null)},Bc.prototype.unmount=l1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;_2(e.current,2,null,e,null,null),bc(),s[Dn]=null}};function Bc(e){this._internalRoot=e}Bc.prototype.unstable_scheduleHydration=function(e){if(e){var s=os();e={blockedOn:null,target:e,priority:s};for(var a=0;a<Ms.length&&s!==0&&s<Ms[a].priority;a++);Ms.splice(a,0,e),a===0&&S2(e)}};var C2=t.version;if(C2!=="19.1.0")throw Error(r(527,C2,"19.1.0"));Z.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(s),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var q6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{me=qc.inject(q6),Zt=qc}catch{}}return Rl.createRoot=function(e,s){if(!o(e))throw Error(r(299));var a=!1,l="",h=q0,d=H0,E=G0,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=p2(e,1,!1,null,null,a,l,h,d,E,S,null),e[Dn]=s.current,Gd(e),new l1(s)},Rl.hydrateRoot=function(e,s,a){if(!o(e))throw Error(r(299));var l=!1,h="",d=q0,E=H0,S=G0,M=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),s=p2(e,1,!0,s,a??null,l,h,d,E,S,M,Q),s.context=y2(null),a=s.current,l=Cn(),l=as(l),h=gs(l),h.callback=null,ps(a,h,l),a=l,s.current.lanes=a,Ii(s,a),yi(s),e[Dn]=s.current,Gd(e),new Bc(s)},Rl.version="19.1.0",Rl}var k2;function J6(){if(k2)return h1.exports;k2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),h1.exports=Z6(),h1.exports}var W6=J6(),g1={exports:{}},p1={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2;function t9(){if(P2)return p1;P2=1;var i=Ih().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return p1.c=function(t){return i.H.useMemoCache(t)},p1}var j2;function e9(){return j2||(j2=1,g1.exports=t9()),g1.exports}var Be=e9();const n9=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}],Ze=K.createContext(null),i9=i=>{const t=Be.c(9),{children:n}=i,[r,o]=K.useState(!0),u=K.useRef("prod"),[f,m]=K.useState(!1),y=K.useRef(null);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[0]=g):g=t[0];const v=K.useRef(g),b=K.useRef(null),T=K.useRef(null),R=K.useRef(null),I=K.useRef(null),P=K.useRef("");let N,q;if(t[1]===Symbol.for("react.memo_cache_sentinel")?(N=()=>(u.current==="testing"?(y.current||(console.log("Creating a peer connection!"),y.current=new RTCPeerConnection({iceServers:n9})),I.current||(I.current=new MediaStream),y.current.ontrack=H=>{I.current.addTrack(H.track)},o(!1)):(async()=>{const et=await(await fetch("https://boop-messenger.metered.live/api/v1/turn/credentials?apiKey=f20a0ef134ca1708feba4abdf392c90361ec")).json();console.log("Peer connection set up!"),y.current=new RTCPeerConnection({iceServers:et}),I.current||(I.current=new MediaStream),y.current.ontrack=tt=>{I.current.addTrack(tt.track)},o(!1)})(),()=>{y.current&&(y.current.close(),y.current=null)}),q=[],t[1]=N,t[2]=q):(N=t[1],q=t[2]),K.useEffect(N,q),r){let H;return t[3]===Symbol.for("react.memo_cache_sentinel")?(H=w.jsx("div",{children:" Loading .. "}),t[3]=H):H=t[3],H}let J;t[4]!==f?(J={peerConnection:y,iceCandidates:v,dataChannel:b,imageChannel:T,videoChannel:R,remoteStream:I,peerName:P,connected:f,setConnected:m},t[4]=f,t[5]=J):J=t[5];let B;return t[6]!==n||t[7]!==J?(B=w.jsx(Ze,{value:J,children:n}),t[6]=n,t[7]=J,t[8]=B):B=t[8],B};var Tm=cu(),Vt=i=>uu(i,Tm),bm=cu();Vt.write=i=>uu(i,bm);var Dh=cu();Vt.onStart=i=>uu(i,Dh);var Sm=cu();Vt.onFrame=i=>uu(i,Sm);var Am=cu();Vt.onFinish=i=>uu(i,Am);var Za=[];Vt.setTimeout=(i,t)=>{const n=Vt.now()+t,r=()=>{const u=Za.findIndex(f=>f.cancel==r);~u&&Za.splice(u,1),js-=~u?1:0},o={time:n,handler:i,cancel:r};return Za.splice(O_(n),0,o),js+=1,N_(),o};var O_=i=>~(~Za.findIndex(t=>t.time>i)||~Za.length);Vt.cancel=i=>{Dh.delete(i),Sm.delete(i),Am.delete(i),Tm.delete(i),bm.delete(i)};Vt.sync=i=>{k1=!0,Vt.batchedUpdates(i),k1=!1};Vt.throttle=i=>{let t;function n(){try{i(...t)}finally{t=null}}function r(...o){t=o,Vt.onStart(n)}return r.handler=i,r.cancel=()=>{Dh.delete(n),t=null},r};var wm=typeof window<"u"?window.requestAnimationFrame:()=>{};Vt.use=i=>wm=i;Vt.now=typeof performance<"u"?()=>performance.now():Date.now;Vt.batchedUpdates=i=>i();Vt.catch=console.error;Vt.frameLoop="always";Vt.advance=()=>{Vt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):k_()};var Ps=-1,js=0,k1=!1;function uu(i,t){k1?(t.delete(i),i(0)):(t.add(i),N_())}function N_(){Ps<0&&(Ps=0,Vt.frameLoop!=="demand"&&wm(L_))}function s9(){Ps=-1}function L_(){~Ps&&(wm(L_),Vt.batchedUpdates(k_))}function k_(){const i=Ps;Ps=Vt.now();const t=O_(Ps);if(t&&(P_(Za.splice(0,t),n=>n.handler()),js-=t),!js){s9();return}Dh.flush(),Tm.flush(i?Math.min(64,Ps-i):16.667),Sm.flush(),bm.flush(),Am.flush()}function cu(){let i=new Set,t=i;return{add(n){js+=t==i&&!i.has(n)?1:0,i.add(n)},delete(n){return js-=t==i&&i.has(n)?1:0,i.delete(n)},flush(n){t.size&&(i=new Set,js-=t.size,P_(t,r=>r(n)&&i.add(r)),js+=i.size,t=i)}}}function P_(i,t){i.forEach(n=>{try{t(n)}catch(r){Vt.catch(r)}})}var r9=Object.defineProperty,a9=(i,t)=>{for(var n in t)r9(i,n,{get:t[n],enumerable:!0})},ei={};a9(ei,{assign:()=>l9,colors:()=>zs,createStringInterpolator:()=>Rm,skipAnimation:()=>U_,to:()=>j_,willAdvance:()=>xm});function P1(){}var o9=(i,t,n)=>Object.defineProperty(i,t,{value:n,writable:!0,configurable:!0}),lt={arr:Array.isArray,obj:i=>!!i&&i.constructor.name==="Object",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",und:i=>i===void 0};function ts(i,t){if(lt.arr(i)){if(!lt.arr(t)||i.length!==t.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==t[n])return!1;return!0}return i===t}var xt=(i,t)=>i.forEach(t);function Ai(i,t,n){if(lt.arr(i)){for(let r=0;r<i.length;r++)t.call(n,i[r],`${r}`);return}for(const r in i)i.hasOwnProperty(r)&&t.call(n,i[r],r)}var un=i=>lt.und(i)?[]:lt.arr(i)?i:[i];function Pl(i,t){if(i.size){const n=Array.from(i);i.clear(),xt(n,t)}}var Ml=(i,...t)=>Pl(i,n=>n(...t)),Cm=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Rm,j_,zs=null,U_=!1,xm=P1,l9=i=>{i.to&&(j_=i.to),i.now&&(Vt.now=i.now),i.colors!==void 0&&(zs=i.colors),i.skipAnimation!=null&&(U_=i.skipAnimation),i.createStringInterpolator&&(Rm=i.createStringInterpolator),i.requestAnimationFrame&&Vt.use(i.requestAnimationFrame),i.batchedUpdates&&(Vt.batchedUpdates=i.batchedUpdates),i.willAdvance&&(xm=i.willAdvance),i.frameLoop&&(Vt.frameLoop=i.frameLoop)},jl=new Set,Fn=[],y1=[],lh=0,Vh={get idle(){return!jl.size&&!Fn.length},start(i){lh>i.priority?(jl.add(i),Vt.onStart(u9)):(z_(i),Vt(j1))},advance:j1,sort(i){if(lh)Vt.onFrame(()=>Vh.sort(i));else{const t=Fn.indexOf(i);~t&&(Fn.splice(t,1),B_(i))}},clear(){Fn=[],jl.clear()}};function u9(){jl.forEach(z_),jl.clear(),Vt(j1)}function z_(i){Fn.includes(i)||B_(i)}function B_(i){Fn.splice(c9(Fn,t=>t.priority>i.priority),0,i)}function j1(i){const t=y1;for(let n=0;n<Fn.length;n++){const r=Fn[n];lh=r.priority,r.idle||(xm(r),r.advance(i),r.idle||t.push(r))}return lh=0,y1=Fn,y1.length=0,Fn=t,Fn.length>0}function c9(i,t){const n=i.findIndex(t);return n<0?i.length:n}var h9={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ti="[-+]?\\d*\\.?\\d+",uh=ti+"%";function Mh(...i){return"\\(\\s*("+i.join(")\\s*,\\s*(")+")\\s*\\)"}var f9=new RegExp("rgb"+Mh(ti,ti,ti)),d9=new RegExp("rgba"+Mh(ti,ti,ti,ti)),m9=new RegExp("hsl"+Mh(ti,uh,uh)),g9=new RegExp("hsla"+Mh(ti,uh,uh,ti)),p9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,y9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_9=/^#([0-9a-fA-F]{6})$/,v9=/^#([0-9a-fA-F]{8})$/;function E9(i){let t;return typeof i=="number"?i>>>0===i&&i>=0&&i<=4294967295?i:null:(t=_9.exec(i))?parseInt(t[1]+"ff",16)>>>0:zs&&zs[i]!==void 0?zs[i]:(t=f9.exec(i))?(qa(t[1])<<24|qa(t[2])<<16|qa(t[3])<<8|255)>>>0:(t=d9.exec(i))?(qa(t[1])<<24|qa(t[2])<<16|qa(t[3])<<8|B2(t[4]))>>>0:(t=p9.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=v9.exec(i))?parseInt(t[1],16)>>>0:(t=y9.exec(i))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=m9.exec(i))?(U2(z2(t[1]),Hc(t[2]),Hc(t[3]))|255)>>>0:(t=g9.exec(i))?(U2(z2(t[1]),Hc(t[2]),Hc(t[3]))|B2(t[4]))>>>0:null}function _1(i,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+(t-i)*6*n:n<1/2?t:n<2/3?i+(t-i)*(2/3-n)*6:i}function U2(i,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,u=_1(o,r,i+1/3),f=_1(o,r,i),m=_1(o,r,i-1/3);return Math.round(u*255)<<24|Math.round(f*255)<<16|Math.round(m*255)<<8}function qa(i){const t=parseInt(i,10);return t<0?0:t>255?255:t}function z2(i){return(parseFloat(i)%360+360)%360/360}function B2(i){const t=parseFloat(i);return t<0?0:t>1?255:Math.round(t*255)}function Hc(i){const t=parseFloat(i);return t<0?0:t>100?1:t/100}function q2(i){let t=E9(i);if(t===null)return i;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,o=(t&65280)>>>8,u=(t&255)/255;return`rgba(${n}, ${r}, ${o}, ${u})`}var Yl=(i,t,n)=>{if(lt.fun(i))return i;if(lt.arr(i))return Yl({range:i,output:t,extrapolate:n});if(lt.str(i.output[0]))return Rm(i);const r=i,o=r.output,u=r.range||[0,1],f=r.extrapolateLeft||r.extrapolate||"extend",m=r.extrapolateRight||r.extrapolate||"extend",y=r.easing||(g=>g);return g=>{const v=b9(g,u);return T9(g,u[v],u[v+1],o[v],o[v+1],y,f,m,r.map)}};function T9(i,t,n,r,o,u,f,m,y){let g=y?y(i):i;if(g<t){if(f==="identity")return g;f==="clamp"&&(g=t)}if(g>n){if(m==="identity")return g;m==="clamp"&&(g=n)}return r===o?r:t===n?i<=t?r:o:(t===-1/0?g=-g:n===1/0?g=g-t:g=(g-t)/(n-t),g=u(g),r===-1/0?g=-g:o===1/0?g=g+r:g=g*(o-r)+r,g)}function b9(i,t){for(var n=1;n<t.length-1&&!(t[n]>=i);++n);return n-1}var S9={linear:i=>i},Kl=Symbol.for("FluidValue.get"),eo=Symbol.for("FluidValue.observers"),Hn=i=>!!(i&&i[Kl]),mn=i=>i&&i[Kl]?i[Kl]():i,H2=i=>i[eo]||null;function A9(i,t){i.eventObserved?i.eventObserved(t):i(t)}function Xl(i,t){const n=i[eo];n&&n.forEach(r=>{A9(r,t)})}var q_=class{constructor(i){if(!i&&!(i=this.get))throw Error("Unknown getter");w9(this,i)}},w9=(i,t)=>H_(i,Kl,t);function ho(i,t){if(i[Kl]){let n=i[eo];n||H_(i,eo,n=new Set),n.has(t)||(n.add(t),i.observerAdded&&i.observerAdded(n.size,t))}return t}function $l(i,t){const n=i[eo];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):i[eo]=null,i.observerRemoved&&i.observerRemoved(r,t)}}var H_=(i,t,n)=>Object.defineProperty(i,t,{value:n,writable:!0,configurable:!0}),Wc=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,C9=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,G2=new RegExp(`(${Wc.source})(%|[a-z]+)`,"i"),R9=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Oh=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,G_=i=>{const[t,n]=x9(i);if(!t||Cm())return i;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(n);return o||i}else{if(n&&Oh.test(n))return G_(n);if(n)return n}return i},x9=i=>{const t=Oh.exec(i);if(!t)return[,];const[,n,r]=t;return[n,r]},v1,I9=(i,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,F_=i=>{v1||(v1=zs?new RegExp(`(${Object.keys(zs).join("|")})(?!\\w)`,"g"):/^\b$/);const t=i.output.map(u=>mn(u).replace(Oh,G_).replace(C9,q2).replace(v1,q2)),n=t.map(u=>u.match(Wc).map(Number)),o=n[0].map((u,f)=>n.map(m=>{if(!(f in m))throw Error('The arity of each "output" value must be equal');return m[f]})).map(u=>Yl({...i,output:u}));return u=>{var y;const f=!G2.test(t[0])&&((y=t.find(g=>G2.test(g)))==null?void 0:y.replace(Wc,""));let m=0;return t[0].replace(Wc,()=>`${o[m++](u)}${f||""}`).replace(R9,I9)}},Im="react-spring: ",Q_=i=>{const t=i;let n=!1;if(typeof t!="function")throw new TypeError(`${Im}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},D9=Q_(console.warn);function V9(){D9(`${Im}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var M9=Q_(console.warn);function O9(){M9(`${Im}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Nh(i){return lt.str(i)&&(i[0]=="#"||/\d/.test(i)||!Cm()&&Oh.test(i)||i in(zs||{}))}var Br=Cm()?K.useEffect:K.useLayoutEffect,N9=()=>{const i=K.useRef(!1);return Br(()=>(i.current=!0,()=>{i.current=!1}),[]),i};function Dm(){const i=K.useState()[1],t=N9();return()=>{t.current&&i(Math.random())}}var Vm=i=>K.useEffect(i,L9),L9=[];function U1(i){const t=K.useRef(void 0);return K.useEffect(()=>{t.current=i}),t.current}var Zl=Symbol.for("Animated:node"),k9=i=>!!i&&i[Zl]===i,vi=i=>i&&i[Zl],Mm=(i,t)=>o9(i,Zl,t),Lh=i=>i&&i[Zl]&&i[Zl].getPayload(),Y_=class{constructor(){Mm(this,this)}getPayload(){return this.payload||[]}},kh=class K_ extends Y_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,lt.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new K_(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,n){return lt.num(t)&&(this.lastPosition=t,n&&(t=Math.round(t/n)*n,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,lt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},ch=class X_ extends kh{constructor(t){super(0),this._string=null,this._toString=Yl({output:[t,t]})}static create(t){return new X_(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(lt.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Yl({output:[this.getValue(),t]})),this._value=0,super.reset()}},hh={dependencies:null},Ph=class extends Y_{constructor(i){super(),this.source=i,this.setValue(i)}getValue(i){const t={};return Ai(this.source,(n,r)=>{k9(n)?t[r]=n.getValue(i):Hn(n)?t[r]=mn(n):i||(t[r]=n)}),t}setValue(i){this.source=i,this.payload=this._makePayload(i)}reset(){this.payload&&xt(this.payload,i=>i.reset())}_makePayload(i){if(i){const t=new Set;return Ai(i,this._addToPayload,t),Array.from(t)}}_addToPayload(i){hh.dependencies&&Hn(i)&&hh.dependencies.add(i);const t=Lh(i);t&&xt(t,n=>this.add(n))}},P9=class $_ extends Ph{constructor(t){super(t)}static create(t){return new $_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const n=this.getPayload();return t.length==n.length?n.map((r,o)=>r.setValue(t[o])).some(Boolean):(super.setValue(t.map(j9)),!0)}};function j9(i){return(Nh(i)?ch:kh).create(i)}function z1(i){const t=vi(i);return t?t.constructor:lt.arr(i)?P9:Nh(i)?ch:kh}var F2=(i,t)=>{const n=!lt.fun(i)||i.prototype&&i.prototype.isReactComponent;return K.forwardRef((r,o)=>{const u=K.useRef(null),f=n&&K.useCallback(I=>{u.current=B9(o,I)},[o]),[m,y]=z9(r,t),g=Dm(),v=()=>{const I=u.current;if(n&&!I)return;(I?t.applyAnimatedValues(I,m.getValue(!0)):!1)===!1&&g()},b=new U9(v,y),T=K.useRef(void 0);Br(()=>(T.current=b,xt(y,I=>ho(I,b)),()=>{T.current&&(xt(T.current.deps,I=>$l(I,T.current)),Vt.cancel(T.current.update))})),K.useEffect(v,[]),Vm(()=>()=>{const I=T.current;xt(I.deps,P=>$l(P,I))});const R=t.getComponentProps(m.getValue());return K.createElement(i,{...R,ref:f})})},U9=class{constructor(i,t){this.update=i,this.deps=t}eventObserved(i){i.type=="change"&&Vt.write(this.update)}};function z9(i,t){const n=new Set;return hh.dependencies=n,i.style&&(i={...i,style:t.createAnimatedStyle(i.style)}),i=new Ph(i),hh.dependencies=null,[i,n]}function B9(i,t){return i&&(lt.fun(i)?i(t):i.current=t),t}var Q2=Symbol.for("AnimatedComponent"),q9=(i,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=o=>new Ph(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},u=f=>{const m=Y2(f)||"Anonymous";return lt.str(f)?f=u[f]||(u[f]=F2(f,o)):f=f[Q2]||(f[Q2]=F2(f,o)),f.displayName=`Animated(${m})`,f};return Ai(i,(f,m)=>{lt.arr(i)&&(m=Y2(f)),u[m]=u(f)}),{animated:u}},Y2=i=>lt.str(i)?i:i&&lt.str(i.displayName)?i.displayName:lt.fun(i)&&i.name||null;function gn(i,...t){return lt.fun(i)?i(...t):i}var Ul=(i,t)=>i===!0||!!(t&&i&&(lt.fun(i)?i(t):un(i).includes(t))),Z_=(i,t)=>lt.obj(i)?t&&i[t]:i,J_=(i,t)=>i.default===!0?i[t]:i.default?i.default[t]:void 0,H9=i=>i,jh=(i,t=H9)=>{let n=G9;i.default&&i.default!==!0&&(i=i.default,n=Object.keys(i));const r={};for(const o of n){const u=t(i[o],o);lt.und(u)||(r[o]=u)}return r},G9=["config","onProps","onStart","onChange","onPause","onResume","onRest"],F9={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Q9(i){const t={};let n=0;if(Ai(i,(r,o)=>{F9[o]||(t[o]=r,n++)}),n)return t}function Om(i){const t=Q9(i);if(t){const n={to:t};return Ai(i,(r,o)=>o in t||(n[o]=r)),n}return{...i}}function Jl(i){return i=mn(i),lt.arr(i)?i.map(Jl):Nh(i)?ei.createStringInterpolator({range:[0,1],output:[i,i]})(1):i}function W_(i){for(const t in i)return!0;return!1}function B1(i){return lt.fun(i)||lt.arr(i)&&lt.obj(i[0])}function q1(i,t){var n;(n=i.ref)==null||n.delete(i),t==null||t.delete(i)}function tv(i,t){var n;t&&i.ref!==t&&((n=i.ref)==null||n.delete(i),t.add(i),i.ref=t)}var H1={default:{tension:170,friction:26},stiff:{tension:210,friction:20}},G1={...H1.default,mass:1,damping:1,easing:S9.linear,clamp:!1},Y9=class{constructor(){this.velocity=0,Object.assign(this,G1)}};function K9(i,t,n){n&&(n={...n},K2(n,t),t={...n,...t}),K2(i,t),Object.assign(i,t);for(const f in G1)i[f]==null&&(i[f]=G1[f]);let{frequency:r,damping:o}=i;const{mass:u}=i;return lt.und(r)||(r<.01&&(r=.01),o<0&&(o=0),i.tension=Math.pow(2*Math.PI/r,2)*u,i.friction=4*Math.PI*o*u/r),i}function K2(i,t){if(!lt.und(t.decay))i.duration=void 0;else{const n=!lt.und(t.tension)||!lt.und(t.friction);(n||!lt.und(t.frequency)||!lt.und(t.damping)||!lt.und(t.mass))&&(i.duration=void 0,i.decay=void 0),n&&(i.frequency=void 0)}}var X2=[],X9=class{constructor(){this.changed=!1,this.values=X2,this.toValues=null,this.fromValues=X2,this.config=new Y9,this.immediate=!1}};function ev(i,{key:t,props:n,defaultProps:r,state:o,actions:u}){return new Promise((f,m)=>{let y,g,v=Ul(n.cancel??(r==null?void 0:r.cancel),t);if(v)R();else{lt.und(n.pause)||(o.paused=Ul(n.pause,t));let I=r==null?void 0:r.pause;I!==!0&&(I=o.paused||Ul(I,t)),y=gn(n.delay||0,t),I?(o.resumeQueue.add(T),u.pause()):(u.resume(),T())}function b(){o.resumeQueue.add(T),o.timeouts.delete(g),g.cancel(),y=g.time-Vt.now()}function T(){y>0&&!ei.skipAnimation?(o.delayed=!0,g=Vt.setTimeout(R,y),o.pauseQueue.add(b),o.timeouts.add(g)):R()}function R(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(b),o.timeouts.delete(g),i<=(o.cancelId||0)&&(v=!0);try{u.start({...n,callId:i,cancel:v},f)}catch(I){m(I)}}})}var Nm=(i,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?Ja(i.get()):t.every(n=>n.noop)?nv(i.get()):Wn(i.get(),t.every(n=>n.finished)),nv=i=>({value:i,noop:!0,finished:!0,cancelled:!1}),Wn=(i,t,n=!1)=>({value:i,finished:t,cancelled:n}),Ja=i=>({value:i,cancelled:!0,finished:!1});function iv(i,t,n,r){const{callId:o,parentId:u,onRest:f}=t,{asyncTo:m,promise:y}=n;return!u&&i===m&&!t.reset?y:n.promise=(async()=>{n.asyncId=o,n.asyncTo=i;const g=jh(t,(N,q)=>q==="onRest"?void 0:N);let v,b;const T=new Promise((N,q)=>(v=N,b=q)),R=N=>{const q=o<=(n.cancelId||0)&&Ja(r)||o!==n.asyncId&&Wn(r,!1);if(q)throw N.result=q,b(N),N},I=(N,q)=>{const J=new $2,B=new Z2;return(async()=>{if(ei.skipAnimation)throw Wl(n),B.result=Wn(r,!1),b(B),B;R(J);const H=lt.obj(N)?{...N}:{...q,to:N};H.parentId=o,Ai(g,(tt,D)=>{lt.und(H[D])&&(H[D]=tt)});const et=await r.start(H);return R(J),n.paused&&await new Promise(tt=>{n.resumeQueue.add(tt)}),et})()};let P;if(ei.skipAnimation)return Wl(n),Wn(r,!1);try{let N;lt.arr(i)?N=(async q=>{for(const J of q)await I(J)})(i):N=Promise.resolve(i(I,r.stop.bind(r))),await Promise.all([N.then(v),T]),P=Wn(r.get(),!0,!1)}catch(N){if(N instanceof $2)P=N.result;else if(N instanceof Z2)P=N.result;else throw N}finally{o==n.asyncId&&(n.asyncId=u,n.asyncTo=u?m:void 0,n.promise=u?y:void 0)}return lt.fun(f)&&Vt.batchedUpdates(()=>{f(P,r,r.item)}),P})()}function Wl(i,t){Pl(i.timeouts,n=>n.cancel()),i.pauseQueue.clear(),i.resumeQueue.clear(),i.asyncId=i.asyncTo=i.promise=void 0,t&&(i.cancelId=t)}var $2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Z2=class extends Error{constructor(){super("SkipAnimationSignal")}},F1=i=>i instanceof Lm,$9=1,Lm=class extends q_{constructor(){super(...arguments),this.id=$9++,this._priority=0}get priority(){return this._priority}set priority(i){this._priority!=i&&(this._priority=i,this._onPriorityChange(i))}get(){const i=vi(this);return i&&i.getValue()}to(...i){return ei.to(this,i)}interpolate(...i){return V9(),ei.to(this,i)}toJSON(){return this.get()}observerAdded(i){i==1&&this._attach()}observerRemoved(i){i==0&&this._detach()}_attach(){}_detach(){}_onChange(i,t=!1){Xl(this,{type:"change",parent:this,value:i,idle:t})}_onPriorityChange(i){this.idle||Vh.sort(this),Xl(this,{type:"priority",parent:this,priority:i})}},Hr=Symbol.for("SpringPhase"),sv=1,Q1=2,Y1=4,E1=i=>(i[Hr]&sv)>0,Ns=i=>(i[Hr]&Q1)>0,xl=i=>(i[Hr]&Y1)>0,J2=(i,t)=>t?i[Hr]|=Q1|sv:i[Hr]&=~Q1,W2=(i,t)=>t?i[Hr]|=Y1:i[Hr]&=~Y1,Z9=class extends Lm{constructor(i,t){if(super(),this.animation=new X9,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!lt.und(i)||!lt.und(t)){const n=lt.obj(i)?{...i}:{...t,from:i};lt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ns(this)||this._state.asyncTo)||xl(this)}get goal(){return mn(this.animation.to)}get velocity(){const i=vi(this);return i instanceof kh?i.lastVelocity||0:i.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return E1(this)}get isAnimating(){return Ns(this)}get isPaused(){return xl(this)}get isDelayed(){return this._state.delayed}advance(i){let t=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:u}=r,f=Lh(r.to);!f&&Hn(r.to)&&(o=un(mn(r.to))),r.values.forEach((g,v)=>{if(g.done)return;const b=g.constructor==ch?1:f?f[v].lastPosition:o[v];let T=r.immediate,R=b;if(!T){if(R=g.lastPosition,u.tension<=0){g.done=!0;return}let I=g.elapsedTime+=i;const P=r.fromValues[v],N=g.v0!=null?g.v0:g.v0=lt.arr(u.velocity)?u.velocity[v]:u.velocity;let q;const J=u.precision||(P==b?.005:Math.min(1,Math.abs(b-P)*.001));if(lt.und(u.duration))if(u.decay){const B=u.decay===!0?.998:u.decay,H=Math.exp(-(1-B)*I);R=P+N/(1-B)*(1-H),T=Math.abs(g.lastPosition-R)<=J,q=N*H}else{q=g.lastVelocity==null?N:g.lastVelocity;const B=u.restVelocity||J/10,H=u.clamp?0:u.bounce,et=!lt.und(H),tt=P==b?g.v0>0:P<b;let D,C=!1;const x=1,L=Math.ceil(i/x);for(let k=0;k<L&&(D=Math.abs(q)>B,!(!D&&(T=Math.abs(b-R)<=J,T)));++k){et&&(C=R==b||R>b==tt,C&&(q=-q*H,R=b));const U=-u.tension*1e-6*(R-b),V=-u.friction*.001*q,mt=(U+V)/u.mass;q=q+mt*x,R=R+q*x}}else{let B=1;u.duration>0&&(this._memoizedDuration!==u.duration&&(this._memoizedDuration=u.duration,g.durationProgress>0&&(g.elapsedTime=u.duration*g.durationProgress,I=g.elapsedTime+=i)),B=(u.progress||0)+I/this._memoizedDuration,B=B>1?1:B<0?0:B,g.durationProgress=B),R=P+u.easing(B)*(b-P),q=(R-g.lastPosition)/i,T=B==1}g.lastVelocity=q,Number.isNaN(R)&&(console.warn("Got NaN while animating:",this),T=!0)}f&&!f[v].done&&(T=!1),T?g.done=!0:t=!1,g.setValue(R,u.round)&&(n=!0)});const m=vi(this),y=m.getValue();if(t){const g=mn(r.to);(y!==g||n)&&!u.decay?(m.setValue(g),this._onChange(g)):n&&u.decay&&this._onChange(y),this._stop()}else n&&this._onChange(y)}set(i){return Vt.batchedUpdates(()=>{this._stop(),this._focus(i),this._set(i)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ns(this)){const{to:i,config:t}=this.animation;Vt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(i,!1),this._stop()})}return this}update(i){return(this.queue||(this.queue=[])).push(i),this}start(i,t){let n;return lt.und(i)?(n=this.queue||[],this.queue=[]):n=[lt.obj(i)?i:{...t,to:i}],Promise.all(n.map(r=>this._update(r))).then(r=>Nm(this,r))}stop(i){const{to:t}=this.animation;return this._focus(this.get()),Wl(this._state,i&&this._lastCallId),Vt.batchedUpdates(()=>this._stop(t,i)),this}reset(){this._update({reset:!0})}eventObserved(i){i.type=="change"?this._start():i.type=="priority"&&(this.priority=i.priority+1)}_prepareNode(i){const t=this.key||"";let{to:n,from:r}=i;n=lt.obj(n)?n[t]:n,(n==null||B1(n))&&(n=void 0),r=lt.obj(r)?r[t]:r,r==null&&(r=void 0);const o={to:n,from:r};return E1(this)||(i.reverse&&([n,r]=[r,n]),r=mn(r),lt.und(r)?vi(this)||this._set(n):this._set(r)),o}_update({...i},t){const{key:n,defaultProps:r}=this;i.default&&Object.assign(r,jh(i,(f,m)=>/^on/.test(m)?Z_(f,n):f)),ey(this,i,"onProps"),Dl(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const u=this._state;return ev(++this._lastCallId,{key:n,props:i,defaultProps:r,state:u,actions:{pause:()=>{xl(this)||(W2(this,!0),Ml(u.pauseQueue),Dl(this,"onPause",Wn(this,Il(this,this.animation.to)),this))},resume:()=>{xl(this)&&(W2(this,!1),Ns(this)&&this._resume(),Ml(u.resumeQueue),Dl(this,"onResume",Wn(this,Il(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(f=>{if(i.loop&&f.finished&&!(t&&f.noop)){const m=rv(i);if(m)return this._update(m,!0)}return f})}_merge(i,t,n){if(t.cancel)return this.stop(!0),n(Ja(this));const r=!lt.und(i.to),o=!lt.und(i.from);if(r||o)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(Ja(this));const{key:u,defaultProps:f,animation:m}=this,{to:y,from:g}=m;let{to:v=y,from:b=g}=i;o&&!r&&(!t.default||lt.und(v))&&(v=b),t.reverse&&([v,b]=[b,v]);const T=!ts(b,g);T&&(m.from=b),b=mn(b);const R=!ts(v,y);R&&this._focus(v);const I=B1(t.to),{config:P}=m,{decay:N,velocity:q}=P;(r||o)&&(P.velocity=0),t.config&&!I&&K9(P,gn(t.config,u),t.config!==f.config?gn(f.config,u):void 0);let J=vi(this);if(!J||lt.und(v))return n(Wn(this,!0));const B=lt.und(t.reset)?o&&!t.default:!lt.und(b)&&Ul(t.reset,u),H=B?b:this.get(),et=Jl(v),tt=lt.num(et)||lt.arr(et)||Nh(et),D=!I&&(!tt||Ul(f.immediate||t.immediate,u));if(R){const k=z1(v);if(k!==J.constructor)if(D)J=this._set(et);else throw Error(`Cannot animate between ${J.constructor.name} and ${k.name}, as the "to" prop suggests`)}const C=J.constructor;let x=Hn(v),L=!1;if(!x){const k=B||!E1(this)&&T;(R||k)&&(L=ts(Jl(H),et),x=!L),(!ts(m.immediate,D)&&!D||!ts(P.decay,N)||!ts(P.velocity,q))&&(x=!0)}if(L&&Ns(this)&&(m.changed&&!B?x=!0:x||this._stop(y)),!I&&((x||Hn(y))&&(m.values=J.getPayload(),m.toValues=Hn(v)?null:C==ch?[1]:un(et)),m.immediate!=D&&(m.immediate=D,!D&&!B&&this._set(y)),x)){const{onRest:k}=m;xt(W9,V=>ey(this,t,V));const U=Wn(this,Il(this,y));Ml(this._pendingCalls,U),this._pendingCalls.add(n),m.changed&&Vt.batchedUpdates(()=>{var V;m.changed=!B,k==null||k(U,this),B?gn(f.onRest,U):(V=m.onStart)==null||V.call(m,U,this)})}B&&this._set(H),I?n(iv(t.to,t,this._state,this)):x?this._start():Ns(this)&&!R?this._pendingCalls.add(n):n(nv(H))}_focus(i){const t=this.animation;i!==t.to&&(H2(this)&&this._detach(),t.to=i,H2(this)&&this._attach())}_attach(){let i=0;const{to:t}=this.animation;Hn(t)&&(ho(t,this),F1(t)&&(i=t.priority+1)),this.priority=i}_detach(){const{to:i}=this.animation;Hn(i)&&$l(i,this)}_set(i,t=!0){const n=mn(i);if(!lt.und(n)){const r=vi(this);if(!r||!ts(n,r.getValue())){const o=z1(n);!r||r.constructor!=o?Mm(this,o.create(n)):r.setValue(n),r&&Vt.batchedUpdates(()=>{this._onChange(n,t)})}}return vi(this)}_onStart(){const i=this.animation;i.changed||(i.changed=!0,Dl(this,"onStart",Wn(this,Il(this,i.to)),this))}_onChange(i,t){t||(this._onStart(),gn(this.animation.onChange,i,this)),gn(this.defaultProps.onChange,i,this),super._onChange(i,t)}_start(){const i=this.animation;vi(this).reset(mn(i.to)),i.immediate||(i.fromValues=i.values.map(t=>t.lastPosition)),Ns(this)||(J2(this,!0),xl(this)||this._resume())}_resume(){ei.skipAnimation?this.finish():Vh.start(this)}_stop(i,t){if(Ns(this)){J2(this,!1);const n=this.animation;xt(n.values,o=>{o.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Xl(this,{type:"idle",parent:this});const r=t?Ja(this.get()):Wn(this.get(),Il(this,i??n.to));Ml(this._pendingCalls,r),n.changed&&(n.changed=!1,Dl(this,"onRest",r,this))}}};function Il(i,t){const n=Jl(t),r=Jl(i.get());return ts(r,n)}function rv(i,t=i.loop,n=i.to){const r=gn(t);if(r){const o=r!==!0&&Om(r),u=(o||i).reverse,f=!o||o.reset;return tu({...i,loop:t,default:!1,pause:void 0,to:!u||B1(n)?n:void 0,from:f?i.from:void 0,reset:f,...o})}}function tu(i){const{to:t,from:n}=i=Om(i),r=new Set;return lt.obj(t)&&ty(t,r),lt.obj(n)&&ty(n,r),i.keys=r.size?Array.from(r):null,i}function J9(i){const t=tu(i);return lt.und(t.default)&&(t.default=jh(t)),t}function ty(i,t){Ai(i,(n,r)=>n!=null&&t.add(r))}var W9=["onStart","onRest","onChange","onPause","onResume"];function ey(i,t,n){i.animation[n]=t[n]!==J_(t,n)?Z_(t[n],i.key):void 0}function Dl(i,t,...n){var r,o,u,f;(o=(r=i.animation)[t])==null||o.call(r,...n),(f=(u=i.defaultProps)[t])==null||f.call(u,...n)}var t5=["onStart","onChange","onRest"],e5=1,av=class{constructor(t,n){this.id=e5++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((n,r)=>t[r]=n.get()),t}set(t){for(const n in t){const r=t[n];lt.und(r)||this.springs[n].set(r)}}update(t){return t&&this.queue.push(tu(t)),this}start(t){let{queue:n}=this;return t?n=un(t).map(tu):this.queue=[],this._flush?this._flush(this,n):(hv(this,n),K1(this,n))}stop(t,n){if(t!==!!t&&(n=t),n){const r=this.springs;xt(un(n),o=>r[o].stop(!!t))}else Wl(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(lt.und(t))this.start({pause:!0});else{const n=this.springs;xt(un(t),r=>n[r].pause())}return this}resume(t){if(lt.und(t))this.start({pause:!1});else{const n=this.springs;xt(un(t),r=>n[r].resume())}return this}each(t){Ai(this.springs,t)}_onFrame(){const{onStart:t,onChange:n,onRest:r}=this._events,o=this._active.size>0,u=this._changed.size>0;(o&&!this._started||u&&!this._started)&&(this._started=!0,Pl(t,([y,g])=>{g.value=this.get(),y(g,this,this._item)}));const f=!o&&this._started,m=u||f&&r.size?this.get():null;u&&n.size&&Pl(n,([y,g])=>{g.value=m,y(g,this,this._item)}),f&&(this._started=!1,Pl(r,([y,g])=>{g.value=m,y(g,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Vt.onFrame(this._onFrame)}};function K1(i,t){return Promise.all(t.map(n=>ov(i,n))).then(n=>Nm(i,n))}async function ov(i,t,n){const{keys:r,to:o,from:u,loop:f,onRest:m,onResolve:y}=t,g=lt.obj(t.default)&&t.default;f&&(t.loop=!1),o===!1&&(t.to=null),u===!1&&(t.from=null);const v=lt.arr(o)||lt.fun(o)?o:void 0;v?(t.to=void 0,t.onRest=void 0,g&&(g.onRest=void 0)):xt(t5,P=>{const N=t[P];if(lt.fun(N)){const q=i._events[P];t[P]=({finished:J,cancelled:B})=>{const H=q.get(N);H?(J||(H.finished=!1),B&&(H.cancelled=!0)):q.set(N,{value:null,finished:J||!1,cancelled:B||!1})},g&&(g[P]=t[P])}});const b=i._state;t.pause===!b.paused?(b.paused=t.pause,Ml(t.pause?b.pauseQueue:b.resumeQueue)):b.paused&&(t.pause=!0);const T=(r||Object.keys(i.springs)).map(P=>i.springs[P].start(t)),R=t.cancel===!0||J_(t,"cancel")===!0;(v||R&&b.asyncId)&&T.push(ev(++i._lastAsyncId,{props:t,state:b,actions:{pause:P1,resume:P1,start(P,N){R?(Wl(b,i._lastAsyncId),N(Ja(i))):(P.onRest=m,N(iv(v,P,b,i)))}}})),b.paused&&await new Promise(P=>{b.resumeQueue.add(P)});const I=Nm(i,await Promise.all(T));if(f&&I.finished&&!(n&&I.noop)){const P=rv(t,f,o);if(P)return hv(i,[P]),ov(i,P,!0)}return y&&Vt.batchedUpdates(()=>y(I,i,i.item)),I}function X1(i,t){const n={...i.springs};return t&&xt(un(t),r=>{lt.und(r.keys)&&(r=tu(r)),lt.obj(r.to)||(r={...r,to:void 0}),cv(n,r,o=>uv(o))}),lv(i,n),n}function lv(i,t){Ai(t,(n,r)=>{i.springs[r]||(i.springs[r]=n,ho(n,i))})}function uv(i,t){const n=new Z9;return n.key=i,t&&ho(n,t),n}function cv(i,t,n){t.keys&&xt(t.keys,r=>{(i[r]||(i[r]=n(r)))._prepareNode(t)})}function hv(i,t){xt(t,n=>{cv(i.springs,n,r=>uv(r,i))})}var fv=K.createContext({pause:!1,immediate:!1}),dv=()=>{const i=[],t=function(r){O9();const o=[];return xt(i,(u,f)=>{if(lt.und(r))o.push(u.start());else{const m=n(r,u,f);m&&o.push(u.start(m))}}),o};t.current=i,t.add=function(r){i.includes(r)||i.push(r)},t.delete=function(r){const o=i.indexOf(r);~o&&i.splice(o,1)},t.pause=function(){return xt(i,r=>r.pause(...arguments)),this},t.resume=function(){return xt(i,r=>r.resume(...arguments)),this},t.set=function(r){xt(i,(o,u)=>{const f=lt.fun(r)?r(u,o):r;f&&o.set(f)})},t.start=function(r){const o=[];return xt(i,(u,f)=>{if(lt.und(r))o.push(u.start());else{const m=this._getProps(r,u,f);m&&o.push(u.start(m))}}),o},t.stop=function(){return xt(i,r=>r.stop(...arguments)),this},t.update=function(r){return xt(i,(o,u)=>o.update(this._getProps(r,o,u))),this};const n=function(r,o,u){return lt.fun(r)?r(u,o):r};return t._getProps=n,t};function n5(i,t,n){const r=lt.fun(t)&&t;r&&!n&&(n=[]);const o=K.useMemo(()=>r||arguments.length==3?dv():void 0,[]),u=K.useRef(0),f=Dm(),m=K.useMemo(()=>({ctrls:[],queue:[],flush(q,J){const B=X1(q,J);return u.current>0&&!m.queue.length&&!Object.keys(B).some(et=>!q.springs[et])?K1(q,J):new Promise(et=>{lv(q,B),m.queue.push(()=>{et(K1(q,J))}),f()})}}),[]),y=K.useRef([...m.ctrls]),g=K.useRef([]),v=U1(i)||0;K.useMemo(()=>{xt(y.current.slice(i,v),q=>{q1(q,o),q.stop(!0)}),y.current.length=i,b(v,i)},[i]),K.useMemo(()=>{b(0,Math.min(v,i))},n);function b(q,J){for(let B=q;B<J;B++){const H=y.current[B]||(y.current[B]=new av(null,m.flush)),et=r?r(B,H):t[B];et&&(g.current[B]=J9(et))}}const T=y.current.map((q,J)=>X1(q,g.current[J])),R=K.useContext(fv),I=U1(R),P=R!==I&&W_(R);Br(()=>{u.current++,m.ctrls=y.current;const{queue:q}=m;q.length&&(m.queue=[],xt(q,J=>J())),xt(y.current,(J,B)=>{o==null||o.add(J),P&&J.start({default:R});const H=g.current[B];H&&(tv(J,H.ref),J.ref?J.queue.push(H):J.start(H))})}),Vm(()=>()=>{xt(m.ctrls,q=>q.stop(!0))});const N=T.map(q=>({...q}));return o?[N,o]:N}function Qr(i,t){const n=lt.fun(i),[[r],o]=n5(1,n?i:[i],n?[]:t);return n||arguments.length==2?[r,o]:r}function Uh(i,t,n){const r=lt.fun(t)&&t,{reset:o,sort:u,trail:f=0,expires:m=!0,exitBeforeEnter:y=!1,onDestroyed:g,ref:v,config:b}=r?r():t,T=K.useMemo(()=>r||arguments.length==3?dv():void 0,[]),R=un(i),I=[],P=K.useRef(null),N=o?null:P.current;Br(()=>{P.current=I}),Vm(()=>(xt(I,mt=>{T==null||T.add(mt.ctrl),mt.ctrl.ref=T}),()=>{xt(P.current,mt=>{mt.expired&&clearTimeout(mt.expirationId),q1(mt.ctrl,T),mt.ctrl.stop(!0)})}));const q=s5(R,r?r():t,N),J=o&&P.current||[];Br(()=>xt(J,({ctrl:mt,item:dt,key:Y})=>{q1(mt,T),gn(g,dt,Y)}));const B=[];if(N&&xt(N,(mt,dt)=>{mt.expired?(clearTimeout(mt.expirationId),J.push(mt)):(dt=B[dt]=q.indexOf(mt.key),~dt&&(I[dt]=mt))}),xt(R,(mt,dt)=>{I[dt]||(I[dt]={key:q[dt],item:mt,phase:"mount",ctrl:new av},I[dt].ctrl.item=mt)}),B.length){let mt=-1;const{leave:dt}=r?r():t;xt(B,(Y,Z)=>{const ct=N[Z];~Y?(mt=I.indexOf(ct),I[mt]={...ct,item:R[Y]}):dt&&I.splice(++mt,0,ct)})}lt.fun(u)&&I.sort((mt,dt)=>u(mt.item,dt.item));let H=-f;const et=Dm(),tt=jh(t),D=new Map,C=K.useRef(new Map),x=K.useRef(!1);xt(I,(mt,dt)=>{const Y=mt.key,Z=mt.phase,ct=r?r():t;let pt,O;const st=gn(ct.delay||0,Y);if(Z=="mount")pt=ct.enter,O="enter";else{const bt=q.indexOf(Y)<0;if(Z!="leave")if(bt)pt=ct.leave,O="leave";else if(pt=ct.update)O="update";else return;else if(!bt)pt=ct.enter,O="enter";else return}if(pt=gn(pt,mt.item,dt),pt=lt.obj(pt)?Om(pt):{to:pt},!pt.config){const bt=b||tt.config;pt.config=gn(bt,mt.item,dt,O)}H+=f;const ht={...tt,delay:st+H,ref:v,immediate:ct.immediate,reset:!1,...pt};if(O=="enter"&&lt.und(ht.from)){const bt=r?r():t,Tt=lt.und(bt.initial)||N?bt.from:bt.initial;ht.from=gn(Tt,mt.item,dt)}const{onResolve:ut}=ht;ht.onResolve=bt=>{gn(ut,bt);const Tt=P.current,Kt=Tt.find(zt=>zt.key===Y);if(Kt&&!(bt.cancelled&&Kt.phase!="update")&&Kt.ctrl.idle){const zt=Tt.every(de=>de.ctrl.idle);if(Kt.phase=="leave"){const de=gn(m,Kt.item);if(de!==!1){const qe=de===!0?0:de;if(Kt.expired=!0,!zt&&qe>0){qe<=2147483647&&(Kt.expirationId=setTimeout(et,qe));return}}}zt&&Tt.some(de=>de.expired)&&(C.current.delete(Kt),y&&(x.current=!0),et())}};const _t=X1(mt.ctrl,ht);O==="leave"&&y?C.current.set(mt,{phase:O,springs:_t,payload:ht}):D.set(mt,{phase:O,springs:_t,payload:ht})});const L=K.useContext(fv),k=U1(L),U=L!==k&&W_(L);Br(()=>{U&&xt(I,mt=>{mt.ctrl.start({default:L})})},[L]),xt(D,(mt,dt)=>{if(C.current.size){const Y=I.findIndex(Z=>Z.key===dt.key);I.splice(Y,1)}}),Br(()=>{xt(C.current.size?C.current:D,({phase:mt,payload:dt},Y)=>{const{ctrl:Z}=Y;Y.phase=mt,T==null||T.add(Z),U&&mt=="enter"&&Z.start({default:L}),dt&&(tv(Z,dt.ref),(Z.ref||T)&&!x.current?Z.update(dt):(Z.start(dt),x.current&&(x.current=!1)))})},o?void 0:n);const V=mt=>K.createElement(K.Fragment,null,I.map((dt,Y)=>{const{springs:Z}=D.get(dt)||dt.ctrl,ct=mt({...Z},dt.item,dt,Y),pt=lt.str(dt.key)||lt.num(dt.key)?dt.key:dt.ctrl.id,O=K.version<"19.0.0",st=(ct==null?void 0:ct.props)??{};return O&&(st.ref=ct.ref),ct&&ct.type?K.createElement(ct.type,{key:pt,...st}):ct}));return T?[V,T]:V}var i5=1;function s5(i,{key:t,keys:n=t},r){if(n===null){const o=new Set;return i.map(u=>{const f=r&&r.find(m=>m.item===u&&m.phase!=="leave"&&!o.has(m));return f?(o.add(f),f.key):i5++})}return lt.und(n)?i:lt.fun(n)?i.map(n):un(n)}var r5=class extends Lm{constructor(i,t){super(),this.source=i,this.idle=!0,this._active=new Set,this.calc=Yl(...t);const n=this._get(),r=z1(n);Mm(this,r.create(n))}advance(i){const t=this._get(),n=this.get();ts(t,n)||(vi(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&ny(this._active)&&T1(this)}_get(){const i=lt.arr(this.source)?this.source.map(mn):un(mn(this.source));return this.calc(...i)}_start(){this.idle&&!ny(this._active)&&(this.idle=!1,xt(Lh(this),i=>{i.done=!1}),ei.skipAnimation?(Vt.batchedUpdates(()=>this.advance()),T1(this)):Vh.start(this))}_attach(){let i=1;xt(un(this.source),t=>{Hn(t)&&ho(t,this),F1(t)&&(t.idle||this._active.add(t),i=Math.max(i,t.priority+1))}),this.priority=i,this._start()}_detach(){xt(un(this.source),i=>{Hn(i)&&$l(i,this)}),this._active.clear(),T1(this)}eventObserved(i){i.type=="change"?i.idle?this.advance():(this._active.add(i.parent),this._start()):i.type=="idle"?this._active.delete(i.parent):i.type=="priority"&&(this.priority=un(this.source).reduce((t,n)=>Math.max(t,(F1(n)?n.priority:0)+1),0))}};function a5(i){return i.idle!==!1}function ny(i){return!i.size||Array.from(i).every(a5)}function T1(i){i.idle||(i.idle=!0,xt(Lh(i),t=>{t.done=!0}),Xl(i,{type:"idle",parent:i}))}ei.assign({createStringInterpolator:F_,to:(i,t)=>new r5(i,t)});var o5=M_(),mv=/^--/;function l5(i,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!mv.test(i)&&!(zl.hasOwnProperty(i)&&zl[i])?t+"px":(""+t).trim()}var iy={};function u5(i,t){if(!i.nodeType||!i.setAttribute)return!1;const n=i.nodeName==="filter"||i.parentNode&&i.parentNode.nodeName==="filter",{className:r,style:o,children:u,scrollTop:f,scrollLeft:m,viewBox:y,...g}=t,v=Object.values(g),b=Object.keys(g).map(T=>n||i.hasAttribute(T)?T:iy[T]||(iy[T]=T.replace(/([A-Z])/g,R=>"-"+R.toLowerCase())));u!==void 0&&(i.textContent=u);for(const T in o)if(o.hasOwnProperty(T)){const R=l5(T,o[T]);mv.test(T)?i.style.setProperty(T,R):i.style[T]=R}b.forEach((T,R)=>{i.setAttribute(T,v[R])}),r!==void 0&&(i.className=r),f!==void 0&&(i.scrollTop=f),m!==void 0&&(i.scrollLeft=m),y!==void 0&&i.setAttribute("viewBox",y)}var zl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c5=(i,t)=>i+t.charAt(0).toUpperCase()+t.substring(1),h5=["Webkit","Ms","Moz","O"];zl=Object.keys(zl).reduce((i,t)=>(h5.forEach(n=>i[c5(n,t)]=i[t]),i),zl);var f5=/^(matrix|translate|scale|rotate|skew)/,d5=/^(translate)/,m5=/^(rotate|skew)/,b1=(i,t)=>lt.num(i)&&i!==0?i+t:i,th=(i,t)=>lt.arr(i)?i.every(n=>th(n,t)):lt.num(i)?i===t:parseFloat(i)===t,g5=class extends Ph{constructor({x:i,y:t,z:n,...r}){const o=[],u=[];(i||t||n)&&(o.push([i||0,t||0,n||0]),u.push(f=>[`translate3d(${f.map(m=>b1(m,"px")).join(",")})`,th(f,0)])),Ai(r,(f,m)=>{if(m==="transform")o.push([f||""]),u.push(y=>[y,y===""]);else if(f5.test(m)){if(delete r[m],lt.und(f))return;const y=d5.test(m)?"px":m5.test(m)?"deg":"";o.push(un(f)),u.push(m==="rotate3d"?([g,v,b,T])=>[`rotate3d(${g},${v},${b},${b1(T,y)})`,th(T,0)]:g=>[`${m}(${g.map(v=>b1(v,y)).join(",")})`,th(g,m.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new p5(o,u)),super(r)}},p5=class extends q_{constructor(i,t){super(),this.inputs=i,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let i="",t=!0;return xt(this.inputs,(n,r)=>{const o=mn(n[0]),[u,f]=this.transforms[r](lt.arr(o)?o:n.map(mn));i+=" "+u,t=t&&f}),t?"none":i}observerAdded(i){i==1&&xt(this.inputs,t=>xt(t,n=>Hn(n)&&ho(n,this)))}observerRemoved(i){i==0&&xt(this.inputs,t=>xt(t,n=>Hn(n)&&$l(n,this)))}eventObserved(i){i.type=="change"&&(this._value=null),Xl(this,i)}},y5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ei.assign({batchedUpdates:o5.unstable_batchedUpdates,createStringInterpolator:F_,colors:h9});var _5=q9(y5,{applyAnimatedValues:u5,createAnimatedStyle:i=>new g5(i),getComponentProps:({scrollTop:i,scrollLeft:t,...n})=>n}),pn=_5.animated;function v5(i,t,n){return Math.max(t,Math.min(i,n))}const ae={toVector(i,t){return i===void 0&&(i=t),Array.isArray(i)?i:[i,i]},add(i,t){return[i[0]+t[0],i[1]+t[1]]},sub(i,t){return[i[0]-t[0],i[1]-t[1]]},addTo(i,t){i[0]+=t[0],i[1]+=t[1]},subTo(i,t){i[0]-=t[0],i[1]-=t[1]}};function sy(i,t,n){return t===0||Math.abs(t)===1/0?Math.pow(i,n*5):i*t*n/(t+n*i)}function ry(i,t,n,r=.15){return r===0?v5(i,t,n):i<t?-sy(t-i,n-t,r)+t:i>n?+sy(i-n,n-t,r)+n:i}function E5(i,[t,n],[r,o]){const[[u,f],[m,y]]=i;return[ry(t,u,f,r),ry(n,m,y,o)]}function T5(i,t){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var r=n.call(i,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function b5(i){var t=T5(i,"string");return typeof t=="symbol"?t:String(t)}function Ce(i,t,n){return t=b5(t),t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function ay(i,t){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,r)}return n}function he(i){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ay(Object(n),!0).forEach(function(r){Ce(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}const gv={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function oy(i){return i?i[0].toUpperCase()+i.slice(1):""}const S5=["enter","leave"];function A5(i=!1,t){return i&&!S5.includes(t)}function w5(i,t="",n=!1){const r=gv[i],o=r&&r[t]||t;return"on"+oy(i)+oy(o)+(A5(n,o)?"Capture":"")}const C5=["gotpointercapture","lostpointercapture"];function R5(i){let t=i.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=C5.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:n}}function x5(i,t=""){const n=gv[i],r=n&&n[t]||t;return i+r}function zh(i){return"touches"in i}function pv(i){return zh(i)?"touch":"pointerType"in i?i.pointerType:"mouse"}function I5(i){return Array.from(i.touches).filter(t=>{var n,r;return t.target===i.currentTarget||((n=i.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function D5(i){return i.type==="touchend"||i.type==="touchcancel"?i.changedTouches:i.targetTouches}function yv(i){return zh(i)?D5(i)[0]:i}function $1(i,t){try{const n=t.clientX-i.clientX,r=t.clientY-i.clientY,o=(t.clientX+i.clientX)/2,u=(t.clientY+i.clientY)/2,f=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:f,origin:[o,u]}}catch{}return null}function V5(i){return I5(i).map(t=>t.identifier)}function ly(i,t){const[n,r]=Array.from(i.touches).filter(o=>t.includes(o.identifier));return $1(n,r)}function S1(i){const t=yv(i);return zh(i)?t.identifier:t.pointerId}function no(i){const t=yv(i);return[t.clientX,t.clientY]}const uy=40,cy=800;function _v(i){let{deltaX:t,deltaY:n,deltaMode:r}=i;return r===1?(t*=uy,n*=uy):r===2&&(t*=cy,n*=cy),[t,n]}function M5(i){var t,n;const{scrollX:r,scrollY:o,scrollLeft:u,scrollTop:f}=i.currentTarget;return[(t=r??u)!==null&&t!==void 0?t:0,(n=o??f)!==null&&n!==void 0?n:0]}function O5(i){const t={};if("buttons"in i&&(t.buttons=i.buttons),"shiftKey"in i){const{shiftKey:n,altKey:r,metaKey:o,ctrlKey:u}=i;Object.assign(t,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:u})}return t}function fh(i,...t){return typeof i=="function"?i(...t):i}function N5(){}function L5(...i){return i.length===0?N5:i.length===1?i[0]:function(){let t;for(const n of i)t=n.apply(this,arguments)||t;return t}}function hy(i,t){return Object.assign({},t,i||{})}const k5=32;class vv{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:o}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=o,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?fh(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:o}=this;n.args=this.args;let u=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,O5(t)),o.down=o.pressed=o.buttons%2===1||o.touches>0,u=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const tt=n._delta.map(Math.abs);ae.addTo(n._distance,tt)}this.axisIntent&&this.axisIntent(t);const[f,m]=n._movement,[y,g]=r.threshold,{_step:v,values:b}=n;if(r.hasCustomTransform?(v[0]===!1&&(v[0]=Math.abs(f)>=y&&b[0]),v[1]===!1&&(v[1]=Math.abs(m)>=g&&b[1])):(v[0]===!1&&(v[0]=Math.abs(f)>=y&&Math.sign(f)*y),v[1]===!1&&(v[1]=Math.abs(m)>=g&&Math.sign(m)*g)),n.intentional=v[0]!==!1||v[1]!==!1,!n.intentional)return;const T=[0,0];if(r.hasCustomTransform){const[tt,D]=b;T[0]=v[0]!==!1?tt-v[0]:0,T[1]=v[1]!==!1?D-v[1]:0}else T[0]=v[0]!==!1?f-v[0]:0,T[1]=v[1]!==!1?m-v[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(T);const R=n.offset,I=n._active&&!n._blocked||n.active;I&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=o[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=fh(r.bounds,n)),this.setup&&this.setup()),n.movement=T,this.computeOffset()));const[P,N]=n.offset,[[q,J],[B,H]]=n._bounds;n.overflow=[P<q?-1:P>J?1:0,N<B?-1:N>H?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const et=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=E5(n._bounds,n.offset,et),n.delta=ae.sub(n.offset,R),this.computeMovement(),I&&(!n.last||u>k5)){n.delta=ae.sub(n.offset,R);const tt=n.delta.map(Math.abs);ae.addTo(n.distance,tt),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&u>0&&(n.velocity=[tt[0]/u,tt[1]/u],n.timeDelta=u)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const o=this.handler(he(he(he({},n),t),{},{[this.aliasKey]:t.values}));o!==void 0&&(t.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function P5([i,t],n){const r=Math.abs(i),o=Math.abs(t);if(r>o&&r>n)return"x";if(o>r&&o>n)return"y"}class hu extends vv{constructor(...t){super(...t),Ce(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ae.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ae.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const o=typeof r.axisThreshold=="object"?r.axisThreshold[pv(t)]:r.axisThreshold;n.axis=P5(n._movement,o)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const j5=i=>i,fy=.15,Ev={enabled(i=!0){return i},eventOptions(i,t,n){return he(he({},n.shared.eventOptions),i)},preventDefault(i=!1){return i},triggerAllEvents(i=!1){return i},rubberband(i=0){switch(i){case!0:return[fy,fy];case!1:return[0,0];default:return ae.toVector(i)}},from(i){if(typeof i=="function")return i;if(i!=null)return ae.toVector(i)},transform(i,t,n){const r=i||n.shared.transform;return this.hasCustomTransform=!!r,r||j5},threshold(i){return ae.toVector(i,0)}},U5=0,Yr=he(he({},Ev),{},{axis(i,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(i=U5){return i},bounds(i={}){if(typeof i=="function")return u=>Yr.bounds(i(u));if("current"in i)return()=>i.current;if(typeof HTMLElement=="function"&&i instanceof HTMLElement)return i;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:o=1/0}=i;return[[t,n],[r,o]]}}),dy={ArrowRight:(i,t=1)=>[i*t,0],ArrowLeft:(i,t=1)=>[-1*i*t,0],ArrowUp:(i,t=1)=>[0,-1*i*t],ArrowDown:(i,t=1)=>[0,i*t]};class z5 extends hu{constructor(...t){super(...t),Ce(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),o={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Yr.bounds(o)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const o=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(o&&o.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=S1(t),r._pointerActive=!0,this.computeValues(no(t)),this.computeInitial(),n.preventScrollAxis&&pv(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const o=S1(t);if(n._pointerId!==void 0&&o!==n._pointerId)return;const u=no(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=ae.sub(u,n._values),this.computeValues(u)),ae.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const o=S1(t);if(n._pointerId!==void 0&&o!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[u,f]=n._distance;if(n.tap=u<=r.tapsThreshold&&f<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[m,y]=n._delta,[g,v]=n._movement,[b,T]=r.swipe.velocity,[R,I]=r.swipe.distance,P=r.swipe.duration;if(n.elapsedTime<P){const N=Math.abs(m/n.timeDelta),q=Math.abs(y/n.timeDelta);N>b&&Math.abs(g)>R&&(n.swipe[0]=Math.sign(m)),q>T&&Math.abs(v)>I&&(n.swipe[1]=Math.sign(y))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,B5(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=dy[t.key];if(n){const r=this.state,o=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,o),r._keyboardActive=!0,ae.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in dy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function B5(i){"persist"in i&&typeof i.persist=="function"&&i.persist()}const fu=typeof window<"u"&&window.document&&window.document.createElement;function Tv(){return fu&&"ontouchstart"in window}function q5(){return Tv()||fu&&window.navigator.maxTouchPoints>1}function H5(){return fu&&"onpointerdown"in window}function G5(){return fu&&"exitPointerLock"in window.document}function F5(){try{return"constructor"in GestureEvent}catch{return!1}}const Gn={isBrowser:fu,gesture:F5(),touch:Tv(),touchscreen:q5(),pointer:H5(),pointerLock:G5()},Q5=250,Y5=180,K5=.5,X5=50,$5=250,Z5=10,my={mouse:0,touch:0,pen:8},J5=he(he({},Yr),{},{device(i,t,{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&Gn.pointerLock,Gn.touch&&n?"touch":this.pointerLock?"mouse":Gn.pointer&&!o?"pointer":Gn.touch?"touch":"mouse"},preventScrollAxis(i,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&i?Q5:void 0,!(!Gn.touchscreen||n===!1))return i||(n!==void 0?"y":void 0)},pointerCapture(i,t,{pointer:{capture:n=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&n},threshold(i,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:o=void 0}){const u=ae.toVector(i,n?r:o?1:0);return this.filterTaps=n,this.tapsThreshold=r,u},swipe({velocity:i=K5,distance:t=X5,duration:n=$5}={}){return{velocity:this.transform(ae.toVector(i)),distance:this.transform(ae.toVector(t)),duration:n}},delay(i=0){switch(i){case!0:return Y5;case!1:return 0;default:return i}},axisThreshold(i){return i?he(he({},my),i):my},keyboardDisplacement(i=Z5){return i}});function bv(i){const[t,n]=i.overflow,[r,o]=i._delta,[u,f]=i._direction;(t<0&&r>0&&u<0||t>0&&r<0&&u>0)&&(i._movement[0]=i._movementBound[0]),(n<0&&o>0&&f<0||n>0&&o<0&&f>0)&&(i._movement[1]=i._movementBound[1])}const W5=30,tE=100;class eE extends vv{constructor(...t){super(...t),Ce(this,"ingKey","pinching"),Ce(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:n,lastOffset:r}=this.state;t==="wheel"?this.state.offset=ae.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:n}=this.state;this.state.movement=[t[0]/n[0],t[1]-n[1]]}axisIntent(){const t=this.state,[n,r]=t._movement;if(!t.axis){const o=Math.abs(n)*W5-Math.abs(r);o<0?t.axis="angle":o>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(u=>r.has(u))||r.size<2)return;this.start(t),n._touchIds=Array.from(r).slice(0,2);const o=ly(t,n._touchIds);o&&this.pinchStart(t,o)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const n=this.state,r=n._pointerEvents,o=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(f=>o.has(f))||(r.size<2&&r.set(t.pointerId,t),n._pointerEvents.size<2))return;this.start(t);const u=$1(...Array.from(r.values()));u&&this.pinchStart(t,u)}pinchStart(t,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const n=ly(t,this.state._touchIds);n&&this.pinchMove(t,n)}pointerMove(t){const n=this.state._pointerEvents;if(n.has(t.pointerId)&&n.set(t.pointerId,t),!this.state._active)return;const r=$1(...Array.from(n.values()));r&&this.pinchMove(t,r)}pinchMove(t,n){const r=this.state,o=r._values[1],u=n.angle-o;let f=0;Math.abs(u)>270&&(f+=Math.sign(u)),this.computeValues([n.distance,n.angle-360*f]),r.origin=n.origin,r.turns=f,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const n=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}n._pointerEvents.has(t.pointerId)&&n._pointerEvents.delete(t.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const n=this.state;n._active||(this.start(t),this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY];const r=n._movement;n._movement=[t.scale-1,t.rotation],n._delta=ae.sub(n._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(r=>t[r]):!t[n])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-_v(t)[1]/tE*r.offset[0],0],ae.addTo(r._movement,r._delta),bv(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const n=this.config.device;n&&(t(n,"start",this[n+"Start"].bind(this)),t(n,"change",this[n+"Move"].bind(this)),t(n,"end",this[n+"End"].bind(this)),t(n,"cancel",this[n+"End"].bind(this)),t("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const nE=he(he({},Ev),{},{device(i,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Gn.touch&&Gn.gesture)return"gesture";if(Gn.touch&&r)return"touch";if(Gn.touchscreen){if(Gn.pointer)return"pointer";if(Gn.touch)return"touch"}},bounds(i,t,{scaleBounds:n={},angleBounds:r={}}){const o=f=>{const m=hy(fh(n,f),{min:-1/0,max:1/0});return[m.min,m.max]},u=f=>{const m=hy(fh(r,f),{min:-1/0,max:1/0});return[m.min,m.max]};return typeof n!="function"&&typeof r!="function"?[o(),u()]:f=>[o(f),u(f)]},threshold(i,t,n){return this.lockDirection=n.axis==="lock",ae.toVector(i,this.lockDirection?[.1,3]:0)},modifierKey(i){return i===void 0?"ctrlKey":i},pinchOnWheel(i=!0){return i}});class iE extends hu{constructor(...t){super(...t),Ce(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(no(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const n=no(t),r=this.state;r._delta=ae.sub(n,r._values),ae.addTo(r._movement,r._delta),this.computeValues(n),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const sE=he(he({},Yr),{},{mouseOnly:(i=!0)=>i});class rE extends hu{constructor(...t){super(...t),Ce(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const n=this.state,r=M5(t);n._delta=ae.sub(r,n._values),ae.addTo(n._movement,n._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const aE=Yr;class oE extends hu{constructor(...t){super(...t),Ce(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const n=this.state;n._delta=_v(t),ae.addTo(n._movement,n._delta),bv(n),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const lE=Yr;class uE extends hu{constructor(...t){super(...t),Ce(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(no(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const n=this.state;if(!n._active)return;n._active=!1;const r=no(t);n._movement=n._delta=ae.sub(r,n._values),this.computeValues(r),this.compute(t),n.delta=n.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const cE=he(he({},Yr),{},{mouseOnly:(i=!0)=>i}),km=new Map,Z1=new Map;function Sv(i){km.set(i.key,i.engine),Z1.set(i.key,i.resolver)}const Av={key:"drag",engine:z5,resolver:J5},hE={key:"hover",engine:uE,resolver:cE},fE={key:"move",engine:iE,resolver:sE},dE={key:"pinch",engine:eE,resolver:nE},mE={key:"scroll",engine:rE,resolver:aE},gE={key:"wheel",engine:oE,resolver:lE};function pE(i,t){if(i==null)return{};var n={},r=Object.keys(i),o,u;for(u=0;u<r.length;u++)o=r[u],!(t.indexOf(o)>=0)&&(n[o]=i[o]);return n}function yE(i,t){if(i==null)return{};var n=pE(i,t),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)r=u[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(n[r]=i[r])}return n}const _E={target(i){if(i)return()=>"current"in i?i.current:i},enabled(i=!0){return i},window(i=Gn.isBrowser?window:void 0){return i},eventOptions({passive:i=!0,capture:t=!1}={}){return{passive:i,capture:t}},transform(i){return i}},vE=["target","eventOptions","window","enabled","transform"];function eh(i={},t){const n={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":n[r]=o.call(n,i[r],r,i);break;case"object":n[r]=eh(i[r],o);break;case"boolean":o&&(n[r]=i[r]);break}return n}function EE(i,t,n={}){const r=i,{target:o,eventOptions:u,window:f,enabled:m,transform:y}=r,g=yE(r,vE);if(n.shared=eh({target:o,eventOptions:u,window:f,enabled:m,transform:y},_E),t){const v=Z1.get(t);n[t]=eh(he({shared:n.shared},g),v)}else for(const v in g){const b=Z1.get(v);b&&(n[v]=eh(he({shared:n.shared},g[v]),b))}return n}class wv{constructor(t,n){Ce(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,o,u){const f=this._listeners,m=x5(n,r),y=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=he(he({},y),u);t.addEventListener(m,o,g);const v=()=>{t.removeEventListener(m,o,g),f.delete(v)};return f.add(v),v}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class TE{constructor(){Ce(this,"_timeouts",new Map)}add(t,n,r=140,...o){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...o))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class bE{constructor(t){Ce(this,"gestures",new Set),Ce(this,"_targetEventStore",new wv(this)),Ce(this,"gestureEventStores",{}),Ce(this,"gestureTimeoutStores",{}),Ce(this,"handlers",{}),Ce(this,"config",{}),Ce(this,"pointerIds",new Set),Ce(this,"touchIds",new Set),Ce(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),SE(this,t)}setEventIds(t){if(zh(t))return this.touchIds=new Set(V5(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=EE(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let o;if(!(n.target&&(o=n.target(),!o))){if(n.enabled){for(const f of this.gestures){const m=this.config[f],y=gy(r,m.eventOptions,!!o);if(m.enabled){const g=km.get(f);new g(this,t,f).bind(y)}}const u=gy(r,n.eventOptions,!!o);for(const f in this.nativeHandlers)u(f,"",m=>this.nativeHandlers[f](he(he({},this.state.shared),{},{event:m,args:t})),void 0,!0)}for(const u in r)r[u]=L5(...r[u]);if(!o)return r;for(const u in r){const{device:f,capture:m,passive:y}=R5(u);this._targetEventStore.add(o,f,"",r[u],{capture:m,passive:y})}}}}function Ha(i,t){i.gestures.add(t),i.gestureEventStores[t]=new wv(i,t),i.gestureTimeoutStores[t]=new TE}function SE(i,t){t.drag&&Ha(i,"drag"),t.wheel&&Ha(i,"wheel"),t.scroll&&Ha(i,"scroll"),t.move&&Ha(i,"move"),t.pinch&&Ha(i,"pinch"),t.hover&&Ha(i,"hover")}const gy=(i,t,n)=>(r,o,u,f={},m=!1)=>{var y,g;const v=(y=f.capture)!==null&&y!==void 0?y:t.capture,b=(g=f.passive)!==null&&g!==void 0?g:t.passive;let T=m?r:w5(r,o,v);n&&b&&(T+="Passive"),i[T]=i[T]||[],i[T].push(u)},AE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function wE(i){const t={},n={},r=new Set;for(let o in i)AE.test(o)?(r.add(RegExp.lastMatch),n[o]=i[o]):t[o]=i[o];return[n,t,r]}function Ga(i,t,n,r,o,u){if(!i.has(n)||!km.has(r))return;const f=n+"Start",m=n+"End",y=g=>{let v;return g.first&&f in t&&t[f](g),n in t&&(v=t[n](g)),g.last&&m in t&&t[m](g),v};o[r]=y,u[r]=u[r]||{}}function CE(i,t){const[n,r,o]=wE(i),u={};return Ga(o,n,"onDrag","drag",u,t),Ga(o,n,"onWheel","wheel",u,t),Ga(o,n,"onScroll","scroll",u,t),Ga(o,n,"onPinch","pinch",u,t),Ga(o,n,"onMove","move",u,t),Ga(o,n,"onHover","hover",u,t),{handlers:u,config:t,nativeHandlers:r}}function Cv(i,t={},n,r){const o=zr.useMemo(()=>new bE(i),[]);if(o.applyHandlers(i,r),o.applyConfig(t,n),zr.useEffect(o.effect.bind(o)),zr.useEffect(()=>o.clean.bind(o),[]),t.target===void 0)return o.bind.bind(o)}function du(i,t){return Sv(Av),Cv({drag:i},t||{},"drag")}function RE(i){return i.forEach(Sv),function(n,r){const{handlers:o,nativeHandlers:u,config:f}=CE(n,r||{});return Cv(o,f,void 0,u)}}function xE(i,t){return RE([Av,dE,mE,gE,fE,hE])(i,t||{})}const IE="_popup_tu52t_1",DE={popup:IE},VE=i=>{const t=Be.c(13),{message:n,onClose:r}=i,[o,u]=K.useState(!1),[f,m]=Qr(ME),{x:y,y:g,opacity:v}=f;let b;t[0]!==m||t[1]!==r?(b=N=>{const{down:q,movement:J,direction:B}=N,[H]=J,[et]=B;if(!q&&Math.abs(H)>100){u(!0),m.start({x:et>0?500:-500,opacity:0,onRest:r});return}m.start({x:q?H:0,opacity:1})},t[0]=m,t[1]=r,t[2]=b):b=t[2];const T=du(b);if(o)return null;let R;t[3]!==T?(R=T(),t[3]=T,t[4]=R):R=t[4];let I;t[5]!==v||t[6]!==y||t[7]!==g?(I={x:y,y:g,opacity:v},t[5]=v,t[6]=y,t[7]=g,t[8]=I):I=t[8];let P;return t[9]!==n||t[10]!==R||t[11]!==I?(P=w.jsx(pn.div,{...R,className:DE.popup,style:I,children:n}),t[9]=n,t[10]=R,t[11]=I,t[12]=P):P=t[12],P};function ME(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}const Rv=K.createContext(),mu=()=>K.useContext(Rv),OE=i=>{const t=Be.c(17),{children:n}=i;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],t[0]=r):r=t[0];const[o,u]=K.useState(r);let f,m,y,g,v;if(t[1]!==n||t[2]!==o){const R=(P,N)=>{const q=N===void 0?{}:N,J=Date.now();u(B=>[...B,{id:J,message:P,...q}]),q.persistent||setTimeout(()=>I(J),q.duration||3e3)},I=P=>{u(N=>N.filter(q=>q.id!==P))};f=Rv,g={showNotification:R,removeNotification:I},v=n,t[8]===Symbol.for("react.memo_cache_sentinel")?(m={position:"fixed",top:20,right:0,left:0,display:"flex",flexDirection:"column",padding:20,gap:10,zIndex:10,pointerEvents:"none"},t[8]=m):m=t[8],y=o.map(P=>w.jsx(VE,{...P,onClose:()=>I(P.id)},P.id)),t[1]=n,t[2]=o,t[3]=f,t[4]=m,t[5]=y,t[6]=g,t[7]=v}else f=t[3],m=t[4],y=t[5],g=t[6],v=t[7];let b;t[9]!==m||t[10]!==y?(b=w.jsx("div",{style:m,children:y}),t[9]=m,t[10]=y,t[11]=b):b=t[11];let T;return t[12]!==f||t[13]!==g||t[14]!==v||t[15]!==b?(T=w.jsxs(f,{value:g,children:[v,b]}),t[12]=f,t[13]=g,t[14]=v,t[15]=b,t[16]=T):T=t[16],T};function Bl(i){const t=i.current.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function NE(i,t){let n=0;return function(...r){const o=Date.now();o-n>=t&&(n=o,i.apply(this,r))}}function LE(i,t){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>i(...r),t)}}async function kE(i,t=32*1024){const n=[];let r=0;const o=await i.arrayBuffer();for(;r<o.byteLength;){const u=o.slice(r,r+t);n.push(u),r+=t,n.length%50===0&&await new Promise(f=>setTimeout(f,0))}return n}async function PE(i,t){t.send(JSON.stringify({type:"imageStart",sentId:i.sentId,receivedId:i.receivedId}));for(const n of i.chunks)t.send(n),await new Promise(r=>setTimeout(r,0));t.send(JSON.stringify({type:"imageEnd",imageType:i.fileType}))}const py=i=>{let t;const n=new Set,r=(g,v)=>{const b=typeof g=="function"?g(t):g;if(!Object.is(b,t)){const T=t;t=v??(typeof b!="object"||b===null)?b:Object.assign({},t,b),n.forEach(R=>R(t,T))}},o=()=>t,m={setState:r,getState:o,getInitialState:()=>y,subscribe:g=>(n.add(g),()=>n.delete(g))},y=t=i(r,o,m);return m},jE=i=>i?py(i):py,UE=i=>i;function zE(i,t=UE){const n=zr.useSyncExternalStore(i.subscribe,zr.useCallback(()=>t(i.getState()),[i,t]),zr.useCallback(()=>t(i.getInitialState()),[i,t]));return zr.useDebugValue(n),n}const yy=i=>{const t=jE(i),n=r=>zE(t,r);return Object.assign(n,t),n},BE=i=>i?yy(i):yy,Lt=BE(i=>({messages:[],addMessage:t=>i(n=>({messages:[...n.messages,t]})),removeMessage:(t,n)=>i(r=>({messages:r.messages.filter(o=>o.sentId!==t&&o.receivedId!==n)})),updateMessage:(t,n,r)=>i(o=>({messages:o.messages.map(u=>u.sentId===t&&u.receivedId===n?{...u,...r}:u)})),highlightMessage:(t,n)=>i(r=>({messages:r.messages.map(o=>o.sentId===t&&o.receivedId===n?{...o,highlight:!o.highlight}:o)})),replying:null,setReplying:t=>i(()=>({replying:t})),actionsShown:!1,setActionsShown:t=>i(()=>({actionsShown:t})),reactionsShown:!1,setReactionsShown:t=>i(()=>({reactionsShown:t})),newMessage:!1,setNewMessage:t=>i(()=>({newMessage:t})),typing:!1,setTyping:t=>i(()=>({typing:t})),imageDialog:{},setImageDialog:t=>i(()=>({imageDialog:t})),videoCall:"hidden",setVideoCall:t=>i(()=>({videoCall:t}))})),Qn=K.createContext(null),qE=({children:i})=>{console.log("Chat context rendered!");const{dataChannel:t,imageChannel:n}=K.useContext(Ze),{showNotification:r}=mu(),o=K.useRef(null),u=K.useRef([]),f=K.useRef(0),m=K.useRef(null),y=K.useRef({x:0,y:0}),g=K.useRef(!1),v=K.useRef(null),b=K.useRef(!1),T=K.useRef(null),R=Lt(B=>B.addMessage),I=Lt(B=>B.updateMessage),P=Lt(B=>B.removeMessage),N=Lt(B=>B.setNewMessage),q=Lt(B=>B.setVideoCall),J=Lt(B=>B.setTyping);return K.useEffect(()=>(t.current.onmessage=B=>{let H=JSON.parse(B.data);if(H.type==="typing")clearTimeout(v.current),J(!0),v.current=setTimeout(()=>{J(!1)},1400);else if(H.type==="text"){let et={receivedId:H.sentId,sentId:H.receivedId,type:H.type,reaction:-1,content:H.content,deleted:0,hightlight:!1,replyTo:H.replyTo};Bl(m)?(console.log("I am in the bottom!"),b.current=!0):N(!0);let tt={type:"ack",sentId:H.sentId,receivedId:H.receivedId};t.current.send(JSON.stringify(tt)),R(et)}else if(H.type==="ack")I(H.sentId,null,{status:"sent"});else if(H.type==="reaction"){let et={type:"ackReaction",sentId:H.id,reaction:H.reaction};t.current.send(JSON.stringify(et)),I(H.id,null,{reaction:H.reaction})}else if(H.type==="ackReaction")console.log("I have received an ackReaction message: ",H),I(null,H.sentId,{reaction:H.reaction});else if(H.type==="gif"){let et={receivedId:H.sentId,sentId:H.receivedId,type:"image",reaction:-1,content:H.content,deleted:0,hightlight:!1,replyTo:H.replyTo};Bl(m)?b.current=!0:N(!0);let tt={type:"gifAck",sentId:H.sentId,receivedId:H.receivedId};t.current.send(JSON.stringify(tt)),R(et)}else if(H.type==="gifAck")I(H.sentId,H.receivedId,{status:"sent"});else if(H.type==="imageRequest"){let et={receivedId:H.sentId,sentId:H.receivedId,type:H.type,reaction:-1,deleted:0,hightlight:!1,replyTo:H.replyTo};Bl(m)?b.current=!0:N(!0),R(et)}else if(H.type==="imageAccept"){const et=u.current.find(tt=>tt.sentId===H.sentId&&tt.receivedId===H.receivedId);console.log(et),(async()=>await PE(et,n.current))()}else if(H.type==="imageReject")P(H.receivedId,H.sentId);else if(H.type==="imageReceived")I(H.sentId,H.receivedId,{status:"sent"});else if(H.type==="delete"){let et={type:"ackDeletion",sentId:H.sentId};t.current.send(JSON.stringify(et)),I(null,H.sentId,{type:"text",content:"This message has been deleted",deleted:2})}else H.type==="ackDeletion"?I(H.sentId,null,{type:"text",content:"This message has been deleted",deleted:2}):H.type==="callRequest"?(console.log("The other peer is trying to call me!"),q("incoming")):H.type==="callReject"?(r("Your call was rejected!"),q("hidden")):H.type==="callAccept"?q("call"):H.type==="callEnd"&&q("hidden")},n.current.onmessage=B=>{if(typeof B.data=="string"){const H=JSON.parse(B.data);if(H.type==="imageStart")T.current={sentId:H.receivedId,receivedId:H.sentId,chunks:[]};else if(H.type==="imageEnd"){const et=new Blob(T.current.chunks,{type:H.imageType}),tt=URL.createObjectURL(et);t.current.send(JSON.stringify({type:"imageReceived",sentId:T.current.receivedId,receivedId:T.current.sentId})),I(T.current.sentId,T.current.receivedId,{type:"image",content:tt,status:"received"}),T.current=null}}else T.current.chunks.push(B.data)},()=>{t.current.onmessage=null,n.current.onmessage=null}),[]),w.jsx(Qn,{value:{chatBottom:m,sentId:f,selectedMessage:o,pointerPosition:y,longPressed:g,atBottomRef:b,images:u,receivingImage:T},children:i})},HE="_navContainer_2izlb_1",GE="_logo_2izlb_10",FE="_navList_2izlb_15",QE="_hamburger_2izlb_30",_i={navContainer:HE,logo:GE,navList:FE,hamburger:QE};function YE(){const i=Be.c(5);let t;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=w.jsx("a",{href:"/",className:_i.logo,"aria-label":"Homepage",children:"boop"}),i[0]=t):t=i[0];let n;i[1]===Symbol.for("react.memo_cache_sentinel")?(n=w.jsx("a",{className:_i.hamburger,"aria-label":"Expand for menu",children:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[w.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),w.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),w.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),i[1]=n):n=i[1];let r;i[2]===Symbol.for("react.memo_cache_sentinel")?(r=w.jsx("li",{className:_i.navItem,children:w.jsx("a",{href:"#about",className:_i.navLink,children:"About"})}),i[2]=r):r=i[2];let o;i[3]===Symbol.for("react.memo_cache_sentinel")?(o=w.jsx("li",{className:_i.navItem,children:w.jsx("a",{href:"#projects",className:_i.navLink,children:"Policy"})}),i[3]=o):o=i[3];let u;return i[4]===Symbol.for("react.memo_cache_sentinel")?(u=w.jsxs("nav",{"aria-label":"Main Navigation",className:_i.navContainer,children:[t,n,w.jsxs("ul",{className:_i.navList,children:[r,o,w.jsx("li",{className:_i.navItem,children:w.jsx("a",{href:"#contact",className:_i.navLink,children:"Contact"})})]})]}),i[4]=u):u=i[4],u}const KE="_mainContainer_15mr1_1",XE="_inputCard_15mr1_13",$E="_linkInput_15mr1_41",ZE="_loaderWrapper_15mr1_71",JE="_loader_15mr1_71",Vl={mainContainer:KE,inputCard:XE,linkInput:$E,loaderWrapper:ZE,loader:JE},WE=()=>{};var _y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=function(i){const t=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},tT=function(i){const t=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=i[n++],f=i[n++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Iv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,y=o+2<i.length,g=y?i[o+2]:0,v=u>>2,b=(u&3)<<4|m>>4;let T=(m&15)<<2|g>>6,R=g&63;y||(R=64,f||(T=64)),r.push(n[v],n[b],n[T],n[R])}return r.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(xv(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):tT(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new eT;const T=u<<2|m>>4;if(r.push(T),g!==64){const R=m<<4&240|g>>2;if(r.push(R),b!==64){const I=g<<6&192|b;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class eT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nT=function(i){const t=xv(i);return Iv.encodeByteArray(t,!0)},dh=function(i){return nT(i).replace(/\./g,"")},iT=function(i){try{return Iv.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=()=>sT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>"u"||typeof _y>"u")return;const i=_y.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},oT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&iT(i[1]);return t&&JSON.parse(t)},Pm=()=>{try{return WE()||rT()||aT()||oT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},lT=i=>{var t,n;return(n=(t=Pm())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[i]},uT=i=>{const t=lT(i);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Dv=()=>{var i;return(i=Pm())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(i){return i.endsWith(".cloudworkstations.dev")}async function hT(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[dh(JSON.stringify(n)),dh(JSON.stringify(f)),""].join(".")}const ql={};function dT(){const i={prod:[],emulator:[]};for(const t of Object.keys(ql))ql[t]?i.emulator.push(t):i.prod.push(t);return i}function mT(i){let t=document.getElementById(i),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",i),n=!0),{created:n,element:t}}let vy=!1;function gT(i,t){if(typeof window>"u"||typeof document>"u"||!jm(window.location.host)||ql[i]===t||ql[i]||vy)return;ql[i]=t;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",u=dT().prod.length>0;function f(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{vy=!0,f()},T}function v(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=mT(r),R=n("text"),I=document.getElementById(R)||document.createElement("span"),P=n("learnmore"),N=document.getElementById(P)||document.createElement("a"),q=n("preprendIcon"),J=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;m(B),v(N,P);const H=g();y(J,q),B.append(J,I,N,H),document.body.appendChild(B)}u?(I.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yT(){var i;const t=(i=Pm())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _T(){return!yT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vT(){try{return typeof indexedDB=="object"}catch{return!1}}function ET(){return new Promise((i,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="FirebaseError";class fo extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=TT,Object.setPrototypeOf(this,fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vv.prototype.create)}}class Vv{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?bT(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new fo(o,m,r)}}function bT(i,t){return i.replace(ST,(n,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const ST=/\{\$([^}]+)}/g;function mh(i,t){if(i===t)return!0;const n=Object.keys(i),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const u=i[o],f=t[o];if(Ey(u)&&Ey(f)){if(!mh(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Ey(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(i){return i&&i._delegate?i._delegate:i}class eu{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new cT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(CT(t))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Ur){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ur){return this.instances.has(t)}getOptions(t=Ur){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(t,n){var r;const o=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wT(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ur){return this.component?this.component.multipleInstances?t:Ur:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wT(i){return i===Ur?void 0:i}function CT(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new AT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ft||(Ft={}));const xT={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},IT=Ft.INFO,DT={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},VT=(i,t,...n)=>{if(t<i.logLevel)return;const r=new Date().toISOString(),o=DT[t];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Mv{constructor(t){this.name=t,this._logLevel=IT,this._logHandler=VT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...t),this._logHandler(this,Ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...t),this._logHandler(this,Ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...t),this._logHandler(this,Ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...t),this._logHandler(this,Ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...t),this._logHandler(this,Ft.ERROR,...t)}}const MT=(i,t)=>t.some(n=>i instanceof n);let Ty,by;function OT(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NT(){return by||(by=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ov=new WeakMap,J1=new WeakMap,Nv=new WeakMap,A1=new WeakMap,Um=new WeakMap;function LT(i){const t=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(Bs(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&Ov.set(n,i)}).catch(()=>{}),Um.set(t,i),t}function kT(i){if(J1.has(i))return;const t=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});J1.set(i,t)}let W1={get(i,t,n){if(i instanceof IDBTransaction){if(t==="done")return J1.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Nv.get(i);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(i[t])},set(i,t,n){return i[t]=n,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function PT(i){W1=i(W1)}function jT(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=i.call(w1(this),t,...n);return Nv.set(r,t.sort?t.sort():[t]),Bs(r)}:NT().includes(i)?function(...t){return i.apply(w1(this),t),Bs(Ov.get(this))}:function(...t){return Bs(i.apply(w1(this),t))}}function UT(i){return typeof i=="function"?jT(i):(i instanceof IDBTransaction&&kT(i),MT(i,OT())?new Proxy(i,W1):i)}function Bs(i){if(i instanceof IDBRequest)return LT(i);if(A1.has(i))return A1.get(i);const t=UT(i);return t!==i&&(A1.set(i,t),Um.set(t,i)),t}const w1=i=>Um.get(i);function zT(i,t,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(i,t),m=Bs(f);return r&&f.addEventListener("upgradeneeded",y=>{r(Bs(f.result),y.oldVersion,y.newVersion,Bs(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const BT=["get","getKey","getAll","getAllKeys","count"],qT=["put","add","delete","clear"],C1=new Map;function Sy(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(C1.get(t))return C1.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=qT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||BT.includes(n)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&y.done]))[0]};return C1.set(t,u),u}PT(i=>({...i,get:(t,n,r)=>Sy(t,n)||i.get(t,n,r),has:(t,n)=>!!Sy(t,n)||i.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GT(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const tm="@firebase/app",Ay="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Mv("@firebase/app"),FT="@firebase/app-compat",QT="@firebase/analytics-compat",YT="@firebase/analytics",KT="@firebase/app-check-compat",XT="@firebase/app-check",$T="@firebase/auth",ZT="@firebase/auth-compat",JT="@firebase/database",WT="@firebase/data-connect",t7="@firebase/database-compat",e7="@firebase/functions",n7="@firebase/functions-compat",i7="@firebase/installations",s7="@firebase/installations-compat",r7="@firebase/messaging",a7="@firebase/messaging-compat",o7="@firebase/performance",l7="@firebase/performance-compat",u7="@firebase/remote-config",c7="@firebase/remote-config-compat",h7="@firebase/storage",f7="@firebase/storage-compat",d7="@firebase/firestore",m7="@firebase/ai",g7="@firebase/firestore-compat",p7="firebase",y7="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="[DEFAULT]",_7={[tm]:"fire-core",[FT]:"fire-core-compat",[YT]:"fire-analytics",[QT]:"fire-analytics-compat",[XT]:"fire-app-check",[KT]:"fire-app-check-compat",[$T]:"fire-auth",[ZT]:"fire-auth-compat",[JT]:"fire-rtdb",[WT]:"fire-data-connect",[t7]:"fire-rtdb-compat",[e7]:"fire-fn",[n7]:"fire-fn-compat",[i7]:"fire-iid",[s7]:"fire-iid-compat",[r7]:"fire-fcm",[a7]:"fire-fcm-compat",[o7]:"fire-perf",[l7]:"fire-perf-compat",[u7]:"fire-rc",[c7]:"fire-rc-compat",[h7]:"fire-gcs",[f7]:"fire-gcs-compat",[d7]:"fire-fst",[g7]:"fire-fst-compat",[m7]:"fire-vertex","fire-js":"fire-js",[p7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map,v7=new Map,nm=new Map;function wy(i,t){try{i.container.addComponent(t)}catch(n){is.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,n)}}function ph(i){const t=i.name;if(nm.has(t))return is.debug(`There were multiple attempts to register component ${t}.`),!1;nm.set(t,i);for(const n of gh.values())wy(n,i);for(const n of v7.values())wy(n,i);return!0}function E7(i,t){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(t)}function T7(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qs=new Vv("app","Firebase",b7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=y7;function Lv(i,t={}){let n=i;typeof t!="object"&&(t={name:t});const r=Object.assign({name:em,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw qs.create("bad-app-name",{appName:String(o)});if(n||(n=Dv()),!n)throw qs.create("no-options");const u=gh.get(o);if(u){if(mh(n,u.options)&&mh(r,u.config))return u;throw qs.create("duplicate-app",{appName:o})}const f=new RT(o);for(const y of nm.values())f.addComponent(y);const m=new S7(n,r,f);return gh.set(o,m),m}function w7(i=em){const t=gh.get(i);if(!t&&i===em&&Dv())return Lv();if(!t)throw qs.create("no-app",{appName:i});return t}function Wa(i,t,n){var r;let o=(r=_7[i])!==null&&r!==void 0?r:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),is.warn(m.join(" "));return}ph(new eu(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7="firebase-heartbeat-database",R7=1,nu="firebase-heartbeat-store";let R1=null;function kv(){return R1||(R1=zT(C7,R7,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(nu)}catch(n){console.warn(n)}}}}).catch(i=>{throw qs.create("idb-open",{originalErrorMessage:i.message})})),R1}async function x7(i){try{const n=(await kv()).transaction(nu),r=await n.objectStore(nu).get(Pv(i));return await n.done,r}catch(t){if(t instanceof fo)is.warn(t.message);else{const n=qs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});is.warn(n.message)}}}async function Cy(i,t){try{const r=(await kv()).transaction(nu,"readwrite");await r.objectStore(nu).put(t,Pv(i)),await r.done}catch(n){if(n instanceof fo)is.warn(n.message);else{const r=qs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});is.warn(r.message)}}}function Pv(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=1024,D7=30;class V7{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Ry();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>D7){const f=N7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){is.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ry(),{heartbeatsToSend:r,unsentEntries:o}=M7(this._heartbeatsCache.heartbeats),u=dh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return is.warn(n),""}}}function Ry(){return new Date().toISOString().substring(0,10)}function M7(i,t=I7){const n=[];let r=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),xy(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),xy(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O7{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vT()?ET().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await x7(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function xy(i){return dh(JSON.stringify({version:2,heartbeats:i})).length}function N7(i){if(i.length===0)return-1;let t=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(i){ph(new eu("platform-logger",t=>new HT(t),"PRIVATE")),ph(new eu("heartbeat",t=>new V7(t),"PRIVATE")),Wa(tm,Ay,i),Wa(tm,Ay,"esm2017"),Wa("fire-js","")}L7("");var k7="firebase",P7="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wa(k7,P7,"app");var Iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hs,jv;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,C){function x(){}x.prototype=C.prototype,D.D=C.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(L,k,U){for(var V=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)V[mt-2]=arguments[mt];return C.prototype[k].apply(L,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,C,x){x||(x=0);var L=Array(16);if(typeof C=="string")for(var k=0;16>k;++k)L[k]=C.charCodeAt(x++)|C.charCodeAt(x++)<<8|C.charCodeAt(x++)<<16|C.charCodeAt(x++)<<24;else for(k=0;16>k;++k)L[k]=C[x++]|C[x++]<<8|C[x++]<<16|C[x++]<<24;C=D.g[0],x=D.g[1],k=D.g[2];var U=D.g[3],V=C+(U^x&(k^U))+L[0]+3614090360&4294967295;C=x+(V<<7&4294967295|V>>>25),V=U+(k^C&(x^k))+L[1]+3905402710&4294967295,U=C+(V<<12&4294967295|V>>>20),V=k+(x^U&(C^x))+L[2]+606105819&4294967295,k=U+(V<<17&4294967295|V>>>15),V=x+(C^k&(U^C))+L[3]+3250441966&4294967295,x=k+(V<<22&4294967295|V>>>10),V=C+(U^x&(k^U))+L[4]+4118548399&4294967295,C=x+(V<<7&4294967295|V>>>25),V=U+(k^C&(x^k))+L[5]+1200080426&4294967295,U=C+(V<<12&4294967295|V>>>20),V=k+(x^U&(C^x))+L[6]+2821735955&4294967295,k=U+(V<<17&4294967295|V>>>15),V=x+(C^k&(U^C))+L[7]+4249261313&4294967295,x=k+(V<<22&4294967295|V>>>10),V=C+(U^x&(k^U))+L[8]+1770035416&4294967295,C=x+(V<<7&4294967295|V>>>25),V=U+(k^C&(x^k))+L[9]+2336552879&4294967295,U=C+(V<<12&4294967295|V>>>20),V=k+(x^U&(C^x))+L[10]+4294925233&4294967295,k=U+(V<<17&4294967295|V>>>15),V=x+(C^k&(U^C))+L[11]+2304563134&4294967295,x=k+(V<<22&4294967295|V>>>10),V=C+(U^x&(k^U))+L[12]+1804603682&4294967295,C=x+(V<<7&4294967295|V>>>25),V=U+(k^C&(x^k))+L[13]+4254626195&4294967295,U=C+(V<<12&4294967295|V>>>20),V=k+(x^U&(C^x))+L[14]+2792965006&4294967295,k=U+(V<<17&4294967295|V>>>15),V=x+(C^k&(U^C))+L[15]+1236535329&4294967295,x=k+(V<<22&4294967295|V>>>10),V=C+(k^U&(x^k))+L[1]+4129170786&4294967295,C=x+(V<<5&4294967295|V>>>27),V=U+(x^k&(C^x))+L[6]+3225465664&4294967295,U=C+(V<<9&4294967295|V>>>23),V=k+(C^x&(U^C))+L[11]+643717713&4294967295,k=U+(V<<14&4294967295|V>>>18),V=x+(U^C&(k^U))+L[0]+3921069994&4294967295,x=k+(V<<20&4294967295|V>>>12),V=C+(k^U&(x^k))+L[5]+3593408605&4294967295,C=x+(V<<5&4294967295|V>>>27),V=U+(x^k&(C^x))+L[10]+38016083&4294967295,U=C+(V<<9&4294967295|V>>>23),V=k+(C^x&(U^C))+L[15]+3634488961&4294967295,k=U+(V<<14&4294967295|V>>>18),V=x+(U^C&(k^U))+L[4]+3889429448&4294967295,x=k+(V<<20&4294967295|V>>>12),V=C+(k^U&(x^k))+L[9]+568446438&4294967295,C=x+(V<<5&4294967295|V>>>27),V=U+(x^k&(C^x))+L[14]+3275163606&4294967295,U=C+(V<<9&4294967295|V>>>23),V=k+(C^x&(U^C))+L[3]+4107603335&4294967295,k=U+(V<<14&4294967295|V>>>18),V=x+(U^C&(k^U))+L[8]+1163531501&4294967295,x=k+(V<<20&4294967295|V>>>12),V=C+(k^U&(x^k))+L[13]+2850285829&4294967295,C=x+(V<<5&4294967295|V>>>27),V=U+(x^k&(C^x))+L[2]+4243563512&4294967295,U=C+(V<<9&4294967295|V>>>23),V=k+(C^x&(U^C))+L[7]+1735328473&4294967295,k=U+(V<<14&4294967295|V>>>18),V=x+(U^C&(k^U))+L[12]+2368359562&4294967295,x=k+(V<<20&4294967295|V>>>12),V=C+(x^k^U)+L[5]+4294588738&4294967295,C=x+(V<<4&4294967295|V>>>28),V=U+(C^x^k)+L[8]+2272392833&4294967295,U=C+(V<<11&4294967295|V>>>21),V=k+(U^C^x)+L[11]+1839030562&4294967295,k=U+(V<<16&4294967295|V>>>16),V=x+(k^U^C)+L[14]+4259657740&4294967295,x=k+(V<<23&4294967295|V>>>9),V=C+(x^k^U)+L[1]+2763975236&4294967295,C=x+(V<<4&4294967295|V>>>28),V=U+(C^x^k)+L[4]+1272893353&4294967295,U=C+(V<<11&4294967295|V>>>21),V=k+(U^C^x)+L[7]+4139469664&4294967295,k=U+(V<<16&4294967295|V>>>16),V=x+(k^U^C)+L[10]+3200236656&4294967295,x=k+(V<<23&4294967295|V>>>9),V=C+(x^k^U)+L[13]+681279174&4294967295,C=x+(V<<4&4294967295|V>>>28),V=U+(C^x^k)+L[0]+3936430074&4294967295,U=C+(V<<11&4294967295|V>>>21),V=k+(U^C^x)+L[3]+3572445317&4294967295,k=U+(V<<16&4294967295|V>>>16),V=x+(k^U^C)+L[6]+76029189&4294967295,x=k+(V<<23&4294967295|V>>>9),V=C+(x^k^U)+L[9]+3654602809&4294967295,C=x+(V<<4&4294967295|V>>>28),V=U+(C^x^k)+L[12]+3873151461&4294967295,U=C+(V<<11&4294967295|V>>>21),V=k+(U^C^x)+L[15]+530742520&4294967295,k=U+(V<<16&4294967295|V>>>16),V=x+(k^U^C)+L[2]+3299628645&4294967295,x=k+(V<<23&4294967295|V>>>9),V=C+(k^(x|~U))+L[0]+4096336452&4294967295,C=x+(V<<6&4294967295|V>>>26),V=U+(x^(C|~k))+L[7]+1126891415&4294967295,U=C+(V<<10&4294967295|V>>>22),V=k+(C^(U|~x))+L[14]+2878612391&4294967295,k=U+(V<<15&4294967295|V>>>17),V=x+(U^(k|~C))+L[5]+4237533241&4294967295,x=k+(V<<21&4294967295|V>>>11),V=C+(k^(x|~U))+L[12]+1700485571&4294967295,C=x+(V<<6&4294967295|V>>>26),V=U+(x^(C|~k))+L[3]+2399980690&4294967295,U=C+(V<<10&4294967295|V>>>22),V=k+(C^(U|~x))+L[10]+4293915773&4294967295,k=U+(V<<15&4294967295|V>>>17),V=x+(U^(k|~C))+L[1]+2240044497&4294967295,x=k+(V<<21&4294967295|V>>>11),V=C+(k^(x|~U))+L[8]+1873313359&4294967295,C=x+(V<<6&4294967295|V>>>26),V=U+(x^(C|~k))+L[15]+4264355552&4294967295,U=C+(V<<10&4294967295|V>>>22),V=k+(C^(U|~x))+L[6]+2734768916&4294967295,k=U+(V<<15&4294967295|V>>>17),V=x+(U^(k|~C))+L[13]+1309151649&4294967295,x=k+(V<<21&4294967295|V>>>11),V=C+(k^(x|~U))+L[4]+4149444226&4294967295,C=x+(V<<6&4294967295|V>>>26),V=U+(x^(C|~k))+L[11]+3174756917&4294967295,U=C+(V<<10&4294967295|V>>>22),V=k+(C^(U|~x))+L[2]+718787259&4294967295,k=U+(V<<15&4294967295|V>>>17),V=x+(U^(k|~C))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+C&4294967295,D.g[1]=D.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.u=function(D,C){C===void 0&&(C=D.length);for(var x=C-this.blockSize,L=this.B,k=this.h,U=0;U<C;){if(k==0)for(;U<=x;)o(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<C;)if(L[k++]=D.charCodeAt(U++),k==this.blockSize){o(this,L),k=0;break}}else for(;U<C;)if(L[k++]=D[U++],k==this.blockSize){o(this,L),k=0;break}}this.h=k,this.o+=C},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var C=1;C<D.length-8;++C)D[C]=0;var x=8*this.o;for(C=D.length-8;C<D.length;++C)D[C]=x&255,x/=256;for(this.u(D),D=Array(16),C=x=0;4>C;++C)for(var L=0;32>L;L+=8)D[x++]=this.g[C]>>>L&255;return D};function u(D,C){var x=m;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=C(D)}function f(D,C){this.h=C;for(var x=[],L=!0,k=D.length-1;0<=k;k--){var U=D[k]|0;L&&U==C||(x[k]=U,L=!1)}this.g=x}var m={};function y(D){return-128<=D&&128>D?u(D,function(C){return new f([C|0],0>C?-1:0)}):new f([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return N(g(-D));for(var C=[],x=1,L=0;D>=x;L++)C[L]=D/x|0,x*=4294967296;return new f(C,0)}function v(D,C){if(D.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D.charAt(0)=="-")return N(v(D.substring(1),C));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(C,8)),L=b,k=0;k<D.length;k+=8){var U=Math.min(8,D.length-k),V=parseInt(D.substring(k,k+U),C);8>U?(U=g(Math.pow(C,U)),L=L.j(U).add(g(V))):(L=L.j(x),L=L.add(g(V)))}return L}var b=y(0),T=y(1),R=y(16777216);i=f.prototype,i.m=function(){if(P(this))return-N(this).m();for(var D=0,C=1,x=0;x<this.g.length;x++){var L=this.i(x);D+=(0<=L?L:4294967296+L)*C,C*=4294967296}return D},i.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(P(this))return"-"+N(this).toString(D);for(var C=g(Math.pow(D,6)),x=this,L="";;){var k=H(x,C).g;x=q(x,k.j(C));var U=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=k,I(x))return U+L;for(;6>U.length;)U="0"+U;L=U+L}},i.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var C=0;C<D.g.length;C++)if(D.g[C]!=0)return!1;return!0}function P(D){return D.h==-1}i.l=function(D){return D=q(this,D),P(D)?-1:I(D)?0:1};function N(D){for(var C=D.g.length,x=[],L=0;L<C;L++)x[L]=~D.g[L];return new f(x,~D.h).add(T)}i.abs=function(){return P(this)?N(this):this},i.add=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0,k=0;k<=C;k++){var U=L+(this.i(k)&65535)+(D.i(k)&65535),V=(U>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);L=V>>>16,U&=65535,V&=65535,x[k]=V<<16|U}return new f(x,x[x.length-1]&-2147483648?-1:0)};function q(D,C){return D.add(N(C))}i.j=function(D){if(I(this)||I(D))return b;if(P(this))return P(D)?N(this).j(N(D)):N(N(this).j(D));if(P(D))return N(this.j(N(D)));if(0>this.l(R)&&0>D.l(R))return g(this.m()*D.m());for(var C=this.g.length+D.g.length,x=[],L=0;L<2*C;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var k=0;k<D.g.length;k++){var U=this.i(L)>>>16,V=this.i(L)&65535,mt=D.i(k)>>>16,dt=D.i(k)&65535;x[2*L+2*k]+=V*dt,J(x,2*L+2*k),x[2*L+2*k+1]+=U*dt,J(x,2*L+2*k+1),x[2*L+2*k+1]+=V*mt,J(x,2*L+2*k+1),x[2*L+2*k+2]+=U*mt,J(x,2*L+2*k+2)}for(L=0;L<C;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=C;L<2*C;L++)x[L]=0;return new f(x,0)};function J(D,C){for(;(D[C]&65535)!=D[C];)D[C+1]+=D[C]>>>16,D[C]&=65535,C++}function B(D,C){this.g=D,this.h=C}function H(D,C){if(I(C))throw Error("division by zero");if(I(D))return new B(b,b);if(P(D))return C=H(N(D),C),new B(N(C.g),N(C.h));if(P(C))return C=H(D,N(C)),new B(N(C.g),C.h);if(30<D.g.length){if(P(D)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var x=T,L=C;0>=L.l(D);)x=et(x),L=et(L);var k=tt(x,1),U=tt(L,1);for(L=tt(L,2),x=tt(x,2);!I(L);){var V=U.add(L);0>=V.l(D)&&(k=k.add(x),U=V),L=tt(L,1),x=tt(x,1)}return C=q(D,k.j(C)),new B(k,C)}for(k=b;0<=D.l(C);){for(x=Math.max(1,Math.floor(D.m()/C.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),U=g(x),V=U.j(C);P(V)||0<V.l(D);)x-=L,U=g(x),V=U.j(C);I(U)&&(U=T),k=k.add(U),D=q(D,V)}return new B(k,D)}i.A=function(D){return H(this,D).h},i.and=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0;L<C;L++)x[L]=this.i(L)&D.i(L);return new f(x,this.h&D.h)},i.or=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0;L<C;L++)x[L]=this.i(L)|D.i(L);return new f(x,this.h|D.h)},i.xor=function(D){for(var C=Math.max(this.g.length,D.g.length),x=[],L=0;L<C;L++)x[L]=this.i(L)^D.i(L);return new f(x,this.h^D.h)};function et(D){for(var C=D.g.length+1,x=[],L=0;L<C;L++)x[L]=D.i(L)<<1|D.i(L-1)>>>31;return new f(x,D.h)}function tt(D,C){var x=C>>5;C%=32;for(var L=D.g.length-x,k=[],U=0;U<L;U++)k[U]=0<C?D.i(U+x)>>>C|D.i(U+x+1)<<32-C:D.i(U+x);return new f(k,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jv=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=v,Hs=f}).apply(typeof Iy<"u"?Iy:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uv,Ol,zv,nh,im,Bv,qv,Hv;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function o(c,p){if(p)t:{var _=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var G=c[A];if(!(G in _))break t;_=_[G]}c=c[c.length-1],A=_[c],p=p(A),p!=A&&p!=null&&t(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,A=!1,G={next:function(){if(!A&&_<c.length){var W=_++;return{value:p(W,c[W]),done:!1}}return A=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function v(c,p,_){return c.call.apply(c.bind,arguments)}function b(c,p,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,A),c.apply(p,G)}}return function(){return c.apply(p,arguments)}}function T(c,p,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,T.apply(null,arguments)}function R(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function I(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,G,W){for(var ft=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)ft[Bt-2]=arguments[Bt];return p.prototype[G].apply(A,ft)}}function P(c){const p=c.length;if(0<p){const _=Array(p);for(let A=0;A<p;A++)_[A]=c[A];return _}return[]}function N(c,p){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(y(A)){const G=c.length||0,W=A.length||0;c.length=G+W;for(let ft=0;ft<W;ft++)c[G+ft]=A[ft]}else c.push(A)}}class q{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function J(c){return/^[\s\xa0]*$/.test(c)}function B(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function H(c){return H[" "](c),c}H[" "]=function(){};var et=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function tt(c,p,_){for(const A in c)p.call(_,c[A],A,c)}function D(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function C(c){const p={};for(const _ in c)p[_]=c[_];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(c,p){let _,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(_ in A)c[_]=A[_];for(let W=0;W<x.length;W++)_=x[W],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function k(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function U(c){m.setTimeout(()=>{throw c},0)}function V(){var c=pt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class mt{constructor(){this.h=this.g=null}add(p,_){const A=dt.get();A.set(p,_),this.h?this.h.next=A:this.g=A,this.h=A}}var dt=new q(()=>new Y,c=>c.reset());class Y{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ct=!1,pt=new mt,O=()=>{const c=m.Promise.resolve(void 0);Z=()=>{c.then(st)}};var st=()=>{for(var c;c=V();){try{c.h.call(c.g)}catch(_){U(_)}var p=dt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ct=!1};function ht(){this.s=this.s,this.C=this.C}ht.prototype.s=!1,ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function bt(c,p){if(ut.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(et){t:{try{H(p.nodeName);var G=!0;break t}catch{}G=!1}G||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Tt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&bt.aa.h.call(this)}}I(bt,ut);var Tt={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Kt="closure_listenable_"+(1e6*Math.random()|0),zt=0;function de(c,p,_,A,G){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!A,this.ha=G,this.key=++zt,this.da=this.fa=!1}function qe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ri(c){this.src=c,this.g={},this.h=0}Ri.prototype.add=function(c,p,_,A,G){var W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);var ft=er(c,p,A,G);return-1<ft?(p=c[ft],_||(p.fa=!1)):(p=new de(p,this.src,W,!!A,G),p.fa=_,c.push(p)),p};function tr(c,p){var _=p.type;if(_ in c.g){var A=c.g[_],G=Array.prototype.indexOf.call(A,p,void 0),W;(W=0<=G)&&Array.prototype.splice.call(A,G,1),W&&(qe(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function er(c,p,_,A){for(var G=0;G<c.length;++G){var W=c[G];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==A)return G}return-1}var nr="closure_lm_"+(1e6*Math.random()|0),_o={};function vu(c,p,_,A,G){if(Array.isArray(p)){for(var W=0;W<p.length;W++)vu(c,p[W],_,A,G);return null}return _=Eu(_),c&&c[Kt]?c.K(p,_,g(A)?!!A.capture:!1,G):In(c,p,_,!1,A,G)}function In(c,p,_,A,G,W){if(!p)throw Error("Invalid event type");var ft=g(G)?!!G.capture:!!G,Bt=Zr(c);if(Bt||(c[nr]=Bt=new Ri(c)),_=Bt.add(p,_,A,ft,W),_.proxy)return _;if(A=uf(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)_t||(G=ft),G===void 0&&(G=!1),c.addEventListener(p.toString(),A,G);else if(c.attachEvent)c.attachEvent(ir(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function uf(){function c(_){return p.call(c.src,c.listener,_)}const p=cf;return c}function vo(c,p,_,A,G){if(Array.isArray(p))for(var W=0;W<p.length;W++)vo(c,p[W],_,A,G);else A=g(A)?!!A.capture:!!A,_=Eu(_),c&&c[Kt]?(c=c.i,p=String(p).toString(),p in c.g&&(W=c.g[p],_=er(W,_,A,G),-1<_&&(qe(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete c.g[p],c.h--)))):c&&(c=Zr(c))&&(p=c.g[p.toString()],c=-1,p&&(c=er(p,_,A,G)),(_=-1<c?p[c]:null)&&$r(_))}function $r(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Kt])tr(p.i,c);else{var _=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(_,A,c.capture):p.detachEvent?p.detachEvent(ir(_),A):p.addListener&&p.removeListener&&p.removeListener(A),(_=Zr(p))?(tr(_,c),_.h==0&&(_.src=null,p[nr]=null)):qe(c)}}}function ir(c){return c in _o?_o[c]:_o[c]="on"+c}function cf(c,p){if(c.da)c=!0;else{p=new bt(p,this);var _=c.listener,A=c.ha||c.src;c.fa&&$r(c),c=_.call(A,p)}return c}function Zr(c){return c=c[nr],c instanceof Ri?c:null}var Eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(c){return typeof c=="function"?c:(c[Eo]||(c[Eo]=function(p){return c.handleEvent(p)}),c[Eo])}function me(){ht.call(this),this.i=new Ri(this),this.M=this,this.F=null}I(me,ht),me.prototype[Kt]=!0,me.prototype.removeEventListener=function(c,p,_,A){vo(this,c,p,_,A)};function Zt(c,p){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new ut(p,c);else if(p instanceof ut)p.target=p.target||c;else{var G=p;p=new ut(A,c),L(p,G)}if(G=!0,_)for(var W=_.length-1;0<=W;W--){var ft=p.g=_[W];G=vn(ft,A,!0,p)&&G}if(ft=p.g=c,G=vn(ft,A,!0,p)&&G,G=vn(ft,A,!1,p)&&G,_)for(W=0;W<_.length;W++)ft=p.g=_[W],G=vn(ft,A,!1,p)&&G}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],A=0;A<_.length;A++)qe(_[A]);delete c.g[p],c.h--}}this.F=null},me.prototype.K=function(c,p,_,A){return this.i.add(String(c),p,!1,_,A)},me.prototype.L=function(c,p,_,A){return this.i.add(String(c),p,!0,_,A)};function vn(c,p,_,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var G=!0,W=0;W<p.length;++W){var ft=p[W];if(ft&&!ft.da&&ft.capture==_){var Bt=ft.listener,xe=ft.ha||ft.src;ft.fa&&tr(c.i,ft),G=Bt.call(xe,A)!==!1&&G}}return G&&!A.defaultPrevented}function Je(c,p,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Tu(c){c.g=Je(()=>{c.g=null,c.i&&(c.i=!1,Tu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class hf extends ht{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(c){ht.call(this),this.h=c,this.g={}}I(sr,ht);var rr=[];function ar(c){tt(c.g,function(p,_){this.g.hasOwnProperty(_)&&$r(p)},c),c.g={}}sr.prototype.N=function(){sr.aa.N.call(this),ar(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=m.JSON.stringify,Jr=m.JSON.parse,or=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function To(){}To.prototype.h=null;function bo(c){return c.h||(c.h=c.i())}function So(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ii(){ut.call(this,"d")}I(Ii,ut);function Ao(){ut.call(this,"c")}I(Ao,ut);var ni={},wo=null;function as(){return wo=wo||new me}ni.La="serverreachability";function Wr(c){ut.call(this,ni.La,c)}I(Wr,ut);function os(c){const p=as();Zt(p,new Wr(p))}ni.STAT_EVENT="statevent";function bu(c,p){ut.call(this,ni.STAT_EVENT,c),this.stat=p}I(bu,ut);function oe(c){const p=as();Zt(p,new bu(p,c))}ni.Ma="timingevent";function Re(c,p){ut.call(this,ni.Ma,c),this.size=p}I(Re,ut);function Te(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Co(c,p,_,A,G,W){c.info(function(){if(c.g)if(W)for(var ft="",Bt=W.split("&"),xe=0;xe<Bt.length;xe++){var qt=Bt[xe].split("=");if(1<qt.length){var ke=qt[0];qt=qt[1];var Ie=ke.split("_");ft=2<=Ie.length&&Ie[1]=="type"?ft+(ke+"="+qt+"&"):ft+(ke+"=redacted&")}}else ft=null;else ft=W;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+p+`
`+_+`
`+ft})}function ff(c,p,_,A,G,W,ft){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+p+`
`+_+`
`+W+" "+ft})}function ls(c,p,_,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+lr(c,_)+(A?" "+A:"")})}function Su(c,p){c.info(function(){return"TIMEOUT: "+p})}Dn.prototype.info=function(){};function lr(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var G=A[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ft=1;ft<G.length;ft++)G[ft]=""}}}}return Yn(_)}catch{return p}}var us={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Di={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ii;function si(){}I(si,To),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ii=new si;function rn(c,p,_,A){this.j=c,this.i=p,this.l=_,this.R=A||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}var Ro={},ta={};function Kn(c,p,_){c.L=1,c.v=dr(En(p)),c.m=_,c.P=!0,Vi(c,null)}function Vi(c,p){c.F=Date.now(),ur(c),c.A=En(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Oo(_.i,"t",A),c.C=0,_=c.j.J,c.h=new ye,c.g=Uu(c.j,_?p:null,!c.m),0<c.O&&(c.M=new hf(T(c.Y,c,c.g),c.O)),p=c.U,_=c.g,A=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(rr[0]=G.toString()),G=rr);for(var W=0;W<G.length;W++){var ft=vu(_,G[W],A||p.handleEvent,!1,p.h||p);if(!ft)break;p.g[ft.key]=ft}p=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),os(),Co(c.i,c.u,c.A,c.l,c.R,c.m)}rn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Nn(c)==3?p.j():this.Y(c)},rn.prototype.Y=function(c){try{if(c==this.g)t:{const Ie=Nn(this.g);var p=this.g.Ba();const Ui=this.g.Z();if(!(3>Ie)&&(Ie!=3||this.g&&(this.h.h||this.g.oa()||Vu(this.g)))){this.J||Ie!=4||p==7||(p==8||0>=Ui?os(3):os(2)),cs(this);var _=this.g.Z();this.X=_;e:if(Au(this)){var A=Vu(this.g);c="";var G=A.length,W=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),ri(this);var ft="";break e}this.h.i=new m.TextDecoder}for(p=0;p<G;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(W&&p==G-1)});A.length=0,this.h.g+=c,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=_==200,ff(this.i,this.u,this.A,this.l,this.R,Ie,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Bt,xe=this.g;if((Bt=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Bt)){var qt=Bt;break e}}qt=null}if(_=qt)ls(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cr(this,_);else{this.o=!1,this.s=3,oe(12),He(this),ri(this);break t}}if(this.P){_=!0;let Ge;for(;!this.J&&this.C<ft.length;)if(Ge=wu(this,ft),Ge==ta){Ie==4&&(this.s=4,oe(14),_=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==Ro){this.s=4,oe(15),ls(this.i,this.l,ft,"[Invalid Chunk]"),_=!1;break}else ls(this.i,this.l,Ge,null),cr(this,Ge);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||ft.length!=0||this.h.h||(this.s=1,oe(16),_=!1),this.o=this.o&&_,!_)ls(this.i,this.l,ft,"[Invalid Chunked Response]"),He(this),ri(this);else if(0<ft.length&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.ba&&!ke.M&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),Tr(ke),ke.M=!0,oe(11))}}else ls(this.i,this.l,ft,null),cr(this,ft);Ie==4&&He(this),this.o&&!this.J&&(Ie==4?ku(this.j,this):(this.o=!1,ur(this)))}else yf(this.g),_==400&&0<ft.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),He(this),ri(this)}}}catch{}finally{}};function Au(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wu(c,p){var _=c.C,A=p.indexOf(`
`,_);return A==-1?ta:(_=Number(p.substring(_,A)),isNaN(_)?Ro:(A+=1,A+_>p.length?ta:(p=p.slice(A,A+_),c.C=A+_,p)))}rn.prototype.cancel=function(){this.J=!0,He(this)};function ur(c){c.S=Date.now()+c.I,Cu(c,c.I)}function Cu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Te(T(c.ba,c),p)}function cs(c){c.B&&(m.clearTimeout(c.B),c.B=null)}rn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Su(this.i,this.A),this.L!=2&&(os(),oe(17)),He(this),this.s=2,ri(this)):Cu(this,this.S-c)};function ri(c){c.j.G==0||c.J||ku(c.j,c)}function He(c){cs(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,ar(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function cr(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||xo(_.h,c))){if(!c.K&&xo(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)fa(_),ca(_);else break t;jo(_),oe(18)}}else _.za=G[1],0<_.za-_.T&&37500>G[2]&&_.F&&_.v==0&&!_.C&&(_.C=Te(T(_.Za,_),6e3));if(1>=na(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ji(_,11)}else if((c.K||_.g==c)&&fa(_),!J(p))for(G=_.Da.g.parse(p),p=0;p<G.length;p++){let qt=G[p];if(_.T=qt[0],qt=qt[1],_.G==2)if(qt[0]=="c"){_.K=qt[1],_.ia=qt[2];const ke=qt[3];ke!=null&&(_.la=ke,_.j.info("VER="+_.la));const Ie=qt[4];Ie!=null&&(_.Aa=Ie,_.j.info("SVER="+_.Aa));const Ui=qt[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(A=1.5*Ui,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Ge=c.g;if(Ge){const fi=Ge.g?Ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var W=A.h;W.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ia(W,W.h),W.h=null))}if(A.D){const zo=Ge.g?Ge.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(A.ya=zo,te(A.I,A.D,zo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var ft=c;if(A.qa=ju(A,A.J?A.ia:null,A.W),ft.K){an(A.h,ft);var Bt=ft,xe=A.L;xe&&(Bt.I=xe),Bt.B&&(cs(Bt),ur(Bt)),A.g=ft}else Nu(A);0<_.i.length&&ha(_)}else qt[0]!="stop"&&qt[0]!="close"||ji(_,7);else _.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?ji(_,7):ko(_):qt[0]!="noop"&&_.l&&_.l.ta(qt),_.v=0)}}os(4)}catch{}}var Ru=class{constructor(c,p){this.g=c,this.map=p}};function Mi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ea(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function na(c){return c.h?1:c.g?c.g.size:0}function xo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ia(c,p){c.g?c.g.add(p):c.h=p}function an(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Mi.prototype.cancel=function(){if(this.i=Io(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Io(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return P(c.i)}function df(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],_=c.length,A=0;A<_;A++)p.push(c[A]);return p}p=[],_=0;for(A in c)p[_++]=c[A];return p}function sa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const A in c)p[_++]=A;return p}}}function Do(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=sa(c),A=df(c),G=A.length,W=0;W<G;W++)p.call(void 0,A[W],_&&_[W],c)}var hr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mf(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),G=null;if(0<=A){var W=c[_].substring(0,A);G=c[_].substring(A+1)}else W=c[_];p(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function be(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof be){this.h=c.h,fr(this,c.j),this.o=c.o,this.g=c.g,hs(this,c.s),this.l=c.l;var p=c.i,_=new Ni;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Oi(this,_),this.m=c.m}else c&&(p=String(c).match(hr))?(this.h=!1,fr(this,p[1]||"",!0),this.o=Vn(p[2]||""),this.g=Vn(p[3]||"",!0),hs(this,p[4]),this.l=Vn(p[5]||"",!0),Oi(this,p[6]||"",!0),this.m=Vn(p[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}be.prototype.toString=function(){var c=[],p=this.j;p&&c.push(mr(p,Vo,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(mr(p,Vo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(mr(_,_.charAt(0)=="/"?gf:Mo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",mr(_,ra)),c.join("")};function En(c){return new be(c)}function fr(c,p,_){c.j=_?Vn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function hs(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Oi(c,p,_){p instanceof Ni?(c.i=p,Iu(c.i,c.h)):(_||(p=mr(p,pf)),c.i=new Ni(p,c.h))}function te(c,p,_){c.i.set(p,_)}function dr(c){return te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Vn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function mr(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,xu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vo=/[#\/\?@]/g,Mo=/[#\?:]/g,gf=/[#\?]/g,pf=/[#\?@]/g,ra=/#/g;function Ni(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Mn(c){c.g||(c.g=new Map,c.h=0,c.i&&mf(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}i=Ni.prototype,i.add=function(c,p){Mn(this),this.i=null,c=ai(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function Li(c,p){Mn(c),p=ai(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ki(c,p){return Mn(c),p=ai(c,p),c.g.has(p)}i.forEach=function(c,p){Mn(this),this.g.forEach(function(_,A){_.forEach(function(G){c.call(p,G,A,this)},this)},this)},i.na=function(){Mn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let A=0;A<p.length;A++){const G=c[A];for(let W=0;W<G.length;W++)_.push(p[A])}return _},i.V=function(c){Mn(this);let p=[];if(typeof c=="string")ki(this,c)&&(p=p.concat(this.g.get(ai(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},i.set=function(c,p){return Mn(this),this.i=null,c=ai(this,c),ki(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},i.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Oo(c,p,_){Li(c,p),0<_.length&&(c.i=null,c.g.set(ai(c,p),P(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var A=p[_];const W=encodeURIComponent(String(A)),ft=this.V(A);for(A=0;A<ft.length;A++){var G=W;ft[A]!==""&&(G+="="+encodeURIComponent(String(ft[A]))),c.push(G)}}return this.i=c.join("&")};function ai(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Iu(c,p){p&&!c.j&&(Mn(c),c.i=null,c.g.forEach(function(_,A){var G=A.toLowerCase();A!=G&&(Li(this,A),Oo(this,G,_))},c)),c.j=p}function gr(c,p){const _=new Dn;if(m.Image){const A=new Image;A.onload=R(On,_,"TestLoadImage: loaded",!0,p,A),A.onerror=R(On,_,"TestLoadImage: error",!1,p,A),A.onabort=R(On,_,"TestLoadImage: abort",!1,p,A),A.ontimeout=R(On,_,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function Xn(c,p){const _=new Dn,A=new AbortController,G=setTimeout(()=>{A.abort(),On(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(W=>{clearTimeout(G),W.ok?On(_,"TestPingServer: ok",!0,p):On(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(G),On(_,"TestPingServer: error",!1,p)})}function On(c,p,_,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(_)}catch{}}function pr(){this.g=new or}function oi(c,p,_){const A=_||"";try{Do(c,function(G,W){let ft=G;g(G)&&(ft=Yn(G)),p.push(A+W+"="+encodeURIComponent(ft))})}catch(G){throw p.push(A+"type="+encodeURIComponent("_badmap")),G}}function fs(c){this.l=c.Ub||null,this.j=c.eb||!1}I(fs,To),fs.prototype.g=function(){return new Pi(this.l,this.j)},fs.prototype.i=function(c){return function(){return c}}({});function Pi(c,p){me.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Pi,me),i=Pi.prototype,i.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,ui(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;No(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function No(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?li(this):ui(this),this.readyState==3&&No(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,li(this))},i.Qa=function(c){this.g&&(this.response=c,li(this))},i.ga=function(){this.g&&li(this)};function li(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ui(c)}i.setRequestHeader=function(c,p){this.u.append(c,p)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function ui(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Lo(c){let p="";return tt(c,function(_,A){p+=A,p+=":",p+=_,p+=`\r
`}),p}function Le(c,p,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=Lo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):te(c,p,_))}function Xt(c){me.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Xt,me);var aa=/^https?$/i,yr=["POST","PUT"];i=Xt.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,p,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ii.g(),this.v=this.o?bo(this.o):bo(ii),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(W){Du(this,W);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)_.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())_.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),G=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(yr,p,void 0))||A||G||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ft]of _)this.g.setRequestHeader(W,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_r(this),this.u=!0,this.g.send(c),this.u=!1}catch(W){Du(this,W)}};function Du(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,oa(c),ci(c)}function oa(c){c.A||(c.A=!0,Zt(c,"complete"),Zt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Zt(this,"complete"),Zt(this,"abort"),ci(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),Xt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},i.bb=function(){la(this)};function la(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Nn(c)!=4||c.Z()!=2)){if(c.u&&Nn(c)==4)Je(c.Ea,0,c);else if(Zt(c,"readystatechange"),Nn(c)==4){c.h=!1;try{const ft=c.Z();t:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var A;if(A=ft===0){var G=String(c.D).match(hr)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),A=!aa.test(G?G.toLowerCase():"")}_=A}if(_)Zt(c,"complete"),Zt(c,"success");else{c.m=6;try{var W=2<Nn(c)?c.g.statusText:""}catch{W=""}c.l=W+" ["+c.Z()+"]",oa(c)}}finally{ci(c)}}}}function ci(c,p){if(c.g){_r(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Zt(c,"ready");try{_.onreadystatechange=A}catch{}}}function _r(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Nn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Jr(p)}};function Vu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function yf(c){const p={};c=(c.g&&2<=Nn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(J(c[A]))continue;var _=k(c[A]);const G=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[G]||[];p[G]=W,W.push(_)}D(p,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vr(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function ua(c){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vr("baseRetryDelayMs",5e3,c),this.cb=vr("retryDelaySeedMs",1e4,c),this.Wa=vr("forwardChannelMaxRetries",2,c),this.wa=vr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Mi(c&&c.concurrentRequestLimit),this.Da=new pr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ua.prototype,i.la=8,i.G=1,i.connect=function(c,p,_,A){oe(0),this.W=c,this.H=p||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=ju(this,null,this.W),ha(this)};function ko(c){if(Mu(c),c.G==3){var p=c.U++,_=En(c.I);if(te(_,"SID",c.K),te(_,"RID",p),te(_,"TYPE","terminate"),Er(c,_),p=new rn(c,c.j,p),p.L=2,p.v=dr(En(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=Uu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ur(p)}Pu(c)}function ca(c){c.g&&(Tr(c),c.g.cancel(),c.g=null)}function Mu(c){ca(c),c.u&&(m.clearTimeout(c.u),c.u=null),fa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ha(c){if(!ea(c.h)&&!c.s){c.s=!0;var p=c.Ga;Z||O(),ct||(Z(),ct=!0),pt.add(p,c),c.B=0}}function _f(c,p){return na(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Te(T(c.Ga,c,p),Uo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new rn(this,this.j,c);let W=this.o;if(this.S&&(W?(W=C(W),L(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=Ou(this,G,p),_=En(this.I),te(_,"RID",c),te(_,"CVER",22),this.D&&te(_,"X-HTTP-Session-Id",this.D),Er(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(Lo(W)))+"&"+p:this.m&&Le(_,this.m,W)),ia(this.h,G),this.Ua&&te(_,"TYPE","init"),this.P?(te(_,"$req",p),te(_,"SID","null"),G.T=!0,Kn(G,_,null)):Kn(G,_,p),this.G=2}}else this.G==3&&(c?Po(this,c):this.i.length==0||ea(this.h)||Po(this))};function Po(c,p){var _;p?_=p.l:_=c.U++;const A=En(c.I);te(A,"SID",c.K),te(A,"RID",_),te(A,"AID",c.T),Er(c,A),c.m&&c.o&&Le(A,c.m,c.o),_=new rn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Ou(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ia(c.h,_),Kn(_,A,p)}function Er(c,p){c.H&&tt(c.H,function(_,A){te(p,A,_)}),c.l&&Do({},function(_,A){te(p,A,_)})}function Ou(c,p,_){_=Math.min(c.i.length,_);var A=c.l?T(c.l.Na,c.l,c):null;t:{var G=c.i;let W=-1;for(;;){const ft=["count="+_];W==-1?0<_?(W=G[0].g,ft.push("ofs="+W)):W=0:ft.push("ofs="+W);let Bt=!0;for(let xe=0;xe<_;xe++){let qt=G[xe].g;const ke=G[xe].map;if(qt-=W,0>qt)W=Math.max(0,G[xe].g-100),Bt=!1;else try{oi(ke,ft,"req"+qt+"_")}catch{A&&A(ke)}}if(Bt){A=ft.join("&");break t}}}return c=c.i.splice(0,_),p.D=c,A}function Nu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Z||O(),ct||(Z(),ct=!0),pt.add(p,c),c.v=0}}function jo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Te(T(c.Fa,c),Uo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Te(T(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),ca(this),Lu(this))};function Tr(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Lu(c){c.g=new rn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=En(c.qa);te(p,"RID","rpc"),te(p,"SID",c.K),te(p,"AID",c.T),te(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&te(p,"TO",c.ja),te(p,"TYPE","xmlhttp"),Er(c,p),c.m&&c.o&&Le(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=dr(En(p)),_.m=null,_.P=!0,Vi(_,c)}i.Za=function(){this.C!=null&&(this.C=null,ca(this),jo(this),oe(19))};function fa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function ku(c,p){var _=null;if(c.g==p){fa(c),Tr(c),c.g=null;var A=2}else if(xo(c.h,p))_=p.D,an(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var G=c.B;A=as(),Zt(A,new Re(A,_)),ha(c)}else Nu(c);else if(G=p.s,G==3||G==0&&0<p.X||!(A==1&&_f(c,p)||A==2&&jo(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),G){case 1:ji(c,5);break;case 4:ji(c,10);break;case 3:ji(c,6);break;default:ji(c,2)}}}function Uo(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function ji(c,p){if(c.j.info("Error code "+p),p==2){var _=T(c.fb,c),A=c.Xa;const G=!A;A=new be(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||fr(A,"https"),dr(A),G?gr(A.toString(),_):Xn(A.toString(),_)}else oe(2);c.G=0,c.l&&c.l.sa(p),Pu(c),Mu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function Pu(c){if(c.G=0,c.ka=[],c.l){const p=Io(c.h);(p.length!=0||c.i.length!=0)&&(N(c.ka,p),N(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function ju(c,p,_){var A=_ instanceof be?En(_):new be(_);if(A.g!="")p&&(A.g=p+"."+A.g),hs(A,A.s);else{var G=m.location;A=G.protocol,p=p?p+"."+G.hostname:G.hostname,G=+G.port;var W=new be(null);A&&fr(W,A),p&&(W.g=p),G&&hs(W,G),_&&(W.l=_),A=W}return _=c.D,p=c.ya,_&&p&&te(A,_,p),te(A,"VER",c.la),Er(c,A),A}function Uu(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Xt(new fs({eb:_})):new Xt(c.pa),p.Ha(c.J),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}i=zu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function da(){}da.prototype.g=function(c,p){return new on(c,p)};function on(c,p){me.call(this),this.g=new ua(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!J(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!J(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new hi(this)}I(on,me),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){ko(this.g)},on.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Yn(c),c=_);p.i.push(new Ru(p.Ya++,c)),p.G==3&&ha(p)},on.prototype.N=function(){this.g.l=null,delete this.j,ko(this.g),delete this.g,on.aa.N.call(this)};function Bu(c){Ii.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const _ in p){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}I(Bu,Ii);function qu(){Ao.call(this),this.status=1}I(qu,Ao);function hi(c){this.g=c}I(hi,zu),hi.prototype.ua=function(){Zt(this.g,"a")},hi.prototype.ta=function(c){Zt(this.g,new Bu(c))},hi.prototype.sa=function(c){Zt(this.g,new qu)},hi.prototype.ra=function(){Zt(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Hv=function(){return new da},qv=function(){return as()},Bv=ni,im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,nh=us,Di.COMPLETE="complete",zv=Di,So.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",me.prototype.listen=me.prototype.K,Ol=So,Xt.prototype.listenOnce=Xt.prototype.L,Xt.prototype.getLastError=Xt.prototype.Ka,Xt.prototype.getLastErrorCode=Xt.prototype.Ba,Xt.prototype.getStatus=Xt.prototype.Z,Xt.prototype.getResponseJson=Xt.prototype.Oa,Xt.prototype.getResponseText=Xt.prototype.oa,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Ha,Uv=Xt}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore",Vy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Mv("@firebase/firestore");function Ya(){return Gr.logLevel}function gt(i,...t){if(Gr.logLevel<=Ft.DEBUG){const n=t.map(zm);Gr.debug(`Firestore (${mo}): ${i}`,...n)}}function ss(i,...t){if(Gr.logLevel<=Ft.ERROR){const n=t.map(zm);Gr.error(`Firestore (${mo}): ${i}`,...n)}}function io(i,...t){if(Gr.logLevel<=Ft.WARN){const n=t.map(zm);Gr.warn(`Firestore (${mo}): ${i}`,...n)}}function zm(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(i,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Gv(i,r,n)}function Gv(i,t,n){let r=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ss(r),new Error(r)}function $t(i,t,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||Gv(t,o,r)}function Dt(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Et extends fo{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class j7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class U7{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z7{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){$t(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let u=new Gs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gs,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;t.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gs)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t(typeof r.accessToken=="string",31837,{l:r}),new Fv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return $t(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class B7{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class q7{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new B7(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class My{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H7{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,T7(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){$t(this.o===void 0,3512);const r=u=>{u.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,gt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new My(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?($t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new My(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=G7(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=t.charAt(o[u]%62))}return r}}function Nt(i,t){return i<t?-1:i>t?1:0}function sm(i,t){let n=0;for(;n<i.length&&n<t.length;){const r=i.codePointAt(n),o=t.codePointAt(n);if(r!==o){if(r<128&&o<128)return Nt(r,o);{const u=Qv(),f=F7(u.encode(Oy(i,n)),u.encode(Oy(t,n)));return f!==0?f:Nt(r,o)}}n+=r>65535?2:1}return Nt(i.length,t.length)}function Oy(i,t){return i.codePointAt(t)>65535?i.substring(t,t+2):i.substring(t,t+1)}function F7(i,t){for(let n=0;n<i.length&&n<t.length;++n)if(i[n]!==t[n])return Nt(i[n],t[n]);return Nt(i.length,t.length)}function so(i,t,n){return i.length===t.length&&i.every((r,o)=>n(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=-62135596800,Ly=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(t){return Oe.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Ly);return new Oe(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Et(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Et(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Ny)throw new Et(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Et(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ly}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Ny;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{static fromTimestamp(t){return new It(t)}static min(){return new It(new Oe(0,0))}static max(){return new It(new Oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="__name__";class Ei{constructor(t,n,r){n===void 0?n=0:n>t.length&&Ct(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Ct(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Ei.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ei?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let o=0;o<r;o++){const u=Ei.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Nt(t.length,n.length)}static compareSegments(t,n){const r=Ei.isNumericId(t),o=Ei.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ei.extractNumericId(t).compare(Ei.extractNumericId(n)):sm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Hs.fromString(t.substring(4,t.length-2))}}class ue extends Ei{construct(t,n,r){return new ue(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Et(ot.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const Q7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Ei{construct(t,n,r){return new Xe(t,n,r)}static isValidIdentifier(t){return Q7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ky}static keyField(){return new Xe([ky])}static fromServerFormat(t){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Et(ot.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new Et(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Et(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new Et(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t){this.path=t}static fromPath(t){return new St(ue.fromString(t))}static fromName(t){return new St(ue.fromString(t).popFirst(5))}static empty(){return new St(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ue.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ue.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new St(new ue(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function Y7(i,t){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=It.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new Qs(o,St.empty(),t)}function K7(i){return new Qs(i.readTime,i.key,iu)}class Qs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Qs(It.min(),St.empty(),iu)}static max(){return new Qs(It.max(),St.empty(),iu)}}function X7(i,t){let n=i.readTime.compareTo(t.readTime);return n!==0?n:(n=St.comparator(i.documentKey,t.documentKey),n!==0?n:Nt(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(i){if(i.code!==ot.FAILED_PRECONDITION||i.message!==$7)throw i;gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new at((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof at?n:at.resolve(n)}catch(n){return at.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):at.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):at.reject(n)}static resolve(t){return new at((n,r)=>{n(t)})}static reject(t){return new at((n,r)=>{r(t)})}static waitFor(t){return new at((n,r)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},y=>r(y))}),f=!0,u===o&&n()})}static or(t){let n=at.resolve(!1);for(const r of t)n=n.next(o=>o?at.resolve(o):r());return n}static forEach(t,n){const r=[];return t.forEach((o,u)=>{r.push(n.call(this,o,u))}),this.waitFor(r)}static mapArray(t,n){return new at((r,o)=>{const u=t.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const g=y;n(t[g]).next(v=>{f[g]=v,++m,m===u&&r(f)},v=>o(v))}})}static doWhile(t,n){return new at((r,o)=>{const u=()=>{t()===!0?n().next(()=>{u()},o):r()};u()})}}function J7(i){const t=i.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Bh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function qh(i){return i==null}function yh(i){return i===0&&1/i==-1/0}function W7(i){return typeof i=="number"&&Number.isInteger(i)&&!yh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="";function t8(i){let t="";for(let n=0;n<i.length;n++)t.length>0&&(t=Py(t)),t=e8(i.get(n),t);return Py(t)}function e8(i,t){let n=t;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case Kv:n+="";break;default:n+=u}}return n}function Py(i){return i+Kv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(i){let t=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t++;return t}function Js(i,t){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&t(n,i[n])}function Xv(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,n){this.comparator=t,this.root=n||Ke.EMPTY}insert(t,n){return new fe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fc(this.root,t,this.comparator,!0)}}class Fc{constructor(t,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ke{constructor(t,n,r,o,u){this.key=t,this.value=n,this.color=r??Ke.RED,this.left=o??Ke.EMPTY,this.right=u??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,o,u){return new Ke(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Ke.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ct(27949);return t+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(t,n,r,o,u){return this}insert(t,n,r){return new Ke(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uy(this.data.getIterator())}getIteratorFrom(t){return new Uy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ne)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ne(this.comparator);return n.data=t,n}}class Uy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new xn([])}unionWith(t){let n=new Ne(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new xn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return so(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $v("Invalid base64 string: "+u):u}}(t);return new $e(n)}static fromUint8Array(t){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new $e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const n8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(i){if($t(!!i,39018),typeof i=="string"){let t=0;const n=n8.exec(i);if($t(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ee(i.seconds),nanos:Ee(i.nanos)}}function Ee(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ks(i){return typeof i=="string"?$e.fromBase64String(i):$e.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="server_timestamp",Jv="__type__",Wv="__previous_value__",t3="__local_write_time__";function qm(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{})[Jv])===null||n===void 0?void 0:n.stringValue)===Zv}function Hh(i){const t=i.mapValue.fields[Wv];return qm(t)?Hh(t):t}function su(i){const t=Ys(i.mapValue.fields[t3].timestampValue);return new Oe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(t,n,r,o,u,f,m,y,g,v){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=v}}const _h="(default)";class ru{constructor(t,n){this.projectId=t,this.database=n||_h}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===_h}isEqual(t){return t instanceof ru&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="__type__",s8="__max__",Qc={mapValue:{}},n3="__vector__",vh="value";function Xs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?qm(i)?4:a8(i)?9007199254740991:r8(i)?10:11:Ct(28295,{value:i})}function wi(i,t){if(i===t)return!0;const n=Xs(i);if(n!==Xs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return su(i).isEqual(su(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Ys(o.timestampValue),m=Ys(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(o,u){return Ks(o.bytesValue).isEqual(Ks(u.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(o,u){return Ee(o.geoPointValue.latitude)===Ee(u.geoPointValue.latitude)&&Ee(o.geoPointValue.longitude)===Ee(u.geoPointValue.longitude)}(i,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ee(o.integerValue)===Ee(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Ee(o.doubleValue),m=Ee(u.doubleValue);return f===m?yh(f)===yh(m):isNaN(f)&&isNaN(m)}return!1}(i,t);case 9:return so(i.arrayValue.values||[],t.arrayValue.values||[],wi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(jy(f)!==jy(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!wi(f[y],m[y])))return!1;return!0}(i,t);default:return Ct(52216,{left:i})}}function au(i,t){return(i.values||[]).find(n=>wi(n,t))!==void 0}function ro(i,t){if(i===t)return 0;const n=Xs(i),r=Xs(t);if(n!==r)return Nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(i.booleanValue,t.booleanValue);case 2:return function(u,f){const m=Ee(u.integerValue||u.doubleValue),y=Ee(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(i,t);case 3:return zy(i.timestampValue,t.timestampValue);case 4:return zy(su(i),su(t));case 5:return sm(i.stringValue,t.stringValue);case 6:return function(u,f){const m=Ks(u),y=Ks(f);return m.compareTo(y)}(i.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),y=f.split("/");for(let g=0;g<m.length&&g<y.length;g++){const v=Nt(m[g],y[g]);if(v!==0)return v}return Nt(m.length,y.length)}(i.referenceValue,t.referenceValue);case 8:return function(u,f){const m=Nt(Ee(u.latitude),Ee(f.latitude));return m!==0?m:Nt(Ee(u.longitude),Ee(f.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return By(i.arrayValue,t.arrayValue);case 10:return function(u,f){var m,y,g,v;const b=u.fields||{},T=f.fields||{},R=(m=b[vh])===null||m===void 0?void 0:m.arrayValue,I=(y=T[vh])===null||y===void 0?void 0:y.arrayValue,P=Nt(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((v=I==null?void 0:I.values)===null||v===void 0?void 0:v.length)||0);return P!==0?P:By(R,I)}(i.mapValue,t.mapValue);case 11:return function(u,f){if(u===Qc.mapValue&&f===Qc.mapValue)return 0;if(u===Qc.mapValue)return 1;if(f===Qc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),g=f.fields||{},v=Object.keys(g);y.sort(),v.sort();for(let b=0;b<y.length&&b<v.length;++b){const T=sm(y[b],v[b]);if(T!==0)return T;const R=ro(m[y[b]],g[v[b]]);if(R!==0)return R}return Nt(y.length,v.length)}(i.mapValue,t.mapValue);default:throw Ct(23264,{Pe:n})}}function zy(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Nt(i,t);const n=Ys(i),r=Ys(t),o=Nt(n.seconds,r.seconds);return o!==0?o:Nt(n.nanos,r.nanos)}function By(i,t){const n=i.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=ro(n[o],r[o]);if(u)return u}return Nt(n.length,r.length)}function ao(i){return rm(i)}function rm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=Ys(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Ks(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return St.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=rm(u);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${rm(n.fields[f])}`;return o+"}"}(i.mapValue):Ct(61005,{value:i})}function ih(i){switch(Xs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hh(i);return t?16+ih(t):16;case 5:return 2*i.stringValue.length;case 6:return Ks(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+ih(u),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return Js(r.fields,(u,f)=>{o+=u.length+ih(f)}),o}(i.mapValue);default:throw Ct(13486,{value:i})}}function am(i){return!!i&&"integerValue"in i}function Hm(i){return!!i&&"arrayValue"in i}function qy(i){return!!i&&"nullValue"in i}function Hy(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function sh(i){return!!i&&"mapValue"in i}function r8(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{})[e3])===null||n===void 0?void 0:n.stringValue)===n3}function Hl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Js(i.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Hl(r)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Hl(i.arrayValue.values[n]);return t}return Object.assign({},i)}function a8(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===s8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.value=t}static empty(){return new yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!sh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Hl(n)}setAll(t){let n=Xe.emptyPath(),r={},o=[];t.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=Hl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(t){const n=this.field(t.popLast());sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return wi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=n.mapValue.fields[t.get(r)];sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,r){Js(n,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new yn(Hl(this.value))}}function i3(i){const t=[];return Js(i.fields,(n,r)=>{const o=new Xe([n]);if(sh(r)){const u=i3(r.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new xn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,n,r,o,u,f,m){this.key=t,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new sn(t,0,It.min(),It.min(),It.min(),yn.empty(),0)}static newFoundDocument(t,n,r,o){return new sn(t,1,n,It.min(),r,o,0)}static newNoDocument(t,n){return new sn(t,2,n,It.min(),It.min(),yn.empty(),0)}static newUnknownDocument(t,n){return new sn(t,3,n,It.min(),It.min(),yn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,n){this.position=t,this.inclusive=n}}function Gy(i,t,n){let r=0;for(let o=0;o<i.position.length;o++){const u=t[o],f=i.position[o];if(u.field.isKeyField()?r=St.comparator(St.fromName(f.referenceValue),n.key):r=ro(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fy(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!wi(i.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,n="asc"){this.field=t,this.dir=n}}function o8(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{}class Me extends s3{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new u8(t,n,r):n==="array-contains"?new f8(t,r):n==="in"?new d8(t,r):n==="not-in"?new m8(t,r):n==="array-contains-any"?new g8(t,r):new Me(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new c8(t,r):new h8(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ro(n,this.value)):n!==null&&Xs(this.value)===Xs(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends s3{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Ci(t,n)}matches(t){return r3(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function r3(i){return i.op==="and"}function a3(i){return l8(i)&&r3(i)}function l8(i){for(const t of i.filters)if(t instanceof Ci)return!1;return!0}function om(i){if(i instanceof Me)return i.field.canonicalString()+i.op.toString()+ao(i.value);if(a3(i))return i.filters.map(t=>om(t)).join(",");{const t=i.filters.map(n=>om(n)).join(",");return`${i.op}(${t})`}}function o3(i,t){return i instanceof Me?function(r,o){return o instanceof Me&&r.op===o.op&&r.field.isEqual(o.field)&&wi(r.value,o.value)}(i,t):i instanceof Ci?function(r,o){return o instanceof Ci&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&o3(f,o.filters[m]),!0):!1}(i,t):void Ct(19439)}function l3(i){return i instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${ao(n.value)}`}(i):i instanceof Ci?function(n){return n.op.toString()+" {"+n.getFilters().map(l3).join(" ,")+"}"}(i):"Filter"}class u8 extends Me{constructor(t,n,r){super(t,n,r),this.key=St.fromName(r.referenceValue)}matches(t){const n=St.comparator(t.key,this.key);return this.matchesComparison(n)}}class c8 extends Me{constructor(t,n){super(t,"in",n),this.keys=u3("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class h8 extends Me{constructor(t,n){super(t,"not-in",n),this.keys=u3("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function u3(i,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>St.fromName(r.referenceValue))}class f8 extends Me{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Hm(n)&&au(n.arrayValue,this.value)}}class d8 extends Me{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class m8 extends Me{constructor(t,n){super(t,"not-in",n)}matches(t){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class g8 extends Me{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Hm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>au(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(t,n=null,r=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function Qy(i,t=null,n=[],r=[],o=null,u=null,f=null){return new p8(i,t,n,r,o,u,f)}function Gm(i){const t=Dt(i);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>om(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),qh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>ao(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>ao(r)).join(",")),t.Ie=n}return t.Ie}function Fm(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!o8(i.orderBy[n],t.orderBy[n]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!o3(i.filters[n],t.filters[n]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Fy(i.startAt,t.startAt)&&Fy(i.endAt,t.endAt)}function lm(i){return St.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t,n=null,r=[],o=[],u=null,f="F",m=null,y=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function y8(i,t,n,r,o,u,f,m){return new Gh(i,t,n,r,o,u,f,m)}function Fh(i){return new Gh(i)}function Yy(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function _8(i){return i.collectionGroup!==null}function Gl(i){const t=Dt(i);if(t.Ee===null){t.Ee=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ee.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ne(Xe.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(t).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ee.push(new Th(u,r))}),n.has(Xe.keyField().canonicalString())||t.Ee.push(new Th(Xe.keyField(),r))}return t.Ee}function Ti(i){const t=Dt(i);return t.de||(t.de=v8(t,Gl(i))),t.de}function v8(i,t){if(i.limitType==="F")return Qy(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Th(o.field,u)});const n=i.endAt?new Eh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Eh(i.startAt.position,i.startAt.inclusive):null;return Qy(i.path,i.collectionGroup,t,i.filters,i.limit,n,r)}}function um(i,t,n){return new Gh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,n,i.startAt,i.endAt)}function Qh(i,t){return Fm(Ti(i),Ti(t))&&i.limitType===t.limitType}function c3(i){return`${Gm(Ti(i))}|lt:${i.limitType}`}function Ka(i){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>l3(o)).join(", ")}]`),qh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>ao(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>ao(o)).join(",")),`Target(${r})`}(Ti(i))}; limitType=${i.limitType})`}function Yh(i,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):St.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(i,t)&&function(r,o){for(const u of Gl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(i,t)&&function(r,o){return!(r.startAt&&!function(f,m,y){const g=Gy(f,m,y);return f.inclusive?g<=0:g<0}(r.startAt,Gl(r),o)||r.endAt&&!function(f,m,y){const g=Gy(f,m,y);return f.inclusive?g>=0:g>0}(r.endAt,Gl(r),o))}(i,t)}function E8(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function h3(i){return(t,n)=>{let r=!1;for(const o of Gl(i)){const u=T8(o,t,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function T8(i,t,n){const r=i.field.isKeyField()?St.comparator(t.key,n.key):function(u,f,m){const y=f.data.field(u),g=m.data.field(u);return y!==null&&g!==null?ro(y,g):Ct(42886)}(i.field,t,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ct(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Js(this.inner,(n,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return Xv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new fe(St.comparator);function rs(){return b8}const f3=new fe(St.comparator);function Nl(...i){let t=f3;for(const n of i)t=t.insert(n.key,n);return t}function d3(i){let t=f3;return i.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function qr(){return Fl()}function m3(){return Fl()}function Fl(){return new Kr(i=>i.toString(),(i,t)=>i.isEqual(t))}const S8=new fe(St.comparator),A8=new Ne(St.comparator);function Ut(...i){let t=A8;for(const n of i)t=t.add(n);return t}const w8=new Ne(Nt);function C8(){return w8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(t)?"-0":t}}function g3(i){return{integerValue:""+i}}function R8(i,t){return W7(t)?g3(t):Qm(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function x8(i,t,n){return i instanceof bh?function(o,u){const f={fields:{[Jv]:{stringValue:Zv},[t3]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&qm(u)&&(u=Hh(u)),u&&(f.fields[Wv]=u),{mapValue:f}}(n,t):i instanceof ou?y3(i,t):i instanceof lu?_3(i,t):function(o,u){const f=p3(o,u),m=Ky(f)+Ky(o.Re);return am(f)&&am(o.Re)?g3(m):Qm(o.serializer,m)}(i,t)}function I8(i,t,n){return i instanceof ou?y3(i,t):i instanceof lu?_3(i,t):n}function p3(i,t){return i instanceof Sh?function(r){return am(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class bh extends Kh{}class ou extends Kh{constructor(t){super(),this.elements=t}}function y3(i,t){const n=v3(t);for(const r of i.elements)n.some(o=>wi(o,r))||n.push(r);return{arrayValue:{values:n}}}class lu extends Kh{constructor(t){super(),this.elements=t}}function _3(i,t){let n=v3(t);for(const r of i.elements)n=n.filter(o=>!wi(o,r));return{arrayValue:{values:n}}}class Sh extends Kh{constructor(t,n){super(),this.serializer=t,this.Re=n}}function Ky(i){return Ee(i.integerValue||i.doubleValue)}function v3(i){return Hm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function D8(i,t){return i.field.isEqual(t.field)&&function(r,o){return r instanceof ou&&o instanceof ou||r instanceof lu&&o instanceof lu?so(r.elements,o.elements,wi):r instanceof Sh&&o instanceof Sh?wi(r.Re,o.Re):r instanceof bh&&o instanceof bh}(i.transform,t.transform)}class V8{constructor(t,n){this.version=t,this.transformResults=n}}class bi{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new bi}static exists(t){return new bi(void 0,t)}static updateTime(t){return new bi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rh(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Xh{}function E3(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new b3(i.key,bi.none()):new gu(i.key,i.data,bi.none());{const n=i.data,r=yn.empty();let o=new Ne(Xe.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Ws(i.key,r,new xn(o.toArray()),bi.none())}}function M8(i,t,n){i instanceof gu?function(o,u,f){const m=o.value.clone(),y=$y(o.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,t,n):i instanceof Ws?function(o,u,f){if(!rh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=$y(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(T3(o)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(i,t,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function Ql(i,t,n,r){return i instanceof gu?function(u,f,m,y){if(!rh(u.precondition,f))return m;const g=u.value.clone(),v=Zy(u.fieldTransforms,y,f);return g.setAll(v),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(i,t,n,r):i instanceof Ws?function(u,f,m,y){if(!rh(u.precondition,f))return m;const g=Zy(u.fieldTransforms,y,f),v=f.data;return v.setAll(T3(u)),v.setAll(g),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(i,t,n,r):function(u,f,m){return rh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,t,n)}function O8(i,t){let n=null;for(const r of i.fieldTransforms){const o=t.data.field(r.field),u=p3(r.transform,o||null);u!=null&&(n===null&&(n=yn.empty()),n.set(r.field,u))}return n||null}function Xy(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&so(r,o,(u,f)=>D8(u,f))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class gu extends Xh{constructor(t,n,r,o=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ws extends Xh{constructor(t,n,r,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function T3(i){const t=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=i.data.field(n);t.set(n,r)}}),t}function $y(i,t,n){const r=new Map;$t(i.length===n.length,32656,{Ve:n.length,me:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=t.data.field(u.field);r.set(u.field,I8(f,m,n[o]))}return r}function Zy(i,t,n){const r=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);r.set(o.field,x8(u,f,t))}return r}class b3 extends Xh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N8 extends Xh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&M8(u,t,r[o])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ql(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ql(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=m3();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const y=E3(f,m);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ut())}isEqual(t){return this.batchId===t.batchId&&so(this.mutations,t.mutations,(n,r)=>Xy(n,r))&&so(this.baseMutations,t.baseMutations,(n,r)=>Xy(n,r))}}class Ym{constructor(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(t,n,r){$t(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let o=function(){return S8}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Ym(t,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Gt;function j8(i){switch(i){case ot.OK:return Ct(64938);case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0;default:return Ct(15467,{code:i})}}function S3(i){if(i===void 0)return ss("GRPC error has no .code"),ot.UNKNOWN;switch(i){case we.OK:return ot.OK;case we.CANCELLED:return ot.CANCELLED;case we.UNKNOWN:return ot.UNKNOWN;case we.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case we.INTERNAL:return ot.INTERNAL;case we.UNAVAILABLE:return ot.UNAVAILABLE;case we.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case we.NOT_FOUND:return ot.NOT_FOUND;case we.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case we.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case we.ABORTED:return ot.ABORTED;case we.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case we.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case we.DATA_LOSS:return ot.DATA_LOSS;default:return Ct(39323,{code:i})}}(Gt=we||(we={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=new Hs([4294967295,4294967295],0);function Jy(i){const t=Qv().encode(i),n=new jv;return n.update(t),new Uint8Array(n.digest())}function Wy(i){const t=new DataView(i.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Hs([n,r],0),new Hs([o,u],0)]}class Km{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ll(`Invalid padding: ${n}`);if(r<0)throw new Ll(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=Hs.fromNumber(this.pe)}we(t,n,r){let o=t.add(n.multiply(Hs.fromNumber(r)));return o.compare(U8)===1&&(o=new Hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=Jy(t),[r,o]=Wy(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);if(!this.be(f))return!1}return!0}static create(t,n,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new Km(u,o,n);return r.forEach(m=>f.insert(m)),f}insert(t){if(this.pe===0)return;const n=Jy(t),[r,o]=Wy(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);this.Se(f)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t,n,r,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const o=new Map;return o.set(t,pu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new $h(It.min(),o,new fe(Nt),rs(),Ut())}}class pu{constructor(t,n,r,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new pu(r,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,n,r,o){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=o}}class A3{constructor(t,n){this.targetId=t,this.Ce=n}}class w3{constructor(t,n,r=$e.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=o}}class t_{constructor(){this.Fe=0,this.Me=e_(),this.xe=$e.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Ut(),n=Ut(),r=Ut();return this.Me.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ct(38017,{changeType:u})}}),new pu(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=e_()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,$t(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class z8{constructor(t){this.ze=t,this.je=new Map,this.He=rs(),this.Je=Yc(),this.Ye=Yc(),this.Ze=new fe(Nt)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:Ct(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,o)=>{this.it(o)&&n(o)})}ot(t){const n=t.targetId,r=t.Ce.count,o=this._t(n);if(o){const u=o.target;if(lm(u))if(r===0){const f=new St(u.path);this.tt(n,f,sn.newNoDocument(f,It.min()))}else $t(r===1,20013,{expectedCount:r});else{const f=this.ut(n);if(f!==r){const m=this.ct(t),y=m?this.lt(m,t,f):1;if(y!==0){this.st(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Ks(r).toUint8Array()}catch(y){if(y instanceof $v)return io("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Km(f,o,u)}catch(y){return io(y instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let o=0;return r.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(t){const n=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&lm(m.target)){const y=new St(m.target.path);this.Et(y).has(f)||this.dt(f,y)||this.tt(f,y,sn.newNoDocument(y,t))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let r=Ut();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(y=>{const g=this._t(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(t));const o=new $h(t,n,this.Ze,this.He,r);return this.He=rs(),this.Je=Yc(),this.Ye=Yc(),this.Ze=new fe(Nt),o}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const o=this.rt(t);this.dt(t,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new t_,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new Ne(Nt),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new Ne(Nt),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||gt("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new t_),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function Yc(){return new fe(St.comparator)}function e_(){return new fe(St.comparator)}const B8={asc:"ASCENDING",desc:"DESCENDING"},q8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H8={and:"AND",or:"OR"};class G8{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function cm(i,t){return i.useProto3Json||qh(t)?t:{value:t}}function Ah(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function C3(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function F8(i,t){return Ah(i,t.toTimestamp())}function Si(i){return $t(!!i,49232),It.fromTimestamp(function(n){const r=Ys(n);return new Oe(r.seconds,r.nanos)}(i))}function Xm(i,t){return hm(i,t).canonicalString()}function hm(i,t){const n=function(o){return new ue(["projects",o.projectId,"databases",o.database])}(i).child("documents");return t===void 0?n:n.child(t)}function R3(i){const t=ue.fromString(i);return $t(M3(t),10190,{key:t.toString()}),t}function fm(i,t){return Xm(i.databaseId,t.path)}function x1(i,t){const n=R3(t);if(n.get(1)!==i.databaseId.projectId)throw new Et(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Et(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new St(I3(n))}function x3(i,t){return Xm(i.databaseId,t)}function Q8(i){const t=R3(i);return t.length===4?ue.emptyPath():I3(t)}function dm(i){return new ue(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function I3(i){return $t(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function n_(i,t,n){return{name:fm(i,t),fields:n.value.mapValue.fields}}function Y8(i,t){let n;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ct(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(g,v){return g.useProto3Json?($t(v===void 0||typeof v=="string",58123),$e.fromBase64String(v||"")):($t(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),$e.fromUint8Array(v||new Uint8Array))}(i,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(g){const v=g.code===void 0?ot.UNKNOWN:S3(g.code);return new Et(v,g.message||"")}(f);n=new w3(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=x1(i,r.document.name),u=Si(r.document.updateTime),f=r.document.createTime?Si(r.document.createTime):It.min(),m=new yn({mapValue:{fields:r.document.fields}}),y=sn.newFoundDocument(o,u,f,m),g=r.targetIds||[],v=r.removedTargetIds||[];n=new ah(g,v,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=x1(i,r.document),u=r.readTime?Si(r.readTime):It.min(),f=sn.newNoDocument(o,u),m=r.removedTargetIds||[];n=new ah([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=x1(i,r.document),u=r.removedTargetIds||[];n=new ah([],u,o,null)}else{if(!("filter"in t))return Ct(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new P8(o,u),m=r.targetId;n=new A3(m,f)}}return n}function K8(i,t){let n;if(t instanceof gu)n={update:n_(i,t.key,t.value)};else if(t instanceof b3)n={delete:fm(i,t.key)};else if(t instanceof Ws)n={update:n_(i,t.key,t.data),updateMask:ib(t.fieldMask)};else{if(!(t instanceof N8))return Ct(16599,{ft:t.type});n={verify:fm(i,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof bh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ou)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof lu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Sh)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw Ct(20930,{transform:f.transform})}(0,r))),t.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:F8(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ct(27497)}(i,t.precondition)),n}function X8(i,t){return i&&i.length>0?($t(t!==void 0,14353),i.map(n=>function(o,u){let f=o.updateTime?Si(o.updateTime):Si(u);return f.isEqual(It.min())&&(f=Si(u)),new V8(f,o.transformResults||[])}(n,t))):[]}function $8(i,t){return{documents:[x3(i,t.path)]}}function Z8(i,t){const n={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=x3(i,o);const u=function(g){if(g.length!==0)return V3(Ci.create(g,"and"))}(t.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(v=>function(T){return{field:Xa(T.field),direction:tb(T.dir)}}(v))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const m=cm(i,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:n,parent:o}}function J8(i){let t=Q8(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){$t(r===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:t=t.child(v.collectionId)}let u=[];n.where&&(u=function(b){const T=D3(b);return T instanceof Ci&&a3(T)?T.getFilters():[T]}(n.where));let f=[];n.orderBy&&(f=function(b){return b.map(T=>function(I){return new Th($a(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(T))}(n.orderBy));let m=null;n.limit&&(m=function(b){let T;return T=typeof b=="object"?b.value:b,qh(T)?null:T}(n.limit));let y=null;n.startAt&&(y=function(b){const T=!!b.before,R=b.values||[];return new Eh(R,T)}(n.startAt));let g=null;return n.endAt&&(g=function(b){const T=!b.before,R=b.values||[];return new Eh(R,T)}(n.endAt)),y8(t,o,f,u,m,"F",y,g)}function W8(i,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:o})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function D3(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$a(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=$a(n.unaryFilter.field);return Me.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=$a(n.unaryFilter.field);return Me.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=$a(n.unaryFilter.field);return Me.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}}(i):i.fieldFilter!==void 0?function(n){return Me.create($a(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Ci.create(n.compositeFilter.filters.map(r=>D3(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}}(n.compositeFilter.op))}(i):Ct(30097,{filter:i})}function tb(i){return B8[i]}function eb(i){return q8[i]}function nb(i){return H8[i]}function Xa(i){return{fieldPath:i.canonicalString()}}function $a(i){return Xe.fromServerFormat(i.fieldPath)}function V3(i){return i instanceof Me?function(n){if(n.op==="=="){if(Hy(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NAN"}};if(qy(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hy(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NAN"}};if(qy(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(n.field),op:eb(n.op),value:n.value}}}(i):i instanceof Ci?function(n){const r=n.getFilters().map(o=>V3(o));return r.length===1?r[0]:{compositeFilter:{op:nb(n.op),filters:r}}}(i):Ct(54877,{filter:i})}function ib(i){const t=[];return i.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function M3(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t,n,r,o,u=It.min(),f=It.min(),m=$e.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new Us(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t){this.wt=t}}function rb(i){const t=J8({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?um(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(){this.Cn=new ob}addToCollectionParentIndex(t,n){return this.Cn.add(n),at.resolve()}getCollectionParents(t,n){return at.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return at.resolve()}deleteFieldIndex(t,n){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,n){return at.resolve()}getDocumentsMatchingTarget(t,n){return at.resolve(null)}getIndexType(t,n){return at.resolve(0)}getFieldIndexes(t,n){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,n){return at.resolve(Qs.min())}getMinOffsetFromCollectionGroup(t,n){return at.resolve(Qs.min())}updateCollectionGroup(t,n,r){return at.resolve()}updateIndexEntries(t,n){return at.resolve()}}class ob{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new Ne(ue.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Ne(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O3=41943040;class dn{static withCacheSize(t){return new dn(t,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(O3,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new oo(0)}static lr(){return new oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="LruGarbageCollector",lb=1048576;function r_([i,t],[n,r]){const o=Nt(i,n);return o===0?Nt(t,r):o}class ub{constructor(t){this.Er=t,this.buffer=new Ne(r_),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();r_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cb{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){gt(s_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?gt(s_,"Ignoring IndexedDB error during garbage collection: ",n):await go(n)}await this.mr(3e5)})}}class hb{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return at.resolve(Bh.le);const r=new ub(n);return this.gr.forEachTarget(t,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.gr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(i_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i_):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let r,o,u,f,m,y,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,f=Date.now(),this.nthSequenceNumber(t,o))).next(b=>(r=b,m=Date.now(),this.removeTargets(t,r,n))).next(b=>(u=b,y=Date.now(),this.removeOrphanedDocuments(t,r))).next(b=>(g=Date.now(),Ya()<=Ft.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-v}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${b} documents in `+(g-y)+`ms
Total Duration: ${g-v}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function fb(i,t){return new hb(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.changes=new Kr(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,sn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?at.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t,n,r,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(r!==null&&Ql(r.mutation,o,xn.empty(),Oe.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Ut()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Ut()){const o=qr();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,r).next(u=>{let f=Nl();return u.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const r=qr();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Ut()))}populateOverlays(t,n,r){const o=[];return r.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(t,n,r,o){let u=rs();const f=Fl(),m=function(){return Fl()}();return n.forEach((y,g)=>{const v=r.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof Ws)?u=u.insert(g.key,g):v!==void 0?(f.set(g.key,v.mutation.getFieldMask()),Ql(v.mutation,g,v.mutation.getFieldMask(),Oe.now())):f.set(g.key,xn.empty())}),this.recalculateAndSaveOverlays(t,u).next(y=>(y.forEach((g,v)=>f.set(g,v)),n.forEach((g,v)=>{var b;return m.set(g,new mb(v,(b=f.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(t,n){const r=Fl();let o=new fe((f,m)=>f-m),u=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const m of f)m.keys().forEach(y=>{const g=n.get(y);if(g===null)return;let v=r.get(y)||xn.empty();v=m.applyToLocalView(g,v),r.set(y,v);const b=(o.get(m.batchId)||Ut()).add(y);o=o.insert(m.batchId,b)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,v=y.value,b=m3();v.forEach(T=>{if(!u.has(T)){const R=E3(n.get(T),r.get(T));R!==null&&b.set(T,R),u=u.add(T)}}),f.push(this.documentOverlayCache.saveOverlays(t,g,b))}return at.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,o){return function(f){return St.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):_8(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,o):this.getDocumentsMatchingCollectionQuery(t,n,r,o)}getNextDocuments(t,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,o-u.size):at.resolve(qr());let m=iu,y=u;return f.next(g=>at.forEach(g,(v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(v)?at.resolve():this.remoteDocumentCache.getEntry(t,v).next(T=>{y=y.insert(v,T)}))).next(()=>this.populateOverlays(t,g,u)).next(()=>this.computeViews(t,y,g,Ut())).next(v=>({batchId:m,changes:d3(v)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new St(n)).next(r=>{let o=Nl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,r,o){const u=n.collectionGroup;let f=Nl();return this.indexManager.getCollectionParents(t,u).next(m=>at.forEach(m,y=>{const g=function(b,T){return new Gh(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,o).next(v=>{v.forEach((b,T)=>{f=f.insert(b,T)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,o))).next(f=>{u.forEach((y,g)=>{const v=g.getKey();f.get(v)===null&&(f=f.insert(v,sn.newInvalidDocument(v)))});let m=Nl();return f.forEach((y,g)=>{const v=u.get(y);v!==void 0&&Ql(v.mutation,g,xn.empty(),Oe.now()),Yh(n,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return at.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Si(o.createTime)}}(n)),at.resolve()}getNamedQuery(t,n){return at.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(o){return{name:o.name,query:rb(o.bundledQuery),readTime:Si(o.readTime)}}(n)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.overlays=new fe(St.comparator),this.Qr=new Map}getOverlay(t,n){return at.resolve(this.overlays.get(n))}getOverlays(t,n){const r=qr();return at.forEach(n,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((o,u)=>{this.St(t,n,u)}),at.resolve()}removeOverlaysForBatchId(t,n,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),at.resolve()}getOverlaysForCollection(t,n,r){const o=qr(),u=n.length+1,f=new St(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return at.resolve(o)}getOverlaysForCollectionGroup(t,n,r,o){let u=new fe((g,v)=>g-v);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>r){let v=u.get(g.largestBatchId);v===null&&(v=qr(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=qr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,v)=>m.set(g,v)),!(m.size()>=o)););return at.resolve(m)}St(t,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new k8(n,r));let u=this.Qr.get(n);u===void 0&&(u=Ut(),this.Qr.set(n,u)),this.Qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.$r=new Ne(ze.Ur),this.Kr=new Ne(ze.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const r=new ze(t,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.zr(new ze(t,n))}jr(t,n){t.forEach(r=>this.removeReference(r,n))}Hr(t){const n=new St(new ue([])),r=new ze(n,t),o=new ze(n,t+1),u=[];return this.Kr.forEachInRange([r,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new St(new ue([])),r=new ze(n,t),o=new ze(n,t+1);let u=Ut();return this.Kr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(t){const n=new ze(t,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ze{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return St.comparator(t.key,n.key)||Nt(t.Zr,n.Zr)}static Wr(t,n){return Nt(t.Zr,n.Zr)||St.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ne(ze.Ur)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new L8(u,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new ze(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return at.resolve(f)}lookupMutationBatch(t,n){return at.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=this.ti(r),u=o<0?0:o;return at.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?Bm:this.nr-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ze(n,0),o=new ze(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],f=>{const m=this.ei(f.Zr);u.push(m)}),at.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ne(Nt);return n.forEach(o=>{const u=new ze(o,0),f=new ze(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{r=r.add(m.Zr)})}),at.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1;let u=r;St.isDocumentKey(u)||(u=u.child(""));const f=new ze(new St(u),0);let m=new Ne(Nt);return this.Xr.forEachWhile(y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(m=m.add(y.Zr)),!0)},f),at.resolve(this.ni(m))}ni(t){const n=[];return t.forEach(r=>{const o=this.ei(r);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){$t(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return at.forEach(n.mutations,o=>{const u=new ze(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,n){const r=new ze(n,0),o=this.Xr.firstAfterOrEqual(r);return at.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(t){this.ii=t,this.docs=function(){return new fe(St.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return at.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(t,n){let r=rs();return n.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():sn.newInvalidDocument(o))}),at.resolve(r)}getDocumentsMatchingQuery(t,n,r,o){let u=rs();const f=n.path,m=new St(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:v}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||X7(K7(v),r)<=0||(o.has(v.key)||Yh(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return at.resolve(u)}getAllFromCollectionGroup(t,n,r,o){Ct(9500)}si(t,n){return at.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Tb(this)}getSize(t){return at.resolve(this.size)}}class Tb extends db{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(t,o)):this.Br.removeEntry(r)}),at.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t){this.persistence=t,this.oi=new Kr(n=>Gm(n),Fm),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this._i=0,this.ai=new $m,this.targetCount=0,this.ui=oo.cr()}forEachTarget(t,n){return this.oi.forEach((r,o)=>n(o)),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),at.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new oo(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,at.resolve()}updateTargetData(t,n){return this.Tr(n),at.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,n,r){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),at.waitFor(u).next(()=>o)}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,n){const r=this.oi.get(n)||null;return at.resolve(r)}addMatchingKeys(t,n,r){return this.ai.Gr(n,r),at.resolve()}removeMatchingKeys(t,n,r){this.ai.jr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),at.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),at.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ai.Yr(n);return at.resolve(r)}containsKey(t,n){return at.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(t,n){this.ci={},this.overlays={},this.li=new Bh(0),this.hi=!1,this.hi=!0,this.Pi=new _b,this.referenceDelegate=t(this),this.Ti=new bb(this),this.indexManager=new ab,this.remoteDocumentCache=function(o){return new Eb(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new sb(n),this.Ei=new pb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new yb,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ci[t.toKey()];return r||(r=new vb(n,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,r){gt("MemoryPersistence","Starting transaction:",t);const o=new Sb(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(t,n){return at.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,n)))}}class Sb extends Z7{constructor(t){super(),this.currentSequenceNumber=t}}class Zm{constructor(t){this.persistence=t,this.Vi=new $m,this.mi=null}static fi(t){return new Zm(t)}get gi(){if(this.mi)return this.mi;throw Ct(60996)}addReference(t,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),at.resolve()}removeReference(t,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),at.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),at.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.gi,r=>{const o=St.fromPath(r);return this.pi(t,o).next(u=>{u||n.removeEntry(o,It.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return at.or([()=>at.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class wh{constructor(t,n){this.persistence=t,this.yi=new Kr(r=>t8(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=fb(this,n)}static fi(t,n){return new wh(t,n)}di(){}Ai(t){return at.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(o=>r+o))}br(t){let n=0;return this.yr(t,r=>{n++}).next(()=>n)}yr(t,n){return at.forEach(this.yi,(r,o)=>this.Dr(t,r,o).next(u=>u?at.resolve():n(o)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(t,f=>this.Dr(t,f,n).next(m=>{m||(r++,u.removeEntry(f,It.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),at.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),at.resolve()}removeReference(t,n,r){return this.yi.set(r,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),at.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ih(t.data.value)),n}Dr(t,n,r){return at.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.yi.get(n);return at.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t,n,r,o){this.targetId=t,this.fromCache=n,this.ds=r,this.As=o}static Rs(t,n){let r=Ut(),o=Ut();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Jm(t,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return _T()?8:J7(pT())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,r,o){const u={result:null};return this.ws(t,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(t,n,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new Ab;return this.Ss(t,n,f).next(m=>{if(u.result=m,this.fs)return this.Ds(t,n,f,m.size)})}).next(()=>u.result)}Ds(t,n,r,o){return r.documentReadCount<this.gs?(Ya()<=Ft.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),at.resolve()):(Ya()<=Ft.DEBUG&&gt("QueryEngine","Query:",Ka(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Ya()<=Ft.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ti(n))):at.resolve())}ws(t,n){if(Yy(n))return at.resolve(null);let r=Ti(n);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=um(n,null,"F"),r=Ti(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const f=Ut(...u);return this.ys.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,r).next(y=>{const g=this.vs(n,m);return this.Cs(n,g,f,y.readTime)?this.ws(t,um(n,null,"F")):this.Fs(t,g,n,y)}))})))}bs(t,n,r,o){return Yy(n)||o.isEqual(It.min())?at.resolve(null):this.ys.getDocuments(t,r).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,r,o)?at.resolve(null):(Ya()<=Ft.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ka(n)),this.Fs(t,f,n,Y7(o,iu)).next(m=>m))})}vs(t,n){let r=new Ne(h3(t));return n.forEach((o,u)=>{Yh(t,u)&&(r=r.add(u))}),r}Cs(t,n,r,o){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,r){return Ya()<=Ft.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Ka(n)),this.ys.getDocumentsMatchingQuery(t,n,Qs.min(),r)}Fs(t,n,r,o){return this.ys.getDocumentsMatchingQuery(t,r,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="LocalStore",Cb=3e8;class Rb{constructor(t,n,r,o){this.persistence=t,this.Ms=n,this.serializer=o,this.xs=new fe(Nt),this.Os=new Kr(u=>Gm(u),Fm),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new gb(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function xb(i,t,n,r){return new Rb(i,t,n,r)}async function L3(i,t){const n=Dt(i);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,n.Ls(t),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let y=Ut();for(const g of o){f.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}return n.localDocuments.getDocuments(r,y).next(g=>({ks:g,removedBatchIds:f,addedBatchIds:m}))})})}function Ib(i,t){const n=Dt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,g,v){const b=g.batch,T=b.keys();let R=at.resolve();return T.forEach(I=>{R=R.next(()=>v.getEntry(y,I)).next(P=>{const N=g.docVersions.get(I);$t(N!==null,48541),P.version.compareTo(N)<0&&(b.applyToRemoteDocument(P,g),P.isValidDocument()&&(P.setReadTime(g.commitVersion),v.addEntry(P)))})}),R.next(()=>m.mutationQueue.removeMutationBatch(y,b))}(n,r,t,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Ut();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(t))).next(()=>n.localDocuments.getDocuments(r,o))})}function k3(i){const t=Dt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function Db(i,t){const n=Dt(i),r=t.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];t.targetChanges.forEach((v,b)=>{const T=o.get(b);if(!T)return;m.push(n.Ti.removeMatchingKeys(u,v.removedDocuments,b).next(()=>n.Ti.addMatchingKeys(u,v.addedDocuments,b)));let R=T.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(b)!==null?R=R.withResumeToken($e.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),o=o.insert(b,R),function(P,N,q){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Cb?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(T,R,v)&&m.push(n.Ti.updateTargetData(u,R))});let y=rs(),g=Ut();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))}),m.push(Vb(u,f,t.documentUpdates).next(v=>{y=v.qs,g=v.Qs})),!r.isEqual(It.min())){const v=n.Ti.getLastRemoteSnapshotVersion(u).next(b=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(v)}return at.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(n.xs=o,u))}function Vb(i,t,n){let r=Ut(),o=Ut();return n.forEach(u=>r=r.add(u)),t.getEntries(i,r).next(u=>{let f=rs();return n.forEach((m,y)=>{const g=u.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(It.min())?(t.removeEntry(m,y.readTime),f=f.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),f=f.insert(m,y)):gt(Wm,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{qs:f,Qs:o}})}function Mb(i,t){const n=Dt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=Bm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Ob(i,t){const n=Dt(i);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Ti.getTargetData(r,t).next(u=>u?(o=u,at.resolve(o)):n.Ti.allocateTargetId(r).next(f=>(o=new Us(t,f,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(t,r.targetId)),r})}async function mm(i,t,n){const r=Dt(i),o=r.xs.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!po(f))throw f;gt(Wm,`Failed to update sequence numbers for target ${t}: ${f}`)}r.xs=r.xs.remove(t),r.Os.delete(o.target)}function a_(i,t,n){const r=Dt(i);let o=It.min(),u=Ut();return r.persistence.runTransaction("Execute query","readwrite",f=>function(y,g,v){const b=Dt(y),T=b.Os.get(v);return T!==void 0?at.resolve(b.xs.get(T)):b.Ti.getTargetData(g,v)}(r,f,Ti(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,m.targetId).next(y=>{u=y})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,t,n?o:It.min(),n?u:Ut())).next(m=>(Nb(r,E8(t),m),{documents:m,$s:u})))}function Nb(i,t,n){let r=i.Ns.get(t)||It.min();n.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),i.Ns.set(t,r)}class o_{constructor(){this.activeTargetIds=C8()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Lb{constructor(){this.xo=new o_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,r){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new o_,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="ConnectivityMonitor";class u_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){gt(l_,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){gt(l_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc=null;function gm(){return Kc===null?Kc=function(){return 268435456+Math.round(2147483648*Math.random())}():Kc++,"0x"+Kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="RestConnection",Pb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jb{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(t,n,r,o,u){const f=gm(),m=this.jo(t,n.toUriEncodedString());gt(I1,`Sending RPC '${t}' ${f}:`,m,r);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:g}=new URL(m),v=jm(g);return this.Jo(t,m,y,r,v).then(b=>(gt(I1,`Received RPC '${t}' ${f}: `,b),b),b=>{throw io(I1,`RPC '${t}' ${f} failed with error: `,b,"url: ",m,"request:",r),b})}Yo(t,n,r,o,u,f){return this.zo(t,n,r,o,u)}Ho(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}jo(t,n){const r=Pb[t];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class zb extends jb{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,o,u){const f=gm();return new Promise((m,y)=>{const g=new Uv;g.setWithCredentials(!0),g.listenOnce(zv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case nh.NO_ERROR:const b=g.getResponseJson();gt(en,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(b)),m(b);break;case nh.TIMEOUT:gt(en,`RPC '${t}' ${f} timed out`),y(new Et(ot.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const T=g.getStatus();if(gt(en,`RPC '${t}' ${f} failed with status:`,T,"response text:",g.getResponseText()),T>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const I=R==null?void 0:R.error;if(I&&I.status&&I.message){const P=function(q){const J=q.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(J)>=0?J:ot.UNKNOWN}(I.status);y(new Et(P,I.message))}else y(new Et(ot.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new Et(ot.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{h_:t,streamId:f,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{gt(en,`RPC '${t}' ${f} completed.`)}});const v=JSON.stringify(o);gt(en,`RPC '${t}' ${f} sending request:`,o),g.send(n,"POST",v,r,15)})}I_(t,n,r){const o=gm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=Hv(),m=qv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const v=u.join("");gt(en,`Creating RPC '${t}' stream ${o}: ${v}`,y);const b=f.createWebChannel(v,y);this.E_(b);let T=!1,R=!1;const I=new Ub({Zo:N=>{R?gt(en,`Not sending because RPC '${t}' stream ${o} is closed:`,N):(T||(gt(en,`Opening RPC '${t}' stream ${o} transport.`),b.open(),T=!0),gt(en,`RPC '${t}' stream ${o} sending:`,N),b.send(N))},Xo:()=>b.close()}),P=(N,q,J)=>{N.listen(q,B=>{try{J(B)}catch(H){setTimeout(()=>{throw H},0)}})};return P(b,Ol.EventType.OPEN,()=>{R||(gt(en,`RPC '${t}' stream ${o} transport opened.`),I.__())}),P(b,Ol.EventType.CLOSE,()=>{R||(R=!0,gt(en,`RPC '${t}' stream ${o} transport closed`),I.u_(),this.d_(b))}),P(b,Ol.EventType.ERROR,N=>{R||(R=!0,io(en,`RPC '${t}' stream ${o} transport errored. Name:`,N.name,"Message:",N.message),I.u_(new Et(ot.UNAVAILABLE,"The operation could not be completed")))}),P(b,Ol.EventType.MESSAGE,N=>{var q;if(!R){const J=N.data[0];$t(!!J,16349);const B=J,H=(B==null?void 0:B.error)||((q=B[0])===null||q===void 0?void 0:q.error);if(H){gt(en,`RPC '${t}' stream ${o} received error:`,H);const et=H.status;let tt=function(x){const L=we[x];if(L!==void 0)return S3(L)}(et),D=H.message;tt===void 0&&(tt=ot.INTERNAL,D="Unknown error status: "+et+" with message "+H.message),R=!0,I.u_(new Et(tt,D)),b.close()}else gt(en,`RPC '${t}' stream ${o} received:`,J),I.c_(J)}}),P(m,Bv.STAT_EVENT,N=>{N.stat===im.PROXY?gt(en,`RPC '${t}' stream ${o} detected buffering proxy`):N.stat===im.NOPROXY&&gt(en,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function D1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(i){return new G8(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(t,n,r=1e3,o=1.5,u=6e4){this.xi=t,this.timerId=n,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-r);o>0&&gt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="PersistentStream";class j3{constructor(t,n,r,o,u,f,m,y){this.xi=t,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new P3(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===ot.RESOURCE_EXHAUSTED?(ss(n.toString()),ss("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ot.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===n&&this.z_(r,o)},r=>{t(()=>{const o=new Et(ot.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(t,n){const r=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return gt(c_,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(gt(c_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bb extends j3{constructor(t,n,r,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}H_(t,n){return this.connection.I_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const n=Y8(this.serializer,t),r=function(u){if(!("targetChange"in u))return It.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?It.min():f.readTime?Si(f.readTime):It.min()}(t);return this.listener.Y_(n,r)}Z_(t){const n={};n.database=dm(this.serializer),n.addTarget=function(u,f){let m;const y=f.target;if(m=lm(y)?{documents:$8(u,y)}:{query:Z8(u,y).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=C3(u,f.resumeToken);const g=cm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(It.min())>0){m.readTime=Ah(u,f.snapshotVersion.toTimestamp());const g=cm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,t);const r=W8(this.serializer,t);r&&(n.labels=r),this.Q_(n)}X_(t){const n={};n.database=dm(this.serializer),n.removeTarget=t,this.Q_(n)}}class qb extends j3{constructor(t,n,r,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return $t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,$t(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){$t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=X8(t.writeResults,t.commitTime),r=Si(t.commitTime);return this.listener.ra(r,n)}ia(){const t={};t.database=dm(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>K8(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{}class Gb extends Hb{constructor(t,n,r,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new Et(ot.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(t,hm(n,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Et(ot.UNKNOWN,u.toString())})}Yo(t,n,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(t,hm(n,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Et(ot.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Fb{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ss(n),this.ua=!1):gt("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="RemoteStore";class Qb{constructor(t,n,r,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{r.enqueueAndForget(async()=>{Xr(this)&&(gt(Fr,"Restarting streams for network reachability change."),await async function(y){const g=Dt(y);g.da.add(4),await yu(g),g.Va.set("Unknown"),g.da.delete(4),await Jh(g)}(this))})}),this.Va=new Fb(r,o)}}async function Jh(i){if(Xr(i))for(const t of i.Aa)await t(!0)}async function yu(i){for(const t of i.Aa)await t(!1)}function U3(i,t){const n=Dt(i);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),ig(n)?ng(n):yo(n).N_()&&eg(n,t))}function tg(i,t){const n=Dt(i),r=yo(n);n.Ea.delete(t),r.N_()&&z3(n,t),n.Ea.size===0&&(r.N_()?r.k_():Xr(n)&&n.Va.set("Unknown"))}function eg(i,t){if(i.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(It.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}yo(i).Z_(t)}function z3(i,t){i.ma.Ke(t),yo(i).X_(t)}function ng(i){i.ma=new z8({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>i.Ea.get(t)||null,Pt:()=>i.datastore.serializer.databaseId}),yo(i).start(),i.Va.ca()}function ig(i){return Xr(i)&&!yo(i).O_()&&i.Ea.size>0}function Xr(i){return Dt(i).da.size===0}function B3(i){i.ma=void 0}async function Yb(i){i.Va.set("Online")}async function Kb(i){i.Ea.forEach((t,n)=>{eg(i,t)})}async function Xb(i,t){B3(i),ig(i)?(i.Va.Pa(t),ng(i)):i.Va.set("Unknown")}async function $b(i,t,n){if(i.Va.set("Online"),t instanceof w3&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(i,t)}catch(r){gt(Fr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ch(i,r)}else if(t instanceof ah?i.ma.Xe(t):t instanceof A3?i.ma.ot(t):i.ma.nt(t),!n.isEqual(It.min()))try{const r=await k3(i.localStore);n.compareTo(r)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const v=u.Ea.get(g);v&&u.Ea.set(g,v.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,g)=>{const v=u.Ea.get(y);if(!v)return;u.Ea.set(y,v.withResumeToken($e.EMPTY_BYTE_STRING,v.snapshotVersion)),z3(u,y);const b=new Us(v.target,y,g,v.sequenceNumber);eg(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(r){gt(Fr,"Failed to raise snapshot:",r),await Ch(i,r)}}async function Ch(i,t,n){if(!po(t))throw t;i.da.add(1),await yu(i),i.Va.set("Offline"),n||(n=()=>k3(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{gt(Fr,"Retrying IndexedDB access"),await n(),i.da.delete(1),await Jh(i)})}function q3(i,t){return t().catch(n=>Ch(i,n,t))}async function Wh(i){const t=Dt(i),n=$s(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Bm;for(;Zb(t);)try{const o=await Mb(t.localStore,r);if(o===null){t.Ia.length===0&&n.k_();break}r=o.batchId,Jb(t,o)}catch(o){await Ch(t,o)}H3(t)&&G3(t)}function Zb(i){return Xr(i)&&i.Ia.length<10}function Jb(i,t){i.Ia.push(t);const n=$s(i);n.N_()&&n.ea&&n.ta(t.mutations)}function H3(i){return Xr(i)&&!$s(i).O_()&&i.Ia.length>0}function G3(i){$s(i).start()}async function Wb(i){$s(i).ia()}async function tS(i){const t=$s(i);for(const n of i.Ia)t.ta(n.mutations)}async function eS(i,t,n){const r=i.Ia.shift(),o=Ym.from(r,t,n);await q3(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await Wh(i)}async function nS(i,t){t&&$s(i).ea&&await async function(r,o){if(function(f){return j8(f)&&f!==ot.ABORTED}(o.code)){const u=r.Ia.shift();$s(r).L_(),await q3(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Wh(r)}}(i,t),H3(i)&&G3(i)}async function h_(i,t){const n=Dt(i);n.asyncQueue.verifyOperationInProgress(),gt(Fr,"RemoteStore received new credentials");const r=Xr(n);n.da.add(3),await yu(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Jh(n)}async function iS(i,t){const n=Dt(i);t?(n.da.delete(2),await Jh(n)):t||(n.da.add(2),await yu(n),n.Va.set("Unknown"))}function yo(i){return i.fa||(i.fa=function(n,r,o){const u=Dt(n);return u.oa(),new Bb(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{e_:Yb.bind(null,i),n_:Kb.bind(null,i),i_:Xb.bind(null,i),Y_:$b.bind(null,i)}),i.Aa.push(async t=>{t?(i.fa.L_(),ig(i)?ng(i):i.Va.set("Unknown")):(await i.fa.stop(),B3(i))})),i.fa}function $s(i){return i.ga||(i.ga=function(n,r,o){const u=Dt(n);return u.oa(),new qb(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:Wb.bind(null,i),i_:nS.bind(null,i),na:tS.bind(null,i),ra:eS.bind(null,i)}),i.Aa.push(async t=>{t?(i.ga.L_(),await Wh(i)):(await i.ga.stop(),i.Ia.length>0&&(gt(Fr,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,n,r,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,o,u){const f=Date.now()+r,m=new sg(t,n,f,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Et(ot.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(i,t){if(ss("AsyncQueue",`${t}: ${i}`),po(i))return new Et(ot.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{static emptySet(t){return new to(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||St.comparator(n.key,r.key):(n,r)=>St.comparator(n.key,r.key),this.keyedMap=Nl(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof to)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new to;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.pa=new fe(St.comparator)}track(t){const n=t.doc.key,r=this.pa.get(n);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(n,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(n):t.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:t.doc}):Ct(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(n,t)}wa(){const t=[];return this.pa.inorderTraversal((n,r)=>{t.push(r)}),t}}class lo{constructor(t,n,r,o,u,f,m,y,g){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,n,r,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new lo(t,n,to.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class rS{constructor(){this.queries=d_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Dt(n),u=o.queries;o.queries=d_(),u.forEach((f,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new Et(ot.ABORTED,"Firestore shutting down"))}}function d_(){return new Kr(i=>c3(i),Qh)}async function F3(i,t){const n=Dt(i);let r=3;const o=t.query;let u=n.queries.get(o);u?!u.Da()&&t.va()&&(r=2):(u=new sS,r=t.va()?0:1);try{switch(r){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=rg(f,`Initialization of query '${Ka(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.Fa(n.onlineState),u.ba&&t.Ma(u.ba)&&ag(n)}async function Q3(i,t){const n=Dt(i),r=t.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.va()?0:1:!u.Da()&&t.va()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aS(i,t){const n=Dt(i);let r=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(r=!0);f.ba=o}}r&&ag(n)}function oS(i,t,n){const r=Dt(i),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(t)}function ag(i){i.Ca.forEach(t=>{t.next()})}var pm,m_;(m_=pm||(pm={})).xa="default",m_.Cache="cache";class Y3{constructor(t,n,r){this.query=t,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new lo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Na?this.La(t)&&(this.Oa.next(t),n=!0):this.ka(t,this.onlineState)&&(this.qa(t),n=!0),this.Ba=t,n}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),n=!0),n}ka(t,n){if(!t.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}La(t){if(t.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(t){t=lo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(t){this.key=t}}class X3{constructor(t){this.key=t}}class lS{constructor(t,n){this.query=t,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ut(),this.mutatedKeys=Ut(),this.Za=h3(t),this.Xa=new to(this.Za)}get eu(){return this.Ha}tu(t,n){const r=n?n.nu:new f_,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((v,b)=>{const T=o.get(v),R=Yh(this.query,b)?b:null,I=!!T&&this.mutatedKeys.has(T.key),P=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let N=!1;T&&R?T.data.isEqual(R.data)?I!==P&&(r.track({type:3,doc:R}),N=!0):this.ru(T,R)||(r.track({type:2,doc:R}),N=!0,(y&&this.Za(R,y)>0||g&&this.Za(R,g)<0)&&(m=!0)):!T&&R?(r.track({type:0,doc:R}),N=!0):T&&!R&&(r.track({type:1,doc:T}),N=!0,(y||g)&&(m=!0)),N&&(R?(f=f.add(R),u=P?u.add(v):u.delete(v)):(f=f.delete(v),u=u.delete(v)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const v=this.query.limitType==="F"?f.last():f.first();f=f.delete(v.key),u=u.delete(v.key),r.track({type:1,doc:v})}return{Xa:f,nu:r,Cs:m,mutatedKeys:u}}ru(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,o){const u=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const f=t.nu.wa();f.sort((v,b)=>function(R,I){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Vt:N})}};return P(R)-P(I)}(v.type,b.type)||this.Za(v.doc,b.doc)),this.iu(r),o=o!=null&&o;const m=n&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,g=y!==this.Ja;return this.Ja=y,f.length!==0||g?{snapshot:new lo(this.query,t.Xa,u,f,t.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new f_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Ut(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return t.forEach(r=>{this.Ya.has(r)||n.push(new X3(r))}),this.Ya.forEach(r=>{t.has(r)||n.push(new K3(r))}),n}au(t){this.Ha=t.$s,this.Ya=Ut();const n=this.tu(t.documents);return this.applyChanges(n,!0)}uu(){return lo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const og="SyncEngine";class uS{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class cS{constructor(t){this.key=t,this.cu=!1}}class hS{constructor(t,n,r,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new Kr(m=>c3(m),Qh),this.Pu=new Map,this.Tu=new Set,this.Iu=new fe(St.comparator),this.Eu=new Map,this.du=new $m,this.Au={},this.Ru=new Map,this.Vu=oo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function fS(i,t,n=!0){const r=e4(i);let o;const u=r.hu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await $3(r,t,n,!0),o}async function dS(i,t){const n=e4(i);await $3(n,t,!0,!1)}async function $3(i,t,n,r){const o=await Ob(i.localStore,Ti(t)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await mS(i,t,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&U3(i.remoteStore,o),m}async function mS(i,t,n,r,o){i.fu=(b,T,R)=>async function(P,N,q,J){let B=N.view.tu(q);B.Cs&&(B=await a_(P.localStore,N.query,!1).then(({documents:D})=>N.view.tu(D,B)));const H=J&&J.targetChanges.get(N.targetId),et=J&&J.targetMismatches.get(N.targetId)!=null,tt=N.view.applyChanges(B,P.isPrimaryClient,H,et);return p_(P,N.targetId,tt.ou),tt.snapshot}(i,b,T,R);const u=await a_(i.localStore,t,!0),f=new lS(t,u.$s),m=f.tu(u.documents),y=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,y);p_(i,n,g.ou);const v=new uS(t,n,f);return i.hu.set(t,v),i.Pu.has(n)?i.Pu.get(n).push(t):i.Pu.set(n,[t]),g.snapshot}async function gS(i,t,n){const r=Dt(i),o=r.hu.get(t),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(f=>!Qh(f,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await mm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&tg(r.remoteStore,o.targetId),ym(r,o.targetId)}).catch(go)):(ym(r,o.targetId),await mm(r.localStore,o.targetId,!0))}async function pS(i,t){const n=Dt(i),r=n.hu.get(t),o=n.Pu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tg(n.remoteStore,r.targetId))}async function yS(i,t,n){const r=AS(i);try{const o=await function(f,m){const y=Dt(f),g=Oe.now(),v=m.reduce((R,I)=>R.add(I.key),Ut());let b,T;return y.persistence.runTransaction("Locally write mutations","readwrite",R=>{let I=rs(),P=Ut();return y.Bs.getEntries(R,v).next(N=>{I=N,I.forEach((q,J)=>{J.isValidDocument()||(P=P.add(q))})}).next(()=>y.localDocuments.getOverlayedDocuments(R,I)).next(N=>{b=N;const q=[];for(const J of m){const B=O8(J,b.get(J.key).overlayedDocument);B!=null&&q.push(new Ws(J.key,B,i3(B.value.mapValue),bi.exists(!0)))}return y.mutationQueue.addMutationBatch(R,g,q,m)}).next(N=>{T=N;const q=N.applyToLocalDocumentSet(b,P);return y.documentOverlayCache.saveOverlays(R,N.batchId,q)})}).then(()=>({batchId:T.batchId,changes:d3(b)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let g=f.Au[f.currentUser.toKey()];g||(g=new fe(Nt)),g=g.insert(m,y),f.Au[f.currentUser.toKey()]=g}(r,o.batchId,n),await _u(r,o.changes),await Wh(r.remoteStore)}catch(o){const u=rg(o,"Failed to persist write");n.reject(u)}}async function Z3(i,t){const n=Dt(i);try{const r=await Db(n.localStore,t);t.targetChanges.forEach((o,u)=>{const f=n.Eu.get(u);f&&($t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?$t(f.cu,14607):o.removedDocuments.size>0&&($t(f.cu,42227),f.cu=!1))}),await _u(n,r,t)}catch(r){await go(r)}}function g_(i,t,n){const r=Dt(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.hu.forEach((u,f)=>{const m=f.view.Fa(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Dt(f);y.onlineState=m;let g=!1;y.queries.forEach((v,b)=>{for(const T of b.Sa)T.Fa(m)&&(g=!0)}),g&&ag(y)}(r.eventManager,t),o.length&&r.lu.Y_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _S(i,t,n){const r=Dt(i);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Eu.get(t),u=o&&o.key;if(u){let f=new fe(St.comparator);f=f.insert(u,sn.newNoDocument(u,It.min()));const m=Ut().add(u),y=new $h(It.min(),new Map,new fe(Nt),f,m);await Z3(r,y),r.Iu=r.Iu.remove(u),r.Eu.delete(t),lg(r)}else await mm(r.localStore,t,!1).then(()=>ym(r,t,n)).catch(go)}async function vS(i,t){const n=Dt(i),r=t.batch.batchId;try{const o=await Ib(n.localStore,t);W3(n,r,null),J3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _u(n,o)}catch(o){await go(o)}}async function ES(i,t,n){const r=Dt(i);try{const o=await function(f,m){const y=Dt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return y.mutationQueue.lookupMutationBatch(g,m).next(b=>($t(b!==null,37113),v=b.keys(),y.mutationQueue.removeMutationBatch(g,b))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,v,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>y.localDocuments.getDocuments(g,v))})}(r.localStore,t);W3(r,t,n),J3(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _u(r,o)}catch(o){await go(o)}}function J3(i,t){(i.Ru.get(t)||[]).forEach(n=>{n.resolve()}),i.Ru.delete(t)}function W3(i,t,n){const r=Dt(i);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),r.Au[r.currentUser.toKey()]=o}}function ym(i,t,n=null){i.sharedClientState.removeLocalQueryTarget(t);for(const r of i.Pu.get(t))i.hu.delete(r),n&&i.lu.gu(r,n);i.Pu.delete(t),i.isPrimaryClient&&i.du.Hr(t).forEach(r=>{i.du.containsKey(r)||t4(i,r)})}function t4(i,t){i.Tu.delete(t.path.canonicalString());const n=i.Iu.get(t);n!==null&&(tg(i.remoteStore,n),i.Iu=i.Iu.remove(t),i.Eu.delete(n),lg(i))}function p_(i,t,n){for(const r of n)r instanceof K3?(i.du.addReference(r.key,t),TS(i,r)):r instanceof X3?(gt(og,"Document no longer in limbo: "+r.key),i.du.removeReference(r.key,t),i.du.containsKey(r.key)||t4(i,r.key)):Ct(19791,{pu:r})}function TS(i,t){const n=t.key,r=n.path.canonicalString();i.Iu.get(n)||i.Tu.has(r)||(gt(og,"New document in limbo: "+n),i.Tu.add(r),lg(i))}function lg(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const t=i.Tu.values().next().value;i.Tu.delete(t);const n=new St(ue.fromString(t)),r=i.Vu.next();i.Eu.set(r,new cS(n)),i.Iu=i.Iu.insert(n,r),U3(i.remoteStore,new Us(Ti(Fh(n.path)),r,"TargetPurposeLimboResolution",Bh.le))}}async function _u(i,t,n){const r=Dt(i),o=[],u=[],f=[];r.hu.isEmpty()||(r.hu.forEach((m,y)=>{f.push(r.fu(y,t,n).then(g=>{var v;if((g||n)&&r.isPrimaryClient){const b=g?!g.fromCache:(v=n==null?void 0:n.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Jm.Rs(y.targetId,g);u.push(b)}}))}),await Promise.all(f),r.lu.Y_(o),await async function(y,g){const v=Dt(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>at.forEach(g,T=>at.forEach(T.ds,R=>v.persistence.referenceDelegate.addReference(b,T.targetId,R)).next(()=>at.forEach(T.As,R=>v.persistence.referenceDelegate.removeReference(b,T.targetId,R)))))}catch(b){if(!po(b))throw b;gt(Wm,"Failed to update sequence numbers: "+b)}for(const b of g){const T=b.targetId;if(!b.fromCache){const R=v.xs.get(T),I=R.snapshotVersion,P=R.withLastLimboFreeSnapshotVersion(I);v.xs=v.xs.insert(T,P)}}}(r.localStore,u))}async function bS(i,t){const n=Dt(i);if(!n.currentUser.isEqual(t)){gt(og,"User change. New user:",t.toKey());const r=await L3(n.localStore,t);n.currentUser=t,function(u,f){u.Ru.forEach(m=>{m.forEach(y=>{y.reject(new Et(ot.CANCELLED,f))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await _u(n,r.ks)}}function SS(i,t){const n=Dt(i),r=n.Eu.get(t);if(r&&r.cu)return Ut().add(r.key);{let o=Ut();const u=n.Pu.get(t);if(!u)return o;for(const f of u){const m=n.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function e4(i){const t=Dt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Z3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=SS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_S.bind(null,t),t.lu.Y_=aS.bind(null,t.eventManager),t.lu.gu=oS.bind(null,t.eventManager),t}function AS(i){const t=Dt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ES.bind(null,t),t}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return xb(this.persistence,new wb,t.initialUser,this.serializer)}Su(t){return new N3(Zm.fi,this.serializer)}bu(t){return new Lb}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class wS extends Rh{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){$t(this.persistence.referenceDelegate instanceof wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cb(r,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new N3(r=>wh.fi(r,n),this.serializer)}}class _m{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bS.bind(null,this.syncEngine),await iS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rS}()}createDatastore(t){const n=Zh(t.databaseInfo.databaseId),r=function(u){return new zb(u)}(t.databaseInfo);return function(u,f,m,y){return new Gb(u,f,m,y)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,o,u,f,m){return new Qb(r,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,n=>g_(this.syncEngine,n,0),function(){return u_.C()?new u_:new kb}())}createSyncEngine(t,n){return function(o,u,f,m,y,g,v){const b=new hS(o,u,f,m,y,g);return v&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(o){const u=Dt(o);gt(Fr,"RemoteStore shutting down."),u.da.add(5),await yu(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_m.provider={build:()=>new _m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):ss("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class CS{constructor(t,n,r,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Yv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{gt(Zs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(gt(Zs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=rg(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function V1(i,t){i.asyncQueue.verifyOperationInProgress(),gt(Zs,"Initializing OfflineComponentProvider");const n=i.configuration;await t.initialize(n);let r=n.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await L3(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function y_(i,t){i.asyncQueue.verifyOperationInProgress();const n=await RS(i);gt(Zs,"Initializing OnlineComponentProvider"),await t.initialize(n,i.configuration),i.setCredentialChangeListener(r=>h_(t.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>h_(t.remoteStore,o)),i._onlineComponents=t}async function RS(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){gt(Zs,"Using user provided OfflineComponentProvider");try{await V1(i,i._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===ot.FAILED_PRECONDITION||o.code===ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;io("Error using user provided cache. Falling back to memory cache: "+n),await V1(i,new Rh)}}else gt(Zs,"Using default OfflineComponentProvider"),await V1(i,new wS(void 0));return i._offlineComponents}async function i4(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(gt(Zs,"Using user provided OnlineComponentProvider"),await y_(i,i._uninitializedComponentsProvider._online)):(gt(Zs,"Using default OnlineComponentProvider"),await y_(i,new _m))),i._onlineComponents}function xS(i){return i4(i).then(t=>t.syncEngine)}async function vm(i){const t=await i4(i),n=t.eventManager;return n.onListen=fS.bind(null,t.syncEngine),n.onUnlisten=gS.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=dS.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=pS.bind(null,t.syncEngine),n}function IS(i,t,n={}){const r=new Gs;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,g){const v=new n4({next:T=>{v.xu(),f.enqueueAndForget(()=>Q3(u,b));const R=T.docs.has(m);!R&&T.fromCache?g.reject(new Et(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&y&&y.source==="server"?g.reject(new Et(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new Y3(Fh(m.path),v,{includeMetadataChanges:!0,Qa:!0});return F3(u,b)}(await vm(i),i.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(i,t,n){if(!n)throw new Et(ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function DS(i,t,n,r){if(t===!0&&r===!0)throw new Et(ot.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function v_(i){if(!St.isDocumentKey(i))throw new Et(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function E_(i){if(St.isDocumentKey(i))throw new Et(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ug(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Ct(12329,{type:typeof i})}function es(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Et(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ug(i);throw new Et(ot.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="firestore.googleapis.com",T_=!0;class b_{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Et(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a4,this.ssl=T_}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:T_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=O3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<lb)throw new Et(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}DS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s4((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Et(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Et(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Et(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tf{constructor(t,n,r,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Et(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Et(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new j7;switch(r.type){case"firstParty":return new q7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Et(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=__.get(n);r&&(gt("ComponentProvider","Removing Datastore"),__.delete(n),r.terminate())}(this),Promise.resolve()}}function VS(i,t,n,r={}){var o;i=es(i,tf);const u=jm(t),f=i._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),y=`${t}:${n}`;u&&(hT(`https://${y}`),gT("Firestore",!0)),f.host!==a4&&f.host!==y&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},f),{host:y,ssl:u,emulatorOptions:r});if(!mh(g,m)&&(i._setSettings(g),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=nn.MOCK_USER;else{v=fT(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Et(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new nn(T)}i._authCredentials=new U7(new Fv(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ef(this.firestore,t,this._query)}}class _n{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _n(this.firestore,t,this._key)}}class Fs extends ef{constructor(t,n,r){super(t,n,Fh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _n(this.firestore,null,new St(t))}withConverter(t){return new Fs(this.firestore,t,this._path)}}function MS(i,t,...n){if(i=ns(i),r4("collection","path",t),i instanceof tf){const r=ue.fromString(t,...n);return E_(r),new Fs(i,null,r)}{if(!(i instanceof _n||i instanceof Fs))throw new Et(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ue.fromString(t,...n));return E_(r),new Fs(i.firestore,null,r)}}function nf(i,t,...n){if(i=ns(i),arguments.length===1&&(t=Yv.newId()),r4("doc","path",t),i instanceof tf){const r=ue.fromString(t,...n);return v_(r),new _n(i,null,new St(r))}{if(!(i instanceof _n||i instanceof Fs))throw new Et(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ue.fromString(t,...n));return v_(r),new _n(i.firestore,i instanceof Fs?i.converter:null,new St(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="AsyncQueue";class A_{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new P3(this,"async_queue_retry"),this.rc=()=>{const r=D1();r&&gt(S_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const n=D1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=D1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Gs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!po(t))throw t;gt(S_,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,ss("INTERNAL UNHANDLED ERROR: ",w_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(t,n,r){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const o=sg.createAndSchedule(this,t,n,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Ct(47125,{cc:w_(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function w_(i){let t=i.message||"";return i.stack&&(t=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(i){return function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class uo extends tf{constructor(t,n,r,o){super(t,n,r,o),this.type="firestore",this._queue=new A_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new A_(t),this._firestoreClient=void 0,await t}}}function OS(i,t){const n=typeof i=="object"?i:w7(),r=typeof i=="string"?i:_h,o=E7(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=uT("firestore");u&&VS(o,...u)}return o}function cg(i){if(i._terminated)throw new Et(ot.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||NS(i),i._firestoreClient}function NS(i){var t,n,r;const o=i._freezeSettings(),u=function(m,y,g,v){return new i8(m,y,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,s4(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new CS(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(t){this._byteString=t}static fromBase64String(t){try{return new co($e.fromBase64String(t))}catch(n){throw new Et(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new co($e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Et(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Et(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Et(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=/^__.*__$/;class kS{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Ws(t,this.data,this.fieldMask,n,this.fieldTransforms):new gu(t,this.data,n,this.fieldTransforms)}}class o4{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Ws(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function l4(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ic:i})}}class mg{constructor(t,n,r,o,u,f){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new mg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.dc({path:r,Rc:!1});return o.Vc(t),o}mc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return xh(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(l4(this.Ic)&&LS.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class PS{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Zh(t)}bc(t,n,r,o=!1){return new mg({Ic:t,methodName:n,wc:r,path:Xe.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u4(i){const t=i._freezeSettings(),n=Zh(i._databaseId);return new PS(i._databaseId,!!t.ignoreUndefinedProperties,n)}function jS(i,t,n,r,o,u={}){const f=i.bc(u.merge||u.mergeFields?2:0,t,n,o);gg("Data must be an object, but it was:",f,r);const m=c4(r,f);let y,g;if(u.merge)y=new xn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const v=[];for(const b of u.mergeFields){const T=Em(t,b,n);if(!f.contains(T))throw new Et(ot.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);f4(v,T)||v.push(T)}y=new xn(v),g=f.fieldTransforms.filter(b=>y.covers(b.field))}else y=null,g=f.fieldTransforms;return new kS(new yn(m),y,g)}class rf extends hg{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rf}}function US(i,t,n,r){const o=i.bc(1,t,n);gg("Data must be an object, but it was:",o,r);const u=[],f=yn.empty();Js(r,(y,g)=>{const v=pg(t,y,n);g=ns(g);const b=o.mc(v);if(g instanceof rf)u.push(v);else{const T=af(g,b);T!=null&&(u.push(v),f.set(v,T))}});const m=new xn(u);return new o4(f,m,o.fieldTransforms)}function zS(i,t,n,r,o,u){const f=i.bc(1,t,n),m=[Em(t,r,n)],y=[o];if(u.length%2!=0)throw new Et(ot.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(Em(t,u[T])),y.push(u[T+1]);const g=[],v=yn.empty();for(let T=m.length-1;T>=0;--T)if(!f4(g,m[T])){const R=m[T];let I=y[T];I=ns(I);const P=f.mc(R);if(I instanceof rf)g.push(R);else{const N=af(I,P);N!=null&&(g.push(R),v.set(R,N))}}const b=new xn(g);return new o4(v,b,f.fieldTransforms)}function af(i,t){if(h4(i=ns(i)))return gg("Unsupported field value:",t,i),c4(i,t);if(i instanceof hg)return function(r,o){if(!l4(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let y=af(m,o.fc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(i,t)}return function(r,o){if((r=ns(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R8(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Oe.fromDate(r);return{timestampValue:Ah(o.serializer,u)}}if(r instanceof Oe){const u=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(o.serializer,u)}}if(r instanceof fg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof co)return{bytesValue:C3(o.serializer,r._byteString)};if(r instanceof _n){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Xm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof dg)return function(f,m){return{mapValue:{fields:{[e3]:{stringValue:n3},[vh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Qm(m.serializer,g)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${ug(r)}`)}(i,t)}function c4(i,t){const n={};return Xv(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Js(i,(r,o)=>{const u=af(o,t.Ac(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function h4(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Oe||i instanceof fg||i instanceof co||i instanceof _n||i instanceof hg||i instanceof dg)}function gg(i,t,n){if(!h4(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=ug(n);throw r==="an object"?t.gc(i+" a custom object"):t.gc(i+" "+r)}}function Em(i,t,n){if((t=ns(t))instanceof sf)return t._internalPath;if(typeof t=="string")return pg(i,t);throw xh("Field path arguments must be of type string or ",i,!1,void 0,n)}const BS=new RegExp("[~\\*/\\[\\]]");function pg(i,t,n){if(t.search(BS)>=0)throw xh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new sf(...t.split("."))._internalPath}catch{throw xh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function xh(i,t,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new Et(ot.INVALID_ARGUMENT,m+i+y)}function f4(i,t){return i.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t,n,r,o,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new qS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(m4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qS extends d4{data(){return super.data()}}function m4(i,t){return typeof t=="string"?pg(i,t):t instanceof sf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Et(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GS{convertValue(t,n="none"){switch(Xs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ee(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ks(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ct(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Js(t,(o,u)=>{r[o]=this.convertValue(u,n)}),r}convertVectorValue(t){var n,r,o;const u=(o=(r=(n=t.fields)===null||n===void 0?void 0:n[vh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>Ee(f.doubleValue));return new dg(u)}convertGeoPoint(t){return new fg(Ee(t.latitude),Ee(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Hh(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(su(t));default:return null}}convertTimestamp(t){const n=Ys(t);return new Oe(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ue.fromString(t);$t(M3(r),9688,{name:t});const o=new ru(r.get(1),r.get(3)),u=new St(r.popFirst(5));return o.isEqual(n)||ss(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(i,t,n){let r;return r=i?i.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class g4 extends d4{constructor(t,n,r,o,u,f){super(t,n,r,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(m4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class oh extends g4{data(t={}){return super.data(t)}}class QS{constructor(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new kl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new oh(this._firestore,this._userDataWriter,r.key,r,new kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Et(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),v=f.indexOf(m.doc.key)),{type:YS(m.type),doc:y,oldIndex:g,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YS(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(i){i=es(i,_n);const t=es(i.firestore,uo);return IS(cg(t),i._key).then(n=>_4(t,i,n))}class p4 extends GS{constructor(t){super(),this.firestore=t}convertBytes(t){return new co(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function XS(i,t,n,...r){i=es(i,_n);const o=es(i.firestore,uo),u=u4(o);let f;return f=typeof(t=ns(t))=="string"||t instanceof sf?zS(u,"updateDoc",i._key,t,n,r):US(u,"updateDoc",i._key,t),y4(o,[f.toMutation(i._key,bi.exists(!0))])}function $S(i,t){const n=es(i.firestore,uo),r=nf(i),o=FS(i.converter,t);return y4(n,[jS(u4(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,bi.exists(!1))]).then(()=>r)}function ZS(i,...t){var n,r,o;i=ns(i);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof t[f]!="object"||C_(t[f])||(u=t[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(C_(t[f])){const b=t[f];t[f]=(n=b.next)===null||n===void 0?void 0:n.bind(b),t[f+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),t[f+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let y,g,v;if(i instanceof _n)g=es(i.firestore,uo),v=Fh(i._key.path),y={next:b=>{t[f]&&t[f](_4(g,i,b))},error:t[f+1],complete:t[f+2]};else{const b=es(i,ef);g=es(b.firestore,uo),v=b._query;const T=new p4(g);y={next:R=>{t[f]&&t[f](new QS(g,T,b,R))},error:t[f+1],complete:t[f+2]},HS(i._query)}return function(T,R,I,P){const N=new n4(P),q=new Y3(R,N,I);return T.asyncQueue.enqueueAndForget(async()=>F3(await vm(T),q)),()=>{N.xu(),T.asyncQueue.enqueueAndForget(async()=>Q3(await vm(T),q))}}(cg(g),v,m,y)}function y4(i,t){return function(r,o){const u=new Gs;return r.asyncQueue.enqueueAndForget(async()=>yS(await xS(r),o,u)),u.promise}(cg(i),t)}function _4(i,t,n){const r=n.docs.get(t._key),o=new p4(i);return new g4(i,o,t._key,r,new kl(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){mo=o})(A7),ph(new eu("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new uo(new z7(r.getProvider("auth-internal")),new H7(f,r.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Et(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(g.options.projectId,v)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Wa(Dy,Vy,t),Wa(Dy,Vy,"esm2017")})();const JS={apiKey:"AIzaSyA1YHZuK7xQzrGf2sVPo8Qax__FqLaFg_g",authDomain:"boop-chat.firebaseapp.com",projectId:"boop-chat",storageBucket:"boop-chat.firebasestorage.app",messagingSenderId:"86390385381",appId:"1:86390385381:web:899e240ed5dedab2a8c20c",measurementId:"G-R49YGVYMFQ"},WS=Lv(JS),of=OS(WS),tA=async i=>(await $S(MS(of,"sessions"),i)).id,eA=async i=>{const t=await KS(nf(of,"sessions",i));return t.exists()?(console.log("The data has been found at Firestore!"),t.data()):(console.log("The data doesn't exist at Firestore!"),null)},nA=async(i,t)=>{XS(nf(of,"sessions",i),t)},iA=async(i,t,n)=>{const r=nf(of,"sessions",i),o=ZS(r,async u=>{var m;if(!u.exists())return;const f=u.data();f.receiverDescription&&((m=f.receiverCandidates)==null?void 0:m.length)>0&&(console.log("Receiver info available:",f),n.current=f.receiverName,t(f),o())});return o},R_=async(i,t,n,r,o,u,f,m,y)=>{console.log(t.current),t.current.onicecandidate=v=>{v.candidate?(console.log("Ice candidate found! Candidate = ",v.candidate),console.log(u.current),u.current.push(v.candidate.toJSON())):(console.log("The ice gathering state might have been completed by this time!"),console.log("State = ",t.current.iceGatheringState))},t.current.onicecandidateerror=v=>{console.warn("ICE candidate error:",v.errorCode,v.port,v.url)};const g=t.current.getConfiguration();if(console.log("ICE servers configured on this PC:",g.iceServers),i==="sender"){t.current.addTransceiver("video",{direction:"sendrecv"}),t.current.addTransceiver("audio",{direction:"sendrecv"}),n.current=t.current.createDataChannel("chat"),r.current=t.current.createDataChannel("image"),o.current=t.current.createDataChannel("video"),n.current.onopen=()=>{console.log("The data channel has been established!"),f(!0)},r.current.onopen=()=>{console.log("The image channel has been established!")},o.current.onopen=()=>{console.log("The video channel has been established!")};let v=await t.current.createOffer();console.log("The offer has been created!"),await t.current.setLocalDescription(v),console.log("The local description has been added!")}else{console.log(t.current);let v=await eA(y);if(!v)return null;m.current=v.senderName,await sA(t,v),console.log("The state of the peer connection = ",t.current.iceGatheringState)}console.log("The initial setup of the connection has been established.")},sA=async(i,t)=>{console.log(t.senderDescription),await i.current.setRemoteDescription(t.senderDescription),console.log("The remote description has been added!"),i.current.getTransceivers().forEach(o=>{o.direction="sendrecv"});let r=await i.current.createAnswer();console.log("The answer has been created!"),await i.current.setLocalDescription(r),console.log("The local description has been added!");for(const o of t.senderCandidates)try{await i.current.addIceCandidate(o)}catch(u){console.error("Error adding ICE candidate:",u)}};async function rA(i,t,n,r){console.log("Starting the createLink function! At the beginning of the function, the state = ",i.iceGatheringState),console.log("The iceCandidate object looks like this: ",t.current);let o=await tA({senderName:n,senderDescription:{type:i.current.localDescription.type,sdp:i.current.localDescription.sdp},senderCandidates:t.current,receiverName:"",receiverDescription:"",receiverCandidates:""});return console.log("The session has been added to Firebase by the sender! Now, waiting for the receiver!"),iA(o,async u=>{await i.current.setRemoteDescription(new RTCSessionDescription(u.receiverDescription));for(const f of u.receiverCandidates)await i.current.addIceCandidate(new RTCIceCandidate(f))},r),o}async function aA(i,t,n,r){return console.log("After the waiting, the state = ",i.current.iceGatheringState),await nA(r,{receiverName:n,receiverDescription:{type:i.current.localDescription.type,sdp:i.current.localDescription.sdp},receiverCandidates:t.current}),"success"}const oA=new URLSearchParams(window.location.search),Ls=oA.get("link"),lA=()=>{const{peerConnection:i,iceCandidates:t,dataChannel:n,imageChannel:r,videoChannel:o,peerName:u,setConnected:f}=K.useContext(Ze),{showNotification:m}=mu(),[y,g]=K.useState(!1),v=K.useRef(null);function b(R){R.preventDefault(),navigator.clipboard.writeText(R.target.elements.link.value),m("The link has been copied!")}const T=async R=>{if(R.preventDefault(),g(!0),Ls){let I=await aA(i,t,v.current.value,Ls);console.log(I),I?I=="success"&&(i.current.ondatachannel=P=>{P.channel.label==="chat"&&(n.current=P.channel,console.log("The data channel has been established!"),f(!0)),P.channel.label==="image"&&(r.current=P.channel,console.log("The image channel has been established!")),P.channel.label==="video"&&(o.current=P.channel,console.log("The video channel has been established!"))}):alert("The link you gave doesn't exist.")}else{let I=await rA(i,t,v.current.value,u);v.current.value=`https://www.mukesharyal.com.np/boop?link=${I}`,v.current.disabled=!0,navigator.clipboard.writeText(v.current.value),m("The link has been copied!")}};return K.useEffect(()=>{R_(Ls?"receiver":"sender",i,n,r,o,t,f,u,Ls)},[]),w.jsxs(w.Fragment,{children:[w.jsx(YE,{}),w.jsx("main",{className:Vl.mainContainer,children:w.jsx("section",{className:Vl.inputCard,children:y?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:Vl.loaderWrapper,children:w.jsx("div",{className:Vl.loader})}),w.jsx("h1",{children:Ls?"Joining the chat":"Waiting for other person to join"}),!Ls&&w.jsxs("form",{onSubmit:b,children:[w.jsx("input",{autoFocus:!0,spellCheck:!1,autoComplete:"off",name:"link",ref:v,title:"Copy this link",className:Vl.linkInput}),w.jsx("br",{}),w.jsx("button",{name:"copyLinkButton",children:"Copy Link"})]})]}):w.jsxs(w.Fragment,{children:[w.jsxs("h1",{children:["Welcome to Boop.",w.jsx("br",{}),"Let's Get Started!"]}),w.jsxs("form",{onSubmit:T,children:[w.jsx("input",{name:"name",required:!0,minLength:2,maxLength:20,autoComplete:"off",type:"text",spellCheck:!1,placeholder:"Your Name",title:"Enter your name",id:"name",ref:v}),w.jsx("br",{}),Ls?w.jsx("button",{type:"submit",children:"Join Chat"}):w.jsx("button",{type:"submit",children:"Create Link"})]})]})})})]})},uA="_chatContainer_us48c_1",cA={chatContainer:uA},hA="_actionList_1f49s_1",fA={actionList:hA};function dA(i){const t=Be.c(20),{dataChannel:n}=K.useContext(Ze),{selectedMessage:r}=K.useContext(Qn),o=Lt(pA),u=Lt(gA),f=Lt(mA),{showNotification:m}=mu();let y;t[0]===Symbol.for("react.memo_cache_sentinel")?(y={y:100,opacity:0},t[0]=y):y=t[0];let g;t[1]===Symbol.for("react.memo_cache_sentinel")?(g={y:0,opacity:1,config:{duration:200}},t[1]=g):g=t[1];let v;t[2]===Symbol.for("react.memo_cache_sentinel")?(v={from:y,enter:g,leave:{y:100,opacity:0,config:{duration:200}}},t[2]=v):v=t[2];const b=Uh(f,v);let T;t[3]!==r||t[4]!==m?(T=async()=>{r.current.type==="text"?(navigator.clipboard.writeText(r.current.content),m("The message has been copied!")):m("This message cannot be copied!")},t[3]=r,t[4]=m,t[5]=T):T=t[5];const R=T;let I;t[6]!==r||t[7]!==o?(I=()=>{o(r.current)},t[6]=r,t[7]=o,t[8]=I):I=t[8];const P=I;let N;t[9]!==n||t[10]!==u||t[11]!==r?(N=()=>{if(r.current.sentId===null)u(r.current.sentId,r.current.receivedId);else{const H={type:"delete",sentId:r.current.sentId};n.current.send(JSON.stringify(H))}},t[9]=n,t[10]=u,t[11]=r,t[12]=N):N=t[12];const q=N;let J;t[13]!==R||t[14]!==q||t[15]!==P?(J=(H,et)=>et?w.jsxs(pn.ul,{className:fA.actionList,style:{...H},children:[w.jsxs("li",{onClick:P,children:[w.jsxs("svg",{fill:"#000000",width:30,height:30,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("title",{children:"reply"}),w.jsx("path",{d:"M3.488 15.136q0 0.96 0.8 1.472l10.72 7.136q0.416 0.288 0.896 0.32t0.928-0.224 0.704-0.672 0.256-0.896v-3.584q3.456 0 6.208 1.984t3.872 5.152q0.64-1.792 0.64-3.552 0-2.912-1.44-5.376t-3.904-3.904-5.376-1.44v-3.584q0-0.48-0.256-0.896t-0.704-0.672-0.928-0.224-0.896 0.32l-10.72 7.136q-0.8 0.512-0.8 1.504z"})]}),"Reply"]}),w.jsxs("li",{onClick:R,children:[w.jsxs("svg",{width:30,height:30,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z",fill:"#292D32"}),w.jsx("path",{d:"M17.0998 2H12.8998C9.81668 2 8.37074 3.09409 8.06951 5.73901C8.00649 6.29235 8.46476 6.75 9.02167 6.75H11.0998C15.2998 6.75 17.2498 8.7 17.2498 12.9V14.9781C17.2498 15.535 17.7074 15.9933 18.2608 15.9303C20.9057 15.629 21.9998 14.1831 21.9998 11.1V6.9C21.9998 3.4 20.5998 2 17.0998 2Z",fill:"#292D32"})]}),"Copy"]}),w.jsxs("li",{onClick:q,children:[w.jsx("svg",{width:30,height:30,viewBox:"-0.5 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"out",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:w.jsx("path",{d:"M4.91666667,14.8888889 C4.91666667,15.3571429 5.60416667,16 6.0625,16 L12.9375,16 C13.3958333,16 14.0833333,15.3571429 14.0833333,14.8888889 L14.0833333,6 L4.91666667,6 L4.91666667,14.8888889 L4.91666667,14.8888889 L4.91666667,14.8888889 Z M15,3.46500003 L12.5555556,3.46500003 L11.3333333,2 L7.66666667,2 L6.44444444,3.46500003 L4,3.46500003 L4,4.93000007 L15,4.93000007 L15,3.46500003 L15,3.46500003 L15,3.46500003 Z",id:"path",fill:"#000000","sketch:type":"MSShapeGroup"})})}),"Delete"]})]}):null,t[13]=R,t[14]=q,t[15]=P,t[16]=J):J=t[16];let B;return t[17]!==J||t[18]!==b?(B=b(J),t[17]=J,t[18]=b,t[19]=B):B=t[19],B}function mA(i){return i.actionsShown}function gA(i){return i.removeMessage}function pA(i){return i.setReplying}const yA="_reactionList_1eaod_1",_A="_selectedReaction_1eaod_26",x_={reactionList:yA,selectedReaction:_A},vA=["","","","","",""];function EA(){const i=Be.c(12),{dataChannel:t}=K.useContext(Ze),{selectedMessage:n,pointerPosition:r}=K.useContext(Qn),o=Lt(TA);let u;i[0]===Symbol.for("react.memo_cache_sentinel")?(u={scale:0,opacity:0},i[0]=u):u=i[0];let f;i[1]===Symbol.for("react.memo_cache_sentinel")?(f={scale:1,opacity:1,config:{tension:200,friction:15}},i[1]=f):f=i[1];let m;i[2]===Symbol.for("react.memo_cache_sentinel")?(m={from:u,enter:f,leave:{scale:0,opacity:0,config:{tension:400,friction:20}}},i[2]=m):m=i[2];const y=Uh(o,m);let g;if(i[3]!==t||i[4]!==r.current.x||i[5]!==r.current.y||i[6]!==n||i[7]!==y){let v=r.current.y-70,b=r.current.x-90;v<0&&(v=10),b<0&&(b=10);let T;i[9]!==t||i[10]!==n?(T=I=>{I===n.current.reaction&&(I=-1);const N={type:"reaction",id:n.current.receivedId,reaction:I};t.current.send(JSON.stringify(N))},i[9]=t,i[10]=n,i[11]=T):T=i[11];const R=T;g=y((I,P)=>P?w.jsx(pn.ul,{className:x_.reactionList,style:{top:v,left:b,...I},children:vA.map((N,q)=>w.jsx("li",{onClick:()=>{R(q)},className:n.current.reaction===q?x_.selectedReaction:"",children:N},q))}):null),i[3]=t,i[4]=r.current.x,i[5]=r.current.y,i[6]=n,i[7]=y,i[8]=g}else g=i[8];return g}function TA(i){return i.reactionsShown}const bA="_replyInfo_oczyu_1",SA="_replyingTo_oczyu_34",AA="_selectedMessage_oczyu_39",Xc={replyInfo:bA,replyingTo:SA,selectedMessage:AA};function wA(){const i=Be.c(15),{peerName:t}=K.useContext(Ze),{selectedMessage:n}=K.useContext(Qn),r=Lt(RA),o=Lt(CA),u=n.current.receivedId===null?"yourself":t.current,f=n.current.type==="image"?"Image":n.current.content;let m;i[0]!==o?(m=()=>{o(null)},i[0]=o,i[1]=m):m=i[1];const y=m;if(!r)return null;let g;i[2]!==u?(g=w.jsxs("p",{className:Xc.replyingTo,children:["Replying to ",u]}),i[2]=u,i[3]=g):g=i[3];let v;i[4]!==f?(v=w.jsx("p",{className:Xc.selectedMessage,children:f}),i[4]=f,i[5]=v):v=i[5];let b;i[6]!==g||i[7]!==v?(b=w.jsxs("div",{className:Xc.messageContents,children:[g,v]}),i[6]=g,i[7]=v,i[8]=b):b=i[8];let T;i[9]===Symbol.for("react.memo_cache_sentinel")?(T=w.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"}),i[9]=T):T=i[9];let R;i[10]!==y?(R=w.jsx("svg",{width:16,height:16,onClick:y,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:T}),i[10]=y,i[11]=R):R=i[11];let I;return i[12]!==b||i[13]!==R?(I=w.jsxs("div",{className:Xc.replyInfo,children:[b,R]}),i[12]=b,i[13]=R,i[14]=I):I=i[14],I}function CA(i){return i.setReplying}function RA(i){return i.replying}const xA="_sent_1wqkl_15",IA="_received_1wqkl_19",DA="_actionsContainer_1wqkl_28",M1={sent:xA,received:IA,actionsContainer:DA};function VA(i){const t=Be.c(16),{src:n,alt:r,sent:o}=i,u=r===void 0?"image":r,f=Lt(OA),m=K.useRef(null),y=MA;let g;t[0]!==n?(g=()=>{window.open(n,"_blank")},t[0]=n,t[1]=g):g=t[1];const v=g;let b;t[2]!==f?(b=()=>{const B=m.current;if(!B)return;const H=tt=>{tt.target===B&&y()},et=()=>{f({src:null,sent:null})};return B.addEventListener("click",H),window.addEventListener("popstate",et),()=>{B.removeEventListener("click",H),window.removeEventListener("popstate",et)}},t[2]=f,t[3]=b):b=t[3];let T;t[4]===Symbol.for("react.memo_cache_sentinel")?(T=[],t[4]=T):T=t[4],K.useEffect(b,T);const R=o?M1.sent:M1.received;let I;t[5]===Symbol.for("react.memo_cache_sentinel")?(I=w.jsx("button",{onClick:y,children:w.jsx("svg",{width:24,height:24,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),t[5]=I):I=t[5];let P;t[6]===Symbol.for("react.memo_cache_sentinel")?(P=w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.163 2.819C9 3.139 9 3.559 9 4.4V11H7.803c-.883 0-1.325 0-1.534.176a.75.75 0 0 0-.266.62c.017.274.322.593.931 1.232l4.198 4.401c.302.318.453.476.63.535a.749.749 0 0 0 .476 0c.177-.059.328-.217.63-.535l4.198-4.4c.61-.64.914-.96.93-1.233a.75.75 0 0 0-.265-.62C17.522 11 17.081 11 16.197 11H15V4.4c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656C13.861 2 13.441 2 12.6 2h-1.2c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656zM5 21a1 1 0 0 0 1 1h12a1 1 0 1 0 0-2H6a1 1 0 0 0-1 1z",fill:"#000000"})}),t[6]=P):P=t[6];let N;t[7]!==v?(N=w.jsxs("div",{className:M1.actionsContainer,children:[I,w.jsx("button",{onClick:v,children:P})]}),t[7]=v,t[8]=N):N=t[8];let q;t[9]!==u||t[10]!==n?(q=w.jsx("img",{src:n,alt:u}),t[9]=u,t[10]=n,t[11]=q):q=t[11];let J;return t[12]!==R||t[13]!==N||t[14]!==q?(J=w.jsxs("dialog",{ref:m,className:R,children:[N,q]}),t[12]=R,t[13]=N,t[14]=q,t[15]=J):J=t[15],J}function MA(){window.history.back()}function OA(i){return i.setImageDialog}const lf=K.createContext(null),NA=({children:i})=>{const{peerConnection:t,remoteStream:n,videoChannel:r}=K.useContext(Ze),[o,u]=K.useState(!1),[f,m]=K.useState(!1),[y,g]=K.useState(!0),[v,b]=K.useState(!0),[T,R]=K.useState("front"),I=K.useRef(null),P=K.useRef(null),N=K.useRef(null),q=K.useRef({x:0,y:0}),J=K.useRef({x:0,y:0}),B=K.useRef(null);return K.useEffect(()=>{r.current.onmessage=et=>{let tt=JSON.parse(et.data);tt.message==="audioOn"?g(!0):tt.message==="audioOff"?g(!1):tt.message==="videoOn"?b(!0):tt.message==="videoOff"&&b(!1)},B.current=new MediaStream;const H=t.current.getTransceivers();return P.current=H.find(et=>{var tt,D,C;return((tt=et.receiver.track)==null?void 0:tt.kind)==="video"||((D=et.sender.track)==null?void 0:D.kind)==="video"||((C=et.mid)==null?void 0:C.includes("video"))}),I.current=H.find(et=>{var tt,D,C;return((tt=et.receiver.track)==null?void 0:tt.kind)==="audio"||((D=et.sender.track)==null?void 0:D.kind)==="audio"||((C=et.mid)==null?void 0:C.includes("audio"))}),()=>{var et;(et=B.current)==null||et.getTracks().forEach(tt=>{tt.stop()}),r.current.onmessage=null,console.log("Cleaning up the video call context!")}},[]),K.useEffect(()=>{(async()=>{B.current.getTracks().forEach(tt=>tt.stop()),B.current.getTracks().forEach(tt=>B.current.removeTrack(tt));const H=T==="front"?"user":"environment";(await navigator.mediaDevices.getUserMedia({video:{facingMode:H},audio:!0})).getTracks().forEach(tt=>{B.current.addTrack(tt)}),N.current==="connected"&&(P.current.sender.replaceTrack(o?B.current.getVideoTracks()[0]:null),I.current.sender.replaceTrack(f?B.current.getAudioTracks()[0]:null))})()},[T]),K.useEffect(()=>{r.current.send(JSON.stringify({message:f?"audioOn":"audioOff"}))},[f]),K.useEffect(()=>{r.current.send(JSON.stringify({message:o?"videoOn":"videoOff"}))},[o]),w.jsx(lf,{value:{audio:f,setAudio:m,video:o,setVideo:u,cameraFace:T,setCameraFace:R,remoteAudio:y,remoteVideo:v,audioTransceiver:I,videoTransceiver:P,callState:N,localStream:B,remoteStream:n,sendingVideoPin:q,receivingVideoPin:J},children:i})},LA="_navContainer_nf3oy_1",kA="_profileContainer_nf3oy_17",PA="_actionsContainer_nf3oy_31",$c={navContainer:LA,profileContainer:kA,actionsContainer:PA};function jA(){const i=Be.c(17);console.log("Chat header rendered!");const{peerName:t}=K.useContext(Ze),n=Lt(BA),r=Lt(zA),[o]=K.useState(!1);let u;i[0]===Symbol.for("react.memo_cache_sentinel")?(u={y:100,opacity:0},i[0]=u):u=i[0];let f;i[1]===Symbol.for("react.memo_cache_sentinel")?(f={y:0,opacity:1,config:{tension:300,friction:25}},i[1]=f):f=i[1];let m;i[2]===Symbol.for("react.memo_cache_sentinel")?(m={from:u,enter:f,leave:{y:100,opacity:0,config:{tension:300,friction:25}}},i[2]=m):m=i[2],Uh(o,m);let y;i[3]!==r?(y=()=>{r("calling")},i[3]=r,i[4]=y):y=i[4];const g=y,v=UA;let b;i[5]===Symbol.for("react.memo_cache_sentinel")?(b=w.jsx("img",{src:"./pp.svg",width:30,height:30,className:$c.profileImage}),i[5]=b):b=i[5];const T=t.current?t.current:"Receiver";let R;i[6]!==T?(R=w.jsxs("div",{className:$c.profileContainer,children:[b,w.jsx("p",{children:T})]}),i[6]=T,i[7]=R):R=i[7];let I;i[8]!==g||i[9]!==n?(I=n==="hidden"&&w.jsx("button",{onClick:g,children:w.jsx("svg",{width:20,height:20,viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})})}),i[8]=g,i[9]=n,i[10]=I):I=i[10];let P;i[11]===Symbol.for("react.memo_cache_sentinel")?(P=w.jsx("button",{onClick:v,children:w.jsx("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2788 2.15224C13.9085 2 13.439 2 12.5 2C11.561 2 11.0915 2 10.7212 2.15224C10.2274 2.35523 9.83509 2.74458 9.63056 3.23463C9.53719 3.45834 9.50065 3.7185 9.48635 4.09799C9.46534 4.65568 9.17716 5.17189 8.69017 5.45093C8.20318 5.72996 7.60864 5.71954 7.11149 5.45876C6.77318 5.2813 6.52789 5.18262 6.28599 5.15102C5.75609 5.08178 5.22018 5.22429 4.79616 5.5472C4.47814 5.78938 4.24339 6.1929 3.7739 6.99993C3.30441 7.80697 3.06967 8.21048 3.01735 8.60491C2.94758 9.1308 3.09118 9.66266 3.41655 10.0835C3.56506 10.2756 3.77377 10.437 4.0977 10.639C4.57391 10.936 4.88032 11.4419 4.88029 12C4.88026 12.5581 4.57386 13.0639 4.0977 13.3608C3.77372 13.5629 3.56497 13.7244 3.41645 13.9165C3.09108 14.3373 2.94749 14.8691 3.01725 15.395C3.06957 15.7894 3.30432 16.193 3.7738 17C4.24329 17.807 4.47804 18.2106 4.79606 18.4527C5.22008 18.7756 5.75599 18.9181 6.28589 18.8489C6.52778 18.8173 6.77305 18.7186 7.11133 18.5412C7.60852 18.2804 8.2031 18.27 8.69012 18.549C9.17714 18.8281 9.46533 19.3443 9.48635 19.9021C9.50065 20.2815 9.53719 20.5417 9.63056 20.7654C9.83509 21.2554 10.2274 21.6448 10.7212 21.8478C11.0915 22 11.561 22 12.5 22C13.439 22 13.9085 22 14.2788 21.8478C14.7726 21.6448 15.1649 21.2554 15.3694 20.7654C15.4628 20.5417 15.4994 20.2815 15.5137 19.902C15.5347 19.3443 15.8228 18.8281 16.3098 18.549C16.7968 18.2699 17.3914 18.2804 17.8886 18.5412C18.2269 18.7186 18.4721 18.8172 18.714 18.8488C19.2439 18.9181 19.7798 18.7756 20.2038 18.4527C20.5219 18.2105 20.7566 17.807 21.2261 16.9999C21.6956 16.1929 21.9303 15.7894 21.9827 15.395C22.0524 14.8691 21.9088 14.3372 21.5835 13.9164C21.4349 13.7243 21.2262 13.5628 20.9022 13.3608C20.4261 13.0639 20.1197 12.558 20.1197 11.9999C20.1197 11.4418 20.4261 10.9361 20.9022 10.6392C21.2263 10.4371 21.435 10.2757 21.5836 10.0835C21.9089 9.66273 22.0525 9.13087 21.9828 8.60497C21.9304 8.21055 21.6957 7.80703 21.2262 7C20.7567 6.19297 20.522 5.78945 20.2039 5.54727C19.7799 5.22436 19.244 5.08185 18.7141 5.15109C18.4722 5.18269 18.2269 5.28136 17.8887 5.4588C17.3915 5.71959 16.7969 5.73002 16.3099 5.45096C15.8229 5.17191 15.5347 4.65566 15.5136 4.09794C15.4993 3.71848 15.4628 3.45833 15.3694 3.23463C15.1649 2.74458 14.7726 2.35523 14.2788 2.15224ZM12.5 15C14.1695 15 15.5228 13.6569 15.5228 12C15.5228 10.3431 14.1695 9 12.5 9C10.8305 9 9.47716 10.3431 9.47716 12C9.47716 13.6569 10.8305 15 12.5 15Z",fill:"#1C274C"})})}),i[11]=P):P=i[11];let N;i[12]!==I?(N=w.jsxs("ul",{className:$c.actionsContainer,children:[I,P]}),i[12]=I,i[13]=N):N=i[13];let q;return i[14]!==R||i[15]!==N?(q=w.jsx(w.Fragment,{children:w.jsxs("nav",{"aria-label":"Main Navigation",className:$c.navContainer,children:[R,N]})}),i[14]=R,i[15]=N,i[16]=q):q=i[16],q}function UA(){document.body.classList.toggle("dark")}function zA(i){return i.setVideoCall}function BA(i){return i.videoCall}const qA="_chatContainer_189rb_1",HA="_chatBottom_189rb_18",I_={chatContainer:qA,chatBottom:HA},GA="_textMessage_cxig5_1",FA="_sentMessage_cxig5_31",QA="_receivedMessage_cxig5_36",YA="_sending_cxig5_41",KA="_sent_cxig5_31",XA="_deletedMessage_cxig5_49",$A="_topMessage_cxig5_55",ZA="_bottomMessage_cxig5_60",JA="_repliedMessage_cxig5_73",WA="_hasImage_cxig5_78",tw="_hasReaction_cxig5_84",ew="_emoji_cxig5_96",qn={textMessage:GA,sentMessage:FA,receivedMessage:QA,sending:YA,sent:KA,deletedMessage:XA,topMessage:$A,bottomMessage:ZA,repliedMessage:JA,hasImage:WA,hasReaction:tw,emoji:ew},nw="_reaction_1t2b5_1",iw="_sentReaction_1t2b5_11",sw="_receivedReaction_1t2b5_16",O1={reaction:nw,sentReaction:iw,receivedReaction:sw},rw=["","","","","",""];function aw(i){const t=Be.c(8),{reaction:n,origin:r}=i,[o,u]=Qr(ow);let f;t[0]!==u?(f=()=>{u.start({from:{scale:0},to:{scale:1},config:{tension:300,friction:15}})},t[0]=u,t[1]=f):f=t[1];let m;t[2]!==n?(m=[n],t[2]=n,t[3]=m):m=t[3],K.useEffect(f,m);let y;return t[4]!==r||t[5]!==n||t[6]!==o?(y=n!==-1?w.jsx(pn.span,{className:`${O1.reaction} ${r==="sent"?O1.sentReaction:O1.receivedReaction}`,style:{...o},children:rw[n]}):w.jsx(w.Fragment,{}),t[4]=r,t[5]=n,t[6]=o,t[7]=y):y=t[7],y}function ow(){return{scale:1}}const lw="_requestDiv_1axuz_1",uw="_decisionBox_1axuz_9",cw="_loading_1axuz_35",N1={requestDiv:lw,decisionBox:uw,loading:cw};function hw(i){const t=Be.c(16),{sentId:n,receivedId:r}=i,{dataChannel:o,peerName:u}=K.useContext(Ze),f=Lt(fw),{receivingImage:m}=K.useContext(Qn),{showNotification:y}=mu(),[g,v]=K.useState(!1);let b;t[0]!==o.current||t[1]!==r||t[2]!==m.current||t[3]!==n||t[4]!==y?(b=()=>{m.current===null?(o.current.send(JSON.stringify({type:"imageAccept",sentId:r,receivedId:n})),v(!0)):y("Please wait for a while!")},t[0]=o.current,t[1]=r,t[2]=m.current,t[3]=n,t[4]=y,t[5]=b):b=t[5];const T=b;let R;t[6]!==o.current||t[7]!==r||t[8]!==f||t[9]!==n?(R=()=>{o.current.send(JSON.stringify({type:"imageReject",sentId:r,receivedId:n})),f(n,r)},t[6]=o.current,t[7]=r,t[8]=f,t[9]=n,t[10]=R):R=t[10];const I=R;let P;return t[11]!==T||t[12]!==g||t[13]!==u||t[14]!==I?(P=g?w.jsxs("div",{className:N1.loading,children:[w.jsx("span",{children:"L"}),w.jsx("span",{children:"o"}),w.jsx("span",{children:"a"}),w.jsx("span",{children:"d"}),w.jsx("span",{children:"i"}),w.jsx("span",{children:"n"}),w.jsx("span",{children:"g"}),w.jsx("span",{children:""}),w.jsx("span",{children:"i"}),w.jsx("span",{children:"m"}),w.jsx("span",{children:"a"}),w.jsx("span",{children:"g"}),w.jsx("span",{children:"e"})]}):w.jsxs("div",{className:N1.requestDiv,children:[w.jsxs("div",{children:[u.current," wants to send you an image"]}),w.jsxs("div",{className:N1.decisionBox,children:[w.jsx("button",{onClick:T,children:"Accept"}),w.jsx("button",{onClick:I,children:"Reject"})]})]}),t[11]=T,t[12]=g,t[13]=u,t[14]=I,t[15]=P):P=t[15],P}function fw(i){return i.removeMessage}function dw(i){return i?new RegExp("^(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F|\\p{Emoji_Modifier_Base}(?:\\p{Emoji_Modifier})?|\\p{Extended_Pictographic})+$","u").test(i.trim()):void 0}const v4=K.memo(({message:i,prevMessage:t,nextMessage:n})=>{const{dataChannel:r}=K.useContext(Ze),o=Lt(Z=>Z.setReplying),u=Lt(Z=>Z.setActionsShown),f=Lt(Z=>Z.setReactionsShown),m=Lt(Z=>Z.setImageDialog),{chatBottom:y,pointerPosition:g,selectedMessage:v,longPressed:b,atBottomRef:T}=K.useContext(Qn),{sentId:R,receivedId:I,type:P,status:N,content:q,reaction:J,deleted:B,highlight:H,replyTo:et}=i;console.log("Rendering message ",i),console.log("And atBottomRef = ",T.current);const tt=()=>{window.history.pushState(null,"","/image"),m({src:q,sent:I===null})},D={text:()=>w.jsxs("p",{children:[" ",q," "]}),image:()=>w.jsxs("p",{children:[" ",w.jsx("img",{src:q,onClick:tt})," "]}),imageRequest:()=>w.jsx(hw,{sentId:R,receivedId:I})},[C,x]=Qr(()=>({scale:1,x:0})),L=K.useRef(null),k=K.useRef(!1),U=K.useRef(!0),V=K.useRef(0),mt=K.useRef(null);K.useEffect(()=>{T.current&&(y.current.scrollIntoView({behavior:"smooth"}),T.current=!1),x.start({from:{scale:0,opacity:0},to:[{scale:1,opacity:1}],reset:!1,config:H1.stiff})},[]),K.useEffect(()=>{if(U.current){U.current=!1;return}(async()=>(mt.current.scrollIntoView({behavior:"instant"}),await new Promise(Z=>setTimeout(Z,100)),console.log("I am executing a scroll from ",q),console.log("And the value of isFirstRender is ",U.current),x.start({from:{scale:1},to:[{scale:1.2},{scale:1}],config:H1.stiff})))()},[H]);const dt=()=>{if(R===null&&J!==1){let Z={type:"reaction",id:I,reaction:1};r.current.send(JSON.stringify(Z))}},Y=xE({onPointerDown:({event:Z})=>{k.current=!1,L.current=setTimeout(()=>{k.current||(g.current.x=Z.clientX,g.current.y=Z.clientY,b.current=!0,x.start({from:{scale:1},to:[{scale:1.1},{scale:1}],config:{duration:150},onRest:()=>{u(!0),o(null),R===null&&f(!0),v.current=i}}))},500)},onPointerUp:()=>{setTimeout(()=>{b.current=!1},100),clearTimeout(L.current);const Z=Date.now();Z-V.current<500?(dt(),V.current=0):V.current=Z},onPointerLeave:()=>{clearTimeout(L.current)},onDrag:({last:Z,movement:[ct]})=>{if(R===null){if(ct<0)return}else if(ct>0)return;if(Math.abs(ct)<5)return;k.current=Math.abs(ct)>5;let pt=I===null?Math.min(0,ct):Math.max(0,ct);x.start({x:pt,onRest:()=>{Math.abs(ct)>60&&(v.current=i,o(v.current),u(!1),f(!1))}}),k.current&&L.current&&(clearTimeout(L.current),L.current=null),Z&&x.start({x:0,config:{tension:500,friction:20}})}},{eventOptions:{passive:!1}});return w.jsxs(pn.div,{ref:mt,...B!==0||P==="imageRequest"||N==="sending"?{}:Y(),style:{...C},className:`
        ${qn.textMessage}
        ${N==="sending"?qn.sending:qn.sent}
        ${I===null?qn.sentMessage:qn.receivedMessage}
        ${((n==null?void 0:n.sentId)===R||(n==null?void 0:n.receivedId)===I)&&i.reaction===-1&&!(n!=null&&n.replyTo)?qn.topMessage:""}
        ${((t==null?void 0:t.sentId)===R||(t==null?void 0:t.receivedId)===I)&&(t==null?void 0:t.reaction)===-1?qn.bottomMessage:""}
        ${et?qn.repliedMessage:""}
        ${B===2?qn.deletedMessage:""}
        ${J!==-1&&B!==2?qn.hasReaction:""}
        ${P==="image"?qn.hasImage:""}
        ${dw(q)?qn.emoji:""}
      `,children:[(D[P]||(()=>w.jsx("p",{children:w.jsx("span",{children:"Unknown type"})})))(),B!==2&&w.jsx(aw,{reaction:J,origin:R===null?"received":"sent"})]})}),mw="_replyToMessage_1f615_1",gw="_sentMessage_1f615_20",pw="_receivedMessage_1f615_25",Zc={replyToMessage:mw,sentMessage:gw,receivedMessage:pw};function yw(i){const t=Be.c(16),{message:n,nextMessage:r}=i,o=Lt(_w);let u;t[0]!==o||t[1]!==n.replyTo.receivedId||t[2]!==n.replyTo.sentId?(u=()=>{setTimeout(()=>{o(n.replyTo.sentId,n.replyTo.receivedId)},100)},t[0]=o,t[1]=n.replyTo.receivedId,t[2]=n.replyTo.sentId,t[3]=u):u=t[3];const f=u,m=`
          ${Zc.replyToMessage}
          ${n.receivedId===null?Zc.sentMessage:Zc.receivedMessage}
          ${n.reaction!==-1?Zc.hasReaction:""}
        `,y=n.replyTo.type==="image"?"Image":n.replyTo.content;let g;t[4]!==y?(g=w.jsx("p",{children:y}),t[4]=y,t[5]=g):g=t[5];let v;t[6]!==f||t[7]!==m||t[8]!==g?(v=w.jsx("a",{onClick:f,className:m,children:g}),t[6]=f,t[7]=m,t[8]=g,t[9]=v):v=t[9];let b;t[10]!==n||t[11]!==r?(b=w.jsx(v4,{message:n,replied:!0,nextMessage:r}),t[10]=n,t[11]=r,t[12]=b):b=t[12];let T;return t[13]!==v||t[14]!==b?(T=w.jsxs(w.Fragment,{children:[v,b]}),t[13]=v,t[14]=b,t[15]=T):T=t[15],T}function _w(i){return i.highlightMessage}const vw="_typingIndicator_su0am_1",Ew="_show_su0am_13",Tw="_hide_su0am_17",bw="_dot_su0am_21",Fa={typingIndicator:vw,show:Ew,hide:Tw,dot:bw};function Sw(){const i=Be.c(5),{chatBottom:t}=K.useContext(Qn),n=Lt(Aw);n&&Bl(t)&&setTimeout(()=>{t.current.scrollIntoView({behavior:"smooth"})},300);const r=`${Fa.typingIndicator} ${n?Fa.show:Fa.hide}`;let o,u,f;i[0]===Symbol.for("react.memo_cache_sentinel")?(o=w.jsx("span",{className:Fa.dot}),u=w.jsx("span",{className:Fa.dot}),f=w.jsx("span",{className:Fa.dot}),i[0]=o,i[1]=u,i[2]=f):(o=i[0],u=i[1],f=i[2]);let m;return i[3]!==r?(m=w.jsxs("div",{className:r,children:[o,u,f]}),i[3]=r,i[4]=m):m=i[4],m}function Aw(i){return i.typing}const ww="_newMessageContainer_1xl8t_1",Cw="_shown_1xl8t_12",Rw="_hidden_1xl8t_16",xw="_newMessage_1xl8t_1",Jc={newMessageContainer:ww,shown:Cw,hidden:Rw,newMessage:xw};function Iw(){const i=Be.c(7);console.log("New Message component rendered!");const{chatBottom:t}=K.useContext(Qn),n=Lt(Dw);let r;i[0]!==t.current?(r=()=>{t.current.scrollIntoView({behavior:"smooth"})},i[0]=t.current,i[1]=r):r=i[1];const o=r,u=`${Jc.newMessageContainer} ${n?Jc.shown:Jc.hidden} `;let f;i[2]!==o?(f=w.jsx("div",{className:Jc.newMessage,onClick:o,children:"New Message"}),i[2]=o,i[3]=f):f=i[3];let m;return i[4]!==u||i[5]!==f?(m=w.jsx("div",{className:u,children:f}),i[4]=u,i[5]=f,i[6]=m):m=i[6],m}function Dw(i){return i.newMessage}function Vw(){const i=Be.c(13);console.log("Chat component rendered!");const{chatBottom:t}=K.useContext(Qn),n=Lt(Nw),r=Lt(Ow);let o;i[0]!==t||i[1]!==r?(o=()=>{const b=new IntersectionObserver(R=>{R.forEach(I=>{I.isIntersecting&&r(!1)})},{threshold:.1}),T=t.current;return T&&b.observe(T),()=>{T&&b.unobserve(T)}},i[0]=t,i[1]=r,i[2]=o):o=i[2];let u;i[3]===Symbol.for("react.memo_cache_sentinel")?(u=[],i[3]=u):u=i[3],K.useLayoutEffect(o,u);let f;i[4]!==n?(f=n.map(Mw),i[4]=n,i[5]=f):f=i[5];let m,y;i[6]===Symbol.for("react.memo_cache_sentinel")?(m=w.jsx(Sw,{}),y=w.jsx(Iw,{}),i[6]=m,i[7]=y):(m=i[6],y=i[7]);let g;i[8]!==t?(g=w.jsx("div",{ref:t,className:I_.chatBottom,children:"Hehe"},"chatBottom"),i[8]=t,i[9]=g):g=i[9];let v;return i[10]!==f||i[11]!==g?(v=w.jsxs("div",{className:I_.chatContainer,children:[f,m,y,g]}),i[10]=f,i[11]=g,i[12]=v):v=i[12],v}function Mw(i,t,n){return i.replyTo?w.jsx(yw,{message:i,nextMessage:n[t+1]},`${i.sentId} m ${i.receivedId}`):w.jsx(v4,{message:i,prevMessage:n[t-1],nextMessage:n[t+1]},`${i.sentId} m ${i.receivedId}`)}function Ow(i){return i.setNewMessage}function Nw(i){return i.messages}const Lw="_inputSpaceContainer_o8orq_1",kw="_gifSelector_o8orq_42",Pw="_inputOptions_o8orq_53",jw="_sendButton_o8orq_75",Uw="_imageBox_o8orq_95",zw="_inputImage_o8orq_108",Bw="_closeImage_o8orq_115",Pr={inputSpaceContainer:Lw,gifSelector:kw,inputOptions:Pw,sendButton:jw,imageBox:Uw,inputImage:zw,closeImage:Bw},qw="_gifBox_pg0za_1",Hw="_inputDiv_pg0za_22",Gw="_gifInput_pg0za_27",Fw="_gifsContainer_pg0za_42",Qw="_containerColumn_pg0za_53",Qa={gifBox:qw,inputDiv:Hw,gifInput:Gw,gifsContainer:Fw,containerColumn:Qw},D_="AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k",V_="client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low";function Yw({setGifPicker:i}){const{dataChannel:t}=K.useContext(Ze),{sentId:n,selectedMessage:r,atBottomRef:o}=K.useContext(Qn),u=Lt(tt=>tt.addMessage),f=Lt(tt=>tt.replying),m=Lt(tt=>tt.setReplying),y=()=>{i(!1)},g=K.useRef([]),[v,b]=K.useState([]),T=K.useRef(null),R=85,I=60,[{h:P},N]=Qr(()=>({h:R})),q=du(({movement:[,tt],last:D})=>{Math.abs(tt)<2&&!D||(D?tt>I?N.start({h:0,immediate:!1,onRest:()=>{window.history.back()}}):N.start({h:R,immediate:!1}):tt>0&&N.start({h:R-tt/window.innerHeight*100,immediate:!0}))}),J=async tt=>{let D=`https://tenor.googleapis.com/v2/search?q=${tt}&key=${D_}&${V_}`;const C=await fetch(D).then(x=>x.json());b(C.results)},B=K.useRef(LE(J,200)),H=()=>{const tt=T.current.value.trimEnd();tt.length===0?b(g.current):B.current(tt)},et=tt=>{if(tt.target.dataset.url){const D={type:"gif",content:tt.target.dataset.url,sentId:n.current,receivedId:null},C={sentId:n.current,receivedId:null,type:"image",status:"sending",reaction:-1,content:tt.target.dataset.url,deleted:0};if(f){const x={sentId:r.current.receivedId,receivedId:r.current.sentId};D.replyTo={...r.current,...x},C.replyTo=r.current,m(!1)}t.current.send(JSON.stringify(D)),u(C),n.current=n.current+1,o.current=!0,i(!1)}};return K.useEffect(()=>(N.start({from:{h:0},to:[{h:R}],reset:!1}),(async()=>{const tt=await fetch(`https://tenor.googleapis.com/v2/featured?key=${D_}&${V_}`).then(D=>D.json());b(tt.results),g.current=tt.results})(),window.addEventListener("popstate",y),()=>{window.removeEventListener("popstate",y)}),[]),w.jsxs(pn.div,{...q(),style:{height:P.to(tt=>`${tt}vh`)},className:Qa.gifBox,children:[w.jsx("div",{className:Qa.inputDiv,children:w.jsx("input",{ref:T,autoComplete:"off",placeholder:"Search",spellCheck:!1,name:"query",title:"Search for GIFs",className:Qa.gifInput,onChange:H})}),v.length>0?w.jsxs("div",{className:Qa.gifsContainer,onClick:tt=>et(tt),children:[w.jsx("div",{className:Qa.containerColumn,children:v.map((tt,D)=>D%2===0&&w.jsx("img",{"data-url":tt.media_formats.gif.url,alt:tt.content_description,src:tt.media_formats.tinygif.url},tt.id+D))}),w.jsx("div",{className:Qa.containerColumn,children:v.map((tt,D)=>D%2===1&&w.jsx("img",{"data-url":tt.media_formats.gif.url,alt:tt.content_description,src:tt.media_formats.tinygif.url},tt.id+D))})]}):w.jsx(w.Fragment,{})]})}function Kw(){console.log("Input space rendered!");const{dataChannel:i}=K.useContext(Ze),t=Lt(dt=>dt.addMessage),n=Lt(dt=>dt.replying),r=Lt(dt=>dt.setReplying),{sentId:o,atBottomRef:u,images:f,chatBottom:m,selectedMessage:y}=K.useContext(Qn),g=K.useRef(null),v=K.useRef(null),b=K.useRef(null),[T,R]=K.useState(!1),[I,P]=K.useState(""),[N,q]=K.useState(null),[J,B]=K.useState(!1),{showNotification:H}=mu();K.useLayoutEffect(()=>{n&&g.current&&g.current.focus()},[n]);const et=()=>{B(!0),window.history.pushState(null,"","/gifs")},tt=()=>{i.current.send(JSON.stringify({type:"typing"}))},D=K.useRef(NE(tt,800)),C=()=>{D.current(),R(!0),g.current.style.height="auto",g.current.scrollHeight>g.current.clientHeight&&(g.current.style.height=g.current.scrollHeight+"px"),P(g.current.value),Bl(m)&&setTimeout(()=>{m.current.scrollIntoView({behavior:"smooth"})},200)},x=async dt=>{const Y=dt.target.files[0];if(!Y)return;const Z=await kE(Y);if(Z.length>64){H("Please upload images upto 2 MB!");return}f.current.push({sentId:o.current,receivedId:null,fileType:Y.type,chunks:Z}),q(URL.createObjectURL(Y))},L=()=>{if(I.trim().length===0)return;const dt={type:"text",content:I.trimEnd(),sentId:o.current,receivedId:null},Y={sentId:o.current,receivedId:null,type:"text",status:"sending",reaction:-1,content:I.trimEnd(),deleted:0};if(n){const Z={sentId:y.current.receivedId,receivedId:y.current.sentId};dt.replyTo={...y.current,...Z},Y.replyTo=y.current,r(!1)}i.current.send(JSON.stringify(dt)),t(Y),o.current=o.current+1,g.current.value="",u.current=!0,P("")},k=()=>{if(N===null)return;const dt={type:"imageRequest",sentId:o.current,receivedId:null},Y={sentId:o.current,receivedId:null,type:"image",status:"sending",reaction:-1,content:N,deleted:0};if(n){const Z={sentId:y.current.receivedId,receivedId:y.current.sentId};dt.replyTo={...y.current,...Z},Y.replyTo=y.current,r(!1)}i.current.send(JSON.stringify(dt)),t(Y),o.current=o.current+1,b.current.value="",u.current=!0,q(null)},U=()=>{R(!1),g.current.style.height="unset",g.current.scrollTop=g.current.scrollHeight},V=()=>{b.current.value="";const dt=f.current.findIndex(Y=>Y.sentId===o.current&&Y.receivedId===null);f.current.splice(dt,1),q(null)},mt=()=>{N===null?L():k()};return w.jsxs(w.Fragment,{children:[J?w.jsx(Yw,{setGifPicker:B}):null,w.jsxs("div",{className:Pr.inputSpaceContainer,ref:v,children:[!T&&w.jsxs("div",{className:Pr.inputOptions,children:[w.jsx("label",{htmlFor:"fileInput",children:w.jsx("svg",{width:18,height:18,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM6.016 24q0 0.832 0.576 1.44t1.408 0.576h16q0.832 0 1.408-0.576t0.608-1.44v-0.928q-0.224-0.448-1.12-2.688t-1.6-3.584-1.28-2.112q-0.544-0.576-1.12-0.608t-1.152 0.384-1.152 1.12-1.184 1.568-1.152 1.696-1.152 1.6-1.088 1.184-1.088 0.448q-0.576 0-1.664-1.44-0.16-0.192-0.48-0.608-1.12-1.504-1.6-1.824-0.768-0.512-1.184 0.352-0.224 0.512-0.928 2.24t-1.056 2.56v0.64zM6.016 9.024q0 1.248 0.864 2.112t2.112 0.864 2.144-0.864 0.864-2.112-0.864-2.144-2.144-0.864-2.112 0.864-0.864 2.144z"})})}),w.jsx("input",{ref:b,id:"fileInput",type:"file",accept:"image/*",onChange:dt=>x(dt)}),w.jsx("svg",{width:18,height:18,viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--twemoji",preserveAspectRatio:"xMidYMid meet",children:w.jsx("path",{fill:"#FFAC33",d:"M27.287 34.627c-.404 0-.806-.124-1.152-.371L18 28.422l-8.135 5.834a1.97 1.97 0 0 1-2.312-.008a1.971 1.971 0 0 1-.721-2.194l3.034-9.792l-8.062-5.681a1.98 1.98 0 0 1-.708-2.203a1.978 1.978 0 0 1 1.866-1.363L12.947 13l3.179-9.549a1.976 1.976 0 0 1 3.749 0L23 13l10.036.015a1.975 1.975 0 0 1 1.159 3.566l-8.062 5.681l3.034 9.792a1.97 1.97 0 0 1-.72 2.194a1.957 1.957 0 0 1-1.16.379z"})})]}),N?w.jsxs("div",{className:Pr.imageBox,children:[w.jsx("img",{src:N,className:Pr.inputImage}),w.jsx("svg",{className:Pr.closeImage,width:16,height:16,onClick:V,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})]}):w.jsxs(w.Fragment,{children:[w.jsx("textarea",{onChange:C,onFocus:C,onBlur:U,ref:g,name:"textMessage",placeholder:"Message",rows:1,spellCheck:!1}),!T&&w.jsx("svg",{className:Pr.gifSelector,onClick:et,width:20,height:20,viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"ic_fluent_gif_24_filled",fillRule:"nonzero",children:w.jsx("path",{d:"M18.75,3.50054297 C20.5449254,3.50054297 22,4.95561754 22,6.75054297 L22,17.2531195 C22,19.048045 20.5449254,20.5031195 18.75,20.5031195 L5.25,20.5031195 C3.45507456,20.5031195 2,19.048045 2,17.2531195 L2,6.75054297 C2,4.95561754 3.45507456,3.50054297 5.25,3.50054297 L18.75,3.50054297 Z M8.01459972,8.87193666 C6.38839145,8.87193666 5.26103525,10.2816525 5.26103525,11.9943017 C5.26103525,13.707564 6.38857781,15.1202789 8.01459972,15.1202789 C8.90237918,15.1202789 9.71768065,14.6931811 10.1262731,13.9063503 L10.2024697,13.7442077 L10.226,13.674543 L10.2440163,13.5999276 L10.2440163,13.5999276 L10.2516169,13.5169334 L10.2518215,11.9961937 L10.2450448,11.9038358 C10.2053646,11.6359388 9.99569349,11.4234501 9.72919932,11.3795378 L9.62682145,11.3711937 L8.62521827,11.3711937 L8.53286035,11.3779703 C8.26496328,11.4176506 8.05247466,11.6273217 8.00856234,11.8938159 L8.00021827,11.9961937 L8.00699487,12.0885517 C8.0466751,12.3564487 8.25634623,12.5689373 8.5228404,12.6128497 L8.62521827,12.6211937 L9.00103525,12.6209367 L9.00103525,13.3549367 L8.99484486,13.3695045 C8.80607251,13.6904125 8.44322427,13.8702789 8.01459972,13.8702789 C7.14873038,13.8702789 6.51103525,13.0713011 6.51103525,11.9943017 C6.51103525,10.9182985 7.14788947,10.1219367 8.01459972,10.1219367 C8.43601415,10.1219367 8.67582824,10.1681491 8.97565738,10.3121334 C9.28681641,10.4615586 9.6601937,10.3304474 9.80961888,10.0192884 C9.95904407,9.70812933 9.82793289,9.33475204 9.51677386,9.18532686 C9.03352891,8.95326234 8.61149825,8.87193666 8.01459972,8.87193666 Z M12.6289445,8.99393497 C12.3151463,8.99393497 12.0553614,9.22519285 12.0107211,9.52657705 L12.0039445,9.61893497 L12.0039445,14.381065 L12.0107211,14.4734229 C12.0553614,14.7748072 12.3151463,15.006065 12.6289445,15.006065 C12.9427427,15.006065 13.2025276,14.7748072 13.2471679,14.4734229 L13.2539445,14.381065 L13.2539445,9.61893497 L13.2471679,9.52657705 C13.2025276,9.22519285 12.9427427,8.99393497 12.6289445,8.99393497 Z M17.6221579,9.00083497 L15.6247564,8.99393111 C15.3109601,8.99285493 15.0503782,9.22321481 15.0046948,9.52444312 L14.9975984,9.61677709 L14.9975984,14.3649711 L15.0043751,14.4573291 C15.0440553,14.7252261 15.2537265,14.9377148 15.5202206,14.9816271 L15.6225985,14.9899711 L15.7149564,14.9831945 C15.9828535,14.9435143 16.1953421,14.7338432 16.2392544,14.467349 L16.2475985,14.3649711 L16.2470353,13.2499367 L17.37,13.2504012 L17.4623579,13.2436246 C17.730255,13.2039444 17.9427436,12.9942732 17.9866559,12.7277791 L17.995,12.6254012 L17.9882234,12.5330433 C17.9485432,12.2651462 17.738872,12.0526576 17.4723779,12.0087453 L17.37,12.0004012 L16.2470353,11.9999367 L16.2470353,10.2449367 L17.6178421,10.2508313 L17.7102229,10.2443727 C18.0117595,10.2007704 18.2439132,9.94178541 18.2450039,9.62798912 C18.24608,9.31419284 18.0157202,9.05361096 17.7144919,9.00793041 L17.6221579,9.00083497 L15.6247564,8.99393111 L17.6221579,9.00083497 Z",id:"-Color"})})})]}),w.jsx("button",{className:Pr.sendButton,disabled:I.trim().length===0&&N===null,onClick:mt,children:w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",id:"send",className:"icon glyph",children:w.jsx("path",{d:"M21.66,12a2,2,0,0,1-1.14,1.81L5.87,20.75A2.08,2.08,0,0,1,5,21a2,2,0,0,1-1.82-2.82L5.46,13H11a1,1,0,0,0,0-2H5.46L3.18,5.87A2,2,0,0,1,5.86,3.25h0l14.65,6.94A2,2,0,0,1,21.66,12Z"})})})]})]})}const Xw="_containingDiv_1w6qf_1",$w="_incomingCall_1w6qf_8",Zw="_incomingCallText_1w6qf_25",Jw="_callingText_1w6qf_31",Ww="_callActions_1w6qf_42",tC="_acceptCall_1w6qf_49",eC="_rejectCall_1w6qf_53",Wi={containingDiv:Xw,incomingCall:$w,incomingCallText:Zw,callingText:Jw,callActions:Ww,acceptCall:tC,rejectCall:eC};function nC(){const i=Be.c(33),{peerName:t,dataChannel:n}=K.useContext(Ze),r=Lt(sC),[o,u]=Qr(iC),{x:f,y:m,opacity:y}=o;let g;i[0]!==n.current||i[1]!==r?(g=()=>{n.current.send(JSON.stringify({type:"callAccept"})),r("call")},i[0]=n.current,i[1]=r,i[2]=g):g=i[2];const v=g;let b;i[3]!==n.current||i[4]!==r?(b=()=>{n.current.send(JSON.stringify({type:"callReject"})),r("hidden")},i[3]=n.current,i[4]=r,i[5]=b):b=i[5];const T=b;let R;i[6]!==u||i[7]!==T?(R=L=>{const{down:k,movement:U,direction:V}=L,[mt]=U,[dt]=V;if(!k&&Math.abs(mt)>100){u.start({x:dt>0?500:-500,opacity:0,onRest:T});return}u.start({x:k?mt:0,opacity:1})},i[6]=u,i[7]=T,i[8]=R):R=i[8];const I=du(R);let P;i[9]!==I?(P=I(),i[9]=I,i[10]=P):P=i[10];let N;i[11]!==y||i[12]!==f||i[13]!==m?(N={x:f,y:m,opacity:y},i[11]=y,i[12]=f,i[13]=m,i[14]=N):N=i[14];let q,J;i[15]===Symbol.for("react.memo_cache_sentinel")?(q=w.jsx("div",{className:Wi.profileImage,children:w.jsx("img",{src:"./pp.svg",width:50,height:50,className:Wi.profileImage})}),J=w.jsx("p",{className:Wi.incomingCallText,children:"Incoming Call"}),i[15]=q,i[16]=J):(q=i[15],J=i[16]);let B;i[17]!==t.current?(B=w.jsxs("div",{children:[J,w.jsxs("p",{className:Wi.callingText,children:[t.current," is calling you"]})]}),i[17]=t.current,i[18]=B):B=i[18];let H;i[19]===Symbol.for("react.memo_cache_sentinel")?(H=w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})}),i[19]=H):H=i[19];let et;i[20]!==v?(et=w.jsx("button",{className:Wi.acceptCall,onClick:v,children:H}),i[20]=v,i[21]=et):et=i[21];let tt;i[22]===Symbol.for("react.memo_cache_sentinel")?(tt=w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})}),i[22]=tt):tt=i[22];let D;i[23]!==T?(D=w.jsx("button",{className:Wi.rejectCall,onClick:T,children:tt}),i[23]=T,i[24]=D):D=i[24];let C;i[25]!==et||i[26]!==D?(C=w.jsxs("div",{className:Wi.callActions,children:[et,D]}),i[25]=et,i[26]=D,i[27]=C):C=i[27];let x;return i[28]!==C||i[29]!==P||i[30]!==N||i[31]!==B?(x=w.jsx("div",{className:Wi.containingDiv,children:w.jsxs(pn.div,{...P,className:Wi.incomingCall,style:N,children:[q,B,C]})}),i[28]=C,i[29]=P,i[30]=N,i[31]=B,i[32]=x):x=i[32],x}function iC(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}function sC(i){return i.setVideoCall}const rC="_videoCallContainer_10vuo_1",aC="_sendingVideo_10vuo_26",oC="_actionList_10vuo_36",lC="_startCall_10vuo_61",uC="_endCall_10vuo_65",cC="_rotateLogo_10vuo_74",hC="_callingIndicatorContainer_10vuo_78",fC="_callingIndicator_10vuo_78",ks={videoCallContainer:rC,sendingVideo:aC,actionList:oC,startCall:lC,endCall:uC,rotateLogo:cC,callingIndicatorContainer:hC,callingIndicator:fC};function dC(){const{dataChannel:i}=K.useContext(Ze),{audio:t,video:n,setAudio:r,setVideo:o,cameraFace:u,setCameraFace:f,callState:m,localStream:y}=K.useContext(lf),g=Lt(et=>et.setVideoCall),v=K.useRef(null),[b,T]=K.useState(m.current!==null),R=()=>{r(et=>!et)},I=()=>{o(et=>!et)},P=()=>{i.current.send(JSON.stringify({type:"callEnd"})),m.current=null,g("hidden")},N=()=>{m.current=null,g("hidden")},q=()=>{g("mini")},J=()=>{i.current.send(JSON.stringify({type:"callRequest"})),console.log("I am attempting a call!"),m.current="calling",T(et=>!et)},B=()=>{b?P():J()},H=()=>{f(u==="front"?"back":"front")};return K.useEffect(()=>{v.current.srcObject=n?y.current:null},[n]),w.jsxs("div",{className:ks.videoCallContainer,children:[w.jsx("video",{className:ks.sendingVideo,ref:v,autoPlay:!0,muted:!0,poster:"./pp.svg"}),b?w.jsx("button",{onClick:q,children:w.jsx("svg",{width:20,height:20,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"})})}):w.jsx("button",{onClick:N,children:w.jsx("svg",{width:20,height:20,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),b&&w.jsx("div",{className:ks.callingIndicatorContainer,children:w.jsx("span",{className:ks.callingIndicator,children:"Calling"})}),w.jsxs("ul",{className:ks.actionList,children:[w.jsx("li",{onClick:R,children:t?w.jsx("svg",{width:24,height:24,viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:w.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:w.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):w.jsx("svg",{width:24,height:24,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:w.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:w.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),w.jsx("li",{onClick:I,children:n?w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):w.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),w.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),w.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),w.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),w.jsx("li",{children:w.jsxs("svg",{onClick:H,width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),w.jsx("path",{className:ks.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),w.jsx("li",{onClick:B,className:b?ks.endCall:ks.startCall,children:w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})})]})]})}const mC="_videoCallContainer_1c0py_1",gC="_sendingVideo_1c0py_25",pC="_receivingVideo_1c0py_38",yC="_actionList_1c0py_47",_C="_endCall_1c0py_71",vC="_rotateLogo_1c0py_80",EC="_mutedButton_1c0py_84",jr={videoCallContainer:mC,sendingVideo:gC,receivingVideo:pC,actionList:yC,endCall:_C,rotateLogo:vC,mutedButton:EC};function TC(){const{dataChannel:i}=K.useContext(Ze),t=Lt(Z=>Z.setVideoCall),{audio:n,video:r,setAudio:o,setVideo:u,cameraFace:f,remoteAudio:m,remoteVideo:y,setCameraFace:g,localStream:v,remoteStream:b,sendingVideoPin:T,callState:R,videoTransceiver:I,audioTransceiver:P}=K.useContext(lf),N=K.useRef(null),q=K.useRef(null),J=K.useRef(null),[B,H]=K.useState(!0),et=Z=>{Z.stopPropagation(),clearTimeout(J.current),J.current=setTimeout(()=>{H(!1)},4e3)},tt=Z=>{et(Z),o(ct=>!ct)},D=Z=>{et(Z),u(ct=>!ct)},C=Z=>{et(Z),i.current.send(JSON.stringify({type:"callEnd"})),t("hidden")},[{x,y:L},k]=Qr(()=>({x:T.current.x,y:T.current.y,config:{tension:300,friction:15}})),U=du(({down:Z,offset:[ct,pt],last:O})=>{if(Z)T.current={x:ct,y:pt},k.start({x:ct,y:pt,immediate:!0});else if(O){const st=window.innerWidth,ht=window.innerHeight,{width:ut,height:_t}=q.current.getBoundingClientRect(),bt=16,Tt=16,Kt=16,zt=96;let de=0;ct<-((st-(Kt+Tt)-ut)/2)&&(de=-(st-(Kt+Tt)-ut));let qe=pt;pt<0&&(qe=0),pt>ht-(bt+zt+_t)&&(qe=ht-(bt+zt+_t)),T.current={x:de,y:qe},k.start({x:de,y:qe,immediate:!1})}},{from:()=>[x.get(),L.get()]}),V=Uh(B,{from:{scale:0,opacity:0},enter:{scale:1,opacity:1,config:{tension:400,friction:20}},leave:{scale:0,opacity:0,config:{tension:400,friction:20}}}),mt=Z=>{Z.stopPropagation(),t("mini")},dt=Z=>{et(Z),g(f==="front"?"back":"front")};K.useEffect(()=>{R.current="connected"},[]),K.useEffect(()=>{N.current.srcObject=y?b.current:null},[y]),K.useEffect(()=>{q.current.srcObject=r?v.current:null,I.current.sender.replaceTrack(r?v.current.getVideoTracks()[0]:null)},[r]),K.useEffect(()=>{P.current.sender.replaceTrack(n?v.current.getAudioTracks()[0]:null)},[n]),K.useLayoutEffect(()=>{k.start({x:x.get(),y:L.get(),immediate:!0})}),K.useEffect(()=>{B?J.current=setTimeout(()=>{H(!1)},4e3):clearTimeout(J.current)},[B]);const Y=()=>{H(Z=>!Z)};return w.jsxs("div",{className:jr.videoCallContainer,onClick:Y,children:[w.jsx("video",{className:jr.receivingVideo,autoPlay:!0,ref:N,poster:"./pp.svg"}),!m&&w.jsx("button",{className:jr.mutedButton,children:w.jsx("svg",{width:16,height:16,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:w.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:w.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),w.jsx(pn.video,{...U(),className:jr.sendingVideo,style:{x,y:L},ref:q,autoPlay:!0,muted:!0,poster:"./pp.svg"}),V((Z,ct)=>ct?w.jsxs(w.Fragment,{children:[w.jsx(pn.button,{onClick:pt=>{mt(pt)},style:{...Z},children:w.jsx("svg",{width:20,height:20,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"})})}),w.jsxs("ul",{className:jr.actionList,children:[w.jsx(pn.li,{style:{...Z},onClick:pt=>{tt(pt)},children:n?w.jsx("svg",{width:24,height:24,viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:w.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:w.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):w.jsx("svg",{width:24,height:24,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:w.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:w.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),w.jsx(pn.li,{style:{...Z},onClick:pt=>{D(pt)},children:r?w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):w.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),w.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),w.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),w.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),w.jsx(pn.li,{onClick:pt=>dt(pt),style:{...Z},children:w.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),w.jsx("path",{className:jr.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),w.jsx(pn.li,{style:{...Z},className:jr.endCall,onClick:pt=>{C(pt)},children:w.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})})]})]}):null)]})}const bC="_miniVideoContainer_7ksnt_1",SC="_miniVideo_7ksnt_1",AC="_mutedButton_7ksnt_22",L1={miniVideoContainer:bC,miniVideo:SC,mutedButton:AC};function wC(){const{remoteStream:i}=K.useContext(Ze),t=Lt(T=>T.setVideoCall),{receivingVideoPin:n,callState:r,remoteVideo:o,remoteAudio:u}=K.useContext(lf),f=K.useRef(null);K.useEffect(()=>{f.current.srcObject=o?i.current:null},[o]);const[{x:m,y},g]=Qr(()=>({x:n.current.x,y:n.current.y,config:{tension:300,friction:30}})),v=du(({down:T,offset:[R,I],last:P})=>{if(T)n.current={x:R,y:I},g.start({x:R,y:I,immediate:!0});else if(P){const N=window.innerWidth,q=window.innerHeight,{width:J,height:B}=f.current.getBoundingClientRect(),H=16,et=16,tt=16,D=96;let C=0;R>(N-(tt+et)-J)/2&&(C=N-(tt+et)-J);let x=I;I<0&&(x=0),I>q-(H+D+B)&&(x=q-(H+D+B)),n.current={x:C,y:x},g.start({x:C,y:x,immediate:!1})}},{from:()=>[m.get(),y.get()]}),b=()=>{t(r.current!=="connected"?"calling":"call")};return K.useLayoutEffect(()=>{g.start({x:m.get(),y:y.get(),immediate:!0})}),w.jsxs(pn.div,{...v(),onClick:b,style:{x:m,y},className:L1.miniVideoContainer,children:[w.jsx("video",{className:L1.miniVideo,autoPlay:!0,ref:f,poster:"./pp.svg"}),!u&&w.jsx("button",{className:L1.mutedButton,children:w.jsx("svg",{width:12,height:12,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:w.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:w.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:w.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})})]})}function CC(){const i=Be.c(19);console.log("Chat Page rendered!");const{longPressed:t}=K.useContext(Qn),n=Lt(DC),r=Lt(IC),o=Lt(xC),u=Lt(RC);let f;i[0]!==t||i[1]!==r||i[2]!==o?(f=()=>{const q=()=>{t.current===!1&&(r(!1),o(!1))};return document.addEventListener("click",q),()=>{document.removeEventListener("click",q)}},i[0]=t,i[1]=r,i[2]=o,i[3]=f):f=i[3];let m;i[4]===Symbol.for("react.memo_cache_sentinel")?(m=[],i[4]=m):m=i[4],K.useLayoutEffect(f,m);let y;i[5]===Symbol.for("react.memo_cache_sentinel")?(y=w.jsx(jA,{}),i[5]=y):y=i[5];let g;i[6]!==n?(g=n!=="hidden"&&w.jsxs(NA,{children:[n==="incoming"&&w.jsx(nC,{}),n==="calling"&&w.jsx(dC,{}),n==="call"&&w.jsx(TC,{}),n==="mini"&&w.jsx(wC,{})]}),i[6]=n,i[7]=g):g=i[7];let v,b,T,R,I;i[8]===Symbol.for("react.memo_cache_sentinel")?(v=w.jsx(Vw,{}),b=w.jsx(wA,{}),T=w.jsx(Kw,{}),R=w.jsx(EA,{}),I=w.jsx(dA,{}),i[8]=v,i[9]=b,i[10]=T,i[11]=R,i[12]=I):(v=i[8],b=i[9],T=i[10],R=i[11],I=i[12]);let P;i[13]!==u.sent||i[14]!==u.src?(P=u.src&&w.jsx(VA,{src:u.src,sent:u.sent}),i[13]=u.sent,i[14]=u.src,i[15]=P):P=i[15];let N;return i[16]!==g||i[17]!==P?(N=w.jsxs("div",{className:cA.chatContainer,children:[y,g,v,b,T,R,I,P]}),i[16]=g,i[17]=P,i[18]=N):N=i[18],N}function RC(i){return i.imageDialog}function xC(i){return i.setReactionsShown}function IC(i){return i.setActionsShown}function DC(i){return i.videoCall}function VC(){const i=Be.c(5),{connected:t,peerConnection:n}=K.useContext(Ze);let r;i[0]!==n.current?(r=()=>{const f=OC;return document.addEventListener("contextmenu",f),document.addEventListener("touchstart",MC,{passive:!1}),()=>{var m;document.removeEventListener("contextmenu",f),document.removeEventListener("touchstart",f),(m=n.current)==null||m.close()}},i[0]=n.current,i[1]=r):r=i[1];let o;i[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],i[2]=o):o=i[2],K.useEffect(r,o);let u;return i[3]!==t?(u=w.jsx(OE,{children:t?w.jsx(qE,{children:w.jsx(CC,{})}):w.jsx(lA,{})}),i[3]=t,i[4]=u):u=i[4],u}function MC(i){i.touches.length>1&&i.preventDefault()}function OC(i){return i.preventDefault()}W6.createRoot(document.getElementById("root")).render(w.jsx(i9,{children:w.jsx(K.StrictMode,{children:w.jsx(VC,{})})}));
