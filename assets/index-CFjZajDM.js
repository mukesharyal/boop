(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function F9(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var om={exports:{}},Rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function Q9(){if(xy)return Rl;xy=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:n,type:r,key:f,ref:o!==void 0?o:null,props:u}}return Rl.Fragment=t,Rl.jsx=i,Rl.jsxs=i,Rl}var Iy;function Y9(){return Iy||(Iy=1,om.exports=Q9()),om.exports}var C=Y9(),lm={exports:{}},Ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function K9(){if(Dy)return Ot;Dy=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function T(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,U={};function k(N,tt,nt){this.props=N,this.context=tt,this.refs=U,this.updater=nt||R}k.prototype.isReactComponent={},k.prototype.setState=function(N,tt){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,tt,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function B(){}B.prototype=k.prototype;function Z(N,tt,nt){this.props=N,this.context=tt,this.refs=U,this.updater=nt||R}var X=Z.prototype=new B;X.constructor=Z,M(X,k.prototype),X.isPureReactComponent=!0;var st=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function D(N,tt,nt,rt,yt,lt){return nt=lt.ref,{$$typeof:n,type:N,key:tt,ref:nt!==void 0?nt:null,props:lt}}function w(N,tt){return D(N.type,tt,void 0,void 0,void 0,N.props)}function x(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function L(N){var tt={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(nt){return tt[nt]})}var O=/\/+/g;function j(N,tt){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):tt.toString(36)}function I(){}function dt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(I,I):(N.status="pending",N.then(function(tt){N.status==="pending"&&(N.status="fulfilled",N.value=tt)},function(tt){N.status==="pending"&&(N.status="rejected",N.reason=tt)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function pt(N,tt,nt,rt,yt){var lt=typeof N;(lt==="undefined"||lt==="boolean")&&(N=null);var mt=!1;if(N===null)mt=!0;else switch(lt){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(N.$$typeof){case n:case t:mt=!0;break;case v:return mt=N._init,pt(mt(N._payload),tt,nt,rt,yt)}}if(mt)return yt=yt(N),mt=rt===""?"."+j(N,0):rt,st(yt)?(nt="",mt!=null&&(nt=mt.replace(O,"$&/")+"/"),pt(yt,tt,nt,"",function(Yt){return Yt})):yt!=null&&(x(yt)&&(yt=w(yt,nt+(yt.key==null||N&&N.key===yt.key?"":(""+yt.key).replace(O,"$&/")+"/")+mt)),tt.push(yt)),1;mt=0;var Tt=rt===""?".":rt+":";if(st(N))for(var xt=0;xt<N.length;xt++)rt=N[xt],lt=Tt+j(rt,xt),mt+=pt(rt,tt,nt,lt,yt);else if(xt=T(N),typeof xt=="function")for(N=xt.call(N),xt=0;!(rt=N.next()).done;)rt=rt.value,lt=Tt+j(rt,xt++),mt+=pt(rt,tt,nt,lt,yt);else if(lt==="object"){if(typeof N.then=="function")return pt(dt(N),tt,nt,rt,yt);throw tt=String(N),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return mt}function F(N,tt,nt){if(N==null)return N;var rt=[],yt=0;return pt(N,rt,"","",function(lt){return tt.call(nt,lt,yt++)}),rt}function at(N){if(N._status===-1){var tt=N._result;tt=tt(),tt.then(function(nt){(N._status===0||N._status===-1)&&(N._status=1,N._result=nt)},function(nt){(N._status===0||N._status===-1)&&(N._status=2,N._result=nt)}),N._status===-1&&(N._status=0,N._result=tt)}if(N._status===1)return N._result.default;throw N._result}var ht=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Et(){}return Ot.Children={map:F,forEach:function(N,tt,nt){F(N,function(){tt.apply(this,arguments)},nt)},count:function(N){var tt=0;return F(N,function(){tt++}),tt},toArray:function(N){return F(N,function(tt){return tt})||[]},only:function(N){if(!x(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ot.Component=k,Ot.Fragment=i,Ot.Profiler=o,Ot.PureComponent=Z,Ot.StrictMode=r,Ot.Suspense=y,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(N){return W.H.useMemoCache(N)}},Ot.cache=function(N){return function(){return N.apply(null,arguments)}},Ot.cloneElement=function(N,tt,nt){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var rt=M({},N.props),yt=N.key,lt=void 0;if(tt!=null)for(mt in tt.ref!==void 0&&(lt=void 0),tt.key!==void 0&&(yt=""+tt.key),tt)!Q.call(tt,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&tt.ref===void 0||(rt[mt]=tt[mt]);var mt=arguments.length-2;if(mt===1)rt.children=nt;else if(1<mt){for(var Tt=Array(mt),xt=0;xt<mt;xt++)Tt[xt]=arguments[xt+2];rt.children=Tt}return D(N.type,yt,void 0,void 0,lt,rt)},Ot.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Ot.createElement=function(N,tt,nt){var rt,yt={},lt=null;if(tt!=null)for(rt in tt.key!==void 0&&(lt=""+tt.key),tt)Q.call(tt,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(yt[rt]=tt[rt]);var mt=arguments.length-2;if(mt===1)yt.children=nt;else if(1<mt){for(var Tt=Array(mt),xt=0;xt<mt;xt++)Tt[xt]=arguments[xt+2];yt.children=Tt}if(N&&N.defaultProps)for(rt in mt=N.defaultProps,mt)yt[rt]===void 0&&(yt[rt]=mt[rt]);return D(N,lt,void 0,void 0,null,yt)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(N){return{$$typeof:m,render:N}},Ot.isValidElement=x,Ot.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:at}},Ot.memo=function(N,tt){return{$$typeof:g,type:N,compare:tt===void 0?null:tt}},Ot.startTransition=function(N){var tt=W.T,nt={};W.T=nt;try{var rt=N(),yt=W.S;yt!==null&&yt(nt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Et,ht)}catch(lt){ht(lt)}finally{W.T=tt}},Ot.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ot.use=function(N){return W.H.use(N)},Ot.useActionState=function(N,tt,nt){return W.H.useActionState(N,tt,nt)},Ot.useCallback=function(N,tt){return W.H.useCallback(N,tt)},Ot.useContext=function(N){return W.H.useContext(N)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(N,tt){return W.H.useDeferredValue(N,tt)},Ot.useEffect=function(N,tt,nt){var rt=W.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(N,tt)},Ot.useId=function(){return W.H.useId()},Ot.useImperativeHandle=function(N,tt,nt){return W.H.useImperativeHandle(N,tt,nt)},Ot.useInsertionEffect=function(N,tt){return W.H.useInsertionEffect(N,tt)},Ot.useLayoutEffect=function(N,tt){return W.H.useLayoutEffect(N,tt)},Ot.useMemo=function(N,tt){return W.H.useMemo(N,tt)},Ot.useOptimistic=function(N,tt){return W.H.useOptimistic(N,tt)},Ot.useReducer=function(N,tt,nt){return W.H.useReducer(N,tt,nt)},Ot.useRef=function(N){return W.H.useRef(N)},Ot.useState=function(N){return W.H.useState(N)},Ot.useSyncExternalStore=function(N,tt,nt){return W.H.useSyncExternalStore(N,tt,nt)},Ot.useTransition=function(){return W.H.useTransition()},Ot.version="19.1.0",Ot}var My;function Ih(){return My||(My=1,lm.exports=K9()),lm.exports}var $=Ih();const Qr=F9($);var um={exports:{}},xl={},cm={exports:{}},hm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function X9(){return Vy||(Vy=1,function(n){function t(F,at){var ht=F.length;F.push(at);t:for(;0<ht;){var Et=ht-1>>>1,N=F[Et];if(0<o(N,at))F[Et]=at,F[ht]=N,ht=Et;else break t}}function i(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var at=F[0],ht=F.pop();if(ht!==at){F[0]=ht;t:for(var Et=0,N=F.length,tt=N>>>1;Et<tt;){var nt=2*(Et+1)-1,rt=F[nt],yt=nt+1,lt=F[yt];if(0>o(rt,ht))yt<N&&0>o(lt,rt)?(F[Et]=lt,F[yt]=ht,Et=yt):(F[Et]=rt,F[nt]=ht,Et=nt);else if(yt<N&&0>o(lt,ht))F[Et]=lt,F[yt]=ht,Et=yt;else break t}}return at}function o(F,at){var ht=F.sortIndex-at.sortIndex;return ht!==0?ht:F.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();n.unstable_now=function(){return f.now()-m}}var y=[],g=[],v=1,b=null,T=3,R=!1,M=!1,U=!1,k=!1,B=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function st(F){for(var at=i(g);at!==null;){if(at.callback===null)r(g);else if(at.startTime<=F)r(g),at.sortIndex=at.expirationTime,t(y,at);else break;at=i(g)}}function W(F){if(U=!1,st(F),!M)if(i(y)!==null)M=!0,Q||(Q=!0,j());else{var at=i(g);at!==null&&pt(W,at.startTime-F)}}var Q=!1,D=-1,w=5,x=-1;function L(){return k?!0:!(n.unstable_now()-x<w)}function O(){if(k=!1,Q){var F=n.unstable_now();x=F;var at=!0;try{t:{M=!1,U&&(U=!1,Z(D),D=-1),R=!0;var ht=T;try{e:{for(st(F),b=i(y);b!==null&&!(b.expirationTime>F&&L());){var Et=b.callback;if(typeof Et=="function"){b.callback=null,T=b.priorityLevel;var N=Et(b.expirationTime<=F);if(F=n.unstable_now(),typeof N=="function"){b.callback=N,st(F),at=!0;break e}b===i(y)&&r(y),st(F)}else r(y);b=i(y)}if(b!==null)at=!0;else{var tt=i(g);tt!==null&&pt(W,tt.startTime-F),at=!1}}break t}finally{b=null,T=ht,R=!1}at=void 0}}finally{at?j():Q=!1}}}var j;if(typeof X=="function")j=function(){X(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,dt=I.port2;I.port1.onmessage=O,j=function(){dt.postMessage(null)}}else j=function(){B(O,0)};function pt(F,at){D=B(function(){F(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(F){switch(T){case 1:case 2:case 3:var at=3;break;default:at=T}var ht=T;T=at;try{return F()}finally{T=ht}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(F,at){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ht=T;T=F;try{return at()}finally{T=ht}},n.unstable_scheduleCallback=function(F,at,ht){var Et=n.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Et+ht:Et):ht=Et,F){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ht+N,F={id:v++,callback:at,priorityLevel:F,startTime:ht,expirationTime:N,sortIndex:-1},ht>Et?(F.sortIndex=ht,t(g,F),i(y)===null&&F===i(g)&&(U?(Z(D),D=-1):U=!0,pt(W,ht-Et))):(F.sortIndex=N,t(y,F),M||R||(M=!0,Q||(Q=!0,j()))),F},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(F){var at=T;return function(){var ht=T;T=at;try{return F.apply(this,arguments)}finally{T=ht}}}}(hm)),hm}var Ny;function $9(){return Ny||(Ny=1,cm.exports=X9()),cm.exports}var fm={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function Z9(){if(Oy)return on;Oy=1;var n=Ih();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:g,implementation:v}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,v)},on.flushSync=function(y){var g=f.T,v=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=v,r.d.f()}},on.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},on.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},on.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:R}):v==="script"&&r.d.X(y,{crossOrigin:b,integrity:T,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},on.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin);r.d.L(y,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(y,g){if(typeof y=="string")if(g){var v=m(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},on.requestFormReset=function(y){r.d.r(y)},on.unstable_batchedUpdates=function(y,g){return y(g)},on.useFormState=function(y,g,v){return f.H.useFormState(y,g,v)},on.useFormStatus=function(){return f.H.useHostTransitionStatus()},on.version="19.1.0",on}var Ly;function V_(){if(Ly)return fm.exports;Ly=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),fm.exports=Z9(),fm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function J9(){if(ky)return xl;ky=1;var n=$9(),t=Ih(),i=V_();function r(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function f(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(r(188))}function y(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(r(188));return s!==e?null:e}for(var a=e,l=s;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),e;if(d===l)return m(h),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var E=!1,S=h.child;S;){if(S===a){E=!0,a=h,l=d;break}if(S===l){E=!0,l=h,a=d;break}S=S.sibling}if(!E){for(S=d.child;S;){if(S===a){E=!0,a=d,l=h;break}if(S===l){E=!0,l=d,a=h;break}S=S.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:s}function g(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=g(e),s!==null)return s;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),X=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case k:return"Profiler";case U:return"StrictMode";case W:return"Suspense";case Q:return"SuspenseList";case x:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case X:return(e.displayName||"Context")+".Provider";case Z:return(e._context.displayName||"Context")+".Consumer";case st:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return s=e.displayName||null,s!==null?s:dt(e.type)||"Memo";case w:s=e._payload,e=e._init;try{return dt(e(s))}catch{}}return null}var pt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},Et=[],N=-1;function tt(e){return{current:e}}function nt(e){0>N||(e.current=Et[N],Et[N]=null,N--)}function rt(e,s){N++,Et[N]=e.current,e.current=s}var yt=tt(null),lt=tt(null),mt=tt(null),Tt=tt(null);function xt(e,s){switch(rt(mt,s),rt(lt,e),rt(yt,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?ny(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=ny(s),e=iy(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}nt(yt),rt(yt,e)}function Yt(){nt(yt),nt(lt),nt(mt)}function pe(e){e.memoizedState!==null&&rt(Tt,e);var s=yt.current,a=iy(s,e.type);s!==a&&(rt(lt,e),rt(yt,a))}function Me(e){lt.current===e&&(nt(yt),nt(lt)),Tt.current===e&&(nt(Tt),bl._currentValue=ht)}var sn=Object.prototype.hasOwnProperty,ze=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,wn=n.unstable_shouldYield,Ke=n.unstable_requestPaint,fe=n.unstable_now,Oi=n.unstable_getCurrentPriorityLevel,Li=n.unstable_ImmediatePriority,Wn=n.unstable_UserBlockingPriority,ur=n.unstable_NormalPriority,lf=n.unstable_LowPriority,ea=n.unstable_IdlePriority,To=n.log,Eu=n.unstable_setDisableYieldValue,ye=null,Jt=null;function Cn(e){if(typeof To=="function"&&Eu(e),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(ye,e)}catch{}}var rn=Math.clz32?Math.clz32:cr,Tu=Math.log,uf=Math.LN2;function cr(e){return e>>>=0,e===0?32:31-(Tu(e)/uf|0)|0}var hr=256,fr=4194304;function ti(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function na(e,s,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=ti(l):(E&=S,E!==0?h=ti(E):a||(a=S&~e,a!==0&&(h=ti(a))))):(S=l&~d,S!==0?h=ti(S):E!==0?h=ti(E):a||(a=l&~e,a!==0&&(h=ti(a)))),h===0?0:s!==0&&s!==h&&(s&d)===0&&(d=h&-h,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:h}function dr(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function bo(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function So(){var e=hr;return hr<<=1,(hr&4194048)===0&&(hr=256),e}function Ao(){var e=fr;return fr<<=1,(fr&62914560)===0&&(fr=4194304),e}function ki(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function Pi(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function wo(e,s,a,l,h,d){var E=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,V=e.expirationTimes,G=e.hiddenUpdates;for(a=E&~a;0<a;){var et=31-rn(a),ot=1<<et;S[et]=0,V[et]=-1;var Y=G[et];if(Y!==null)for(G[et]=null,et=0;et<Y.length;et++){var K=Y[et];K!==null&&(K.lane&=-536870913)}a&=~ot}l!==0&&ui(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(E&~s))}function ui(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-rn(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Co(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var l=31-rn(a),h=1<<l;h&s|e[l]&s&&(e[l]|=s),a&=~h}}function ms(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ia(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gs(){var e=at.p;return e!==0?e:(e=window.event,e===void 0?32:by(e.type))}function bu(e,s){var a=at.p;try{return at.p=e,s()}finally{at.p=a}}var ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+ue,Ae="__reactProps$"+ue,Pn="__reactContainer$"+ue,Ro="__reactEvents$"+ue,cf="__reactListeners$"+ue,ps="__reactHandles$"+ue,Su="__reactResources$"+ue,mr="__reactMarker$"+ue;function ys(e){delete e[Ve],delete e[Ae],delete e[Ro],delete e[cf],delete e[ps]}function ji(e){var s=e[Ve];if(s)return s;for(var a=e.parentNode;a;){if(s=a[Pn]||a[Ve]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=oy(e);e!==null;){if(a=e[Ve])return a;e=oy(e)}return s}e=a,a=e.parentNode}return null}function ci(e){if(e=e[Ve]||e[Pn]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function hi(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(r(33))}function hn(e){var s=e[Su];return s||(s=e[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ee(e){e[mr]=!0}var xo=new Set,sa={};function ei(e,s){Ui(e,s),Ui(e+"Capture",s)}function Ui(e,s){for(sa[e]=s,e=0;e<s.length;e++)xo.add(s[e])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wu={},gr={};function Cu(e){return sn.call(gr,e)?!0:sn.call(wu,e)?!1:Au.test(e)?gr[e]=!0:(wu[e]=!0,!1)}function _s(e,s,a){if(Cu(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function fi(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function Xe(e,s,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+l)}}var pr,Ru;function zi(e){if(pr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);pr=s&&s[1]||"",Ru=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pr+e+Ru}var ra=!1;function aa(e,s){if(!e||ra)return"";ra=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(K){var Y=K}Reflect.construct(e,[],ot)}else{try{ot.call()}catch(K){Y=K}e.call(ot.prototype)}}else{try{throw Error()}catch(K){Y=K}(ot=e())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],S=d[1];if(E&&S){var V=E.split(`
`),G=S.split(`
`);for(h=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===V.length||h===G.length)for(l=V.length-1,h=G.length-1;1<=l&&0<=h&&V[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(V[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||V[l]!==G[h]){var et=`
`+V[l].replace(" at new "," at ");return e.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",e.displayName)),et}while(1<=l&&0<=h);break}}}finally{ra=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?zi(a):""}function Io(e){switch(e.tag){case 26:case 27:case 5:return zi(e.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return aa(e.type,!1);case 11:return aa(e.type.render,!1);case 1:return aa(e.type,!0);case 31:return zi("Activity");default:return""}}function oa(e){try{var s="";do s+=Io(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function fn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Do(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hf(e){var s=Do(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),l=""+e[s];if(!e.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function la(e){e._valueTracker||(e._valueTracker=hf(e))}function Mo(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return e&&(l=Do(e)?e.checked?"true":"false":e.value),e=l,e!==a?(s.setValue(e),!0):!1}function yr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ff=/[\n"\\]/g;function we(e){return e.replace(ff,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rn(e,s,a,l,h,d,E,S){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),s!=null?E==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+fn(s)):e.value!==""+fn(s)&&(e.value=""+fn(s)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),s!=null?vs(e,E,fn(s)):a!=null?vs(e,E,fn(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+fn(S):e.removeAttribute("name")}function _r(e,s,a,l,h,d,E,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null))return;a=a!=null?""+fn(a):"",s=s!=null?""+fn(s):a,S||s===e.value||(e.value=s),e.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function vs(e,s,a){s==="number"&&yr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Bi(e,s,a,l){if(e=e.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=s.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+fn(a),s=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}s!==null||e[h].disabled||(s=e[h])}s!==null&&(s.selected=!0)}}function ee(e,s,a){if(s!=null&&(s=""+fn(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+fn(a):""}function vr(e,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(pt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=fn(s),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function jn(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var Er=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xu(e,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,a):typeof a!="number"||a===0||Er.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Vo(e,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&xu(e,h,l)}else for(var d in s)s.hasOwnProperty(d)&&xu(e,d,s[d])}function No(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ua(e){return mf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var qi=null;function Un(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hi=null,Gi=null;function Oo(e){var s=ci(e);if(s&&(e=s.stateNode)){var a=e[Ae]||null;t:switch(e=s.stateNode,s.type){case"input":if(Rn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+we(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==e&&l.form===e.form){var h=l[Ae]||null;if(!h)throw Error(r(90));Rn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===e.form&&Mo(l)}break t;case"textarea":ee(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Bi(e,!!a.multiple,s,!1)}}}var di=!1;function Iu(e,s,a){if(di)return e(s,a);di=!0;try{var l=e(s);return l}finally{if(di=!1,(Hi!==null||Gi!==null)&&(bc(),Hi&&(s=Hi,e=Gi,Gi=Hi=null,Oo(s),e)))for(s=0;s<e.length;s++)Oo(e[s])}}function Tr(e,s){var a=e.stateNode;if(a===null)return null;var l=a[Ae]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zn=!1;if(ni)try{var br={};Object.defineProperty(br,"passive",{get:function(){zn=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{zn=!1}var mi=null,Es=null,Fi=null;function Lo(){if(Fi)return Fi;var e,s=Es,a=s.length,l,h="value"in mi?mi.value:mi.textContent,d=h.length;for(e=0;e<a&&s[e]===h[e];e++);var E=a-e;for(l=1;l<=E&&s[a-l]===h[d-l];l++);return Fi=h.slice(e,1<l?1-l:void 0)}function gi(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pi(){return!0}function ko(){return!1}function Be(e){function s(a,l,h,d,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?pi:ko,this.isPropagationStopped=ko,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),s}var $t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Be($t),Sr=v({},$t,{view:0,detail:0}),Du=Be(Sr),ha,fa,yi,Ar=v({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yi&&(yi&&e.type==="mousemove"?(ha=e.screenX-yi.screenX,fa=e.screenY-yi.screenY):fa=ha=0,yi=e),ha)},movementY:function(e){return"movementY"in e?e.movementY:fa}}),Bn=Be(Ar),Mu=v({},Ar,{dataTransfer:0}),gf=Be(Mu),wr=v({},Sr,{relatedTarget:0}),da=Be(wr),Po=v({},$t,{animationName:0,elapsedTime:0,pseudoElement:0}),ma=Be(Po),Vu=v({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ga=Be(Vu),pf=v({},$t,{data:0}),jo=Be(pf),Cr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uo(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Ou[e])?!!s[e]:!1}function Rr(){return Uo}var Lu=v({},Sr,{key:function(e){if(e.key){var s=Cr[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pa=Be(Lu),ku=v({},Ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zo=Be(ku),Qi=v({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),Pu=Be(Qi),ju=v({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uu=Be(ju),zu=v({},Ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=Be(zu),dn=v({},$t,{newState:0,oldState:0}),Bu=Be(dn),qu=[9,13,27,32],_i=ni&&"CompositionEvent"in window,c=null;ni&&"documentMode"in document&&(c=document.documentMode);var p=ni&&"TextEvent"in window&&!c,_=ni&&(!_i||c&&8<c&&11>=c),A=" ",q=!1;function J(e,s){switch(e){case"keyup":return qu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qt=!1;function Ne(e,s){switch(e){case"compositionend":return gt(s);case"keypress":return s.which!==32?null:(q=!0,A);case"textInput":return e=s.data,e===A&&q?null:e;default:return null}}function Ht(e,s){if(qt)return e==="compositionend"||!_i&&J(e,s)?(e=Lo(),Fi=Es=mi=null,qt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _&&s.locale!=="ko"?null:s.data;default:return null}}var qe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oe(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!qe[e.type]:s==="textarea"}function Yi(e,s,a,l){Hi?Gi?Gi.push(l):Gi=[l]:Hi=l,s=xc(s,"onChange"),0<s.length&&(a=new ca("onChange","change",null,a,l),e.push({event:a,listeners:s}))}var $e=null,vi=null;function Bo(e){Z0(e,0)}function Hu(e){var s=hi(e);if(Mo(s))return e}function _g(e,s){if(e==="change")return s}var vg=!1;if(ni){var yf;if(ni){var _f="oninput"in document;if(!_f){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),_f=typeof Eg.oninput=="function"}yf=_f}else yf=!1;vg=yf&&(!document.documentMode||9<document.documentMode)}function Tg(){$e&&($e.detachEvent("onpropertychange",bg),vi=$e=null)}function bg(e){if(e.propertyName==="value"&&Hu(vi)){var s=[];Yi(s,vi,e,Un(e)),Iu(Bo,s)}}function T4(e,s,a){e==="focusin"?(Tg(),$e=s,vi=a,$e.attachEvent("onpropertychange",bg)):e==="focusout"&&Tg()}function b4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hu(vi)}function S4(e,s){if(e==="click")return Hu(s)}function A4(e,s){if(e==="input"||e==="change")return Hu(s)}function w4(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var xn=typeof Object.is=="function"?Object.is:w4;function qo(e,s){if(xn(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!sn.call(s,h)||!xn(e[h],s[h]))return!1}return!0}function Sg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ag(e,s){var a=Sg(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=s&&l>=s)return{node:a,offset:s-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Sg(a)}}function wg(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?wg(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Cg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=yr(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=yr(e.document)}return s}function vf(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var C4=ni&&"documentMode"in document&&11>=document.documentMode,_a=null,Ef=null,Ho=null,Tf=!1;function Rg(e,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Tf||_a==null||_a!==yr(l)||(l=_a,"selectionStart"in l&&vf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ho&&qo(Ho,l)||(Ho=l,l=xc(Ef,"onSelect"),0<l.length&&(s=new ca("onSelect","select",null,s,a),e.push({event:s,listeners:l}),s.target=_a)))}function xr(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var va={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},bf={},xg={};ni&&(xg=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Ir(e){if(bf[e])return bf[e];if(!va[e])return e;var s=va[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in xg)return bf[e]=s[a];return e}var Ig=Ir("animationend"),Dg=Ir("animationiteration"),Mg=Ir("animationstart"),R4=Ir("transitionrun"),x4=Ir("transitionstart"),I4=Ir("transitioncancel"),Vg=Ir("transitionend"),Ng=new Map,Sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sf.push("scrollEnd");function ii(e,s){Ng.set(e,s),ei(s,[e])}var Og=new WeakMap;function qn(e,s){if(typeof e=="object"&&e!==null){var a=Og.get(e);return a!==void 0?a:(s={value:e,source:s,stack:oa(s)},Og.set(e,s),s)}return{value:e,source:s,stack:oa(s)}}var Hn=[],Ea=0,Af=0;function Gu(){for(var e=Ea,s=Af=Ea=0;s<e;){var a=Hn[s];Hn[s++]=null;var l=Hn[s];Hn[s++]=null;var h=Hn[s];Hn[s++]=null;var d=Hn[s];if(Hn[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}d!==0&&Lg(a,h,d)}}function Fu(e,s,a,l){Hn[Ea++]=e,Hn[Ea++]=s,Hn[Ea++]=a,Hn[Ea++]=l,Af|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function wf(e,s,a,l){return Fu(e,s,a,l),Qu(e)}function Ta(e,s){return Fu(e,null,null,s),Qu(e)}function Lg(e,s,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&s!==null&&(h=31-rn(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[s]:l.push(s),s.lane=a|536870912),d):null}function Qu(e){if(50<ml)throw ml=0,Md=null,Error(r(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var ba={};function D4(e,s,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,s,a,l){return new D4(e,s,a,l)}function Cf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ki(e,s){var a=e.alternate;return a===null?(a=In(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function kg(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Yu(e,s,a,l,h,d){var E=0;if(l=e,typeof e=="function")Cf(e)&&(E=1);else if(typeof e=="string")E=V9(e,a,yt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case x:return e=In(31,a,s,h),e.elementType=x,e.lanes=d,e;case M:return Dr(a.children,h,d,s);case U:E=8,h|=24;break;case k:return e=In(12,a,s,h|2),e.elementType=k,e.lanes=d,e;case W:return e=In(13,a,s,h),e.elementType=W,e.lanes=d,e;case Q:return e=In(19,a,s,h),e.elementType=Q,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:case X:E=10;break t;case Z:E=9;break t;case st:E=11;break t;case D:E=14;break t;case w:E=16,l=null;break t}E=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return s=In(E,a,s,h),s.elementType=e,s.type=l,s.lanes=d,s}function Dr(e,s,a,l){return e=In(7,e,l,s),e.lanes=a,e}function Rf(e,s,a){return e=In(6,e,null,s),e.lanes=a,e}function xf(e,s,a){return s=In(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Sa=[],Aa=0,Ku=null,Xu=0,Gn=[],Fn=0,Mr=null,Xi=1,$i="";function Vr(e,s){Sa[Aa++]=Xu,Sa[Aa++]=Ku,Ku=e,Xu=s}function Pg(e,s,a){Gn[Fn++]=Xi,Gn[Fn++]=$i,Gn[Fn++]=Mr,Mr=e;var l=Xi;e=$i;var h=32-rn(l)-1;l&=~(1<<h),a+=1;var d=32-rn(s)+h;if(30<d){var E=h-h%5;d=(l&(1<<E)-1).toString(32),l>>=E,h-=E,Xi=1<<32-rn(s)+h|a<<h|l,$i=d+e}else Xi=1<<d|a<<h|l,$i=e}function If(e){e.return!==null&&(Vr(e,1),Pg(e,1,0))}function Df(e){for(;e===Ku;)Ku=Sa[--Aa],Sa[Aa]=null,Xu=Sa[--Aa],Sa[Aa]=null;for(;e===Mr;)Mr=Gn[--Fn],Gn[Fn]=null,$i=Gn[--Fn],Gn[Fn]=null,Xi=Gn[--Fn],Gn[Fn]=null}var mn=null,_e=null,Xt=!1,Nr=null,Ei=!1,Mf=Error(r(519));function Or(e){var s=Error(r(418,""));throw Qo(qn(s,e)),Mf}function jg(e){var s=e.stateNode,a=e.type,l=e.memoizedProps;switch(s[Ve]=e,s[Ae]=l,a){case"dialog":zt("cancel",s),zt("close",s);break;case"iframe":case"object":case"embed":zt("load",s);break;case"video":case"audio":for(a=0;a<pl.length;a++)zt(pl[a],s);break;case"source":zt("error",s);break;case"img":case"image":case"link":zt("error",s),zt("load",s);break;case"details":zt("toggle",s);break;case"input":zt("invalid",s),_r(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),la(s);break;case"select":zt("invalid",s);break;case"textarea":zt("invalid",s),vr(s,l.value,l.defaultValue,l.children),la(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||ey(s.textContent,a)?(l.popover!=null&&(zt("beforetoggle",s),zt("toggle",s)),l.onScroll!=null&&zt("scroll",s),l.onScrollEnd!=null&&zt("scrollend",s),l.onClick!=null&&(s.onclick=Ic),s=!0):s=!1,s||Or(e)}function Ug(e){for(mn=e.return;mn;)switch(mn.tag){case 5:case 13:Ei=!1;return;case 27:case 3:Ei=!0;return;default:mn=mn.return}}function Go(e){if(e!==mn)return!1;if(!Xt)return Ug(e),Xt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Yd(e.type,e.memoizedProps)),a=!a),a&&_e&&Or(e),Ug(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){_e=ri(e.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}_e=null}}else s===27?(s=_e,ks(e.type)?(e=Zd,Zd=null,_e=e):_e=s):_e=mn?ri(e.stateNode.nextSibling):null;return!0}function Fo(){_e=mn=null,Xt=!1}function zg(){var e=Nr;return e!==null&&(_n===null?_n=e:_n.push.apply(_n,e),Nr=null),e}function Qo(e){Nr===null?Nr=[e]:Nr.push(e)}var Vf=tt(null),Lr=null,Zi=null;function Ts(e,s,a){rt(Vf,s._currentValue),s._currentValue=a}function Ji(e){e._currentValue=Vf.current,nt(Vf)}function Nf(e,s,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===a)break;e=e.return}}function Of(e,s,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var E=h.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=h;for(var V=0;V<s.length;V++)if(S.context===s[V]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Nf(d.return,a,e),l||(E=null);break t}d=S.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Nf(E,a,e),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===e){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function Yo(e,s,a,l){e=null;for(var h=s,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=h.type;xn(h.pendingProps.value,E.value)||(e!==null?e.push(S):e=[S])}}else if(h===Tt.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(bl):e=[bl])}h=h.return}e!==null&&Of(s,e,a,l),s.flags|=262144}function $u(e){for(e=e.firstContext;e!==null;){if(!xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kr(e){Lr=e,Zi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function an(e){return Bg(Lr,e)}function Zu(e,s){return Lr===null&&kr(e),Bg(e,s)}function Bg(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Zi===null){if(e===null)throw Error(r(308));Zi=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Zi=Zi.next=s;return a}var M4=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},V4=n.unstable_scheduleCallback,N4=n.unstable_NormalPriority,Le={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lf(){return{controller:new M4,data:new Map,refCount:0}}function Ko(e){e.refCount--,e.refCount===0&&V4(N4,function(){e.controller.abort()})}var Xo=null,kf=0,wa=0,Ca=null;function O4(e,s){if(Xo===null){var a=Xo=[];kf=0,wa=jd(),Ca={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kf++,s.then(qg,qg),s}function qg(){if(--kf===0&&Xo!==null){Ca!==null&&(Ca.status="fulfilled");var e=Xo;Xo=null,wa=0,Ca=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function L4(e,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Hg=F.S;F.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&O4(e,s),Hg!==null&&Hg(e,s)};var Pr=tt(null);function Pf(){var e=Pr.current;return e!==null?e:oe.pooledCache}function Ju(e,s){s===null?rt(Pr,Pr.current):rt(Pr,s.pool)}function Gg(){var e=Pf();return e===null?null:{parent:Le._currentValue,pool:e}}var $o=Error(r(460)),Fg=Error(r(474)),Wu=Error(r(542)),jf={then:function(){}};function Qg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tc(){}function Yg(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(tc,tc),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Xg(e),e;default:if(typeof s.status=="string")s.then(tc,tc);else{if(e=oe,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Xg(e),e}throw Zo=s,$o}}var Zo=null;function Kg(){if(Zo===null)throw Error(r(459));var e=Zo;return Zo=null,e}function Xg(e){if(e===$o||e===Wu)throw Error(r(483))}var bs=!1;function Uf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zf(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function As(e,s,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Wt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=Qu(e),Lg(e,null,a),s}return Fu(e,l,s,a),Qu(e)}function Jo(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,Co(e,a)}}function Bf(e,s){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?h=d=s:d=d.next=s}else h=d=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var qf=!1;function Wo(){if(qf){var e=Ca;if(e!==null)throw e}}function tl(e,s,a,l){qf=!1;var h=e.updateQueue;bs=!1;var d=h.firstBaseUpdate,E=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var V=S,G=V.next;V.next=null,E===null?d=G:E.next=G,E=V;var et=e.alternate;et!==null&&(et=et.updateQueue,S=et.lastBaseUpdate,S!==E&&(S===null?et.firstBaseUpdate=G:S.next=G,et.lastBaseUpdate=V))}if(d!==null){var ot=h.baseState;E=0,et=G=V=null,S=d;do{var Y=S.lane&-536870913,K=Y!==S.lane;if(K?(Gt&Y)===Y:(l&Y)===Y){Y!==0&&Y===wa&&(qf=!0),et!==null&&(et=et.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var It=e,wt=S;Y=s;var se=a;switch(wt.tag){case 1:if(It=wt.payload,typeof It=="function"){ot=It.call(se,ot,Y);break t}ot=It;break t;case 3:It.flags=It.flags&-65537|128;case 0:if(It=wt.payload,Y=typeof It=="function"?It.call(se,ot,Y):It,Y==null)break t;ot=v({},ot,Y);break t;case 2:bs=!0}}Y=S.callback,Y!==null&&(e.flags|=64,K&&(e.flags|=8192),K=h.callbacks,K===null?h.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},et===null?(G=et=K,V=ot):et=et.next=K,E|=Y;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;K=S,S=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);et===null&&(V=ot),h.baseState=V,h.firstBaseUpdate=G,h.lastBaseUpdate=et,d===null&&(h.shared.lanes=0),Vs|=E,e.lanes=E,e.memoizedState=ot}}function $g(e,s){if(typeof e!="function")throw Error(r(191,e));e.call(s)}function Zg(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)$g(a[e],s)}var Ra=tt(null),ec=tt(0);function Jg(e,s){e=rs,rt(ec,e),rt(Ra,s),rs=e|s.baseLanes}function Hf(){rt(ec,rs),rt(Ra,Ra.current)}function Gf(){rs=ec.current,nt(Ra),nt(ec)}var ws=0,kt=null,ne=null,Ce=null,nc=!1,xa=!1,jr=!1,ic=0,el=0,Ia=null,k4=0;function Te(){throw Error(r(321))}function Ff(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!xn(e[a],s[a]))return!1;return!0}function Qf(e,s,a,l,h,d){return ws=d,kt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=e===null||e.memoizedState===null?Lp:kp,jr=!1,d=a(l,h),jr=!1,xa&&(d=tp(s,a,l,h)),Wg(e),d}function Wg(e){F.H=uc;var s=ne!==null&&ne.next!==null;if(ws=0,Ce=ne=kt=null,nc=!1,el=0,Ia=null,s)throw Error(r(300));e===null||He||(e=e.dependencies,e!==null&&$u(e)&&(He=!0))}function tp(e,s,a,l){kt=e;var h=0;do{if(xa&&(Ia=null),el=0,xa=!1,25<=h)throw Error(r(301));if(h+=1,Ce=ne=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}F.H=H4,d=s(a,l)}while(xa);return d}function P4(){var e=F.H,s=e.useState()[0];return s=typeof s.then=="function"?nl(s):s,e=e.useState()[0],(ne!==null?ne.memoizedState:null)!==e&&(kt.flags|=1024),s}function Yf(){var e=ic!==0;return ic=0,e}function Kf(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function Xf(e){if(nc){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}nc=!1}ws=0,Ce=ne=kt=null,xa=!1,el=ic=0,Ia=null}function pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?kt.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function Re(){if(ne===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=ne.next;var s=Ce===null?kt.memoizedState:Ce.next;if(s!==null)Ce=s,ne=e;else{if(e===null)throw kt.alternate===null?Error(r(467)):Error(r(310));ne=e,e={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},Ce===null?kt.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function $f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(e){var s=el;return el+=1,Ia===null&&(Ia=[]),e=Yg(Ia,e,s),s=kt,(Ce===null?s.memoizedState:Ce.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?Lp:kp),e}function sc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return nl(e);if(e.$$typeof===X)return an(e)}throw Error(r(438,String(e)))}function Zf(e){var s=null,a=kt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=kt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=$f(),kt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),l=0;l<e;l++)a[l]=L;return s.index++,a}function Wi(e,s){return typeof s=="function"?s(e):s}function rc(e){var s=Re();return Jf(s,ne,e)}function Jf(e,s,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var E=h.next;h.next=d.next,d.next=E}s.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{s=h.next;var S=E=null,V=null,G=s,et=!1;do{var ot=G.lane&-536870913;if(ot!==G.lane?(Gt&ot)===ot:(ws&ot)===ot){var Y=G.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ot===wa&&(et=!0);else if((ws&Y)===Y){G=G.next,Y===wa&&(et=!0);continue}else ot={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(S=V=ot,E=d):V=V.next=ot,kt.lanes|=Y,Vs|=Y;ot=G.action,jr&&a(d,ot),d=G.hasEagerState?G.eagerState:a(d,ot)}else Y={lane:ot,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(S=V=Y,E=d):V=V.next=Y,kt.lanes|=ot,Vs|=ot;G=G.next}while(G!==null&&G!==s);if(V===null?E=d:V.next=S,!xn(d,e.memoizedState)&&(He=!0,et&&(a=Ca,a!==null)))throw a;e.memoizedState=d,e.baseState=E,e.baseQueue=V,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Wf(e){var s=Re(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do d=e(d,E.action),E=E.next;while(E!==h);xn(d,s.memoizedState)||(He=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function ep(e,s,a){var l=kt,h=Re(),d=Xt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var E=!xn((ne||h).memoizedState,a);E&&(h.memoizedState=a,He=!0),h=h.queue;var S=sp.bind(null,l,h,e);if(il(2048,8,S,[e]),h.getSnapshot!==s||E||Ce!==null&&Ce.memoizedState.tag&1){if(l.flags|=2048,Da(9,ac(),ip.bind(null,l,h,a,s),null),oe===null)throw Error(r(349));d||(ws&124)!==0||np(l,s,a)}return a}function np(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=kt.updateQueue,s===null?(s=$f(),kt.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function ip(e,s,a,l){s.value=a,s.getSnapshot=l,rp(s)&&ap(e)}function sp(e,s,a){return a(function(){rp(s)&&ap(e)})}function rp(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!xn(e,a)}catch{return!0}}function ap(e){var s=Ta(e,2);s!==null&&On(s,e,2)}function td(e){var s=pn();if(typeof e=="function"){var a=e;if(e=a(),jr){Cn(!0);try{a()}finally{Cn(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},s}function op(e,s,a,l){return e.baseState=a,Jf(e,ne,typeof l=="function"?l:Wi)}function j4(e,s,a,l,h){if(lc(e))throw Error(r(485));if(e=s.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};F.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,lp(s,d)):(d.next=a.next,s.pending=a.next=d)}}function lp(e,s){var a=s.action,l=s.payload,h=e.state;if(s.isTransition){var d=F.T,E={};F.T=E;try{var S=a(h,l),V=F.S;V!==null&&V(E,S),up(e,s,S)}catch(G){ed(e,s,G)}finally{F.T=d}}else try{d=a(h,l),up(e,s,d)}catch(G){ed(e,s,G)}}function up(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){cp(e,s,l)},function(l){return ed(e,s,l)}):cp(e,s,a)}function cp(e,s,a){s.status="fulfilled",s.value=a,hp(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,lp(e,a)))}function ed(e,s,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,hp(s),s=s.next;while(s!==l)}e.action=null}function hp(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function fp(e,s){return s}function dp(e,s){if(Xt){var a=oe.formState;if(a!==null){t:{var l=kt;if(Xt){if(_e){e:{for(var h=_e,d=Ei;h.nodeType!==8;){if(!d){h=null;break e}if(h=ri(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){_e=ri(h.nextSibling),l=h.data==="F!";break t}}Or(l)}l=!1}l&&(s=a[0])}}return a=pn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:s},a.queue=l,a=Vp.bind(null,kt,l),l.dispatch=a,l=td(!1),d=ad.bind(null,kt,!1,l.queue),l=pn(),h={state:s,dispatch:null,action:e,pending:null},l.queue=h,a=j4.bind(null,kt,h,d,a),h.dispatch=a,l.memoizedState=e,[s,a,!1]}function mp(e){var s=Re();return gp(s,ne,e)}function gp(e,s,a){if(s=Jf(e,s,fp)[0],e=rc(Wi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=nl(s)}catch(E){throw E===$o?Wu:E}else l=s;s=Re();var h=s.queue,d=h.dispatch;return a!==s.memoizedState&&(kt.flags|=2048,Da(9,ac(),U4.bind(null,h,a),null)),[l,d,e]}function U4(e,s){e.action=s}function pp(e){var s=Re(),a=ne;if(a!==null)return gp(s,a,e);Re(),s=s.memoizedState,a=Re();var l=a.queue.dispatch;return a.memoizedState=e,[s,l,!1]}function Da(e,s,a,l){return e={tag:e,create:a,deps:l,inst:s,next:null},s=kt.updateQueue,s===null&&(s=$f(),kt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,s.lastEffect=e),e}function ac(){return{destroy:void 0,resource:void 0}}function yp(){return Re().memoizedState}function oc(e,s,a,l){var h=pn();l=l===void 0?null:l,kt.flags|=e,h.memoizedState=Da(1|s,ac(),a,l)}function il(e,s,a,l){var h=Re();l=l===void 0?null:l;var d=h.memoizedState.inst;ne!==null&&l!==null&&Ff(l,ne.memoizedState.deps)?h.memoizedState=Da(s,d,a,l):(kt.flags|=e,h.memoizedState=Da(1|s,d,a,l))}function _p(e,s){oc(8390656,8,e,s)}function vp(e,s){il(2048,8,e,s)}function Ep(e,s){return il(4,2,e,s)}function Tp(e,s){return il(4,4,e,s)}function bp(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Sp(e,s,a){a=a!=null?a.concat([e]):null,il(4,4,bp.bind(null,s,e),a)}function nd(){}function Ap(e,s){var a=Re();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Ff(s,l[1])?l[0]:(a.memoizedState=[e,s],e)}function wp(e,s){var a=Re();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Ff(s,l[1]))return l[0];if(l=e(),jr){Cn(!0);try{e()}finally{Cn(!1)}}return a.memoizedState=[l,s],l}function id(e,s,a){return a===void 0||(ws&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=x0(),kt.lanes|=e,Vs|=e,a)}function Cp(e,s,a,l){return xn(a,s)?a:Ra.current!==null?(e=id(e,a,l),xn(e,s)||(He=!0),e):(ws&42)===0?(He=!0,e.memoizedState=a):(e=x0(),kt.lanes|=e,Vs|=e,s)}function Rp(e,s,a,l,h){var d=at.p;at.p=d!==0&&8>d?d:8;var E=F.T,S={};F.T=S,ad(e,!1,s,a);try{var V=h(),G=F.S;if(G!==null&&G(S,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var et=L4(V,l);sl(e,s,et,Nn(e))}else sl(e,s,l,Nn(e))}catch(ot){sl(e,s,{then:function(){},status:"rejected",reason:ot},Nn())}finally{at.p=d,F.T=E}}function z4(){}function sd(e,s,a,l){if(e.tag!==5)throw Error(r(476));var h=xp(e).queue;Rp(e,h,s,ht,a===null?z4:function(){return Ip(e),a(l)})}function xp(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:ht},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function Ip(e){var s=xp(e).next.queue;sl(e,s,{},Nn())}function rd(){return an(bl)}function Dp(){return Re().memoizedState}function Mp(){return Re().memoizedState}function B4(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=Nn();e=Ss(a);var l=As(s,e,a);l!==null&&(On(l,s,a),Jo(l,s,a)),s={cache:Lf()},e.payload=s;return}s=s.return}}function q4(e,s,a){var l=Nn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},lc(e)?Np(s,a):(a=wf(e,s,a,l),a!==null&&(On(a,e,l),Op(a,s,l)))}function Vp(e,s,a){var l=Nn();sl(e,s,a,l)}function sl(e,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(lc(e))Np(s,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var E=s.lastRenderedState,S=d(E,a);if(h.hasEagerState=!0,h.eagerState=S,xn(S,E))return Fu(e,s,h,0),oe===null&&Gu(),!1}catch{}finally{}if(a=wf(e,s,h,l),a!==null)return On(a,e,l),Op(a,s,l),!0}return!1}function ad(e,s,a,l){if(l={lane:2,revertLane:jd(),action:l,hasEagerState:!1,eagerState:null,next:null},lc(e)){if(s)throw Error(r(479))}else s=wf(e,a,l,2),s!==null&&On(s,e,2)}function lc(e){var s=e.alternate;return e===kt||s!==null&&s===kt}function Np(e,s){xa=nc=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function Op(e,s,a){if((a&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,Co(e,a)}}var uc={readContext:an,use:sc,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useLayoutEffect:Te,useInsertionEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useSyncExternalStore:Te,useId:Te,useHostTransitionStatus:Te,useFormState:Te,useActionState:Te,useOptimistic:Te,useMemoCache:Te,useCacheRefresh:Te},Lp={readContext:an,use:sc,useCallback:function(e,s){return pn().memoizedState=[e,s===void 0?null:s],e},useContext:an,useEffect:_p,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,oc(4194308,4,bp.bind(null,s,e),a)},useLayoutEffect:function(e,s){return oc(4194308,4,e,s)},useInsertionEffect:function(e,s){oc(4,2,e,s)},useMemo:function(e,s){var a=pn();s=s===void 0?null:s;var l=e();if(jr){Cn(!0);try{e()}finally{Cn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(e,s,a){var l=pn();if(a!==void 0){var h=a(s);if(jr){Cn(!0);try{a(s)}finally{Cn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=q4.bind(null,kt,e),[l.memoizedState,e]},useRef:function(e){var s=pn();return e={current:e},s.memoizedState=e},useState:function(e){e=td(e);var s=e.queue,a=Vp.bind(null,kt,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:nd,useDeferredValue:function(e,s){var a=pn();return id(a,e,s)},useTransition:function(){var e=td(!1);return e=Rp.bind(null,kt,e.queue,!0,!1),pn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var l=kt,h=pn();if(Xt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),oe===null)throw Error(r(349));(Gt&124)!==0||np(l,s,a)}h.memoizedState=a;var d={value:a,getSnapshot:s};return h.queue=d,_p(sp.bind(null,l,d,e),[e]),l.flags|=2048,Da(9,ac(),ip.bind(null,l,d,a,s),null),a},useId:function(){var e=pn(),s=oe.identifierPrefix;if(Xt){var a=$i,l=Xi;a=(l&~(1<<32-rn(l)-1)).toString(32)+a,s=""+s+"R"+a,a=ic++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=k4++,s=""+s+"r"+a.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:rd,useFormState:dp,useActionState:dp,useOptimistic:function(e){var s=pn();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=ad.bind(null,kt,!0,a),a.dispatch=s,[e,s]},useMemoCache:Zf,useCacheRefresh:function(){return pn().memoizedState=B4.bind(null,kt)}},kp={readContext:an,use:sc,useCallback:Ap,useContext:an,useEffect:vp,useImperativeHandle:Sp,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:wp,useReducer:rc,useRef:yp,useState:function(){return rc(Wi)},useDebugValue:nd,useDeferredValue:function(e,s){var a=Re();return Cp(a,ne.memoizedState,e,s)},useTransition:function(){var e=rc(Wi)[0],s=Re().memoizedState;return[typeof e=="boolean"?e:nl(e),s]},useSyncExternalStore:ep,useId:Dp,useHostTransitionStatus:rd,useFormState:mp,useActionState:mp,useOptimistic:function(e,s){var a=Re();return op(a,ne,e,s)},useMemoCache:Zf,useCacheRefresh:Mp},H4={readContext:an,use:sc,useCallback:Ap,useContext:an,useEffect:vp,useImperativeHandle:Sp,useInsertionEffect:Ep,useLayoutEffect:Tp,useMemo:wp,useReducer:Wf,useRef:yp,useState:function(){return Wf(Wi)},useDebugValue:nd,useDeferredValue:function(e,s){var a=Re();return ne===null?id(a,e,s):Cp(a,ne.memoizedState,e,s)},useTransition:function(){var e=Wf(Wi)[0],s=Re().memoizedState;return[typeof e=="boolean"?e:nl(e),s]},useSyncExternalStore:ep,useId:Dp,useHostTransitionStatus:rd,useFormState:pp,useActionState:pp,useOptimistic:function(e,s){var a=Re();return ne!==null?op(a,ne,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:Mp},Ma=null,rl=0;function cc(e){var s=rl;return rl+=1,Ma===null&&(Ma=[]),Yg(Ma,e,s)}function al(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function hc(e,s){throw s.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(s),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Pp(e){var s=e._init;return s(e._payload)}function jp(e){function s(z,P){if(e){var H=z.deletions;H===null?(z.deletions=[P],z.flags|=16):H.push(P)}}function a(z,P){if(!e)return null;for(;P!==null;)s(z,P),P=P.sibling;return null}function l(z){for(var P=new Map;z!==null;)z.key!==null?P.set(z.key,z):P.set(z.index,z),z=z.sibling;return P}function h(z,P){return z=Ki(z,P),z.index=0,z.sibling=null,z}function d(z,P,H){return z.index=H,e?(H=z.alternate,H!==null?(H=H.index,H<P?(z.flags|=67108866,P):H):(z.flags|=67108866,P)):(z.flags|=1048576,P)}function E(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function S(z,P,H,it){return P===null||P.tag!==6?(P=Rf(H,z.mode,it),P.return=z,P):(P=h(P,H),P.return=z,P)}function V(z,P,H,it){var vt=H.type;return vt===M?et(z,P,H.props.children,it,H.key):P!==null&&(P.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===w&&Pp(vt)===P.type)?(P=h(P,H.props),al(P,H),P.return=z,P):(P=Yu(H.type,H.key,H.props,null,z.mode,it),al(P,H),P.return=z,P)}function G(z,P,H,it){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=xf(H,z.mode,it),P.return=z,P):(P=h(P,H.children||[]),P.return=z,P)}function et(z,P,H,it,vt){return P===null||P.tag!==7?(P=Dr(H,z.mode,it,vt),P.return=z,P):(P=h(P,H),P.return=z,P)}function ot(z,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Rf(""+P,z.mode,H),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case T:return H=Yu(P.type,P.key,P.props,null,z.mode,H),al(H,P),H.return=z,H;case R:return P=xf(P,z.mode,H),P.return=z,P;case w:var it=P._init;return P=it(P._payload),ot(z,P,H)}if(pt(P)||j(P))return P=Dr(P,z.mode,H,null),P.return=z,P;if(typeof P.then=="function")return ot(z,cc(P),H);if(P.$$typeof===X)return ot(z,Zu(z,P),H);hc(z,P)}return null}function Y(z,P,H,it){var vt=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return vt!==null?null:S(z,P,""+H,it);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===vt?V(z,P,H,it):null;case R:return H.key===vt?G(z,P,H,it):null;case w:return vt=H._init,H=vt(H._payload),Y(z,P,H,it)}if(pt(H)||j(H))return vt!==null?null:et(z,P,H,it,null);if(typeof H.then=="function")return Y(z,P,cc(H),it);if(H.$$typeof===X)return Y(z,P,Zu(z,H),it);hc(z,H)}return null}function K(z,P,H,it,vt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return z=z.get(H)||null,S(P,z,""+it,vt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case T:return z=z.get(it.key===null?H:it.key)||null,V(P,z,it,vt);case R:return z=z.get(it.key===null?H:it.key)||null,G(P,z,it,vt);case w:var jt=it._init;return it=jt(it._payload),K(z,P,H,it,vt)}if(pt(it)||j(it))return z=z.get(H)||null,et(P,z,it,vt,null);if(typeof it.then=="function")return K(z,P,H,cc(it),vt);if(it.$$typeof===X)return K(z,P,H,Zu(P,it),vt);hc(P,it)}return null}function It(z,P,H,it){for(var vt=null,jt=null,bt=P,Ct=P=0,Fe=null;bt!==null&&Ct<H.length;Ct++){bt.index>Ct?(Fe=bt,bt=null):Fe=bt.sibling;var Kt=Y(z,bt,H[Ct],it);if(Kt===null){bt===null&&(bt=Fe);break}e&&bt&&Kt.alternate===null&&s(z,bt),P=d(Kt,P,Ct),jt===null?vt=Kt:jt.sibling=Kt,jt=Kt,bt=Fe}if(Ct===H.length)return a(z,bt),Xt&&Vr(z,Ct),vt;if(bt===null){for(;Ct<H.length;Ct++)bt=ot(z,H[Ct],it),bt!==null&&(P=d(bt,P,Ct),jt===null?vt=bt:jt.sibling=bt,jt=bt);return Xt&&Vr(z,Ct),vt}for(bt=l(bt);Ct<H.length;Ct++)Fe=K(bt,z,Ct,H[Ct],it),Fe!==null&&(e&&Fe.alternate!==null&&bt.delete(Fe.key===null?Ct:Fe.key),P=d(Fe,P,Ct),jt===null?vt=Fe:jt.sibling=Fe,jt=Fe);return e&&bt.forEach(function(Bs){return s(z,Bs)}),Xt&&Vr(z,Ct),vt}function wt(z,P,H,it){if(H==null)throw Error(r(151));for(var vt=null,jt=null,bt=P,Ct=P=0,Fe=null,Kt=H.next();bt!==null&&!Kt.done;Ct++,Kt=H.next()){bt.index>Ct?(Fe=bt,bt=null):Fe=bt.sibling;var Bs=Y(z,bt,Kt.value,it);if(Bs===null){bt===null&&(bt=Fe);break}e&&bt&&Bs.alternate===null&&s(z,bt),P=d(Bs,P,Ct),jt===null?vt=Bs:jt.sibling=Bs,jt=Bs,bt=Fe}if(Kt.done)return a(z,bt),Xt&&Vr(z,Ct),vt;if(bt===null){for(;!Kt.done;Ct++,Kt=H.next())Kt=ot(z,Kt.value,it),Kt!==null&&(P=d(Kt,P,Ct),jt===null?vt=Kt:jt.sibling=Kt,jt=Kt);return Xt&&Vr(z,Ct),vt}for(bt=l(bt);!Kt.done;Ct++,Kt=H.next())Kt=K(bt,z,Ct,Kt.value,it),Kt!==null&&(e&&Kt.alternate!==null&&bt.delete(Kt.key===null?Ct:Kt.key),P=d(Kt,P,Ct),jt===null?vt=Kt:jt.sibling=Kt,jt=Kt);return e&&bt.forEach(function(G9){return s(z,G9)}),Xt&&Vr(z,Ct),vt}function se(z,P,H,it){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:t:{for(var vt=H.key;P!==null;){if(P.key===vt){if(vt=H.type,vt===M){if(P.tag===7){a(z,P.sibling),it=h(P,H.props.children),it.return=z,z=it;break t}}else if(P.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===w&&Pp(vt)===P.type){a(z,P.sibling),it=h(P,H.props),al(it,H),it.return=z,z=it;break t}a(z,P);break}else s(z,P);P=P.sibling}H.type===M?(it=Dr(H.props.children,z.mode,it,H.key),it.return=z,z=it):(it=Yu(H.type,H.key,H.props,null,z.mode,it),al(it,H),it.return=z,z=it)}return E(z);case R:t:{for(vt=H.key;P!==null;){if(P.key===vt)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){a(z,P.sibling),it=h(P,H.children||[]),it.return=z,z=it;break t}else{a(z,P);break}else s(z,P);P=P.sibling}it=xf(H,z.mode,it),it.return=z,z=it}return E(z);case w:return vt=H._init,H=vt(H._payload),se(z,P,H,it)}if(pt(H))return It(z,P,H,it);if(j(H)){if(vt=j(H),typeof vt!="function")throw Error(r(150));return H=vt.call(H),wt(z,P,H,it)}if(typeof H.then=="function")return se(z,P,cc(H),it);if(H.$$typeof===X)return se(z,P,Zu(z,H),it);hc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(a(z,P.sibling),it=h(P,H),it.return=z,z=it):(a(z,P),it=Rf(H,z.mode,it),it.return=z,z=it),E(z)):a(z,P)}return function(z,P,H,it){try{rl=0;var vt=se(z,P,H,it);return Ma=null,vt}catch(bt){if(bt===$o||bt===Wu)throw bt;var jt=In(29,bt,null,z.mode);return jt.lanes=it,jt.return=z,jt}finally{}}}var Va=jp(!0),Up=jp(!1),Qn=tt(null),Ti=null;function Cs(e){var s=e.alternate;rt(ke,ke.current&1),rt(Qn,e),Ti===null&&(s===null||Ra.current!==null||s.memoizedState!==null)&&(Ti=e)}function zp(e){if(e.tag===22){if(rt(ke,ke.current),rt(Qn,e),Ti===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(Ti=e)}}else Rs()}function Rs(){rt(ke,ke.current),rt(Qn,Qn.current)}function ts(e){nt(Qn),Ti===e&&(Ti=null),nt(ke)}var ke=tt(0);function fc(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||$d(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function od(e,s,a,l){s=e.memoizedState,a=a(l,s),a=a==null?s:v({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ld={enqueueSetState:function(e,s,a){e=e._reactInternals;var l=Nn(),h=Ss(l);h.payload=s,a!=null&&(h.callback=a),s=As(e,h,l),s!==null&&(On(s,e,l),Jo(s,e,l))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var l=Nn(),h=Ss(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=As(e,h,l),s!==null&&(On(s,e,l),Jo(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=Nn(),l=Ss(a);l.tag=2,s!=null&&(l.callback=s),s=As(e,l,a),s!==null&&(On(s,e,a),Jo(s,e,a))}};function Bp(e,s,a,l,h,d,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,E):s.prototype&&s.prototype.isPureReactComponent?!qo(a,l)||!qo(h,d):!0}function qp(e,s,a,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==e&&ld.enqueueReplaceState(s,s.state,null)}function Ur(e,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(e=e.defaultProps){a===s&&(a=v({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var dc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Hp(e){dc(e)}function Gp(e){console.error(e)}function Fp(e){dc(e)}function mc(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Qp(e,s,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ud(e,s,a){return a=Ss(a),a.tag=3,a.payload={element:null},a.callback=function(){mc(e,s)},a}function Yp(e){return e=Ss(e),e.tag=3,e}function Kp(e,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){Qp(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){Qp(s,a,l),typeof h!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function G4(e,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Yo(s,a,h,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return Ti===null?Nd():a.alternate===null&&ve===0&&(ve=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===jf?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Ld(e,l,h)),!1;case 22:return a.flags|=65536,l===jf?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Ld(e,l,h)),!1}throw Error(r(435,a.tag))}return Ld(e,l,h),Nd(),!1}if(Xt)return s=Qn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==Mf&&(e=Error(r(422),{cause:l}),Qo(qn(e,a)))):(l!==Mf&&(s=Error(r(423),{cause:l}),Qo(qn(s,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=qn(l,a),h=ud(e.stateNode,l,h),Bf(e,h),ve!==4&&(ve=2)),!1;var d=Error(r(520),{cause:l});if(d=qn(d,a),dl===null?dl=[d]:dl.push(d),ve!==4&&(ve=2),s===null)return!0;l=qn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=ud(a.stateNode,l,e),Bf(a,e),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ns===null||!Ns.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Yp(h),Kp(h,e,a,l),Bf(a,h),!1}a=a.return}while(a!==null);return!1}var Xp=Error(r(461)),He=!1;function Ze(e,s,a,l){s.child=e===null?Up(s,null,a,l):Va(s,e.child,a,l)}function $p(e,s,a,l,h){a=a.render;var d=s.ref;if("ref"in l){var E={};for(var S in l)S!=="ref"&&(E[S]=l[S])}else E=l;return kr(s),l=Qf(e,s,a,E,d,h),S=Yf(),e!==null&&!He?(Kf(e,s,h),es(e,s,h)):(Xt&&S&&If(s),s.flags|=1,Ze(e,s,l,h),s.child)}function Zp(e,s,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!Cf(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Jp(e,s,d,l,h)):(e=Yu(a.type,null,l,s,s.mode,h),e.ref=s.ref,e.return=s,s.child=e)}if(d=e.child,!yd(e,h)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:qo,a(E,l)&&e.ref===s.ref)return es(e,s,h)}return s.flags|=1,e=Ki(d,l),e.ref=s.ref,e.return=s,s.child=e}function Jp(e,s,a,l,h){if(e!==null){var d=e.memoizedProps;if(qo(d,l)&&e.ref===s.ref)if(He=!1,s.pendingProps=l=d,yd(e,h))(e.flags&131072)!==0&&(He=!0);else return s.lanes=e.lanes,es(e,s,h)}return cd(e,s,a,l,h)}function Wp(e,s,a){var l=s.pendingProps,h=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(h=s.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;s.childLanes=d&~l}else s.childLanes=0,s.child=null;return t0(e,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ju(s,d!==null?d.cachePool:null),d!==null?Jg(s,d):Hf(),zp(s);else return s.lanes=s.childLanes=536870912,t0(e,s,d!==null?d.baseLanes|a:a,a)}else d!==null?(Ju(s,d.cachePool),Jg(s,d),Rs(),s.memoizedState=null):(e!==null&&Ju(s,null),Hf(),Rs());return Ze(e,s,h,a),s.child}function t0(e,s,a,l){var h=Pf();return h=h===null?null:{parent:Le._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},e!==null&&Ju(s,null),Hf(),zp(s),e!==null&&Yo(e,s,l,!0),null}function gc(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function cd(e,s,a,l,h){return kr(s),a=Qf(e,s,a,l,void 0,h),l=Yf(),e!==null&&!He?(Kf(e,s,h),es(e,s,h)):(Xt&&l&&If(s),s.flags|=1,Ze(e,s,a,h),s.child)}function e0(e,s,a,l,h,d){return kr(s),s.updateQueue=null,a=tp(s,l,a,h),Wg(e),l=Yf(),e!==null&&!He?(Kf(e,s,d),es(e,s,d)):(Xt&&l&&If(s),s.flags|=1,Ze(e,s,a,d),s.child)}function n0(e,s,a,l,h){if(kr(s),s.stateNode===null){var d=ba,E=a.contextType;typeof E=="object"&&E!==null&&(d=an(E)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ld,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},Uf(s),E=a.contextType,d.context=typeof E=="object"&&E!==null?an(E):ba,d.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(od(s,a,E,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&ld.enqueueReplaceState(d,d.state,null),tl(s,l,d,h),Wo(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){d=s.stateNode;var S=s.memoizedProps,V=Ur(a,S);d.props=V;var G=d.context,et=a.contextType;E=ba,typeof et=="object"&&et!==null&&(E=an(et));var ot=a.getDerivedStateFromProps;et=typeof ot=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,et||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||G!==E)&&qp(s,d,l,E),bs=!1;var Y=s.memoizedState;d.state=Y,tl(s,l,d,h),Wo(),G=s.memoizedState,S||Y!==G||bs?(typeof ot=="function"&&(od(s,a,ot,l),G=s.memoizedState),(V=bs||Bp(s,a,V,l,Y,G,E))?(et||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=G),d.props=l,d.state=G,d.context=E,l=V):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,zf(e,s),E=s.memoizedProps,et=Ur(a,E),d.props=et,ot=s.pendingProps,Y=d.context,G=a.contextType,V=ba,typeof G=="object"&&G!==null&&(V=an(G)),S=a.getDerivedStateFromProps,(G=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ot||Y!==V)&&qp(s,d,l,V),bs=!1,Y=s.memoizedState,d.state=Y,tl(s,l,d,h),Wo();var K=s.memoizedState;E!==ot||Y!==K||bs||e!==null&&e.dependencies!==null&&$u(e.dependencies)?(typeof S=="function"&&(od(s,a,S,l),K=s.memoizedState),(et=bs||Bp(s,a,et,l,Y,K,V)||e!==null&&e.dependencies!==null&&$u(e.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,V)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=K),d.props=l,d.state=K,d.context=V,l=et):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(s.flags|=1024),l=!1)}return d=l,gc(e,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,e!==null&&l?(s.child=Va(s,e.child,null,h),s.child=Va(s,null,a,h)):Ze(e,s,a,h),s.memoizedState=d.state,e=s.child):e=es(e,s,h),e}function i0(e,s,a,l){return Fo(),s.flags|=256,Ze(e,s,a,l),s.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(e){return{baseLanes:e,cachePool:Gg()}}function dd(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=Yn),e}function s0(e,s,a){var l=s.pendingProps,h=!1,d=(s.flags&128)!==0,E;if((E=d)||(E=e!==null&&e.memoizedState===null?!1:(ke.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,e===null){if(Xt){if(h?Cs(s):Rs(),Xt){var S=_e,V;if(V=S){t:{for(V=S,S=Ei;V.nodeType!==8;){if(!S){S=null;break t}if(V=ri(V.nextSibling),V===null){S=null;break t}}S=V}S!==null?(s.memoizedState={dehydrated:S,treeContext:Mr!==null?{id:Xi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},V=In(18,null,null,0),V.stateNode=S,V.return=s,s.child=V,mn=s,_e=null,V=!0):V=!1}V||Or(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return $d(S)?s.lanes=32:s.lanes=536870912,null;ts(s)}return S=l.children,l=l.fallback,h?(Rs(),h=s.mode,S=pc({mode:"hidden",children:S},h),l=Dr(l,h,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,h=s.child,h.memoizedState=fd(a),h.childLanes=dd(e,E,a),s.memoizedState=hd,l):(Cs(s),md(s,S))}if(V=e.memoizedState,V!==null&&(S=V.dehydrated,S!==null)){if(d)s.flags&256?(Cs(s),s.flags&=-257,s=gd(e,s,a)):s.memoizedState!==null?(Rs(),s.child=e.child,s.flags|=128,s=null):(Rs(),h=l.fallback,S=s.mode,l=pc({mode:"visible",children:l.children},S),h=Dr(h,S,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,Va(s,e.child,null,a),l=s.child,l.memoizedState=fd(a),l.childLanes=dd(e,E,a),s.memoizedState=hd,s=h);else if(Cs(s),$d(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var G=E.dgst;E=G,l=Error(r(419)),l.stack="",l.digest=E,Qo({value:l,source:null,stack:null}),s=gd(e,s,a)}else if(He||Yo(e,s,a,!1),E=(a&e.childLanes)!==0,He||E){if(E=oe,E!==null&&(l=a&-a,l=(l&42)!==0?1:ms(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==V.retryLane))throw V.retryLane=l,Ta(e,l),On(E,e,l),Xp;S.data==="$?"||Nd(),s=gd(e,s,a)}else S.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=V.treeContext,_e=ri(S.nextSibling),mn=s,Xt=!0,Nr=null,Ei=!1,e!==null&&(Gn[Fn++]=Xi,Gn[Fn++]=$i,Gn[Fn++]=Mr,Xi=e.id,$i=e.overflow,Mr=s),s=md(s,l.children),s.flags|=4096);return s}return h?(Rs(),h=l.fallback,S=s.mode,V=e.child,G=V.sibling,l=Ki(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,G!==null?h=Ki(G,h):(h=Dr(h,S,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,S=e.child.memoizedState,S===null?S=fd(a):(V=S.cachePool,V!==null?(G=Le._currentValue,V=V.parent!==G?{parent:G,pool:G}:V):V=Gg(),S={baseLanes:S.baseLanes|a,cachePool:V}),h.memoizedState=S,h.childLanes=dd(e,E,a),s.memoizedState=hd,l):(Cs(s),a=e.child,e=a.sibling,a=Ki(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,e!==null&&(E=s.deletions,E===null?(s.deletions=[e],s.flags|=16):E.push(e)),s.child=a,s.memoizedState=null,a)}function md(e,s){return s=pc({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function pc(e,s){return e=In(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function gd(e,s,a){return Va(s,e.child,null,a),e=md(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function r0(e,s,a){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),Nf(e.return,s,a)}function pd(e,s,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=s,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function a0(e,s,a){var l=s.pendingProps,h=l.revealOrder,d=l.tail;if(Ze(e,s,l.children,a),l=ke.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&r0(e,a,s);else if(e.tag===19)r0(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(rt(ke,l),h){case"forwards":for(a=s.child,h=null;a!==null;)e=a.alternate,e!==null&&fc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),pd(s,!1,h,a,d);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(e=h.alternate,e!==null&&fc(e)===null){s.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}pd(s,!0,a,null,d);break;case"together":pd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function es(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),Vs|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(Yo(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(r(153));if(s.child!==null){for(e=s.child,a=Ki(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Ki(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function yd(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&$u(e)))}function F4(e,s,a){switch(s.tag){case 3:xt(s,s.stateNode.containerInfo),Ts(s,Le,e.memoizedState.cache),Fo();break;case 27:case 5:pe(s);break;case 4:xt(s,s.stateNode.containerInfo);break;case 10:Ts(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Cs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?s0(e,s,a):(Cs(s),e=es(e,s,a),e!==null?e.sibling:null);Cs(s);break;case 19:var h=(e.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Yo(e,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return a0(e,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),rt(ke,ke.current),l)break;return null;case 22:case 23:return s.lanes=0,Wp(e,s,a);case 24:Ts(s,Le,e.memoizedState.cache)}return es(e,s,a)}function o0(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)He=!0;else{if(!yd(e,a)&&(s.flags&128)===0)return He=!1,F4(e,s,a);He=(e.flags&131072)!==0}else He=!1,Xt&&(s.flags&1048576)!==0&&Pg(s,Xu,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Cf(l)?(e=Ur(l,e),s.tag=1,s=n0(null,s,l,e,a)):(s.tag=0,s=cd(null,s,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===st){s.tag=11,s=$p(null,s,l,e,a);break t}else if(h===D){s.tag=14,s=Zp(null,s,l,e,a);break t}}throw s=dt(l)||l,Error(r(306,s,""))}}return s;case 0:return cd(e,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Ur(l,s.pendingProps),n0(e,s,l,h,a);case 3:t:{if(xt(s,s.stateNode.containerInfo),e===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;h=d.element,zf(e,s),tl(s,l,null,a);var E=s.memoizedState;if(l=E.cache,Ts(s,Le,l),l!==d.cache&&Of(s,[Le],a,!0),Wo(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=i0(e,s,l,a);break t}else if(l!==h){h=qn(Error(r(424)),s),Qo(h),s=i0(e,s,l,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(_e=ri(e.firstChild),mn=s,Xt=!0,Nr=null,Ei=!0,a=Up(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Fo(),l===h){s=es(e,s,a);break t}Ze(e,s,l,a)}s=s.child}return s;case 26:return gc(e,s),e===null?(a=hy(s.type,null,s.pendingProps,null))?s.memoizedState=a:Xt||(a=s.type,e=s.pendingProps,l=Dc(mt.current).createElement(a),l[Ve]=s,l[Ae]=e,We(l,a,e),Ee(l),s.stateNode=l):s.memoizedState=hy(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return pe(s),e===null&&Xt&&(l=s.stateNode=ly(s.type,s.pendingProps,mt.current),mn=s,Ei=!0,h=_e,ks(s.type)?(Zd=h,_e=ri(l.firstChild)):_e=h),Ze(e,s,s.pendingProps.children,a),gc(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Xt&&((h=l=_e)&&(l=v9(l,s.type,s.pendingProps,Ei),l!==null?(s.stateNode=l,mn=s,_e=ri(l.firstChild),Ei=!1,h=!0):h=!1),h||Or(s)),pe(s),h=s.type,d=s.pendingProps,E=e!==null?e.memoizedProps:null,l=d.children,Yd(h,d)?l=null:E!==null&&Yd(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=Qf(e,s,P4,null,null,a),bl._currentValue=h),gc(e,s),Ze(e,s,l,a),s.child;case 6:return e===null&&Xt&&((e=a=_e)&&(a=E9(a,s.pendingProps,Ei),a!==null?(s.stateNode=a,mn=s,_e=null,e=!0):e=!1),e||Or(s)),null;case 13:return s0(e,s,a);case 4:return xt(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=Va(s,null,l,a):Ze(e,s,l,a),s.child;case 11:return $p(e,s,s.type,s.pendingProps,a);case 7:return Ze(e,s,s.pendingProps,a),s.child;case 8:return Ze(e,s,s.pendingProps.children,a),s.child;case 12:return Ze(e,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Ts(s,s.type,l.value),Ze(e,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,kr(s),h=an(h),l=l(h),s.flags|=1,Ze(e,s,l,a),s.child;case 14:return Zp(e,s,s.type,s.pendingProps,a);case 15:return Jp(e,s,s.type,s.pendingProps,a);case 19:return a0(e,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},e===null?(a=pc(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Ki(e.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Wp(e,s,a);case 24:return kr(s),l=an(Le),e===null?(h=Pf(),h===null&&(h=oe,d=Lf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),s.memoizedState={parent:l,cache:h},Uf(s),Ts(s,Le,h)):((e.lanes&a)!==0&&(zf(e,s),tl(s,null,null,a),Wo()),h=e.memoizedState,d=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ts(s,Le,l)):(l=d.cache,Ts(s,Le,l),l!==h.cache&&Of(s,[Le],a,!0))),Ze(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ns(e){e.flags|=4}function l0(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!py(s)){if(s=Qn.current,s!==null&&((Gt&4194048)===Gt?Ti!==null:(Gt&62914560)!==Gt&&(Gt&536870912)===0||s!==Ti))throw Zo=jf,Fg;e.flags|=8192}}function yc(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Ao():536870912,e.lanes|=s,ka|=s)}function ol(e,s){if(!Xt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function de(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(s)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,s}function Q4(e,s,a){var l=s.pendingProps;switch(Df(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(s),null;case 1:return de(s),null;case 3:return a=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ji(Le),Yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Go(s)?ns(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zg())),de(s),null;case 26:return a=s.memoizedState,e===null?(ns(s),a!==null?(de(s),l0(s,a)):(de(s),s.flags&=-16777217)):a?a!==e.memoizedState?(ns(s),de(s),l0(s,a)):(de(s),s.flags&=-16777217):(e.memoizedProps!==l&&ns(s),de(s),s.flags&=-16777217),null;case 27:Me(s),a=mt.current;var h=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==l&&ns(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return de(s),null}e=yt.current,Go(s)?jg(s):(e=ly(h,l,a),s.stateNode=e,ns(s))}return de(s),null;case 5:if(Me(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&ns(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return de(s),null}if(e=yt.current,Go(s))jg(s);else{switch(h=Dc(mt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[Ve]=s,e[Ae]=l;t:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break t;for(;h.sibling===null;){if(h.return===null||h.return===s)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=e;t:switch(We(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ns(s)}}return de(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&ns(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(e=mt.current,Go(s)){if(e=s.stateNode,a=s.memoizedProps,l=null,h=mn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Ve]=s,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ey(e.nodeValue,a)),e||Or(s)}else e=Dc(e).createTextNode(l),e[Ve]=s,s.stateNode=e}return de(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Go(s),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ve]=s}else Fo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;de(s),h=!1}else h=zg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(ts(s),s):(ts(s),null)}if(ts(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),yc(s,s.updateQueue),de(s),null;case 4:return Yt(),e===null&&qd(s.stateNode.containerInfo),de(s),null;case 10:return Ji(s.type),de(s),null;case 19:if(nt(ke),h=s.memoizedState,h===null)return de(s),null;if(l=(s.flags&128)!==0,d=h.rendering,d===null)if(l)ol(h,!1);else{if(ve!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(d=fc(e),d!==null){for(s.flags|=128,ol(h,!1),e=d.updateQueue,s.updateQueue=e,yc(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)kg(a,e),a=a.sibling;return rt(ke,ke.current&1|2),s.child}e=e.sibling}h.tail!==null&&fe()>Ec&&(s.flags|=128,l=!0,ol(h,!1),s.lanes=4194304)}else{if(!l)if(e=fc(d),e!==null){if(s.flags|=128,l=!0,e=e.updateQueue,s.updateQueue=e,yc(s,e),ol(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Xt)return de(s),null}else 2*fe()-h.renderingStartTime>Ec&&a!==536870912&&(s.flags|=128,l=!0,ol(h,!1),s.lanes=4194304);h.isBackwards?(d.sibling=s.child,s.child=d):(e=h.last,e!==null?e.sibling=d:s.child=d,h.last=d)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=fe(),s.sibling=null,e=ke.current,rt(ke,l?e&1|2:e&1),s):(de(s),null);case 22:case 23:return ts(s),Gf(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(de(s),s.subtreeFlags&6&&(s.flags|=8192)):de(s),a=s.updateQueue,a!==null&&yc(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),e!==null&&nt(Pr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Ji(Le),de(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Y4(e,s){switch(Df(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Ji(Le),Yt(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Me(s),null;case 13:if(ts(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Fo()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return nt(ke),null;case 4:return Yt(),null;case 10:return Ji(s.type),null;case 22:case 23:return ts(s),Gf(),e!==null&&nt(Pr),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Ji(Le),null;case 25:return null;default:return null}}function u0(e,s){switch(Df(s),s.tag){case 3:Ji(Le),Yt();break;case 26:case 27:case 5:Me(s);break;case 4:Yt();break;case 13:ts(s);break;case 19:nt(ke);break;case 10:Ji(s.type);break;case 22:case 23:ts(s),Gf(),e!==null&&nt(Pr);break;case 24:Ji(Le)}}function ll(e,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==h)}}catch(S){ae(s,s.return,S)}}function xs(e,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var E=l.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,h=s;var V=a,G=S;try{G()}catch(et){ae(h,V,et)}}}l=l.next}while(l!==d)}}catch(et){ae(s,s.return,et)}}function c0(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{Zg(s,a)}catch(l){ae(e,e.return,l)}}}function h0(e,s,a){a.props=Ur(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ae(e,s,l)}}function ul(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){ae(e,s,h)}}function bi(e,s){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ae(e,s,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ae(e,s,h)}else a.current=null}function f0(e){var s=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ae(e,e.return,h)}}function _d(e,s,a){try{var l=e.stateNode;m9(l,e.type,a,s),l[Ae]=s}catch(h){ae(e,e.return,h)}}function d0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ks(e.type)||e.tag===4}function vd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||d0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ks(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ed(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ic));else if(l!==4&&(l===27&&ks(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(Ed(e,s,a),e=e.sibling;e!==null;)Ed(e,s,a),e=e.sibling}function _c(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(l!==4&&(l===27&&ks(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(_c(e,s,a),e=e.sibling;e!==null;)_c(e,s,a),e=e.sibling}function m0(e){var s=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);We(s,l,a),s[Ve]=e,s[Ae]=a}catch(d){ae(e,e.return,d)}}var is=!1,be=!1,Td=!1,g0=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function K4(e,s){if(e=e.containerInfo,Fd=kc,e=Cg(e),vf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var E=0,S=-1,V=-1,G=0,et=0,ot=e,Y=null;e:for(;;){for(var K;ot!==a||h!==0&&ot.nodeType!==3||(S=E+h),ot!==d||l!==0&&ot.nodeType!==3||(V=E+l),ot.nodeType===3&&(E+=ot.nodeValue.length),(K=ot.firstChild)!==null;)Y=ot,ot=K;for(;;){if(ot===e)break e;if(Y===a&&++G===h&&(S=E),Y===d&&++et===l&&(V=E),(K=ot.nextSibling)!==null)break;ot=Y,Y=ot.parentNode}ot=K}a=S===-1||V===-1?null:{start:S,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:e,selectionRange:a},kc=!1,Ge=s;Ge!==null;)if(s=Ge,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,Ge=e;else for(;Ge!==null;){switch(s=Ge,d=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=s,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var It=Ur(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(It,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(wt){ae(a,a.return,wt)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)Xd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Xd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=s.sibling,e!==null){e.return=s.return,Ge=e;break}Ge=s.return}}function p0(e,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Is(e,a),l&4&&ll(5,a);break;case 1:if(Is(e,a),l&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(E){ae(a,a.return,E)}else{var h=Ur(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(h,s,e.__reactInternalSnapshotBeforeUpdate)}catch(E){ae(a,a.return,E)}}l&64&&c0(a),l&512&&ul(a,a.return);break;case 3:if(Is(e,a),l&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Zg(e,s)}catch(E){ae(a,a.return,E)}}break;case 27:s===null&&l&4&&m0(a);case 26:case 5:Is(e,a),s===null&&l&4&&f0(a),l&512&&ul(a,a.return);break;case 12:Is(e,a);break;case 13:Is(e,a),l&4&&v0(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=i9.bind(null,a),T9(e,a))));break;case 22:if(l=a.memoizedState!==null||is,!l){s=s!==null&&s.memoizedState!==null||be,h=is;var d=be;is=l,(be=s)&&!d?Ds(e,a,(a.subtreeFlags&8772)!==0):Is(e,a),is=h,be=d}break;case 30:break;default:Is(e,a)}}function y0(e){var s=e.alternate;s!==null&&(e.alternate=null,y0(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&ys(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ce=null,yn=!1;function ss(e,s,a){for(a=a.child;a!==null;)_0(e,s,a),a=a.sibling}function _0(e,s,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ye,a)}catch{}switch(a.tag){case 26:be||bi(a,s),ss(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:be||bi(a,s);var l=ce,h=yn;ks(a.type)&&(ce=a.stateNode,yn=!1),ss(e,s,a),_l(a.stateNode),ce=l,yn=h;break;case 5:be||bi(a,s);case 6:if(l=ce,h=yn,ce=null,ss(e,s,a),ce=l,yn=h,ce!==null)if(yn)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(a.stateNode)}catch(d){ae(a,s,d)}else try{ce.removeChild(a.stateNode)}catch(d){ae(a,s,d)}break;case 18:ce!==null&&(yn?(e=ce,ay(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Cl(e)):ay(ce,a.stateNode));break;case 4:l=ce,h=yn,ce=a.stateNode.containerInfo,yn=!0,ss(e,s,a),ce=l,yn=h;break;case 0:case 11:case 14:case 15:be||xs(2,a,s),be||xs(4,a,s),ss(e,s,a);break;case 1:be||(bi(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&h0(a,s,l)),ss(e,s,a);break;case 21:ss(e,s,a);break;case 22:be=(l=be)||a.memoizedState!==null,ss(e,s,a),be=l;break;default:ss(e,s,a)}}function v0(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Cl(e)}catch(a){ae(s,s.return,a)}}function X4(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new g0),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new g0),s;default:throw Error(r(435,e.tag))}}function bd(e,s){var a=X4(e);s.forEach(function(l){var h=s9.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function Dn(e,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,E=s,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(ks(S.type)){ce=S.stateNode,yn=!1;break t}break;case 5:ce=S.stateNode,yn=!1;break t;case 3:case 4:ce=S.stateNode.containerInfo,yn=!0;break t}S=S.return}if(ce===null)throw Error(r(160));_0(d,E,h),ce=null,yn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)E0(s,e),s=s.sibling}var si=null;function E0(e,s){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dn(s,e),Mn(e),l&4&&(xs(3,e,e.return),ll(3,e),xs(5,e,e.return));break;case 1:Dn(s,e),Mn(e),l&512&&(be||a===null||bi(a,a.return)),l&64&&is&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=si;if(Dn(s,e),Mn(e),l&512&&(be||a===null||bi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[mr]||d[Ve]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),We(d,l,a),d[Ve]=e,Ee(d),l=d;break t;case"link":var E=my("link","href",h).get(l+(a.href||""));if(E){for(var S=0;S<E.length;S++)if(d=E[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(S,1);break e}}d=h.createElement(l),We(d,l,a),h.head.appendChild(d);break;case"meta":if(E=my("meta","content",h).get(l+(a.content||""))){for(S=0;S<E.length;S++)if(d=E[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(S,1);break e}}d=h.createElement(l),We(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ve]=e,Ee(d),l=d}e.stateNode=l}else gy(h,e.type,e.stateNode);else e.stateNode=dy(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?gy(h,e.type,e.stateNode):dy(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&_d(e,e.memoizedProps,a.memoizedProps)}break;case 27:Dn(s,e),Mn(e),l&512&&(be||a===null||bi(a,a.return)),a!==null&&l&4&&_d(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Dn(s,e),Mn(e),l&512&&(be||a===null||bi(a,a.return)),e.flags&32){h=e.stateNode;try{jn(h,"")}catch(K){ae(e,e.return,K)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,_d(e,h,a!==null?a.memoizedProps:h)),l&1024&&(Td=!0);break;case 6:if(Dn(s,e),Mn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(K){ae(e,e.return,K)}}break;case 3:if(Nc=null,h=si,si=Mc(s.containerInfo),Dn(s,e),si=h,Mn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Cl(s.containerInfo)}catch(K){ae(e,e.return,K)}Td&&(Td=!1,T0(e));break;case 4:l=si,si=Mc(e.stateNode.containerInfo),Dn(s,e),Mn(e),si=l;break;case 12:Dn(s,e),Mn(e);break;case 13:Dn(s,e),Mn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xd=fe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bd(e,l)));break;case 22:h=e.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,G=is,et=be;if(is=G||h,be=et||V,Dn(s,e),be=et,is=G,Mn(e),l&8192)t:for(s=e.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||V||is||be||zr(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){V=a=s;try{if(d=V.stateNode,h)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=V.stateNode;var ot=V.memoizedProps.style,Y=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){ae(V,V.return,K)}}}else if(s.tag===6){if(a===null){V=s;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(K){ae(V,V.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bd(e,a))));break;case 19:Dn(s,e),Mn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bd(e,l)));break;case 30:break;case 21:break;default:Dn(s,e),Mn(e)}}function Mn(e){var s=e.flags;if(s&2){try{for(var a,l=e.return;l!==null;){if(d0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=vd(e);_c(e,d,h);break;case 5:var E=a.stateNode;a.flags&32&&(jn(E,""),a.flags&=-33);var S=vd(e);_c(e,S,E);break;case 3:case 4:var V=a.stateNode.containerInfo,G=vd(e);Ed(e,G,V);break;default:throw Error(r(161))}}catch(et){ae(e,e.return,et)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function T0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;T0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Is(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)p0(e,s.alternate,s),s=s.sibling}function zr(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:xs(4,s,s.return),zr(s);break;case 1:bi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&h0(s,s.return,a),zr(s);break;case 27:_l(s.stateNode);case 26:case 5:bi(s,s.return),zr(s);break;case 22:s.memoizedState===null&&zr(s);break;case 30:zr(s);break;default:zr(s)}e=e.sibling}}function Ds(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=e,d=s,E=d.flags;switch(d.tag){case 0:case 11:case 15:Ds(h,d,a),ll(4,d);break;case 1:if(Ds(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){ae(l,l.return,G)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)$g(V[h],S)}catch(G){ae(l,l.return,G)}}a&&E&64&&c0(d),ul(d,d.return);break;case 27:m0(d);case 26:case 5:Ds(h,d,a),a&&l===null&&E&4&&f0(d),ul(d,d.return);break;case 12:Ds(h,d,a);break;case 13:Ds(h,d,a),a&&E&4&&v0(h,d);break;case 22:d.memoizedState===null&&Ds(h,d,a),ul(d,d.return);break;case 30:break;default:Ds(h,d,a)}s=s.sibling}}function Sd(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ko(a))}function Ad(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Ko(e))}function Si(e,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)b0(e,s,a,l),s=s.sibling}function b0(e,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Si(e,s,a,l),h&2048&&ll(9,s);break;case 1:Si(e,s,a,l);break;case 3:Si(e,s,a,l),h&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Ko(e)));break;case 12:if(h&2048){Si(e,s,a,l),e=s.stateNode;try{var d=s.memoizedProps,E=d.id,S=d.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(V){ae(s,s.return,V)}}else Si(e,s,a,l);break;case 13:Si(e,s,a,l);break;case 23:break;case 22:d=s.stateNode,E=s.alternate,s.memoizedState!==null?d._visibility&2?Si(e,s,a,l):cl(e,s):d._visibility&2?Si(e,s,a,l):(d._visibility|=2,Na(e,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&Sd(E,s);break;case 24:Si(e,s,a,l),h&2048&&Ad(s.alternate,s);break;default:Si(e,s,a,l)}}function Na(e,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var d=e,E=s,S=a,V=l,G=E.flags;switch(E.tag){case 0:case 11:case 15:Na(d,E,S,V,h),ll(8,E);break;case 23:break;case 22:var et=E.stateNode;E.memoizedState!==null?et._visibility&2?Na(d,E,S,V,h):cl(d,E):(et._visibility|=2,Na(d,E,S,V,h)),h&&G&2048&&Sd(E.alternate,E);break;case 24:Na(d,E,S,V,h),h&&G&2048&&Ad(E.alternate,E);break;default:Na(d,E,S,V,h)}s=s.sibling}}function cl(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,l=s,h=l.flags;switch(l.tag){case 22:cl(a,l),h&2048&&Sd(l.alternate,l);break;case 24:cl(a,l),h&2048&&Ad(l.alternate,l);break;default:cl(a,l)}s=s.sibling}}var hl=8192;function Oa(e){if(e.subtreeFlags&hl)for(e=e.child;e!==null;)S0(e),e=e.sibling}function S0(e){switch(e.tag){case 26:Oa(e),e.flags&hl&&e.memoizedState!==null&&O9(si,e.memoizedState,e.memoizedProps);break;case 5:Oa(e);break;case 3:case 4:var s=si;si=Mc(e.stateNode.containerInfo),Oa(e),si=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=hl,hl=16777216,Oa(e),hl=s):Oa(e));break;default:Oa(e)}}function A0(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function fl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ge=l,C0(l,e)}A0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)w0(e),e=e.sibling}function w0(e){switch(e.tag){case 0:case 11:case 15:fl(e),e.flags&2048&&xs(9,e,e.return);break;case 3:fl(e);break;case 12:fl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,vc(e)):fl(e);break;default:fl(e)}}function vc(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ge=l,C0(l,e)}A0(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:xs(8,s,s.return),vc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,vc(s));break;default:vc(s)}e=e.sibling}}function C0(e,s){for(;Ge!==null;){var a=Ge;switch(a.tag){case 0:case 11:case 15:xs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ko(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ge=l;else t:for(a=e;Ge!==null;){l=Ge;var h=l.sibling,d=l.return;if(y0(l),l===a){Ge=null;break t}if(h!==null){h.return=d,Ge=h;break t}Ge=d}}}var $4={getCacheForType:function(e){var s=an(Le),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},Z4=typeof WeakMap=="function"?WeakMap:Map,Wt=0,oe=null,Ut=null,Gt=0,te=0,Vn=null,Ms=!1,La=!1,wd=!1,rs=0,ve=0,Vs=0,Br=0,Cd=0,Yn=0,ka=0,dl=null,_n=null,Rd=!1,xd=0,Ec=1/0,Tc=null,Ns=null,Je=0,Os=null,Pa=null,ja=0,Id=0,Dd=null,R0=null,ml=0,Md=null;function Nn(){if((Wt&2)!==0&&Gt!==0)return Gt&-Gt;if(F.T!==null){var e=wa;return e!==0?e:jd()}return gs()}function x0(){Yn===0&&(Yn=(Gt&536870912)===0||Xt?So():536870912);var e=Qn.current;return e!==null&&(e.flags|=32),Yn}function On(e,s,a){(e===oe&&(te===2||te===9)||e.cancelPendingCommit!==null)&&(Ua(e,0),Ls(e,Gt,Yn,!1)),Pi(e,a),((Wt&2)===0||e!==oe)&&(e===oe&&((Wt&2)===0&&(Br|=a),ve===4&&Ls(e,Gt,Yn,!1)),Ai(e))}function I0(e,s,a){if((Wt&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&e.expiredLanes)===0||dr(e,s),h=l?t9(e,s):Od(e,s,!0),d=l;do{if(h===0){La&&!l&&Ls(e,s,0,!1);break}else{if(a=e.current.alternate,d&&!J4(a)){h=Od(e,s,!1),d=!1;continue}if(h===2){if(d=s,e.errorRecoveryDisabledLanes&d)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var S=e;h=dl;var V=S.current.memoizedState.isDehydrated;if(V&&(Ua(S,E).flags|=256),E=Od(S,E,!1),E!==2){if(wd&&!V){S.errorRecoveryDisabledLanes|=d,Br|=d,h=4;break t}d=_n,_n=h,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}h=E}if(d=!1,h!==2)continue}}if(h===1){Ua(e,0),Ls(e,s,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ls(l,s,Yn,!Ms);break t;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=xd+300-fe(),10<h)){if(Ls(l,s,Yn,!Ms),na(l,0,!0)!==0)break t;l.timeoutHandle=sy(D0.bind(null,l,a,_n,Tc,Rd,s,Yn,Br,ka,Ms,d,2,-0,0),h);break t}D0(l,a,_n,Tc,Rd,s,Yn,Br,ka,Ms,d,0,-0,0)}}break}while(!0);Ai(e)}function D0(e,s,a,l,h,d,E,S,V,G,et,ot,Y,K){if(e.timeoutHandle=-1,ot=s.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(Tl={stylesheets:null,count:0,unsuspend:N9},S0(s),ot=L9(),ot!==null)){e.cancelPendingCommit=ot(P0.bind(null,e,s,d,a,l,h,E,S,V,et,1,Y,K)),Ls(e,d,E,!G);return}P0(e,s,d,a,l,h,E,S,V)}function J4(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!xn(d(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ls(e,s,a,l){s&=~Cd,s&=~Br,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var h=s;0<h;){var d=31-rn(h),E=1<<d;l[d]=-1,h&=~E}a!==0&&ui(e,a,s)}function bc(){return(Wt&6)===0?(gl(0),!1):!0}function Vd(){if(Ut!==null){if(te===0)var e=Ut.return;else e=Ut,Zi=Lr=null,Xf(e),Ma=null,rl=0,e=Ut;for(;e!==null;)u0(e.alternate,e),e=e.return;Ut=null}}function Ua(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,p9(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Vd(),oe=e,Ut=a=Ki(e.current,null),Gt=s,te=0,Vn=null,Ms=!1,La=dr(e,s),wd=!1,ka=Yn=Cd=Br=Vs=ve=0,_n=dl=null,Rd=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var h=31-rn(l),d=1<<h;s|=e[h],l&=~d}return rs=s,Gu(),a}function M0(e,s){kt=null,F.H=uc,s===$o||s===Wu?(s=Kg(),te=3):s===Fg?(s=Kg(),te=4):te=s===Xp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vn=s,Ut===null&&(ve=1,mc(e,qn(s,e.current)))}function V0(){var e=F.H;return F.H=uc,e===null?uc:e}function N0(){var e=F.A;return F.A=$4,e}function Nd(){ve=4,Ms||(Gt&4194048)!==Gt&&Qn.current!==null||(La=!0),(Vs&134217727)===0&&(Br&134217727)===0||oe===null||Ls(oe,Gt,Yn,!1)}function Od(e,s,a){var l=Wt;Wt|=2;var h=V0(),d=N0();(oe!==e||Gt!==s)&&(Tc=null,Ua(e,s)),s=!1;var E=ve;t:do try{if(te!==0&&Ut!==null){var S=Ut,V=Vn;switch(te){case 8:Vd(),E=6;break t;case 3:case 2:case 9:case 6:Qn.current===null&&(s=!0);var G=te;if(te=0,Vn=null,za(e,S,V,G),a&&La){E=0;break t}break;default:G=te,te=0,Vn=null,za(e,S,V,G)}}W4(),E=ve;break}catch(et){M0(e,et)}while(!0);return s&&e.shellSuspendCounter++,Zi=Lr=null,Wt=l,F.H=h,F.A=d,Ut===null&&(oe=null,Gt=0,Gu()),E}function W4(){for(;Ut!==null;)O0(Ut)}function t9(e,s){var a=Wt;Wt|=2;var l=V0(),h=N0();oe!==e||Gt!==s?(Tc=null,Ec=fe()+500,Ua(e,s)):La=dr(e,s);t:do try{if(te!==0&&Ut!==null){s=Ut;var d=Vn;e:switch(te){case 1:te=0,Vn=null,za(e,s,d,1);break;case 2:case 9:if(Qg(d)){te=0,Vn=null,L0(s);break}s=function(){te!==2&&te!==9||oe!==e||(te=7),Ai(e)},d.then(s,s);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:Qg(d)?(te=0,Vn=null,L0(s)):(te=0,Vn=null,za(e,s,d,7));break;case 5:var E=null;switch(Ut.tag){case 26:E=Ut.memoizedState;case 5:case 27:var S=Ut;if(!E||py(E)){te=0,Vn=null;var V=S.sibling;if(V!==null)Ut=V;else{var G=S.return;G!==null?(Ut=G,Sc(G)):Ut=null}break e}}te=0,Vn=null,za(e,s,d,5);break;case 6:te=0,Vn=null,za(e,s,d,6);break;case 8:Vd(),ve=6;break t;default:throw Error(r(462))}}e9();break}catch(et){M0(e,et)}while(!0);return Zi=Lr=null,F.H=l,F.A=h,Wt=a,Ut!==null?0:(oe=null,Gt=0,Gu(),ve)}function e9(){for(;Ut!==null&&!wn();)O0(Ut)}function O0(e){var s=o0(e.alternate,e,rs);e.memoizedProps=e.pendingProps,s===null?Sc(e):Ut=s}function L0(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=e0(a,s,s.pendingProps,s.type,void 0,Gt);break;case 11:s=e0(a,s,s.pendingProps,s.type.render,s.ref,Gt);break;case 5:Xf(s);default:u0(a,s),s=Ut=kg(s,rs),s=o0(a,s,rs)}e.memoizedProps=e.pendingProps,s===null?Sc(e):Ut=s}function za(e,s,a,l){Zi=Lr=null,Xf(s),Ma=null,rl=0;var h=s.return;try{if(G4(e,h,s,a,Gt)){ve=1,mc(e,qn(a,e.current)),Ut=null;return}}catch(d){if(h!==null)throw Ut=h,d;ve=1,mc(e,qn(a,e.current)),Ut=null;return}s.flags&32768?(Xt||l===1?e=!0:La||(Gt&536870912)!==0?e=!1:(Ms=e=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),k0(s,e)):Sc(s)}function Sc(e){var s=e;do{if((s.flags&32768)!==0){k0(s,Ms);return}e=s.return;var a=Q4(s.alternate,s,rs);if(a!==null){Ut=a;return}if(s=s.sibling,s!==null){Ut=s;return}Ut=s=e}while(s!==null);ve===0&&(ve=5)}function k0(e,s){do{var a=Y4(e.alternate,e);if(a!==null){a.flags&=32767,Ut=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){Ut=e;return}Ut=e=a}while(e!==null);ve=6,Ut=null}function P0(e,s,a,l,h,d,E,S,V){e.cancelPendingCommit=null;do Ac();while(Je!==0);if((Wt&6)!==0)throw Error(r(327));if(s!==null){if(s===e.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=Af,wo(e,a,d,E,S,V),e===oe&&(Ut=oe=null,Gt=0),Pa=s,Os=e,ja=a,Id=d,Dd=h,R0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,r9(ur,function(){return q0(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,h=at.p,at.p=2,E=Wt,Wt|=4;try{K4(e,s,a)}finally{Wt=E,at.p=h,F.T=l}}Je=1,j0(),U0(),z0()}}function j0(){if(Je===1){Je=0;var e=Os,s=Pa,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=at.p;at.p=2;var h=Wt;Wt|=4;try{E0(s,e);var d=Qd,E=Cg(e.containerInfo),S=d.focusedElem,V=d.selectionRange;if(E!==S&&S&&S.ownerDocument&&wg(S.ownerDocument.documentElement,S)){if(V!==null&&vf(S)){var G=V.start,et=V.end;if(et===void 0&&(et=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(et,S.value.length);else{var ot=S.ownerDocument||document,Y=ot&&ot.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),It=S.textContent.length,wt=Math.min(V.start,It),se=V.end===void 0?wt:Math.min(V.end,It);!K.extend&&wt>se&&(E=se,se=wt,wt=E);var z=Ag(S,wt),P=Ag(S,se);if(z&&P&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==P.node||K.focusOffset!==P.offset)){var H=ot.createRange();H.setStart(z.node,z.offset),K.removeAllRanges(),wt>se?(K.addRange(H),K.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),K.addRange(H))}}}}for(ot=[],K=S;K=K.parentNode;)K.nodeType===1&&ot.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ot.length;S++){var it=ot[S];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}kc=!!Fd,Qd=Fd=null}finally{Wt=h,at.p=l,F.T=a}}e.current=s,Je=2}}function U0(){if(Je===2){Je=0;var e=Os,s=Pa,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=at.p;at.p=2;var h=Wt;Wt|=4;try{p0(e,s.alternate,s)}finally{Wt=h,at.p=l,F.T=a}}Je=3}}function z0(){if(Je===4||Je===3){Je=0,Ke();var e=Os,s=Pa,a=ja,l=R0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Je=5:(Je=0,Pa=Os=null,B0(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Ns=null),ia(a),s=s.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ye,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=F.T,h=at.p,at.p=2,F.T=null;try{for(var d=e.onRecoverableError,E=0;E<l.length;E++){var S=l[E];d(S.value,{componentStack:S.stack})}}finally{F.T=s,at.p=h}}(ja&3)!==0&&Ac(),Ai(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Md?ml++:(ml=0,Md=e):ml=0,gl(0)}}function B0(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Ko(s)))}function Ac(e){return j0(),U0(),z0(),q0()}function q0(){if(Je!==5)return!1;var e=Os,s=Id;Id=0;var a=ia(ja),l=F.T,h=at.p;try{at.p=32>a?32:a,F.T=null,a=Dd,Dd=null;var d=Os,E=ja;if(Je=0,Pa=Os=null,ja=0,(Wt&6)!==0)throw Error(r(331));var S=Wt;if(Wt|=4,w0(d.current),b0(d,d.current,E,a),Wt=S,gl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ye,d)}catch{}return!0}finally{at.p=h,F.T=l,B0(e,s)}}function H0(e,s,a){s=qn(a,s),s=ud(e.stateNode,s,2),e=As(e,s,2),e!==null&&(Pi(e,2),Ai(e))}function ae(e,s,a){if(e.tag===3)H0(e,e,a);else for(;s!==null;){if(s.tag===3){H0(s,e,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ns===null||!Ns.has(l))){e=qn(a,e),a=Yp(2),l=As(s,a,2),l!==null&&(Kp(a,l,s,e),Pi(l,2),Ai(l));break}}s=s.return}}function Ld(e,s,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Z4;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(wd=!0,h.add(a),e=n9.bind(null,e,s,a),s.then(e,e))}function n9(e,s,a){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,oe===e&&(Gt&a)===a&&(ve===4||ve===3&&(Gt&62914560)===Gt&&300>fe()-xd?(Wt&2)===0&&Ua(e,0):Cd|=a,ka===Gt&&(ka=0)),Ai(e)}function G0(e,s){s===0&&(s=Ao()),e=Ta(e,s),e!==null&&(Pi(e,s),Ai(e))}function i9(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),G0(e,a)}function s9(e,s){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),G0(e,a)}function r9(e,s){return ze(e,s)}var wc=null,Ba=null,kd=!1,Cc=!1,Pd=!1,qr=0;function Ai(e){e!==Ba&&e.next===null&&(Ba===null?wc=Ba=e:Ba=Ba.next=e),Cc=!0,kd||(kd=!0,o9())}function gl(e,s){if(!Pd&&Cc){Pd=!0;do for(var a=!1,l=wc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var E=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-rn(42|e)+1)-1,d&=h&~(E&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,K0(l,d))}else d=Gt,d=na(l,l===oe?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||dr(l,d)||(a=!0,K0(l,d));l=l.next}while(a);Pd=!1}}function a9(){F0()}function F0(){Cc=kd=!1;var e=0;qr!==0&&(g9()&&(e=qr),qr=0);for(var s=fe(),a=null,l=wc;l!==null;){var h=l.next,d=Q0(l,s);d===0?(l.next=null,a===null?wc=h:a.next=h,h===null&&(Ba=a)):(a=l,(e!==0||(d&3)!==0)&&(Cc=!0)),l=h}gl(e)}function Q0(e,s){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var E=31-rn(d),S=1<<E,V=h[E];V===-1?((S&a)===0||(S&l)!==0)&&(h[E]=bo(S,s)):V<=s&&(e.expiredLanes|=S),d&=~S}if(s=oe,a=Gt,a=na(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===s&&(te===2||te===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ye(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||dr(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(l!==null&&Ye(l),ia(a)){case 2:case 8:a=Wn;break;case 32:a=ur;break;case 268435456:a=ea;break;default:a=ur}return l=Y0.bind(null,e),a=ze(a,l),e.callbackPriority=s,e.callbackNode=a,s}return l!==null&&l!==null&&Ye(l),e.callbackPriority=2,e.callbackNode=null,2}function Y0(e,s){if(Je!==0&&Je!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ac()&&e.callbackNode!==a)return null;var l=Gt;return l=na(e,e===oe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(I0(e,l,s),Q0(e,fe()),e.callbackNode!=null&&e.callbackNode===a?Y0.bind(null,e):null)}function K0(e,s){if(Ac())return null;I0(e,s,!0)}function o9(){y9(function(){(Wt&6)!==0?ze(Li,a9):F0()})}function jd(){return qr===0&&(qr=So()),qr}function X0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ua(""+e)}function $0(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function l9(e,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var d=X0((h[Ae]||null).action),E=l.submitter;E&&(s=(s=E[Ae]||null)?X0(s.formAction):E.getAttribute("formAction"),s!==null&&(d=s,E=null));var S=new ca("action","action",null,l,h);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qr!==0){var V=E?$0(h,E):new FormData(h);sd(a,{pending:!0,data:V,method:h.method,action:d},null,V)}}else typeof d=="function"&&(S.preventDefault(),V=E?$0(h,E):new FormData(h),sd(a,{pending:!0,data:V,method:h.method,action:d},d,V))},currentTarget:h}]})}}for(var Ud=0;Ud<Sf.length;Ud++){var zd=Sf[Ud],u9=zd.toLowerCase(),c9=zd[0].toUpperCase()+zd.slice(1);ii(u9,"on"+c9)}ii(Ig,"onAnimationEnd"),ii(Dg,"onAnimationIteration"),ii(Mg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(R4,"onTransitionRun"),ii(x4,"onTransitionStart"),ii(I4,"onTransitionCancel"),ii(Vg,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pl));function Z0(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var E=l.length-1;0<=E;E--){var S=l[E],V=S.instance,G=S.currentTarget;if(S=S.listener,V!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=G;try{d(h)}catch(et){dc(et)}h.currentTarget=null,d=V}else for(E=0;E<l.length;E++){if(S=l[E],V=S.instance,G=S.currentTarget,S=S.listener,V!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=G;try{d(h)}catch(et){dc(et)}h.currentTarget=null,d=V}}}}function zt(e,s){var a=s[Ro];a===void 0&&(a=s[Ro]=new Set);var l=e+"__bubble";a.has(l)||(J0(s,e,2,!1),a.add(l))}function Bd(e,s,a){var l=0;s&&(l|=4),J0(a,e,l,s)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function qd(e){if(!e[Rc]){e[Rc]=!0,xo.forEach(function(a){a!=="selectionchange"&&(h9.has(a)||Bd(a,!1,e),Bd(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Rc]||(s[Rc]=!0,Bd("selectionchange",!1,s))}}function J0(e,s,a,l){switch(by(s)){case 2:var h=j9;break;case 8:h=U9;break;default:h=nm}a=h.bind(null,s,a,e),h=void 0,!zn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(s,a,{capture:!0,passive:h}):e.addEventListener(s,a,!0):h!==void 0?e.addEventListener(s,a,{passive:h}):e.addEventListener(s,a,!1)}function Hd(e,s,a,l,h){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var S=l.stateNode.containerInfo;if(S===h)break;if(E===4)for(E=l.return;E!==null;){var V=E.tag;if((V===3||V===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;S!==null;){if(E=ji(S),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){l=d=E;continue t}S=S.parentNode}}l=l.return}Iu(function(){var G=d,et=Un(a),ot=[];t:{var Y=Ng.get(e);if(Y!==void 0){var K=ca,It=e;switch(e){case"keypress":if(gi(a)===0)break t;case"keydown":case"keyup":K=pa;break;case"focusin":It="focus",K=da;break;case"focusout":It="blur",K=da;break;case"beforeblur":case"afterblur":K=da;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Pu;break;case Ig:case Dg:case Mg:K=ma;break;case Vg:K=Uu;break;case"scroll":case"scrollend":K=Du;break;case"wheel":K=ya;break;case"copy":case"cut":case"paste":K=ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=zo;break;case"toggle":case"beforetoggle":K=Bu}var wt=(s&4)!==0,se=!wt&&(e==="scroll"||e==="scrollend"),z=wt?Y!==null?Y+"Capture":null:Y;wt=[];for(var P=G,H;P!==null;){var it=P;if(H=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||H===null||z===null||(it=Tr(P,z),it!=null&&wt.push(yl(P,it,H))),se)break;P=P.return}0<wt.length&&(Y=new K(Y,It,null,a,et),ot.push({event:Y,listeners:wt}))}}if((s&7)===0){t:{if(Y=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Y&&a!==qi&&(It=a.relatedTarget||a.fromElement)&&(ji(It)||It[Pn]))break t;if((K||Y)&&(Y=et.window===et?et:(Y=et.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(It=a.relatedTarget||a.toElement,K=G,It=It?ji(It):null,It!==null&&(se=u(It),wt=It.tag,It!==se||wt!==5&&wt!==27&&wt!==6)&&(It=null)):(K=null,It=G),K!==It)){if(wt=Bn,it="onMouseLeave",z="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(wt=zo,it="onPointerLeave",z="onPointerEnter",P="pointer"),se=K==null?Y:hi(K),H=It==null?Y:hi(It),Y=new wt(it,P+"leave",K,a,et),Y.target=se,Y.relatedTarget=H,it=null,ji(et)===G&&(wt=new wt(z,P+"enter",It,a,et),wt.target=H,wt.relatedTarget=se,it=wt),se=it,K&&It)e:{for(wt=K,z=It,P=0,H=wt;H;H=qa(H))P++;for(H=0,it=z;it;it=qa(it))H++;for(;0<P-H;)wt=qa(wt),P--;for(;0<H-P;)z=qa(z),H--;for(;P--;){if(wt===z||z!==null&&wt===z.alternate)break e;wt=qa(wt),z=qa(z)}wt=null}else wt=null;K!==null&&W0(ot,Y,K,wt,!1),It!==null&&se!==null&&W0(ot,se,It,wt,!0)}}t:{if(Y=G?hi(G):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var vt=_g;else if(Oe(Y))if(vg)vt=A4;else{vt=b4;var jt=T4}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&No(G.elementType)&&(vt=_g):vt=S4;if(vt&&(vt=vt(e,G))){Yi(ot,vt,a,et);break t}jt&&jt(e,Y,G),e==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&vs(Y,"number",Y.value)}switch(jt=G?hi(G):window,e){case"focusin":(Oe(jt)||jt.contentEditable==="true")&&(_a=jt,Ef=G,Ho=null);break;case"focusout":Ho=Ef=_a=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,Rg(ot,a,et);break;case"selectionchange":if(C4)break;case"keydown":case"keyup":Rg(ot,a,et)}var bt;if(_i)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else qt?J(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(_&&a.locale!=="ko"&&(qt||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&qt&&(bt=Lo()):(mi=et,Es="value"in mi?mi.value:mi.textContent,qt=!0)),jt=xc(G,Ct),0<jt.length&&(Ct=new jo(Ct,e,null,a,et),ot.push({event:Ct,listeners:jt}),bt?Ct.data=bt:(bt=gt(a),bt!==null&&(Ct.data=bt)))),(bt=p?Ne(e,a):Ht(e,a))&&(Ct=xc(G,"onBeforeInput"),0<Ct.length&&(jt=new jo("onBeforeInput","beforeinput",null,a,et),ot.push({event:jt,listeners:Ct}),jt.data=bt)),l9(ot,e,G,a,et)}Z0(ot,s)})}function yl(e,s,a){return{instance:e,listener:s,currentTarget:a}}function xc(e,s){for(var a=s+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Tr(e,a),h!=null&&l.unshift(yl(e,h,d)),h=Tr(e,s),h!=null&&l.push(yl(e,h,d))),e.tag===3)return l;e=e.return}return[]}function qa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function W0(e,s,a,l,h){for(var d=s._reactName,E=[];a!==null&&a!==l;){var S=a,V=S.alternate,G=S.stateNode;if(S=S.tag,V!==null&&V===l)break;S!==5&&S!==26&&S!==27||G===null||(V=G,h?(G=Tr(a,d),G!=null&&E.unshift(yl(a,G,V))):h||(G=Tr(a,d),G!=null&&E.push(yl(a,G,V)))),a=a.return}E.length!==0&&e.push({event:s,listeners:E})}var f9=/\r\n?/g,d9=/\u0000|\uFFFD/g;function ty(e){return(typeof e=="string"?e:""+e).replace(f9,`
`).replace(d9,"")}function ey(e,s){return s=ty(s),ty(e)===s}function Ic(){}function ie(e,s,a,l,h,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||jn(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&jn(e,""+l);break;case"className":fi(e,"class",l);break;case"tabIndex":fi(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fi(e,a,l);break;case"style":Vo(e,l,d);break;case"data":if(s!=="object"){fi(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ua(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&ie(e,s,"name",h.name,h,null),ie(e,s,"formEncType",h.formEncType,h,null),ie(e,s,"formMethod",h.formMethod,h,null),ie(e,s,"formTarget",h.formTarget,h,null)):(ie(e,s,"encType",h.encType,h,null),ie(e,s,"method",h.method,h,null),ie(e,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ua(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Ic);break;case"onScroll":l!=null&&zt("scroll",e);break;case"onScrollEnd":l!=null&&zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ua(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":zt("beforetoggle",e),zt("toggle",e),_s(e,"popover",l);break;case"xlinkActuate":Xe(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Xe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Xe(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Xe(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Xe(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Xe(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_s(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=df.get(a)||a,_s(e,a,l))}}function Gd(e,s,a,l,h,d){switch(a){case"style":Vo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?jn(e,l):(typeof l=="number"||typeof l=="bigint")&&jn(e,""+l);break;case"onScroll":l!=null&&zt("scroll",e);break;case"onScrollEnd":l!=null&&zt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),d=e[Ae]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(s,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):_s(e,a,l)}}}function We(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",e),zt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ie(e,s,d,E,a,null)}}h&&ie(e,s,"srcSet",a.srcSet,a,null),l&&ie(e,s,"src",a.src,a,null);return;case"input":zt("invalid",e);var S=d=E=h=null,V=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var et=a[l];if(et!=null)switch(l){case"name":h=et;break;case"type":E=et;break;case"checked":V=et;break;case"defaultChecked":G=et;break;case"value":d=et;break;case"defaultValue":S=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,s));break;default:ie(e,s,l,et,a,null)}}_r(e,d,S,V,G,E,h,!1),la(e);return;case"select":zt("invalid",e),l=E=d=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":E=S;break;case"multiple":l=S;default:ie(e,s,h,S,a,null)}s=d,a=E,e.multiple=!!l,s!=null?Bi(e,!!l,s,!1):a!=null&&Bi(e,!!l,a,!0);return;case"textarea":zt("invalid",e),d=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(S=a[E],S!=null))switch(E){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:ie(e,s,E,S,a,null)}vr(e,l,h,d),la(e);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ie(e,s,V,l,a,null)}return;case"dialog":zt("beforetoggle",e),zt("toggle",e),zt("cancel",e),zt("close",e);break;case"iframe":case"object":zt("load",e);break;case"video":case"audio":for(l=0;l<pl.length;l++)zt(pl[l],e);break;case"image":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"embed":case"source":case"link":zt("error",e),zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ie(e,s,G,l,a,null)}return;default:if(No(s)){for(et in a)a.hasOwnProperty(et)&&(l=a[et],l!==void 0&&Gd(e,s,et,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&ie(e,s,S,l,a,null))}function m9(e,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,E=null,S=null,V=null,G=null,et=null;for(K in a){var ot=a[K];if(a.hasOwnProperty(K)&&ot!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":V=ot;default:l.hasOwnProperty(K)||ie(e,s,K,null,l,ot)}}for(var Y in l){var K=l[Y];if(ot=a[Y],l.hasOwnProperty(Y)&&(K!=null||ot!=null))switch(Y){case"type":d=K;break;case"name":h=K;break;case"checked":G=K;break;case"defaultChecked":et=K;break;case"value":E=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==ot&&ie(e,s,Y,K,l,ot)}}Rn(e,E,S,V,G,et,d,h);return;case"select":K=E=S=Y=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":K=V;default:l.hasOwnProperty(d)||ie(e,s,d,null,l,V)}for(h in l)if(d=l[h],V=a[h],l.hasOwnProperty(h)&&(d!=null||V!=null))switch(h){case"value":Y=d;break;case"defaultValue":S=d;break;case"multiple":E=d;default:d!==V&&ie(e,s,h,d,l,V)}s=S,a=E,l=K,Y!=null?Bi(e,!!a,Y,!1):!!l!=!!a&&(s!=null?Bi(e,!!a,s,!0):Bi(e,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ie(e,s,S,null,l,h)}for(E in l)if(h=l[E],d=a[E],l.hasOwnProperty(E)&&(h!=null||d!=null))switch(E){case"value":Y=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&ie(e,s,E,h,l,d)}ee(e,Y,K);return;case"option":for(var It in a)if(Y=a[It],a.hasOwnProperty(It)&&Y!=null&&!l.hasOwnProperty(It))switch(It){case"selected":e.selected=!1;break;default:ie(e,s,It,null,l,Y)}for(V in l)if(Y=l[V],K=a[V],l.hasOwnProperty(V)&&Y!==K&&(Y!=null||K!=null))switch(V){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ie(e,s,V,Y,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in a)Y=a[wt],a.hasOwnProperty(wt)&&Y!=null&&!l.hasOwnProperty(wt)&&ie(e,s,wt,null,l,Y);for(G in l)if(Y=l[G],K=a[G],l.hasOwnProperty(G)&&Y!==K&&(Y!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:ie(e,s,G,Y,l,K)}return;default:if(No(s)){for(var se in a)Y=a[se],a.hasOwnProperty(se)&&Y!==void 0&&!l.hasOwnProperty(se)&&Gd(e,s,se,void 0,l,Y);for(et in l)Y=l[et],K=a[et],!l.hasOwnProperty(et)||Y===K||Y===void 0&&K===void 0||Gd(e,s,et,Y,l,K);return}}for(var z in a)Y=a[z],a.hasOwnProperty(z)&&Y!=null&&!l.hasOwnProperty(z)&&ie(e,s,z,null,l,Y);for(ot in l)Y=l[ot],K=a[ot],!l.hasOwnProperty(ot)||Y===K||Y==null&&K==null||ie(e,s,ot,Y,l,K)}var Fd=null,Qd=null;function Dc(e){return e.nodeType===9?e:e.ownerDocument}function ny(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iy(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Yd(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kd=null;function g9(){var e=window.event;return e&&e.type==="popstate"?e===Kd?!1:(Kd=e,!0):(Kd=null,!1)}var sy=typeof setTimeout=="function"?setTimeout:void 0,p9=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,y9=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(e){return ry.resolve(null).then(e).catch(_9)}:sy;function _9(e){setTimeout(function(){throw e})}function ks(e){return e==="head"}function ay(e,s){var a=s,l=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=e.ownerDocument;if(a&1&&_l(E.documentElement),a&2&&_l(E.body),a&4)for(a=E.head,_l(a),E=a.firstChild;E;){var S=E.nextSibling,V=E.nodeName;E[mr]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=S}}if(h===0){e.removeChild(d),Cl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Cl(s)}function Xd(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Xd(a),ys(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function v9(e,s,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[mr])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ri(e.nextSibling),e===null)break}return null}function E9(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ri(e.nextSibling),e===null))return null;return e}function $d(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function T9(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ri(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Zd=null;function oy(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function ly(e,s,a){switch(s=Dc(a),e){case"html":if(e=s.documentElement,!e)throw Error(r(452));return e;case"head":if(e=s.head,!e)throw Error(r(453));return e;case"body":if(e=s.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function _l(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);ys(e)}var Kn=new Map,uy=new Set;function Mc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var as=at.d;at.d={f:b9,r:S9,D:A9,C:w9,L:C9,m:R9,X:I9,S:x9,M:D9};function b9(){var e=as.f(),s=bc();return e||s}function S9(e){var s=ci(e);s!==null&&s.tag===5&&s.type==="form"?Ip(s):as.r(e)}var Ha=typeof document>"u"?null:document;function cy(e,s,a){var l=Ha;if(l&&typeof s=="string"&&s){var h=we(s);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),uy.has(h)||(uy.add(h),e={rel:e,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),We(s,"link",e),Ee(s),l.head.appendChild(s)))}}function A9(e){as.D(e),cy("dns-prefetch",e,null)}function w9(e,s){as.C(e,s),cy("preconnect",e,s)}function C9(e,s,a){as.L(e,s,a);var l=Ha;if(l&&e&&s){var h='link[rel="preload"][as="'+we(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+we(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+we(a.imageSizes)+'"]')):h+='[href="'+we(e)+'"]';var d=h;switch(s){case"style":d=Ga(e);break;case"script":d=Fa(e)}Kn.has(d)||(e=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),Kn.set(d,e),l.querySelector(h)!==null||s==="style"&&l.querySelector(vl(d))||s==="script"&&l.querySelector(El(d))||(s=l.createElement("link"),We(s,"link",e),Ee(s),l.head.appendChild(s)))}}function R9(e,s){as.m(e,s);var a=Ha;if(a&&e){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+we(l)+'"][href="'+we(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Fa(e)}if(!Kn.has(d)&&(e=v({rel:"modulepreload",href:e},s),Kn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(d)))return}l=a.createElement("link"),We(l,"link",e),Ee(l),a.head.appendChild(l)}}}function x9(e,s,a){as.S(e,s,a);var l=Ha;if(l&&e){var h=hn(l).hoistableStyles,d=Ga(e);s=s||"default";var E=h.get(d);if(!E){var S={loading:0,preload:null};if(E=l.querySelector(vl(d)))S.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":s},a),(a=Kn.get(d))&&Jd(e,a);var V=E=l.createElement("link");Ee(V),We(V,"link",e),V._p=new Promise(function(G,et){V.onload=G,V.onerror=et}),V.addEventListener("load",function(){S.loading|=1}),V.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Vc(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:S},h.set(d,E)}}}function I9(e,s){as.X(e,s);var a=Ha;if(a&&e){var l=hn(a).hoistableScripts,h=Fa(e),d=l.get(h);d||(d=a.querySelector(El(h)),d||(e=v({src:e,async:!0},s),(s=Kn.get(h))&&Wd(e,s),d=a.createElement("script"),Ee(d),We(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function D9(e,s){as.M(e,s);var a=Ha;if(a&&e){var l=hn(a).hoistableScripts,h=Fa(e),d=l.get(h);d||(d=a.querySelector(El(h)),d||(e=v({src:e,async:!0,type:"module"},s),(s=Kn.get(h))&&Wd(e,s),d=a.createElement("script"),Ee(d),We(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function hy(e,s,a,l){var h=(h=mt.current)?Mc(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ga(a.href),a=hn(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ga(a.href);var d=hn(h).hoistableStyles,E=d.get(e);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,E),(d=h.querySelector(vl(e)))&&!d._p&&(E.instance=d,E.state.loading=5),Kn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(e,a),d||M9(h,e,a,E.state))),s&&l===null)throw Error(r(528,""));return E}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Fa(a),a=hn(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ga(e){return'href="'+we(e)+'"'}function vl(e){return'link[rel="stylesheet"]['+e+"]"}function fy(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function M9(e,s,a,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),We(s,"link",a),Ee(s),e.head.appendChild(s))}function Fa(e){return'[src="'+we(e)+'"]'}function El(e){return"script[async]"+e}function dy(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+we(a.href)+'"]');if(l)return s.instance=l,Ee(l),l;var h=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ee(l),We(l,"style",h),Vc(l,a.precedence,e),s.instance=l;case"stylesheet":h=Ga(a.href);var d=e.querySelector(vl(h));if(d)return s.state.loading|=4,s.instance=d,Ee(d),d;l=fy(a),(h=Kn.get(h))&&Jd(l,h),d=(e.ownerDocument||e).createElement("link"),Ee(d);var E=d;return E._p=new Promise(function(S,V){E.onload=S,E.onerror=V}),We(d,"link",l),s.state.loading|=4,Vc(d,a.precedence,e),s.instance=d;case"script":return d=Fa(a.src),(h=e.querySelector(El(d)))?(s.instance=h,Ee(h),h):(l=a,(h=Kn.get(d))&&(l=v({},a),Wd(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),Ee(h),We(h,"link",l),e.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Vc(l,a.precedence,e));return s.instance}function Vc(e,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,E=0;E<l.length;E++){var S=l[E];if(S.dataset.precedence===s)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function Jd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Wd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Nc=null;function my(e,s,a){if(Nc===null){var l=new Map,h=Nc=new Map;h.set(a,l)}else h=Nc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[mr]||d[Ve]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(s)||"";E=e+E;var S=l.get(E);S?S.push(d):l.set(E,[d])}}return l}function gy(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function V9(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function py(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Tl=null;function N9(){}function O9(e,s,a){if(Tl===null)throw Error(r(475));var l=Tl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Ga(a.href),d=e.querySelector(vl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Oc.bind(l),e.then(l,l)),s.state.loading|=4,s.instance=d,Ee(d);return}d=e.ownerDocument||e,a=fy(a),(h=Kn.get(h))&&Jd(a,h),d=d.createElement("link"),Ee(d);var E=d;E._p=new Promise(function(S,V){E.onload=S,E.onerror=V}),We(d,"link",a),s.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Oc.bind(l),e.addEventListener("load",s),e.addEventListener("error",s))}}function L9(){if(Tl===null)throw Error(r(475));var e=Tl;return e.stylesheets&&e.count===0&&tm(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&tm(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Oc(){if(this.count--,this.count===0){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Lc=null;function tm(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Lc=new Map,s.forEach(k9,e),Lc=null,Oc.call(e))}function k9(e,s){if(!(s.state.loading&4)){var a=Lc.get(e);if(a)var l=a.get(null);else{a=new Map,Lc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var E=h[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,h),a.set(E,h),this.count++,l=Oc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),s.state.loading|=4}}var bl={$$typeof:X,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function P9(e,s,a,l,h,d,E,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ki(0),this.hiddenUpdates=ki(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function yy(e,s,a,l,h,d,E,S,V,G,et,ot){return e=new P9(e,s,a,E,S,V,G,ot),s=1,d===!0&&(s|=24),d=In(3,null,null,s),e.current=d,d.stateNode=e,s=Lf(),s.refCount++,e.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},Uf(d),e}function _y(e){return e?(e=ba,e):ba}function vy(e,s,a,l,h,d){h=_y(h),l.context===null?l.context=h:l.pendingContext=h,l=Ss(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=As(e,l,s),a!==null&&(On(a,e,s),Jo(a,e,s))}function Ey(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function em(e,s){Ey(e,s),(e=e.alternate)&&Ey(e,s)}function Ty(e){if(e.tag===13){var s=Ta(e,67108864);s!==null&&On(s,e,67108864),em(e,67108864)}}var kc=!0;function j9(e,s,a,l){var h=F.T;F.T=null;var d=at.p;try{at.p=2,nm(e,s,a,l)}finally{at.p=d,F.T=h}}function U9(e,s,a,l){var h=F.T;F.T=null;var d=at.p;try{at.p=8,nm(e,s,a,l)}finally{at.p=d,F.T=h}}function nm(e,s,a,l){if(kc){var h=im(l);if(h===null)Hd(e,s,l,Pc,a),Sy(e,l);else if(B9(h,e,s,a,l))l.stopPropagation();else if(Sy(e,l),s&4&&-1<z9.indexOf(e)){for(;h!==null;){var d=ci(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=ti(d.pendingLanes);if(E!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var V=1<<31-rn(E);S.entanglements[1]|=V,E&=~V}Ai(d),(Wt&6)===0&&(Ec=fe()+500,gl(0))}}break;case 13:S=Ta(d,2),S!==null&&On(S,d,2),bc(),em(d,2)}if(d=im(l),d===null&&Hd(e,s,l,Pc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Hd(e,s,l,null,a)}}function im(e){return e=Un(e),sm(e)}var Pc=null;function sm(e){if(Pc=null,e=ji(e),e!==null){var s=u(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=f(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Pc=e,null}function by(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case Li:return 2;case Wn:return 8;case ur:case lf:return 32;case ea:return 268435456;default:return 32}default:return 32}}var rm=!1,Ps=null,js=null,Us=null,Sl=new Map,Al=new Map,zs=[],z9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sy(e,s){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":Sl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(s.pointerId)}}function wl(e,s,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},s!==null&&(s=ci(s),s!==null&&Ty(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),e)}function B9(e,s,a,l,h){switch(s){case"focusin":return Ps=wl(Ps,e,s,a,l,h),!0;case"dragenter":return js=wl(js,e,s,a,l,h),!0;case"mouseover":return Us=wl(Us,e,s,a,l,h),!0;case"pointerover":var d=h.pointerId;return Sl.set(d,wl(Sl.get(d)||null,e,s,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Al.set(d,wl(Al.get(d)||null,e,s,a,l,h)),!0}return!1}function Ay(e){var s=ji(e.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=f(a),s!==null){e.blockedOn=s,bu(e.priority,function(){if(a.tag===13){var l=Nn();l=ms(l);var h=Ta(a,l);h!==null&&On(h,a,l),em(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=im(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);qi=l,a.target.dispatchEvent(l),qi=null}else return s=ci(a),s!==null&&Ty(s),e.blockedOn=a,!1;s.shift()}return!0}function wy(e,s,a){jc(e)&&a.delete(s)}function q9(){rm=!1,Ps!==null&&jc(Ps)&&(Ps=null),js!==null&&jc(js)&&(js=null),Us!==null&&jc(Us)&&(Us=null),Sl.forEach(wy),Al.forEach(wy)}function Uc(e,s){e.blockedOn===s&&(e.blockedOn=null,rm||(rm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,q9)))}var zc=null;function Cy(e){zc!==e&&(zc=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zc===e&&(zc=null);for(var s=0;s<e.length;s+=3){var a=e[s],l=e[s+1],h=e[s+2];if(typeof l!="function"){if(sm(l||a)===null)continue;break}var d=ci(a);d!==null&&(e.splice(s,3),s-=3,sd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Cl(e){function s(V){return Uc(V,e)}Ps!==null&&Uc(Ps,e),js!==null&&Uc(js,e),Us!==null&&Uc(Us,e),Sl.forEach(s),Al.forEach(s);for(var a=0;a<zs.length;a++){var l=zs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<zs.length&&(a=zs[0],a.blockedOn===null);)Ay(a),a.blockedOn===null&&zs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],E=h[Ae]||null;if(typeof d=="function")E||Cy(a);else if(E){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,E=d[Ae]||null)S=E.formAction;else if(sm(h)!==null)continue}else S=E.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),Cy(a)}}}function am(e){this._internalRoot=e}Bc.prototype.render=am.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Nn();vy(a,l,e,s,null,null)},Bc.prototype.unmount=am.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;vy(e.current,2,null,e,null,null),bc(),s[Pn]=null}};function Bc(e){this._internalRoot=e}Bc.prototype.unstable_scheduleHydration=function(e){if(e){var s=gs();e={blockedOn:null,target:e,priority:s};for(var a=0;a<zs.length&&s!==0&&s<zs[a].priority;a++);zs.splice(a,0,e),a===0&&Ay(e)}};var Ry=t.version;if(Ry!=="19.1.0")throw Error(r(527,Ry,"19.1.0"));at.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(s),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var H9={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{ye=qc.inject(H9),Jt=qc}catch{}}return xl.createRoot=function(e,s){if(!o(e))throw Error(r(299));var a=!1,l="",h=Hp,d=Gp,E=Fp,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=yy(e,1,!1,null,null,a,l,h,d,E,S,null),e[Pn]=s.current,qd(e),new am(s)},xl.hydrateRoot=function(e,s,a){if(!o(e))throw Error(r(299));var l=!1,h="",d=Hp,E=Gp,S=Fp,V=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(V=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),s=yy(e,1,!0,s,a??null,l,h,d,E,S,V,G),s.context=_y(null),a=s.current,l=Nn(),l=ms(l),h=Ss(l),h.callback=null,As(a,h,l),a=l,s.current.lanes=a,Pi(s,a),Ai(s),e[Pn]=s.current,qd(e),new Bc(s)},xl.version="19.1.0",xl}var Py;function W9(){if(Py)return um.exports;Py=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),um.exports=J9(),um.exports}var t5=W9(),dm={exports:{}},mm={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function e5(){if(jy)return mm;jy=1;var n=Ih().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return mm.c=function(t){return n.H.useMemoCache(t)},mm}var Uy;function n5(){return Uy||(Uy=1,dm.exports=e5()),dm.exports}var De=n5();const i5=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}],An=$.createContext(null),s5=n=>{const t=De.c(10),{children:i}=n,[r,o]=$.useState(!0),u=$.useRef("prod"),[f,m]=$.useState(!1),y=$.useRef(null);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[0]=g):g=t[0];const v=$.useRef(g),b=$.useRef(null),T=$.useRef(null),R=$.useRef(null),M=$.useRef(null),U=$.useRef("");let k;t[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],t[1]=k):k=t[1];const B=$.useRef(k);let Z,X;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>(u.current==="testing"?(y.current||(console.log("Creating a peer connection!"),y.current=new RTCPeerConnection({iceServers:i5})),M.current||(M.current=new MediaStream),y.current.ontrack=Q=>{M.current.addTrack(Q.track)},o(!1)):(async()=>{const D=await(await fetch("https://boopp.metered.live/api/v1/turn/credentials?apiKey=4ed69c72a74b9dba8ccbda3d7e966f90f898")).json();console.log("Peer connection set up!"),y.current=new RTCPeerConnection({iceServers:D}),M.current||(M.current=new MediaStream),y.current.ontrack=w=>{M.current.addTrack(w.track)},o(!1)})(),(async()=>{const Q=await fetch("https://tenor.googleapis.com/v2/featured?key=AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k&client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low").then(r5);B.current=Q.results,console.log(B.current)})(),()=>{y.current&&(y.current.close(),y.current=null)}),X=[],t[2]=Z,t[3]=X):(Z=t[2],X=t[3]),$.useEffect(Z,X),r){let Q;return t[4]===Symbol.for("react.memo_cache_sentinel")?(Q=C.jsx("div",{children:" Loading .. "}),t[4]=Q):Q=t[4],Q}let st;t[5]!==f?(st={peerConnection:y,iceCandidates:v,dataChannel:b,imageChannel:T,videoChannel:R,remoteStream:M,peerName:U,connected:f,setConnected:m,featuredGifs:B},t[5]=f,t[6]=st):st=t[6];let W;return t[7]!==i||t[8]!==st?(W=C.jsx(An,{value:st,children:i}),t[7]=i,t[8]=st,t[9]=W):W=t[9],W};function r5(n){return n.json()}var T1=fu(),Nt=n=>hu(n,T1),b1=fu();Nt.write=n=>hu(n,b1);var Dh=fu();Nt.onStart=n=>hu(n,Dh);var S1=fu();Nt.onFrame=n=>hu(n,S1);var A1=fu();Nt.onFinish=n=>hu(n,A1);var Wa=[];Nt.setTimeout=(n,t)=>{const i=Nt.now()+t,r=()=>{const u=Wa.findIndex(f=>f.cancel==r);~u&&Wa.splice(u,1),Qs-=~u?1:0},o={time:i,handler:n,cancel:r};return Wa.splice(N_(i),0,o),Qs+=1,O_(),o};var N_=n=>~(~Wa.findIndex(t=>t.time>n)||~Wa.length);Nt.cancel=n=>{Dh.delete(n),S1.delete(n),A1.delete(n),T1.delete(n),b1.delete(n)};Nt.sync=n=>{Lm=!0,Nt.batchedUpdates(n),Lm=!1};Nt.throttle=n=>{let t;function i(){try{n(...t)}finally{t=null}}function r(...o){t=o,Nt.onStart(i)}return r.handler=n,r.cancel=()=>{Dh.delete(i),t=null},r};var w1=typeof window<"u"?window.requestAnimationFrame:()=>{};Nt.use=n=>w1=n;Nt.now=typeof performance<"u"?()=>performance.now():Date.now;Nt.batchedUpdates=n=>n();Nt.catch=console.error;Nt.frameLoop="always";Nt.advance=()=>{Nt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):k_()};var Fs=-1,Qs=0,Lm=!1;function hu(n,t){Lm?(t.delete(n),n(0)):(t.add(n),O_())}function O_(){Fs<0&&(Fs=0,Nt.frameLoop!=="demand"&&w1(L_))}function a5(){Fs=-1}function L_(){~Fs&&(w1(L_),Nt.batchedUpdates(k_))}function k_(){const n=Fs;Fs=Nt.now();const t=N_(Fs);if(t&&(P_(Wa.splice(0,t),i=>i.handler()),Qs-=t),!Qs){a5();return}Dh.flush(),T1.flush(n?Math.min(64,Fs-n):16.667),S1.flush(),b1.flush(),A1.flush()}function fu(){let n=new Set,t=n;return{add(i){Qs+=t==n&&!n.has(i)?1:0,n.add(i)},delete(i){return Qs-=t==n&&n.has(i)?1:0,n.delete(i)},flush(i){t.size&&(n=new Set,Qs-=t.size,P_(t,r=>r(i)&&n.add(r)),Qs+=n.size,t=n)}}}function P_(n,t){n.forEach(i=>{try{t(i)}catch(r){Nt.catch(r)}})}var o5=Object.defineProperty,l5=(n,t)=>{for(var i in t)o5(n,i,{get:t[i],enumerable:!0})},li={};l5(li,{assign:()=>c5,colors:()=>Ks,createStringInterpolator:()=>R1,skipAnimation:()=>U_,to:()=>j_,willAdvance:()=>x1});function km(){}var u5=(n,t,i)=>Object.defineProperty(n,t,{value:i,writable:!0,configurable:!0}),ft={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function ls(n,t){if(ft.arr(n)){if(!ft.arr(t)||n.length!==t.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return n===t}var Dt=(n,t)=>n.forEach(t);function Mi(n,t,i){if(ft.arr(n)){for(let r=0;r<n.length;r++)t.call(i,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&t.call(i,n[r],r)}var gn=n=>ft.und(n)?[]:ft.arr(n)?n:[n];function Ul(n,t){if(n.size){const i=Array.from(n);n.clear(),Dt(i,t)}}var Ol=(n,...t)=>Ul(n,i=>i(...t)),C1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),R1,j_,Ks=null,U_=!1,x1=km,c5=n=>{n.to&&(j_=n.to),n.now&&(Nt.now=n.now),n.colors!==void 0&&(Ks=n.colors),n.skipAnimation!=null&&(U_=n.skipAnimation),n.createStringInterpolator&&(R1=n.createStringInterpolator),n.requestAnimationFrame&&Nt.use(n.requestAnimationFrame),n.batchedUpdates&&(Nt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(x1=n.willAdvance),n.frameLoop&&(Nt.frameLoop=n.frameLoop)},zl=new Set,Zn=[],gm=[],lh=0,Mh={get idle(){return!zl.size&&!Zn.length},start(n){lh>n.priority?(zl.add(n),Nt.onStart(h5)):(z_(n),Nt(Pm))},advance:Pm,sort(n){if(lh)Nt.onFrame(()=>Mh.sort(n));else{const t=Zn.indexOf(n);~t&&(Zn.splice(t,1),B_(n))}},clear(){Zn=[],zl.clear()}};function h5(){zl.forEach(z_),zl.clear(),Nt(Pm)}function z_(n){Zn.includes(n)||B_(n)}function B_(n){Zn.splice(f5(Zn,t=>t.priority>n.priority),0,n)}function Pm(n){const t=gm;for(let i=0;i<Zn.length;i++){const r=Zn[i];lh=r.priority,r.idle||(x1(r),r.advance(n),r.idle||t.push(r))}return lh=0,gm=Zn,gm.length=0,Zn=t,Zn.length>0}function f5(n,t){const i=n.findIndex(t);return i<0?n.length:i}var d5={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},oi="[-+]?\\d*\\.?\\d+",uh=oi+"%";function Vh(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var m5=new RegExp("rgb"+Vh(oi,oi,oi)),g5=new RegExp("rgba"+Vh(oi,oi,oi,oi)),p5=new RegExp("hsl"+Vh(oi,uh,uh)),y5=new RegExp("hsla"+Vh(oi,uh,uh,oi)),_5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,v5=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,E5=/^#([0-9a-fA-F]{6})$/,T5=/^#([0-9a-fA-F]{8})$/;function b5(n){let t;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(t=E5.exec(n))?parseInt(t[1]+"ff",16)>>>0:Ks&&Ks[n]!==void 0?Ks[n]:(t=m5.exec(n))?(Qa(t[1])<<24|Qa(t[2])<<16|Qa(t[3])<<8|255)>>>0:(t=g5.exec(n))?(Qa(t[1])<<24|Qa(t[2])<<16|Qa(t[3])<<8|qy(t[4]))>>>0:(t=_5.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=T5.exec(n))?parseInt(t[1],16)>>>0:(t=v5.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=p5.exec(n))?(zy(By(t[1]),Hc(t[2]),Hc(t[3]))|255)>>>0:(t=y5.exec(n))?(zy(By(t[1]),Hc(t[2]),Hc(t[3]))|qy(t[4]))>>>0:null}function pm(n,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(t-n)*6*i:i<1/2?t:i<2/3?n+(t-n)*(2/3-i)*6:n}function zy(n,t,i){const r=i<.5?i*(1+t):i+t-i*t,o=2*i-r,u=pm(o,r,n+1/3),f=pm(o,r,n),m=pm(o,r,n-1/3);return Math.round(u*255)<<24|Math.round(f*255)<<16|Math.round(m*255)<<8}function Qa(n){const t=parseInt(n,10);return t<0?0:t>255?255:t}function By(n){return(parseFloat(n)%360+360)%360/360}function qy(n){const t=parseFloat(n);return t<0?0:t>1?255:Math.round(t*255)}function Hc(n){const t=parseFloat(n);return t<0?0:t>100?1:t/100}function Hy(n){let t=b5(n);if(t===null)return n;t=t||0;const i=(t&4278190080)>>>24,r=(t&16711680)>>>16,o=(t&65280)>>>8,u=(t&255)/255;return`rgba(${i}, ${r}, ${o}, ${u})`}var Xl=(n,t,i)=>{if(ft.fun(n))return n;if(ft.arr(n))return Xl({range:n,output:t,extrapolate:i});if(ft.str(n.output[0]))return R1(n);const r=n,o=r.output,u=r.range||[0,1],f=r.extrapolateLeft||r.extrapolate||"extend",m=r.extrapolateRight||r.extrapolate||"extend",y=r.easing||(g=>g);return g=>{const v=A5(g,u);return S5(g,u[v],u[v+1],o[v],o[v+1],y,f,m,r.map)}};function S5(n,t,i,r,o,u,f,m,y){let g=y?y(n):n;if(g<t){if(f==="identity")return g;f==="clamp"&&(g=t)}if(g>i){if(m==="identity")return g;m==="clamp"&&(g=i)}return r===o?r:t===i?n<=t?r:o:(t===-1/0?g=-g:i===1/0?g=g-t:g=(g-t)/(i-t),g=u(g),r===-1/0?g=-g:o===1/0?g=g+r:g=g*(o-r)+r,g)}function A5(n,t){for(var i=1;i<t.length-1&&!(t[i]>=n);++i);return i-1}var w5={linear:n=>n},$l=Symbol.for("FluidValue.get"),io=Symbol.for("FluidValue.observers"),Xn=n=>!!(n&&n[$l]),En=n=>n&&n[$l]?n[$l]():n,Gy=n=>n[io]||null;function C5(n,t){n.eventObserved?n.eventObserved(t):n(t)}function Zl(n,t){const i=n[io];i&&i.forEach(r=>{C5(r,t)})}var q_=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");R5(this,n)}},R5=(n,t)=>H_(n,$l,t);function mo(n,t){if(n[$l]){let i=n[io];i||H_(n,io,i=new Set),i.has(t)||(i.add(t),n.observerAdded&&n.observerAdded(i.size,t))}return t}function Jl(n,t){const i=n[io];if(i&&i.has(t)){const r=i.size-1;r?i.delete(t):n[io]=null,n.observerRemoved&&n.observerRemoved(r,t)}}var H_=(n,t,i)=>Object.defineProperty(n,t,{value:i,writable:!0,configurable:!0}),Wc=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,x5=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Fy=new RegExp(`(${Wc.source})(%|[a-z]+)`,"i"),I5=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Nh=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,G_=n=>{const[t,i]=D5(n);if(!t||C1())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(i&&i.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||n}else{if(i&&Nh.test(i))return G_(i);if(i)return i}return n},D5=n=>{const t=Nh.exec(n);if(!t)return[,];const[,i,r]=t;return[i,r]},ym,M5=(n,t,i,r,o)=>`rgba(${Math.round(t)}, ${Math.round(i)}, ${Math.round(r)}, ${o})`,F_=n=>{ym||(ym=Ks?new RegExp(`(${Object.keys(Ks).join("|")})(?!\\w)`,"g"):/^\b$/);const t=n.output.map(u=>En(u).replace(Nh,G_).replace(x5,Hy).replace(ym,Hy)),i=t.map(u=>u.match(Wc).map(Number)),o=i[0].map((u,f)=>i.map(m=>{if(!(f in m))throw Error('The arity of each "output" value must be equal');return m[f]})).map(u=>Xl({...n,output:u}));return u=>{var y;const f=!Fy.test(t[0])&&((y=t.find(g=>Fy.test(g)))==null?void 0:y.replace(Wc,""));let m=0;return t[0].replace(Wc,()=>`${o[m++](u)}${f||""}`).replace(I5,M5)}},I1="react-spring: ",Q_=n=>{const t=n;let i=!1;if(typeof t!="function")throw new TypeError(`${I1}once requires a function parameter`);return(...r)=>{i||(t(...r),i=!0)}},V5=Q_(console.warn);function N5(){V5(`${I1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var O5=Q_(console.warn);function L5(){O5(`${I1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Oh(n){return ft.str(n)&&(n[0]=="#"||/\d/.test(n)||!C1()&&Nh.test(n)||n in(Ks||{}))}var Yr=C1()?$.useEffect:$.useLayoutEffect,k5=()=>{const n=$.useRef(!1);return Yr(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function D1(){const n=$.useState()[1],t=k5();return()=>{t.current&&n(Math.random())}}var M1=n=>$.useEffect(n,P5),P5=[];function jm(n){const t=$.useRef(void 0);return $.useEffect(()=>{t.current=n}),t.current}var Wl=Symbol.for("Animated:node"),j5=n=>!!n&&n[Wl]===n,Ci=n=>n&&n[Wl],V1=(n,t)=>u5(n,Wl,t),Lh=n=>n&&n[Wl]&&n[Wl].getPayload(),Y_=class{constructor(){V1(this,this)}getPayload(){return this.payload||[]}},kh=class K_ extends Y_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ft.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new K_(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,i){return ft.num(t)&&(this.lastPosition=t,i&&(t=Math.round(t/i)*i,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ft.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},ch=class X_ extends kh{constructor(t){super(0),this._string=null,this._toString=Xl({output:[t,t]})}static create(t){return new X_(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ft.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Xl({output:[this.getValue(),t]})),this._value=0,super.reset()}},hh={dependencies:null},Ph=class extends Y_{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const t={};return Mi(this.source,(i,r)=>{j5(i)?t[r]=i.getValue(n):Xn(i)?t[r]=En(i):n||(t[r]=i)}),t}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&Dt(this.payload,n=>n.reset())}_makePayload(n){if(n){const t=new Set;return Mi(n,this._addToPayload,t),Array.from(t)}}_addToPayload(n){hh.dependencies&&Xn(n)&&hh.dependencies.add(n);const t=Lh(n);t&&Dt(t,i=>this.add(i))}},U5=class $_ extends Ph{constructor(t){super(t)}static create(t){return new $_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const i=this.getPayload();return t.length==i.length?i.map((r,o)=>r.setValue(t[o])).some(Boolean):(super.setValue(t.map(z5)),!0)}};function z5(n){return(Oh(n)?ch:kh).create(n)}function Um(n){const t=Ci(n);return t?t.constructor:ft.arr(n)?U5:Oh(n)?ch:kh}var Qy=(n,t)=>{const i=!ft.fun(n)||n.prototype&&n.prototype.isReactComponent;return $.forwardRef((r,o)=>{const u=$.useRef(null),f=i&&$.useCallback(M=>{u.current=H5(o,M)},[o]),[m,y]=q5(r,t),g=D1(),v=()=>{const M=u.current;if(i&&!M)return;(M?t.applyAnimatedValues(M,m.getValue(!0)):!1)===!1&&g()},b=new B5(v,y),T=$.useRef(void 0);Yr(()=>(T.current=b,Dt(y,M=>mo(M,b)),()=>{T.current&&(Dt(T.current.deps,M=>Jl(M,T.current)),Nt.cancel(T.current.update))})),$.useEffect(v,[]),M1(()=>()=>{const M=T.current;Dt(M.deps,U=>Jl(U,M))});const R=t.getComponentProps(m.getValue());return $.createElement(n,{...R,ref:f})})},B5=class{constructor(n,t){this.update=n,this.deps=t}eventObserved(n){n.type=="change"&&Nt.write(this.update)}};function q5(n,t){const i=new Set;return hh.dependencies=i,n.style&&(n={...n,style:t.createAnimatedStyle(n.style)}),n=new Ph(n),hh.dependencies=null,[n,i]}function H5(n,t){return n&&(ft.fun(n)?n(t):n.current=t),t}var Yy=Symbol.for("AnimatedComponent"),G5=(n,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=o=>new Ph(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:r},u=f=>{const m=Ky(f)||"Anonymous";return ft.str(f)?f=u[f]||(u[f]=Qy(f,o)):f=f[Yy]||(f[Yy]=Qy(f,o)),f.displayName=`Animated(${m})`,f};return Mi(n,(f,m)=>{ft.arr(n)&&(m=Ky(f)),u[m]=u(f)}),{animated:u}},Ky=n=>ft.str(n)?n:n&&ft.str(n.displayName)?n.displayName:ft.fun(n)&&n.name||null;function Tn(n,...t){return ft.fun(n)?n(...t):n}var Bl=(n,t)=>n===!0||!!(t&&n&&(ft.fun(n)?n(t):gn(n).includes(t))),Z_=(n,t)=>ft.obj(n)?t&&n[t]:n,J_=(n,t)=>n.default===!0?n[t]:n.default?n.default[t]:void 0,F5=n=>n,jh=(n,t=F5)=>{let i=Q5;n.default&&n.default!==!0&&(n=n.default,i=Object.keys(n));const r={};for(const o of i){const u=t(n[o],o);ft.und(u)||(r[o]=u)}return r},Q5=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Y5={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function K5(n){const t={};let i=0;if(Mi(n,(r,o)=>{Y5[o]||(t[o]=r,i++)}),i)return t}function N1(n){const t=K5(n);if(t){const i={to:t};return Mi(n,(r,o)=>o in t||(i[o]=r)),i}return{...n}}function tu(n){return n=En(n),ft.arr(n)?n.map(tu):Oh(n)?li.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function W_(n){for(const t in n)return!0;return!1}function zm(n){return ft.fun(n)||ft.arr(n)&&ft.obj(n[0])}function Bm(n,t){var i;(i=n.ref)==null||i.delete(n),t==null||t.delete(n)}function tv(n,t){var i;t&&n.ref!==t&&((i=n.ref)==null||i.delete(n),t.add(n),n.ref=t)}var qm={default:{tension:170,friction:26},stiff:{tension:210,friction:20}},Hm={...qm.default,mass:1,damping:1,easing:w5.linear,clamp:!1},X5=class{constructor(){this.velocity=0,Object.assign(this,Hm)}};function $5(n,t,i){i&&(i={...i},Xy(i,t),t={...i,...t}),Xy(n,t),Object.assign(n,t);for(const f in Hm)n[f]==null&&(n[f]=Hm[f]);let{frequency:r,damping:o}=n;const{mass:u}=n;return ft.und(r)||(r<.01&&(r=.01),o<0&&(o=0),n.tension=Math.pow(2*Math.PI/r,2)*u,n.friction=4*Math.PI*o*u/r),n}function Xy(n,t){if(!ft.und(t.decay))n.duration=void 0;else{const i=!ft.und(t.tension)||!ft.und(t.friction);(i||!ft.und(t.frequency)||!ft.und(t.damping)||!ft.und(t.mass))&&(n.duration=void 0,n.decay=void 0),i&&(n.frequency=void 0)}}var $y=[],Z5=class{constructor(){this.changed=!1,this.values=$y,this.toValues=null,this.fromValues=$y,this.config=new X5,this.immediate=!1}};function ev(n,{key:t,props:i,defaultProps:r,state:o,actions:u}){return new Promise((f,m)=>{let y,g,v=Bl(i.cancel??(r==null?void 0:r.cancel),t);if(v)R();else{ft.und(i.pause)||(o.paused=Bl(i.pause,t));let M=r==null?void 0:r.pause;M!==!0&&(M=o.paused||Bl(M,t)),y=Tn(i.delay||0,t),M?(o.resumeQueue.add(T),u.pause()):(u.resume(),T())}function b(){o.resumeQueue.add(T),o.timeouts.delete(g),g.cancel(),y=g.time-Nt.now()}function T(){y>0&&!li.skipAnimation?(o.delayed=!0,g=Nt.setTimeout(R,y),o.pauseQueue.add(b),o.timeouts.add(g)):R()}function R(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(b),o.timeouts.delete(g),n<=(o.cancelId||0)&&(v=!0);try{u.start({...i,callId:n,cancel:v},f)}catch(M){m(M)}}})}var O1=(n,t)=>t.length==1?t[0]:t.some(i=>i.cancelled)?to(n.get()):t.every(i=>i.noop)?nv(n.get()):ai(n.get(),t.every(i=>i.finished)),nv=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),ai=(n,t,i=!1)=>({value:n,finished:t,cancelled:i}),to=n=>({value:n,cancelled:!0,finished:!1});function iv(n,t,i,r){const{callId:o,parentId:u,onRest:f}=t,{asyncTo:m,promise:y}=i;return!u&&n===m&&!t.reset?y:i.promise=(async()=>{i.asyncId=o,i.asyncTo=n;const g=jh(t,(k,B)=>B==="onRest"?void 0:k);let v,b;const T=new Promise((k,B)=>(v=k,b=B)),R=k=>{const B=o<=(i.cancelId||0)&&to(r)||o!==i.asyncId&&ai(r,!1);if(B)throw k.result=B,b(k),k},M=(k,B)=>{const Z=new Zy,X=new Jy;return(async()=>{if(li.skipAnimation)throw eu(i),X.result=ai(r,!1),b(X),X;R(Z);const st=ft.obj(k)?{...k}:{...B,to:k};st.parentId=o,Mi(g,(Q,D)=>{ft.und(st[D])&&(st[D]=Q)});const W=await r.start(st);return R(Z),i.paused&&await new Promise(Q=>{i.resumeQueue.add(Q)}),W})()};let U;if(li.skipAnimation)return eu(i),ai(r,!1);try{let k;ft.arr(n)?k=(async B=>{for(const Z of B)await M(Z)})(n):k=Promise.resolve(n(M,r.stop.bind(r))),await Promise.all([k.then(v),T]),U=ai(r.get(),!0,!1)}catch(k){if(k instanceof Zy)U=k.result;else if(k instanceof Jy)U=k.result;else throw k}finally{o==i.asyncId&&(i.asyncId=u,i.asyncTo=u?m:void 0,i.promise=u?y:void 0)}return ft.fun(f)&&Nt.batchedUpdates(()=>{f(U,r,r.item)}),U})()}function eu(n,t){Ul(n.timeouts,i=>i.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,t&&(n.cancelId=t)}var Zy=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Jy=class extends Error{constructor(){super("SkipAnimationSignal")}},Gm=n=>n instanceof L1,J5=1,L1=class extends q_{constructor(){super(...arguments),this.id=J5++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Ci(this);return n&&n.getValue()}to(...n){return li.to(this,n)}interpolate(...n){return N5(),li.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,t=!1){Zl(this,{type:"change",parent:this,value:n,idle:t})}_onPriorityChange(n){this.idle||Mh.sort(this),Zl(this,{type:"priority",parent:this,priority:n})}},Xr=Symbol.for("SpringPhase"),sv=1,Fm=2,Qm=4,_m=n=>(n[Xr]&sv)>0,qs=n=>(n[Xr]&Fm)>0,Il=n=>(n[Xr]&Qm)>0,Wy=(n,t)=>t?n[Xr]|=Fm|sv:n[Xr]&=~Fm,t2=(n,t)=>t?n[Xr]|=Qm:n[Xr]&=~Qm,W5=class extends L1{constructor(n,t){if(super(),this.animation=new Z5,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ft.und(n)||!ft.und(t)){const i=ft.obj(n)?{...n}:{...t,from:n};ft.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(qs(this)||this._state.asyncTo)||Il(this)}get goal(){return En(this.animation.to)}get velocity(){const n=Ci(this);return n instanceof kh?n.lastVelocity||0:n.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return _m(this)}get isAnimating(){return qs(this)}get isPaused(){return Il(this)}get isDelayed(){return this._state.delayed}advance(n){let t=!0,i=!1;const r=this.animation;let{toValues:o}=r;const{config:u}=r,f=Lh(r.to);!f&&Xn(r.to)&&(o=gn(En(r.to))),r.values.forEach((g,v)=>{if(g.done)return;const b=g.constructor==ch?1:f?f[v].lastPosition:o[v];let T=r.immediate,R=b;if(!T){if(R=g.lastPosition,u.tension<=0){g.done=!0;return}let M=g.elapsedTime+=n;const U=r.fromValues[v],k=g.v0!=null?g.v0:g.v0=ft.arr(u.velocity)?u.velocity[v]:u.velocity;let B;const Z=u.precision||(U==b?.005:Math.min(1,Math.abs(b-U)*.001));if(ft.und(u.duration))if(u.decay){const X=u.decay===!0?.998:u.decay,st=Math.exp(-(1-X)*M);R=U+k/(1-X)*(1-st),T=Math.abs(g.lastPosition-R)<=Z,B=k*st}else{B=g.lastVelocity==null?k:g.lastVelocity;const X=u.restVelocity||Z/10,st=u.clamp?0:u.bounce,W=!ft.und(st),Q=U==b?g.v0>0:U<b;let D,w=!1;const x=1,L=Math.ceil(n/x);for(let O=0;O<L&&(D=Math.abs(B)>X,!(!D&&(T=Math.abs(b-R)<=Z,T)));++O){W&&(w=R==b||R>b==Q,w&&(B=-B*st,R=b));const j=-u.tension*1e-6*(R-b),I=-u.friction*.001*B,dt=(j+I)/u.mass;B=B+dt*x,R=R+B*x}}else{let X=1;u.duration>0&&(this._memoizedDuration!==u.duration&&(this._memoizedDuration=u.duration,g.durationProgress>0&&(g.elapsedTime=u.duration*g.durationProgress,M=g.elapsedTime+=n)),X=(u.progress||0)+M/this._memoizedDuration,X=X>1?1:X<0?0:X,g.durationProgress=X),R=U+u.easing(X)*(b-U),B=(R-g.lastPosition)/n,T=X==1}g.lastVelocity=B,Number.isNaN(R)&&(console.warn("Got NaN while animating:",this),T=!0)}f&&!f[v].done&&(T=!1),T?g.done=!0:t=!1,g.setValue(R,u.round)&&(i=!0)});const m=Ci(this),y=m.getValue();if(t){const g=En(r.to);(y!==g||i)&&!u.decay?(m.setValue(g),this._onChange(g)):i&&u.decay&&this._onChange(y),this._stop()}else i&&this._onChange(y)}set(n){return Nt.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(qs(this)){const{to:n,config:t}=this.animation;Nt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,t){let i;return ft.und(n)?(i=this.queue||[],this.queue=[]):i=[ft.obj(n)?n:{...t,to:n}],Promise.all(i.map(r=>this._update(r))).then(r=>O1(this,r))}stop(n){const{to:t}=this.animation;return this._focus(this.get()),eu(this._state,n&&this._lastCallId),Nt.batchedUpdates(()=>this._stop(t,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const t=this.key||"";let{to:i,from:r}=n;i=ft.obj(i)?i[t]:i,(i==null||zm(i))&&(i=void 0),r=ft.obj(r)?r[t]:r,r==null&&(r=void 0);const o={to:i,from:r};return _m(this)||(n.reverse&&([i,r]=[r,i]),r=En(r),ft.und(r)?Ci(this)||this._set(i):this._set(r)),o}_update({...n},t){const{key:i,defaultProps:r}=this;n.default&&Object.assign(r,jh(n,(f,m)=>/^on/.test(m)?Z_(f,i):f)),n2(this,n,"onProps"),Ml(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const u=this._state;return ev(++this._lastCallId,{key:i,props:n,defaultProps:r,state:u,actions:{pause:()=>{Il(this)||(t2(this,!0),Ol(u.pauseQueue),Ml(this,"onPause",ai(this,Dl(this,this.animation.to)),this))},resume:()=>{Il(this)&&(t2(this,!1),qs(this)&&this._resume(),Ol(u.resumeQueue),Ml(this,"onResume",ai(this,Dl(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(f=>{if(n.loop&&f.finished&&!(t&&f.noop)){const m=rv(n);if(m)return this._update(m,!0)}return f})}_merge(n,t,i){if(t.cancel)return this.stop(!0),i(to(this));const r=!ft.und(n.to),o=!ft.und(n.from);if(r||o)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(to(this));const{key:u,defaultProps:f,animation:m}=this,{to:y,from:g}=m;let{to:v=y,from:b=g}=n;o&&!r&&(!t.default||ft.und(v))&&(v=b),t.reverse&&([v,b]=[b,v]);const T=!ls(b,g);T&&(m.from=b),b=En(b);const R=!ls(v,y);R&&this._focus(v);const M=zm(t.to),{config:U}=m,{decay:k,velocity:B}=U;(r||o)&&(U.velocity=0),t.config&&!M&&$5(U,Tn(t.config,u),t.config!==f.config?Tn(f.config,u):void 0);let Z=Ci(this);if(!Z||ft.und(v))return i(ai(this,!0));const X=ft.und(t.reset)?o&&!t.default:!ft.und(b)&&Bl(t.reset,u),st=X?b:this.get(),W=tu(v),Q=ft.num(W)||ft.arr(W)||Oh(W),D=!M&&(!Q||Bl(f.immediate||t.immediate,u));if(R){const O=Um(v);if(O!==Z.constructor)if(D)Z=this._set(W);else throw Error(`Cannot animate between ${Z.constructor.name} and ${O.name}, as the "to" prop suggests`)}const w=Z.constructor;let x=Xn(v),L=!1;if(!x){const O=X||!_m(this)&&T;(R||O)&&(L=ls(tu(st),W),x=!L),(!ls(m.immediate,D)&&!D||!ls(U.decay,k)||!ls(U.velocity,B))&&(x=!0)}if(L&&qs(this)&&(m.changed&&!X?x=!0:x||this._stop(y)),!M&&((x||Xn(y))&&(m.values=Z.getPayload(),m.toValues=Xn(v)?null:w==ch?[1]:gn(W)),m.immediate!=D&&(m.immediate=D,!D&&!X&&this._set(y)),x)){const{onRest:O}=m;Dt(e6,I=>n2(this,t,I));const j=ai(this,Dl(this,y));Ol(this._pendingCalls,j),this._pendingCalls.add(i),m.changed&&Nt.batchedUpdates(()=>{var I;m.changed=!X,O==null||O(j,this),X?Tn(f.onRest,j):(I=m.onStart)==null||I.call(m,j,this)})}X&&this._set(st),M?i(iv(t.to,t,this._state,this)):x?this._start():qs(this)&&!R?this._pendingCalls.add(i):i(nv(st))}_focus(n){const t=this.animation;n!==t.to&&(Gy(this)&&this._detach(),t.to=n,Gy(this)&&this._attach())}_attach(){let n=0;const{to:t}=this.animation;Xn(t)&&(mo(t,this),Gm(t)&&(n=t.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;Xn(n)&&Jl(n,this)}_set(n,t=!0){const i=En(n);if(!ft.und(i)){const r=Ci(this);if(!r||!ls(i,r.getValue())){const o=Um(i);!r||r.constructor!=o?V1(this,o.create(i)):r.setValue(i),r&&Nt.batchedUpdates(()=>{this._onChange(i,t)})}}return Ci(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,Ml(this,"onStart",ai(this,Dl(this,n.to)),this))}_onChange(n,t){t||(this._onStart(),Tn(this.animation.onChange,n,this)),Tn(this.defaultProps.onChange,n,this),super._onChange(n,t)}_start(){const n=this.animation;Ci(this).reset(En(n.to)),n.immediate||(n.fromValues=n.values.map(t=>t.lastPosition)),qs(this)||(Wy(this,!0),Il(this)||this._resume())}_resume(){li.skipAnimation?this.finish():Mh.start(this)}_stop(n,t){if(qs(this)){Wy(this,!1);const i=this.animation;Dt(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),Zl(this,{type:"idle",parent:this});const r=t?to(this.get()):ai(this.get(),Dl(this,n??i.to));Ol(this._pendingCalls,r),i.changed&&(i.changed=!1,Ml(this,"onRest",r,this))}}};function Dl(n,t){const i=tu(t),r=tu(n.get());return ls(r,i)}function rv(n,t=n.loop,i=n.to){const r=Tn(t);if(r){const o=r!==!0&&N1(r),u=(o||n).reverse,f=!o||o.reset;return nu({...n,loop:t,default:!1,pause:void 0,to:!u||zm(i)?i:void 0,from:f?n.from:void 0,reset:f,...o})}}function nu(n){const{to:t,from:i}=n=N1(n),r=new Set;return ft.obj(t)&&e2(t,r),ft.obj(i)&&e2(i,r),n.keys=r.size?Array.from(r):null,n}function t6(n){const t=nu(n);return ft.und(t.default)&&(t.default=jh(t)),t}function e2(n,t){Mi(n,(i,r)=>i!=null&&t.add(r))}var e6=["onStart","onRest","onChange","onPause","onResume"];function n2(n,t,i){n.animation[i]=t[i]!==J_(t,i)?Z_(t[i],n.key):void 0}function Ml(n,t,...i){var r,o,u,f;(o=(r=n.animation)[t])==null||o.call(r,...i),(f=(u=n.defaultProps)[t])==null||f.call(u,...i)}var n6=["onStart","onChange","onRest"],i6=1,av=class{constructor(t,i){this.id=i6++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),i&&(this._flush=i),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((i,r)=>t[r]=i.get()),t}set(t){for(const i in t){const r=t[i];ft.und(r)||this.springs[i].set(r)}}update(t){return t&&this.queue.push(nu(t)),this}start(t){let{queue:i}=this;return t?i=gn(t).map(nu):this.queue=[],this._flush?this._flush(this,i):(hv(this,i),Ym(this,i))}stop(t,i){if(t!==!!t&&(i=t),i){const r=this.springs;Dt(gn(i),o=>r[o].stop(!!t))}else eu(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(ft.und(t))this.start({pause:!0});else{const i=this.springs;Dt(gn(t),r=>i[r].pause())}return this}resume(t){if(ft.und(t))this.start({pause:!1});else{const i=this.springs;Dt(gn(t),r=>i[r].resume())}return this}each(t){Mi(this.springs,t)}_onFrame(){const{onStart:t,onChange:i,onRest:r}=this._events,o=this._active.size>0,u=this._changed.size>0;(o&&!this._started||u&&!this._started)&&(this._started=!0,Ul(t,([y,g])=>{g.value=this.get(),y(g,this,this._item)}));const f=!o&&this._started,m=u||f&&r.size?this.get():null;u&&i.size&&Ul(i,([y,g])=>{g.value=m,y(g,this,this._item)}),f&&(this._started=!1,Ul(r,([y,g])=>{g.value=m,y(g,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Nt.onFrame(this._onFrame)}};function Ym(n,t){return Promise.all(t.map(i=>ov(n,i))).then(i=>O1(n,i))}async function ov(n,t,i){const{keys:r,to:o,from:u,loop:f,onRest:m,onResolve:y}=t,g=ft.obj(t.default)&&t.default;f&&(t.loop=!1),o===!1&&(t.to=null),u===!1&&(t.from=null);const v=ft.arr(o)||ft.fun(o)?o:void 0;v?(t.to=void 0,t.onRest=void 0,g&&(g.onRest=void 0)):Dt(n6,U=>{const k=t[U];if(ft.fun(k)){const B=n._events[U];t[U]=({finished:Z,cancelled:X})=>{const st=B.get(k);st?(Z||(st.finished=!1),X&&(st.cancelled=!0)):B.set(k,{value:null,finished:Z||!1,cancelled:X||!1})},g&&(g[U]=t[U])}});const b=n._state;t.pause===!b.paused?(b.paused=t.pause,Ol(t.pause?b.pauseQueue:b.resumeQueue)):b.paused&&(t.pause=!0);const T=(r||Object.keys(n.springs)).map(U=>n.springs[U].start(t)),R=t.cancel===!0||J_(t,"cancel")===!0;(v||R&&b.asyncId)&&T.push(ev(++n._lastAsyncId,{props:t,state:b,actions:{pause:km,resume:km,start(U,k){R?(eu(b,n._lastAsyncId),k(to(n))):(U.onRest=m,k(iv(v,U,b,n)))}}})),b.paused&&await new Promise(U=>{b.resumeQueue.add(U)});const M=O1(n,await Promise.all(T));if(f&&M.finished&&!(i&&M.noop)){const U=rv(t,f,o);if(U)return hv(n,[U]),ov(n,U,!0)}return y&&Nt.batchedUpdates(()=>y(M,n,n.item)),M}function Km(n,t){const i={...n.springs};return t&&Dt(gn(t),r=>{ft.und(r.keys)&&(r=nu(r)),ft.obj(r.to)||(r={...r,to:void 0}),cv(i,r,o=>uv(o))}),lv(n,i),i}function lv(n,t){Mi(t,(i,r)=>{n.springs[r]||(n.springs[r]=i,mo(i,n))})}function uv(n,t){const i=new W5;return i.key=n,t&&mo(i,t),i}function cv(n,t,i){t.keys&&Dt(t.keys,r=>{(n[r]||(n[r]=i(r)))._prepareNode(t)})}function hv(n,t){Dt(t,i=>{cv(n.springs,i,r=>uv(r,n))})}var fv=$.createContext({pause:!1,immediate:!1}),dv=()=>{const n=[],t=function(r){L5();const o=[];return Dt(n,(u,f)=>{if(ft.und(r))o.push(u.start());else{const m=i(r,u,f);m&&o.push(u.start(m))}}),o};t.current=n,t.add=function(r){n.includes(r)||n.push(r)},t.delete=function(r){const o=n.indexOf(r);~o&&n.splice(o,1)},t.pause=function(){return Dt(n,r=>r.pause(...arguments)),this},t.resume=function(){return Dt(n,r=>r.resume(...arguments)),this},t.set=function(r){Dt(n,(o,u)=>{const f=ft.fun(r)?r(u,o):r;f&&o.set(f)})},t.start=function(r){const o=[];return Dt(n,(u,f)=>{if(ft.und(r))o.push(u.start());else{const m=this._getProps(r,u,f);m&&o.push(u.start(m))}}),o},t.stop=function(){return Dt(n,r=>r.stop(...arguments)),this},t.update=function(r){return Dt(n,(o,u)=>o.update(this._getProps(r,o,u))),this};const i=function(r,o,u){return ft.fun(r)?r(u,o):r};return t._getProps=i,t};function s6(n,t,i){const r=ft.fun(t)&&t;r&&!i&&(i=[]);const o=$.useMemo(()=>r||arguments.length==3?dv():void 0,[]),u=$.useRef(0),f=D1(),m=$.useMemo(()=>({ctrls:[],queue:[],flush(B,Z){const X=Km(B,Z);return u.current>0&&!m.queue.length&&!Object.keys(X).some(W=>!B.springs[W])?Ym(B,Z):new Promise(W=>{lv(B,X),m.queue.push(()=>{W(Ym(B,Z))}),f()})}}),[]),y=$.useRef([...m.ctrls]),g=$.useRef([]),v=jm(n)||0;$.useMemo(()=>{Dt(y.current.slice(n,v),B=>{Bm(B,o),B.stop(!0)}),y.current.length=n,b(v,n)},[n]),$.useMemo(()=>{b(0,Math.min(v,n))},i);function b(B,Z){for(let X=B;X<Z;X++){const st=y.current[X]||(y.current[X]=new av(null,m.flush)),W=r?r(X,st):t[X];W&&(g.current[X]=t6(W))}}const T=y.current.map((B,Z)=>Km(B,g.current[Z])),R=$.useContext(fv),M=jm(R),U=R!==M&&W_(R);Yr(()=>{u.current++,m.ctrls=y.current;const{queue:B}=m;B.length&&(m.queue=[],Dt(B,Z=>Z())),Dt(y.current,(Z,X)=>{o==null||o.add(Z),U&&Z.start({default:R});const st=g.current[X];st&&(tv(Z,st.ref),Z.ref?Z.queue.push(st):Z.start(st))})}),M1(()=>()=>{Dt(m.ctrls,B=>B.stop(!0))});const k=T.map(B=>({...B}));return o?[k,o]:k}function go(n,t){const i=ft.fun(n),[[r],o]=s6(1,i?n:[n],i?[]:t);return i||arguments.length==2?[r,o]:r}function r6(n,t,i){const r=ft.fun(t)&&t,{reset:o,sort:u,trail:f=0,expires:m=!0,exitBeforeEnter:y=!1,onDestroyed:g,ref:v,config:b}=r?r():t,T=$.useMemo(()=>r||arguments.length==3?dv():void 0,[]),R=gn(n),M=[],U=$.useRef(null),k=o?null:U.current;Yr(()=>{U.current=M}),M1(()=>(Dt(M,dt=>{T==null||T.add(dt.ctrl),dt.ctrl.ref=T}),()=>{Dt(U.current,dt=>{dt.expired&&clearTimeout(dt.expirationId),Bm(dt.ctrl,T),dt.ctrl.stop(!0)})}));const B=o6(R,r?r():t,k),Z=o&&U.current||[];Yr(()=>Dt(Z,({ctrl:dt,item:pt,key:F})=>{Bm(dt,T),Tn(g,pt,F)}));const X=[];if(k&&Dt(k,(dt,pt)=>{dt.expired?(clearTimeout(dt.expirationId),Z.push(dt)):(pt=X[pt]=B.indexOf(dt.key),~pt&&(M[pt]=dt))}),Dt(R,(dt,pt)=>{M[pt]||(M[pt]={key:B[pt],item:dt,phase:"mount",ctrl:new av},M[pt].ctrl.item=dt)}),X.length){let dt=-1;const{leave:pt}=r?r():t;Dt(X,(F,at)=>{const ht=k[at];~F?(dt=M.indexOf(ht),M[dt]={...ht,item:R[F]}):pt&&M.splice(++dt,0,ht)})}ft.fun(u)&&M.sort((dt,pt)=>u(dt.item,pt.item));let st=-f;const W=D1(),Q=jh(t),D=new Map,w=$.useRef(new Map),x=$.useRef(!1);Dt(M,(dt,pt)=>{const F=dt.key,at=dt.phase,ht=r?r():t;let Et,N;const tt=Tn(ht.delay||0,F);if(at=="mount")Et=ht.enter,N="enter";else{const lt=B.indexOf(F)<0;if(at!="leave")if(lt)Et=ht.leave,N="leave";else if(Et=ht.update)N="update";else return;else if(!lt)Et=ht.enter,N="enter";else return}if(Et=Tn(Et,dt.item,pt),Et=ft.obj(Et)?N1(Et):{to:Et},!Et.config){const lt=b||Q.config;Et.config=Tn(lt,dt.item,pt,N)}st+=f;const nt={...Q,delay:tt+st,ref:v,immediate:ht.immediate,reset:!1,...Et};if(N=="enter"&&ft.und(nt.from)){const lt=r?r():t,mt=ft.und(lt.initial)||k?lt.from:lt.initial;nt.from=Tn(mt,dt.item,pt)}const{onResolve:rt}=nt;nt.onResolve=lt=>{Tn(rt,lt);const mt=U.current,Tt=mt.find(xt=>xt.key===F);if(Tt&&!(lt.cancelled&&Tt.phase!="update")&&Tt.ctrl.idle){const xt=mt.every(Yt=>Yt.ctrl.idle);if(Tt.phase=="leave"){const Yt=Tn(m,Tt.item);if(Yt!==!1){const pe=Yt===!0?0:Yt;if(Tt.expired=!0,!xt&&pe>0){pe<=2147483647&&(Tt.expirationId=setTimeout(W,pe));return}}}xt&&mt.some(Yt=>Yt.expired)&&(w.current.delete(Tt),y&&(x.current=!0),W())}};const yt=Km(dt.ctrl,nt);N==="leave"&&y?w.current.set(dt,{phase:N,springs:yt,payload:nt}):D.set(dt,{phase:N,springs:yt,payload:nt})});const L=$.useContext(fv),O=jm(L),j=L!==O&&W_(L);Yr(()=>{j&&Dt(M,dt=>{dt.ctrl.start({default:L})})},[L]),Dt(D,(dt,pt)=>{if(w.current.size){const F=M.findIndex(at=>at.key===pt.key);M.splice(F,1)}}),Yr(()=>{Dt(w.current.size?w.current:D,({phase:dt,payload:pt},F)=>{const{ctrl:at}=F;F.phase=dt,T==null||T.add(at),j&&dt=="enter"&&at.start({default:L}),pt&&(tv(at,pt.ref),(at.ref||T)&&!x.current?at.update(pt):(at.start(pt),x.current&&(x.current=!1)))})},o?void 0:i);const I=dt=>$.createElement($.Fragment,null,M.map((pt,F)=>{const{springs:at}=D.get(pt)||pt.ctrl,ht=dt({...at},pt.item,pt,F),Et=ft.str(pt.key)||ft.num(pt.key)?pt.key:pt.ctrl.id,N=$.version<"19.0.0",tt=(ht==null?void 0:ht.props)??{};return N&&(tt.ref=ht.ref),ht&&ht.type?$.createElement(ht.type,{key:Et,...tt}):ht}));return T?[I,T]:I}var a6=1;function o6(n,{key:t,keys:i=t},r){if(i===null){const o=new Set;return n.map(u=>{const f=r&&r.find(m=>m.item===u&&m.phase!=="leave"&&!o.has(m));return f?(o.add(f),f.key):a6++})}return ft.und(i)?n:ft.fun(i)?n.map(i):gn(i)}var l6=class extends L1{constructor(n,t){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=Xl(...t);const i=this._get(),r=Um(i);V1(this,r.create(i))}advance(n){const t=this._get(),i=this.get();ls(t,i)||(Ci(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&i2(this._active)&&vm(this)}_get(){const n=ft.arr(this.source)?this.source.map(En):gn(En(this.source));return this.calc(...n)}_start(){this.idle&&!i2(this._active)&&(this.idle=!1,Dt(Lh(this),n=>{n.done=!1}),li.skipAnimation?(Nt.batchedUpdates(()=>this.advance()),vm(this)):Mh.start(this))}_attach(){let n=1;Dt(gn(this.source),t=>{Xn(t)&&mo(t,this),Gm(t)&&(t.idle||this._active.add(t),n=Math.max(n,t.priority+1))}),this.priority=n,this._start()}_detach(){Dt(gn(this.source),n=>{Xn(n)&&Jl(n,this)}),this._active.clear(),vm(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=gn(this.source).reduce((t,i)=>Math.max(t,(Gm(i)?i.priority:0)+1),0))}};function u6(n){return n.idle!==!1}function i2(n){return!n.size||Array.from(n).every(u6)}function vm(n){n.idle||(n.idle=!0,Dt(Lh(n),t=>{t.done=!0}),Zl(n,{type:"idle",parent:n}))}li.assign({createStringInterpolator:F_,to:(n,t)=>new l6(n,t)});var c6=V_(),mv=/^--/;function h6(n,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!mv.test(n)&&!(ql.hasOwnProperty(n)&&ql[n])?t+"px":(""+t).trim()}var s2={};function f6(n,t){if(!n.nodeType||!n.setAttribute)return!1;const i=n.nodeName==="filter"||n.parentNode&&n.parentNode.nodeName==="filter",{className:r,style:o,children:u,scrollTop:f,scrollLeft:m,viewBox:y,...g}=t,v=Object.values(g),b=Object.keys(g).map(T=>i||n.hasAttribute(T)?T:s2[T]||(s2[T]=T.replace(/([A-Z])/g,R=>"-"+R.toLowerCase())));u!==void 0&&(n.textContent=u);for(const T in o)if(o.hasOwnProperty(T)){const R=h6(T,o[T]);mv.test(T)?n.style.setProperty(T,R):n.style[T]=R}b.forEach((T,R)=>{n.setAttribute(T,v[R])}),r!==void 0&&(n.className=r),f!==void 0&&(n.scrollTop=f),m!==void 0&&(n.scrollLeft=m),y!==void 0&&n.setAttribute("viewBox",y)}var ql={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d6=(n,t)=>n+t.charAt(0).toUpperCase()+t.substring(1),m6=["Webkit","Ms","Moz","O"];ql=Object.keys(ql).reduce((n,t)=>(m6.forEach(i=>n[d6(i,t)]=n[t]),n),ql);var g6=/^(matrix|translate|scale|rotate|skew)/,p6=/^(translate)/,y6=/^(rotate|skew)/,Em=(n,t)=>ft.num(n)&&n!==0?n+t:n,th=(n,t)=>ft.arr(n)?n.every(i=>th(i,t)):ft.num(n)?n===t:parseFloat(n)===t,_6=class extends Ph{constructor({x:n,y:t,z:i,...r}){const o=[],u=[];(n||t||i)&&(o.push([n||0,t||0,i||0]),u.push(f=>[`translate3d(${f.map(m=>Em(m,"px")).join(",")})`,th(f,0)])),Mi(r,(f,m)=>{if(m==="transform")o.push([f||""]),u.push(y=>[y,y===""]);else if(g6.test(m)){if(delete r[m],ft.und(f))return;const y=p6.test(m)?"px":y6.test(m)?"deg":"";o.push(gn(f)),u.push(m==="rotate3d"?([g,v,b,T])=>[`rotate3d(${g},${v},${b},${Em(T,y)})`,th(T,0)]:g=>[`${m}(${g.map(v=>Em(v,y)).join(",")})`,th(g,m.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new v6(o,u)),super(r)}},v6=class extends q_{constructor(n,t){super(),this.inputs=n,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let n="",t=!0;return Dt(this.inputs,(i,r)=>{const o=En(i[0]),[u,f]=this.transforms[r](ft.arr(o)?o:i.map(En));n+=" "+u,t=t&&f}),t?"none":n}observerAdded(n){n==1&&Dt(this.inputs,t=>Dt(t,i=>Xn(i)&&mo(i,this)))}observerRemoved(n){n==0&&Dt(this.inputs,t=>Dt(t,i=>Xn(i)&&Jl(i,this)))}eventObserved(n){n.type=="change"&&(this._value=null),Zl(this,n)}},E6=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];li.assign({batchedUpdates:c6.unstable_batchedUpdates,createStringInterpolator:F_,colors:d5});var T6=G5(E6,{applyAnimatedValues:f6,createAnimatedStyle:n=>new _6(n),getComponentProps:({scrollTop:n,scrollLeft:t,...i})=>i}),Xs=T6.animated;function b6(n,t,i){return Math.max(t,Math.min(n,i))}const le={toVector(n,t){return n===void 0&&(n=t),Array.isArray(n)?n:[n,n]},add(n,t){return[n[0]+t[0],n[1]+t[1]]},sub(n,t){return[n[0]-t[0],n[1]-t[1]]},addTo(n,t){n[0]+=t[0],n[1]+=t[1]},subTo(n,t){n[0]-=t[0],n[1]-=t[1]}};function r2(n,t,i){return t===0||Math.abs(t)===1/0?Math.pow(n,i*5):n*t*i/(t+i*n)}function a2(n,t,i,r=.15){return r===0?b6(n,t,i):n<t?-r2(t-n,i-t,r)+t:n>i?+r2(n-i,i-t,r)+i:n}function S6(n,[t,i],[r,o]){const[[u,f],[m,y]]=n;return[a2(t,u,f,r),a2(i,m,y,o)]}function A6(n,t){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function w6(n){var t=A6(n,"string");return typeof t=="symbol"?t:String(t)}function Ie(n,t,i){return t=w6(t),t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function o2(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,r)}return i}function me(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(i),!0).forEach(function(r){Ie(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):o2(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}const gv={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function l2(n){return n?n[0].toUpperCase()+n.slice(1):""}const C6=["enter","leave"];function R6(n=!1,t){return n&&!C6.includes(t)}function x6(n,t="",i=!1){const r=gv[n],o=r&&r[t]||t;return"on"+l2(n)+l2(o)+(R6(i,o)?"Capture":"")}const I6=["gotpointercapture","lostpointercapture"];function D6(n){let t=n.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const r=I6.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:i}}function M6(n,t=""){const i=gv[n],r=i&&i[t]||t;return n+r}function Uh(n){return"touches"in n}function pv(n){return Uh(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function V6(n){return Array.from(n.touches).filter(t=>{var i,r;return t.target===n.currentTarget||((i=n.currentTarget)===null||i===void 0||(r=i.contains)===null||r===void 0?void 0:r.call(i,t.target))})}function N6(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function yv(n){return Uh(n)?N6(n)[0]:n}function Xm(n,t){try{const i=t.clientX-n.clientX,r=t.clientY-n.clientY,o=(t.clientX+n.clientX)/2,u=(t.clientY+n.clientY)/2,f=Math.hypot(i,r);return{angle:-(Math.atan2(i,r)*180)/Math.PI,distance:f,origin:[o,u]}}catch{}return null}function O6(n){return V6(n).map(t=>t.identifier)}function u2(n,t){const[i,r]=Array.from(n.touches).filter(o=>t.includes(o.identifier));return Xm(i,r)}function Tm(n){const t=yv(n);return Uh(n)?t.identifier:t.pointerId}function so(n){const t=yv(n);return[t.clientX,t.clientY]}const c2=40,h2=800;function _v(n){let{deltaX:t,deltaY:i,deltaMode:r}=n;return r===1?(t*=c2,i*=c2):r===2&&(t*=h2,i*=h2),[t,i]}function L6(n){var t,i;const{scrollX:r,scrollY:o,scrollLeft:u,scrollTop:f}=n.currentTarget;return[(t=r??u)!==null&&t!==void 0?t:0,(i=o??f)!==null&&i!==void 0?i:0]}function k6(n){const t={};if("buttons"in n&&(t.buttons=n.buttons),"shiftKey"in n){const{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u}=n;Object.assign(t,{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u})}return t}function fh(n,...t){return typeof n=="function"?n(...t):n}function P6(){}function j6(...n){return n.length===0?P6:n.length===1?n[0]:function(){let t;for(const i of n)t=i.apply(this,arguments)||t;return t}}function f2(n,t){return Object.assign({},t,n||{})}const U6=32;class vv{constructor(t,i,r){this.ctrl=t,this.args=i,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:i,ingKey:r,args:o}=this;i[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=o,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const i=this.state,r=this.config;i._active||(this.reset(),this.computeInitial(),i._active=!0,i.target=t.target,i.currentTarget=t.currentTarget,i.lastOffset=r.from?fh(r.from,i):i.offset,i.offset=i.lastOffset,i.startTime=i.timeStamp=t.timeStamp)}computeValues(t){const i=this.state;i._values=t,i.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:i,config:r,shared:o}=this;i.args=this.args;let u=0;if(t&&(i.event=t,r.preventDefault&&t.cancelable&&i.event.preventDefault(),i.type=t.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,k6(t)),o.down=o.pressed=o.buttons%2===1||o.touches>0,u=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime),i._active){const Q=i._delta.map(Math.abs);le.addTo(i._distance,Q)}this.axisIntent&&this.axisIntent(t);const[f,m]=i._movement,[y,g]=r.threshold,{_step:v,values:b}=i;if(r.hasCustomTransform?(v[0]===!1&&(v[0]=Math.abs(f)>=y&&b[0]),v[1]===!1&&(v[1]=Math.abs(m)>=g&&b[1])):(v[0]===!1&&(v[0]=Math.abs(f)>=y&&Math.sign(f)*y),v[1]===!1&&(v[1]=Math.abs(m)>=g&&Math.sign(m)*g)),i.intentional=v[0]!==!1||v[1]!==!1,!i.intentional)return;const T=[0,0];if(r.hasCustomTransform){const[Q,D]=b;T[0]=v[0]!==!1?Q-v[0]:0,T[1]=v[1]!==!1?D-v[1]:0}else T[0]=v[0]!==!1?f-v[0]:0,T[1]=v[1]!==!1?m-v[1]:0;this.restrictToAxis&&!i._blocked&&this.restrictToAxis(T);const R=i.offset,M=i._active&&!i._blocked||i.active;M&&(i.first=i._active&&!i.active,i.last=!i._active&&i.active,i.active=o[this.ingKey]=i._active,t&&(i.first&&("bounds"in r&&(i._bounds=fh(r.bounds,i)),this.setup&&this.setup()),i.movement=T,this.computeOffset()));const[U,k]=i.offset,[[B,Z],[X,st]]=i._bounds;i.overflow=[U<B?-1:U>Z?1:0,k<X?-1:k>st?1:0],i._movementBound[0]=i.overflow[0]?i._movementBound[0]===!1?i._movement[0]:i._movementBound[0]:!1,i._movementBound[1]=i.overflow[1]?i._movementBound[1]===!1?i._movement[1]:i._movementBound[1]:!1;const W=i._active?r.rubberband||[0,0]:[0,0];if(i.offset=S6(i._bounds,i.offset,W),i.delta=le.sub(i.offset,R),this.computeMovement(),M&&(!i.last||u>U6)){i.delta=le.sub(i.offset,R);const Q=i.delta.map(Math.abs);le.addTo(i.distance,Q),i.direction=i.delta.map(Math.sign),i._direction=i._delta.map(Math.sign),!i.first&&u>0&&(i.velocity=[Q[0]/u,Q[1]/u],i.timeDelta=u)}}emit(){const t=this.state,i=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const o=this.handler(me(me(me({},i),t),{},{[this.aliasKey]:t.values}));o!==void 0&&(t.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function z6([n,t],i){const r=Math.abs(n),o=Math.abs(t);if(r>o&&r>i)return"x";if(o>r&&o>i)return"y"}class du extends vv{constructor(...t){super(...t),Ie(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=le.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=le.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const i=this.state,r=this.config;if(!i.axis&&t){const o=typeof r.axisThreshold=="object"?r.axisThreshold[pv(t)]:r.axisThreshold;i.axis=z6(i._movement,o)}i._blocked=(r.lockDirection||!!r.axis)&&!i.axis||!!r.axis&&r.axis!==i.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const B6=n=>n,d2=.15,Ev={enabled(n=!0){return n},eventOptions(n,t,i){return me(me({},i.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[d2,d2];case!1:return[0,0];default:return le.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return le.toVector(n)},transform(n,t,i){const r=n||i.shared.transform;return this.hasCustomTransform=!!r,r||B6},threshold(n){return le.toVector(n,0)}},q6=0,Jr=me(me({},Ev),{},{axis(n,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(n=q6){return n},bounds(n={}){if(typeof n=="function")return u=>Jr.bounds(n(u));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:t=-1/0,right:i=1/0,top:r=-1/0,bottom:o=1/0}=n;return[[t,i],[r,o]]}}),m2={ArrowRight:(n,t=1)=>[n*t,0],ArrowLeft:(n,t=1)=>[-1*n*t,0],ArrowUp:(n,t=1)=>[0,-1*n*t],ArrowDown:(n,t=1)=>[0,n*t]};class H6 extends du{constructor(...t){super(...t),Ie(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const i=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),o={left:i.left-r.left+t.offset[0],right:i.right-r.right+t.offset[0],top:i.top-r.top+t.offset[1],bottom:i.bottom-r.bottom+t.offset[1]};t._bounds=Jr.bounds(o)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const i=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(i.pointerButtons)?!i.pointerButtons.includes(t.buttons):i.pointerButtons!==-1&&i.pointerButtons!==t.buttons))return;const o=this.ctrl.setEventIds(t);i.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(o&&o.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=Tm(t),r._pointerActive=!0,this.computeValues(so(t)),this.computeInitial(),i.preventScrollAxis&&pv(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):i.delay>0?(this.setupDelayTrigger(t),i.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const i=this.state;i._active=!0,i._preventScroll=!0,i._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const i=this.state,r=this.config;if(!i._pointerActive)return;const o=Tm(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;const u=so(t);if(document.pointerLockElement===t.target?i._delta=[t.movementX,t.movementY]:(i._delta=le.sub(u,i._values),this.computeValues(u)),le.addTo(i._movement,i._delta),this.compute(t),i._delayed&&i.intentional){this.timeoutStore.remove("dragDelay"),i.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!i._preventScroll)if(i.axis)if(i.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){i._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const i=this.state,r=this.config;if(!i._active||!i._pointerActive)return;const o=Tm(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[u,f]=i._distance;if(i.tap=u<=r.tapsThreshold&&f<=r.tapsThreshold,i.tap&&r.filterTaps)i._force=!0;else{const[m,y]=i._delta,[g,v]=i._movement,[b,T]=r.swipe.velocity,[R,M]=r.swipe.distance,U=r.swipe.duration;if(i.elapsedTime<U){const k=Math.abs(m/i.timeDelta),B=Math.abs(y/i.timeDelta);k>b&&Math.abs(g)>R&&(i.swipe[0]=Math.sign(m)),B>T&&Math.abs(v)>M&&(i.swipe[1]=Math.sign(y))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const i=this.config,r=i.device;i.pointerLock&&t.currentTarget.requestPointerLock(),i.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,G6(t);const i=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",i),this.eventStore.add(this.sharedConfig.window,"touch","cancel",i),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const i=m2[t.key];if(i){const r=this.state,o=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=i(this.config.keyboardDisplacement,o),r._keyboardActive=!0,le.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in m2&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const i=this.config.device;t(i,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(i,"change",this.pointerMove.bind(this)),t(i,"end",this.pointerUp.bind(this)),t(i,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function G6(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const mu=typeof window<"u"&&window.document&&window.document.createElement;function Tv(){return mu&&"ontouchstart"in window}function F6(){return Tv()||mu&&window.navigator.maxTouchPoints>1}function Q6(){return mu&&"onpointerdown"in window}function Y6(){return mu&&"exitPointerLock"in window.document}function K6(){try{return"constructor"in GestureEvent}catch{return!1}}const $n={isBrowser:mu,gesture:K6(),touch:Tv(),touchscreen:F6(),pointer:Q6(),pointerLock:Y6()},X6=250,$6=180,Z6=.5,J6=50,W6=250,tE=10,g2={mouse:0,touch:0,pen:8},eE=me(me({},Jr),{},{device(n,t,{pointer:{touch:i=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&$n.pointerLock,$n.touch&&i?"touch":this.pointerLock?"mouse":$n.pointer&&!o?"pointer":$n.touch?"touch":"mouse"},preventScrollAxis(n,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&n?X6:void 0,!(!$n.touchscreen||i===!1))return n||(i!==void 0?"y":void 0)},pointerCapture(n,t,{pointer:{capture:i=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&i},threshold(n,t,{filterTaps:i=!1,tapsThreshold:r=3,axis:o=void 0}){const u=le.toVector(n,i?r:o?1:0);return this.filterTaps=i,this.tapsThreshold=r,u},swipe({velocity:n=Z6,distance:t=J6,duration:i=W6}={}){return{velocity:this.transform(le.toVector(n)),distance:this.transform(le.toVector(t)),duration:i}},delay(n=0){switch(n){case!0:return $6;case!1:return 0;default:return n}},axisThreshold(n){return n?me(me({},g2),n):g2},keyboardDisplacement(n=tE){return n}});function bv(n){const[t,i]=n.overflow,[r,o]=n._delta,[u,f]=n._direction;(t<0&&r>0&&u<0||t>0&&r<0&&u>0)&&(n._movement[0]=n._movementBound[0]),(i<0&&o>0&&f<0||i>0&&o<0&&f>0)&&(n._movement[1]=n._movementBound[1])}const nE=30,iE=100;class sE extends vv{constructor(...t){super(...t),Ie(this,"ingKey","pinching"),Ie(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:i,lastOffset:r}=this.state;t==="wheel"?this.state.offset=le.add(i,r):this.state.offset=[(1+i[0])*r[0],i[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:i}=this.state;this.state.movement=[t[0]/i[0],t[1]-i[1]]}axisIntent(){const t=this.state,[i,r]=t._movement;if(!t.axis){const o=Math.abs(i)*nE-Math.abs(r);o<0?t.axis="angle":o>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const i=this.state,r=this.ctrl.touchIds;if(i._active&&i._touchIds.every(u=>r.has(u))||r.size<2)return;this.start(t),i._touchIds=Array.from(r).slice(0,2);const o=u2(t,i._touchIds);o&&this.pinchStart(t,o)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const i=this.state,r=i._pointerEvents,o=this.ctrl.pointerIds;if(i._active&&Array.from(r.keys()).every(f=>o.has(f))||(r.size<2&&r.set(t.pointerId,t),i._pointerEvents.size<2))return;this.start(t);const u=Xm(...Array.from(r.values()));u&&this.pinchStart(t,u)}pinchStart(t,i){const r=this.state;r.origin=i.origin,this.computeValues([i.distance,i.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const i=u2(t,this.state._touchIds);i&&this.pinchMove(t,i)}pointerMove(t){const i=this.state._pointerEvents;if(i.has(t.pointerId)&&i.set(t.pointerId,t),!this.state._active)return;const r=Xm(...Array.from(i.values()));r&&this.pinchMove(t,r)}pinchMove(t,i){const r=this.state,o=r._values[1],u=i.angle-o;let f=0;Math.abs(u)>270&&(f+=Math.sign(u)),this.computeValues([i.distance,i.angle-360*f]),r.origin=i.origin,r.turns=f,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(i=>!this.ctrl.touchIds.has(i))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const i=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}i._pointerEvents.has(t.pointerId)&&i._pointerEvents.delete(t.pointerId),i._active&&i._pointerEvents.size<2&&(i._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const i=this.state;i._active||(this.start(t),this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const i=this.state;this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY];const r=i._movement;i._movement=[t.scale-1,t.rotation],i._delta=le.sub(i._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const i=this.config.modifierKey;i&&(Array.isArray(i)?!i.find(r=>t[r]):!t[i])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-_v(t)[1]/iE*r.offset[0],0],le.addTo(r._movement,r._delta),bv(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const i=this.config.device;i&&(t(i,"start",this[i+"Start"].bind(this)),t(i,"change",this[i+"Move"].bind(this)),t(i,"end",this[i+"End"].bind(this)),t(i,"cancel",this[i+"End"].bind(this)),t("lostPointerCapture","",this[i+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const rE=me(me({},Ev),{},{device(n,t,{shared:i,pointer:{touch:r=!1}={}}){if(i.target&&!$n.touch&&$n.gesture)return"gesture";if($n.touch&&r)return"touch";if($n.touchscreen){if($n.pointer)return"pointer";if($n.touch)return"touch"}},bounds(n,t,{scaleBounds:i={},angleBounds:r={}}){const o=f=>{const m=f2(fh(i,f),{min:-1/0,max:1/0});return[m.min,m.max]},u=f=>{const m=f2(fh(r,f),{min:-1/0,max:1/0});return[m.min,m.max]};return typeof i!="function"&&typeof r!="function"?[o(),u()]:f=>[o(f),u(f)]},threshold(n,t,i){return this.lockDirection=i.axis==="lock",le.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class aE extends du{constructor(...t){super(...t),Ie(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(so(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const i=so(t),r=this.state;r._delta=le.sub(i,r._values),le.addTo(r._movement,r._delta),this.computeValues(i),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const oE=me(me({},Jr),{},{mouseOnly:(n=!0)=>n});class lE extends du{constructor(...t){super(...t),Ie(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const i=this.state,r=L6(t);i._delta=le.sub(r,i._values),le.addTo(i._movement,i._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const uE=Jr;class cE extends du{constructor(...t){super(...t),Ie(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const i=this.state;i._delta=_v(t),le.addTo(i._movement,i._delta),bv(i),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const hE=Jr;class fE extends du{constructor(...t){super(...t),Ie(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(so(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const i=this.state;if(!i._active)return;i._active=!1;const r=so(t);i._movement=i._delta=le.sub(r,i._values),this.computeValues(r),this.compute(t),i.delta=i.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const dE=me(me({},Jr),{},{mouseOnly:(n=!0)=>n}),k1=new Map,$m=new Map;function Sv(n){k1.set(n.key,n.engine),$m.set(n.key,n.resolver)}const Av={key:"drag",engine:H6,resolver:eE},mE={key:"hover",engine:fE,resolver:dE},gE={key:"move",engine:aE,resolver:oE},pE={key:"pinch",engine:sE,resolver:rE},yE={key:"scroll",engine:lE,resolver:uE},_E={key:"wheel",engine:cE,resolver:hE};function vE(n,t){if(n==null)return{};var i={},r=Object.keys(n),o,u;for(u=0;u<r.length;u++)o=r[u],!(t.indexOf(o)>=0)&&(i[o]=n[o]);return i}function EE(n,t){if(n==null)return{};var i=vE(n,t),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(o=0;o<u.length;o++)r=u[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}const TE={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=$n.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform(n){return n}},bE=["target","eventOptions","window","enabled","transform"];function eh(n={},t){const i={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":i[r]=o.call(i,n[r],r,n);break;case"object":i[r]=eh(n[r],o);break;case"boolean":o&&(i[r]=n[r]);break}return i}function SE(n,t,i={}){const r=n,{target:o,eventOptions:u,window:f,enabled:m,transform:y}=r,g=EE(r,bE);if(i.shared=eh({target:o,eventOptions:u,window:f,enabled:m,transform:y},TE),t){const v=$m.get(t);i[t]=eh(me({shared:i.shared},g),v)}else for(const v in g){const b=$m.get(v);b&&(i[v]=eh(me({shared:i.shared},g[v]),b))}return i}class wv{constructor(t,i){Ie(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=i}add(t,i,r,o,u){const f=this._listeners,m=M6(i,r),y=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=me(me({},y),u);t.addEventListener(m,o,g);const v=()=>{t.removeEventListener(m,o,g),f.delete(v)};return f.add(v),v}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class AE{constructor(){Ie(this,"_timeouts",new Map)}add(t,i,r=140,...o){this.remove(t),this._timeouts.set(t,window.setTimeout(i,r,...o))}remove(t){const i=this._timeouts.get(t);i&&window.clearTimeout(i)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class wE{constructor(t){Ie(this,"gestures",new Set),Ie(this,"_targetEventStore",new wv(this)),Ie(this,"gestureEventStores",{}),Ie(this,"gestureTimeoutStores",{}),Ie(this,"handlers",{}),Ie(this,"config",{}),Ie(this,"pointerIds",new Set),Ie(this,"touchIds",new Set),Ie(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),CE(this,t)}setEventIds(t){if(Uh(t))return this.touchIds=new Set(O6(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,i){this.handlers=t,this.nativeHandlers=i}applyConfig(t,i){this.config=SE(t,i,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const i=this.config.shared,r={};let o;if(!(i.target&&(o=i.target(),!o))){if(i.enabled){for(const f of this.gestures){const m=this.config[f],y=p2(r,m.eventOptions,!!o);if(m.enabled){const g=k1.get(f);new g(this,t,f).bind(y)}}const u=p2(r,i.eventOptions,!!o);for(const f in this.nativeHandlers)u(f,"",m=>this.nativeHandlers[f](me(me({},this.state.shared),{},{event:m,args:t})),void 0,!0)}for(const u in r)r[u]=j6(...r[u]);if(!o)return r;for(const u in r){const{device:f,capture:m,passive:y}=D6(u);this._targetEventStore.add(o,f,"",r[u],{capture:m,passive:y})}}}}function Ya(n,t){n.gestures.add(t),n.gestureEventStores[t]=new wv(n,t),n.gestureTimeoutStores[t]=new AE}function CE(n,t){t.drag&&Ya(n,"drag"),t.wheel&&Ya(n,"wheel"),t.scroll&&Ya(n,"scroll"),t.move&&Ya(n,"move"),t.pinch&&Ya(n,"pinch"),t.hover&&Ya(n,"hover")}const p2=(n,t,i)=>(r,o,u,f={},m=!1)=>{var y,g;const v=(y=f.capture)!==null&&y!==void 0?y:t.capture,b=(g=f.passive)!==null&&g!==void 0?g:t.passive;let T=m?r:x6(r,o,v);i&&b&&(T+="Passive"),n[T]=n[T]||[],n[T].push(u)},RE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function xE(n){const t={},i={},r=new Set;for(let o in n)RE.test(o)?(r.add(RegExp.lastMatch),i[o]=n[o]):t[o]=n[o];return[i,t,r]}function Ka(n,t,i,r,o,u){if(!n.has(i)||!k1.has(r))return;const f=i+"Start",m=i+"End",y=g=>{let v;return g.first&&f in t&&t[f](g),i in t&&(v=t[i](g)),g.last&&m in t&&t[m](g),v};o[r]=y,u[r]=u[r]||{}}function IE(n,t){const[i,r,o]=xE(n),u={};return Ka(o,i,"onDrag","drag",u,t),Ka(o,i,"onWheel","wheel",u,t),Ka(o,i,"onScroll","scroll",u,t),Ka(o,i,"onPinch","pinch",u,t),Ka(o,i,"onMove","move",u,t),Ka(o,i,"onHover","hover",u,t),{handlers:u,config:t,nativeHandlers:r}}function Cv(n,t={},i,r){const o=Qr.useMemo(()=>new wE(n),[]);if(o.applyHandlers(n,r),o.applyConfig(t,i),Qr.useEffect(o.effect.bind(o)),Qr.useEffect(()=>o.clean.bind(o),[]),t.target===void 0)return o.bind.bind(o)}function zh(n,t){return Sv(Av),Cv({drag:n},t||{},"drag")}function DE(n){return n.forEach(Sv),function(i,r){const{handlers:o,nativeHandlers:u,config:f}=IE(i,r||{});return Cv(o,f,void 0,u)}}function ME(n,t){return DE([Av,pE,yE,_E,gE,mE])(n,t||{})}const VE="_popup_972k0_1",NE={popup:VE},OE=n=>{const t=De.c(13),{message:i,onClose:r}=n,[o,u]=$.useState(!1),[f,m]=go(LE),{x:y,y:g,opacity:v}=f;let b;t[0]!==m||t[1]!==r?(b=k=>{const{down:B,movement:Z,direction:X}=k,[st]=Z,[W]=X;if(!B&&Math.abs(st)>100){u(!0),m.start({x:W>0?500:-500,opacity:0,onRest:r});return}m.start({x:B?st:0,opacity:1})},t[0]=m,t[1]=r,t[2]=b):b=t[2];const T=zh(b);if(o)return null;let R;t[3]!==T?(R=T(),t[3]=T,t[4]=R):R=t[4];let M;t[5]!==v||t[6]!==y||t[7]!==g?(M={x:y,y:g,opacity:v},t[5]=v,t[6]=y,t[7]=g,t[8]=M):M=t[8];let U;return t[9]!==i||t[10]!==R||t[11]!==M?(U=C.jsx(Xs.div,{...R,className:NE.popup,style:M,children:i}),t[9]=i,t[10]=R,t[11]=M,t[12]=U):U=t[12],U};function LE(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}const Rv=$.createContext(),gu=()=>$.useContext(Rv),kE=({children:n})=>{const[t,i]=$.useState([]),r=(f,m={})=>{const y=Date.now();i(g=>[...g,{id:y,message:f,...m}]),m.persistent||setTimeout(()=>o(y),m.duration||3e3)},o=f=>{i(m=>m.filter(y=>y.id!==f))},u=$.useMemo(()=>({showNotification:r,removeNotification:o}),[]);return C.jsxs(Rv,{value:u,children:[n,C.jsx("div",{style:{position:"fixed",top:20,right:0,left:0,display:"flex",flexDirection:"column",padding:20,gap:10,zIndex:10,pointerEvents:"none"},children:t.map(f=>C.jsx(OE,{...f,onClose:()=>o(f.id)},f.id))})]})};function Hl(n){const t=n.current.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function PE(n,t){let i=0;return function(...r){const o=Date.now();o-i>=t&&(i=o,n.apply(this,r))}}function jE(n,t){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>n(...r),t)}}async function UE(n,t=32*1024){const i=[];let r=0;const o=await n.arrayBuffer();for(;r<o.byteLength;){const u=o.slice(r,r+t);i.push(u),r+=t,i.length%50===0&&await new Promise(f=>setTimeout(f,0))}return i}async function zE(n,t){let i=0;t.send(JSON.stringify({type:"imageStart",sentId:n.sentId,receivedId:n.receivedId}));for(const r of n.chunks)i++,t.send(r),i%50===0&&await new Promise(o=>setTimeout(o,0));t.send(JSON.stringify({type:"imageEnd",imageType:n.fileType}))}const Zm=({type:n,content:t,replying:i,setReplying:r,selectedMessage:o,dataChannel:u,addMessage:f,sentId:m,inputRef:y,atBottomRef:g})=>{const v={type:n,content:t,sentId:m.current,receivedId:null},b={sentId:m.current,receivedId:null,type:n==="text"?n:"image",status:"sending",reaction:-1,content:t,deleted:0};if(i){const T={sentId:o.receivedId,receivedId:o.sentId};v.replyTo={...o,...T},b.replyTo=o,r(!1)}u.send(JSON.stringify(v)),f(b),m.current=m.current+1,y&&(y.current.value=""),g.current=!0};function BE(n){return n?new RegExp("^(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F|\\p{Emoji_Modifier_Base}(?:\\p{Emoji_Modifier})?|\\p{Extended_Pictographic})+$","u").test(n.trim()):void 0}const y2=n=>{let t;const i=new Set,r=(g,v)=>{const b=typeof g=="function"?g(t):g;if(!Object.is(b,t)){const T=t;t=v??(typeof b!="object"||b===null)?b:Object.assign({},t,b),i.forEach(R=>R(t,T))}},o=()=>t,m={setState:r,getState:o,getInitialState:()=>y,subscribe:g=>(i.add(g),()=>i.delete(g))},y=t=n(r,o,m);return m},qE=n=>n?y2(n):y2,HE=n=>n;function GE(n,t=HE){const i=Qr.useSyncExternalStore(n.subscribe,Qr.useCallback(()=>t(n.getState()),[n,t]),Qr.useCallback(()=>t(n.getInitialState()),[n,t]));return Qr.useDebugValue(i),i}const _2=n=>{const t=qE(n),i=r=>GE(t,r);return Object.assign(i,t),i},xv=n=>n?_2(n):_2,Lt=xv(n=>({messages:[],addMessage:t=>n(i=>({messages:[...i.messages,t]})),removeMessage:(t,i)=>n(r=>({messages:r.messages.filter(o=>o.sentId!==t&&o.receivedId!==i)})),updateMessage:(t,i,r)=>n(o=>({messages:o.messages.map(u=>u.sentId===t&&u.receivedId===i?{...u,...r}:u)})),highlightMessage:(t,i)=>n(r=>({messages:r.messages.map(o=>o.sentId===t&&o.receivedId===i?{...o,highlight:!o.highlight}:o)})),replying:null,setReplying:t=>n(()=>({replying:t})),actionsShown:!1,setActionsShown:t=>n(()=>({actionsShown:t})),reactionsShown:!1,setReactionsShown:t=>n(()=>({reactionsShown:t})),newMessage:!1,setNewMessage:t=>n(()=>({newMessage:t})),incomingCall:!1,setIncomingCall:t=>n(()=>({incomingCall:t})),typing:!1,setTyping:t=>n(()=>({typing:t})),imageDialog:null,setImageDialog:t=>n(()=>({imageDialog:t})),videoCall:"hidden",setVideoCall:t=>n(()=>({videoCall:t}))}));xv(n=>({}));const Jn=$.createContext(null),FE=({children:n})=>{console.log("Chat context rendered!");const{dataChannel:t,imageChannel:i}=$.useContext(An),{showNotification:r}=gu(),o=$.useRef(null),u=$.useRef([]),f=$.useRef(0),m=$.useRef(null),y=$.useRef({x:0,y:0}),g=$.useRef(!1),v=$.useRef(null),b=$.useRef(!1),T=$.useRef(null),R=Lt(W=>W.addMessage),M=Lt(W=>W.updateMessage),U=Lt(W=>W.removeMessage),k=Lt(W=>W.setNewMessage),B=Lt(W=>W.setVideoCall),Z=Lt(W=>W.setIncomingCall),X=Lt(W=>W.setTyping);$.useEffect(()=>(t.current.onmessage=W=>{let Q=JSON.parse(W.data);if(Q.type==="typing")clearTimeout(v.current),X(!0),v.current=setTimeout(()=>{X(!1)},1400);else if(Q.type==="text"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:Q.type,reaction:-1,content:Q.content,deleted:0,hightlight:!1,replyTo:Q.replyTo};Hl(m)?(console.log("I am in the bottom!"),b.current=!0):k(!0);let w={type:"ack",sentId:Q.sentId,receivedId:Q.receivedId};t.current.send(JSON.stringify(w)),R(D)}else if(Q.type==="ack")M(Q.sentId,null,{status:"sent"});else if(Q.type==="reaction"){let D={type:"ackReaction",sentId:Q.id,reaction:Q.reaction};t.current.send(JSON.stringify(D)),M(Q.id,null,{reaction:Q.reaction})}else if(Q.type==="ackReaction")console.log("I have received an ackReaction message: ",Q),M(null,Q.sentId,{reaction:Q.reaction});else if(Q.type==="gif"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:"image",reaction:-1,content:Q.content,deleted:0,hightlight:!1,replyTo:Q.replyTo};Hl(m)?b.current=!0:k(!0);let w={type:"gifAck",sentId:Q.sentId,receivedId:Q.receivedId};t.current.send(JSON.stringify(w)),R(D)}else if(Q.type==="gifAck")M(Q.sentId,Q.receivedId,{status:"sent"});else if(Q.type==="imageRequest"){let D={receivedId:Q.sentId,sentId:Q.receivedId,type:Q.type,reaction:-1,deleted:0,hightlight:!1,replyTo:Q.replyTo};Hl(m)?b.current=!0:k(!0),R(D)}else if(Q.type==="imageAccept"){const D=u.current.find(w=>w.sentId===Q.sentId&&w.receivedId===Q.receivedId);console.log(D),(async()=>await zE(D,i.current))()}else if(Q.type==="imageReject")console.log("The image I sent was rejected!"),U(Q.sentId,Q.receivedId);else if(Q.type==="imageReceived")M(Q.sentId,Q.receivedId,{status:"sent"});else if(Q.type==="delete"){let D={type:"ackDeletion",sentId:Q.sentId};t.current.send(JSON.stringify(D)),M(null,Q.sentId,{type:"text",content:"This message has been deleted",deleted:2})}else Q.type==="ackDeletion"?M(Q.sentId,null,{type:"text",content:"This message has been deleted",deleted:2}):Q.type==="callRequest"?(console.log("The other peer is trying to call me!"),Z(!0)):Q.type==="callCancel"?Z(!1):Q.type==="callReject"?(r("Your call was rejected!"),B("hidden")):Q.type==="callAccept"?B("connected"):Q.type==="callEnd"&&B("hidden")},i.current.onmessage=W=>{if(typeof W.data=="string"){const Q=JSON.parse(W.data);if(Q.type==="imageStart")T.current={sentId:Q.receivedId,receivedId:Q.sentId,chunks:[]};else if(Q.type==="imageEnd"){const D=new Blob(T.current.chunks,{type:Q.imageType}),w=URL.createObjectURL(D);t.current.send(JSON.stringify({type:"imageReceived",sentId:T.current.receivedId,receivedId:T.current.sentId})),M(T.current.sentId,T.current.receivedId,{type:"image",content:w,status:"received"}),T.current=null}}else T.current.chunks.push(W.data)},()=>{t.current.onmessage=null,i.current.onmessage=null}),[]);const st=$.useMemo(()=>({chatBottom:m,sentId:f,selectedMessage:o,pointerPosition:y,longPressed:g,atBottomRef:b,images:u,receivingImage:T}),[]);return C.jsx(Jn,{value:st,children:n})},QE="_navContainer_2izlb_1",YE="_logo_2izlb_10",KE="_navList_2izlb_15",XE="_hamburger_2izlb_30",wi={navContainer:QE,logo:YE,navList:KE,hamburger:XE};function $E(){const n=De.c(5);let t;n[0]===Symbol.for("react.memo_cache_sentinel")?(t=C.jsx("a",{href:"/",className:wi.logo,"aria-label":"Homepage",children:"boop"}),n[0]=t):t=n[0];let i;n[1]===Symbol.for("react.memo_cache_sentinel")?(i=C.jsx("a",{className:wi.hamburger,"aria-label":"Expand for menu",children:C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[C.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),C.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),C.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),n[1]=i):i=n[1];let r;n[2]===Symbol.for("react.memo_cache_sentinel")?(r=C.jsx("li",{className:wi.navItem,children:C.jsx("a",{href:"#about",className:wi.navLink,children:"About"})}),n[2]=r):r=n[2];let o;n[3]===Symbol.for("react.memo_cache_sentinel")?(o=C.jsx("li",{className:wi.navItem,children:C.jsx("a",{href:"#projects",className:wi.navLink,children:"Policy"})}),n[3]=o):o=n[3];let u;return n[4]===Symbol.for("react.memo_cache_sentinel")?(u=C.jsxs("nav",{"aria-label":"Main Navigation",className:wi.navContainer,children:[t,i,C.jsxs("ul",{className:wi.navList,children:[r,o,C.jsx("li",{className:wi.navItem,children:C.jsx("a",{href:"#contact",className:wi.navLink,children:"Contact"})})]})]}),n[4]=u):u=n[4],u}const ZE="_mainContainer_15mr1_1",JE="_inputCard_15mr1_13",WE="_linkInput_15mr1_41",tT="_loaderWrapper_15mr1_71",eT="_loader_15mr1_71",Vl={mainContainer:ZE,inputCard:JE,linkInput:WE,loaderWrapper:tT,loader:eT},nT=()=>{};var v2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=function(n){const t=[];let i=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},iT=function(n){const t=[];let i=0,r=0;for(;i<n.length;){const o=n[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[i++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[i++],f=n[i++],m=n[i++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=n[i++],f=n[i++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},Dv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const u=n[o],f=o+1<n.length,m=f?n[o+1]:0,y=o+2<n.length,g=y?n[o+2]:0,v=u>>2,b=(u&3)<<4|m>>4;let T=(m&15)<<2|g>>6,R=g&63;y||(R=64,f||(T=64)),r.push(i[v],i[b],i[T],i[R])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Iv(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):iT(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const u=i[n.charAt(o++)],m=o<n.length?i[n.charAt(o)]:0;++o;const g=o<n.length?i[n.charAt(o)]:64;++o;const b=o<n.length?i[n.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new sT;const T=u<<2|m>>4;if(r.push(T),g!==64){const R=m<<4&240|g>>2;if(r.push(R),b!==64){const M=g<<6&192|b;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rT=function(n){const t=Iv(n);return Dv.encodeByteArray(t,!0)},dh=function(n){return rT(n).replace(/\./g,"")},aT=function(n){try{return Dv.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=()=>oT().__FIREBASE_DEFAULTS__,uT=()=>{if(typeof process>"u"||typeof v2>"u")return;const n=v2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&aT(n[1]);return t&&JSON.parse(t)},P1=()=>{try{return nT()||lT()||uT()||cT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hT=n=>{var t,i;return(i=(t=P1())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[n]},fT=n=>{const t=hT(n);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Mv=()=>{var n;return(n=P1())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(n){return n.endsWith(".cloudworkstations.dev")}async function mT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},n);return[dh(JSON.stringify(i)),dh(JSON.stringify(f)),""].join(".")}const Gl={};function pT(){const n={prod:[],emulator:[]};for(const t of Object.keys(Gl))Gl[t]?n.emulator.push(t):n.prod.push(t);return n}function yT(n){let t=document.getElementById(n),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),i=!0),{created:i,element:t}}let E2=!1;function _T(n,t){if(typeof window>"u"||typeof document>"u"||!j1(window.location.host)||Gl[n]===t||Gl[n]||E2)return;Gl[n]=t;function i(T){return`__firebase__banner__${T}`}const r="__firebase__banner",u=pT().prod.length>0;function f(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{E2=!0,f()},T}function v(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=yT(r),R=i("text"),M=document.getElementById(R)||document.createElement("span"),U=i("learnmore"),k=document.getElementById(U)||document.createElement("a"),B=i("preprendIcon"),Z=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const X=T.element;m(X),v(k,U);const st=g();y(Z,B),X.append(Z,M,k,st),document.body.appendChild(X)}u?(M.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ET(){var n;const t=(n=P1())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TT(){return!ET()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bT(){try{return typeof indexedDB=="object"}catch{return!1}}function ST(){return new Promise((n,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="FirebaseError";class po extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=AT,Object.setPrototypeOf(this,po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vv.prototype.create)}}class Vv{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?wT(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new po(o,m,r)}}function wT(n,t){return n.replace(CT,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const CT=/\{\$([^}]+)}/g;function mh(n,t){if(n===t)return!0;const i=Object.keys(n),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const u=n[o],f=t[o];if(T2(u)&&T2(f)){if(!mh(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function T2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(n){return n&&n._delegate?n._delegate:n}class iu{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new dT;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IT(t))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Fr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fr){return this.instances.has(t)}getOptions(t=Fr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(t,i){var r;const o=this.normalizeInstanceIdentifier(i),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&t(f,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xT(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Fr){return this.component?this.component.multipleInstances?t:Fr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xT(n){return n===Fr?void 0:n}function IT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new RT(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Qt||(Qt={}));const MT={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},VT=Qt.INFO,NT={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},OT=(n,t,...i)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),o=NT[t];if(o)console[o](`[${r}]  ${n.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Nv{constructor(t){this.name=t,this._logLevel=VT,this._logHandler=OT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?MT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...t),this._logHandler(this,Qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...t),this._logHandler(this,Qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...t),this._logHandler(this,Qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...t),this._logHandler(this,Qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...t),this._logHandler(this,Qt.ERROR,...t)}}const LT=(n,t)=>t.some(i=>n instanceof i);let b2,S2;function kT(){return b2||(b2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PT(){return S2||(S2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ov=new WeakMap,Jm=new WeakMap,Lv=new WeakMap,bm=new WeakMap,U1=new WeakMap;function jT(n){const t=new Promise((i,r)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",f)},u=()=>{i($s(n.result)),o()},f=()=>{r(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",f)});return t.then(i=>{i instanceof IDBCursor&&Ov.set(i,n)}).catch(()=>{}),U1.set(t,n),t}function UT(n){if(Jm.has(n))return;const t=new Promise((i,r)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",f),n.removeEventListener("abort",f)},u=()=>{i(),o()},f=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",f),n.addEventListener("abort",f)});Jm.set(n,t)}let Wm={get(n,t,i){if(n instanceof IDBTransaction){if(t==="done")return Jm.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Lv.get(n);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return $s(n[t])},set(n,t,i){return n[t]=i,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function zT(n){Wm=n(Wm)}function BT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=n.call(Sm(this),t,...i);return Lv.set(r,t.sort?t.sort():[t]),$s(r)}:PT().includes(n)?function(...t){return n.apply(Sm(this),t),$s(Ov.get(this))}:function(...t){return $s(n.apply(Sm(this),t))}}function qT(n){return typeof n=="function"?BT(n):(n instanceof IDBTransaction&&UT(n),LT(n,kT())?new Proxy(n,Wm):n)}function $s(n){if(n instanceof IDBRequest)return jT(n);if(bm.has(n))return bm.get(n);const t=qT(n);return t!==n&&(bm.set(n,t),U1.set(t,n)),t}const Sm=n=>U1.get(n);function HT(n,t,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(n,t),m=$s(f);return r&&f.addEventListener("upgradeneeded",y=>{r($s(f.result),y.oldVersion,y.newVersion,$s(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const GT=["get","getKey","getAll","getAllKeys","count"],FT=["put","add","delete","clear"],Am=new Map;function A2(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Am.get(t))return Am.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=FT.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||GT.includes(i)))return;const u=async function(f,...m){const y=this.transaction(f,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[i](...m),o&&y.done]))[0]};return Am.set(t,u),u}zT(n=>({...n,get:(t,i,r)=>A2(t,i)||n.get(t,i,r),has:(t,i)=>!!A2(t,i)||n.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(YT(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function YT(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const t1="@firebase/app",w2="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Nv("@firebase/app"),KT="@firebase/app-compat",XT="@firebase/analytics-compat",$T="@firebase/analytics",ZT="@firebase/app-check-compat",JT="@firebase/app-check",WT="@firebase/auth",t7="@firebase/auth-compat",e7="@firebase/database",n7="@firebase/data-connect",i7="@firebase/database-compat",s7="@firebase/functions",r7="@firebase/functions-compat",a7="@firebase/installations",o7="@firebase/installations-compat",l7="@firebase/messaging",u7="@firebase/messaging-compat",c7="@firebase/performance",h7="@firebase/performance-compat",f7="@firebase/remote-config",d7="@firebase/remote-config-compat",m7="@firebase/storage",g7="@firebase/storage-compat",p7="@firebase/firestore",y7="@firebase/ai",_7="@firebase/firestore-compat",v7="firebase",E7="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="[DEFAULT]",T7={[t1]:"fire-core",[KT]:"fire-core-compat",[$T]:"fire-analytics",[XT]:"fire-analytics-compat",[JT]:"fire-app-check",[ZT]:"fire-app-check-compat",[WT]:"fire-auth",[t7]:"fire-auth-compat",[e7]:"fire-rtdb",[n7]:"fire-data-connect",[i7]:"fire-rtdb-compat",[s7]:"fire-fn",[r7]:"fire-fn-compat",[a7]:"fire-iid",[o7]:"fire-iid-compat",[l7]:"fire-fcm",[u7]:"fire-fcm-compat",[c7]:"fire-perf",[h7]:"fire-perf-compat",[f7]:"fire-rc",[d7]:"fire-rc-compat",[m7]:"fire-gcs",[g7]:"fire-gcs-compat",[p7]:"fire-fst",[_7]:"fire-fst-compat",[y7]:"fire-vertex","fire-js":"fire-js",[v7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map,b7=new Map,n1=new Map;function C2(n,t){try{n.container.addComponent(t)}catch(i){hs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,i)}}function ph(n){const t=n.name;if(n1.has(t))return hs.debug(`There were multiple attempts to register component ${t}.`),!1;n1.set(t,n);for(const i of gh.values())C2(i,n);for(const i of b7.values())C2(i,n);return!0}function S7(n,t){const i=n.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),n.container.getProvider(t)}function A7(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new Vv("app","Firebase",w7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=E7;function kv(n,t={}){let i=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:e1,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw Zs.create("bad-app-name",{appName:String(o)});if(i||(i=Mv()),!i)throw Zs.create("no-options");const u=gh.get(o);if(u){if(mh(i,u.options)&&mh(r,u.config))return u;throw Zs.create("duplicate-app",{appName:o})}const f=new DT(o);for(const y of n1.values())f.addComponent(y);const m=new C7(i,r,f);return gh.set(o,m),m}function x7(n=e1){const t=gh.get(n);if(!t&&n===e1&&Mv())return kv();if(!t)throw Zs.create("no-app",{appName:n});return t}function eo(n,t,i){var r;let o=(r=T7[n])!==null&&r!==void 0?r:n;i&&(o+=`-${i}`);const u=o.match(/\s|\//),f=t.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),hs.warn(m.join(" "));return}ph(new iu(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="firebase-heartbeat-database",D7=1,su="firebase-heartbeat-store";let wm=null;function Pv(){return wm||(wm=HT(I7,D7,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(su)}catch(i){console.warn(i)}}}}).catch(n=>{throw Zs.create("idb-open",{originalErrorMessage:n.message})})),wm}async function M7(n){try{const i=(await Pv()).transaction(su),r=await i.objectStore(su).get(jv(n));return await i.done,r}catch(t){if(t instanceof po)hs.warn(t.message);else{const i=Zs.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});hs.warn(i.message)}}}async function R2(n,t){try{const r=(await Pv()).transaction(su,"readwrite");await r.objectStore(su).put(t,jv(n)),await r.done}catch(i){if(i instanceof po)hs.warn(i.message);else{const r=Zs.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});hs.warn(r.message)}}}function jv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=1024,N7=30;class O7{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new k7(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=x2();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>N7){const f=P7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hs.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=x2(),{heartbeatsToSend:r,unsentEntries:o}=L7(this._heartbeatsCache.heartbeats),u=dh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return hs.warn(i),""}}}function x2(){return new Date().toISOString().substring(0,10)}function L7(n,t=V7){const i=[];let r=n.slice();for(const o of n){const u=i.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),I2(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),I2(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class k7{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bT()?ST().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await M7(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return R2(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return R2(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function I2(n){return dh(JSON.stringify({version:2,heartbeats:n})).length}function P7(n){if(n.length===0)return-1;let t=0,i=n[0].date;for(let r=1;r<n.length;r++)n[r].date<i&&(i=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(n){ph(new iu("platform-logger",t=>new QT(t),"PRIVATE")),ph(new iu("heartbeat",t=>new O7(t),"PRIVATE")),eo(t1,w2,n),eo(t1,w2,"esm2017"),eo("fire-js","")}j7("");var U7="firebase",z7="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */eo(U7,z7,"app");var D2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Js,Uv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,w){function x(){}x.prototype=w.prototype,D.D=w.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(L,O,j){for(var I=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)I[dt-2]=arguments[dt];return w.prototype[O].apply(L,I)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,w,x){x||(x=0);var L=Array(16);if(typeof w=="string")for(var O=0;16>O;++O)L[O]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(O=0;16>O;++O)L[O]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=D.g[0],x=D.g[1],O=D.g[2];var j=D.g[3],I=w+(j^x&(O^j))+L[0]+3614090360&4294967295;w=x+(I<<7&4294967295|I>>>25),I=j+(O^w&(x^O))+L[1]+3905402710&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(x^j&(w^x))+L[2]+606105819&4294967295,O=j+(I<<17&4294967295|I>>>15),I=x+(w^O&(j^w))+L[3]+3250441966&4294967295,x=O+(I<<22&4294967295|I>>>10),I=w+(j^x&(O^j))+L[4]+4118548399&4294967295,w=x+(I<<7&4294967295|I>>>25),I=j+(O^w&(x^O))+L[5]+1200080426&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(x^j&(w^x))+L[6]+2821735955&4294967295,O=j+(I<<17&4294967295|I>>>15),I=x+(w^O&(j^w))+L[7]+4249261313&4294967295,x=O+(I<<22&4294967295|I>>>10),I=w+(j^x&(O^j))+L[8]+1770035416&4294967295,w=x+(I<<7&4294967295|I>>>25),I=j+(O^w&(x^O))+L[9]+2336552879&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(x^j&(w^x))+L[10]+4294925233&4294967295,O=j+(I<<17&4294967295|I>>>15),I=x+(w^O&(j^w))+L[11]+2304563134&4294967295,x=O+(I<<22&4294967295|I>>>10),I=w+(j^x&(O^j))+L[12]+1804603682&4294967295,w=x+(I<<7&4294967295|I>>>25),I=j+(O^w&(x^O))+L[13]+4254626195&4294967295,j=w+(I<<12&4294967295|I>>>20),I=O+(x^j&(w^x))+L[14]+2792965006&4294967295,O=j+(I<<17&4294967295|I>>>15),I=x+(w^O&(j^w))+L[15]+1236535329&4294967295,x=O+(I<<22&4294967295|I>>>10),I=w+(O^j&(x^O))+L[1]+4129170786&4294967295,w=x+(I<<5&4294967295|I>>>27),I=j+(x^O&(w^x))+L[6]+3225465664&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^x&(j^w))+L[11]+643717713&4294967295,O=j+(I<<14&4294967295|I>>>18),I=x+(j^w&(O^j))+L[0]+3921069994&4294967295,x=O+(I<<20&4294967295|I>>>12),I=w+(O^j&(x^O))+L[5]+3593408605&4294967295,w=x+(I<<5&4294967295|I>>>27),I=j+(x^O&(w^x))+L[10]+38016083&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^x&(j^w))+L[15]+3634488961&4294967295,O=j+(I<<14&4294967295|I>>>18),I=x+(j^w&(O^j))+L[4]+3889429448&4294967295,x=O+(I<<20&4294967295|I>>>12),I=w+(O^j&(x^O))+L[9]+568446438&4294967295,w=x+(I<<5&4294967295|I>>>27),I=j+(x^O&(w^x))+L[14]+3275163606&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^x&(j^w))+L[3]+4107603335&4294967295,O=j+(I<<14&4294967295|I>>>18),I=x+(j^w&(O^j))+L[8]+1163531501&4294967295,x=O+(I<<20&4294967295|I>>>12),I=w+(O^j&(x^O))+L[13]+2850285829&4294967295,w=x+(I<<5&4294967295|I>>>27),I=j+(x^O&(w^x))+L[2]+4243563512&4294967295,j=w+(I<<9&4294967295|I>>>23),I=O+(w^x&(j^w))+L[7]+1735328473&4294967295,O=j+(I<<14&4294967295|I>>>18),I=x+(j^w&(O^j))+L[12]+2368359562&4294967295,x=O+(I<<20&4294967295|I>>>12),I=w+(x^O^j)+L[5]+4294588738&4294967295,w=x+(I<<4&4294967295|I>>>28),I=j+(w^x^O)+L[8]+2272392833&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^x)+L[11]+1839030562&4294967295,O=j+(I<<16&4294967295|I>>>16),I=x+(O^j^w)+L[14]+4259657740&4294967295,x=O+(I<<23&4294967295|I>>>9),I=w+(x^O^j)+L[1]+2763975236&4294967295,w=x+(I<<4&4294967295|I>>>28),I=j+(w^x^O)+L[4]+1272893353&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^x)+L[7]+4139469664&4294967295,O=j+(I<<16&4294967295|I>>>16),I=x+(O^j^w)+L[10]+3200236656&4294967295,x=O+(I<<23&4294967295|I>>>9),I=w+(x^O^j)+L[13]+681279174&4294967295,w=x+(I<<4&4294967295|I>>>28),I=j+(w^x^O)+L[0]+3936430074&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^x)+L[3]+3572445317&4294967295,O=j+(I<<16&4294967295|I>>>16),I=x+(O^j^w)+L[6]+76029189&4294967295,x=O+(I<<23&4294967295|I>>>9),I=w+(x^O^j)+L[9]+3654602809&4294967295,w=x+(I<<4&4294967295|I>>>28),I=j+(w^x^O)+L[12]+3873151461&4294967295,j=w+(I<<11&4294967295|I>>>21),I=O+(j^w^x)+L[15]+530742520&4294967295,O=j+(I<<16&4294967295|I>>>16),I=x+(O^j^w)+L[2]+3299628645&4294967295,x=O+(I<<23&4294967295|I>>>9),I=w+(O^(x|~j))+L[0]+4096336452&4294967295,w=x+(I<<6&4294967295|I>>>26),I=j+(x^(w|~O))+L[7]+1126891415&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~x))+L[14]+2878612391&4294967295,O=j+(I<<15&4294967295|I>>>17),I=x+(j^(O|~w))+L[5]+4237533241&4294967295,x=O+(I<<21&4294967295|I>>>11),I=w+(O^(x|~j))+L[12]+1700485571&4294967295,w=x+(I<<6&4294967295|I>>>26),I=j+(x^(w|~O))+L[3]+2399980690&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~x))+L[10]+4293915773&4294967295,O=j+(I<<15&4294967295|I>>>17),I=x+(j^(O|~w))+L[1]+2240044497&4294967295,x=O+(I<<21&4294967295|I>>>11),I=w+(O^(x|~j))+L[8]+1873313359&4294967295,w=x+(I<<6&4294967295|I>>>26),I=j+(x^(w|~O))+L[15]+4264355552&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~x))+L[6]+2734768916&4294967295,O=j+(I<<15&4294967295|I>>>17),I=x+(j^(O|~w))+L[13]+1309151649&4294967295,x=O+(I<<21&4294967295|I>>>11),I=w+(O^(x|~j))+L[4]+4149444226&4294967295,w=x+(I<<6&4294967295|I>>>26),I=j+(x^(w|~O))+L[11]+3174756917&4294967295,j=w+(I<<10&4294967295|I>>>22),I=O+(w^(j|~x))+L[2]+718787259&4294967295,O=j+(I<<15&4294967295|I>>>17),I=x+(j^(O|~w))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+j&4294967295}r.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var x=w-this.blockSize,L=this.B,O=this.h,j=0;j<w;){if(O==0)for(;j<=x;)o(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<w;)if(L[O++]=D.charCodeAt(j++),O==this.blockSize){o(this,L),O=0;break}}else for(;j<w;)if(L[O++]=D[j++],O==this.blockSize){o(this,L),O=0;break}}this.h=O,this.o+=w},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var x=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=x&255,x/=256;for(this.u(D),D=Array(16),w=x=0;4>w;++w)for(var L=0;32>L;L+=8)D[x++]=this.g[w]>>>L&255;return D};function u(D,w){var x=m;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=w(D)}function f(D,w){this.h=w;for(var x=[],L=!0,O=D.length-1;0<=O;O--){var j=D[O]|0;L&&j==w||(x[O]=j,L=!1)}this.g=x}var m={};function y(D){return-128<=D&&128>D?u(D,function(w){return new f([w|0],0>w?-1:0)}):new f([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return k(g(-D));for(var w=[],x=1,L=0;D>=x;L++)w[L]=D/x|0,x*=4294967296;return new f(w,0)}function v(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return k(v(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(w,8)),L=b,O=0;O<D.length;O+=8){var j=Math.min(8,D.length-O),I=parseInt(D.substring(O,O+j),w);8>j?(j=g(Math.pow(w,j)),L=L.j(j).add(g(I))):(L=L.j(x),L=L.add(g(I)))}return L}var b=y(0),T=y(1),R=y(16777216);n=f.prototype,n.m=function(){if(U(this))return-k(this).m();for(var D=0,w=1,x=0;x<this.g.length;x++){var L=this.i(x);D+=(0<=L?L:4294967296+L)*w,w*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(U(this))return"-"+k(this).toString(D);for(var w=g(Math.pow(D,6)),x=this,L="";;){var O=st(x,w).g;x=B(x,O.j(w));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=O,M(x))return j+L;for(;6>j.length;)j="0"+j;L=j+L}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function U(D){return D.h==-1}n.l=function(D){return D=B(this,D),U(D)?-1:M(D)?0:1};function k(D){for(var w=D.g.length,x=[],L=0;L<w;L++)x[L]=~D.g[L];return new f(x,~D.h).add(T)}n.abs=function(){return U(this)?k(this):this},n.add=function(D){for(var w=Math.max(this.g.length,D.g.length),x=[],L=0,O=0;O<=w;O++){var j=L+(this.i(O)&65535)+(D.i(O)&65535),I=(j>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);L=I>>>16,j&=65535,I&=65535,x[O]=I<<16|j}return new f(x,x[x.length-1]&-2147483648?-1:0)};function B(D,w){return D.add(k(w))}n.j=function(D){if(M(this)||M(D))return b;if(U(this))return U(D)?k(this).j(k(D)):k(k(this).j(D));if(U(D))return k(this.j(k(D)));if(0>this.l(R)&&0>D.l(R))return g(this.m()*D.m());for(var w=this.g.length+D.g.length,x=[],L=0;L<2*w;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(var O=0;O<D.g.length;O++){var j=this.i(L)>>>16,I=this.i(L)&65535,dt=D.i(O)>>>16,pt=D.i(O)&65535;x[2*L+2*O]+=I*pt,Z(x,2*L+2*O),x[2*L+2*O+1]+=j*pt,Z(x,2*L+2*O+1),x[2*L+2*O+1]+=I*dt,Z(x,2*L+2*O+1),x[2*L+2*O+2]+=j*dt,Z(x,2*L+2*O+2)}for(L=0;L<w;L++)x[L]=x[2*L+1]<<16|x[2*L];for(L=w;L<2*w;L++)x[L]=0;return new f(x,0)};function Z(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function X(D,w){this.g=D,this.h=w}function st(D,w){if(M(w))throw Error("division by zero");if(M(D))return new X(b,b);if(U(D))return w=st(k(D),w),new X(k(w.g),k(w.h));if(U(w))return w=st(D,k(w)),new X(k(w.g),w.h);if(30<D.g.length){if(U(D)||U(w))throw Error("slowDivide_ only works with positive integers.");for(var x=T,L=w;0>=L.l(D);)x=W(x),L=W(L);var O=Q(x,1),j=Q(L,1);for(L=Q(L,2),x=Q(x,2);!M(L);){var I=j.add(L);0>=I.l(D)&&(O=O.add(x),j=I),L=Q(L,1),x=Q(x,1)}return w=B(D,O.j(w)),new X(O,w)}for(O=b;0<=D.l(w);){for(x=Math.max(1,Math.floor(D.m()/w.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),j=g(x),I=j.j(w);U(I)||0<I.l(D);)x-=L,j=g(x),I=j.j(w);M(j)&&(j=T),O=O.add(j),D=B(D,I)}return new X(O,D)}n.A=function(D){return st(this,D).h},n.and=function(D){for(var w=Math.max(this.g.length,D.g.length),x=[],L=0;L<w;L++)x[L]=this.i(L)&D.i(L);return new f(x,this.h&D.h)},n.or=function(D){for(var w=Math.max(this.g.length,D.g.length),x=[],L=0;L<w;L++)x[L]=this.i(L)|D.i(L);return new f(x,this.h|D.h)},n.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),x=[],L=0;L<w;L++)x[L]=this.i(L)^D.i(L);return new f(x,this.h^D.h)};function W(D){for(var w=D.g.length+1,x=[],L=0;L<w;L++)x[L]=D.i(L)<<1|D.i(L-1)>>>31;return new f(x,D.h)}function Q(D,w){var x=w>>5;w%=32;for(var L=D.g.length-x,O=[],j=0;j<L;j++)O[j]=0<w?D.i(j+x)>>>w|D.i(j+x+1)<<32-w:D.i(j+x);return new f(O,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Uv=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=v,Js=f}).apply(typeof D2<"u"?D2:typeof self<"u"?self:typeof window<"u"?window:{});var Gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zv,Ll,Bv,nh,i1,qv,Hv,Gv;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gc=="object"&&Gc];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=i(this);function o(c,p){if(p)t:{var _=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var q=c[A];if(!(q in _))break t;_=_[q]}c=c[c.length-1],A=_[c],p=p(A),p!=A&&p!=null&&t(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,A=!1,q={next:function(){if(!A&&_<c.length){var J=_++;return{value:p(J,c[J]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function v(c,p,_){return c.call.apply(c.bind,arguments)}function b(c,p,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),c.apply(p,q)}}return function(){return c.apply(p,arguments)}}function T(c,p,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,T.apply(null,arguments)}function R(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,q,J){for(var gt=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)gt[qt-2]=arguments[qt];return p.prototype[q].apply(A,gt)}}function U(c){const p=c.length;if(0<p){const _=Array(p);for(let A=0;A<p;A++)_[A]=c[A];return _}return[]}function k(c,p){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(y(A)){const q=c.length||0,J=A.length||0;c.length=q+J;for(let gt=0;gt<J;gt++)c[q+gt]=A[gt]}else c.push(A)}}class B{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Z(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function st(c){return st[" "](c),c}st[" "]=function(){};var W=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function Q(c,p,_){for(const A in c)p.call(_,c[A],A,c)}function D(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function w(c){const p={};for(const _ in c)p[_]=c[_];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(c,p){let _,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(_ in A)c[_]=A[_];for(let J=0;J<x.length;J++)_=x[J],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function O(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function j(c){m.setTimeout(()=>{throw c},0)}function I(){var c=Et;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class dt{constructor(){this.h=this.g=null}add(p,_){const A=pt.get();A.set(p,_),this.h?this.h.next=A:this.g=A,this.h=A}}var pt=new B(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let at,ht=!1,Et=new dt,N=()=>{const c=m.Promise.resolve(void 0);at=()=>{c.then(tt)}};var tt=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(_){j(_)}var p=pt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ht=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function lt(c,p){if(rt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(W){t:{try{st(p.nodeName);var q=!0;break t}catch{}q=!1}q||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:mt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&lt.aa.h.call(this)}}M(lt,rt);var mt={2:"touch",3:"pen",4:"mouse"};lt.prototype.h=function(){lt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),xt=0;function Yt(c,p,_,A,q){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!A,this.ha=q,this.key=++xt,this.da=this.fa=!1}function pe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Me(c){this.src=c,this.g={},this.h=0}Me.prototype.add=function(c,p,_,A,q){var J=c.toString();c=this.g[J],c||(c=this.g[J]=[],this.h++);var gt=ze(c,p,A,q);return-1<gt?(p=c[gt],_||(p.fa=!1)):(p=new Yt(p,this.src,J,!!A,q),p.fa=_,c.push(p)),p};function sn(c,p){var _=p.type;if(_ in c.g){var A=c.g[_],q=Array.prototype.indexOf.call(A,p,void 0),J;(J=0<=q)&&Array.prototype.splice.call(A,q,1),J&&(pe(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function ze(c,p,_,A){for(var q=0;q<c.length;++q){var J=c[q];if(!J.da&&J.listener==p&&J.capture==!!_&&J.ha==A)return q}return-1}var Ye="closure_lm_"+(1e6*Math.random()|0),wn={};function Ke(c,p,_,A,q){if(Array.isArray(p)){for(var J=0;J<p.length;J++)Ke(c,p[J],_,A,q);return null}return _=Eu(_),c&&c[Tt]?c.K(p,_,g(A)?!!A.capture:!1,q):fe(c,p,_,!1,A,q)}function fe(c,p,_,A,q,J){if(!p)throw Error("Invalid event type");var gt=g(q)?!!q.capture:!!q,qt=ea(c);if(qt||(c[Ye]=qt=new Me(c)),_=qt.add(p,_,A,gt,J),_.proxy)return _;if(A=Oi(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)yt||(q=gt),q===void 0&&(q=!1),c.addEventListener(p.toString(),A,q);else if(c.attachEvent)c.attachEvent(ur(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Oi(){function c(_){return p.call(c.src,c.listener,_)}const p=lf;return c}function Li(c,p,_,A,q){if(Array.isArray(p))for(var J=0;J<p.length;J++)Li(c,p[J],_,A,q);else A=g(A)?!!A.capture:!!A,_=Eu(_),c&&c[Tt]?(c=c.i,p=String(p).toString(),p in c.g&&(J=c.g[p],_=ze(J,_,A,q),-1<_&&(pe(J[_]),Array.prototype.splice.call(J,_,1),J.length==0&&(delete c.g[p],c.h--)))):c&&(c=ea(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ze(p,_,A,q)),(_=-1<c?p[c]:null)&&Wn(_))}function Wn(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Tt])sn(p.i,c);else{var _=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(_,A,c.capture):p.detachEvent?p.detachEvent(ur(_),A):p.addListener&&p.removeListener&&p.removeListener(A),(_=ea(p))?(sn(_,c),_.h==0&&(_.src=null,p[Ye]=null)):pe(c)}}}function ur(c){return c in wn?wn[c]:wn[c]="on"+c}function lf(c,p){if(c.da)c=!0;else{p=new lt(p,this);var _=c.listener,A=c.ha||c.src;c.fa&&Wn(c),c=_.call(A,p)}return c}function ea(c){return c=c[Ye],c instanceof Me?c:null}var To="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(c){return typeof c=="function"?c:(c[To]||(c[To]=function(p){return c.handleEvent(p)}),c[To])}function ye(){nt.call(this),this.i=new Me(this),this.M=this,this.F=null}M(ye,nt),ye.prototype[Tt]=!0,ye.prototype.removeEventListener=function(c,p,_,A){Li(this,c,p,_,A)};function Jt(c,p){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new rt(p,c);else if(p instanceof rt)p.target=p.target||c;else{var q=p;p=new rt(A,c),L(p,q)}if(q=!0,_)for(var J=_.length-1;0<=J;J--){var gt=p.g=_[J];q=Cn(gt,A,!0,p)&&q}if(gt=p.g=c,q=Cn(gt,A,!0,p)&&q,q=Cn(gt,A,!1,p)&&q,_)for(J=0;J<_.length;J++)gt=p.g=_[J],q=Cn(gt,A,!1,p)&&q}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],A=0;A<_.length;A++)pe(_[A]);delete c.g[p],c.h--}}this.F=null},ye.prototype.K=function(c,p,_,A){return this.i.add(String(c),p,!1,_,A)},ye.prototype.L=function(c,p,_,A){return this.i.add(String(c),p,!0,_,A)};function Cn(c,p,_,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var q=!0,J=0;J<p.length;++J){var gt=p[J];if(gt&&!gt.da&&gt.capture==_){var qt=gt.listener,Ne=gt.ha||gt.src;gt.fa&&sn(c.i,gt),q=qt.call(Ne,A)!==!1&&q}}return q&&!A.defaultPrevented}function rn(c,p,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Tu(c){c.g=rn(()=>{c.g=null,c.i&&(c.i=!1,Tu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class uf extends nt{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(c){nt.call(this),this.h=c,this.g={}}M(cr,nt);var hr=[];function fr(c){Q(c.g,function(p,_){this.g.hasOwnProperty(_)&&Wn(p)},c),c.g={}}cr.prototype.N=function(){cr.aa.N.call(this),fr(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ti=m.JSON.stringify,na=m.JSON.parse,dr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function bo(){}bo.prototype.h=null;function So(c){return c.h||(c.h=c.i())}function Ao(){}var ki={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pi(){rt.call(this,"d")}M(Pi,rt);function wo(){rt.call(this,"c")}M(wo,rt);var ui={},Co=null;function ms(){return Co=Co||new ye}ui.La="serverreachability";function ia(c){rt.call(this,ui.La,c)}M(ia,rt);function gs(c){const p=ms();Jt(p,new ia(p))}ui.STAT_EVENT="statevent";function bu(c,p){rt.call(this,ui.STAT_EVENT,c),this.stat=p}M(bu,rt);function ue(c){const p=ms();Jt(p,new bu(p,c))}ui.Ma="timingevent";function Ve(c,p){rt.call(this,ui.Ma,c),this.size=p}M(Ve,rt);function Ae(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Pn(){this.g=!0}Pn.prototype.xa=function(){this.g=!1};function Ro(c,p,_,A,q,J){c.info(function(){if(c.g)if(J)for(var gt="",qt=J.split("&"),Ne=0;Ne<qt.length;Ne++){var Ht=qt[Ne].split("=");if(1<Ht.length){var qe=Ht[0];Ht=Ht[1];var Oe=qe.split("_");gt=2<=Oe.length&&Oe[1]=="type"?gt+(qe+"="+Ht+"&"):gt+(qe+"=redacted&")}}else gt=null;else gt=J;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+p+`
`+_+`
`+gt})}function cf(c,p,_,A,q,J,gt){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+p+`
`+_+`
`+J+" "+gt})}function ps(c,p,_,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+mr(c,_)+(A?" "+A:"")})}function Su(c,p){c.info(function(){return"TIMEOUT: "+p})}Pn.prototype.info=function(){};function mr(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var J=q[0];if(J!="noop"&&J!="stop"&&J!="close")for(var gt=1;gt<q.length;gt++)q[gt]=""}}}}return ti(_)}catch{return p}}var ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ci;function hi(){}M(hi,bo),hi.prototype.g=function(){return new XMLHttpRequest},hi.prototype.i=function(){return{}},ci=new hi;function hn(c,p,_,A){this.j=c,this.i=p,this.l=_,this.R=A||1,this.U=new cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ee}function Ee(){this.i=null,this.g="",this.h=!1}var xo={},sa={};function ei(c,p,_){c.L=1,c.v=vr(Rn(p)),c.m=_,c.P=!0,Ui(c,null)}function Ui(c,p){c.F=Date.now(),gr(c),c.A=Rn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Oo(_.i,"t",A),c.C=0,_=c.j.J,c.h=new Ee,c.g=Uu(c.j,_?p:null,!c.m),0<c.O&&(c.M=new uf(T(c.Y,c,c.g),c.O)),p=c.U,_=c.g,A=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(hr[0]=q.toString()),q=hr);for(var J=0;J<q.length;J++){var gt=Ke(_,q[J],A||p.handleEvent,!1,p.h||p);if(!gt)break;p.g[gt.key]=gt}p=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),gs(),Ro(c.i,c.u,c.A,c.l,c.R,c.m)}hn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Bn(c)==3?p.j():this.Y(c)},hn.prototype.Y=function(c){try{if(c==this.g)t:{const Oe=Bn(this.g);var p=this.g.Ba();const Yi=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||Mu(this.g)))){this.J||Oe!=4||p==7||(p==8||0>=Yi?gs(3):gs(2)),_s(this);var _=this.g.Z();this.X=_;e:if(Au(this)){var A=Mu(this.g);c="";var q=A.length,J=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xe(this),fi(this);var gt="";break e}this.h.i=new m.TextDecoder}for(p=0;p<q;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(J&&p==q-1)});A.length=0,this.h.g+=c,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=_==200,cf(this.i,this.u,this.A,this.l,this.R,Oe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var qt,Ne=this.g;if((qt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(qt)){var Ht=qt;break e}}Ht=null}if(_=Ht)ps(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pr(this,_);else{this.o=!1,this.s=3,ue(12),Xe(this),fi(this);break t}}if(this.P){_=!0;let $e;for(;!this.J&&this.C<gt.length;)if($e=wu(this,gt),$e==sa){Oe==4&&(this.s=4,ue(14),_=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if($e==xo){this.s=4,ue(15),ps(this.i,this.l,gt,"[Invalid Chunk]"),_=!1;break}else ps(this.i,this.l,$e,null),pr(this,$e);if(Au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||gt.length!=0||this.h.h||(this.s=1,ue(16),_=!1),this.o=this.o&&_,!_)ps(this.i,this.l,gt,"[Invalid Chunked Response]"),Xe(this),fi(this);else if(0<gt.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),Rr(qe),qe.M=!0,ue(11))}}else ps(this.i,this.l,gt,null),pr(this,gt);Oe==4&&Xe(this),this.o&&!this.J&&(Oe==4?ku(this.j,this):(this.o=!1,gr(this)))}else gf(this.g),_==400&&0<gt.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),Xe(this),fi(this)}}}catch{}finally{}};function Au(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wu(c,p){var _=c.C,A=p.indexOf(`
`,_);return A==-1?sa:(_=Number(p.substring(_,A)),isNaN(_)?xo:(A+=1,A+_>p.length?sa:(p=p.slice(A,A+_),c.C=A+_,p)))}hn.prototype.cancel=function(){this.J=!0,Xe(this)};function gr(c){c.S=Date.now()+c.I,Cu(c,c.I)}function Cu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ae(T(c.ba,c),p)}function _s(c){c.B&&(m.clearTimeout(c.B),c.B=null)}hn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Su(this.i,this.A),this.L!=2&&(gs(),ue(17)),Xe(this),this.s=2,fi(this)):Cu(this,this.S-c)};function fi(c){c.j.G==0||c.J||ku(c.j,c)}function Xe(c){_s(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,fr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function pr(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||Io(_.h,c))){if(!c.K&&Io(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)pa(_),ma(_);else break t;Uo(_),ue(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ae(T(_.Za,_),6e3));if(1>=aa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Qi(_,11)}else if((c.K||_.g==c)&&pa(_),!Z(p))for(q=_.Da.g.parse(p),p=0;p<q.length;p++){let Ht=q[p];if(_.T=Ht[0],Ht=Ht[1],_.G==2)if(Ht[0]=="c"){_.K=Ht[1],_.ia=Ht[2];const qe=Ht[3];qe!=null&&(_.la=qe,_.j.info("VER="+_.la));const Oe=Ht[4];Oe!=null&&(_.Aa=Oe,_.j.info("SVER="+_.Aa));const Yi=Ht[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(A=1.5*Yi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const $e=c.g;if($e){const vi=$e.g?$e.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vi){var J=A.h;J.g||vi.indexOf("spdy")==-1&&vi.indexOf("quic")==-1&&vi.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(oa(J,J.h),J.h=null))}if(A.D){const Bo=$e.g?$e.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(A.ya=Bo,ee(A.I,A.D,Bo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var gt=c;if(A.qa=ju(A,A.J?A.ia:null,A.W),gt.K){fn(A.h,gt);var qt=gt,Ne=A.L;Ne&&(qt.I=Ne),qt.B&&(_s(qt),gr(qt)),A.g=gt}else Ou(A);0<_.i.length&&ga(_)}else Ht[0]!="stop"&&Ht[0]!="close"||Qi(_,7);else _.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Qi(_,7):Po(_):Ht[0]!="noop"&&_.l&&_.l.ta(Ht),_.v=0)}}gs(4)}catch{}}var Ru=class{constructor(c,p){this.g=c,this.map=p}};function zi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ra(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function aa(c){return c.h?1:c.g?c.g.size:0}function Io(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function oa(c,p){c.g?c.g.add(p):c.h=p}function fn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}zi.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Do(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return U(c.i)}function hf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],_=c.length,A=0;A<_;A++)p.push(c[A]);return p}p=[],_=0;for(A in c)p[_++]=c[A];return p}function la(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const A in c)p[_++]=A;return p}}}function Mo(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=la(c),A=hf(c),q=A.length,J=0;J<q;J++)p.call(void 0,A[J],_&&_[J],c)}var yr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ff(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),q=null;if(0<=A){var J=c[_].substring(0,A);q=c[_].substring(A+1)}else J=c[_];p(J,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function we(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof we){this.h=c.h,_r(this,c.j),this.o=c.o,this.g=c.g,vs(this,c.s),this.l=c.l;var p=c.i,_=new qi;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Bi(this,_),this.m=c.m}else c&&(p=String(c).match(yr))?(this.h=!1,_r(this,p[1]||"",!0),this.o=jn(p[2]||""),this.g=jn(p[3]||"",!0),vs(this,p[4]),this.l=jn(p[5]||"",!0),Bi(this,p[6]||"",!0),this.m=jn(p[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}we.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Er(p,Vo,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Er(p,Vo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Er(_,_.charAt(0)=="/"?df:No,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Er(_,ua)),c.join("")};function Rn(c){return new we(c)}function _r(c,p,_){c.j=_?jn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function vs(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Bi(c,p,_){p instanceof qi?(c.i=p,Iu(c.i,c.h)):(_||(p=Er(p,mf)),c.i=new qi(p,c.h))}function ee(c,p,_){c.i.set(p,_)}function vr(c){return ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function jn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Er(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,xu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Vo=/[#\/\?@]/g,No=/[#\?:]/g,df=/[#\?]/g,mf=/[#\?@]/g,ua=/#/g;function qi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Un(c){c.g||(c.g=new Map,c.h=0,c.i&&ff(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=qi.prototype,n.add=function(c,p){Un(this),this.i=null,c=di(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function Hi(c,p){Un(c),p=di(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Gi(c,p){return Un(c),p=di(c,p),c.g.has(p)}n.forEach=function(c,p){Un(this),this.g.forEach(function(_,A){_.forEach(function(q){c.call(p,q,A,this)},this)},this)},n.na=function(){Un(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let A=0;A<p.length;A++){const q=c[A];for(let J=0;J<q.length;J++)_.push(p[A])}return _},n.V=function(c){Un(this);let p=[];if(typeof c=="string")Gi(this,c)&&(p=p.concat(this.g.get(di(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},n.set=function(c,p){return Un(this),this.i=null,c=di(this,c),Gi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Oo(c,p,_){Hi(c,p),0<_.length&&(c.i=null,c.g.set(di(c,p),U(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var A=p[_];const J=encodeURIComponent(String(A)),gt=this.V(A);for(A=0;A<gt.length;A++){var q=J;gt[A]!==""&&(q+="="+encodeURIComponent(String(gt[A]))),c.push(q)}}return this.i=c.join("&")};function di(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Iu(c,p){p&&!c.j&&(Un(c),c.i=null,c.g.forEach(function(_,A){var q=A.toLowerCase();A!=q&&(Hi(this,A),Oo(this,q,_))},c)),c.j=p}function Tr(c,p){const _=new Pn;if(m.Image){const A=new Image;A.onload=R(zn,_,"TestLoadImage: loaded",!0,p,A),A.onerror=R(zn,_,"TestLoadImage: error",!1,p,A),A.onabort=R(zn,_,"TestLoadImage: abort",!1,p,A),A.ontimeout=R(zn,_,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function ni(c,p){const _=new Pn,A=new AbortController,q=setTimeout(()=>{A.abort(),zn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(J=>{clearTimeout(q),J.ok?zn(_,"TestPingServer: ok",!0,p):zn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(q),zn(_,"TestPingServer: error",!1,p)})}function zn(c,p,_,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(_)}catch{}}function br(){this.g=new dr}function mi(c,p,_){const A=_||"";try{Mo(c,function(q,J){let gt=q;g(q)&&(gt=ti(q)),p.push(A+J+"="+encodeURIComponent(gt))})}catch(q){throw p.push(A+"type="+encodeURIComponent("_badmap")),q}}function Es(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Es,bo),Es.prototype.g=function(){return new Fi(this.l,this.j)},Es.prototype.i=function(c){return function(){return c}}({});function Fi(c,p){ye.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Fi,ye),n=Fi.prototype,n.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,pi(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?gi(this):pi(this),this.readyState==3&&Lo(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,gi(this))},n.Qa=function(c){this.g&&(this.response=c,gi(this))},n.ga=function(){this.g&&gi(this)};function gi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,pi(c)}n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function pi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ko(c){let p="";return Q(c,function(_,A){p+=A,p+=":",p+=_,p+=`\r
`}),p}function Be(c,p,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=ko(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):ee(c,p,_))}function $t(c){ye.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M($t,ye);var ca=/^https?$/i,Sr=["POST","PUT"];n=$t.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,p,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ci.g(),this.v=this.o?So(this.o):So(ci),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(J){Du(this,J);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)_.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())_.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Sr,p,void 0))||A||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,gt]of _)this.g.setRequestHeader(J,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ar(this),this.u=!0,this.g.send(c),this.u=!1}catch(J){Du(this,J)}};function Du(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,ha(c),yi(c)}function ha(c){c.A||(c.A=!0,Jt(c,"complete"),Jt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Jt(this,"complete"),Jt(this,"abort"),yi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yi(this,!0)),$t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fa(this):this.bb())},n.bb=function(){fa(this)};function fa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Bn(c)!=4||c.Z()!=2)){if(c.u&&Bn(c)==4)rn(c.Ea,0,c);else if(Jt(c,"readystatechange"),Bn(c)==4){c.h=!1;try{const gt=c.Z();t:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var A;if(A=gt===0){var q=String(c.D).match(yr)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),A=!ca.test(q?q.toLowerCase():"")}_=A}if(_)Jt(c,"complete"),Jt(c,"success");else{c.m=6;try{var J=2<Bn(c)?c.g.statusText:""}catch{J=""}c.l=J+" ["+c.Z()+"]",ha(c)}}finally{yi(c)}}}}function yi(c,p){if(c.g){Ar(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Jt(c,"ready");try{_.onreadystatechange=A}catch{}}}function Ar(c){c.I&&(m.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Bn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),na(p)}};function Mu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gf(c){const p={};c=(c.g&&2<=Bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(Z(c[A]))continue;var _=O(c[A]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=p[q]||[];p[q]=J,J.push(_)}D(p,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function da(c){this.Aa=0,this.i=[],this.j=new Pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,c),this.cb=wr("retryDelaySeedMs",1e4,c),this.Wa=wr("forwardChannelMaxRetries",2,c),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new zi(c&&c.concurrentRequestLimit),this.Da=new br,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=da.prototype,n.la=8,n.G=1,n.connect=function(c,p,_,A){ue(0),this.W=c,this.H=p||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=ju(this,null,this.W),ga(this)};function Po(c){if(Vu(c),c.G==3){var p=c.U++,_=Rn(c.I);if(ee(_,"SID",c.K),ee(_,"RID",p),ee(_,"TYPE","terminate"),Cr(c,_),p=new hn(c,c.j,p),p.L=2,p.v=vr(Rn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=Uu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),gr(p)}Pu(c)}function ma(c){c.g&&(Rr(c),c.g.cancel(),c.g=null)}function Vu(c){ma(c),c.u&&(m.clearTimeout(c.u),c.u=null),pa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ga(c){if(!ra(c.h)&&!c.s){c.s=!0;var p=c.Ga;at||N(),ht||(at(),ht=!0),Et.add(p,c),c.B=0}}function pf(c,p){return aa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ae(T(c.Ga,c,p),zo(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new hn(this,this.j,c);let J=this.o;if(this.S&&(J?(J=w(J),L(J,this.S)):J=this.S),this.m!==null||this.O||(q.H=J,J=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=Nu(this,q,p),_=Rn(this.I),ee(_,"RID",c),ee(_,"CVER",22),this.D&&ee(_,"X-HTTP-Session-Id",this.D),Cr(this,_),J&&(this.O?p="headers="+encodeURIComponent(String(ko(J)))+"&"+p:this.m&&Be(_,this.m,J)),oa(this.h,q),this.Ua&&ee(_,"TYPE","init"),this.P?(ee(_,"$req",p),ee(_,"SID","null"),q.T=!0,ei(q,_,null)):ei(q,_,p),this.G=2}}else this.G==3&&(c?jo(this,c):this.i.length==0||ra(this.h)||jo(this))};function jo(c,p){var _;p?_=p.l:_=c.U++;const A=Rn(c.I);ee(A,"SID",c.K),ee(A,"RID",_),ee(A,"AID",c.T),Cr(c,A),c.m&&c.o&&Be(A,c.m,c.o),_=new hn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Nu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),oa(c.h,_),ei(_,A,p)}function Cr(c,p){c.H&&Q(c.H,function(_,A){ee(p,A,_)}),c.l&&Mo({},function(_,A){ee(p,A,_)})}function Nu(c,p,_){_=Math.min(c.i.length,_);var A=c.l?T(c.l.Na,c.l,c):null;t:{var q=c.i;let J=-1;for(;;){const gt=["count="+_];J==-1?0<_?(J=q[0].g,gt.push("ofs="+J)):J=0:gt.push("ofs="+J);let qt=!0;for(let Ne=0;Ne<_;Ne++){let Ht=q[Ne].g;const qe=q[Ne].map;if(Ht-=J,0>Ht)J=Math.max(0,q[Ne].g-100),qt=!1;else try{mi(qe,gt,"req"+Ht+"_")}catch{A&&A(qe)}}if(qt){A=gt.join("&");break t}}}return c=c.i.splice(0,_),p.D=c,A}function Ou(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;at||N(),ht||(at(),ht=!0),Et.add(p,c),c.v=0}}function Uo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ae(T(c.Fa,c),zo(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ae(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),ma(this),Lu(this))};function Rr(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Lu(c){c.g=new hn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Rn(c.qa);ee(p,"RID","rpc"),ee(p,"SID",c.K),ee(p,"AID",c.T),ee(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&ee(p,"TO",c.ja),ee(p,"TYPE","xmlhttp"),Cr(c,p),c.m&&c.o&&Be(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=vr(Rn(p)),_.m=null,_.P=!0,Ui(_,c)}n.Za=function(){this.C!=null&&(this.C=null,ma(this),Uo(this),ue(19))};function pa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function ku(c,p){var _=null;if(c.g==p){pa(c),Rr(c),c.g=null;var A=2}else if(Io(c.h,p))_=p.D,fn(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var q=c.B;A=ms(),Jt(A,new Ve(A,_)),ga(c)}else Ou(c);else if(q=p.s,q==3||q==0&&0<p.X||!(A==1&&pf(c,p)||A==2&&Uo(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),q){case 1:Qi(c,5);break;case 4:Qi(c,10);break;case 3:Qi(c,6);break;default:Qi(c,2)}}}function zo(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Qi(c,p){if(c.j.info("Error code "+p),p==2){var _=T(c.fb,c),A=c.Xa;const q=!A;A=new we(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||_r(A,"https"),vr(A),q?Tr(A.toString(),_):ni(A.toString(),_)}else ue(2);c.G=0,c.l&&c.l.sa(p),Pu(c),Vu(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function Pu(c){if(c.G=0,c.ka=[],c.l){const p=Do(c.h);(p.length!=0||c.i.length!=0)&&(k(c.ka,p),k(c.ka,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.ra()}}function ju(c,p,_){var A=_ instanceof we?Rn(_):new we(_);if(A.g!="")p&&(A.g=p+"."+A.g),vs(A,A.s);else{var q=m.location;A=q.protocol,p=p?p+"."+q.hostname:q.hostname,q=+q.port;var J=new we(null);A&&_r(J,A),p&&(J.g=p),q&&vs(J,q),_&&(J.l=_),A=J}return _=c.D,p=c.ya,_&&p&&ee(A,_,p),ee(A,"VER",c.la),Cr(c,A),A}function Uu(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new $t(new Es({eb:_})):new $t(c.pa),p.Ha(c.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}n=zu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ya(){}ya.prototype.g=function(c,p){return new dn(c,p)};function dn(c,p){ye.call(this),this.g=new da(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!Z(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!Z(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new _i(this)}M(dn,ye),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Po(this.g)},dn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ti(c),c=_);p.i.push(new Ru(p.Ya++,c)),p.G==3&&ga(p)},dn.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,dn.aa.N.call(this)};function Bu(c){Pi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const _ in p){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}M(Bu,Pi);function qu(){wo.call(this),this.status=1}M(qu,wo);function _i(c){this.g=c}M(_i,zu),_i.prototype.ua=function(){Jt(this.g,"a")},_i.prototype.ta=function(c){Jt(this.g,new Bu(c))},_i.prototype.sa=function(c){Jt(this.g,new qu)},_i.prototype.ra=function(){Jt(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,Gv=function(){return new ya},Hv=function(){return ms()},qv=ui,i1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,nh=ys,ji.COMPLETE="complete",Bv=ji,Ao.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Ll=Ao,$t.prototype.listenOnce=$t.prototype.L,$t.prototype.getLastError=$t.prototype.Ka,$t.prototype.getLastErrorCode=$t.prototype.Ba,$t.prototype.getStatus=$t.prototype.Z,$t.prototype.getResponseJson=$t.prototype.Oa,$t.prototype.getResponseText=$t.prototype.oa,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Ha,zv=$t}).apply(typeof Gc<"u"?Gc:typeof self<"u"?self:typeof window<"u"?window:{});const M2="@firebase/firestore",V2="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Nv("@firebase/firestore");function Xa(){return $r.logLevel}function _t(n,...t){if($r.logLevel<=Qt.DEBUG){const i=t.map(z1);$r.debug(`Firestore (${yo}): ${n}`,...i)}}function fs(n,...t){if($r.logLevel<=Qt.ERROR){const i=t.map(z1);$r.error(`Firestore (${yo}): ${n}`,...i)}}function ro(n,...t){if($r.logLevel<=Qt.WARN){const i=t.map(z1);$r.warn(`Firestore (${yo}): ${n}`,...i)}}function z1(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,Fv(n,r,i)}function Fv(n,t,i){let r=`FIRESTORE (${yo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw fs(r),new Error(r)}function Zt(n,t,i,r){let o="Unexpected state";typeof i=="string"?o=i:r=i,n||Fv(t,o,r)}function Vt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends po{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class B7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(un.UNAUTHENTICATED))}shutdown(){}}class q7{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class H7{constructor(t){this.t=t,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Zt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ws,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;t.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ws)}},0),f()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt(typeof r.accessToken=="string",31837,{l:r}),new Qv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new un(t)}}class G7{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F7{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new G7(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N2{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q7{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,A7(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Zt(this.o===void 0,3512);const r=u=>{u.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,_t("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new N2(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Zt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new N2(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<n;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Y7(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<i&&(r+=t.charAt(o[u]%62))}return r}}function Pt(n,t){return n<t?-1:n>t?1:0}function s1(n,t){let i=0;for(;i<n.length&&i<t.length;){const r=n.codePointAt(i),o=t.codePointAt(i);if(r!==o){if(r<128&&o<128)return Pt(r,o);{const u=Yv(),f=K7(u.encode(O2(n,i)),u.encode(O2(t,i)));return f!==0?f:Pt(r,o)}}i+=r>65535?2:1}return Pt(n.length,t.length)}function O2(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function K7(n,t){for(let i=0;i<n.length&&i<t.length;++i)if(n[i]!==t[i])return Pt(n[i],t[i]);return Pt(n.length,t.length)}function ao(n,t,i){return n.length===t.length&&n.every((r,o)=>i(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=-62135596800,k2=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(t){return je.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*k2);return new je(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new St(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new St(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<L2)throw new St(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new St(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/k2}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-L2;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new je(0,0))}static max(){return new Mt(new je(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="__name__";class Ri{constructor(t,i,r){i===void 0?i=0:i>t.length&&Rt(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&Rt(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Ri.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Ri?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let o=0;o<r;o++){const u=Ri.compareSegments(t.get(o),i.get(o));if(u!==0)return u}return Pt(t.length,i.length)}static compareSegments(t,i){const r=Ri.isNumericId(t),o=Ri.isNumericId(i);return r&&!o?-1:!r&&o?1:r&&o?Ri.extractNumericId(t).compare(Ri.extractNumericId(i)):s1(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Js.fromString(t.substring(4,t.length-2))}}class he extends Ri{construct(t,i,r){return new he(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new St(ct.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(o=>o.length>0))}return new he(i)}static emptyPath(){return new he([])}}const X7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ri{construct(t,i,r){return new en(t,i,r)}static isValidIdentifier(t){return X7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P2}static keyField(){return new en([P2])}static fromServerFormat(t){const i=[];let r="",o=0;const u=()=>{if(r.length===0)throw new St(ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new St(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new St(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new St(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new en(i)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(t){this.path=t}static fromPath(t){return new At(he.fromString(t))}static fromName(t){return new At(he.fromString(t).popFirst(5))}static empty(){return new At(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&he.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return he.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new At(new he(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=-1;function $7(n,t){const i=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Mt.fromTimestamp(r===1e9?new je(i+1,0):new je(i,r));return new er(o,At.empty(),t)}function Z7(n){return new er(n.readTime,n.key,ru)}class er{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new er(Mt.min(),At.empty(),ru)}static max(){return new er(Mt.max(),At.empty(),ru)}}function J7(n,t){let i=n.readTime.compareTo(t.readTime);return i!==0?i:(i=At.comparator(n.documentKey,t.documentKey),i!==0?i:Pt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(n){if(n.code!==ct.FAILED_PRECONDITION||n.message!==W7)throw n;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new ut((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,o)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof ut?i:ut.resolve(i)}catch(i){return ut.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):ut.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):ut.reject(i)}static resolve(t){return new ut((i,r)=>{i(t)})}static reject(t){return new ut((i,r)=>{r(t)})}static waitFor(t){return new ut((i,r)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&i()},y=>r(y))}),f=!0,u===o&&i()})}static or(t){let i=ut.resolve(!1);for(const r of t)i=i.next(o=>o?ut.resolve(o):r());return i}static forEach(t,i){const r=[];return t.forEach((o,u)=>{r.push(i.call(this,o,u))}),this.waitFor(r)}static mapArray(t,i){return new ut((r,o)=>{const u=t.length,f=new Array(u);let m=0;for(let y=0;y<u;y++){const g=y;i(t[g]).next(v=>{f[g]=v,++m,m===u&&r(f)},v=>o(v))}})}static doWhile(t,i){return new ut((r,o)=>{const u=()=>{t()===!0?i().next(()=>{u()},o):r()};u()})}}function eb(n){const t=n.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function vo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>i.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Bh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=-1;function qh(n){return n==null}function yh(n){return n===0&&1/n==-1/0}function nb(n){return typeof n=="number"&&Number.isInteger(n)&&!yh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="";function ib(n){let t="";for(let i=0;i<n.length;i++)t.length>0&&(t=j2(t)),t=sb(n.get(i),t);return j2(t)}function sb(n,t){let i=t;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":i+="";break;case Xv:i+="";break;default:i+=u}}return i}function j2(n){return n+Xv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n){let t=0;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t++;return t}function or(n,t){for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t(i,n[i])}function $v(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t,i){this.comparator=t,this.root=i||tn.EMPTY}insert(t,i){return new ge(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(t){return new ge(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return i+r.left.size;o<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Fc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Fc(this.root,t,this.comparator,!0)}}class Fc{constructor(t,i,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class tn{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??tn.RED,this.left=o??tn.EMPTY,this.right=u??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,o,u){return new tn(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,r),null):u===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,o=this;if(i(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(t,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Rt(27949);return t+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt(57766)}get value(){throw Rt(16141)}get color(){throw Rt(16727)}get left(){throw Rt(29726)}get right(){throw Rt(36894)}copy(t,i,r,o,u){return this}insert(t,i,r){return new tn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.comparator=t,this.data=new ge(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;i(o.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new z2(this.data.getIterator())}getIteratorFrom(t){return new z2(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Ue)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Ue(this.comparator);return i.data=t,i}}class z2{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.fields=t,t.sort(en.comparator)}static empty(){return new kn([])}unionWith(t){let i=new Ue(en.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new kn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return ao(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Zv("Invalid base64 string: "+u):u}}(t);return new nn(i)}static fromUint8Array(t){const i=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new nn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const rb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(n){if(Zt(!!n,39018),typeof n=="string"){let t=0;const i=rb.exec(n);if(Zt(!!i,46558,{timestamp:n}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Se(n.seconds),nanos:Se(n.nanos)}}function Se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ir(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="server_timestamp",Wv="__type__",t3="__previous_value__",e3="__local_write_time__";function q1(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Wv])===null||i===void 0?void 0:i.stringValue)===Jv}function Hh(n){const t=n.mapValue.fields[t3];return q1(t)?Hh(t):t}function au(n){const t=nr(n.mapValue.fields[e3].timestampValue);return new je(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,i,r,o,u,f,m,y,g,v){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=v}}const _h="(default)";class ou{constructor(t,i){this.projectId=t,this.database=i||_h}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===_h}isEqual(t){return t instanceof ou&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="__type__",ob="__max__",Qc={mapValue:{}},i3="__vector__",vh="value";function sr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?q1(n)?4:ub(n)?9007199254740991:lb(n)?10:11:Rt(28295,{value:n})}function Vi(n,t){if(n===t)return!0;const i=sr(n);if(i!==sr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return au(n).isEqual(au(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=nr(o.timestampValue),m=nr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(o,u){return ir(o.bytesValue).isEqual(ir(u.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(o,u){return Se(o.geoPointValue.latitude)===Se(u.geoPointValue.latitude)&&Se(o.geoPointValue.longitude)===Se(u.geoPointValue.longitude)}(n,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Se(o.integerValue)===Se(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Se(o.doubleValue),m=Se(u.doubleValue);return f===m?yh(f)===yh(m):isNaN(f)&&isNaN(m)}return!1}(n,t);case 9:return ao(n.arrayValue.values||[],t.arrayValue.values||[],Vi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(U2(f)!==U2(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Vi(f[y],m[y])))return!1;return!0}(n,t);default:return Rt(52216,{left:n})}}function lu(n,t){return(n.values||[]).find(i=>Vi(i,t))!==void 0}function oo(n,t){if(n===t)return 0;const i=sr(n),r=sr(t);if(i!==r)return Pt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,t.booleanValue);case 2:return function(u,f){const m=Se(u.integerValue||u.doubleValue),y=Se(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(n,t);case 3:return B2(n.timestampValue,t.timestampValue);case 4:return B2(au(n),au(t));case 5:return s1(n.stringValue,t.stringValue);case 6:return function(u,f){const m=ir(u),y=ir(f);return m.compareTo(y)}(n.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),y=f.split("/");for(let g=0;g<m.length&&g<y.length;g++){const v=Pt(m[g],y[g]);if(v!==0)return v}return Pt(m.length,y.length)}(n.referenceValue,t.referenceValue);case 8:return function(u,f){const m=Pt(Se(u.latitude),Se(f.latitude));return m!==0?m:Pt(Se(u.longitude),Se(f.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return q2(n.arrayValue,t.arrayValue);case 10:return function(u,f){var m,y,g,v;const b=u.fields||{},T=f.fields||{},R=(m=b[vh])===null||m===void 0?void 0:m.arrayValue,M=(y=T[vh])===null||y===void 0?void 0:y.arrayValue,U=Pt(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((v=M==null?void 0:M.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:q2(R,M)}(n.mapValue,t.mapValue);case 11:return function(u,f){if(u===Qc.mapValue&&f===Qc.mapValue)return 0;if(u===Qc.mapValue)return 1;if(f===Qc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),g=f.fields||{},v=Object.keys(g);y.sort(),v.sort();for(let b=0;b<y.length&&b<v.length;++b){const T=s1(y[b],v[b]);if(T!==0)return T;const R=oo(m[y[b]],g[v[b]]);if(R!==0)return R}return Pt(y.length,v.length)}(n.mapValue,t.mapValue);default:throw Rt(23264,{Pe:i})}}function B2(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Pt(n,t);const i=nr(n),r=nr(t),o=Pt(i.seconds,r.seconds);return o!==0?o:Pt(i.nanos,r.nanos)}function q2(n,t){const i=n.values||[],r=t.values||[];for(let o=0;o<i.length&&o<r.length;++o){const u=oo(i[o],r[o]);if(u)return u}return Pt(i.length,r.length)}function lo(n){return r1(n)}function r1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=nr(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(i){return ir(i).toBase64()}(n.bytesValue):"referenceValue"in n?function(i){return At.fromName(i).toString()}(n.referenceValue):"geoPointValue"in n?function(i){return`geo(${i.latitude},${i.longitude})`}(n.geoPointValue):"arrayValue"in n?function(i){let r="[",o=!0;for(const u of i.values||[])o?o=!1:r+=",",r+=r1(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${r1(i.fields[f])}`;return o+"}"}(n.mapValue):Rt(61005,{value:n})}function ih(n){switch(sr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hh(n);return t?16+ih(t):16;case 5:return 2*n.stringValue.length;case 6:return ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+ih(u),0)}(n.arrayValue);case 10:case 11:return function(r){let o=0;return or(r.fields,(u,f)=>{o+=u.length+ih(f)}),o}(n.mapValue);default:throw Rt(13486,{value:n})}}function a1(n){return!!n&&"integerValue"in n}function H1(n){return!!n&&"arrayValue"in n}function H2(n){return!!n&&"nullValue"in n}function G2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sh(n){return!!n&&"mapValue"in n}function lb(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[n3])===null||i===void 0?void 0:i.stringValue)===i3}function Fl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return or(n.mapValue.fields,(i,r)=>t.mapValue.fields[i]=Fl(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(n.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Fl(n.arrayValue.values[i]);return t}return Object.assign({},n)}function ub(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ob}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t){this.value=t}static empty(){return new bn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!sh(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fl(i)}setAll(t){let i=en.emptyPath(),r={},o=[];t.forEach((f,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,r,o),r={},o=[],i=m.popLast()}f?r[m.lastSegment()]=Fl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(i);this.applyChanges(u,r,o)}delete(t){const i=this.field(t.popLast());sh(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Vi(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=i.mapValue.fields[t.get(r)];sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=o),i=o}return i.mapValue.fields}applyChanges(t,i,r){or(i,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new bn(Fl(this.value))}}function s3(n){const t=[];return or(n.fields,(i,r)=>{const o=new en([i]);if(sh(r)){const u=s3(r.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new kn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,i,r,o,u,f,m){this.key=t,this.documentType=i,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,Mt.min(),Mt.min(),Mt.min(),bn.empty(),0)}static newFoundDocument(t,i,r,o){return new cn(t,1,i,Mt.min(),r,o,0)}static newNoDocument(t,i){return new cn(t,2,i,Mt.min(),Mt.min(),bn.empty(),0)}static newUnknownDocument(t,i){return new cn(t,3,i,Mt.min(),Mt.min(),bn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t,i){this.position=t,this.inclusive=i}}function F2(n,t,i){let r=0;for(let o=0;o<n.position.length;o++){const u=t[o],f=n.position[o];if(u.field.isKeyField()?r=At.comparator(At.fromName(f.referenceValue),i.key):r=oo(f,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Q2(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let i=0;i<n.position.length;i++)if(!Vi(n.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,i="asc"){this.field=t,this.dir=i}}function cb(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{}class Pe extends r3{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new fb(t,i,r):i==="array-contains"?new gb(t,r):i==="in"?new pb(t,r):i==="not-in"?new yb(t,r):i==="array-contains-any"?new _b(t,r):new Pe(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new db(t,r):new mb(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(oo(i,this.value)):i!==null&&sr(this.value)===sr(i)&&this.matchesComparison(oo(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends r3{constructor(t,i){super(),this.filters=t,this.op=i,this.Te=null}static create(t,i){return new Ni(t,i)}matches(t){return a3(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function a3(n){return n.op==="and"}function o3(n){return hb(n)&&a3(n)}function hb(n){for(const t of n.filters)if(t instanceof Ni)return!1;return!0}function o1(n){if(n instanceof Pe)return n.field.canonicalString()+n.op.toString()+lo(n.value);if(o3(n))return n.filters.map(t=>o1(t)).join(",");{const t=n.filters.map(i=>o1(i)).join(",");return`${n.op}(${t})`}}function l3(n,t){return n instanceof Pe?function(r,o){return o instanceof Pe&&r.op===o.op&&r.field.isEqual(o.field)&&Vi(r.value,o.value)}(n,t):n instanceof Ni?function(r,o){return o instanceof Ni&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&l3(f,o.filters[m]),!0):!1}(n,t):void Rt(19439)}function u3(n){return n instanceof Pe?function(i){return`${i.field.canonicalString()} ${i.op} ${lo(i.value)}`}(n):n instanceof Ni?function(i){return i.op.toString()+" {"+i.getFilters().map(u3).join(" ,")+"}"}(n):"Filter"}class fb extends Pe{constructor(t,i,r){super(t,i,r),this.key=At.fromName(r.referenceValue)}matches(t){const i=At.comparator(t.key,this.key);return this.matchesComparison(i)}}class db extends Pe{constructor(t,i){super(t,"in",i),this.keys=c3("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class mb extends Pe{constructor(t,i){super(t,"not-in",i),this.keys=c3("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function c3(n,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>At.fromName(r.referenceValue))}class gb extends Pe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return H1(i)&&lu(i.arrayValue,this.value)}}class pb extends Pe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&lu(this.value.arrayValue,i)}}class yb extends Pe{constructor(t,i){super(t,"not-in",i)}matches(t){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!lu(this.value.arrayValue,i)}}class _b extends Pe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!H1(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>lu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t,i=null,r=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Ie=null}}function Y2(n,t=null,i=[],r=[],o=null,u=null,f=null){return new vb(n,t,i,r,o,u,f)}function G1(n){const t=Vt(n);if(t.Ie===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>o1(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),qh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>lo(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>lo(r)).join(",")),t.Ie=i}return t.Ie}function F1(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!cb(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if(!l3(n.filters[i],t.filters[i]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Q2(n.startAt,t.startAt)&&Q2(n.endAt,t.endAt)}function l1(n){return At.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t,i=null,r=[],o=[],u=null,f="F",m=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Eb(n,t,i,r,o,u,f,m){return new Gh(n,t,i,r,o,u,f,m)}function Fh(n){return new Gh(n)}function K2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tb(n){return n.collectionGroup!==null}function Ql(n){const t=Vt(n);if(t.Ee===null){t.Ee=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ee.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ue(en.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(t).forEach(u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ee.push(new Th(u,r))}),i.has(en.keyField().canonicalString())||t.Ee.push(new Th(en.keyField(),r))}return t.Ee}function xi(n){const t=Vt(n);return t.de||(t.de=bb(t,Ql(n))),t.de}function bb(n,t){if(n.limitType==="F")return Y2(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Th(o.field,u)});const i=n.endAt?new Eh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eh(n.startAt.position,n.startAt.inclusive):null;return Y2(n.path,n.collectionGroup,t,n.filters,n.limit,i,r)}}function u1(n,t,i){return new Gh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,i,n.startAt,n.endAt)}function Qh(n,t){return F1(xi(n),xi(t))&&n.limitType===t.limitType}function h3(n){return`${G1(xi(n))}|lt:${n.limitType}`}function $a(n){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(o=>u3(o)).join(", ")}]`),qh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(o=>lo(o)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(o=>lo(o)).join(",")),`Target(${r})`}(xi(n))}; limitType=${n.limitType})`}function Yh(n,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):At.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,t)&&function(r,o){for(const u of Ql(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(n,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(n,t)&&function(r,o){return!(r.startAt&&!function(f,m,y){const g=F2(f,m,y);return f.inclusive?g<=0:g<0}(r.startAt,Ql(r),o)||r.endAt&&!function(f,m,y){const g=F2(f,m,y);return f.inclusive?g>=0:g>0}(r.endAt,Ql(r),o))}(n,t)}function Sb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f3(n){return(t,i)=>{let r=!1;for(const o of Ql(n)){const u=Ab(o,t,i);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function Ab(n,t,i){const r=n.field.isKeyField()?At.comparator(t.key,i.key):function(u,f,m){const y=f.data.field(u),g=m.data.field(u);return y!==null&&g!==null?oo(y,g):Rt(42886)}(n.field,t,i);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Rt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,i]);o.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[i]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){or(this.inner,(i,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return $v(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new ge(At.comparator);function ds(){return wb}const d3=new ge(At.comparator);function kl(...n){let t=d3;for(const i of n)t=t.insert(i.key,i);return t}function m3(n){let t=d3;return n.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function Kr(){return Yl()}function g3(){return Yl()}function Yl(){return new Wr(n=>n.toString(),(n,t)=>n.isEqual(t))}const Cb=new ge(At.comparator),Rb=new Ue(At.comparator);function Bt(...n){let t=Rb;for(const i of n)t=t.add(i);return t}const xb=new Ue(Pt);function Ib(){return xb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(t)?"-0":t}}function p3(n){return{integerValue:""+n}}function Db(n,t){return nb(t)?p3(t):Q1(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function Mb(n,t,i){return n instanceof bh?function(o,u){const f={fields:{[Wv]:{stringValue:Jv},[e3]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&q1(u)&&(u=Hh(u)),u&&(f.fields[t3]=u),{mapValue:f}}(i,t):n instanceof uu?_3(n,t):n instanceof cu?v3(n,t):function(o,u){const f=y3(o,u),m=X2(f)+X2(o.Re);return a1(f)&&a1(o.Re)?p3(m):Q1(o.serializer,m)}(n,t)}function Vb(n,t,i){return n instanceof uu?_3(n,t):n instanceof cu?v3(n,t):i}function y3(n,t){return n instanceof Sh?function(r){return a1(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class bh extends Kh{}class uu extends Kh{constructor(t){super(),this.elements=t}}function _3(n,t){const i=E3(t);for(const r of n.elements)i.some(o=>Vi(o,r))||i.push(r);return{arrayValue:{values:i}}}class cu extends Kh{constructor(t){super(),this.elements=t}}function v3(n,t){let i=E3(t);for(const r of n.elements)i=i.filter(o=>!Vi(o,r));return{arrayValue:{values:i}}}class Sh extends Kh{constructor(t,i){super(),this.serializer=t,this.Re=i}}function X2(n){return Se(n.integerValue||n.doubleValue)}function E3(n){return H1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Nb(n,t){return n.field.isEqual(t.field)&&function(r,o){return r instanceof uu&&o instanceof uu||r instanceof cu&&o instanceof cu?ao(r.elements,o.elements,Vi):r instanceof Sh&&o instanceof Sh?Vi(r.Re,o.Re):r instanceof bh&&o instanceof bh}(n.transform,t.transform)}class Ob{constructor(t,i){this.version=t,this.transformResults=i}}class Ii{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Ii}static exists(t){return new Ii(void 0,t)}static updateTime(t){return new Ii(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rh(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Xh{}function T3(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new S3(n.key,Ii.none()):new pu(n.key,n.data,Ii.none());{const i=n.data,r=bn.empty();let o=new Ue(en.comparator);for(let u of t.fields)if(!o.has(u)){let f=i.field(u);f===null&&u.length>1&&(u=u.popLast(),f=i.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new lr(n.key,r,new kn(o.toArray()),Ii.none())}}function Lb(n,t,i){n instanceof pu?function(o,u,f){const m=o.value.clone(),y=Z2(o.fieldTransforms,u,f.transformResults);m.setAll(y),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(n,t,i):n instanceof lr?function(o,u,f){if(!rh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=Z2(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(b3(o)),y.setAll(m),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(n,t,i):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,i)}function Kl(n,t,i,r){return n instanceof pu?function(u,f,m,y){if(!rh(u.precondition,f))return m;const g=u.value.clone(),v=J2(u.fieldTransforms,y,f);return g.setAll(v),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(n,t,i,r):n instanceof lr?function(u,f,m,y){if(!rh(u.precondition,f))return m;const g=J2(u.fieldTransforms,y,f),v=f.data;return v.setAll(b3(u)),v.setAll(g),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(n,t,i,r):function(u,f,m){return rh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(n,t,i)}function kb(n,t){let i=null;for(const r of n.fieldTransforms){const o=t.data.field(r.field),u=y3(r.transform,o||null);u!=null&&(i===null&&(i=bn.empty()),i.set(r.field,u))}return i||null}function $2(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&ao(r,o,(u,f)=>Nb(u,f))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class pu extends Xh{constructor(t,i,r,o=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class lr extends Xh{constructor(t,i,r,o,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function b3(n){const t=new Map;return n.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=n.data.field(i);t.set(i,r)}}),t}function Z2(n,t,i){const r=new Map;Zt(n.length===i.length,32656,{Ve:i.length,me:n.length});for(let o=0;o<i.length;o++){const u=n[o],f=u.transform,m=t.data.field(u.field);r.set(u.field,Vb(f,m,i[o]))}return r}function J2(n,t,i){const r=new Map;for(const o of n){const u=o.transform,f=i.data.field(o.field);r.set(o.field,Mb(u,f,t))}return r}class S3 extends Xh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pb extends Xh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(t,i,r,o){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&Lb(u,t,r[o])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Kl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Kl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=g3();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=i.has(o.key)?null:m;const y=T3(f,m);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Bt())}isEqual(t){return this.batchId===t.batchId&&ao(this.mutations,t.mutations,(i,r)=>$2(i,r))&&ao(this.baseMutations,t.baseMutations,(i,r)=>$2(i,r))}}class Y1{constructor(t,i,r,o){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=o}static from(t,i,r){Zt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let o=function(){return Cb}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Y1(t,i,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe,Ft;function Bb(n){switch(n){case ct.OK:return Rt(64938);case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0;default:return Rt(15467,{code:n})}}function A3(n){if(n===void 0)return fs("GRPC error has no .code"),ct.UNKNOWN;switch(n){case xe.OK:return ct.OK;case xe.CANCELLED:return ct.CANCELLED;case xe.UNKNOWN:return ct.UNKNOWN;case xe.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case xe.INTERNAL:return ct.INTERNAL;case xe.UNAVAILABLE:return ct.UNAVAILABLE;case xe.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case xe.NOT_FOUND:return ct.NOT_FOUND;case xe.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case xe.ABORTED:return ct.ABORTED;case xe.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case xe.DATA_LOSS:return ct.DATA_LOSS;default:return Rt(39323,{code:n})}}(Ft=xe||(xe={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=new Js([4294967295,4294967295],0);function W2(n){const t=Yv().encode(n),i=new Uv;return i.update(t),new Uint8Array(i.digest())}function t_(n){const t=new DataView(n.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Js([i,r],0),new Js([o,u],0)]}class K1{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Pl(`Invalid padding: ${i}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${i}`);this.pe=8*t.length-i,this.ye=Js.fromNumber(this.pe)}we(t,i,r){let o=t.add(i.multiply(Js.fromNumber(r)));return o.compare(qb)===1&&(o=new Js([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const i=W2(t),[r,o]=t_(i);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);if(!this.be(f))return!1}return!0}static create(t,i,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new K1(u,o,i);return r.forEach(m=>f.insert(m)),f}insert(t){if(this.pe===0)return;const i=W2(t),[r,o]=t_(i);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);this.Se(f)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t,i,r,o,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const o=new Map;return o.set(t,yu.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new $h(Mt.min(),o,new ge(Pt),ds(),Bt())}}class yu{constructor(t,i,r,o,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new yu(r,i,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,i,r,o){this.De=t,this.removedTargetIds=i,this.key=r,this.ve=o}}class w3{constructor(t,i){this.targetId=t,this.Ce=i}}class C3{constructor(t,i,r=nn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=o}}class e_{constructor(){this.Fe=0,this.Me=n_(),this.xe=nn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Bt(),i=Bt(),r=Bt();return this.Me.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:i=i.add(o);break;case 1:r=r.add(o);break;default:Rt(38017,{changeType:u})}}),new yu(this.xe,this.Oe,t,i,r)}Qe(){this.Ne=!1,this.Me=n_()}$e(t,i){this.Ne=!0,this.Me=this.Me.insert(t,i)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Zt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Hb{constructor(t){this.ze=t,this.je=new Map,this.He=ds(),this.Je=Yc(),this.Ye=Yc(),this.Ze=new ge(Pt)}Xe(t){for(const i of t.De)t.ve&&t.ve.isFoundDocument()?this.et(i,t.ve):this.tt(i,t.key,t.ve);for(const i of t.removedTargetIds)this.tt(i,t.key,t.ve)}nt(t){this.forEachTarget(t,i=>{const r=this.rt(i);switch(t.state){case 0:this.it(i)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(i);break;case 3:this.it(i)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(i)&&(this.st(i),r.ke(t.resumeToken));break;default:Rt(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.je.forEach((r,o)=>{this.it(o)&&i(o)})}ot(t){const i=t.targetId,r=t.Ce.count,o=this._t(i);if(o){const u=o.target;if(l1(u))if(r===0){const f=new At(u.path);this.tt(i,f,cn.newNoDocument(f,Mt.min()))}else Zt(r===1,20013,{expectedCount:r});else{const f=this.ut(i);if(f!==r){const m=this.ct(t),y=m?this.lt(m,t,f):1;if(y!==0){this.st(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,g)}}}}}ct(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=i;let f,m;try{f=ir(r).toUint8Array()}catch(y){if(y instanceof Zv)return ro("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new K1(f,o,u)}catch(y){return ro(y instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(t,i,r){return i.Ce.count===r-this.Tt(t,i.targetId)?0:2}Tt(t,i){const r=this.ze.getRemoteKeysForTarget(i);let o=0;return r.forEach(u=>{const f=this.ze.Pt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.tt(i,u,null),o++)}),o}It(t){const i=new Map;this.je.forEach((u,f)=>{const m=this._t(f);if(m){if(u.current&&l1(m.target)){const y=new At(m.target.path);this.Et(y).has(f)||this.dt(f,y)||this.tt(f,y,cn.newNoDocument(y,t))}u.Le&&(i.set(f,u.qe()),u.Qe())}});let r=Bt();this.Ye.forEach((u,f)=>{let m=!0;f.forEachWhile(y=>{const g=this._t(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(t));const o=new $h(t,i,this.Ze,this.He,r);return this.He=ds(),this.Je=Yc(),this.Ye=Yc(),this.Ze=new ge(Pt),o}et(t,i){if(!this.it(t))return;const r=this.dt(t,i.key)?2:0;this.rt(t).$e(i.key,r),this.He=this.He.insert(i.key,i),this.Je=this.Je.insert(i.key,this.Et(i.key).add(t)),this.Ye=this.Ye.insert(i.key,this.At(i.key).add(t))}tt(t,i,r){if(!this.it(t))return;const o=this.rt(t);this.dt(t,i)?o.$e(i,1):o.Ue(i),this.Ye=this.Ye.insert(i,this.At(i).delete(t)),this.Ye=this.Ye.insert(i,this.At(i).add(t)),r&&(this.He=this.He.insert(i,r))}removeTarget(t){this.je.delete(t)}ut(t){const i=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let i=this.je.get(t);return i||(i=new e_,this.je.set(t,i)),i}At(t){let i=this.Ye.get(t);return i||(i=new Ue(Pt),this.Ye=this.Ye.insert(t,i)),i}Et(t){let i=this.Je.get(t);return i||(i=new Ue(Pt),this.Je=this.Je.insert(t,i)),i}it(t){const i=this._t(t)!==null;return i||_t("WatchChangeAggregator","Detected inactive target",t),i}_t(t){const i=this.je.get(t);return i&&i.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new e_),this.ze.getRemoteKeysForTarget(t).forEach(i=>{this.tt(t,i,null)})}dt(t,i){return this.ze.getRemoteKeysForTarget(t).has(i)}}function Yc(){return new ge(At.comparator)}function n_(){return new ge(At.comparator)}const Gb={asc:"ASCENDING",desc:"DESCENDING"},Fb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qb={and:"AND",or:"OR"};class Yb{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function c1(n,t){return n.useProto3Json||qh(t)?t:{value:t}}function Ah(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function R3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Kb(n,t){return Ah(n,t.toTimestamp())}function Di(n){return Zt(!!n,49232),Mt.fromTimestamp(function(i){const r=nr(i);return new je(r.seconds,r.nanos)}(n))}function X1(n,t){return h1(n,t).canonicalString()}function h1(n,t){const i=function(o){return new he(["projects",o.projectId,"databases",o.database])}(n).child("documents");return t===void 0?i:i.child(t)}function x3(n){const t=he.fromString(n);return Zt(N3(t),10190,{key:t.toString()}),t}function f1(n,t){return X1(n.databaseId,t.path)}function Cm(n,t){const i=x3(t);if(i.get(1)!==n.databaseId.projectId)throw new St(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+n.databaseId.projectId);if(i.get(3)!==n.databaseId.database)throw new St(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+n.databaseId.database);return new At(D3(i))}function I3(n,t){return X1(n.databaseId,t)}function Xb(n){const t=x3(n);return t.length===4?he.emptyPath():D3(t)}function d1(n){return new he(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function D3(n){return Zt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function i_(n,t,i){return{name:f1(n,t),fields:i.value.mapValue.fields}}function $b(n,t){let i;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Rt(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(g,v){return g.useProto3Json?(Zt(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(Zt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(g){const v=g.code===void 0?ct.UNKNOWN:A3(g.code);return new St(v,g.message||"")}(f);i=new C3(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Cm(n,r.document.name),u=Di(r.document.updateTime),f=r.document.createTime?Di(r.document.createTime):Mt.min(),m=new bn({mapValue:{fields:r.document.fields}}),y=cn.newFoundDocument(o,u,f,m),g=r.targetIds||[],v=r.removedTargetIds||[];i=new ah(g,v,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Cm(n,r.document),u=r.readTime?Di(r.readTime):Mt.min(),f=cn.newNoDocument(o,u),m=r.removedTargetIds||[];i=new ah([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Cm(n,r.document),u=r.removedTargetIds||[];i=new ah([],u,o,null)}else{if(!("filter"in t))return Rt(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new zb(o,u),m=r.targetId;i=new w3(m,f)}}return i}function Zb(n,t){let i;if(t instanceof pu)i={update:i_(n,t.key,t.value)};else if(t instanceof S3)i={delete:f1(n,t.key)};else if(t instanceof lr)i={update:i_(n,t.key,t.data),updateMask:aS(t.fieldMask)};else{if(!(t instanceof Pb))return Rt(16599,{ft:t.type});i={verify:f1(n,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof bh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof uu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof cu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Sh)return{fieldPath:f.field.canonicalString(),increment:m.Re};throw Rt(20930,{transform:f.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:Kb(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Rt(27497)}(n,t.precondition)),i}function Jb(n,t){return n&&n.length>0?(Zt(t!==void 0,14353),n.map(i=>function(o,u){let f=o.updateTime?Di(o.updateTime):Di(u);return f.isEqual(Mt.min())&&(f=Di(u)),new Ob(f,o.transformResults||[])}(i,t))):[]}function Wb(n,t){return{documents:[I3(n,t.path)]}}function tS(n,t){const i={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=I3(n,o);const u=function(g){if(g.length!==0)return V3(Ni.create(g,"and"))}(t.filters);u&&(i.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(v=>function(T){return{field:Za(T.field),direction:iS(T.dir)}}(v))}(t.orderBy);f&&(i.structuredQuery.orderBy=f);const m=c1(n,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:i,parent:o}}function eS(n){let t=Xb(n.parent);const i=n.structuredQuery,r=i.from?i.from.length:0;let o=null;if(r>0){Zt(r===1,65062);const v=i.from[0];v.allDescendants?o=v.collectionId:t=t.child(v.collectionId)}let u=[];i.where&&(u=function(b){const T=M3(b);return T instanceof Ni&&o3(T)?T.getFilters():[T]}(i.where));let f=[];i.orderBy&&(f=function(b){return b.map(T=>function(M){return new Th(Ja(M.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(i.orderBy));let m=null;i.limit&&(m=function(b){let T;return T=typeof b=="object"?b.value:b,qh(T)?null:T}(i.limit));let y=null;i.startAt&&(y=function(b){const T=!!b.before,R=b.values||[];return new Eh(R,T)}(i.startAt));let g=null;return i.endAt&&(g=function(b){const T=!b.before,R=b.values||[];return new Eh(R,T)}(i.endAt)),Eb(t,o,f,u,m,"F",y,g)}function nS(n,t){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt(28987,{purpose:o})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function M3(n){return n.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Ja(i.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ja(i.unaryFilter.field);return Pe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ja(i.unaryFilter.field);return Pe.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ja(i.unaryFilter.field);return Pe.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rt(61313);default:return Rt(60726)}}(n):n.fieldFilter!==void 0?function(i){return Pe.create(Ja(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rt(58110);default:return Rt(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(i){return Ni.create(i.compositeFilter.filters.map(r=>M3(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Rt(1026)}}(i.compositeFilter.op))}(n):Rt(30097,{filter:n})}function iS(n){return Gb[n]}function sS(n){return Fb[n]}function rS(n){return Qb[n]}function Za(n){return{fieldPath:n.canonicalString()}}function Ja(n){return en.fromServerFormat(n.fieldPath)}function V3(n){return n instanceof Pe?function(i){if(i.op==="=="){if(G2(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NAN"}};if(H2(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(G2(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NOT_NAN"}};if(H2(i.value))return{unaryFilter:{field:Za(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(i.field),op:sS(i.op),value:i.value}}}(n):n instanceof Ni?function(i){const r=i.getFilters().map(o=>V3(o));return r.length===1?r[0]:{compositeFilter:{op:rS(i.op),filters:r}}}(n):Rt(54877,{filter:n})}function aS(n){const t=[];return n.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function N3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,i,r,o,u=Mt.min(),f=Mt.min(),m=nn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new Ys(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t){this.wt=t}}function lS(n){const t=eS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?u1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.Cn=new cS}addToCollectionParentIndex(t,i){return this.Cn.add(i),ut.resolve()}getCollectionParents(t,i){return ut.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return ut.resolve()}deleteFieldIndex(t,i){return ut.resolve()}deleteAllFieldIndexes(t){return ut.resolve()}createTargetIndexes(t,i){return ut.resolve()}getDocumentsMatchingTarget(t,i){return ut.resolve(null)}getIndexType(t,i){return ut.resolve(0)}getFieldIndexes(t,i){return ut.resolve([])}getNextCollectionGroupToUpdate(t){return ut.resolve(null)}getMinOffset(t,i){return ut.resolve(er.min())}getMinOffsetFromCollectionGroup(t,i){return ut.resolve(er.min())}updateCollectionGroup(t,i,r){return ut.resolve()}updateIndexEntries(t,i){return ut.resolve()}}class cS{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i]||new Ue(he.comparator),u=!o.has(r);return this.index[i]=o.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Ue(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O3=41943040;class vn{static withCacheSize(t){return new vn(t,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(O3,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new uo(0)}static lr(){return new uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LruGarbageCollector",hS=1048576;function a_([n,t],[i,r]){const o=Pt(n,i);return o===0?Pt(t,r):o}class fS{constructor(t){this.Er=t,this.buffer=new Ue(a_),this.dr=0}Ar(){return++this.dr}Rr(t){const i=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();a_(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class dS{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){_t(r_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){vo(i)?_t(r_,"Ignoring IndexedDB error during garbage collection: ",i):await _o(i)}await this.mr(3e5)})}}class mS{constructor(t,i){this.gr=t,this.params=i}calculateTargetCount(t,i){return this.gr.pr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return ut.resolve(Bh.le);const r=new fS(i);return this.gr.forEachTarget(t,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.gr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.gr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),ut.resolve(s_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s_):this.wr(t,i))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,i){let r,o,u,f,m,y,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,f=Date.now(),this.nthSequenceNumber(t,o))).next(b=>(r=b,m=Date.now(),this.removeTargets(t,r,i))).next(b=>(u=b,y=Date.now(),this.removeOrphanedDocuments(t,r))).next(b=>(g=Date.now(),Xa()<=Qt.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-v}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${b} documents in `+(g-y)+`ms
Total Duration: ${g-v}ms`),ut.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function gS(n,t){return new mS(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.changes=new Wr(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?ut.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,i,r,o){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,i))).next(o=>(r!==null&&Kl(r.mutation,o,kn.empty(),je.now()),o))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Bt()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Bt()){const o=Kr();return this.populateOverlays(t,o,i).next(()=>this.computeViews(t,i,o,r).next(u=>{let f=kl();return u.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(t,i){const r=Kr();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Bt()))}populateOverlays(t,i,r){const o=[];return r.forEach(u=>{i.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{i.set(f,m)})})}computeViews(t,i,r,o){let u=ds();const f=Yl(),m=function(){return Yl()}();return i.forEach((y,g)=>{const v=r.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof lr)?u=u.insert(g.key,g):v!==void 0?(f.set(g.key,v.mutation.getFieldMask()),Kl(v.mutation,g,v.mutation.getFieldMask(),je.now())):f.set(g.key,kn.empty())}),this.recalculateAndSaveOverlays(t,u).next(y=>(y.forEach((g,v)=>f.set(g,v)),i.forEach((g,v)=>{var b;return m.set(g,new yS(v,(b=f.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(t,i){const r=Yl();let o=new ge((f,m)=>f-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(f=>{for(const m of f)m.keys().forEach(y=>{const g=i.get(y);if(g===null)return;let v=r.get(y)||kn.empty();v=m.applyToLocalView(g,v),r.set(y,v);const b=(o.get(m.batchId)||Bt()).add(y);o=o.insert(m.batchId,b)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,v=y.value,b=g3();v.forEach(T=>{if(!u.has(T)){const R=T3(i.get(T),r.get(T));R!==null&&b.set(T,R),u=u.add(T)}}),f.push(this.documentOverlayCache.saveOverlays(t,g,b))}return ut.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,o){return function(f){return At.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):Tb(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,o):this.getDocumentsMatchingCollectionQuery(t,i,r,o)}getNextDocuments(t,i,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,o-u.size):ut.resolve(Kr());let m=ru,y=u;return f.next(g=>ut.forEach(g,(v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(v)?ut.resolve():this.remoteDocumentCache.getEntry(t,v).next(T=>{y=y.insert(v,T)}))).next(()=>this.populateOverlays(t,g,u)).next(()=>this.computeViews(t,y,g,Bt())).next(v=>({batchId:m,changes:m3(v)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new At(i)).next(r=>{let o=kl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,i,r,o){const u=i.collectionGroup;let f=kl();return this.indexManager.getCollectionParents(t,u).next(m=>ut.forEach(m,y=>{const g=function(b,T){return new Gh(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,o).next(v=>{v.forEach((b,T)=>{f=f.insert(b,T)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,i,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,o))).next(f=>{u.forEach((y,g)=>{const v=g.getKey();f.get(v)===null&&(f=f.insert(v,cn.newInvalidDocument(v)))});let m=kl();return f.forEach((y,g)=>{const v=u.get(y);v!==void 0&&Kl(v.mutation,g,kn.empty(),je.now()),Yh(i,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,i){return ut.resolve(this.kr.get(i))}saveBundleMetadata(t,i){return this.kr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:Di(o.createTime)}}(i)),ut.resolve()}getNamedQuery(t,i){return ut.resolve(this.qr.get(i))}saveNamedQuery(t,i){return this.qr.set(i.name,function(o){return{name:o.name,query:lS(o.bundledQuery),readTime:Di(o.readTime)}}(i)),ut.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.overlays=new ge(At.comparator),this.Qr=new Map}getOverlay(t,i){return ut.resolve(this.overlays.get(i))}getOverlays(t,i){const r=Kr();return ut.forEach(i,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((o,u)=>{this.St(t,i,u)}),ut.resolve()}removeOverlaysForBatchId(t,i,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),ut.resolve()}getOverlaysForCollection(t,i,r){const o=Kr(),u=i.length+1,f=new At(i.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ut.resolve(o)}getOverlaysForCollectionGroup(t,i,r,o){let u=new ge((g,v)=>g-v);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let v=u.get(g.largestBatchId);v===null&&(v=Kr(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=Kr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,v)=>m.set(g,v)),!(m.size()>=o)););return ut.resolve(m)}St(t,i,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Ub(i,r));let u=this.Qr.get(i);u===void 0&&(u=Bt(),this.Qr.set(i,u)),this.Qr.set(i,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return ut.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,ut.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.$r=new Ue(Qe.Ur),this.Kr=new Ue(Qe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,i){const r=new Qe(t,i);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.zr(new Qe(t,i))}jr(t,i){t.forEach(r=>this.removeReference(r,i))}Hr(t){const i=new At(new he([])),r=new Qe(i,t),o=new Qe(i,t+1),u=[];return this.Kr.forEachInRange([r,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const i=new At(new he([])),r=new Qe(i,t),o=new Qe(i,t+1);let u=Bt();return this.Kr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(t){const i=new Qe(t,0),r=this.$r.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Qe{constructor(t,i){this.key=t,this.Zr=i}static Ur(t,i){return At.comparator(t.key,i.key)||Pt(t.Zr,i.Zr)}static Wr(t,i){return Pt(t.Zr,i.Zr)||At.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.nr=1,this.Xr=new Ue(Qe.Ur)}checkEmpty(t){return ut.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new jb(u,i,r,o);this.mutationQueue.push(f);for(const m of o)this.Xr=this.Xr.add(new Qe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return ut.resolve(f)}lookupMutationBatch(t,i){return ut.resolve(this.ei(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,o=this.ti(r),u=o<0?0:o;return ut.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ut.resolve(this.mutationQueue.length===0?B1:this.nr-1)}getAllMutationBatches(t){return ut.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Qe(i,0),o=new Qe(i,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],f=>{const m=this.ei(f.Zr);u.push(m)}),ut.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Ue(Pt);return i.forEach(o=>{const u=new Qe(o,0),f=new Qe(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],m=>{r=r.add(m.Zr)})}),ut.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,o=r.length+1;let u=r;At.isDocumentKey(u)||(u=u.child(""));const f=new Qe(new At(u),0);let m=new Ue(Pt);return this.Xr.forEachWhile(y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(m=m.add(y.Zr)),!0)},f),ut.resolve(this.ni(m))}ni(t){const i=[];return t.forEach(r=>{const o=this.ei(r);o!==null&&i.push(o)}),i}removeMutationBatch(t,i){Zt(this.ri(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ut.forEach(i.mutations,o=>{const u=new Qe(o.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,i){const r=new Qe(i,0),o=this.Xr.firstAfterOrEqual(r);return ut.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ut.resolve()}ri(t,i){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const i=this.ti(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(t){this.ii=t,this.docs=function(){return new ge(At.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,o=this.docs.get(r),u=o?o.size:0,f=this.ii(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return ut.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(i))}getEntries(t,i){let r=ds();return i.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():cn.newInvalidDocument(o))}),ut.resolve(r)}getDocumentsMatchingQuery(t,i,r,o){let u=ds();const f=i.path,m=new At(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:v}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||J7(Z7(v),r)<=0||(o.has(v.key)||Yh(i,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ut.resolve(u)}getAllFromCollectionGroup(t,i,r,o){Rt(9500)}si(t,i){return ut.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new AS(this)}getSize(t){return ut.resolve(this.size)}}class AS extends pS{constructor(t){super(),this.Br=t}applyChanges(t){const i=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?i.push(this.Br.addEntry(t,o)):this.Br.removeEntry(r)}),ut.waitFor(i)}getFromCache(t,i){return this.Br.getEntry(t,i)}getAllFromCache(t,i){return this.Br.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(t){this.persistence=t,this.oi=new Wr(i=>G1(i),F1),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this._i=0,this.ai=new $1,this.targetCount=0,this.ui=uo.cr()}forEachTarget(t,i){return this.oi.forEach((r,o)=>i(o)),ut.resolve()}getLastRemoteSnapshotVersion(t){return ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ut.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),ut.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this._i&&(this._i=i),ut.resolve()}Tr(t){this.oi.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ui=new uo(i),this.highestTargetId=i),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,i){return this.Tr(i),this.targetCount+=1,ut.resolve()}updateTargetData(t,i){return this.Tr(i),ut.resolve()}removeTargetData(t,i){return this.oi.delete(i.target),this.ai.Hr(i.targetId),this.targetCount-=1,ut.resolve()}removeTargets(t,i,r){let o=0;const u=[];return this.oi.forEach((f,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),ut.waitFor(u).next(()=>o)}getTargetCount(t){return ut.resolve(this.targetCount)}getTargetData(t,i){const r=this.oi.get(i)||null;return ut.resolve(r)}addMatchingKeys(t,i,r){return this.ai.Gr(i,r),ut.resolve()}removeMatchingKeys(t,i,r){this.ai.jr(i,r);const o=this.persistence.referenceDelegate,u=[];return o&&i.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),ut.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this.ai.Hr(i),ut.resolve()}getMatchingKeysForTargetId(t,i){const r=this.ai.Yr(i);return ut.resolve(r)}containsKey(t,i){return ut.resolve(this.ai.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(t,i){this.ci={},this.overlays={},this.li=new Bh(0),this.hi=!1,this.hi=!0,this.Pi=new TS,this.referenceDelegate=t(this),this.Ti=new wS(this),this.indexManager=new uS,this.remoteDocumentCache=function(o){return new SS(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new oS(i),this.Ei=new vS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new ES,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ci[t.toKey()];return r||(r=new bS(i,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,i,r){_t("MemoryPersistence","Starting transaction:",t);const o=new CS(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(t,i){return ut.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,i)))}}class CS extends tb{constructor(t){super(),this.currentSequenceNumber=t}}class Z1{constructor(t){this.persistence=t,this.Vi=new $1,this.mi=null}static fi(t){return new Z1(t)}get gi(){if(this.mi)return this.mi;throw Rt(60996)}addReference(t,i,r){return this.Vi.addReference(r,i),this.gi.delete(r.toString()),ut.resolve()}removeReference(t,i,r){return this.Vi.removeReference(r,i),this.gi.add(r.toString()),ut.resolve()}markPotentiallyOrphaned(t,i){return this.gi.add(i.toString()),ut.resolve()}removeTarget(t,i){this.Vi.Hr(i.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(t,i))}di(){this.mi=new Set}Ai(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ut.forEach(this.gi,r=>{const o=At.fromPath(r);return this.pi(t,o).next(u=>{u||i.removeEntry(o,Mt.min())})}).next(()=>(this.mi=null,i.apply(t)))}updateLimboDocument(t,i){return this.pi(t,i).next(r=>{r?this.gi.delete(i.toString()):this.gi.add(i.toString())})}Ii(t){return 0}pi(t,i){return ut.or([()=>ut.resolve(this.Vi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ri(t,i)])}}class wh{constructor(t,i){this.persistence=t,this.yi=new Wr(r=>ib(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=gS(this,i)}static fi(t,i){return new wh(t,i)}di(){}Ai(t){return ut.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}pr(t){const i=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(o=>r+o))}br(t){let i=0;return this.yr(t,r=>{i++}).next(()=>i)}yr(t,i){return ut.forEach(this.yi,(r,o)=>this.Dr(t,r,o).next(u=>u?ut.resolve():i(o)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(t,f=>this.Dr(t,f,i).next(m=>{m||(r++,u.removeEntry(f,Mt.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.yi.set(i,t.currentSequenceNumber),ut.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),ut.resolve()}removeReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),ut.resolve()}updateLimboDocument(t,i){return this.yi.set(i,t.currentSequenceNumber),ut.resolve()}Ii(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=ih(t.data.value)),i}Dr(t,i,r){return ut.or([()=>this.persistence.Ri(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const o=this.yi.get(i);return ut.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,i,r,o){this.targetId=t,this.fromCache=i,this.ds=r,this.As=o}static Rs(t,i){let r=Bt(),o=Bt();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new J1(t,i.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return TT()?8:eb(vT())>0?6:4}()}initialize(t,i){this.ys=t,this.indexManager=i,this.Vs=!0}getDocumentsMatchingQuery(t,i,r,o){const u={result:null};return this.ws(t,i).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(t,i,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new RS;return this.Ss(t,i,f).next(m=>{if(u.result=m,this.fs)return this.Ds(t,i,f,m.size)})}).next(()=>u.result)}Ds(t,i,r,o){return r.documentReadCount<this.gs?(Xa()<=Qt.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",$a(i),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ut.resolve()):(Xa()<=Qt.DEBUG&&_t("QueryEngine","Query:",$a(i),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Xa()<=Qt.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",$a(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,xi(i))):ut.resolve())}ws(t,i){if(K2(i))return ut.resolve(null);let r=xi(i);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=u1(i,null,"F"),r=xi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const f=Bt(...u);return this.ys.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,r).next(y=>{const g=this.vs(i,m);return this.Cs(i,g,f,y.readTime)?this.ws(t,u1(i,null,"F")):this.Fs(t,g,i,y)}))})))}bs(t,i,r,o){return K2(i)||o.isEqual(Mt.min())?ut.resolve(null):this.ys.getDocuments(t,r).next(u=>{const f=this.vs(i,u);return this.Cs(i,f,r,o)?ut.resolve(null):(Xa()<=Qt.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),$a(i)),this.Fs(t,f,i,$7(o,ru)).next(m=>m))})}vs(t,i){let r=new Ue(f3(t));return i.forEach((o,u)=>{Yh(t,u)&&(r=r.add(u))}),r}Cs(t,i,r,o){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,i,r){return Xa()<=Qt.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",$a(i)),this.ys.getDocumentsMatchingQuery(t,i,er.min(),r)}Fs(t,i,r,o){return this.ys.getDocumentsMatchingQuery(t,r,o).next(u=>(i.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="LocalStore",IS=3e8;class DS{constructor(t,i,r,o){this.persistence=t,this.Ms=i,this.serializer=o,this.xs=new ge(Pt),this.Os=new Wr(u=>G1(u),F1),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _S(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.xs))}}function MS(n,t,i,r){return new DS(n,t,i,r)}async function k3(n,t){const i=Vt(n);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let o;return i.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,i.Ls(t),i.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let y=Bt();for(const g of o){f.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}return i.localDocuments.getDocuments(r,y).next(g=>({ks:g,removedBatchIds:f,addedBatchIds:m}))})})}function VS(n,t){const i=Vt(n);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=i.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,g,v){const b=g.batch,T=b.keys();let R=ut.resolve();return T.forEach(M=>{R=R.next(()=>v.getEntry(y,M)).next(U=>{const k=g.docVersions.get(M);Zt(k!==null,48541),U.version.compareTo(k)<0&&(b.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),v.addEntry(U)))})}),R.next(()=>m.mutationQueue.removeMutationBatch(y,b))}(i,r,t,u).next(()=>u.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Bt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(t))).next(()=>i.localDocuments.getDocuments(r,o))})}function P3(n){const t=Vt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ti.getLastRemoteSnapshotVersion(i))}function NS(n,t){const i=Vt(n),r=t.snapshotVersion;let o=i.xs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=i.Bs.newChangeBuffer({trackRemovals:!0});o=i.xs;const m=[];t.targetChanges.forEach((v,b)=>{const T=o.get(b);if(!T)return;m.push(i.Ti.removeMatchingKeys(u,v.removedDocuments,b).next(()=>i.Ti.addMatchingKeys(u,v.addedDocuments,b)));let R=T.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(b)!==null?R=R.withResumeToken(nn.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),o=o.insert(b,R),function(U,k,B){return U.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=IS?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(T,R,v)&&m.push(i.Ti.updateTargetData(u,R))});let y=ds(),g=Bt();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,v))}),m.push(OS(u,f,t.documentUpdates).next(v=>{y=v.qs,g=v.Qs})),!r.isEqual(Mt.min())){const v=i.Ti.getLastRemoteSnapshotVersion(u).next(b=>i.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(v)}return ut.waitFor(m).next(()=>f.apply(u)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(i.xs=o,u))}function OS(n,t,i){let r=Bt(),o=Bt();return i.forEach(u=>r=r.add(u)),t.getEntries(n,r).next(u=>{let f=ds();return i.forEach((m,y)=>{const g=u.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Mt.min())?(t.removeEntry(m,y.readTime),f=f.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),f=f.insert(m,y)):_t(W1,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{qs:f,Qs:o}})}function LS(n,t){const i=Vt(n);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=B1),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function kS(n,t){const i=Vt(n);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return i.Ti.getTargetData(r,t).next(u=>u?(o=u,ut.resolve(o)):i.Ti.allocateTargetId(r).next(f=>(o=new Ys(t,f,"TargetPurposeListen",r.currentSequenceNumber),i.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=i.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.xs=i.xs.insert(r.targetId,r),i.Os.set(t,r.targetId)),r})}async function m1(n,t,i){const r=Vt(n),o=r.xs.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!vo(f))throw f;_t(W1,`Failed to update sequence numbers for target ${t}: ${f}`)}r.xs=r.xs.remove(t),r.Os.delete(o.target)}function o_(n,t,i){const r=Vt(n);let o=Mt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readwrite",f=>function(y,g,v){const b=Vt(y),T=b.Os.get(v);return T!==void 0?ut.resolve(b.xs.get(T)):b.Ti.getTargetData(g,v)}(r,f,xi(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,m.targetId).next(y=>{u=y})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,t,i?o:Mt.min(),i?u:Bt())).next(m=>(PS(r,Sb(t),m),{documents:m,$s:u})))}function PS(n,t,i){let r=n.Ns.get(t)||Mt.min();i.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ns.set(t,r)}class l_{constructor(){this.activeTargetIds=Ib()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jS{constructor(){this.xo=new l_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,i,r){this.Oo[t]=i}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new l_,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="ConnectivityMonitor";class c_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){_t(u_,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){_t(u_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc=null;function g1(){return Kc===null?Kc=function(){return 268435456+Math.round(2147483648*Math.random())}():Kc++,"0x"+Kc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="RestConnection",zS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BS{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=i+"://"+t.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===_h?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(t,i,r,o,u){const f=g1(),m=this.jo(t,i.toUriEncodedString());_t(Rm,`Sending RPC '${t}' ${f}:`,m,r);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:g}=new URL(m),v=j1(g);return this.Jo(t,m,y,r,v).then(b=>(_t(Rm,`Received RPC '${t}' ${f}: `,b),b),b=>{throw ro(Rm,`RPC '${t}' ${f} failed with error: `,b,"url: ",m,"request:",r),b})}Yo(t,i,r,o,u,f){return this.zo(t,i,r,o,u)}Ho(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}jo(t,i){const r=zS[t];return`${this.Ko}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class HS extends BS{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,o,u){const f=g1();return new Promise((m,y)=>{const g=new zv;g.setWithCredentials(!0),g.listenOnce(Bv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case nh.NO_ERROR:const b=g.getResponseJson();_t(ln,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(b)),m(b);break;case nh.TIMEOUT:_t(ln,`RPC '${t}' ${f} timed out`),y(new St(ct.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const T=g.getStatus();if(_t(ln,`RPC '${t}' ${f} failed with status:`,T,"response text:",g.getResponseText()),T>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const U=function(B){const Z=B.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf(Z)>=0?Z:ct.UNKNOWN}(M.status);y(new St(U,M.message))}else y(new St(ct.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new St(ct.UNAVAILABLE,"Connection failed."));break;default:Rt(9055,{h_:t,streamId:f,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{_t(ln,`RPC '${t}' ${f} completed.`)}});const v=JSON.stringify(o);_t(ln,`RPC '${t}' ${f} sending request:`,o),g.send(i,"POST",v,r,15)})}I_(t,i,r){const o=g1(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=Gv(),m=Hv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const v=u.join("");_t(ln,`Creating RPC '${t}' stream ${o}: ${v}`,y);const b=f.createWebChannel(v,y);this.E_(b);let T=!1,R=!1;const M=new qS({Zo:k=>{R?_t(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,k):(T||(_t(ln,`Opening RPC '${t}' stream ${o} transport.`),b.open(),T=!0),_t(ln,`RPC '${t}' stream ${o} sending:`,k),b.send(k))},Xo:()=>b.close()}),U=(k,B,Z)=>{k.listen(B,X=>{try{Z(X)}catch(st){setTimeout(()=>{throw st},0)}})};return U(b,Ll.EventType.OPEN,()=>{R||(_t(ln,`RPC '${t}' stream ${o} transport opened.`),M.__())}),U(b,Ll.EventType.CLOSE,()=>{R||(R=!0,_t(ln,`RPC '${t}' stream ${o} transport closed`),M.u_(),this.d_(b))}),U(b,Ll.EventType.ERROR,k=>{R||(R=!0,ro(ln,`RPC '${t}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),M.u_(new St(ct.UNAVAILABLE,"The operation could not be completed")))}),U(b,Ll.EventType.MESSAGE,k=>{var B;if(!R){const Z=k.data[0];Zt(!!Z,16349);const X=Z,st=(X==null?void 0:X.error)||((B=X[0])===null||B===void 0?void 0:B.error);if(st){_t(ln,`RPC '${t}' stream ${o} received error:`,st);const W=st.status;let Q=function(x){const L=xe[x];if(L!==void 0)return A3(L)}(W),D=st.message;Q===void 0&&(Q=ct.INTERNAL,D="Unknown error status: "+W+" with message "+st.message),R=!0,M.u_(new St(Q,D)),b.close()}else _t(ln,`RPC '${t}' stream ${o} received:`,Z),M.c_(Z)}}),U(m,qv.STAT_EVENT,k=>{k.stat===i1.PROXY?_t(ln,`RPC '${t}' stream ${o} detected buffering proxy`):k.stat===i1.NOPROXY&&_t(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(i=>i===t)}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){return new Yb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(t,i,r=1e3,o=1.5,u=6e4){this.xi=t,this.timerId=i,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const i=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,i-r);o>0&&_t("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="PersistentStream";class U3{constructor(t,i,r,o,u,f,m,y){this.xi=t,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new j3(t,i)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,i){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():i&&i.code===ct.RESOURCE_EXHAUSTED?(fs(i.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):i&&i.code===ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(i)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),i=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===i&&this.z_(r,o)},r=>{t(()=>{const o=new St(ct.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(t,i){const r=this.G_(this.v_);this.stream=this.H_(t,i),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return _t(h_,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return i=>{this.xi.enqueueAndForget(()=>this.v_===t?i():(_t(h_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GS extends U3{constructor(t,i,r,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,o,f),this.serializer=u}H_(t,i){return this.connection.I_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const i=$b(this.serializer,t),r=function(u){if(!("targetChange"in u))return Mt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Mt.min():f.readTime?Di(f.readTime):Mt.min()}(t);return this.listener.Y_(i,r)}Z_(t){const i={};i.database=d1(this.serializer),i.addTarget=function(u,f){let m;const y=f.target;if(m=l1(y)?{documents:Wb(u,y)}:{query:tS(u,y).gt},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=R3(u,f.resumeToken);const g=c1(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Mt.min())>0){m.readTime=Ah(u,f.snapshotVersion.toTimestamp());const g=c1(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,t);const r=nS(this.serializer,t);r&&(i.labels=r),this.Q_(i)}X_(t){const i={};i.database=d1(this.serializer),i.removeTarget=t,this.Q_(i)}}class FS extends U3{constructor(t,i,r,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,i){return this.connection.I_("Write",t,i)}J_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const i=Jb(t.writeResults,t.commitTime),r=Di(t.commitTime);return this.listener.ra(r,i)}ia(){const t={};t.database=d1(this.serializer),this.Q_(t)}ta(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>Zb(this.serializer,r))};this.Q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{}class YS extends QS{constructor(t,i,r,o){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new St(ct.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,i,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(t,h1(i,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new St(ct.UNKNOWN,u.toString())})}Yo(t,i,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Yo(t,h1(i,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new St(ct.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class KS{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(fs(i),this.ua=!1):_t("OnlineStateTracker",i)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="RemoteStore";class XS{constructor(t,i,r,o,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{r.enqueueAndForget(async()=>{ta(this)&&(_t(Zr,"Restarting streams for network reachability change."),await async function(y){const g=Vt(y);g.da.add(4),await _u(g),g.Va.set("Unknown"),g.da.delete(4),await Jh(g)}(this))})}),this.Va=new KS(r,o)}}async function Jh(n){if(ta(n))for(const t of n.Aa)await t(!0)}async function _u(n){for(const t of n.Aa)await t(!1)}function z3(n,t){const i=Vt(n);i.Ea.has(t.targetId)||(i.Ea.set(t.targetId,t),ig(i)?ng(i):Eo(i).N_()&&eg(i,t))}function tg(n,t){const i=Vt(n),r=Eo(i);i.Ea.delete(t),r.N_()&&B3(i,t),i.Ea.size===0&&(r.N_()?r.k_():ta(i)&&i.Va.set("Unknown"))}function eg(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Mt.min())>0){const i=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Eo(n).Z_(t)}function B3(n,t){n.ma.Ke(t),Eo(n).X_(t)}function ng(n){n.ma=new Hb({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),Eo(n).start(),n.Va.ca()}function ig(n){return ta(n)&&!Eo(n).O_()&&n.Ea.size>0}function ta(n){return Vt(n).da.size===0}function q3(n){n.ma=void 0}async function $S(n){n.Va.set("Online")}async function ZS(n){n.Ea.forEach((t,i)=>{eg(n,t)})}async function JS(n,t){q3(n),ig(n)?(n.Va.Pa(t),ng(n)):n.Va.set("Unknown")}async function WS(n,t,i){if(n.Va.set("Online"),t instanceof C3&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ea.delete(m),o.ma.removeTarget(m))}(n,t)}catch(r){_t(Zr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Ch(n,r)}else if(t instanceof ah?n.ma.Xe(t):t instanceof w3?n.ma.ot(t):n.ma.nt(t),!i.isEqual(Mt.min()))try{const r=await P3(n.localStore);i.compareTo(r)>=0&&await function(u,f){const m=u.ma.It(f);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const v=u.Ea.get(g);v&&u.Ea.set(g,v.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,g)=>{const v=u.Ea.get(y);if(!v)return;u.Ea.set(y,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),B3(u,y);const b=new Ys(v.target,y,g,v.sequenceNumber);eg(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(n,i)}catch(r){_t(Zr,"Failed to raise snapshot:",r),await Ch(n,r)}}async function Ch(n,t,i){if(!vo(t))throw t;n.da.add(1),await _u(n),n.Va.set("Offline"),i||(i=()=>P3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{_t(Zr,"Retrying IndexedDB access"),await i(),n.da.delete(1),await Jh(n)})}function H3(n,t){return t().catch(i=>Ch(n,i,t))}async function Wh(n){const t=Vt(n),i=rr(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:B1;for(;tA(t);)try{const o=await LS(t.localStore,r);if(o===null){t.Ia.length===0&&i.k_();break}r=o.batchId,eA(t,o)}catch(o){await Ch(t,o)}G3(t)&&F3(t)}function tA(n){return ta(n)&&n.Ia.length<10}function eA(n,t){n.Ia.push(t);const i=rr(n);i.N_()&&i.ea&&i.ta(t.mutations)}function G3(n){return ta(n)&&!rr(n).O_()&&n.Ia.length>0}function F3(n){rr(n).start()}async function nA(n){rr(n).ia()}async function iA(n){const t=rr(n);for(const i of n.Ia)t.ta(i.mutations)}async function sA(n,t,i){const r=n.Ia.shift(),o=Y1.from(r,t,i);await H3(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Wh(n)}async function rA(n,t){t&&rr(n).ea&&await async function(r,o){if(function(f){return Bb(f)&&f!==ct.ABORTED}(o.code)){const u=r.Ia.shift();rr(r).L_(),await H3(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Wh(r)}}(n,t),G3(n)&&F3(n)}async function f_(n,t){const i=Vt(n);i.asyncQueue.verifyOperationInProgress(),_t(Zr,"RemoteStore received new credentials");const r=ta(i);i.da.add(3),await _u(i),r&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.da.delete(3),await Jh(i)}async function aA(n,t){const i=Vt(n);t?(i.da.delete(2),await Jh(i)):t||(i.da.add(2),await _u(i),i.Va.set("Unknown"))}function Eo(n){return n.fa||(n.fa=function(i,r,o){const u=Vt(i);return u.oa(),new GS(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{e_:$S.bind(null,n),n_:ZS.bind(null,n),i_:JS.bind(null,n),Y_:WS.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),ig(n)?ng(n):n.Va.set("Unknown")):(await n.fa.stop(),q3(n))})),n.fa}function rr(n){return n.ga||(n.ga=function(i,r,o){const u=Vt(i);return u.oa(),new FS(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:nA.bind(null,n),i_:rA.bind(null,n),na:iA.bind(null,n),ra:sA.bind(null,n)}),n.Aa.push(async t=>{t?(n.ga.L_(),await Wh(n)):(await n.ga.stop(),n.Ia.length>0&&(_t(Zr,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,i,r,o,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,o,u){const f=Date.now()+r,m=new sg(t,i,f,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(n,t){if(fs("AsyncQueue",`${t}: ${n}`),vo(n))return new St(ct.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{static emptySet(t){return new no(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||At.comparator(i.key,r.key):(i,r)=>At.comparator(i.key,r.key),this.keyedMap=kl(),this.sortedSet=new ge(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof no)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new no;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.pa=new ge(At.comparator)}track(t){const i=t.doc.key,r=this.pa.get(i);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(i,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(i):t.type===1&&r.type===2?this.pa=this.pa.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):Rt(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(i,t)}wa(){const t=[];return this.pa.inorderTraversal((i,r)=>{t.push(r)}),t}}class co{constructor(t,i,r,o,u,f,m,y,g){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,i,r,o,u){const f=[];return i.forEach(m=>{f.push({type:0,doc:m})}),new co(t,i,no.emptySet(i),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==r[o].type||!i[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class lA{constructor(){this.queries=m_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const o=Vt(i),u=o.queries;o.queries=m_(),u.forEach((f,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new St(ct.ABORTED,"Firestore shutting down"))}}function m_(){return new Wr(n=>h3(n),Qh)}async function Q3(n,t){const i=Vt(n);let r=3;const o=t.query;let u=i.queries.get(o);u?!u.Da()&&t.va()&&(r=2):(u=new oA,r=t.va()?0:1);try{switch(r){case 0:u.ba=await i.onListen(o,!0);break;case 1:u.ba=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(f){const m=rg(f,`Initialization of query '${$a(t.query)}' failed`);return void t.onError(m)}i.queries.set(o,u),u.Sa.push(t),t.Fa(i.onlineState),u.ba&&t.Ma(u.ba)&&ag(i)}async function Y3(n,t){const i=Vt(n),r=t.query;let o=3;const u=i.queries.get(r);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.va()?0:1:!u.Da()&&t.va()&&(o=2))}switch(o){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function uA(n,t){const i=Vt(n);let r=!1;for(const o of t){const u=o.query,f=i.queries.get(u);if(f){for(const m of f.Sa)m.Ma(o)&&(r=!0);f.ba=o}}r&&ag(i)}function cA(n,t,i){const r=Vt(n),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(i);r.queries.delete(t)}function ag(n){n.Ca.forEach(t=>{t.next()})}var p1,g_;(g_=p1||(p1={})).xa="default",g_.Cache="cache";class K3{constructor(t,i,r){this.query=t,this.Oa=i,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new co(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Na?this.La(t)&&(this.Oa.next(t),i=!0):this.ka(t,this.onlineState)&&(this.qa(t),i=!0),this.Ba=t,i}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let i=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),i=!0),i}ka(t,i){if(!t.fromCache||!this.va())return!0;const r=i!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}La(t){if(t.docChanges.length>0)return!0;const i=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}qa(t){t=co.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==p1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(t){this.key=t}}class $3{constructor(t){this.key=t}}class hA{constructor(t,i){this.query=t,this.Ha=i,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Bt(),this.mutatedKeys=Bt(),this.Za=f3(t),this.Xa=new no(this.Za)}get eu(){return this.Ha}tu(t,i){const r=i?i.nu:new d_,o=i?i.Xa:this.Xa;let u=i?i.mutatedKeys:this.mutatedKeys,f=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((v,b)=>{const T=o.get(v),R=Yh(this.query,b)?b:null,M=!!T&&this.mutatedKeys.has(T.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;T&&R?T.data.isEqual(R.data)?M!==U&&(r.track({type:3,doc:R}),k=!0):this.ru(T,R)||(r.track({type:2,doc:R}),k=!0,(y&&this.Za(R,y)>0||g&&this.Za(R,g)<0)&&(m=!0)):!T&&R?(r.track({type:0,doc:R}),k=!0):T&&!R&&(r.track({type:1,doc:T}),k=!0,(y||g)&&(m=!0)),k&&(R?(f=f.add(R),u=U?u.add(v):u.delete(v)):(f=f.delete(v),u=u.delete(v)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const v=this.query.limitType==="F"?f.last():f.first();f=f.delete(v.key),u=u.delete(v.key),r.track({type:1,doc:v})}return{Xa:f,nu:r,Cs:m,mutatedKeys:u}}ru(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,o){const u=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const f=t.nu.wa();f.sort((v,b)=>function(R,M){const U=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt(20277,{Vt:k})}};return U(R)-U(M)}(v.type,b.type)||this.Za(v.doc,b.doc)),this.iu(r),o=o!=null&&o;const m=i&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,g=y!==this.Ja;return this.Ja=y,f.length!==0||g?{snapshot:new co(this.query,t.Xa,u,f,t.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new d_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Bt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const i=[];return t.forEach(r=>{this.Ya.has(r)||i.push(new $3(r))}),this.Ya.forEach(r=>{t.has(r)||i.push(new X3(r))}),i}au(t){this.Ha=t.$s,this.Ya=Bt();const i=this.tu(t.documents);return this.applyChanges(i,!0)}uu(){return co.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const og="SyncEngine";class fA{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class dA{constructor(t){this.key=t,this.cu=!1}}class mA{constructor(t,i,r,o,u,f){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new Wr(m=>h3(m),Qh),this.Pu=new Map,this.Tu=new Set,this.Iu=new ge(At.comparator),this.Eu=new Map,this.du=new $1,this.Au={},this.Ru=new Map,this.Vu=uo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function gA(n,t,i=!0){const r=n4(n);let o;const u=r.hu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await Z3(r,t,i,!0),o}async function pA(n,t){const i=n4(n);await Z3(i,t,!0,!1)}async function Z3(n,t,i,r){const o=await kS(n.localStore,xi(t)),u=o.targetId,f=n.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await yA(n,t,u,f==="current",o.resumeToken)),n.isPrimaryClient&&i&&z3(n.remoteStore,o),m}async function yA(n,t,i,r,o){n.fu=(b,T,R)=>async function(U,k,B,Z){let X=k.view.tu(B);X.Cs&&(X=await o_(U.localStore,k.query,!1).then(({documents:D})=>k.view.tu(D,X)));const st=Z&&Z.targetChanges.get(k.targetId),W=Z&&Z.targetMismatches.get(k.targetId)!=null,Q=k.view.applyChanges(X,U.isPrimaryClient,st,W);return y_(U,k.targetId,Q.ou),Q.snapshot}(n,b,T,R);const u=await o_(n.localStore,t,!0),f=new hA(t,u.$s),m=f.tu(u.documents),y=yu.createSynthesizedTargetChangeForCurrentChange(i,r&&n.onlineState!=="Offline",o),g=f.applyChanges(m,n.isPrimaryClient,y);y_(n,i,g.ou);const v=new fA(t,i,f);return n.hu.set(t,v),n.Pu.has(i)?n.Pu.get(i).push(t):n.Pu.set(i,[t]),g.snapshot}async function _A(n,t,i){const r=Vt(n),o=r.hu.get(t),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(f=>!Qh(f,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await m1(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),i&&tg(r.remoteStore,o.targetId),y1(r,o.targetId)}).catch(_o)):(y1(r,o.targetId),await m1(r.localStore,o.targetId,!0))}async function vA(n,t){const i=Vt(n),r=i.hu.get(t),o=i.Pu.get(r.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),tg(i.remoteStore,r.targetId))}async function EA(n,t,i){const r=RA(n);try{const o=await function(f,m){const y=Vt(f),g=je.now(),v=m.reduce((R,M)=>R.add(M.key),Bt());let b,T;return y.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=ds(),U=Bt();return y.Bs.getEntries(R,v).next(k=>{M=k,M.forEach((B,Z)=>{Z.isValidDocument()||(U=U.add(B))})}).next(()=>y.localDocuments.getOverlayedDocuments(R,M)).next(k=>{b=k;const B=[];for(const Z of m){const X=kb(Z,b.get(Z.key).overlayedDocument);X!=null&&B.push(new lr(Z.key,X,s3(X.value.mapValue),Ii.exists(!0)))}return y.mutationQueue.addMutationBatch(R,g,B,m)}).next(k=>{T=k;const B=k.applyToLocalDocumentSet(b,U);return y.documentOverlayCache.saveOverlays(R,k.batchId,B)})}).then(()=>({batchId:T.batchId,changes:m3(b)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,y){let g=f.Au[f.currentUser.toKey()];g||(g=new ge(Pt)),g=g.insert(m,y),f.Au[f.currentUser.toKey()]=g}(r,o.batchId,i),await vu(r,o.changes),await Wh(r.remoteStore)}catch(o){const u=rg(o,"Failed to persist write");i.reject(u)}}async function J3(n,t){const i=Vt(n);try{const r=await NS(i.localStore,t);t.targetChanges.forEach((o,u)=>{const f=i.Eu.get(u);f&&(Zt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?Zt(f.cu,14607):o.removedDocuments.size>0&&(Zt(f.cu,42227),f.cu=!1))}),await vu(i,r,t)}catch(r){await _o(r)}}function p_(n,t,i){const r=Vt(n);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const o=[];r.hu.forEach((u,f)=>{const m=f.view.Fa(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const y=Vt(f);y.onlineState=m;let g=!1;y.queries.forEach((v,b)=>{for(const T of b.Sa)T.Fa(m)&&(g=!0)}),g&&ag(y)}(r.eventManager,t),o.length&&r.lu.Y_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function TA(n,t,i){const r=Vt(n);r.sharedClientState.updateQueryState(t,"rejected",i);const o=r.Eu.get(t),u=o&&o.key;if(u){let f=new ge(At.comparator);f=f.insert(u,cn.newNoDocument(u,Mt.min()));const m=Bt().add(u),y=new $h(Mt.min(),new Map,new ge(Pt),f,m);await J3(r,y),r.Iu=r.Iu.remove(u),r.Eu.delete(t),lg(r)}else await m1(r.localStore,t,!1).then(()=>y1(r,t,i)).catch(_o)}async function bA(n,t){const i=Vt(n),r=t.batch.batchId;try{const o=await VS(i.localStore,t);t4(i,r,null),W3(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await vu(i,o)}catch(o){await _o(o)}}async function SA(n,t,i){const r=Vt(n);try{const o=await function(f,m){const y=Vt(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return y.mutationQueue.lookupMutationBatch(g,m).next(b=>(Zt(b!==null,37113),v=b.keys(),y.mutationQueue.removeMutationBatch(g,b))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,v,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>y.localDocuments.getDocuments(g,v))})}(r.localStore,t);t4(r,t,i),W3(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await vu(r,o)}catch(o){await _o(o)}}function W3(n,t){(n.Ru.get(t)||[]).forEach(i=>{i.resolve()}),n.Ru.delete(t)}function t4(n,t,i){const r=Vt(n);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(i?u.reject(i):u.resolve(),o=o.remove(t)),r.Au[r.currentUser.toKey()]=o}}function y1(n,t,i=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Pu.get(t))n.hu.delete(r),i&&n.lu.gu(r,i);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(r=>{n.du.containsKey(r)||e4(n,r)})}function e4(n,t){n.Tu.delete(t.path.canonicalString());const i=n.Iu.get(t);i!==null&&(tg(n.remoteStore,i),n.Iu=n.Iu.remove(t),n.Eu.delete(i),lg(n))}function y_(n,t,i){for(const r of i)r instanceof X3?(n.du.addReference(r.key,t),AA(n,r)):r instanceof $3?(_t(og,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,t),n.du.containsKey(r.key)||e4(n,r.key)):Rt(19791,{pu:r})}function AA(n,t){const i=t.key,r=i.path.canonicalString();n.Iu.get(i)||n.Tu.has(r)||(_t(og,"New document in limbo: "+i),n.Tu.add(r),lg(n))}function lg(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const i=new At(he.fromString(t)),r=n.Vu.next();n.Eu.set(r,new dA(i)),n.Iu=n.Iu.insert(i,r),z3(n.remoteStore,new Ys(xi(Fh(i.path)),r,"TargetPurposeLimboResolution",Bh.le))}}async function vu(n,t,i){const r=Vt(n),o=[],u=[],f=[];r.hu.isEmpty()||(r.hu.forEach((m,y)=>{f.push(r.fu(y,t,i).then(g=>{var v;if((g||i)&&r.isPrimaryClient){const b=g?!g.fromCache:(v=i==null?void 0:i.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(g){o.push(g);const b=J1.Rs(y.targetId,g);u.push(b)}}))}),await Promise.all(f),r.lu.Y_(o),await async function(y,g){const v=Vt(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ut.forEach(g,T=>ut.forEach(T.ds,R=>v.persistence.referenceDelegate.addReference(b,T.targetId,R)).next(()=>ut.forEach(T.As,R=>v.persistence.referenceDelegate.removeReference(b,T.targetId,R)))))}catch(b){if(!vo(b))throw b;_t(W1,"Failed to update sequence numbers: "+b)}for(const b of g){const T=b.targetId;if(!b.fromCache){const R=v.xs.get(T),M=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(M);v.xs=v.xs.insert(T,U)}}}(r.localStore,u))}async function wA(n,t){const i=Vt(n);if(!i.currentUser.isEqual(t)){_t(og,"User change. New user:",t.toKey());const r=await k3(i.localStore,t);i.currentUser=t,function(u,f){u.Ru.forEach(m=>{m.forEach(y=>{y.reject(new St(ct.CANCELLED,f))})}),u.Ru.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await vu(i,r.ks)}}function CA(n,t){const i=Vt(n),r=i.Eu.get(t);if(r&&r.cu)return Bt().add(r.key);{let o=Bt();const u=i.Pu.get(t);if(!u)return o;for(const f of u){const m=i.hu.get(f);o=o.unionWith(m.view.eu)}return o}}function n4(n){const t=Vt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=J3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=CA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TA.bind(null,t),t.lu.Y_=uA.bind(null,t.eventManager),t.lu.gu=cA.bind(null,t.eventManager),t}function RA(n){const t=Vt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=SA.bind(null,t),t}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,i){return null}Cu(t,i){return null}Du(t){return MS(this.persistence,new xS,t.initialUser,this.serializer)}Su(t){return new L3(Z1.fi,this.serializer)}bu(t){return new jS}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class xA extends Rh{constructor(t){super(),this.cacheSizeBytes=t}vu(t,i){Zt(this.persistence.referenceDelegate instanceof wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dS(r,t.asyncQueue,i)}Su(t){const i=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new L3(r=>wh.fi(r,i),this.serializer)}}class _1{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wA.bind(null,this.syncEngine),await aA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new lA}()}createDatastore(t){const i=Zh(t.databaseInfo.databaseId),r=function(u){return new HS(u)}(t.databaseInfo);return function(u,f,m,y){return new YS(u,f,m,y)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,u,f,m){return new XS(r,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,i=>p_(this.syncEngine,i,0),function(){return c_.C()?new c_:new US}())}createSyncEngine(t,i){return function(o,u,f,m,y,g,v){const b=new mA(o,u,f,m,y,g);return v&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(o){const u=Vt(o);_t(Zr,"RemoteStore shutting down."),u.da.add(5),await _u(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}_1.provider={build:()=>new _1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):fs("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="FirestoreClient";class IA{constructor(t,i,r,o,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=Kv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{_t(ar,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(_t(ar,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=rg(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Im(n,t){n.asyncQueue.verifyOperationInProgress(),_t(ar,"Initializing OfflineComponentProvider");const i=n.configuration;await t.initialize(i);let r=i.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await k3(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function __(n,t){n.asyncQueue.verifyOperationInProgress();const i=await DA(n);_t(ar,"Initializing OnlineComponentProvider"),await t.initialize(i,n.configuration),n.setCredentialChangeListener(r=>f_(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>f_(t.remoteStore,o)),n._onlineComponents=t}async function DA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_t(ar,"Using user provided OfflineComponentProvider");try{await Im(n,n._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(o){return o.name==="FirebaseError"?o.code===ct.FAILED_PRECONDITION||o.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;ro("Error using user provided cache. Falling back to memory cache: "+i),await Im(n,new Rh)}}else _t(ar,"Using default OfflineComponentProvider"),await Im(n,new xA(void 0));return n._offlineComponents}async function s4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_t(ar,"Using user provided OnlineComponentProvider"),await __(n,n._uninitializedComponentsProvider._online)):(_t(ar,"Using default OnlineComponentProvider"),await __(n,new _1))),n._onlineComponents}function MA(n){return s4(n).then(t=>t.syncEngine)}async function v1(n){const t=await s4(n),i=t.eventManager;return i.onListen=gA.bind(null,t.syncEngine),i.onUnlisten=_A.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=pA.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=vA.bind(null,t.syncEngine),i}function VA(n,t,i={}){const r=new Ws;return n.asyncQueue.enqueueAndForget(async()=>function(u,f,m,y,g){const v=new i4({next:T=>{v.xu(),f.enqueueAndForget(()=>Y3(u,b));const R=T.docs.has(m);!R&&T.fromCache?g.reject(new St(ct.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&y&&y.source==="server"?g.reject(new St(ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new K3(Fh(m.path),v,{includeMetadataChanges:!0,Qa:!0});return Q3(u,b)}(await v1(n),n.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n,t,i){if(!i)throw new St(ct.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function NA(n,t,i,r){if(t===!0&&r===!0)throw new St(ct.INVALID_ARGUMENT,`${n} and ${i} cannot be used together.`)}function E_(n){if(!At.isDocumentKey(n))throw new St(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T_(n){if(At.isDocumentKey(n))throw new St(ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ug(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Rt(12329,{type:typeof n})}function us(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new St(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=ug(n);throw new St(ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="firestore.googleapis.com",b_=!0;class S_{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new St(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o4,this.ssl=b_}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:b_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=O3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<hS)throw new St(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}NA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r4((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new St(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new St(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new St(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tf{constructor(t,i,r,o){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new St(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B7;switch(r.type){case"firstParty":return new F7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=v_.get(i);r&&(_t("ComponentProvider","Removing Datastore"),v_.delete(i),r.terminate())}(this),Promise.resolve()}}function OA(n,t,i,r={}){var o;n=us(n,tf);const u=j1(t),f=n._getSettings(),m=Object.assign(Object.assign({},f),{emulatorOptions:n._getEmulatorOptions()}),y=`${t}:${i}`;u&&(mT(`https://${y}`),_T("Firestore",!0)),f.host!==o4&&f.host!==y&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},f),{host:y,ssl:u,emulatorOptions:r});if(!mh(g,m)&&(n._setSettings(g),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=un.MOCK_USER;else{v=gT(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new St(ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new un(T)}n._authCredentials=new q7(new Qv(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ef(this.firestore,t,this._query)}}class Sn{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Sn(this.firestore,t,this._key)}}class tr extends ef{constructor(t,i,r){super(t,i,Fh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Sn(this.firestore,null,new At(t))}withConverter(t){return new tr(this.firestore,t,this._path)}}function LA(n,t,...i){if(n=cs(n),a4("collection","path",t),n instanceof tf){const r=he.fromString(t,...i);return T_(r),new tr(n,null,r)}{if(!(n instanceof Sn||n instanceof tr))throw new St(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(he.fromString(t,...i));return T_(r),new tr(n.firestore,null,r)}}function nf(n,t,...i){if(n=cs(n),arguments.length===1&&(t=Kv.newId()),a4("doc","path",t),n instanceof tf){const r=he.fromString(t,...i);return E_(r),new Sn(n,null,new At(r))}{if(!(n instanceof Sn||n instanceof tr))throw new St(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(he.fromString(t,...i));return E_(r),new Sn(n.firestore,n instanceof tr?n.converter:null,new At(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="AsyncQueue";class w_{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new j3(this,"async_queue_retry"),this.rc=()=>{const r=xm();r&&_t(A_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const i=xm();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const i=xm();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const i=new Ws;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!vo(t))throw t;_t(A_,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const i=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,fs("INTERNAL UNHANDLED ERROR: ",C_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=i,i}enqueueAfterDelay(t,i,r){this.oc(),this.nc.indexOf(t)>-1&&(i=0);const o=sg.createAndSchedule(this,t,i,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Rt(47125,{cc:C_(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const i of this.Zu)if(i.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.Zu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const i=this.Zu.indexOf(t);this.Zu.splice(i,1)}}function C_(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n){return function(i,r){if(typeof i!="object"||i===null)return!1;const o=i;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(n,["next","error","complete"])}class ho extends tf{constructor(t,i,r,o){super(t,i,r,o),this.type="firestore",this._queue=new w_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new w_(t),this._firestoreClient=void 0,await t}}}function kA(n,t){const i=typeof n=="object"?n:x7(),r=typeof n=="string"?n:_h,o=S7(i,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=fT("firestore");u&&OA(o,...u)}return o}function cg(n){if(n._terminated)throw new St(ct.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PA(n),n._firestoreClient}function PA(n){var t,i,r;const o=n._freezeSettings(),u=function(m,y,g,v){return new ab(m,y,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,r4(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new IA(n._authCredentials,n._appCheckCredentials,n._queue,u,n._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new fo(nn.fromBase64String(t))}catch(i){throw new St(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new fo(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new St(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new St(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new St(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=/^__.*__$/;class UA{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new lr(t,this.data,this.fieldMask,i,this.fieldTransforms):new pu(t,this.data,i,this.fieldTransforms)}}class l4{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new lr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function u4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt(40011,{Ic:n})}}class mg{constructor(t,i,r,o,u,f){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new mg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Vc(t),o}mc(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return xh(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(u4(this.Ic)&&jA.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class zA{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Zh(t)}bc(t,i,r,o=!1){return new mg({Ic:t,methodName:i,wc:r,path:en.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c4(n){const t=n._freezeSettings(),i=Zh(n._databaseId);return new zA(n._databaseId,!!t.ignoreUndefinedProperties,i)}function BA(n,t,i,r,o,u={}){const f=n.bc(u.merge||u.mergeFields?2:0,t,i,o);gg("Data must be an object, but it was:",f,r);const m=h4(r,f);let y,g;if(u.merge)y=new kn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const v=[];for(const b of u.mergeFields){const T=E1(t,b,i);if(!f.contains(T))throw new St(ct.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);d4(v,T)||v.push(T)}y=new kn(v),g=f.fieldTransforms.filter(b=>y.covers(b.field))}else y=null,g=f.fieldTransforms;return new UA(new bn(m),y,g)}class rf extends hg{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rf}}function qA(n,t,i,r){const o=n.bc(1,t,i);gg("Data must be an object, but it was:",o,r);const u=[],f=bn.empty();or(r,(y,g)=>{const v=pg(t,y,i);g=cs(g);const b=o.mc(v);if(g instanceof rf)u.push(v);else{const T=af(g,b);T!=null&&(u.push(v),f.set(v,T))}});const m=new kn(u);return new l4(f,m,o.fieldTransforms)}function HA(n,t,i,r,o,u){const f=n.bc(1,t,i),m=[E1(t,r,i)],y=[o];if(u.length%2!=0)throw new St(ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(E1(t,u[T])),y.push(u[T+1]);const g=[],v=bn.empty();for(let T=m.length-1;T>=0;--T)if(!d4(g,m[T])){const R=m[T];let M=y[T];M=cs(M);const U=f.mc(R);if(M instanceof rf)g.push(R);else{const k=af(M,U);k!=null&&(g.push(R),v.set(R,k))}}const b=new kn(g);return new l4(v,b,f.fieldTransforms)}function af(n,t){if(f4(n=cs(n)))return gg("Unsupported field value:",t,n),h4(n,t);if(n instanceof hg)return function(r,o){if(!u4(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let y=af(m,o.fc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(n,t)}return function(r,o){if((r=cs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Db(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=je.fromDate(r);return{timestampValue:Ah(o.serializer,u)}}if(r instanceof je){const u=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ah(o.serializer,u)}}if(r instanceof fg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:R3(o.serializer,r._byteString)};if(r instanceof Sn){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:X1(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof dg)return function(f,m){return{mapValue:{fields:{[n3]:{stringValue:i3},[vh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Q1(m.serializer,g)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${ug(r)}`)}(n,t)}function h4(n,t){const i={};return $v(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):or(n,(r,o)=>{const u=af(o,t.Ac(r));u!=null&&(i[r]=u)}),{mapValue:{fields:i}}}function f4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof fg||n instanceof fo||n instanceof Sn||n instanceof hg||n instanceof dg)}function gg(n,t,i){if(!f4(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const r=ug(i);throw r==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+r)}}function E1(n,t,i){if((t=cs(t))instanceof sf)return t._internalPath;if(typeof t=="string")return pg(n,t);throw xh("Field path arguments must be of type string or ",n,!1,void 0,i)}const GA=new RegExp("[~\\*/\\[\\]]");function pg(n,t,i){if(t.search(GA)>=0)throw xh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,i);try{return new sf(...t.split("."))._internalPath}catch{throw xh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,i)}}function xh(n,t,i,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new St(ct.INVALID_ARGUMENT,m+n+y)}function d4(n,t){return n.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(t,i,r,o,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new FA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(g4("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class FA extends m4{data(){return super.data()}}function g4(n,t){return typeof t=="string"?pg(n,t):t instanceof sf?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new St(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YA{convertValue(t,i="none"){switch(sr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Se(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(ir(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Rt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return or(t,(o,u)=>{r[o]=this.convertValue(u,i)}),r}convertVectorValue(t){var i,r,o;const u=(o=(r=(i=t.fields)===null||i===void 0?void 0:i[vh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>Se(f.doubleValue));return new dg(u)}convertGeoPoint(t){return new fg(Se(t.latitude),Se(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Hh(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(au(t));default:return null}}convertTimestamp(t){const i=nr(t);return new je(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=he.fromString(t);Zt(N3(r),9688,{name:t});const o=new ou(r.get(1),r.get(3)),u=new At(r.popFirst(5));return o.isEqual(i)||fs(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(n,t,i){let r;return r=n?n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class p4 extends m4{constructor(t,i,r,o,u,f){super(t,i,r,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(g4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}}class oh extends p4{data(t={}){return super.data(t)}}class XA{constructor(t,i,r,o){this._firestore=t,this._userDataWriter=i,this._snapshot=o,this.metadata=new jl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new oh(this._firestore,this._userDataWriter,r.key,r,new jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new St(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const y=new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new oh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),v=f.indexOf(m.doc.key)),{type:$A(m.type),doc:y,oldIndex:g,newIndex:v}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function $A(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){n=us(n,Sn);const t=us(n.firestore,ho);return VA(cg(t),n._key).then(i=>v4(t,n,i))}class y4 extends YA{constructor(t){super(),this.firestore=t}convertBytes(t){return new fo(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new Sn(this.firestore,null,i)}}function JA(n,t,i,...r){n=us(n,Sn);const o=us(n.firestore,ho),u=c4(o);let f;return f=typeof(t=cs(t))=="string"||t instanceof sf?HA(u,"updateDoc",n._key,t,i,r):qA(u,"updateDoc",n._key,t),_4(o,[f.toMutation(n._key,Ii.exists(!0))])}function WA(n,t){const i=us(n.firestore,ho),r=nf(n),o=KA(n.converter,t);return _4(i,[BA(c4(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Ii.exists(!1))]).then(()=>r)}function t8(n,...t){var i,r,o;n=cs(n);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof t[f]!="object"||R_(t[f])||(u=t[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(R_(t[f])){const b=t[f];t[f]=(i=b.next)===null||i===void 0?void 0:i.bind(b),t[f+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),t[f+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let y,g,v;if(n instanceof Sn)g=us(n.firestore,ho),v=Fh(n._key.path),y={next:b=>{t[f]&&t[f](v4(g,n,b))},error:t[f+1],complete:t[f+2]};else{const b=us(n,ef);g=us(b.firestore,ho),v=b._query;const T=new y4(g);y={next:R=>{t[f]&&t[f](new XA(g,T,b,R))},error:t[f+1],complete:t[f+2]},QA(n._query)}return function(T,R,M,U){const k=new i4(U),B=new K3(R,k,M);return T.asyncQueue.enqueueAndForget(async()=>Q3(await v1(T),B)),()=>{k.xu(),T.asyncQueue.enqueueAndForget(async()=>Y3(await v1(T),B))}}(cg(g),v,m,y)}function _4(n,t){return function(r,o){const u=new Ws;return r.asyncQueue.enqueueAndForget(async()=>EA(await MA(r),o,u)),u.promise}(cg(n),t)}function v4(n,t,i){const r=i.docs.get(t._key),o=new y4(n);return new p4(n,o,t._key,r,new jl(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(o){yo=o})(R7),ph(new iu("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new ho(new H7(r.getProvider("auth-internal")),new Q7(f,r.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new St(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(g.options.projectId,v)}(f,o),f);return u=Object.assign({useFetchStreams:i},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),eo(M2,V2,t),eo(M2,V2,"esm2017")})();const e8={apiKey:"AIzaSyA1YHZuK7xQzrGf2sVPo8Qax__FqLaFg_g",authDomain:"boop-chat.firebaseapp.com",projectId:"boop-chat",storageBucket:"boop-chat.firebasestorage.app",messagingSenderId:"86390385381",appId:"1:86390385381:web:899e240ed5dedab2a8c20c",measurementId:"G-R49YGVYMFQ"},n8=kv(e8),of=kA(n8),i8=async n=>(await WA(LA(of,"sessions"),n)).id,s8=async n=>{const t=await ZA(nf(of,"sessions",n));return t.exists()?(console.log("The data has been found at Firestore!"),t.data()):(console.log("The data doesn't exist at Firestore!"),null)},r8=async(n,t)=>{JA(nf(of,"sessions",n),t)},a8=async(n,t,i)=>{const r=nf(of,"sessions",n),o=t8(r,async u=>{var m;if(!u.exists())return;const f=u.data();f.receiverDescription&&((m=f.receiverCandidates)==null?void 0:m.length)>0&&(console.log("Receiver info available:",f),i.current=f.receiverName,t(f),o())});return o},x_=async(n,t,i,r,o,u,f,m,y)=>{console.log(t.current),t.current.onicecandidate=v=>{v.candidate?(console.log("Ice candidate found! Candidate = ",v.candidate),console.log(u.current),u.current.push(v.candidate.toJSON())):(console.log("The ice gathering state might have been completed by this time!"),console.log("State = ",t.current.iceGatheringState))},t.current.onicecandidateerror=v=>{console.warn("ICE candidate error:",v.errorCode,v.port,v.url)};const g=t.current.getConfiguration();if(console.log("ICE servers configured on this PC:",g.iceServers),n==="sender"){t.current.addTransceiver("video",{direction:"sendrecv"}),t.current.addTransceiver("audio",{direction:"sendrecv"}),i.current=t.current.createDataChannel("chat"),r.current=t.current.createDataChannel("image"),o.current=t.current.createDataChannel("video"),i.current.onopen=()=>{console.log("The data channel has been established!"),f(!0)},r.current.onopen=()=>{console.log("The image channel has been established!")},o.current.onopen=()=>{console.log("The video channel has been established!")};let v=await t.current.createOffer();console.log("The offer has been created!"),await t.current.setLocalDescription(v),console.log("The local description has been added!")}else{console.log(t.current);let v=await s8(y);if(!v)return null;m.current=v.senderName,await o8(t,v),console.log("The state of the peer connection = ",t.current.iceGatheringState)}console.log("The initial setup of the connection has been established.")},o8=async(n,t)=>{console.log(t.senderDescription),await n.current.setRemoteDescription(t.senderDescription),console.log("The remote description has been added!"),n.current.getTransceivers().forEach(o=>{o.direction="sendrecv"});let r=await n.current.createAnswer();console.log("The answer has been created!"),await n.current.setLocalDescription(r),console.log("The local description has been added!");for(const o of t.senderCandidates)try{await n.current.addIceCandidate(o)}catch(u){console.error("Error adding ICE candidate:",u)}};async function l8(n,t,i,r){console.log("Starting the createLink function! At the beginning of the function, the state = ",n.iceGatheringState),console.log("The iceCandidate object looks like this: ",t.current);let o=await i8({senderName:i,senderDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},senderCandidates:t.current,receiverName:"",receiverDescription:"",receiverCandidates:""});return console.log("The session has been added to Firebase by the sender! Now, waiting for the receiver!"),a8(o,async u=>{await n.current.setRemoteDescription(new RTCSessionDescription(u.receiverDescription));for(const f of u.receiverCandidates)await n.current.addIceCandidate(new RTCIceCandidate(f))},r),o}async function u8(n,t,i,r){return console.log("After the waiting, the state = ",n.current.iceGatheringState),await r8(r,{receiverName:i,receiverDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},receiverCandidates:t.current}),"success"}const c8=new URLSearchParams(window.location.search),Hs=c8.get("link"),h8=()=>{const{peerConnection:n,iceCandidates:t,dataChannel:i,imageChannel:r,videoChannel:o,peerName:u,setConnected:f}=$.useContext(An),{showNotification:m}=gu(),[y,g]=$.useState(!1),v=$.useRef(null);function b(R){R.preventDefault(),navigator.clipboard.writeText(R.target.elements.link.value),m("The link has been copied!")}const T=async R=>{if(R.preventDefault(),g(!0),Hs){let M=await u8(n,t,v.current.value,Hs);console.log(M),M?M=="success"&&(n.current.ondatachannel=U=>{U.channel.label==="chat"&&(i.current=U.channel,console.log("The data channel has been established!"),f(!0)),U.channel.label==="image"&&(r.current=U.channel,console.log("The image channel has been established!")),U.channel.label==="video"&&(o.current=U.channel,console.log("The video channel has been established!"))}):alert("The link you gave doesn't exist.")}else{let M=await l8(n,t,v.current.value,u);v.current.value=`https://www.mukesharyal.com.np/boop?link=${M}`,v.current.disabled=!0,navigator.clipboard.writeText(v.current.value),m("The link has been copied!")}};return $.useEffect(()=>{x_(Hs?"receiver":"sender",n,i,r,o,t,f,u,Hs)},[]),C.jsxs(C.Fragment,{children:[C.jsx($E,{}),C.jsx("main",{className:Vl.mainContainer,children:C.jsx("section",{className:Vl.inputCard,children:y?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:Vl.loaderWrapper,children:C.jsx("div",{className:Vl.loader})}),C.jsx("h1",{children:Hs?"Joining the chat":"Waiting for other person to join"}),!Hs&&C.jsxs("form",{onSubmit:b,children:[C.jsx("input",{autoFocus:!0,spellCheck:!1,autoComplete:"off",name:"link",ref:v,title:"Copy this link",className:Vl.linkInput}),C.jsx("br",{}),C.jsx("button",{name:"copyLinkButton",children:"Copy Link"})]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("h1",{children:["Welcome to Boop.",C.jsx("br",{}),"Let's Get Started!"]}),C.jsxs("form",{onSubmit:T,children:[C.jsx("input",{name:"name",required:!0,minLength:2,maxLength:20,autoComplete:"off",type:"text",spellCheck:!1,placeholder:"Your Name",title:"Enter your name",id:"name",ref:v}),C.jsx("br",{}),Hs?C.jsx("button",{type:"submit",children:"Join Chat"}):C.jsx("button",{type:"submit",children:"Create Link"})]})]})})})]})},f8="_chatPage_bg303_1",d8="_videoContainer_bg303_6",m8="_settingsContainer_bg303_11",g8="_chatContainer_bg303_17",Xc={chatPage:f8,videoContainer:d8,settingsContainer:m8,chatContainer:g8},p8="_actionList_1e7p7_1",y8="_sent_1e7p7_21",_8="_received_1e7p7_25",Dm={actionList:p8,sent:y8,received:_8};function v8(){const n=De.c(26);console.log("Actions List rendered!");const{dataChannel:t}=$.useContext(An),{selectedMessage:i}=$.useContext(Jn),r=Lt(T8),o=Lt(E8),{showNotification:u}=gu();let f;n[0]!==i.current.content||n[1]!==i.current.type||n[2]!==u?(f=()=>{i.current.type==="text"?(navigator.clipboard.writeText(i.current.content),u("The message has been copied!")):u("This message cannot be copied!")},n[0]=i.current.content,n[1]=i.current.type,n[2]=u,n[3]=f):f=n[3];const m=f;let y;n[4]!==i.current||n[5]!==r?(y=()=>{r(i.current)},n[4]=i.current,n[5]=r,n[6]=y):y=n[6];const g=y;let v;n[7]!==t||n[8]!==o||n[9]!==i.current.receivedId||n[10]!==i.current.sentId?(v=()=>{if(i.current.sentId===null)o(i.current.sentId,i.current.receivedId);else{const st={type:"delete",sentId:i.current.sentId};t.current.send(JSON.stringify(st))}},n[7]=t,n[8]=o,n[9]=i.current.receivedId,n[10]=i.current.sentId,n[11]=v):v=n[11];const b=v,T=`${Dm.actionList} ${i.current.sentId===null?Dm.received:Dm.sent}`;let R;n[12]===Symbol.for("react.memo_cache_sentinel")?(R=C.jsxs("svg",{fill:"#000000",width:"2rem",height:"2rem",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"reply"}),C.jsx("path",{d:"M3.488 15.136q0 0.96 0.8 1.472l10.72 7.136q0.416 0.288 0.896 0.32t0.928-0.224 0.704-0.672 0.256-0.896v-3.584q3.456 0 6.208 1.984t3.872 5.152q0.64-1.792 0.64-3.552 0-2.912-1.44-5.376t-3.904-3.904-5.376-1.44v-3.584q0-0.48-0.256-0.896t-0.704-0.672-0.928-0.224-0.896 0.32l-10.72 7.136q-0.8 0.512-0.8 1.504z"})]}),n[12]=R):R=n[12];let M;n[13]!==g?(M=C.jsxs("li",{onClick:g,children:[R,"Reply"]}),n[13]=g,n[14]=M):M=n[14];let U;n[15]===Symbol.for("react.memo_cache_sentinel")?(U=C.jsxs("svg",{width:"2rem",height:"2rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z",fill:"#292D32"}),C.jsx("path",{d:"M17.0998 2H12.8998C9.81668 2 8.37074 3.09409 8.06951 5.73901C8.00649 6.29235 8.46476 6.75 9.02167 6.75H11.0998C15.2998 6.75 17.2498 8.7 17.2498 12.9V14.9781C17.2498 15.535 17.7074 15.9933 18.2608 15.9303C20.9057 15.629 21.9998 14.1831 21.9998 11.1V6.9C21.9998 3.4 20.5998 2 17.0998 2Z",fill:"#292D32"})]}),n[15]=U):U=n[15];let k;n[16]!==m?(k=C.jsxs("li",{onClick:m,children:[U,"Copy"]}),n[16]=m,n[17]=k):k=n[17];let B;n[18]===Symbol.for("react.memo_cache_sentinel")?(B=C.jsx("svg",{width:"2rem",height:"2rem",viewBox:"-0.5 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"out",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:C.jsx("path",{d:"M4.91666667,14.8888889 C4.91666667,15.3571429 5.60416667,16 6.0625,16 L12.9375,16 C13.3958333,16 14.0833333,15.3571429 14.0833333,14.8888889 L14.0833333,6 L4.91666667,6 L4.91666667,14.8888889 L4.91666667,14.8888889 L4.91666667,14.8888889 Z M15,3.46500003 L12.5555556,3.46500003 L11.3333333,2 L7.66666667,2 L6.44444444,3.46500003 L4,3.46500003 L4,4.93000007 L15,4.93000007 L15,3.46500003 L15,3.46500003 L15,3.46500003 Z",id:"path",fill:"#000000","sketch:type":"MSShapeGroup"})})}),n[18]=B):B=n[18];let Z;n[19]!==b?(Z=C.jsxs("li",{onClick:b,children:[B,"Delete"]}),n[19]=b,n[20]=Z):Z=n[20];let X;return n[21]!==T||n[22]!==M||n[23]!==k||n[24]!==Z?(X=C.jsxs("ul",{className:T,children:[M,k,Z]}),n[21]=T,n[22]=M,n[23]=k,n[24]=Z,n[25]=X):X=n[25],X}function E8(n){return n.removeMessage}function T8(n){return n.setReplying}const b8="_reactionList_gp7tf_1",S8="_selectedReaction_gp7tf_29",I_={reactionList:b8,selectedReaction:S8},A8=["","","","","",""];function w8(){const n=De.c(12);console.log("Reactions list rendered!");const{dataChannel:t}=$.useContext(An),{selectedMessage:i,pointerPosition:r}=$.useContext(Jn);let o=r.current.y-70,u=r.current.x-90;o<0&&(o=10),u<0&&(u=10);let f;n[0]!==t||n[1]!==i?(f=b=>{b===i.current.reaction&&(b=-1);const R={type:"reaction",id:i.current.receivedId,reaction:b};t.current.send(JSON.stringify(R))},n[0]=t,n[1]=i,n[2]=f):f=n[2];const m=f;let y;n[3]!==u||n[4]!==o?(y={top:o,left:u},n[3]=u,n[4]=o,n[5]=y):y=n[5];let g;n[6]!==i||n[7]!==m?(g=A8.map((b,T)=>C.jsx("li",{onClick:()=>{m(T)},className:i.current.reaction===T?I_.selectedReaction:"",children:b},T)),n[6]=i,n[7]=m,n[8]=g):g=n[8];let v;return n[9]!==y||n[10]!==g?(v=C.jsx("ul",{className:I_.reactionList,style:y,children:g}),n[9]=y,n[10]=g,n[11]=v):v=n[11],v}const C8="_replyInfo_oczyu_1",R8="_replyingTo_oczyu_34",x8="_selectedMessage_oczyu_39",$c={replyInfo:C8,replyingTo:R8,selectedMessage:x8};function I8(){const n=De.c(15),{peerName:t}=$.useContext(An),{selectedMessage:i}=$.useContext(Jn),r=Lt(D8),o=i.current.receivedId===null?"yourself":t.current,u=i.current.type==="image"?"Image":i.current.content;let f;n[0]!==r?(f=()=>{r(null)},n[0]=r,n[1]=f):f=n[1];const m=f;let y;n[2]!==o?(y=C.jsxs("p",{className:$c.replyingTo,children:["Replying to ",o]}),n[2]=o,n[3]=y):y=n[3];let g;n[4]!==u?(g=C.jsx("p",{className:$c.selectedMessage,children:u}),n[4]=u,n[5]=g):g=n[5];let v;n[6]!==y||n[7]!==g?(v=C.jsxs("div",{className:$c.messageContents,children:[y,g]}),n[6]=y,n[7]=g,n[8]=v):v=n[8];let b;n[9]===Symbol.for("react.memo_cache_sentinel")?(b=C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"}),n[9]=b):b=n[9];let T;n[10]!==m?(T=C.jsx("svg",{width:"1rem",height:"1rem",onClick:m,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:b}),n[10]=m,n[11]=T):T=n[11];let R;return n[12]!==v||n[13]!==T?(R=C.jsxs("div",{className:$c.replyInfo,children:[v,T]}),n[12]=v,n[13]=T,n[14]=R):R=n[14],R}function D8(n){return n.setReplying}const M8="_sent_1wqkl_15",V8="_received_1wqkl_19",N8="_actionsContainer_1wqkl_28",Mm={sent:M8,received:V8,actionsContainer:N8};function O8(n){const t=De.c(16),{imageSource:i,imageAlt:r,imageSent:o}=n,u=r===void 0?"Image":r;console.log("Image dialog rendered!");const f=Lt(k8),m=$.useRef(null),y=L8;let g;t[0]!==i?(g=()=>{window.open(i,"_blank")},t[0]=i,t[1]=g):g=t[1];const v=g;let b;t[2]!==f?(b=()=>{const X=m.current;if(!X)return;const st=Q=>{Q.target===X&&y()},W=()=>{f(null)};return X.addEventListener("click",st),window.addEventListener("popstate",W),()=>{X.removeEventListener("click",st),window.removeEventListener("popstate",W)}},t[2]=f,t[3]=b):b=t[3];let T;t[4]===Symbol.for("react.memo_cache_sentinel")?(T=[],t[4]=T):T=t[4],$.useEffect(b,T);const R=o?Mm.sent:Mm.received;let M;t[5]===Symbol.for("react.memo_cache_sentinel")?(M=C.jsx("button",{onClick:y,children:C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),t[5]=M):M=t[5];let U;t[6]===Symbol.for("react.memo_cache_sentinel")?(U=C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.163 2.819C9 3.139 9 3.559 9 4.4V11H7.803c-.883 0-1.325 0-1.534.176a.75.75 0 0 0-.266.62c.017.274.322.593.931 1.232l4.198 4.401c.302.318.453.476.63.535a.749.749 0 0 0 .476 0c.177-.059.328-.217.63-.535l4.198-4.4c.61-.64.914-.96.93-1.233a.75.75 0 0 0-.265-.62C17.522 11 17.081 11 16.197 11H15V4.4c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656C13.861 2 13.441 2 12.6 2h-1.2c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656zM5 21a1 1 0 0 0 1 1h12a1 1 0 1 0 0-2H6a1 1 0 0 0-1 1z",fill:"#000000"})}),t[6]=U):U=t[6];let k;t[7]!==v?(k=C.jsxs("div",{className:Mm.actionsContainer,children:[M,C.jsx("button",{onClick:v,children:U})]}),t[7]=v,t[8]=k):k=t[8];let B;t[9]!==u||t[10]!==i?(B=C.jsx("img",{src:i,alt:u}),t[9]=u,t[10]=i,t[11]=B):B=t[11];let Z;return t[12]!==R||t[13]!==k||t[14]!==B?(Z=C.jsxs("dialog",{ref:m,className:R,children:[k,B]}),t[12]=R,t[13]=k,t[14]=B,t[15]=Z):Z=t[15],Z}function L8(){window.history.back()}function k8(n){return n.setImageDialog}const P8="_navContainer_jqxvx_1",j8="_profileContainer_jqxvx_17",U8="_actionsContainer_jqxvx_31",Nl={navContainer:P8,profileContainer:j8,actionsContainer:U8};function z8(){const n=De.c(17);console.log("Chat header rendered!");const{peerName:t}=$.useContext(An),i=Lt(H8),r=Lt(q8),[o]=$.useState(!1);let u;n[0]===Symbol.for("react.memo_cache_sentinel")?(u={y:100,opacity:0},n[0]=u):u=n[0];let f;n[1]===Symbol.for("react.memo_cache_sentinel")?(f={y:0,opacity:1,config:{tension:300,friction:25}},n[1]=f):f=n[1];let m;n[2]===Symbol.for("react.memo_cache_sentinel")?(m={from:u,enter:f,leave:{y:100,opacity:0,config:{tension:300,friction:25}}},n[2]=m):m=n[2],r6(o,m);let y;n[3]!==r?(y=()=>{r("idle")},n[3]=r,n[4]=y):y=n[4];const g=y,v=B8;let b;n[5]===Symbol.for("react.memo_cache_sentinel")?(b=C.jsx("img",{src:"./pp.svg",width:32,height:32,className:Nl.profileImage}),n[5]=b):b=n[5];const T=t.current?t.current:"Receiver";let R;n[6]!==T?(R=C.jsxs("div",{className:Nl.profileContainer,children:[b,C.jsx("p",{children:T})]}),n[6]=T,n[7]=R):R=n[7];let M;n[8]!==g||n[9]!==i?(M=i==="hidden"&&C.jsx("button",{className:Nl.videoCallButton,onClick:g,children:C.jsx("svg",{width:"1.25rem",height:"1.25rem",viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})})}),n[8]=g,n[9]=i,n[10]=M):M=n[10];let U;n[11]===Symbol.for("react.memo_cache_sentinel")?(U=C.jsx("button",{onClick:v,children:C.jsx("svg",{width:"1.25rem",height:"1.25rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2788 2.15224C13.9085 2 13.439 2 12.5 2C11.561 2 11.0915 2 10.7212 2.15224C10.2274 2.35523 9.83509 2.74458 9.63056 3.23463C9.53719 3.45834 9.50065 3.7185 9.48635 4.09799C9.46534 4.65568 9.17716 5.17189 8.69017 5.45093C8.20318 5.72996 7.60864 5.71954 7.11149 5.45876C6.77318 5.2813 6.52789 5.18262 6.28599 5.15102C5.75609 5.08178 5.22018 5.22429 4.79616 5.5472C4.47814 5.78938 4.24339 6.1929 3.7739 6.99993C3.30441 7.80697 3.06967 8.21048 3.01735 8.60491C2.94758 9.1308 3.09118 9.66266 3.41655 10.0835C3.56506 10.2756 3.77377 10.437 4.0977 10.639C4.57391 10.936 4.88032 11.4419 4.88029 12C4.88026 12.5581 4.57386 13.0639 4.0977 13.3608C3.77372 13.5629 3.56497 13.7244 3.41645 13.9165C3.09108 14.3373 2.94749 14.8691 3.01725 15.395C3.06957 15.7894 3.30432 16.193 3.7738 17C4.24329 17.807 4.47804 18.2106 4.79606 18.4527C5.22008 18.7756 5.75599 18.9181 6.28589 18.8489C6.52778 18.8173 6.77305 18.7186 7.11133 18.5412C7.60852 18.2804 8.2031 18.27 8.69012 18.549C9.17714 18.8281 9.46533 19.3443 9.48635 19.9021C9.50065 20.2815 9.53719 20.5417 9.63056 20.7654C9.83509 21.2554 10.2274 21.6448 10.7212 21.8478C11.0915 22 11.561 22 12.5 22C13.439 22 13.9085 22 14.2788 21.8478C14.7726 21.6448 15.1649 21.2554 15.3694 20.7654C15.4628 20.5417 15.4994 20.2815 15.5137 19.902C15.5347 19.3443 15.8228 18.8281 16.3098 18.549C16.7968 18.2699 17.3914 18.2804 17.8886 18.5412C18.2269 18.7186 18.4721 18.8172 18.714 18.8488C19.2439 18.9181 19.7798 18.7756 20.2038 18.4527C20.5219 18.2105 20.7566 17.807 21.2261 16.9999C21.6956 16.1929 21.9303 15.7894 21.9827 15.395C22.0524 14.8691 21.9088 14.3372 21.5835 13.9164C21.4349 13.7243 21.2262 13.5628 20.9022 13.3608C20.4261 13.0639 20.1197 12.558 20.1197 11.9999C20.1197 11.4418 20.4261 10.9361 20.9022 10.6392C21.2263 10.4371 21.435 10.2757 21.5836 10.0835C21.9089 9.66273 22.0525 9.13087 21.9828 8.60497C21.9304 8.21055 21.6957 7.80703 21.2262 7C20.7567 6.19297 20.522 5.78945 20.2039 5.54727C19.7799 5.22436 19.244 5.08185 18.7141 5.15109C18.4722 5.18269 18.2269 5.28136 17.8887 5.4588C17.3915 5.71959 16.7969 5.73002 16.3099 5.45096C15.8229 5.17191 15.5347 4.65566 15.5136 4.09794C15.4993 3.71848 15.4628 3.45833 15.3694 3.23463C15.1649 2.74458 14.7726 2.35523 14.2788 2.15224ZM12.5 15C14.1695 15 15.5228 13.6569 15.5228 12C15.5228 10.3431 14.1695 9 12.5 9C10.8305 9 9.47716 10.3431 9.47716 12C9.47716 13.6569 10.8305 15 12.5 15Z",fill:"#1C274C"})})}),n[11]=U):U=n[11];let k;n[12]!==M?(k=C.jsxs("ul",{className:Nl.actionsContainer,children:[M,U]}),n[12]=M,n[13]=k):k=n[13];let B;return n[14]!==R||n[15]!==k?(B=C.jsxs("nav",{"aria-label":"Main Navigation",className:Nl.navContainer,children:[R,k]}),n[14]=R,n[15]=k,n[16]=B):B=n[16],B}function B8(){document.body.classList.toggle("dark")}function q8(n){return n.setVideoCall}function H8(n){return n.videoCall}const G8="_chatContainer_pygrn_1",F8="_chatBottom_pygrn_18",D_={chatContainer:G8,chatBottom:F8},Q8="_textMessage_qznyh_1",Y8="_sentMessage_qznyh_31",K8="_receivedMessage_qznyh_36",X8="_sending_qznyh_41",$8="_sent_qznyh_31",Z8="_deletedMessage_qznyh_49",J8="_topMessage_qznyh_55",W8="_bottomMessage_qznyh_60",tw="_repliedMessage_qznyh_73",ew="_hasImage_qznyh_78",nw="_hasReaction_qznyh_84",iw="_emoji_qznyh_88",sw="_optionsButton_qznyh_98",Ln={textMessage:Q8,sentMessage:Y8,receivedMessage:K8,sending:X8,sent:$8,deletedMessage:Z8,topMessage:J8,bottomMessage:W8,repliedMessage:tw,hasImage:ew,hasReaction:nw,emoji:iw,optionsButton:sw},rw="_reaction_1ib9n_1",aw="_sentReaction_1ib9n_11",ow="_receivedReaction_1ib9n_16",Vm={reaction:rw,sentReaction:aw,receivedReaction:ow},lw=["","","","","",""];function uw(n){const t=De.c(8),{reaction:i,origin:r}=n,[o,u]=go(cw);let f;t[0]!==u?(f=()=>{u.start({from:{scale:0},to:{scale:1},config:{tension:300,friction:15}})},t[0]=u,t[1]=f):f=t[1];let m;t[2]!==i?(m=[i],t[2]=i,t[3]=m):m=t[3],$.useEffect(f,m);let y;return t[4]!==r||t[5]!==i||t[6]!==o?(y=i!==-1?C.jsx(Xs.span,{className:`${Vm.reaction} ${r==="sent"?Vm.sentReaction:Vm.receivedReaction}`,style:{...o},children:lw[i]}):C.jsx(C.Fragment,{}),t[4]=r,t[5]=i,t[6]=o,t[7]=y):y=t[7],y}function cw(){return{scale:1}}const hw="_requestDiv_1axuz_1",fw="_decisionBox_1axuz_9",dw="_loading_1axuz_35",Nm={requestDiv:hw,decisionBox:fw,loading:dw};function mw(n){const t=De.c(16),{sentId:i,receivedId:r}=n;console.log("Image request rendered!");const{dataChannel:o,peerName:u}=$.useContext(An),f=Lt(gw),{receivingImage:m}=$.useContext(Jn),{showNotification:y}=gu(),[g,v]=$.useState(!1);let b;t[0]!==o.current||t[1]!==r||t[2]!==m.current||t[3]!==i||t[4]!==y?(b=()=>{m.current===null?(o.current.send(JSON.stringify({type:"imageAccept",sentId:r,receivedId:i})),v(!0)):y("Please wait for a while!")},t[0]=o.current,t[1]=r,t[2]=m.current,t[3]=i,t[4]=y,t[5]=b):b=t[5];const T=b;let R;t[6]!==o.current||t[7]!==r||t[8]!==f||t[9]!==i?(R=()=>{o.current.send(JSON.stringify({type:"imageReject",sentId:r,receivedId:i})),f(i,r)},t[6]=o.current,t[7]=r,t[8]=f,t[9]=i,t[10]=R):R=t[10];const M=R;let U;return t[11]!==T||t[12]!==g||t[13]!==u||t[14]!==M?(U=g?C.jsxs("div",{className:Nm.loading,children:[C.jsx("span",{children:"L"}),C.jsx("span",{children:"o"}),C.jsx("span",{children:"a"}),C.jsx("span",{children:"d"}),C.jsx("span",{children:"i"}),C.jsx("span",{children:"n"}),C.jsx("span",{children:"g"}),C.jsx("span",{children:""}),C.jsx("span",{children:"i"}),C.jsx("span",{children:"m"}),C.jsx("span",{children:"a"}),C.jsx("span",{children:"g"}),C.jsx("span",{children:"e"})]}):C.jsxs("div",{className:Nm.requestDiv,children:[C.jsxs("div",{children:[u.current," wants to send you an image"]}),C.jsxs("div",{className:Nm.decisionBox,children:[C.jsx("button",{onClick:T,children:"Accept"}),C.jsx("button",{onClick:M,children:"Reject"})]})]}),t[11]=T,t[12]=g,t[13]=u,t[14]=M,t[15]=U):U=t[15],U}function gw(n){return n.removeMessage}const pw="_wrapperContainer_1jaxu_1",yw="_show_1jaxu_13",Om={wrapperContainer:pw,show:yw};function yg({imageData:n,imageSource:t,imageAlt:i="Image",backgroundColor:r,clickHandler:o}){const[u,f]=$.useState(!1),m={[`data-${n==null?void 0:n.label}`]:n==null?void 0:n.value};return C.jsx("div",{style:{backgroundColor:u?"transparent":r},className:`${Om.wrapperContainer} ${u?Om.stopAnimation:""}`,children:C.jsx("img",{onClick:o,...m,className:u?Om.show:"",onLoad:()=>{f(!0)},src:t,alt:i})})}const E4=$.memo(({message:n,prevMessageSentId:t,prevMessageReceivedId:i,prevMessageReaction:r,nextMessageSentId:o,nextMessageReceivedId:u,nextMessageReplyTo:f})=>{const{dataChannel:m}=$.useContext(An),y=Lt(nt=>nt.setReplying),g=Lt(nt=>nt.setActionsShown),v=Lt(nt=>nt.setReactionsShown),b=Lt(nt=>nt.setImageDialog),{chatBottom:T,pointerPosition:R,selectedMessage:M,longPressed:U,atBottomRef:k}=$.useContext(Jn),{sentId:B,receivedId:Z,type:X,status:st,content:W,reaction:Q,deleted:D,highlight:w,replyTo:x}=n;console.log("Rendering message ",n);const L=()=>{window.history.pushState(null,"","/image"),b({src:W,sent:Z===null})},O={text:()=>C.jsx("p",{children:W}),image:()=>C.jsx(yg,{imageSource:W,backgroundColor:Z===null?"#FFD1B3":"#B3E0FF",clickHandler:L}),imageRequest:()=>C.jsx(mw,{sentId:B,receivedId:Z})},[j,I]=go(()=>({scale:1,x:0})),dt=$.useRef(null),pt=$.useRef(!1),F=$.useRef(!0),at=$.useRef(0),ht=$.useRef(null);$.useEffect(()=>{k.current&&(T.current.scrollIntoView({behavior:"smooth"}),k.current=!1),I.start({from:{scale:0,opacity:0},to:[{scale:1,opacity:1}],reset:!1,config:qm.stiff})},[]),$.useEffect(()=>{if(F.current){F.current=!1;return}(async()=>(ht.current.scrollIntoView({behavior:"instant"}),await new Promise(nt=>setTimeout(nt,100)),I.start({from:{scale:1},to:[{scale:1.2},{scale:1}],config:qm.stiff})))()},[w]);const Et=()=>{if(B===null&&Q!==1){let nt={type:"reaction",id:Z,reaction:1};m.current.send(JSON.stringify(nt))}},N=ME({onPointerDown:({event:nt})=>{pt.current=!1,dt.current=setTimeout(()=>{pt.current||(R.current.x=nt.clientX,R.current.y=nt.clientY,U.current=!0,I.start({from:{scale:1},to:[{scale:1.1},{scale:1}],config:{duration:150},onRest:()=>{g(!0),y(null),B===null&&v(!0),M.current=n}}))},500)},onPointerUp:()=>{setTimeout(()=>{U.current=!1},100),clearTimeout(dt.current);const nt=Date.now();nt-at.current<500?(Et(),at.current=0):at.current=nt},onPointerLeave:()=>{clearTimeout(dt.current)},onDrag:({last:nt,movement:[rt]})=>{if(B===null){if(rt<0)return}else if(rt>0)return;if(Math.abs(rt)<5)return;pt.current=Math.abs(rt)>5;let yt=Z===null?Math.min(0,rt):Math.max(0,rt);I.start({x:yt,onRest:()=>{Math.abs(rt)>60&&(M.current=n,y(M.current),g(!1),v(!1))}}),pt.current&&dt.current&&(clearTimeout(dt.current),dt.current=null),nt&&I.start({x:0,config:{tension:500,friction:20}})}},{eventOptions:{passive:!1}}),tt=nt=>{nt.stopPropagation(),!(D===2||X==="imageRequest"||st==="sending")&&(M.current=n,g(!0),Z!==null&&(R.current.x=nt.clientX-ht.current.clientWidth/2-36,R.current.y=nt.clientY,v(!0)))};return C.jsxs(Xs.div,{ref:ht,...D!==0||X==="imageRequest"||st==="sending"?{}:N(),style:{...j},className:`
        ${Ln.textMessage}
        ${st==="sending"?Ln.sending:Ln.sent}
        ${Z===null?Ln.sentMessage:Ln.receivedMessage}
        ${(o===B||u===Z)&&n.reaction===-1&&!f?Ln.topMessage:""}
        ${(t===B||i===Z)&&!r?Ln.bottomMessage:""}
        ${x?Ln.repliedMessage:""}
        ${D===2?Ln.deletedMessage:""}
        ${Q!==-1&&D!==2?Ln.hasReaction:""}
        ${X==="image"?Ln.hasImage:""}
        ${BE(W)?Ln.emoji:""}
      `,children:[(O[X]||(()=>C.jsx("p",{children:C.jsx("span",{children:"Unknown type"})})))(),D!==2&&C.jsx(uw,{reaction:Q,origin:B===null?"received":"sent"}),C.jsx("button",{onClick:()=>{tt(event)},className:Ln.optionsButton,children:C.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M0 0h48v48H0z",fill:"none"}),C.jsxs("g",{children:[C.jsx("circle",{cx:"24",cy:"24",r:"5"}),C.jsx("circle",{cx:"24",cy:"11",r:"5"}),C.jsx("circle",{cx:"24",cy:"37",r:"5"})]})]})})]})}),_w="_replyToMessage_1f615_1",vw="_sentMessage_1f615_20",Ew="_receivedMessage_1f615_25",Zc={replyToMessage:_w,sentMessage:vw,receivedMessage:Ew};function Tw(n){const t=De.c(18),{message:i,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}=n,f=Lt(bw);let m;t[0]!==f||t[1]!==i.replyTo.receivedId||t[2]!==i.replyTo.sentId?(m=()=>{setTimeout(()=>{f(i.replyTo.sentId,i.replyTo.receivedId)},100)},t[0]=f,t[1]=i.replyTo.receivedId,t[2]=i.replyTo.sentId,t[3]=m):m=t[3];const y=m,g=`
          ${Zc.replyToMessage}
          ${i.receivedId===null?Zc.sentMessage:Zc.receivedMessage}
          ${i.reaction!==-1?Zc.hasReaction:""}
        `,v=i.replyTo.type==="image"?"Image":i.replyTo.content;let b;t[4]!==v?(b=C.jsx("p",{children:v}),t[4]=v,t[5]=b):b=t[5];let T;t[6]!==y||t[7]!==g||t[8]!==b?(T=C.jsx("a",{onClick:y,className:g,children:b}),t[6]=y,t[7]=g,t[8]=b,t[9]=T):T=t[9];let R;t[10]!==i||t[11]!==o||t[12]!==u||t[13]!==r?(R=C.jsx(E4,{message:i,replied:!0,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}),t[10]=i,t[11]=o,t[12]=u,t[13]=r,t[14]=R):R=t[14];let M;return t[15]!==T||t[16]!==R?(M=C.jsxs(C.Fragment,{children:[T,R]}),t[15]=T,t[16]=R,t[17]=M):M=t[17],M}function bw(n){return n.highlightMessage}const Sw="_typingIndicator_1e28p_1",Aw="_dot_1e28p_14",Jc={typingIndicator:Sw,dot:Aw};function ww(){const n=De.c(1),{chatBottom:t}=$.useContext(Jn);Hl(t)&&setTimeout(()=>{t.current.scrollIntoView({behavior:"smooth"})},300);let i;return n[0]===Symbol.for("react.memo_cache_sentinel")?(i=C.jsxs("div",{className:Jc.typingIndicator,children:[C.jsx("span",{className:Jc.dot}),C.jsx("span",{className:Jc.dot}),C.jsx("span",{className:Jc.dot})]}),n[0]=i):i=n[0],i}const Cw="_newMessageContainer_p3j2r_1",Rw="_newMessage_p3j2r_1",M_={newMessageContainer:Cw,newMessage:Rw};function xw(){const n=De.c(4);console.log("New Message component rendered!");const{chatBottom:t}=$.useContext(Jn);let i;n[0]!==t.current?(i=()=>{t.current.scrollIntoView({behavior:"smooth"})},n[0]=t.current,n[1]=i):i=n[1];const r=i;let o;return n[2]!==r?(o=C.jsx("div",{className:M_.newMessageContainer,children:C.jsx("div",{className:M_.newMessage,onClick:r,children:"New Message"})}),n[2]=r,n[3]=o):o=n[3],o}function Iw(){const n=De.c(17);console.log("Chat component rendered!");const{chatBottom:t}=$.useContext(Jn),i=Lt(Ow),r=Lt(Nw),o=Lt(Vw),u=Lt(Mw);let f;n[0]!==t||n[1]!==u?(f=()=>{const R=new IntersectionObserver(U=>{U.forEach(k=>{k.isIntersecting&&u(!1)})},{threshold:.1}),M=t.current;return M&&R.observe(M),()=>{M&&R.unobserve(M)}},n[0]=t,n[1]=u,n[2]=f):f=n[2];let m;n[3]===Symbol.for("react.memo_cache_sentinel")?(m=[],n[3]=m):m=n[3],$.useLayoutEffect(f,m);let y;n[4]!==i?(y=i.map(Dw),n[4]=i,n[5]=y):y=n[5];let g;n[6]!==r?(g=r&&C.jsx(ww,{}),n[6]=r,n[7]=g):g=n[7];let v;n[8]!==o?(v=o&&C.jsx(xw,{}),n[8]=o,n[9]=v):v=n[9];let b;n[10]!==t?(b=C.jsx("div",{ref:t,className:D_.chatBottom,children:"Hehe"},"chatBottom"),n[10]=t,n[11]=b):b=n[11];let T;return n[12]!==y||n[13]!==g||n[14]!==v||n[15]!==b?(T=C.jsxs("div",{className:D_.chatContainer,children:[y,g,v,b]}),n[12]=y,n[13]=g,n[14]=v,n[15]=b,n[16]=T):T=n[16],T}function Dw(n,t,i){var r,o,u,f,m,y,g,v,b;return n.replyTo?C.jsx(Tw,{message:n,nextMessageSentId:(r=i[t+1])==null?void 0:r.sentId,nextMessageReceivedId:(o=i[t+1])==null?void 0:o.receivedId,nextMessageReplyTo:(u=i[t+1])==null?void 0:u.replyTo},`${n.sentId} m ${n.receivedId}`):C.jsx(E4,{message:n,nextMessageSentId:(f=i[t+1])==null?void 0:f.sentId,nextMessageReceivedId:(m=i[t+1])==null?void 0:m.receivedId,nextMessageReplyTo:(y=i[t+1])==null?void 0:y.replyTo,prevMessageSentId:(g=i[t-1])==null?void 0:g.sentId,prevMessageReceivedId:(v=i[t-1])==null?void 0:v.receivedId,prevMessageReaction:((b=i[t-1])==null?void 0:b.reaction)!==-1},`${n.sentId} m ${n.receivedId}`)}function Mw(n){return n.setNewMessage}function Vw(n){return n.newMessage}function Nw(n){return n.typing}function Ow(n){return n.messages}const Lw="_inputSpaceContainer_kksll_1",kw="_textAreaWrapper_kksll_10",Pw="_gifSelector_kksll_47",jw="_inputOptions_kksll_60",Uw="_sendButton_kksll_82",zw="_imageBox_kksll_102",Bw="_inputImage_kksll_115",qw="_closeImage_kksll_122",Gs={inputSpaceContainer:Lw,textAreaWrapper:kw,gifSelector:Pw,inputOptions:jw,sendButton:Uw,imageBox:zw,inputImage:Bw,closeImage:qw},Hw="_gifBox_o2enx_1",Gw="_inputDiv_o2enx_20",Fw="_closeButton_o2enx_26",Qw="_gifInput_o2enx_37",Yw="_gifsContainer_o2enx_57",Kw="_containerColumn_o2enx_68",Hr={gifBox:Hw,inputDiv:Gw,closeButton:Fw,gifInput:Qw,gifsContainer:Yw,containerColumn:Kw},Xw="AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k",$w="client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low";function Zw(n){const t=De.c(45),{setGifPicker:i}=n;console.log("Gif Picker rendered!");const{dataChannel:r,featuredGifs:o}=$.useContext(An),{sentId:u,selectedMessage:f,atBottomRef:m}=$.useContext(Jn),y=Lt(aC),g=Lt(rC),v=Lt(sC);let b;t[0]!==i?(b=()=>{i(!1)},t[0]=i,t[1]=b):b=t[1];const T=b,[R,M]=$.useState(o.current),U=$.useRef(null),[k,B]=go(iC),{h:Z}=k;let X;t[2]!==B?(X=()=>{B.start({h:0,immediate:!1,onRest:nC})},t[2]=B,t[3]=X):X=t[3];const st=X;let W;t[4]!==B||t[5]!==st?(W=lt=>{const{movement:mt,last:Tt}=lt,[,xt]=mt;Math.abs(xt)<2&&!Tt||(Tt?xt>60?st():B.start({h:85,immediate:!1}):xt>0&&B.start({h:85-xt/window.innerHeight*100,immediate:!0}))},t[4]=B,t[5]=st,t[6]=W):W=t[6];const Q=zh(W);let D;t[7]===Symbol.for("react.memo_cache_sentinel")?(D=async lt=>{const mt=`https://tenor.googleapis.com/v2/search?q=${lt}&key=${Xw}&${$w}`,Tt=await fetch(mt).then(eC);M(Tt.results)},t[7]=D):D=t[7];const w=D;let x;t[8]===Symbol.for("react.memo_cache_sentinel")?(x=jE(w,200),t[8]=x):x=t[8];const L=$.useRef(x);let O;t[9]!==o.current?(O=()=>{const lt=U.current.value.trimEnd();lt.length===0?M(o.current):L.current(lt)},t[9]=o.current,t[10]=O):O=t[10];const j=O;let I;t[11]!==y||t[12]!==m||t[13]!==r||t[14]!==g||t[15]!==f||t[16]!==u||t[17]!==i||t[18]!==v?(I=lt=>{console.log("Clicked!"),lt.target.dataset.url&&(Zm({type:"gif",content:lt.target.dataset.url,replying:g,setReplying:v,selectedMessage:f.current,dataChannel:r.current,addMessage:y,sentId:u,inputRef:null,atBottomRef:m}),i(!1))},t[11]=y,t[12]=m,t[13]=r,t[14]=g,t[15]=f,t[16]=u,t[17]=i,t[18]=v,t[19]=I):I=t[19];const dt=I;let pt;t[20]!==B||t[21]!==T?(pt=()=>(B.start({from:{h:0},to:[{h:85}],reset:!1}),window.addEventListener("popstate",T),()=>{window.removeEventListener("popstate",T)}),t[20]=B,t[21]=T,t[22]=pt):pt=t[22];let F;t[23]===Symbol.for("react.memo_cache_sentinel")?(F=[],t[23]=F):F=t[23],$.useEffect(pt,F);let at;t[24]!==Q?(at=Q(),t[24]=Q,t[25]=at):at=t[25];let ht;t[26]!==Z?(ht=Z.to(tC),t[26]=Z,t[27]=ht):ht=t[27];let Et;t[28]!==ht?(Et={height:ht},t[28]=ht,t[29]=Et):Et=t[29];let N;t[30]!==j?(N=C.jsx("input",{ref:U,autoComplete:"off",placeholder:"Search",spellCheck:!1,name:"query",title:"Search for GIFs",className:Hr.gifInput,onChange:j}),t[30]=j,t[31]=N):N=t[31];let tt;t[32]!==st?(tt=C.jsx("button",{onClick:st,className:Hr.closeButton,children:" Close "}),t[32]=st,t[33]=tt):tt=t[33];let nt;t[34]!==N||t[35]!==tt?(nt=C.jsxs("div",{className:Hr.inputDiv,children:[N,tt]}),t[34]=N,t[35]=tt,t[36]=nt):nt=t[36];let rt;t[37]!==R||t[38]!==dt?(rt=R.length>0?C.jsxs("div",{className:Hr.gifsContainer,onClick:lt=>dt(lt),children:[C.jsx("div",{className:Hr.containerColumn,children:R.map(Ww)}),C.jsx("div",{className:Hr.containerColumn,children:R.map(Jw)})]}):C.jsx(C.Fragment,{}),t[37]=R,t[38]=dt,t[39]=rt):rt=t[39];let yt;return t[40]!==at||t[41]!==Et||t[42]!==nt||t[43]!==rt?(yt=C.jsxs(Xs.div,{...at,style:Et,className:Hr.gifBox,children:[nt,rt]}),t[40]=at,t[41]=Et,t[42]=nt,t[43]=rt,t[44]=yt):yt=t[44],yt}function Jw(n,t){return t%2===1&&C.jsx(yg,{imageData:{label:"url",value:n.media_formats.gif.url},imageSource:n.media_formats.tinygif.url,imageAlt:n.content_description,backgroundColor:"var(--opaque-background)"},n.id+t)}function Ww(n,t){return t%2===0&&C.jsx(yg,{imageData:{label:"url",value:n.media_formats.gif.url},imageSource:n.media_formats.tinygif.url,imageAlt:n.content_description,backgroundColor:"var(--opaque-background)"},n.id+t)}function tC(n){return`${n}vh`}function eC(n){return n.json()}function nC(){window.history.back()}function iC(){return{h:85}}function sC(n){return n.setReplying}function rC(n){return n.replying}function aC(n){return n.addMessage}function oC(){const n=De.c(62);console.log("Input space rendered!");const{showNotification:t}=gu(),{dataChannel:i}=$.useContext(An),{sentId:r,atBottomRef:o,images:u,chatBottom:f,selectedMessage:m}=$.useContext(Jn),y=Lt(cC),g=Lt(uC),v=Lt(lC),b=$.useRef(""),T=$.useRef(null),R=$.useRef(null),M=$.useRef(null),[U,k]=$.useState(!1),[B,Z]=$.useState(null),[X,st]=$.useState(!1);let W,Q;n[0]!==y?(W=()=>{y&&T.current&&T.current.focus()},Q=[y],n[0]=y,n[1]=W,n[2]=Q):(W=n[1],Q=n[2]),$.useLayoutEffect(W,Q);let D;n[3]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{st(!0),window.history.pushState(null,"","/gifs")},n[3]=D):D=n[3];const w=D;let x;n[4]!==i?(x=()=>{i.current.send(JSON.stringify({type:"typing"}))},n[4]=i,n[5]=x):x=n[5];const L=x;let O;n[6]!==L?(O=PE(L,800),n[6]=L,n[7]=O):O=n[7];const j=$.useRef(O);let I;n[8]!==f?(I=()=>{j.current(),k(!0),T.current.style.height="auto",T.current.scrollHeight>T.current.clientHeight&&(T.current.style.height=T.current.scrollHeight+"px"),b.current=T.current.value,Hl(f)&&setTimeout(()=>{f.current.scrollIntoView({behavior:"smooth"})},200)},n[8]=f,n[9]=I):I=n[9];const dt=I;let pt;n[10]!==u.current||n[11]!==r||n[12]!==t?(pt=async Ke=>{const fe=Ke.target.files[0];if(!fe)return;const Oi=await UE(fe);if(Oi.length>64){t("Please upload images upto 2 MB!");return}u.current.push({sentId:r.current,receivedId:null,fileType:fe.type,chunks:Oi}),Z(URL.createObjectURL(fe))},n[10]=u.current,n[11]=r,n[12]=t,n[13]=pt):pt=n[13];const F=pt;let at;n[14]!==v||n[15]!==o||n[16]!==i||n[17]!==y||n[18]!==m||n[19]!==r||n[20]!==g?(at=()=>{b.current.trim().length!==0&&(Zm({type:"text",content:b.current.trimEnd(),replying:y,setReplying:g,selectedMessage:m.current,dataChannel:i.current,addMessage:v,sentId:r,inputRef:T,atBottomRef:o}),b.current="")},n[14]=v,n[15]=o,n[16]=i,n[17]=y,n[18]=m,n[19]=r,n[20]=g,n[21]=at):at=n[21];const ht=at;let Et;n[22]!==v||n[23]!==o||n[24]!==i||n[25]!==B||n[26]!==y||n[27]!==m||n[28]!==r||n[29]!==g?(Et=()=>{B!==null&&(Zm({type:"imageRequest",content:B,replying:y,setReplying:g,selectedMessage:m.current,dataChannel:i.current,addMessage:v,sentId:r,inputRef:M,atBottomRef:o}),Z(null))},n[22]=v,n[23]=o,n[24]=i,n[25]=B,n[26]=y,n[27]=m,n[28]=r,n[29]=g,n[30]=Et):Et=n[30];const N=Et;let tt;n[31]===Symbol.for("react.memo_cache_sentinel")?(tt=()=>{k(!1),T.current.style.height="unset",T.current.scrollTop=T.current.scrollHeight},n[31]=tt):tt=n[31];const nt=tt;let rt;n[32]!==u.current||n[33]!==r?(rt=()=>{M.current.value="";const Ke=u.current.findIndex(fe=>fe.sentId===r.current&&fe.receivedId===null);u.current.splice(Ke,1),Z(null)},n[32]=u.current,n[33]=r,n[34]=rt):rt=n[34];const yt=rt;let lt;n[35]!==B||n[36]!==N||n[37]!==ht?(lt=()=>{B===null?ht():N()},n[35]=B,n[36]=N,n[37]=ht,n[38]=lt):lt=n[38];const mt=lt;let Tt;n[39]!==ht?(Tt=Ke=>{Ke.key==="Enter"&&(Ke.shiftKey||(Ke.preventDefault(),ht(),T.current.blur()))},n[39]=ht,n[40]=Tt):Tt=n[40];const xt=Tt;let Yt;n[41]!==X?(Yt=X?C.jsx(Zw,{setGifPicker:st}):null,n[41]=X,n[42]=Yt):Yt=n[42];let pe;n[43]!==U||n[44]!==F?(pe=!U&&C.jsxs("div",{className:Gs.inputOptions,children:[C.jsx("label",{htmlFor:"fileInput",children:C.jsx("svg",{width:"1.125rem",height:"1.125rem",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM6.016 24q0 0.832 0.576 1.44t1.408 0.576h16q0.832 0 1.408-0.576t0.608-1.44v-0.928q-0.224-0.448-1.12-2.688t-1.6-3.584-1.28-2.112q-0.544-0.576-1.12-0.608t-1.152 0.384-1.152 1.12-1.184 1.568-1.152 1.696-1.152 1.6-1.088 1.184-1.088 0.448q-0.576 0-1.664-1.44-0.16-0.192-0.48-0.608-1.12-1.504-1.6-1.824-0.768-0.512-1.184 0.352-0.224 0.512-0.928 2.24t-1.056 2.56v0.64zM6.016 9.024q0 1.248 0.864 2.112t2.112 0.864 2.144-0.864 0.864-2.112-0.864-2.144-2.144-0.864-2.112 0.864-0.864 2.144z"})})}),C.jsx("input",{ref:M,id:"fileInput",type:"file",accept:"image/*",onChange:Ke=>F(Ke)}),C.jsx("svg",{width:"1.125rem",height:"1.125rem",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--twemoji",preserveAspectRatio:"xMidYMid meet",children:C.jsx("path",{fill:"#FFAC33",d:"M27.287 34.627c-.404 0-.806-.124-1.152-.371L18 28.422l-8.135 5.834a1.97 1.97 0 0 1-2.312-.008a1.971 1.971 0 0 1-.721-2.194l3.034-9.792l-8.062-5.681a1.98 1.98 0 0 1-.708-2.203a1.978 1.978 0 0 1 1.866-1.363L12.947 13l3.179-9.549a1.976 1.976 0 0 1 3.749 0L23 13l10.036.015a1.975 1.975 0 0 1 1.159 3.566l-8.062 5.681l3.034 9.792a1.97 1.97 0 0 1-.72 2.194a1.957 1.957 0 0 1-1.16.379z"})})]}),n[43]=U,n[44]=F,n[45]=pe):pe=n[45];let Me;n[46]!==U||n[47]!==dt||n[48]!==xt||n[49]!==B||n[50]!==yt?(Me=B?C.jsxs("div",{className:Gs.imageBox,children:[C.jsx("img",{src:B,className:Gs.inputImage}),C.jsx("svg",{className:Gs.closeImage,width:"1rem",height:"1rem",onClick:yt,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})]}):C.jsxs("div",{className:Gs.textAreaWrapper,children:[C.jsx("textarea",{onChange:dt,onFocus:dt,onBlur:nt,ref:T,name:"textMessage",placeholder:"Message",rows:1,spellCheck:!1,onKeyDown:xt}),!U&&C.jsx("svg",{className:Gs.gifSelector,onClick:w,width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"ic_fluent_gif_24_filled",fillRule:"nonzero",children:C.jsx("path",{d:"M18.75,3.50054297 C20.5449254,3.50054297 22,4.95561754 22,6.75054297 L22,17.2531195 C22,19.048045 20.5449254,20.5031195 18.75,20.5031195 L5.25,20.5031195 C3.45507456,20.5031195 2,19.048045 2,17.2531195 L2,6.75054297 C2,4.95561754 3.45507456,3.50054297 5.25,3.50054297 L18.75,3.50054297 Z M8.01459972,8.87193666 C6.38839145,8.87193666 5.26103525,10.2816525 5.26103525,11.9943017 C5.26103525,13.707564 6.38857781,15.1202789 8.01459972,15.1202789 C8.90237918,15.1202789 9.71768065,14.6931811 10.1262731,13.9063503 L10.2024697,13.7442077 L10.226,13.674543 L10.2440163,13.5999276 L10.2440163,13.5999276 L10.2516169,13.5169334 L10.2518215,11.9961937 L10.2450448,11.9038358 C10.2053646,11.6359388 9.99569349,11.4234501 9.72919932,11.3795378 L9.62682145,11.3711937 L8.62521827,11.3711937 L8.53286035,11.3779703 C8.26496328,11.4176506 8.05247466,11.6273217 8.00856234,11.8938159 L8.00021827,11.9961937 L8.00699487,12.0885517 C8.0466751,12.3564487 8.25634623,12.5689373 8.5228404,12.6128497 L8.62521827,12.6211937 L9.00103525,12.6209367 L9.00103525,13.3549367 L8.99484486,13.3695045 C8.80607251,13.6904125 8.44322427,13.8702789 8.01459972,13.8702789 C7.14873038,13.8702789 6.51103525,13.0713011 6.51103525,11.9943017 C6.51103525,10.9182985 7.14788947,10.1219367 8.01459972,10.1219367 C8.43601415,10.1219367 8.67582824,10.1681491 8.97565738,10.3121334 C9.28681641,10.4615586 9.6601937,10.3304474 9.80961888,10.0192884 C9.95904407,9.70812933 9.82793289,9.33475204 9.51677386,9.18532686 C9.03352891,8.95326234 8.61149825,8.87193666 8.01459972,8.87193666 Z M12.6289445,8.99393497 C12.3151463,8.99393497 12.0553614,9.22519285 12.0107211,9.52657705 L12.0039445,9.61893497 L12.0039445,14.381065 L12.0107211,14.4734229 C12.0553614,14.7748072 12.3151463,15.006065 12.6289445,15.006065 C12.9427427,15.006065 13.2025276,14.7748072 13.2471679,14.4734229 L13.2539445,14.381065 L13.2539445,9.61893497 L13.2471679,9.52657705 C13.2025276,9.22519285 12.9427427,8.99393497 12.6289445,8.99393497 Z M17.6221579,9.00083497 L15.6247564,8.99393111 C15.3109601,8.99285493 15.0503782,9.22321481 15.0046948,9.52444312 L14.9975984,9.61677709 L14.9975984,14.3649711 L15.0043751,14.4573291 C15.0440553,14.7252261 15.2537265,14.9377148 15.5202206,14.9816271 L15.6225985,14.9899711 L15.7149564,14.9831945 C15.9828535,14.9435143 16.1953421,14.7338432 16.2392544,14.467349 L16.2475985,14.3649711 L16.2470353,13.2499367 L17.37,13.2504012 L17.4623579,13.2436246 C17.730255,13.2039444 17.9427436,12.9942732 17.9866559,12.7277791 L17.995,12.6254012 L17.9882234,12.5330433 C17.9485432,12.2651462 17.738872,12.0526576 17.4723779,12.0087453 L17.37,12.0004012 L16.2470353,11.9999367 L16.2470353,10.2449367 L17.6178421,10.2508313 L17.7102229,10.2443727 C18.0117595,10.2007704 18.2439132,9.94178541 18.2450039,9.62798912 C18.24608,9.31419284 18.0157202,9.05361096 17.7144919,9.00793041 L17.6221579,9.00083497 L15.6247564,8.99393111 L17.6221579,9.00083497 Z",id:"-Color"})})})]}),n[46]=U,n[47]=dt,n[48]=xt,n[49]=B,n[50]=yt,n[51]=Me):Me=n[51];let sn;n[52]===Symbol.for("react.memo_cache_sentinel")?(sn=C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",id:"send",className:"icon glyph",children:C.jsx("path",{d:"M21.66,12a2,2,0,0,1-1.14,1.81L5.87,20.75A2.08,2.08,0,0,1,5,21a2,2,0,0,1-1.82-2.82L5.46,13H11a1,1,0,0,0,0-2H5.46L3.18,5.87A2,2,0,0,1,5.86,3.25h0l14.65,6.94A2,2,0,0,1,21.66,12Z"})}),n[52]=sn):sn=n[52];let ze;n[53]!==mt?(ze=C.jsx("button",{className:Gs.sendButton,onMouseDown:mt,children:sn}),n[53]=mt,n[54]=ze):ze=n[54];let Ye;n[55]!==pe||n[56]!==Me||n[57]!==ze?(Ye=C.jsxs("div",{className:Gs.inputSpaceContainer,ref:R,children:[pe,Me,ze]}),n[55]=pe,n[56]=Me,n[57]=ze,n[58]=Ye):Ye=n[58];let wn;return n[59]!==Yt||n[60]!==Ye?(wn=C.jsxs(C.Fragment,{children:[Yt,Ye]}),n[59]=Yt,n[60]=Ye,n[61]=wn):wn=n[61],wn}function lC(n){return n.addMessage}function uC(n){return n.setReplying}function cC(n){return n.replying}const hC="_containingDiv_1m6wd_1",fC="_incomingCall_1m6wd_8",dC="_incomingCallText_1m6wd_25",mC="_callingText_1m6wd_31",gC="_callActions_1m6wd_42",pC="_acceptCall_1m6wd_49",yC="_rejectCall_1m6wd_53",os={containingDiv:hC,incomingCall:fC,incomingCallText:dC,callingText:mC,callActions:gC,acceptCall:pC,rejectCall:yC};function _C(){const n=De.c(34);console.log("Incoming call rendered!");const{peerName:t,dataChannel:i}=$.useContext(An),r=Lt(TC),o=Lt(EC),[u,f]=go(vC),{x:m,y,opacity:g}=u;let v;n[0]!==i.current||n[1]!==r||n[2]!==o?(v=()=>{i.current.send(JSON.stringify({type:"callAccept"})),r(!1),o("connected")},n[0]=i.current,n[1]=r,n[2]=o,n[3]=v):v=n[3];const b=v;let T;n[4]!==i.current||n[5]!==r?(T=()=>{i.current.send(JSON.stringify({type:"callReject"})),r(!1)},n[4]=i.current,n[5]=r,n[6]=T):T=n[6];const R=T;let M;n[7]!==f||n[8]!==R?(M=O=>{const{down:j,movement:I,direction:dt}=O,[pt]=I,[F]=dt;if(!j&&Math.abs(pt)>100){f.start({x:F>0?500:-500,opacity:0,onRest:R});return}f.start({x:j?pt:0,opacity:1})},n[7]=f,n[8]=R,n[9]=M):M=n[9];const U=zh(M);let k;n[10]!==U?(k=U(),n[10]=U,n[11]=k):k=n[11];let B;n[12]!==g||n[13]!==m||n[14]!==y?(B={x:m,y,opacity:g},n[12]=g,n[13]=m,n[14]=y,n[15]=B):B=n[15];let Z,X;n[16]===Symbol.for("react.memo_cache_sentinel")?(Z=C.jsx("div",{className:os.profileImage,children:C.jsx("img",{src:"./pp.svg",width:50,height:50,className:os.profileImage})}),X=C.jsx("p",{className:os.incomingCallText,children:"Incoming Call"}),n[16]=Z,n[17]=X):(Z=n[16],X=n[17]);let st;n[18]!==t.current?(st=C.jsxs("div",{children:[X,C.jsxs("p",{className:os.callingText,children:[t.current," is calling you"]})]}),n[18]=t.current,n[19]=st):st=n[19];let W;n[20]===Symbol.for("react.memo_cache_sentinel")?(W=C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})}),n[20]=W):W=n[20];let Q;n[21]!==b?(Q=C.jsx("button",{className:os.acceptCall,onClick:b,children:W}),n[21]=b,n[22]=Q):Q=n[22];let D;n[23]===Symbol.for("react.memo_cache_sentinel")?(D=C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})}),n[23]=D):D=n[23];let w;n[24]!==R?(w=C.jsx("button",{className:os.rejectCall,onClick:R,children:D}),n[24]=R,n[25]=w):w=n[25];let x;n[26]!==Q||n[27]!==w?(x=C.jsxs("div",{className:os.callActions,children:[Q,w]}),n[26]=Q,n[27]=w,n[28]=x):x=n[28];let L;return n[29]!==x||n[30]!==k||n[31]!==B||n[32]!==st?(L=C.jsx("div",{className:os.containingDiv,children:C.jsxs(Xs.div,{...k,className:os.incomingCall,style:B,children:[Z,st,x]})}),n[29]=x,n[30]=k,n[31]=B,n[32]=st,n[33]=L):L=n[33],L}function vC(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}function EC(n){return n.setVideoCall}function TC(n){return n.setIncomingCall}const bC="_videoCallContainer_1ei9t_1",SC="_actionList_1ei9t_17",AC="_cancelButton_1ei9t_21",wC="_expanded_1ei9t_40",CC="_videoContainer_1ei9t_44",RC="_contracted_1ei9t_62",xC="_video_1ei9t_1",IC="_expandButton_1ei9t_78",DC="_mutedButton_1ei9t_83",MC="_sendingVideo_1ei9t_88",VC="_receivingVideo_1ei9t_93",NC="_shown_1ei9t_115",OC="_hidden_1ei9t_119",LC="_startCall_1ei9t_135",kC="_endCall_1ei9t_143",PC="_rotateLogo_1ei9t_151",jC="_mini_1ei9t_223",UC="_callingIndicatorContainer_1ei9t_243",zC="_callingIndicator_1ei9t_243",re={videoCallContainer:bC,actionList:SC,cancelButton:AC,expanded:wC,videoContainer:CC,contracted:RC,video:xC,expandButton:IC,mutedButton:DC,sendingVideo:MC,receivingVideo:VC,shown:NC,hidden:OC,startCall:LC,endCall:kC,rotateLogo:PC,mini:jC,callingIndicatorContainer:UC,callingIndicator:zC};function BC({callState:n}){console.log("Call screen rendered!");const{peerConnection:t,remoteStream:i,videoChannel:r,dataChannel:o}=$.useContext(An),u=Lt(lt=>lt.setVideoCall),[f,m]=$.useState(!1),[y,g]=$.useState(!1),[v,b]=$.useState(!1),[T,R]=$.useState(!1),[M,U]=$.useState("front"),[k,B]=$.useState("normal"),[Z,X]=$.useState(!0),st=$.useRef(null),W=$.useRef(null),Q=$.useRef({x:0,y:0}),D=$.useRef(null),w=$.useRef(null),x=$.useRef(null),L=$.useRef(null),O=$.useRef(null),j=$.useRef(null),[{x:I,y:dt},pt]=go(()=>({x:Q.current.x,y:Q.current.y,config:{tension:300,friction:15}}));$.useEffect(()=>{window.history.pushState(null,"","/call"),r.current.onmessage=mt=>{let Tt=JSON.parse(mt.data);Tt.message==="audioOn"?b(!0):Tt.message==="audioOff"?b(!1):Tt.message==="videoOn"?R(!0):Tt.message==="videoOff"&&R(!1)},O.current=new MediaStream;const lt=t.current.getTransceivers();return W.current=lt.find(mt=>{var Tt,xt,Yt;return((Tt=mt.receiver.track)==null?void 0:Tt.kind)==="video"||((xt=mt.sender.track)==null?void 0:xt.kind)==="video"||((Yt=mt.mid)==null?void 0:Yt.includes("video"))}),st.current=lt.find(mt=>{var Tt,xt,Yt;return((Tt=mt.receiver.track)==null?void 0:Tt.kind)==="audio"||((xt=mt.sender.track)==null?void 0:xt.kind)==="audio"||((Yt=mt.mid)==null?void 0:Yt.includes("audio"))}),window.addEventListener("popstate",at),()=>{var mt;(mt=O.current)==null||mt.getTracks().forEach(Tt=>{Tt.stop()}),window.removeEventListener("popstate",at)}},[]),$.useEffect(()=>{(async()=>{O.current.getTracks().forEach(Tt=>Tt.stop()),O.current.getTracks().forEach(Tt=>O.current.removeTrack(Tt));const lt=M==="front"?"user":"environment";(await navigator.mediaDevices.getUserMedia({video:{facingMode:lt},audio:!0})).getTracks().forEach(Tt=>{O.current.addTrack(Tt)}),n==="connected"&&(W.current.sender.replaceTrack(f?O.current.getVideoTracks()[0]:null),st.current.sender.replaceTrack(y?O.current.getAudioTracks()[0]:null))})()},[M]),$.useEffect(()=>{n==="connected"&&r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"}))},[y]),$.useEffect(()=>{n==="connected"&&r.current.send(JSON.stringify({message:f?"videoOn":"videoOff"}))},[f]);const F=zh(({down:lt,offset:[mt,Tt],movement:[xt],last:Yt})=>{if(!(Math.abs(xt)<2)){if(lt)Q.current={x:mt,y:Tt},pt.start({x:mt,y:Tt,immediate:!0});else if(Yt){L.current=!0;const pe=k==="mini"?window.innerWidth:x.current.clientWidth,Me=k==="mini"?window.innerHeight:x.current.clientHeight,sn=window.innerWidth,ze=sn>1400?.35*(.3*sn):.35*sn,Ye=ze,wn=16,Ke=16,fe=16,Oi=128;let Li=0;mt>(pe-(fe+Ke)-ze)/2&&(Li=pe-(fe+Ke)-ze);let Wn=Tt;Tt<0&&(Wn=0),Tt>Me-(wn+Oi+Ye)&&(Wn=Me-(wn+Oi+Ye)),Q.current={x:Li,y:Wn},pt.start({x:Li,y:Wn,immediate:!1,onRest:()=>{L.current=!1}})}}},{from:()=>[I.get(),dt.get()]});$.useEffect(()=>{D.current.srcObject=T?i.current:null},[T]),$.useEffect(()=>{var lt;w.current.srcObject=f?O.current:null,(lt=W.current)==null||lt.sender.replaceTrack(f?O.current.getVideoTracks()[0]:null)},[f]),$.useEffect(()=>{var lt;(lt=st.current)==null||lt.sender.replaceTrack(y?O.current.getAudioTracks()[0]:null)},[y]),$.useLayoutEffect(()=>{pt.start({x:I.get(),y:dt.get(),immediate:!0})}),$.useEffect(()=>{j.current=n,n==="connected"&&(r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"})),r.current.send(JSON.stringify({message:f?"videoOn":"videoOff"})))},[n]);const at=()=>{(j.current==="connected"||j.current==="calling")&&window.innerWidth<=1400?B("mini"):N()},ht=lt=>{lt.stopPropagation(),g(mt=>!mt)},Et=lt=>{lt.stopPropagation(),m(mt=>!mt)},N=lt=>{lt&&lt.stopPropagation(),n==="connected"?o.current.send(JSON.stringify({type:"callEnd"})):o.current.send(JSON.stringify({type:"callCancel"})),u("hidden")},tt=lt=>{lt.stopPropagation(),o.current.send(JSON.stringify({type:"callRequest"})),console.log("I am attempting a call!"),u("calling")},nt=lt=>{lt.stopPropagation(),U(M==="front"?"back":"front")},rt=()=>{L.current||X(lt=>!lt)},yt=(lt,mt)=>{lt.stopPropagation(),mt==="sending"?(console.log("The selected video was sending video!"),B(k==="expandSending"?"normal":"expandSending")):(console.log("The selected video was receiving video!"),B(k==="expandReceiving"?"normal":"expandReceiving"))};return C.jsxs(Xs.div,{className:`
                ${re.videoCallContainer}
                ${k==="mini"?re.mini:""}
                ${k==="expandSending"||k==="expandReceiving"?re.expanded:""}
            `,onClick:rt,ref:x,...k==="mini"?F():{},style:k==="mini"?{x:I,y:dt}:{},children:[C.jsxs(Xs.div,{className:`
                    ${re.videoContainer}
                    ${re.receivingVideo}
                    ${k==="expandReceiving"?re.expanded:""}
                    ${k==="expandSending"?re.contracted:""}
                `,...k==="expandSending"?F():{},style:k==="expandSending"?{x:I,y:dt}:{},children:[C.jsx("video",{className:re.video,autoPlay:!0,ref:D,poster:"./pp.svg"}),!v&&C.jsx("button",{className:re.mutedButton,children:C.jsx("svg",{width:"0.75rem",height:"0.75rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:C.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),C.jsx("button",{className:re.expandButton,onClick:lt=>{yt(lt,"receiving")},children:C.jsxs("svg",{width:"0.75rem",height:"0.75rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M23 4C23 2.34315 21.6569 1 20 1H16C15.4477 1 15 1.44772 15 2C15 2.55228 15.4477 3 16 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 21.4477 9 22 9C22.5523 9 23 8.55228 23 8V4Z"}),C.jsx("path",{d:"M23 16C23 15.4477 22.5523 15 22 15C21.4477 15 21 15.4477 21 16V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23H20C21.6569 23 23 21.6569 23 20V16Z"}),C.jsx("path",{d:"M4 21H8C8.55228 21 9 21.4477 9 22C9 22.5523 8.55228 23 8 23H4C2.34315 23 1 21.6569 1 20V16C1 15.4477 1.44772 15 2 15C2.55228 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21Z"}),C.jsx("path",{d:"M1 8C1 8.55228 1.44772 9 2 9C2.55228 9 3 8.55228 3 8L3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1H4C2.34315 1 1 2.34315 1 4V8Z"})]})})]}),k!=="mini"&&C.jsxs(C.Fragment,{children:[C.jsxs(Xs.div,{className:`
                            ${re.videoContainer} 
                            ${re.sendingVideo}
                            ${k==="expandSending"?re.expanded:""}
                            ${k==="expandReceiving"?re.contracted:""}
                            `,...k==="expandReceiving"?F():{},style:k==="expandReceiving"?{x:I,y:dt}:{},children:[C.jsx("video",{className:re.video,autoPlay:!0,poster:"./pp.svg",ref:w,muted:!0}),!y&&C.jsx("button",{className:re.mutedButton,children:C.jsx("svg",{width:"0.75rem",height:"0.75rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:C.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),C.jsx("button",{className:re.expandButton,onClick:lt=>{yt(lt,"sending")},children:C.jsxs("svg",{width:"0.75rem",height:"0.75rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M23 4C23 2.34315 21.6569 1 20 1H16C15.4477 1 15 1.44772 15 2C15 2.55228 15.4477 3 16 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 21.4477 9 22 9C22.5523 9 23 8.55228 23 8V4Z"}),C.jsx("path",{d:"M23 16C23 15.4477 22.5523 15 22 15C21.4477 15 21 15.4477 21 16V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23H20C21.6569 23 23 21.6569 23 20V16Z"}),C.jsx("path",{d:"M4 21H8C8.55228 21 9 21.4477 9 22C9 22.5523 8.55228 23 8 23H4C2.34315 23 1 21.6569 1 20V16C1 15.4477 1.44772 15 2 15C2.55228 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21Z"}),C.jsx("path",{d:"M1 8C1 8.55228 1.44772 9 2 9C2.55228 9 3 8.55228 3 8L3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1H4C2.34315 1 1 2.34315 1 4V8Z"})]})})]}),C.jsxs("ul",{className:`${re.actionList} ${Z?re.shown:re.hidden}`,children:[C.jsx("li",{onClick:lt=>{ht(lt)},children:y?C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:C.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:C.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),C.jsx("li",{onClick:lt=>{Et(lt)},children:f?C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):C.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),C.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),C.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),C.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),C.jsx("li",{onClick:lt=>nt(lt),children:C.jsxs("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),C.jsx("path",{className:re.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),n==="calling"||n==="connected"?C.jsx("li",{className:re.endCall,onClick:lt=>{N(lt)},children:C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})}):C.jsx("li",{className:re.startCall,onClick:lt=>{tt(lt)},children:C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})})})]}),n==="idle"&&C.jsx("button",{onClick:()=>{u("hidden")},className:`${re.cancelButton} ${Z?re.shown:re.hidden}`,children:C.jsx("svg",{width:"1.5rem",height:"1.5rem",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})})]}),n==="calling"&&C.jsx("div",{className:re.callingIndicatorContainer,children:C.jsx("span",{className:re.callingIndicator,children:"Calling"})})]})}const qC="_videoCallContainer_1bhfk_1",HC="_videoContainer_1bhfk_13",GC="_image_1bhfk_18",FC="_sendingImage_1bhfk_25",QC="_receivingImage_1bhfk_29",Gr={videoCallContainer:qC,videoContainer:HC,image:GC,sendingImage:FC,receivingImage:QC};function YC(){const n=De.c(2);let t;n[0]===Symbol.for("react.memo_cache_sentinel")?(t=C.jsx("div",{className:Gr.videoContainer,children:C.jsx("img",{className:`${Gr.image} ${Gr.receivingImage}`,src:"./pp.svg",alt:"Profile picture of receiver"})}),n[0]=t):t=n[0];let i;return n[1]===Symbol.for("react.memo_cache_sentinel")?(i=C.jsxs("div",{className:Gr.videoCallContainer,children:[t,C.jsx("div",{className:Gr.videoContainer,children:C.jsx("img",{className:`${Gr.image} ${Gr.sendingImage}`,src:"./pp.svg",alt:"Profile picture of sender"})})]}),n[1]=i):i=n[1],i}function KC(){const n=De.c(30);console.log("Chat Page rendered!");const{longPressed:t}=$.useContext(Jn),i=Lt(nR),r=Lt(eR),o=Lt(tR),u=Lt(WC),f=Lt(JC),m=Lt(ZC),y=Lt($C),g=Lt(XC);let v;n[0]!==t||n[1]!==y||n[2]!==g?(v=()=>{const w=()=>{t.current===!1&&(y(!1),g(!1))};return document.addEventListener("click",w),()=>{document.removeEventListener("click",w)}},n[0]=t,n[1]=y,n[2]=g,n[3]=v):v=n[3];let b;n[4]===Symbol.for("react.memo_cache_sentinel")?(b=[],n[4]=b):b=n[4],$.useLayoutEffect(v,b);let T;n[5]!==f?(T=C.jsx("div",{className:Xc.videoContainer,children:f!=="hidden"?C.jsx(BC,{callState:f}):C.jsx(YC,{})}),n[5]=f,n[6]=T):T=n[6];let R,M;n[7]===Symbol.for("react.memo_cache_sentinel")?(R=C.jsx(z8,{}),M=C.jsx(Iw,{}),n[7]=R,n[8]=M):(R=n[7],M=n[8]);let U;n[9]!==i?(U=i&&C.jsx(I8,{}),n[9]=i,n[10]=U):U=n[10];let k;n[11]===Symbol.for("react.memo_cache_sentinel")?(k=C.jsx(oC,{}),n[11]=k):k=n[11];let B;n[12]!==r?(B=r&&C.jsx(w8,{}),n[12]=r,n[13]=B):B=n[13];let Z;n[14]!==o?(Z=o&&C.jsx(v8,{}),n[14]=o,n[15]=Z):Z=n[15];let X;n[16]!==u?(X=u&&C.jsx(O8,{imageSource:u.src,imageSent:u.sent}),n[16]=u,n[17]=X):X=n[17];let st;n[18]!==m?(st=m&&C.jsx(_C,{}),n[18]=m,n[19]=st):st=n[19];let W;n[20]!==st||n[21]!==U||n[22]!==B||n[23]!==Z||n[24]!==X?(W=C.jsxs("div",{className:Xc.chatContainer,children:[R,M,U,k,B,Z,X,st]}),n[20]=st,n[21]=U,n[22]=B,n[23]=Z,n[24]=X,n[25]=W):W=n[25];let Q;n[26]===Symbol.for("react.memo_cache_sentinel")?(Q=C.jsx("div",{className:Xc.settingsContainer}),n[26]=Q):Q=n[26];let D;return n[27]!==W||n[28]!==T?(D=C.jsxs("div",{className:Xc.chatPage,children:[T,W,Q]}),n[27]=W,n[28]=T,n[29]=D):D=n[29],D}function XC(n){return n.setReactionsShown}function $C(n){return n.setActionsShown}function ZC(n){return n.incomingCall}function JC(n){return n.videoCall}function WC(n){return n.imageDialog}function tR(n){return n.actionsShown}function eR(n){return n.reactionsShown}function nR(n){return n.replying}function iR(){const n=De.c(5),{connected:t,peerConnection:i}=$.useContext(An);let r;n[0]!==i.current?(r=()=>{const f=rR;return document.addEventListener("contextmenu",f),document.addEventListener("touchstart",sR,{passive:!1}),()=>{var m;document.removeEventListener("contextmenu",f),document.removeEventListener("touchstart",f),(m=i.current)==null||m.close()}},n[0]=i.current,n[1]=r):r=n[1];let o;n[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],n[2]=o):o=n[2],$.useEffect(r,o);let u;return n[3]!==t?(u=C.jsx(kE,{children:t?C.jsx(FE,{children:C.jsx(KC,{})}):C.jsx(h8,{})}),n[3]=t,n[4]=u):u=n[4],u}function sR(n){n.touches.length>1&&n.preventDefault()}function rR(n){return n.preventDefault()}t5.createRoot(document.getElementById("root")).render(C.jsx(s5,{children:C.jsx($.StrictMode,{children:C.jsx(iR,{})})}));
