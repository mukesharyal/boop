import{j as e,u as f,a as C,w as b,r as m,C as y,s as g}from"./index-GUb0HLa5.js";const _="_navContainer_1gt4t_1",k="_logo_1gt4t_9",w="_navList_1gt4t_14",N="_hamburger_1gt4t_29",a={navContainer:_,logo:k,navList:w,hamburger:N};function L(){return e.jsxs("nav",{"aria-label":"Main Navigation",className:a.navContainer,children:[e.jsx("a",{href:"/",className:a.logo,"aria-label":"Homepage",children:"boop"}),e.jsx("a",{className:a.hamburger,"aria-label":"Expand for menu",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[e.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),e.jsxs("ul",{className:a.navList,children:[e.jsx("li",{className:a.navItem,children:e.jsx("a",{href:"#about",className:a.navLink,children:"About"})}),e.jsx("li",{className:a.navItem,children:e.jsx("a",{href:"#projects",className:a.navLink,children:"Policy"})}),e.jsx("li",{className:a.navItem,children:e.jsx("a",{href:"#contact",className:a.navLink,children:"Contact"})})]})]})}const D="_mainContainer_c2hxc_1",S="_inputCard_c2hxc_17",R="_linkInput_c2hxc_49",I="_loaderWrapper_c2hxc_81",T="_loader_c2hxc_81",h={mainContainer:D,inputCard:S,linkInput:R,loaderWrapper:I,loader:T};async function W(n,o,t,c){console.log("Starting the createLink function! At the beginning of the function, the state = ",n.iceGatheringState);let s=await C({senderName:t,senderDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},senderCandidates:o.current,receiverName:"",receiverDescription:"",receiverCandidates:""});return console.log("The session has been added to Firebase by the sender! Now, waiting for the receiver!"),b(s,async i=>{await n.current.setRemoteDescription(new RTCSessionDescription(i.receiverDescription));for(const l of i.receiverCandidates)await n.current.addIceCandidate(new RTCIceCandidate(l))},c),s}async function F(n,o,t,c){return console.log("After the waiting, the state = ",n.current.iceGatheringState),await f(c,{receiverName:t,receiverDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},receiverCandidates:o.current}),"success"}const A=new URLSearchParams(window.location.search),r=A.get("link");function E(n){n.preventDefault(),navigator.clipboard.writeText(n.target.elements.link.value)}const G=()=>{const[n,o]=m.useState(!1),t=m.useRef(null),c=async v=>{const d=new AudioContext;if(d.createBuffer(1,d.sampleRate*10,d.sampleRate),d.onstatechange=()=>{console.log("AudioContext state:",d.state)},v.preventDefault(),o(!0),r){let u=await F(s,i,t.current.value,r);console.log(u),u?u=="success"&&(s.current.ondatachannel=j=>{l.current=j.channel,console.log("The data channel has been established!"),x(!0)}):alert("The link you gave doesn't exist.")}else{let u=await W(s,i,t.current.value,p);t.current.value=`https://localhost:5173/?link=${u}`,t.current.disabled=!0,navigator.clipboard.writeText(t.current.value)}},{peerConnection:s,iceCandidates:i,dataChannel:l,peerName:p,setConnected:x}=m.useContext(y);return m.useEffect(()=>{r?g("receiver",s,l,i,x,p,r):g("sender",s,l,i,x,p,r)},[]),e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsx("main",{className:h.mainContainer,children:e.jsx("section",{className:h.inputCard,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:h.loaderWrapper,children:e.jsx("div",{className:h.loader})}),e.jsx("h1",{children:r?"Joining the chat":"Waiting for other person to join"}),!r&&e.jsxs("form",{onSubmit:E,children:[e.jsx("input",{autoFocus:!0,name:"link",ref:t,title:"Copy this link",className:h.linkInput}),e.jsx("br",{}),e.jsx("button",{name:"copyLinkButton",children:"Copy Link"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h1",{children:["Welcome to Boop.",e.jsx("br",{}),"Let's Get Started!"]}),e.jsxs("form",{onSubmit:c,children:[e.jsx("input",{name:"name",required:!0,minLength:2,maxLength:20,autoComplete:"off",type:"text",placeholder:"Your Name",title:"Enter your name",id:"name",ref:t}),e.jsx("br",{}),r?e.jsx("button",{type:"submit",children:"Join Chat"}):e.jsx("button",{type:"submit",children:"Create Link"})]})]})})})]})};export{G as default};
