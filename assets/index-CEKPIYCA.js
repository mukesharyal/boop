(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function G6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var l1={exports:{}},Dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function F6(){if(x2)return Dl;x2=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:n,type:r,key:h,ref:o!==void 0?o:null,props:u}}return Dl.Fragment=t,Dl.jsx=i,Dl.jsxs=i,Dl}var I2;function Q6(){return I2||(I2=1,l1.exports=F6()),l1.exports}var C=Q6(),u1={exports:{}},Nt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function Y6(){if(D2)return Nt;D2=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,P={};function k(V,et,ct){this.props=V,this.context=et,this.refs=P,this.updater=ct||R}k.prototype.isReactComponent={},k.prototype.setState=function(V,et){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,et,"setState")},k.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function B(){}B.prototype=k.prototype;function Z(V,et,ct){this.props=V,this.context=et,this.refs=P,this.updater=ct||R}var H=Z.prototype=new B;H.constructor=Z,M(H,k.prototype),H.isPureReactComponent=!0;var J=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},it=Object.prototype.hasOwnProperty;function I(V,et,ct,ot,gt,Et){return ct=Et.ref,{$$typeof:n,type:V,key:et,ref:ct!==void 0?ct:null,props:Et}}function w(V,et){return I(V.type,et,void 0,void 0,void 0,V.props)}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function N(V){var et={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return et[ct]})}var L=/\/+/g;function j(V,et){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):et.toString(36)}function D(){}function dt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(D,D):(V.status="pending",V.then(function(et){V.status==="pending"&&(V.status="fulfilled",V.value=et)},function(et){V.status==="pending"&&(V.status="rejected",V.reason=et)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function mt(V,et,ct,ot,gt){var Et=typeof V;(Et==="undefined"||Et==="boolean")&&(V=null);var _t=!1;if(V===null)_t=!0;else switch(Et){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(V.$$typeof){case n:case t:_t=!0;break;case _:return _t=V._init,mt(_t(V._payload),et,ct,ot,gt)}}if(_t)return gt=gt(V),_t=ot===""?"."+j(V,0):ot,J(gt)?(ct="",_t!=null&&(ct=_t.replace(L,"$&/")+"/"),mt(gt,et,ct,"",function(qt){return qt})):gt!=null&&(x(gt)&&(gt=w(gt,ct+(gt.key==null||V&&V.key===gt.key?"":(""+gt.key).replace(L,"$&/")+"/")+_t)),et.push(gt)),1;_t=0;var Ot=ot===""?".":ot+":";if(J(V))for(var xt=0;xt<V.length;xt++)ot=V[xt],Et=Ot+j(ot,xt),_t+=mt(ot,et,ct,Et,gt);else if(xt=T(V),typeof xt=="function")for(V=xt.call(V),xt=0;!(ot=V.next()).done;)ot=ot.value,Et=Ot+j(ot,xt++),_t+=mt(ot,et,ct,Et,gt);else if(Et==="object"){if(typeof V.then=="function")return mt(dt(V),et,ct,ot,gt);throw et=String(V),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return _t}function Y(V,et,ct){if(V==null)return V;var ot=[],gt=0;return mt(V,ot,"","",function(Et){return et.call(ct,Et,gt++)}),ot}function W(V){if(V._status===-1){var et=V._result;et=et(),et.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=et)}if(V._status===1)return V._result.default;throw V._result}var ut=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function pt(){}return Nt.Children={map:Y,forEach:function(V,et,ct){Y(V,function(){et.apply(this,arguments)},ct)},count:function(V){var et=0;return Y(V,function(){et++}),et},toArray:function(V){return Y(V,function(et){return et})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Nt.Component=k,Nt.Fragment=i,Nt.Profiler=o,Nt.PureComponent=Z,Nt.StrictMode=r,Nt.Suspense=y,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return z.H.useMemoCache(V)}},Nt.cache=function(V){return function(){return V.apply(null,arguments)}},Nt.cloneElement=function(V,et,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ot=M({},V.props),gt=V.key,Et=void 0;if(et!=null)for(_t in et.ref!==void 0&&(Et=void 0),et.key!==void 0&&(gt=""+et.key),et)!it.call(et,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&et.ref===void 0||(ot[_t]=et[_t]);var _t=arguments.length-2;if(_t===1)ot.children=ct;else if(1<_t){for(var Ot=Array(_t),xt=0;xt<_t;xt++)Ot[xt]=arguments[xt+2];ot.children=Ot}return I(V.type,gt,void 0,void 0,Et,ot)},Nt.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Nt.createElement=function(V,et,ct){var ot,gt={},Et=null;if(et!=null)for(ot in et.key!==void 0&&(Et=""+et.key),et)it.call(et,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(gt[ot]=et[ot]);var _t=arguments.length-2;if(_t===1)gt.children=ct;else if(1<_t){for(var Ot=Array(_t),xt=0;xt<_t;xt++)Ot[xt]=arguments[xt+2];gt.children=Ot}if(V&&V.defaultProps)for(ot in _t=V.defaultProps,_t)gt[ot]===void 0&&(gt[ot]=_t[ot]);return I(V,Et,void 0,void 0,null,gt)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(V){return{$$typeof:m,render:V}},Nt.isValidElement=x,Nt.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:W}},Nt.memo=function(V,et){return{$$typeof:g,type:V,compare:et===void 0?null:et}},Nt.startTransition=function(V){var et=z.T,ct={};z.T=ct;try{var ot=V(),gt=z.S;gt!==null&&gt(ct,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(pt,ut)}catch(Et){ut(Et)}finally{z.T=et}},Nt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Nt.use=function(V){return z.H.use(V)},Nt.useActionState=function(V,et,ct){return z.H.useActionState(V,et,ct)},Nt.useCallback=function(V,et){return z.H.useCallback(V,et)},Nt.useContext=function(V){return z.H.useContext(V)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(V,et){return z.H.useDeferredValue(V,et)},Nt.useEffect=function(V,et,ct){var ot=z.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ot.useEffect(V,et)},Nt.useId=function(){return z.H.useId()},Nt.useImperativeHandle=function(V,et,ct){return z.H.useImperativeHandle(V,et,ct)},Nt.useInsertionEffect=function(V,et){return z.H.useInsertionEffect(V,et)},Nt.useLayoutEffect=function(V,et){return z.H.useLayoutEffect(V,et)},Nt.useMemo=function(V,et){return z.H.useMemo(V,et)},Nt.useOptimistic=function(V,et){return z.H.useOptimistic(V,et)},Nt.useReducer=function(V,et,ct){return z.H.useReducer(V,et,ct)},Nt.useRef=function(V){return z.H.useRef(V)},Nt.useState=function(V){return z.H.useState(V)},Nt.useSyncExternalStore=function(V,et,ct){return z.H.useSyncExternalStore(V,et,ct)},Nt.useTransition=function(){return z.H.useTransition()},Nt.version="19.1.0",Nt}var M2;function Mf(){return M2||(M2=1,u1.exports=Y6()),u1.exports}var K=Mf();const Kr=G6(K);var c1={exports:{}},Ml={},f1={exports:{}},h1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function K6(){return V2||(V2=1,function(n){function t(Y,W){var ut=Y.length;Y.push(W);t:for(;0<ut;){var pt=ut-1>>>1,V=Y[pt];if(0<o(V,W))Y[pt]=W,Y[ut]=V,ut=pt;else break t}}function i(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var W=Y[0],ut=Y.pop();if(ut!==W){Y[0]=ut;t:for(var pt=0,V=Y.length,et=V>>>1;pt<et;){var ct=2*(pt+1)-1,ot=Y[ct],gt=ct+1,Et=Y[gt];if(0>o(ot,ut))gt<V&&0>o(Et,ot)?(Y[pt]=Et,Y[gt]=ut,pt=gt):(Y[pt]=ot,Y[ct]=ut,pt=ct);else if(gt<V&&0>o(Et,ut))Y[pt]=Et,Y[gt]=ut,pt=gt;else break t}}return W}function o(Y,W){var ut=Y.sortIndex-W.sortIndex;return ut!==0?ut:Y.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var y=[],g=[],_=1,b=null,T=3,R=!1,M=!1,P=!1,k=!1,B=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function J(Y){for(var W=i(g);W!==null;){if(W.callback===null)r(g);else if(W.startTime<=Y)r(g),W.sortIndex=W.expirationTime,t(y,W);else break;W=i(g)}}function z(Y){if(P=!1,J(Y),!M)if(i(y)!==null)M=!0,it||(it=!0,j());else{var W=i(g);W!==null&&mt(z,W.startTime-Y)}}var it=!1,I=-1,w=5,x=-1;function N(){return k?!0:!(n.unstable_now()-x<w)}function L(){if(k=!1,it){var Y=n.unstable_now();x=Y;var W=!0;try{t:{M=!1,P&&(P=!1,Z(I),I=-1),R=!0;var ut=T;try{e:{for(J(Y),b=i(y);b!==null&&!(b.expirationTime>Y&&N());){var pt=b.callback;if(typeof pt=="function"){b.callback=null,T=b.priorityLevel;var V=pt(b.expirationTime<=Y);if(Y=n.unstable_now(),typeof V=="function"){b.callback=V,J(Y),W=!0;break e}b===i(y)&&r(y),J(Y)}else r(y);b=i(y)}if(b!==null)W=!0;else{var et=i(g);et!==null&&mt(z,et.startTime-Y),W=!1}}break t}finally{b=null,T=ut,R=!1}W=void 0}}finally{W?j():it=!1}}}var j;if(typeof H=="function")j=function(){H(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,dt=D.port2;D.port1.onmessage=L,j=function(){dt.postMessage(null)}}else j=function(){B(L,0)};function mt(Y,W){I=B(function(){Y(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var W=3;break;default:W=T}var ut=T;T=W;try{return Y()}finally{T=ut}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(Y,W){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ut=T;T=Y;try{return W()}finally{T=ut}},n.unstable_scheduleCallback=function(Y,W,ut){var pt=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?pt+ut:pt):ut=pt,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ut+V,Y={id:_++,callback:W,priorityLevel:Y,startTime:ut,expirationTime:V,sortIndex:-1},ut>pt?(Y.sortIndex=ut,t(g,Y),i(y)===null&&Y===i(g)&&(P?(Z(I),I=-1):P=!0,mt(z,ut-pt))):(Y.sortIndex=V,t(y,Y),M||R||(M=!0,it||(it=!0,j()))),Y},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Y){var W=T;return function(){var ut=T;T=W;try{return Y.apply(this,arguments)}finally{T=ut}}}}(h1)),h1}var O2;function X6(){return O2||(O2=1,f1.exports=K6()),f1.exports}var d1={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function $6(){if(N2)return on;N2=1;var n=Mf();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:g,implementation:_}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(y,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,_)},on.flushSync=function(y){var g=h.T,_=r.p;try{if(h.T=null,r.p=2,y)return y()}finally{h.T=g,r.p=_,r.d.f()}},on.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},on.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},on.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var _=g.as,b=m(_,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:R}):_==="script"&&r.d.X(y,{crossOrigin:b,integrity:T,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=m(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},on.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,b=m(_,g.crossOrigin);r.d.L(y,_,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(y,g){if(typeof y=="string")if(g){var _=m(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},on.requestFormReset=function(y){r.d.r(y)},on.unstable_batchedUpdates=function(y,g){return y(g)},on.useFormState=function(y,g,_){return h.H.useFormState(y,g,_)},on.useFormStatus=function(){return h.H.useHostTransitionStatus()},on.version="19.1.0",on}var L2;function V_(){if(L2)return d1.exports;L2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),d1.exports=$6(),d1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function Z6(){if(k2)return Ml;k2=1;var n=X6(),t=Mf(),i=V_();function r(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function h(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(r(188))}function y(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(r(188));return s!==e?null:e}for(var a=e,l=s;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),e;if(d===l)return m(f),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var E=!1,S=f.child;S;){if(S===a){E=!0,a=f,l=d;break}if(S===l){E=!0,l=f,a=d;break}S=S.sibling}if(!E){for(S=d.child;S;){if(S===a){E=!0,a=d,l=f;break}if(S===l){E=!0,l=d,a=f;break}S=S.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:s}function g(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=g(e),s!==null)return s;e=e.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),H=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),it=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function j(e){return e===null||typeof e!="object"?null:(e=L&&e[L]||e["@@iterator"],typeof e=="function"?e:null)}var D=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===D?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case k:return"Profiler";case P:return"StrictMode";case z:return"Suspense";case it:return"SuspenseList";case x:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case H:return(e.displayName||"Context")+".Provider";case Z:return(e._context.displayName||"Context")+".Consumer";case J:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return s=e.displayName||null,s!==null?s:dt(e.type)||"Memo";case w:s=e._payload,e=e._init;try{return dt(e(s))}catch{}}return null}var mt=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},pt=[],V=-1;function et(e){return{current:e}}function ct(e){0>V||(e.current=pt[V],pt[V]=null,V--)}function ot(e,s){V++,pt[V]=e.current,e.current=s}var gt=et(null),Et=et(null),_t=et(null),Ot=et(null);function xt(e,s){switch(ot(_t,s),ot(Et,e),ot(gt,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?n2(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=n2(s),e=i2(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ct(gt),ot(gt,e)}function qt(){ct(gt),ct(Et),ct(_t)}function ae(e){e.memoizedState!==null&&ot(Ot,e);var s=gt.current,a=i2(s,e.type);s!==a&&(ot(Et,e),ot(gt,a))}function Ae(e){Et.current===e&&(ct(gt),ct(Et)),Ot.current===e&&(ct(Ot),wl._currentValue=ut)}var ve=Object.prototype.hasOwnProperty,Oe=n.unstable_scheduleCallback,qe=n.unstable_cancelCallback,we=n.unstable_shouldYield,kn=n.unstable_requestPaint,Xe=n.unstable_now,fr=n.unstable_getCurrentPriorityLevel,Pn=n.unstable_ImmediatePriority,wn=n.unstable_UserBlockingPriority,ni=n.unstable_NormalPriority,hi=n.unstable_LowPriority,Cn=n.unstable_IdlePriority,jn=n.log,ji=n.unstable_setDisableYieldValue,$t=null,Ht=null;function fn(e){if(typeof jn=="function"&&ji(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode($t,e)}catch{}}var ce=Math.clz32?Math.clz32:hr,ra=Math.log,ch=Math.LN2;function hr(e){return e>>>=0,e===0?32:31-(ra(e)/ch|0)|0}var dr=256,mr=4194304;function ii(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function aa(e,s,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=ii(l):(E&=S,E!==0?f=ii(E):a||(a=S&~e,a!==0&&(f=ii(a))))):(S=l&~d,S!==0?f=ii(S):E!==0?f=ii(E):a||(a=l&~e,a!==0&&(f=ii(a)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:f}function gr(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function wo(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Co(){var e=dr;return dr<<=1,(dr&4194048)===0&&(dr=256),e}function Ro(){var e=mr;return mr<<=1,(mr&62914560)===0&&(mr=4194304),e}function Ui(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function zi(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xo(e,s,a,l,f,d){var E=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,O=e.expirationTimes,Q=e.hiddenUpdates;for(a=E&~a;0<a;){var nt=31-ce(a),rt=1<<nt;S[nt]=0,O[nt]=-1;var X=Q[nt];if(X!==null)for(Q[nt]=null,nt=0;nt<X.length;nt++){var $=X[nt];$!==null&&($.lane&=-536870913)}a&=~rt}l!==0&&di(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(E&~s))}function di(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-ce(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Io(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var l=31-ce(a),f=1<<l;f&s|e[l]&s&&(e[l]|=s),a&=~f}}function ys(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function oa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function _s(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:b2(e.type))}function Su(e,s){var a=W.p;try{return W.p=e,s()}finally{W.p=a}}var fe=Math.random().toString(36).slice(2),Ne="__reactFiber$"+fe,Ce="__reactProps$"+fe,Un="__reactContainer$"+fe,Do="__reactEvents$"+fe,fh="__reactListeners$"+fe,vs="__reactHandles$"+fe,Au="__reactResources$"+fe,pr="__reactMarker$"+fe;function Es(e){delete e[Ne],delete e[Ce],delete e[Do],delete e[fh],delete e[vs]}function Bi(e){var s=e[Ne];if(s)return s;for(var a=e.parentNode;a;){if(s=a[Un]||a[Ne]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=o2(e);e!==null;){if(a=e[Ne])return a;e=o2(e)}return s}e=a,a=e.parentNode}return null}function mi(e){if(e=e[Ne]||e[Un]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function gi(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(r(33))}function hn(e){var s=e[Au];return s||(s=e[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ee(e){e[pr]=!0}var Mo=new Set,la={};function si(e,s){qi(e,s),qi(e+"Capture",s)}function qi(e,s){for(la[e]=s,e=0;e<s.length;e++)Mo.add(s[e])}var wu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cu={},yr={};function Ru(e){return ve.call(yr,e)?!0:ve.call(Cu,e)?!1:wu.test(e)?yr[e]=!0:(Cu[e]=!0,!1)}function Ts(e,s,a){if(Ru(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function pi(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function $e(e,s,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+l)}}var _r,xu;function Hi(e){if(_r===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);_r=s&&s[1]||"",xu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_r+e+xu}var ua=!1;function ca(e,s){if(!e||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch($){var X=$}Reflect.construct(e,[],rt)}else{try{rt.call()}catch($){X=$}e.call(rt.prototype)}}else{try{throw Error()}catch($){X=$}(rt=e())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch($){if($&&X&&typeof $.stack=="string")return[$.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],S=d[1];if(E&&S){var O=E.split(`
`),Q=S.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Q.length&&!Q[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===Q.length)for(l=O.length-1,f=Q.length-1;1<=l&&0<=f&&O[l]!==Q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==Q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==Q[f]){var nt=`
`+O[l].replace(" at new "," at ");return e.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",e.displayName)),nt}while(1<=l&&0<=f);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Hi(a):""}function Vo(e){switch(e.tag){case 26:case 27:case 5:return Hi(e.type);case 16:return Hi("Lazy");case 13:return Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 15:return ca(e.type,!1);case 11:return ca(e.type.render,!1);case 1:return ca(e.type,!0);case 31:return Hi("Activity");default:return""}}function fa(e){try{var s="";do s+=Vo(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function dn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oo(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hh(e){var s=Oo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),l=""+e[s];if(!e.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ha(e){e._valueTracker||(e._valueTracker=hh(e))}function No(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return e&&(l=Oo(e)?e.checked?"true":"false":e.value),e=l,e!==a?(s.setValue(e),!0):!1}function vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var dh=/[\n"\\]/g;function Re(e){return e.replace(dh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Rn(e,s,a,l,f,d,E,S){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),s!=null?E==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+dn(s)):e.value!==""+dn(s)&&(e.value=""+dn(s)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),s!=null?bs(e,E,dn(s)):a!=null?bs(e,E,dn(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+dn(S):e.removeAttribute("name")}function Er(e,s,a,l,f,d,E,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null))return;a=a!=null?""+dn(a):"",s=s!=null?""+dn(s):a,S||s===e.value||(e.value=s),e.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function bs(e,s,a){s==="number"&&vr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Gi(e,s,a,l){if(e=e.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=s.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+dn(a),s=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}s!==null||e[f].disabled||(s=e[f])}s!==null&&(s.selected=!0)}}function ne(e,s,a){if(s!=null&&(s=""+dn(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+dn(a):""}function Tr(e,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(mt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=dn(s),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function zn(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Iu(e,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,a):typeof a!="number"||a===0||br.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Lo(e,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&Iu(e,f,l)}else for(var d in s)s.hasOwnProperty(d)&&Iu(e,d,s[d])}function ko(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function da(e){return gh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Fi=null;function Bn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qi=null,Yi=null;function Po(e){var s=mi(e);if(s&&(e=s.stateNode)){var a=e[Ce]||null;t:switch(e=s.stateNode,s.type){case"input":if(Rn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Re(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==e&&l.form===e.form){var f=l[Ce]||null;if(!f)throw Error(r(90));Rn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===e.form&&No(l)}break t;case"textarea":ne(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Gi(e,!!a.multiple,s,!1)}}}var yi=!1;function Du(e,s,a){if(yi)return e(s,a);yi=!0;try{var l=e(s);return l}finally{if(yi=!1,(Qi!==null||Yi!==null)&&(Sc(),Qi&&(s=Qi,e=Yi,Yi=Qi=null,Po(s),e)))for(s=0;s<e.length;s++)Po(e[s])}}function Sr(e,s){var a=e.stateNode;if(a===null)return null;var l=a[Ce]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(ri)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{qn=!1}var _i=null,Ss=null,Ki=null;function jo(){if(Ki)return Ki;var e,s=Ss,a=s.length,l,f="value"in _i?_i.value:_i.textContent,d=f.length;for(e=0;e<a&&s[e]===f[e];e++);var E=a-e;for(l=1;l<=E&&s[a-l]===f[d-l];l++);return Ki=f.slice(e,1<l?1-l:void 0)}function vi(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Ei(){return!0}function Uo(){return!1}function He(e){function s(a,l,f,d,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ei:Uo,this.isPropagationStopped=Uo,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),s}var Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=He(Jt),wr=_({},Jt,{view:0,detail:0}),Mu=He(wr),ga,pa,Ti,Cr=_({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ir,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ti&&(Ti&&e.type==="mousemove"?(ga=e.screenX-Ti.screenX,pa=e.screenY-Ti.screenY):pa=ga=0,Ti=e),ga)},movementY:function(e){return"movementY"in e?e.movementY:pa}}),Hn=He(Cr),Vu=_({},Cr,{dataTransfer:0}),ph=He(Vu),Rr=_({},wr,{relatedTarget:0}),ya=He(Rr),zo=_({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0}),_a=He(zo),Ou=_({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),va=He(Ou),yh=_({},Jt,{data:0}),Bo=He(yh),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qo(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Lu[e])?!!s[e]:!1}function Ir(){return qo}var ku=_({},wr,{key:function(e){if(e.key){var s=xr[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=vi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ir,charCode:function(e){return e.type==="keypress"?vi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ea=He(ku),Pu=_({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ho=He(Pu),Xi=_({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ir}),ju=He(Xi),Uu=_({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),zu=He(Uu),Bu=_({},Cr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ta=He(Bu),mn=_({},Jt,{newState:0,oldState:0}),qu=He(mn),Hu=[9,13,27,32],bi=ri&&"CompositionEvent"in window,c=null;ri&&"documentMode"in document&&(c=document.documentMode);var p=ri&&"TextEvent"in window&&!c,v=ri&&(!bi||c&&8<c&&11>=c),A=" ",G=!1;function tt(e,s){switch(e){case"keyup":return Hu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ht(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gt=!1;function Le(e,s){switch(e){case"compositionend":return ht(s);case"keypress":return s.which!==32?null:(G=!0,A);case"textInput":return e=s.data,e===A&&G?null:e;default:return null}}function Ft(e,s){if(Gt)return e==="compositionend"||!bi&&tt(e,s)?(e=jo(),Ki=Ss=_i=null,Gt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Ge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ke(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Ge[e.type]:s==="textarea"}function $i(e,s,a,l){Qi?Yi?Yi.push(l):Yi=[l]:Qi=l,s=Ic(s,"onChange"),0<s.length&&(a=new ma("onChange","change",null,a,l),e.push({event:a,listeners:s}))}var Ze=null,Si=null;function Go(e){Zp(e,0)}function Gu(e){var s=gi(e);if(No(s))return e}function _g(e,s){if(e==="change")return s}var vg=!1;if(ri){var _h;if(ri){var vh="oninput"in document;if(!vh){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),vh=typeof Eg.oninput=="function"}_h=vh}else _h=!1;vg=_h&&(!document.documentMode||9<document.documentMode)}function Tg(){Ze&&(Ze.detachEvent("onpropertychange",bg),Si=Ze=null)}function bg(e){if(e.propertyName==="value"&&Gu(Si)){var s=[];$i(s,Si,e,Bn(e)),Du(Go,s)}}function E4(e,s,a){e==="focusin"?(Tg(),Ze=s,Si=a,Ze.attachEvent("onpropertychange",bg)):e==="focusout"&&Tg()}function T4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gu(Si)}function b4(e,s){if(e==="click")return Gu(s)}function S4(e,s){if(e==="input"||e==="change")return Gu(s)}function A4(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var xn=typeof Object.is=="function"?Object.is:A4;function Fo(e,s){if(xn(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ve.call(s,f)||!xn(e[f],s[f]))return!1}return!0}function Sg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ag(e,s){var a=Sg(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=s&&l>=s)return{node:a,offset:s-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Sg(a)}}function wg(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?wg(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Cg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=vr(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=vr(e.document)}return s}function Eh(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var w4=ri&&"documentMode"in document&&11>=document.documentMode,ba=null,Th=null,Qo=null,bh=!1;function Rg(e,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bh||ba==null||ba!==vr(l)||(l=ba,"selectionStart"in l&&Eh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Qo&&Fo(Qo,l)||(Qo=l,l=Ic(Th,"onSelect"),0<l.length&&(s=new ma("onSelect","select",null,s,a),e.push({event:s,listeners:l}),s.target=ba)))}function Dr(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var Sa={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},Sh={},xg={};ri&&(xg=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Mr(e){if(Sh[e])return Sh[e];if(!Sa[e])return e;var s=Sa[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in xg)return Sh[e]=s[a];return e}var Ig=Mr("animationend"),Dg=Mr("animationiteration"),Mg=Mr("animationstart"),C4=Mr("transitionrun"),R4=Mr("transitionstart"),x4=Mr("transitioncancel"),Vg=Mr("transitionend"),Og=new Map,Ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ah.push("scrollEnd");function ai(e,s){Og.set(e,s),si(s,[e])}var Ng=new WeakMap;function Gn(e,s){if(typeof e=="object"&&e!==null){var a=Ng.get(e);return a!==void 0?a:(s={value:e,source:s,stack:fa(s)},Ng.set(e,s),s)}return{value:e,source:s,stack:fa(s)}}var Fn=[],Aa=0,wh=0;function Fu(){for(var e=Aa,s=wh=Aa=0;s<e;){var a=Fn[s];Fn[s++]=null;var l=Fn[s];Fn[s++]=null;var f=Fn[s];Fn[s++]=null;var d=Fn[s];if(Fn[s++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}d!==0&&Lg(a,f,d)}}function Qu(e,s,a,l){Fn[Aa++]=e,Fn[Aa++]=s,Fn[Aa++]=a,Fn[Aa++]=l,wh|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ch(e,s,a,l){return Qu(e,s,a,l),Yu(e)}function wa(e,s){return Qu(e,null,null,s),Yu(e)}function Lg(e,s,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&s!==null&&(f=31-ce(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[s]:l.push(s),s.lane=a|536870912),d):null}function Yu(e){if(50<yl)throw yl=0,Vd=null,Error(r(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Ca={};function I4(e,s,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,s,a,l){return new I4(e,s,a,l)}function Rh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zi(e,s){var a=e.alternate;return a===null?(a=In(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function kg(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Ku(e,s,a,l,f,d){var E=0;if(l=e,typeof e=="function")Rh(e)&&(E=1);else if(typeof e=="string")E=M6(e,a,gt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case x:return e=In(31,a,s,f),e.elementType=x,e.lanes=d,e;case M:return Vr(a.children,f,d,s);case P:E=8,f|=24;break;case k:return e=In(12,a,s,f|2),e.elementType=k,e.lanes=d,e;case z:return e=In(13,a,s,f),e.elementType=z,e.lanes=d,e;case it:return e=In(19,a,s,f),e.elementType=it,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:case H:E=10;break t;case Z:E=9;break t;case J:E=11;break t;case I:E=14;break t;case w:E=16,l=null;break t}E=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return s=In(E,a,s,f),s.elementType=e,s.type=l,s.lanes=d,s}function Vr(e,s,a,l){return e=In(7,e,l,s),e.lanes=a,e}function xh(e,s,a){return e=In(6,e,null,s),e.lanes=a,e}function Ih(e,s,a){return s=In(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var Ra=[],xa=0,Xu=null,$u=0,Qn=[],Yn=0,Or=null,Ji=1,Wi="";function Nr(e,s){Ra[xa++]=$u,Ra[xa++]=Xu,Xu=e,$u=s}function Pg(e,s,a){Qn[Yn++]=Ji,Qn[Yn++]=Wi,Qn[Yn++]=Or,Or=e;var l=Ji;e=Wi;var f=32-ce(l)-1;l&=~(1<<f),a+=1;var d=32-ce(s)+f;if(30<d){var E=f-f%5;d=(l&(1<<E)-1).toString(32),l>>=E,f-=E,Ji=1<<32-ce(s)+f|a<<f|l,Wi=d+e}else Ji=1<<d|a<<f|l,Wi=e}function Dh(e){e.return!==null&&(Nr(e,1),Pg(e,1,0))}function Mh(e){for(;e===Xu;)Xu=Ra[--xa],Ra[xa]=null,$u=Ra[--xa],Ra[xa]=null;for(;e===Or;)Or=Qn[--Yn],Qn[Yn]=null,Wi=Qn[--Yn],Qn[Yn]=null,Ji=Qn[--Yn],Qn[Yn]=null}var gn=null,ye=null,Zt=!1,Lr=null,Ai=!1,Vh=Error(r(519));function kr(e){var s=Error(r(418,""));throw Xo(Gn(s,e)),Vh}function jg(e){var s=e.stateNode,a=e.type,l=e.memoizedProps;switch(s[Ne]=e,s[Ce]=l,a){case"dialog":zt("cancel",s),zt("close",s);break;case"iframe":case"object":case"embed":zt("load",s);break;case"video":case"audio":for(a=0;a<vl.length;a++)zt(vl[a],s);break;case"source":zt("error",s);break;case"img":case"image":case"link":zt("error",s),zt("load",s);break;case"details":zt("toggle",s);break;case"input":zt("invalid",s),Er(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ha(s);break;case"select":zt("invalid",s);break;case"textarea":zt("invalid",s),Tr(s,l.value,l.defaultValue,l.children),ha(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||e2(s.textContent,a)?(l.popover!=null&&(zt("beforetoggle",s),zt("toggle",s)),l.onScroll!=null&&zt("scroll",s),l.onScrollEnd!=null&&zt("scrollend",s),l.onClick!=null&&(s.onclick=Dc),s=!0):s=!1,s||kr(e)}function Ug(e){for(gn=e.return;gn;)switch(gn.tag){case 5:case 13:Ai=!1;return;case 27:case 3:Ai=!0;return;default:gn=gn.return}}function Yo(e){if(e!==gn)return!1;if(!Zt)return Ug(e),Zt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Kd(e.type,e.memoizedProps)),a=!a),a&&ye&&kr(e),Ug(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){ye=li(e.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}ye=null}}else s===27?(s=ye,Us(e.type)?(e=Jd,Jd=null,ye=e):ye=s):ye=gn?li(e.stateNode.nextSibling):null;return!0}function Ko(){ye=gn=null,Zt=!1}function zg(){var e=Lr;return e!==null&&(vn===null?vn=e:vn.push.apply(vn,e),Lr=null),e}function Xo(e){Lr===null?Lr=[e]:Lr.push(e)}var Oh=et(null),Pr=null,ts=null;function As(e,s,a){ot(Oh,s._currentValue),s._currentValue=a}function es(e){e._currentValue=Oh.current,ct(Oh)}function Nh(e,s,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===a)break;e=e.return}}function Lh(e,s,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var E=f.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=f;for(var O=0;O<s.length;O++)if(S.context===s[O]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Nh(d.return,a,e),l||(E=null);break t}d=S.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Nh(E,a,e),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===e){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function $o(e,s,a,l){e=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=f.type;xn(f.pendingProps.value,E.value)||(e!==null?e.push(S):e=[S])}}else if(f===Ot.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(wl):e=[wl])}f=f.return}e!==null&&Lh(s,e,a,l),s.flags|=262144}function Zu(e){for(e=e.firstContext;e!==null;){if(!xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function jr(e){Pr=e,ts=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function an(e){return Bg(Pr,e)}function Ju(e,s){return Pr===null&&jr(e),Bg(e,s)}function Bg(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ts===null){if(e===null)throw Error(r(308));ts=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else ts=ts.next=s;return a}var D4=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},M4=n.unstable_scheduleCallback,V4=n.unstable_NormalPriority,Pe={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new D4,data:new Map,refCount:0}}function Zo(e){e.refCount--,e.refCount===0&&M4(V4,function(){e.controller.abort()})}var Jo=null,Ph=0,Ia=0,Da=null;function O4(e,s){if(Jo===null){var a=Jo=[];Ph=0,Ia=Ud(),Da={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ph++,s.then(qg,qg),s}function qg(){if(--Ph===0&&Jo!==null){Da!==null&&(Da.status="fulfilled");var e=Jo;Jo=null,Ia=0,Da=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function N4(e,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Hg=Y.S;Y.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&O4(e,s),Hg!==null&&Hg(e,s)};var Ur=et(null);function jh(){var e=Ur.current;return e!==null?e:le.pooledCache}function Wu(e,s){s===null?ot(Ur,Ur.current):ot(Ur,s.pool)}function Gg(){var e=jh();return e===null?null:{parent:Pe._currentValue,pool:e}}var Wo=Error(r(460)),Fg=Error(r(474)),tc=Error(r(542)),Uh={then:function(){}};function Qg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ec(){}function Yg(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(ec,ec),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Xg(e),e;default:if(typeof s.status=="string")s.then(ec,ec);else{if(e=le,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Xg(e),e}throw tl=s,Wo}}var tl=null;function Kg(){if(tl===null)throw Error(r(459));var e=tl;return tl=null,e}function Xg(e){if(e===Wo||e===tc)throw Error(r(483))}var ws=!1;function zh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Cs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Rs(e,s,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(te&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Yu(e),Lg(e,null,a),s}return Qu(e,l,s,a),Yu(e)}function el(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,Io(e,a)}}function qh(e,s){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?f=d=s:d=d.next=s}else f=d=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var Hh=!1;function nl(){if(Hh){var e=Da;if(e!==null)throw e}}function il(e,s,a,l){Hh=!1;var f=e.updateQueue;ws=!1;var d=f.firstBaseUpdate,E=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var O=S,Q=O.next;O.next=null,E===null?d=Q:E.next=Q,E=O;var nt=e.alternate;nt!==null&&(nt=nt.updateQueue,S=nt.lastBaseUpdate,S!==E&&(S===null?nt.firstBaseUpdate=Q:S.next=Q,nt.lastBaseUpdate=O))}if(d!==null){var rt=f.baseState;E=0,nt=Q=O=null,S=d;do{var X=S.lane&-536870913,$=X!==S.lane;if($?(Qt&X)===X:(l&X)===X){X!==0&&X===Ia&&(Hh=!0),nt!==null&&(nt=nt.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Rt=e,At=S;X=s;var re=a;switch(At.tag){case 1:if(Rt=At.payload,typeof Rt=="function"){rt=Rt.call(re,rt,X);break t}rt=Rt;break t;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=At.payload,X=typeof Rt=="function"?Rt.call(re,rt,X):Rt,X==null)break t;rt=_({},rt,X);break t;case 2:ws=!0}}X=S.callback,X!==null&&(e.flags|=64,$&&(e.flags|=8192),$=f.callbacks,$===null?f.callbacks=[X]:$.push(X))}else $={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},nt===null?(Q=nt=$,O=rt):nt=nt.next=$,E|=X;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;$=S,S=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);nt===null&&(O=rt),f.baseState=O,f.firstBaseUpdate=Q,f.lastBaseUpdate=nt,d===null&&(f.shared.lanes=0),Ls|=E,e.lanes=E,e.memoizedState=rt}}function $g(e,s){if(typeof e!="function")throw Error(r(191,e));e.call(s)}function Zg(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)$g(a[e],s)}var Ma=et(null),nc=et(0);function Jg(e,s){e=ls,ot(nc,e),ot(Ma,s),ls=e|s.baseLanes}function Gh(){ot(nc,ls),ot(Ma,Ma.current)}function Fh(){ls=nc.current,ct(Ma),ct(nc)}var xs=0,Lt=null,ie=null,xe=null,ic=!1,Va=!1,zr=!1,sc=0,sl=0,Oa=null,L4=0;function Te(){throw Error(r(321))}function Qh(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!xn(e[a],s[a]))return!1;return!0}function Yh(e,s,a,l,f,d){return xs=d,Lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=e===null||e.memoizedState===null?L0:k0,zr=!1,d=a(l,f),zr=!1,Va&&(d=t0(s,a,l,f)),Wg(e),d}function Wg(e){Y.H=cc;var s=ie!==null&&ie.next!==null;if(xs=0,xe=ie=Lt=null,ic=!1,sl=0,Oa=null,s)throw Error(r(300));e===null||Fe||(e=e.dependencies,e!==null&&Zu(e)&&(Fe=!0))}function t0(e,s,a,l){Lt=e;var f=0;do{if(Va&&(Oa=null),sl=0,Va=!1,25<=f)throw Error(r(301));if(f+=1,xe=ie=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=q4,d=s(a,l)}while(Va);return d}function k4(){var e=Y.H,s=e.useState()[0];return s=typeof s.then=="function"?rl(s):s,e=e.useState()[0],(ie!==null?ie.memoizedState:null)!==e&&(Lt.flags|=1024),s}function Kh(){var e=sc!==0;return sc=0,e}function Xh(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function $h(e){if(ic){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}ic=!1}xs=0,xe=ie=Lt=null,Va=!1,sl=sc=0,Oa=null}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?Lt.memoizedState=xe=e:xe=xe.next=e,xe}function Ie(){if(ie===null){var e=Lt.alternate;e=e!==null?e.memoizedState:null}else e=ie.next;var s=xe===null?Lt.memoizedState:xe.next;if(s!==null)xe=s,ie=e;else{if(e===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));ie=e,e={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},xe===null?Lt.memoizedState=xe=e:xe=xe.next=e}return xe}function Zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(e){var s=sl;return sl+=1,Oa===null&&(Oa=[]),e=Yg(Oa,e,s),s=Lt,(xe===null?s.memoizedState:xe.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?L0:k0),e}function rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rl(e);if(e.$$typeof===H)return an(e)}throw Error(r(438,String(e)))}function Jh(e){var s=null,a=Lt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Lt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Zh(),Lt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),l=0;l<e;l++)a[l]=N;return s.index++,a}function ns(e,s){return typeof s=="function"?s(e):s}function ac(e){var s=Ie();return Wh(s,ie,e)}function Wh(e,s,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var E=f.next;f.next=d.next,d.next=E}s.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{s=f.next;var S=E=null,O=null,Q=s,nt=!1;do{var rt=Q.lane&-536870913;if(rt!==Q.lane?(Qt&rt)===rt:(xs&rt)===rt){var X=Q.revertLane;if(X===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),rt===Ia&&(nt=!0);else if((xs&X)===X){Q=Q.next,X===Ia&&(nt=!0);continue}else rt={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(S=O=rt,E=d):O=O.next=rt,Lt.lanes|=X,Ls|=X;rt=Q.action,zr&&a(d,rt),d=Q.hasEagerState?Q.eagerState:a(d,rt)}else X={lane:rt,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},O===null?(S=O=X,E=d):O=O.next=X,Lt.lanes|=rt,Ls|=rt;Q=Q.next}while(Q!==null&&Q!==s);if(O===null?E=d:O.next=S,!xn(d,e.memoizedState)&&(Fe=!0,nt&&(a=Da,a!==null)))throw a;e.memoizedState=d,e.baseState=E,e.baseQueue=O,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function td(e){var s=Ie(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do d=e(d,E.action),E=E.next;while(E!==f);xn(d,s.memoizedState)||(Fe=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function e0(e,s,a){var l=Lt,f=Ie(),d=Zt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var E=!xn((ie||f).memoizedState,a);E&&(f.memoizedState=a,Fe=!0),f=f.queue;var S=s0.bind(null,l,f,e);if(al(2048,8,S,[e]),f.getSnapshot!==s||E||xe!==null&&xe.memoizedState.tag&1){if(l.flags|=2048,Na(9,oc(),i0.bind(null,l,f,a,s),null),le===null)throw Error(r(349));d||(xs&124)!==0||n0(l,s,a)}return a}function n0(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=Lt.updateQueue,s===null?(s=Zh(),Lt.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function i0(e,s,a,l){s.value=a,s.getSnapshot=l,r0(s)&&a0(e)}function s0(e,s,a){return a(function(){r0(s)&&a0(e)})}function r0(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!xn(e,a)}catch{return!0}}function a0(e){var s=wa(e,2);s!==null&&Nn(s,e,2)}function ed(e){var s=yn();if(typeof e=="function"){var a=e;if(e=a(),zr){fn(!0);try{a()}finally{fn(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},s}function o0(e,s,a,l){return e.baseState=a,Wh(e,ie,typeof l=="function"?l:ns)}function P4(e,s,a,l,f){if(uc(e))throw Error(r(485));if(e=s.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};Y.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,l0(s,d)):(d.next=a.next,s.pending=a.next=d)}}function l0(e,s){var a=s.action,l=s.payload,f=e.state;if(s.isTransition){var d=Y.T,E={};Y.T=E;try{var S=a(f,l),O=Y.S;O!==null&&O(E,S),u0(e,s,S)}catch(Q){nd(e,s,Q)}finally{Y.T=d}}else try{d=a(f,l),u0(e,s,d)}catch(Q){nd(e,s,Q)}}function u0(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){c0(e,s,l)},function(l){return nd(e,s,l)}):c0(e,s,a)}function c0(e,s,a){s.status="fulfilled",s.value=a,f0(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,l0(e,a)))}function nd(e,s,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,f0(s),s=s.next;while(s!==l)}e.action=null}function f0(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function h0(e,s){return s}function d0(e,s){if(Zt){var a=le.formState;if(a!==null){t:{var l=Lt;if(Zt){if(ye){e:{for(var f=ye,d=Ai;f.nodeType!==8;){if(!d){f=null;break e}if(f=li(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ye=li(f.nextSibling),l=f.data==="F!";break t}}kr(l)}l=!1}l&&(s=a[0])}}return a=yn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h0,lastRenderedState:s},a.queue=l,a=V0.bind(null,Lt,l),l.dispatch=a,l=ed(!1),d=od.bind(null,Lt,!1,l.queue),l=yn(),f={state:s,dispatch:null,action:e,pending:null},l.queue=f,a=P4.bind(null,Lt,f,d,a),f.dispatch=a,l.memoizedState=e,[s,a,!1]}function m0(e){var s=Ie();return g0(s,ie,e)}function g0(e,s,a){if(s=Wh(e,s,h0)[0],e=ac(ns)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=rl(s)}catch(E){throw E===Wo?tc:E}else l=s;s=Ie();var f=s.queue,d=f.dispatch;return a!==s.memoizedState&&(Lt.flags|=2048,Na(9,oc(),j4.bind(null,f,a),null)),[l,d,e]}function j4(e,s){e.action=s}function p0(e){var s=Ie(),a=ie;if(a!==null)return g0(s,a,e);Ie(),s=s.memoizedState,a=Ie();var l=a.queue.dispatch;return a.memoizedState=e,[s,l,!1]}function Na(e,s,a,l){return e={tag:e,create:a,deps:l,inst:s,next:null},s=Lt.updateQueue,s===null&&(s=Zh(),Lt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,s.lastEffect=e),e}function oc(){return{destroy:void 0,resource:void 0}}function y0(){return Ie().memoizedState}function lc(e,s,a,l){var f=yn();l=l===void 0?null:l,Lt.flags|=e,f.memoizedState=Na(1|s,oc(),a,l)}function al(e,s,a,l){var f=Ie();l=l===void 0?null:l;var d=f.memoizedState.inst;ie!==null&&l!==null&&Qh(l,ie.memoizedState.deps)?f.memoizedState=Na(s,d,a,l):(Lt.flags|=e,f.memoizedState=Na(1|s,d,a,l))}function _0(e,s){lc(8390656,8,e,s)}function v0(e,s){al(2048,8,e,s)}function E0(e,s){return al(4,2,e,s)}function T0(e,s){return al(4,4,e,s)}function b0(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function S0(e,s,a){a=a!=null?a.concat([e]):null,al(4,4,b0.bind(null,s,e),a)}function id(){}function A0(e,s){var a=Ie();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Qh(s,l[1])?l[0]:(a.memoizedState=[e,s],e)}function w0(e,s){var a=Ie();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Qh(s,l[1]))return l[0];if(l=e(),zr){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[l,s],l}function sd(e,s,a){return a===void 0||(xs&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=xp(),Lt.lanes|=e,Ls|=e,a)}function C0(e,s,a,l){return xn(a,s)?a:Ma.current!==null?(e=sd(e,a,l),xn(e,s)||(Fe=!0),e):(xs&42)===0?(Fe=!0,e.memoizedState=a):(e=xp(),Lt.lanes|=e,Ls|=e,s)}function R0(e,s,a,l,f){var d=W.p;W.p=d!==0&&8>d?d:8;var E=Y.T,S={};Y.T=S,od(e,!1,s,a);try{var O=f(),Q=Y.S;if(Q!==null&&Q(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var nt=N4(O,l);ol(e,s,nt,On(e))}else ol(e,s,l,On(e))}catch(rt){ol(e,s,{then:function(){},status:"rejected",reason:rt},On())}finally{W.p=d,Y.T=E}}function U4(){}function rd(e,s,a,l){if(e.tag!==5)throw Error(r(476));var f=x0(e).queue;R0(e,f,s,ut,a===null?U4:function(){return I0(e),a(l)})}function x0(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:ut},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function I0(e){var s=x0(e).next.queue;ol(e,s,{},On())}function ad(){return an(wl)}function D0(){return Ie().memoizedState}function M0(){return Ie().memoizedState}function z4(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=On();e=Cs(a);var l=Rs(s,e,a);l!==null&&(Nn(l,s,a),el(l,s,a)),s={cache:kh()},e.payload=s;return}s=s.return}}function B4(e,s,a){var l=On();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},uc(e)?O0(s,a):(a=Ch(e,s,a,l),a!==null&&(Nn(a,e,l),N0(a,s,l)))}function V0(e,s,a){var l=On();ol(e,s,a,l)}function ol(e,s,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(uc(e))O0(s,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var E=s.lastRenderedState,S=d(E,a);if(f.hasEagerState=!0,f.eagerState=S,xn(S,E))return Qu(e,s,f,0),le===null&&Fu(),!1}catch{}finally{}if(a=Ch(e,s,f,l),a!==null)return Nn(a,e,l),N0(a,s,l),!0}return!1}function od(e,s,a,l){if(l={lane:2,revertLane:Ud(),action:l,hasEagerState:!1,eagerState:null,next:null},uc(e)){if(s)throw Error(r(479))}else s=Ch(e,a,l,2),s!==null&&Nn(s,e,2)}function uc(e){var s=e.alternate;return e===Lt||s!==null&&s===Lt}function O0(e,s){Va=ic=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function N0(e,s,a){if((a&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,Io(e,a)}}var cc={readContext:an,use:rc,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useLayoutEffect:Te,useInsertionEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useSyncExternalStore:Te,useId:Te,useHostTransitionStatus:Te,useFormState:Te,useActionState:Te,useOptimistic:Te,useMemoCache:Te,useCacheRefresh:Te},L0={readContext:an,use:rc,useCallback:function(e,s){return yn().memoizedState=[e,s===void 0?null:s],e},useContext:an,useEffect:_0,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,lc(4194308,4,b0.bind(null,s,e),a)},useLayoutEffect:function(e,s){return lc(4194308,4,e,s)},useInsertionEffect:function(e,s){lc(4,2,e,s)},useMemo:function(e,s){var a=yn();s=s===void 0?null:s;var l=e();if(zr){fn(!0);try{e()}finally{fn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(e,s,a){var l=yn();if(a!==void 0){var f=a(s);if(zr){fn(!0);try{a(s)}finally{fn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=B4.bind(null,Lt,e),[l.memoizedState,e]},useRef:function(e){var s=yn();return e={current:e},s.memoizedState=e},useState:function(e){e=ed(e);var s=e.queue,a=V0.bind(null,Lt,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:id,useDeferredValue:function(e,s){var a=yn();return sd(a,e,s)},useTransition:function(){var e=ed(!1);return e=R0.bind(null,Lt,e.queue,!0,!1),yn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var l=Lt,f=yn();if(Zt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),le===null)throw Error(r(349));(Qt&124)!==0||n0(l,s,a)}f.memoizedState=a;var d={value:a,getSnapshot:s};return f.queue=d,_0(s0.bind(null,l,d,e),[e]),l.flags|=2048,Na(9,oc(),i0.bind(null,l,d,a,s),null),a},useId:function(){var e=yn(),s=le.identifierPrefix;if(Zt){var a=Wi,l=Ji;a=(l&~(1<<32-ce(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=sc++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=L4++,s="«"+s+"r"+a.toString(32)+"»";return e.memoizedState=s},useHostTransitionStatus:ad,useFormState:d0,useActionState:d0,useOptimistic:function(e){var s=yn();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=od.bind(null,Lt,!0,a),a.dispatch=s,[e,s]},useMemoCache:Jh,useCacheRefresh:function(){return yn().memoizedState=z4.bind(null,Lt)}},k0={readContext:an,use:rc,useCallback:A0,useContext:an,useEffect:v0,useImperativeHandle:S0,useInsertionEffect:E0,useLayoutEffect:T0,useMemo:w0,useReducer:ac,useRef:y0,useState:function(){return ac(ns)},useDebugValue:id,useDeferredValue:function(e,s){var a=Ie();return C0(a,ie.memoizedState,e,s)},useTransition:function(){var e=ac(ns)[0],s=Ie().memoizedState;return[typeof e=="boolean"?e:rl(e),s]},useSyncExternalStore:e0,useId:D0,useHostTransitionStatus:ad,useFormState:m0,useActionState:m0,useOptimistic:function(e,s){var a=Ie();return o0(a,ie,e,s)},useMemoCache:Jh,useCacheRefresh:M0},q4={readContext:an,use:rc,useCallback:A0,useContext:an,useEffect:v0,useImperativeHandle:S0,useInsertionEffect:E0,useLayoutEffect:T0,useMemo:w0,useReducer:td,useRef:y0,useState:function(){return td(ns)},useDebugValue:id,useDeferredValue:function(e,s){var a=Ie();return ie===null?sd(a,e,s):C0(a,ie.memoizedState,e,s)},useTransition:function(){var e=td(ns)[0],s=Ie().memoizedState;return[typeof e=="boolean"?e:rl(e),s]},useSyncExternalStore:e0,useId:D0,useHostTransitionStatus:ad,useFormState:p0,useActionState:p0,useOptimistic:function(e,s){var a=Ie();return ie!==null?o0(a,ie,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Jh,useCacheRefresh:M0},La=null,ll=0;function fc(e){var s=ll;return ll+=1,La===null&&(La=[]),Yg(La,e,s)}function ul(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function hc(e,s){throw s.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(s),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function P0(e){var s=e._init;return s(e._payload)}function j0(e){function s(q,U){if(e){var F=q.deletions;F===null?(q.deletions=[U],q.flags|=16):F.push(U)}}function a(q,U){if(!e)return null;for(;U!==null;)s(q,U),U=U.sibling;return null}function l(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function f(q,U){return q=Zi(q,U),q.index=0,q.sibling=null,q}function d(q,U,F){return q.index=F,e?(F=q.alternate,F!==null?(F=F.index,F<U?(q.flags|=67108866,U):F):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function E(q){return e&&q.alternate===null&&(q.flags|=67108866),q}function S(q,U,F,st){return U===null||U.tag!==6?(U=xh(F,q.mode,st),U.return=q,U):(U=f(U,F),U.return=q,U)}function O(q,U,F,st){var vt=F.type;return vt===M?nt(q,U,F.props.children,st,F.key):U!==null&&(U.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===w&&P0(vt)===U.type)?(U=f(U,F.props),ul(U,F),U.return=q,U):(U=Ku(F.type,F.key,F.props,null,q.mode,st),ul(U,F),U.return=q,U)}function Q(q,U,F,st){return U===null||U.tag!==4||U.stateNode.containerInfo!==F.containerInfo||U.stateNode.implementation!==F.implementation?(U=Ih(F,q.mode,st),U.return=q,U):(U=f(U,F.children||[]),U.return=q,U)}function nt(q,U,F,st,vt){return U===null||U.tag!==7?(U=Vr(F,q.mode,st,vt),U.return=q,U):(U=f(U,F),U.return=q,U)}function rt(q,U,F){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=xh(""+U,q.mode,F),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return F=Ku(U.type,U.key,U.props,null,q.mode,F),ul(F,U),F.return=q,F;case R:return U=Ih(U,q.mode,F),U.return=q,U;case w:var st=U._init;return U=st(U._payload),rt(q,U,F)}if(mt(U)||j(U))return U=Vr(U,q.mode,F,null),U.return=q,U;if(typeof U.then=="function")return rt(q,fc(U),F);if(U.$$typeof===H)return rt(q,Ju(q,U),F);hc(q,U)}return null}function X(q,U,F,st){var vt=U!==null?U.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return vt!==null?null:S(q,U,""+F,st);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return F.key===vt?O(q,U,F,st):null;case R:return F.key===vt?Q(q,U,F,st):null;case w:return vt=F._init,F=vt(F._payload),X(q,U,F,st)}if(mt(F)||j(F))return vt!==null?null:nt(q,U,F,st,null);if(typeof F.then=="function")return X(q,U,fc(F),st);if(F.$$typeof===H)return X(q,U,Ju(q,F),st);hc(q,F)}return null}function $(q,U,F,st,vt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return q=q.get(F)||null,S(U,q,""+st,vt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case T:return q=q.get(st.key===null?F:st.key)||null,O(U,q,st,vt);case R:return q=q.get(st.key===null?F:st.key)||null,Q(U,q,st,vt);case w:var jt=st._init;return st=jt(st._payload),$(q,U,F,st,vt)}if(mt(st)||j(st))return q=q.get(F)||null,nt(U,q,st,vt,null);if(typeof st.then=="function")return $(q,U,F,fc(st),vt);if(st.$$typeof===H)return $(q,U,F,Ju(U,st),vt);hc(U,st)}return null}function Rt(q,U,F,st){for(var vt=null,jt=null,Tt=U,wt=U=0,Ye=null;Tt!==null&&wt<F.length;wt++){Tt.index>wt?(Ye=Tt,Tt=null):Ye=Tt.sibling;var Xt=X(q,Tt,F[wt],st);if(Xt===null){Tt===null&&(Tt=Ye);break}e&&Tt&&Xt.alternate===null&&s(q,Tt),U=d(Xt,U,wt),jt===null?vt=Xt:jt.sibling=Xt,jt=Xt,Tt=Ye}if(wt===F.length)return a(q,Tt),Zt&&Nr(q,wt),vt;if(Tt===null){for(;wt<F.length;wt++)Tt=rt(q,F[wt],st),Tt!==null&&(U=d(Tt,U,wt),jt===null?vt=Tt:jt.sibling=Tt,jt=Tt);return Zt&&Nr(q,wt),vt}for(Tt=l(Tt);wt<F.length;wt++)Ye=$(Tt,q,wt,F[wt],st),Ye!==null&&(e&&Ye.alternate!==null&&Tt.delete(Ye.key===null?wt:Ye.key),U=d(Ye,U,wt),jt===null?vt=Ye:jt.sibling=Ye,jt=Ye);return e&&Tt.forEach(function(Gs){return s(q,Gs)}),Zt&&Nr(q,wt),vt}function At(q,U,F,st){if(F==null)throw Error(r(151));for(var vt=null,jt=null,Tt=U,wt=U=0,Ye=null,Xt=F.next();Tt!==null&&!Xt.done;wt++,Xt=F.next()){Tt.index>wt?(Ye=Tt,Tt=null):Ye=Tt.sibling;var Gs=X(q,Tt,Xt.value,st);if(Gs===null){Tt===null&&(Tt=Ye);break}e&&Tt&&Gs.alternate===null&&s(q,Tt),U=d(Gs,U,wt),jt===null?vt=Gs:jt.sibling=Gs,jt=Gs,Tt=Ye}if(Xt.done)return a(q,Tt),Zt&&Nr(q,wt),vt;if(Tt===null){for(;!Xt.done;wt++,Xt=F.next())Xt=rt(q,Xt.value,st),Xt!==null&&(U=d(Xt,U,wt),jt===null?vt=Xt:jt.sibling=Xt,jt=Xt);return Zt&&Nr(q,wt),vt}for(Tt=l(Tt);!Xt.done;wt++,Xt=F.next())Xt=$(Tt,q,wt,Xt.value,st),Xt!==null&&(e&&Xt.alternate!==null&&Tt.delete(Xt.key===null?wt:Xt.key),U=d(Xt,U,wt),jt===null?vt=Xt:jt.sibling=Xt,jt=Xt);return e&&Tt.forEach(function(H6){return s(q,H6)}),Zt&&Nr(q,wt),vt}function re(q,U,F,st){if(typeof F=="object"&&F!==null&&F.type===M&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case T:t:{for(var vt=F.key;U!==null;){if(U.key===vt){if(vt=F.type,vt===M){if(U.tag===7){a(q,U.sibling),st=f(U,F.props.children),st.return=q,q=st;break t}}else if(U.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===w&&P0(vt)===U.type){a(q,U.sibling),st=f(U,F.props),ul(st,F),st.return=q,q=st;break t}a(q,U);break}else s(q,U);U=U.sibling}F.type===M?(st=Vr(F.props.children,q.mode,st,F.key),st.return=q,q=st):(st=Ku(F.type,F.key,F.props,null,q.mode,st),ul(st,F),st.return=q,q=st)}return E(q);case R:t:{for(vt=F.key;U!==null;){if(U.key===vt)if(U.tag===4&&U.stateNode.containerInfo===F.containerInfo&&U.stateNode.implementation===F.implementation){a(q,U.sibling),st=f(U,F.children||[]),st.return=q,q=st;break t}else{a(q,U);break}else s(q,U);U=U.sibling}st=Ih(F,q.mode,st),st.return=q,q=st}return E(q);case w:return vt=F._init,F=vt(F._payload),re(q,U,F,st)}if(mt(F))return Rt(q,U,F,st);if(j(F)){if(vt=j(F),typeof vt!="function")throw Error(r(150));return F=vt.call(F),At(q,U,F,st)}if(typeof F.then=="function")return re(q,U,fc(F),st);if(F.$$typeof===H)return re(q,U,Ju(q,F),st);hc(q,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,U!==null&&U.tag===6?(a(q,U.sibling),st=f(U,F),st.return=q,q=st):(a(q,U),st=xh(F,q.mode,st),st.return=q,q=st),E(q)):a(q,U)}return function(q,U,F,st){try{ll=0;var vt=re(q,U,F,st);return La=null,vt}catch(Tt){if(Tt===Wo||Tt===tc)throw Tt;var jt=In(29,Tt,null,q.mode);return jt.lanes=st,jt.return=q,jt}finally{}}}var ka=j0(!0),U0=j0(!1),Kn=et(null),wi=null;function Is(e){var s=e.alternate;ot(je,je.current&1),ot(Kn,e),wi===null&&(s===null||Ma.current!==null||s.memoizedState!==null)&&(wi=e)}function z0(e){if(e.tag===22){if(ot(je,je.current),ot(Kn,e),wi===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(wi=e)}}else Ds()}function Ds(){ot(je,je.current),ot(Kn,Kn.current)}function is(e){ct(Kn),wi===e&&(wi=null),ct(je)}var je=et(0);function dc(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Zd(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ld(e,s,a,l){s=e.memoizedState,a=a(l,s),a=a==null?s:_({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ud={enqueueSetState:function(e,s,a){e=e._reactInternals;var l=On(),f=Cs(l);f.payload=s,a!=null&&(f.callback=a),s=Rs(e,f,l),s!==null&&(Nn(s,e,l),el(s,e,l))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var l=On(),f=Cs(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Rs(e,f,l),s!==null&&(Nn(s,e,l),el(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=On(),l=Cs(a);l.tag=2,s!=null&&(l.callback=s),s=Rs(e,l,a),s!==null&&(Nn(s,e,a),el(s,e,a))}};function B0(e,s,a,l,f,d,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,E):s.prototype&&s.prototype.isPureReactComponent?!Fo(a,l)||!Fo(f,d):!0}function q0(e,s,a,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==e&&ud.enqueueReplaceState(s,s.state,null)}function Br(e,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(e=e.defaultProps){a===s&&(a=_({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}var mc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function H0(e){mc(e)}function G0(e){console.error(e)}function F0(e){mc(e)}function gc(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Q0(e,s,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function cd(e,s,a){return a=Cs(a),a.tag=3,a.payload={element:null},a.callback=function(){gc(e,s)},a}function Y0(e){return e=Cs(e),e.tag=3,e}function K0(e,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){Q0(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){Q0(s,a,l),typeof f!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function H4(e,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&$o(s,a,f,!0),a=Kn.current,a!==null){switch(a.tag){case 13:return wi===null?Nd():a.alternate===null&&_e===0&&(_e=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Uh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),kd(e,l,f)),!1;case 22:return a.flags|=65536,l===Uh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),kd(e,l,f)),!1}throw Error(r(435,a.tag))}return kd(e,l,f),Nd(),!1}if(Zt)return s=Kn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Vh&&(e=Error(r(422),{cause:l}),Xo(Gn(e,a)))):(l!==Vh&&(s=Error(r(423),{cause:l}),Xo(Gn(s,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Gn(l,a),f=cd(e.stateNode,l,f),qh(e,f),_e!==4&&(_e=2)),!1;var d=Error(r(520),{cause:l});if(d=Gn(d,a),pl===null?pl=[d]:pl.push(d),_e!==4&&(_e=2),s===null)return!0;l=Gn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=cd(a.stateNode,l,e),qh(a,e),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ks===null||!ks.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Y0(f),K0(f,e,a,l),qh(a,f),!1}a=a.return}while(a!==null);return!1}var X0=Error(r(461)),Fe=!1;function Je(e,s,a,l){s.child=e===null?U0(s,null,a,l):ka(s,e.child,a,l)}function $0(e,s,a,l,f){a=a.render;var d=s.ref;if("ref"in l){var E={};for(var S in l)S!=="ref"&&(E[S]=l[S])}else E=l;return jr(s),l=Yh(e,s,a,E,d,f),S=Kh(),e!==null&&!Fe?(Xh(e,s,f),ss(e,s,f)):(Zt&&S&&Dh(s),s.flags|=1,Je(e,s,l,f),s.child)}function Z0(e,s,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!Rh(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,J0(e,s,d,l,f)):(e=Ku(a.type,null,l,s,s.mode,f),e.ref=s.ref,e.return=s,s.child=e)}if(d=e.child,!_d(e,f)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(E,l)&&e.ref===s.ref)return ss(e,s,f)}return s.flags|=1,e=Zi(d,l),e.ref=s.ref,e.return=s,s.child=e}function J0(e,s,a,l,f){if(e!==null){var d=e.memoizedProps;if(Fo(d,l)&&e.ref===s.ref)if(Fe=!1,s.pendingProps=l=d,_d(e,f))(e.flags&131072)!==0&&(Fe=!0);else return s.lanes=e.lanes,ss(e,s,f)}return fd(e,s,a,l,f)}function W0(e,s,a){var l=s.pendingProps,f=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(f=s.child=e.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;s.childLanes=d&~l}else s.childLanes=0,s.child=null;return tp(e,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wu(s,d!==null?d.cachePool:null),d!==null?Jg(s,d):Gh(),z0(s);else return s.lanes=s.childLanes=536870912,tp(e,s,d!==null?d.baseLanes|a:a,a)}else d!==null?(Wu(s,d.cachePool),Jg(s,d),Ds(),s.memoizedState=null):(e!==null&&Wu(s,null),Gh(),Ds());return Je(e,s,f,a),s.child}function tp(e,s,a,l){var f=jh();return f=f===null?null:{parent:Pe._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},e!==null&&Wu(s,null),Gh(),z0(s),e!==null&&$o(e,s,l,!0),null}function pc(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function fd(e,s,a,l,f){return jr(s),a=Yh(e,s,a,l,void 0,f),l=Kh(),e!==null&&!Fe?(Xh(e,s,f),ss(e,s,f)):(Zt&&l&&Dh(s),s.flags|=1,Je(e,s,a,f),s.child)}function ep(e,s,a,l,f,d){return jr(s),s.updateQueue=null,a=t0(s,l,a,f),Wg(e),l=Kh(),e!==null&&!Fe?(Xh(e,s,d),ss(e,s,d)):(Zt&&l&&Dh(s),s.flags|=1,Je(e,s,a,d),s.child)}function np(e,s,a,l,f){if(jr(s),s.stateNode===null){var d=Ca,E=a.contextType;typeof E=="object"&&E!==null&&(d=an(E)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ud,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},zh(s),E=a.contextType,d.context=typeof E=="object"&&E!==null?an(E):Ca,d.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(ld(s,a,E,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&ud.enqueueReplaceState(d,d.state,null),il(s,l,d,f),nl(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){d=s.stateNode;var S=s.memoizedProps,O=Br(a,S);d.props=O;var Q=d.context,nt=a.contextType;E=Ca,typeof nt=="object"&&nt!==null&&(E=an(nt));var rt=a.getDerivedStateFromProps;nt=typeof rt=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,nt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||Q!==E)&&q0(s,d,l,E),ws=!1;var X=s.memoizedState;d.state=X,il(s,l,d,f),nl(),Q=s.memoizedState,S||X!==Q||ws?(typeof rt=="function"&&(ld(s,a,rt,l),Q=s.memoizedState),(O=ws||B0(s,a,O,l,X,Q,E))?(nt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=Q),d.props=l,d.state=Q,d.context=E,l=O):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Bh(e,s),E=s.memoizedProps,nt=Br(a,E),d.props=nt,rt=s.pendingProps,X=d.context,Q=a.contextType,O=Ca,typeof Q=="object"&&Q!==null&&(O=an(Q)),S=a.getDerivedStateFromProps,(Q=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==rt||X!==O)&&q0(s,d,l,O),ws=!1,X=s.memoizedState,d.state=X,il(s,l,d,f),nl();var $=s.memoizedState;E!==rt||X!==$||ws||e!==null&&e.dependencies!==null&&Zu(e.dependencies)?(typeof S=="function"&&(ld(s,a,S,l),$=s.memoizedState),(nt=ws||B0(s,a,nt,l,X,$,O)||e!==null&&e.dependencies!==null&&Zu(e.dependencies))?(Q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,O)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=$),d.props=l,d.state=$,d.context=O,l=nt):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(s.flags|=1024),l=!1)}return d=l,pc(e,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,e!==null&&l?(s.child=ka(s,e.child,null,f),s.child=ka(s,null,a,f)):Je(e,s,a,f),s.memoizedState=d.state,e=s.child):e=ss(e,s,f),e}function ip(e,s,a,l){return Ko(),s.flags|=256,Je(e,s,a,l),s.child}var hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dd(e){return{baseLanes:e,cachePool:Gg()}}function md(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=Xn),e}function sp(e,s,a){var l=s.pendingProps,f=!1,d=(s.flags&128)!==0,E;if((E=d)||(E=e!==null&&e.memoizedState===null?!1:(je.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,e===null){if(Zt){if(f?Is(s):Ds(),Zt){var S=ye,O;if(O=S){t:{for(O=S,S=Ai;O.nodeType!==8;){if(!S){S=null;break t}if(O=li(O.nextSibling),O===null){S=null;break t}}S=O}S!==null?(s.memoizedState={dehydrated:S,treeContext:Or!==null?{id:Ji,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},O=In(18,null,null,0),O.stateNode=S,O.return=s,s.child=O,gn=s,ye=null,O=!0):O=!1}O||kr(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Zd(S)?s.lanes=32:s.lanes=536870912,null;is(s)}return S=l.children,l=l.fallback,f?(Ds(),f=s.mode,S=yc({mode:"hidden",children:S},f),l=Vr(l,f,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,f=s.child,f.memoizedState=dd(a),f.childLanes=md(e,E,a),s.memoizedState=hd,l):(Is(s),gd(s,S))}if(O=e.memoizedState,O!==null&&(S=O.dehydrated,S!==null)){if(d)s.flags&256?(Is(s),s.flags&=-257,s=pd(e,s,a)):s.memoizedState!==null?(Ds(),s.child=e.child,s.flags|=128,s=null):(Ds(),f=l.fallback,S=s.mode,l=yc({mode:"visible",children:l.children},S),f=Vr(f,S,a,null),f.flags|=2,l.return=s,f.return=s,l.sibling=f,s.child=l,ka(s,e.child,null,a),l=s.child,l.memoizedState=dd(a),l.childLanes=md(e,E,a),s.memoizedState=hd,s=f);else if(Is(s),Zd(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var Q=E.dgst;E=Q,l=Error(r(419)),l.stack="",l.digest=E,Xo({value:l,source:null,stack:null}),s=pd(e,s,a)}else if(Fe||$o(e,s,a,!1),E=(a&e.childLanes)!==0,Fe||E){if(E=le,E!==null&&(l=a&-a,l=(l&42)!==0?1:ys(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,wa(e,l),Nn(E,e,l),X0;S.data==="$?"||Nd(),s=pd(e,s,a)}else S.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=O.treeContext,ye=li(S.nextSibling),gn=s,Zt=!0,Lr=null,Ai=!1,e!==null&&(Qn[Yn++]=Ji,Qn[Yn++]=Wi,Qn[Yn++]=Or,Ji=e.id,Wi=e.overflow,Or=s),s=gd(s,l.children),s.flags|=4096);return s}return f?(Ds(),f=l.fallback,S=s.mode,O=e.child,Q=O.sibling,l=Zi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,Q!==null?f=Zi(Q,f):(f=Vr(f,S,a,null),f.flags|=2),f.return=s,l.return=s,l.sibling=f,s.child=l,l=f,f=s.child,S=e.child.memoizedState,S===null?S=dd(a):(O=S.cachePool,O!==null?(Q=Pe._currentValue,O=O.parent!==Q?{parent:Q,pool:Q}:O):O=Gg(),S={baseLanes:S.baseLanes|a,cachePool:O}),f.memoizedState=S,f.childLanes=md(e,E,a),s.memoizedState=hd,l):(Is(s),a=e.child,e=a.sibling,a=Zi(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,e!==null&&(E=s.deletions,E===null?(s.deletions=[e],s.flags|=16):E.push(e)),s.child=a,s.memoizedState=null,a)}function gd(e,s){return s=yc({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function yc(e,s){return e=In(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function pd(e,s,a){return ka(s,e.child,null,a),e=gd(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rp(e,s,a){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),Nh(e.return,s,a)}function yd(e,s,a,l,f){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=s,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function ap(e,s,a){var l=s.pendingProps,f=l.revealOrder,d=l.tail;if(Je(e,s,l.children,a),l=je.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rp(e,a,s);else if(e.tag===19)rp(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ot(je,l),f){case"forwards":for(a=s.child,f=null;a!==null;)e=a.alternate,e!==null&&dc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),yd(s,!1,f,a,d);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(e=f.alternate,e!==null&&dc(e)===null){s.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}yd(s,!0,a,null,d);break;case"together":yd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ss(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),Ls|=s.lanes,(a&s.childLanes)===0)if(e!==null){if($o(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(r(153));if(s.child!==null){for(e=s.child,a=Zi(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Zi(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function _d(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Zu(e)))}function G4(e,s,a){switch(s.tag){case 3:xt(s,s.stateNode.containerInfo),As(s,Pe,e.memoizedState.cache),Ko();break;case 27:case 5:ae(s);break;case 4:xt(s,s.stateNode.containerInfo);break;case 10:As(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Is(s),s.flags|=128,null):(a&s.child.childLanes)!==0?sp(e,s,a):(Is(s),e=ss(e,s,a),e!==null?e.sibling:null);Is(s);break;case 19:var f=(e.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||($o(e,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return ap(e,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(je,je.current),l)break;return null;case 22:case 23:return s.lanes=0,W0(e,s,a);case 24:As(s,Pe,e.memoizedState.cache)}return ss(e,s,a)}function op(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)Fe=!0;else{if(!_d(e,a)&&(s.flags&128)===0)return Fe=!1,G4(e,s,a);Fe=(e.flags&131072)!==0}else Fe=!1,Zt&&(s.flags&1048576)!==0&&Pg(s,$u,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var l=s.elementType,f=l._init;if(l=f(l._payload),s.type=l,typeof l=="function")Rh(l)?(e=Br(l,e),s.tag=1,s=np(null,s,l,e,a)):(s.tag=0,s=fd(null,s,l,e,a));else{if(l!=null){if(f=l.$$typeof,f===J){s.tag=11,s=$0(null,s,l,e,a);break t}else if(f===I){s.tag=14,s=Z0(null,s,l,e,a);break t}}throw s=dt(l)||l,Error(r(306,s,""))}}return s;case 0:return fd(e,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Br(l,s.pendingProps),np(e,s,l,f,a);case 3:t:{if(xt(s,s.stateNode.containerInfo),e===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;f=d.element,Bh(e,s),il(s,l,null,a);var E=s.memoizedState;if(l=E.cache,As(s,Pe,l),l!==d.cache&&Lh(s,[Pe],a,!0),nl(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=ip(e,s,l,a);break t}else if(l!==f){f=Gn(Error(r(424)),s),Xo(f),s=ip(e,s,l,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ye=li(e.firstChild),gn=s,Zt=!0,Lr=null,Ai=!0,a=U0(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ko(),l===f){s=ss(e,s,a);break t}Je(e,s,l,a)}s=s.child}return s;case 26:return pc(e,s),e===null?(a=f2(s.type,null,s.pendingProps,null))?s.memoizedState=a:Zt||(a=s.type,e=s.pendingProps,l=Mc(_t.current).createElement(a),l[Ne]=s,l[Ce]=e,tn(l,a,e),Ee(l),s.stateNode=l):s.memoizedState=f2(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return ae(s),e===null&&Zt&&(l=s.stateNode=l2(s.type,s.pendingProps,_t.current),gn=s,Ai=!0,f=ye,Us(s.type)?(Jd=f,ye=li(l.firstChild)):ye=f),Je(e,s,s.pendingProps.children,a),pc(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Zt&&((f=l=ye)&&(l=_6(l,s.type,s.pendingProps,Ai),l!==null?(s.stateNode=l,gn=s,ye=li(l.firstChild),Ai=!1,f=!0):f=!1),f||kr(s)),ae(s),f=s.type,d=s.pendingProps,E=e!==null?e.memoizedProps:null,l=d.children,Kd(f,d)?l=null:E!==null&&Kd(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=Yh(e,s,k4,null,null,a),wl._currentValue=f),pc(e,s),Je(e,s,l,a),s.child;case 6:return e===null&&Zt&&((e=a=ye)&&(a=v6(a,s.pendingProps,Ai),a!==null?(s.stateNode=a,gn=s,ye=null,e=!0):e=!1),e||kr(s)),null;case 13:return sp(e,s,a);case 4:return xt(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=ka(s,null,l,a):Je(e,s,l,a),s.child;case 11:return $0(e,s,s.type,s.pendingProps,a);case 7:return Je(e,s,s.pendingProps,a),s.child;case 8:return Je(e,s,s.pendingProps.children,a),s.child;case 12:return Je(e,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,As(s,s.type,l.value),Je(e,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,jr(s),f=an(f),l=l(f),s.flags|=1,Je(e,s,l,a),s.child;case 14:return Z0(e,s,s.type,s.pendingProps,a);case 15:return J0(e,s,s.type,s.pendingProps,a);case 19:return ap(e,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},e===null?(a=yc(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Zi(e.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return W0(e,s,a);case 24:return jr(s),l=an(Pe),e===null?(f=jh(),f===null&&(f=le,d=kh(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),s.memoizedState={parent:l,cache:f},zh(s),As(s,Pe,f)):((e.lanes&a)!==0&&(Bh(e,s),il(s,null,null,a),nl()),f=e.memoizedState,d=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),As(s,Pe,l)):(l=d.cache,As(s,Pe,l),l!==f.cache&&Lh(s,[Pe],a,!0))),Je(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function rs(e){e.flags|=4}function lp(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!p2(s)){if(s=Kn.current,s!==null&&((Qt&4194048)===Qt?wi!==null:(Qt&62914560)!==Qt&&(Qt&536870912)===0||s!==wi))throw tl=Uh,Fg;e.flags|=8192}}function _c(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Ro():536870912,e.lanes|=s,za|=s)}function cl(e,s){if(!Zt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function me(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(s)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,s}function F4(e,s,a){var l=s.pendingProps;switch(Mh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(s),null;case 1:return me(s),null;case 3:return a=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),es(Pe),qt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Yo(s)?rs(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zg())),me(s),null;case 26:return a=s.memoizedState,e===null?(rs(s),a!==null?(me(s),lp(s,a)):(me(s),s.flags&=-16777217)):a?a!==e.memoizedState?(rs(s),me(s),lp(s,a)):(me(s),s.flags&=-16777217):(e.memoizedProps!==l&&rs(s),me(s),s.flags&=-16777217),null;case 27:Ae(s),a=_t.current;var f=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==l&&rs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return me(s),null}e=gt.current,Yo(s)?jg(s):(e=l2(f,l,a),s.stateNode=e,rs(s))}return me(s),null;case 5:if(Ae(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&rs(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return me(s),null}if(e=gt.current,Yo(s))jg(s);else{switch(f=Mc(_t.current),e){case 1:e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}e[Ne]=s,e[Ce]=l;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)e.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=e;t:switch(tn(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&rs(s)}}return me(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&rs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(e=_t.current,Yo(s)){if(e=s.stateNode,a=s.memoizedProps,l=null,f=gn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Ne]=s,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||e2(e.nodeValue,a)),e||kr(s)}else e=Mc(e).createTextNode(l),e[Ne]=s,s.stateNode=e}return me(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Yo(s),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ne]=s}else Ko(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;me(s),f=!1}else f=zg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(is(s),s):(is(s),null)}if(is(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),_c(s,s.updateQueue),me(s),null;case 4:return qt(),e===null&&Hd(s.stateNode.containerInfo),me(s),null;case 10:return es(s.type),me(s),null;case 19:if(ct(je),f=s.memoizedState,f===null)return me(s),null;if(l=(s.flags&128)!==0,d=f.rendering,d===null)if(l)cl(f,!1);else{if(_e!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(d=dc(e),d!==null){for(s.flags|=128,cl(f,!1),e=d.updateQueue,s.updateQueue=e,_c(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)kg(a,e),a=a.sibling;return ot(je,je.current&1|2),s.child}e=e.sibling}f.tail!==null&&Xe()>Tc&&(s.flags|=128,l=!0,cl(f,!1),s.lanes=4194304)}else{if(!l)if(e=dc(d),e!==null){if(s.flags|=128,l=!0,e=e.updateQueue,s.updateQueue=e,_c(s,e),cl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Zt)return me(s),null}else 2*Xe()-f.renderingStartTime>Tc&&a!==536870912&&(s.flags|=128,l=!0,cl(f,!1),s.lanes=4194304);f.isBackwards?(d.sibling=s.child,s.child=d):(e=f.last,e!==null?e.sibling=d:s.child=d,f.last=d)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Xe(),s.sibling=null,e=je.current,ot(je,l?e&1|2:e&1),s):(me(s),null);case 22:case 23:return is(s),Fh(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(me(s),s.subtreeFlags&6&&(s.flags|=8192)):me(s),a=s.updateQueue,a!==null&&_c(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),e!==null&&ct(Ur),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),es(Pe),me(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Q4(e,s){switch(Mh(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return es(Pe),qt(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Ae(s),null;case 13:if(is(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ko()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return ct(je),null;case 4:return qt(),null;case 10:return es(s.type),null;case 22:case 23:return is(s),Fh(),e!==null&&ct(Ur),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return es(Pe),null;case 25:return null;default:return null}}function up(e,s){switch(Mh(s),s.tag){case 3:es(Pe),qt();break;case 26:case 27:case 5:Ae(s);break;case 4:qt();break;case 13:is(s);break;case 19:ct(je);break;case 10:es(s.type);break;case 22:case 23:is(s),Fh(),e!==null&&ct(Ur);break;case 24:es(Pe)}}function fl(e,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==f)}}catch(S){oe(s,s.return,S)}}function Ms(e,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var E=l.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,f=s;var O=a,Q=S;try{Q()}catch(nt){oe(f,O,nt)}}}l=l.next}while(l!==d)}}catch(nt){oe(s,s.return,nt)}}function cp(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{Zg(s,a)}catch(l){oe(e,e.return,l)}}}function fp(e,s,a){a.props=Br(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){oe(e,s,l)}}function hl(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){oe(e,s,f)}}function Ci(e,s){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){oe(e,s,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){oe(e,s,f)}else a.current=null}function hp(e){var s=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){oe(e,e.return,f)}}function vd(e,s,a){try{var l=e.stateNode;d6(l,e.type,a,s),l[Ce]=s}catch(f){oe(e,e.return,f)}}function dp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Us(e.type)||e.tag===4}function Ed(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Us(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Td(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Dc));else if(l!==4&&(l===27&&Us(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(Td(e,s,a),e=e.sibling;e!==null;)Td(e,s,a),e=e.sibling}function vc(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(l!==4&&(l===27&&Us(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(vc(e,s,a),e=e.sibling;e!==null;)vc(e,s,a),e=e.sibling}function mp(e){var s=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);tn(s,l,a),s[Ne]=e,s[Ce]=a}catch(d){oe(e,e.return,d)}}var as=!1,be=!1,bd=!1,gp=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Y4(e,s){if(e=e.containerInfo,Qd=Pc,e=Cg(e),Eh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var E=0,S=-1,O=-1,Q=0,nt=0,rt=e,X=null;e:for(;;){for(var $;rt!==a||f!==0&&rt.nodeType!==3||(S=E+f),rt!==d||l!==0&&rt.nodeType!==3||(O=E+l),rt.nodeType===3&&(E+=rt.nodeValue.length),($=rt.firstChild)!==null;)X=rt,rt=$;for(;;){if(rt===e)break e;if(X===a&&++Q===f&&(S=E),X===d&&++nt===l&&(O=E),($=rt.nextSibling)!==null)break;rt=X,X=rt.parentNode}rt=$}a=S===-1||O===-1?null:{start:S,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yd={focusedElem:e,selectionRange:a},Pc=!1,Qe=s;Qe!==null;)if(s=Qe,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,Qe=e;else for(;Qe!==null;){switch(s=Qe,d=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=s,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Rt=Br(a.type,f,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(Rt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(At){oe(a,a.return,At)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)$d(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=s.sibling,e!==null){e.return=s.return,Qe=e;break}Qe=s.return}}function pp(e,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Vs(e,a),l&4&&fl(5,a);break;case 1:if(Vs(e,a),l&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(E){oe(a,a.return,E)}else{var f=Br(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(f,s,e.__reactInternalSnapshotBeforeUpdate)}catch(E){oe(a,a.return,E)}}l&64&&cp(a),l&512&&hl(a,a.return);break;case 3:if(Vs(e,a),l&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Zg(e,s)}catch(E){oe(a,a.return,E)}}break;case 27:s===null&&l&4&&mp(a);case 26:case 5:Vs(e,a),s===null&&l&4&&hp(a),l&512&&hl(a,a.return);break;case 12:Vs(e,a);break;case 13:Vs(e,a),l&4&&vp(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=n6.bind(null,a),E6(e,a))));break;case 22:if(l=a.memoizedState!==null||as,!l){s=s!==null&&s.memoizedState!==null||be,f=as;var d=be;as=l,(be=s)&&!d?Os(e,a,(a.subtreeFlags&8772)!==0):Vs(e,a),as=f,be=d}break;case 30:break;default:Vs(e,a)}}function yp(e){var s=e.alternate;s!==null&&(e.alternate=null,yp(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Es(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var he=null,_n=!1;function os(e,s,a){for(a=a.child;a!==null;)_p(e,s,a),a=a.sibling}function _p(e,s,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount($t,a)}catch{}switch(a.tag){case 26:be||Ci(a,s),os(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:be||Ci(a,s);var l=he,f=_n;Us(a.type)&&(he=a.stateNode,_n=!1),os(e,s,a),Tl(a.stateNode),he=l,_n=f;break;case 5:be||Ci(a,s);case 6:if(l=he,f=_n,he=null,os(e,s,a),he=l,_n=f,he!==null)if(_n)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(d){oe(a,s,d)}else try{he.removeChild(a.stateNode)}catch(d){oe(a,s,d)}break;case 18:he!==null&&(_n?(e=he,a2(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Il(e)):a2(he,a.stateNode));break;case 4:l=he,f=_n,he=a.stateNode.containerInfo,_n=!0,os(e,s,a),he=l,_n=f;break;case 0:case 11:case 14:case 15:be||Ms(2,a,s),be||Ms(4,a,s),os(e,s,a);break;case 1:be||(Ci(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&fp(a,s,l)),os(e,s,a);break;case 21:os(e,s,a);break;case 22:be=(l=be)||a.memoizedState!==null,os(e,s,a),be=l;break;default:os(e,s,a)}}function vp(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Il(e)}catch(a){oe(s,s.return,a)}}function K4(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new gp),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new gp),s;default:throw Error(r(435,e.tag))}}function Sd(e,s){var a=K4(e);s.forEach(function(l){var f=i6.bind(null,e,l);a.has(l)||(a.add(l),l.then(f,f))})}function Dn(e,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,E=s,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(Us(S.type)){he=S.stateNode,_n=!1;break t}break;case 5:he=S.stateNode,_n=!1;break t;case 3:case 4:he=S.stateNode.containerInfo,_n=!0;break t}S=S.return}if(he===null)throw Error(r(160));_p(d,E,f),he=null,_n=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ep(s,e),s=s.sibling}var oi=null;function Ep(e,s){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dn(s,e),Mn(e),l&4&&(Ms(3,e,e.return),fl(3,e),Ms(5,e,e.return));break;case 1:Dn(s,e),Mn(e),l&512&&(be||a===null||Ci(a,a.return)),l&64&&as&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=oi;if(Dn(s,e),Mn(e),l&512&&(be||a===null||Ci(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[pr]||d[Ne]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),tn(d,l,a),d[Ne]=e,Ee(d),l=d;break t;case"link":var E=m2("link","href",f).get(l+(a.href||""));if(E){for(var S=0;S<E.length;S++)if(d=E[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(S,1);break e}}d=f.createElement(l),tn(d,l,a),f.head.appendChild(d);break;case"meta":if(E=m2("meta","content",f).get(l+(a.content||""))){for(S=0;S<E.length;S++)if(d=E[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(S,1);break e}}d=f.createElement(l),tn(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ne]=e,Ee(d),l=d}e.stateNode=l}else g2(f,e.type,e.stateNode);else e.stateNode=d2(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?g2(f,e.type,e.stateNode):d2(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&vd(e,e.memoizedProps,a.memoizedProps)}break;case 27:Dn(s,e),Mn(e),l&512&&(be||a===null||Ci(a,a.return)),a!==null&&l&4&&vd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Dn(s,e),Mn(e),l&512&&(be||a===null||Ci(a,a.return)),e.flags&32){f=e.stateNode;try{zn(f,"")}catch($){oe(e,e.return,$)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,vd(e,f,a!==null?a.memoizedProps:f)),l&1024&&(bd=!0);break;case 6:if(Dn(s,e),Mn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch($){oe(e,e.return,$)}}break;case 3:if(Nc=null,f=oi,oi=Vc(s.containerInfo),Dn(s,e),oi=f,Mn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Il(s.containerInfo)}catch($){oe(e,e.return,$)}bd&&(bd=!1,Tp(e));break;case 4:l=oi,oi=Vc(e.stateNode.containerInfo),Dn(s,e),Mn(e),oi=l;break;case 12:Dn(s,e),Mn(e);break;case 13:Dn(s,e),Mn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Id=Xe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Sd(e,l)));break;case 22:f=e.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,Q=as,nt=be;if(as=Q||f,be=nt||O,Dn(s,e),be=nt,as=Q,Mn(e),l&8192)t:for(s=e.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||O||as||be||qr(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(d=O.stateNode,f)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=O.stateNode;var rt=O.memoizedProps.style,X=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;S.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch($){oe(O,O.return,$)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch($){oe(O,O.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Sd(e,a))));break;case 19:Dn(s,e),Mn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Sd(e,l)));break;case 30:break;case 21:break;default:Dn(s,e),Mn(e)}}function Mn(e){var s=e.flags;if(s&2){try{for(var a,l=e.return;l!==null;){if(dp(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Ed(e);vc(e,d,f);break;case 5:var E=a.stateNode;a.flags&32&&(zn(E,""),a.flags&=-33);var S=Ed(e);vc(e,S,E);break;case 3:case 4:var O=a.stateNode.containerInfo,Q=Ed(e);Td(e,Q,O);break;default:throw Error(r(161))}}catch(nt){oe(e,e.return,nt)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Tp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Tp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Vs(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)pp(e,s.alternate,s),s=s.sibling}function qr(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Ms(4,s,s.return),qr(s);break;case 1:Ci(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&fp(s,s.return,a),qr(s);break;case 27:Tl(s.stateNode);case 26:case 5:Ci(s,s.return),qr(s);break;case 22:s.memoizedState===null&&qr(s);break;case 30:qr(s);break;default:qr(s)}e=e.sibling}}function Os(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=e,d=s,E=d.flags;switch(d.tag){case 0:case 11:case 15:Os(f,d,a),fl(4,d);break;case 1:if(Os(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Q){oe(l,l.return,Q)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)$g(O[f],S)}catch(Q){oe(l,l.return,Q)}}a&&E&64&&cp(d),hl(d,d.return);break;case 27:mp(d);case 26:case 5:Os(f,d,a),a&&l===null&&E&4&&hp(d),hl(d,d.return);break;case 12:Os(f,d,a);break;case 13:Os(f,d,a),a&&E&4&&vp(f,d);break;case 22:d.memoizedState===null&&Os(f,d,a),hl(d,d.return);break;case 30:break;default:Os(f,d,a)}s=s.sibling}}function Ad(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Zo(a))}function wd(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Zo(e))}function Ri(e,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)bp(e,s,a,l),s=s.sibling}function bp(e,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ri(e,s,a,l),f&2048&&fl(9,s);break;case 1:Ri(e,s,a,l);break;case 3:Ri(e,s,a,l),f&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Zo(e)));break;case 12:if(f&2048){Ri(e,s,a,l),e=s.stateNode;try{var d=s.memoizedProps,E=d.id,S=d.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){oe(s,s.return,O)}}else Ri(e,s,a,l);break;case 13:Ri(e,s,a,l);break;case 23:break;case 22:d=s.stateNode,E=s.alternate,s.memoizedState!==null?d._visibility&2?Ri(e,s,a,l):dl(e,s):d._visibility&2?Ri(e,s,a,l):(d._visibility|=2,Pa(e,s,a,l,(s.subtreeFlags&10256)!==0)),f&2048&&Ad(E,s);break;case 24:Ri(e,s,a,l),f&2048&&wd(s.alternate,s);break;default:Ri(e,s,a,l)}}function Pa(e,s,a,l,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var d=e,E=s,S=a,O=l,Q=E.flags;switch(E.tag){case 0:case 11:case 15:Pa(d,E,S,O,f),fl(8,E);break;case 23:break;case 22:var nt=E.stateNode;E.memoizedState!==null?nt._visibility&2?Pa(d,E,S,O,f):dl(d,E):(nt._visibility|=2,Pa(d,E,S,O,f)),f&&Q&2048&&Ad(E.alternate,E);break;case 24:Pa(d,E,S,O,f),f&&Q&2048&&wd(E.alternate,E);break;default:Pa(d,E,S,O,f)}s=s.sibling}}function dl(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,l=s,f=l.flags;switch(l.tag){case 22:dl(a,l),f&2048&&Ad(l.alternate,l);break;case 24:dl(a,l),f&2048&&wd(l.alternate,l);break;default:dl(a,l)}s=s.sibling}}var ml=8192;function ja(e){if(e.subtreeFlags&ml)for(e=e.child;e!==null;)Sp(e),e=e.sibling}function Sp(e){switch(e.tag){case 26:ja(e),e.flags&ml&&e.memoizedState!==null&&O6(oi,e.memoizedState,e.memoizedProps);break;case 5:ja(e);break;case 3:case 4:var s=oi;oi=Vc(e.stateNode.containerInfo),ja(e),oi=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=ml,ml=16777216,ja(e),ml=s):ja(e));break;default:ja(e)}}function Ap(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function gl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Qe=l,Cp(l,e)}Ap(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)wp(e),e=e.sibling}function wp(e){switch(e.tag){case 0:case 11:case 15:gl(e),e.flags&2048&&Ms(9,e,e.return);break;case 3:gl(e);break;case 12:gl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Ec(e)):gl(e);break;default:gl(e)}}function Ec(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Qe=l,Cp(l,e)}Ap(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Ms(8,s,s.return),Ec(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ec(s));break;default:Ec(s)}e=e.sibling}}function Cp(e,s){for(;Qe!==null;){var a=Qe;switch(a.tag){case 0:case 11:case 15:Ms(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qe=l;else t:for(a=e;Qe!==null;){l=Qe;var f=l.sibling,d=l.return;if(yp(l),l===a){Qe=null;break t}if(f!==null){f.return=d,Qe=f;break t}Qe=d}}}var X4={getCacheForType:function(e){var s=an(Pe),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},$4=typeof WeakMap=="function"?WeakMap:Map,te=0,le=null,Ut=null,Qt=0,ee=0,Vn=null,Ns=!1,Ua=!1,Cd=!1,ls=0,_e=0,Ls=0,Hr=0,Rd=0,Xn=0,za=0,pl=null,vn=null,xd=!1,Id=0,Tc=1/0,bc=null,ks=null,We=0,Ps=null,Ba=null,qa=0,Dd=0,Md=null,Rp=null,yl=0,Vd=null;function On(){if((te&2)!==0&&Qt!==0)return Qt&-Qt;if(Y.T!==null){var e=Ia;return e!==0?e:Ud()}return _s()}function xp(){Xn===0&&(Xn=(Qt&536870912)===0||Zt?Co():536870912);var e=Kn.current;return e!==null&&(e.flags|=32),Xn}function Nn(e,s,a){(e===le&&(ee===2||ee===9)||e.cancelPendingCommit!==null)&&(Ha(e,0),js(e,Qt,Xn,!1)),zi(e,a),((te&2)===0||e!==le)&&(e===le&&((te&2)===0&&(Hr|=a),_e===4&&js(e,Qt,Xn,!1)),xi(e))}function Ip(e,s,a){if((te&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&e.expiredLanes)===0||gr(e,s),f=l?W4(e,s):Ld(e,s,!0),d=l;do{if(f===0){Ua&&!l&&js(e,s,0,!1);break}else{if(a=e.current.alternate,d&&!Z4(a)){f=Ld(e,s,!1),d=!1;continue}if(f===2){if(d=s,e.errorRecoveryDisabledLanes&d)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var S=e;f=pl;var O=S.current.memoizedState.isDehydrated;if(O&&(Ha(S,E).flags|=256),E=Ld(S,E,!1),E!==2){if(Cd&&!O){S.errorRecoveryDisabledLanes|=d,Hr|=d,f=4;break t}d=vn,vn=f,d!==null&&(vn===null?vn=d:vn.push.apply(vn,d))}f=E}if(d=!1,f!==2)continue}}if(f===1){Ha(e,0),js(e,s,0,!0);break}t:{switch(l=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:js(l,s,Xn,!Ns);break t;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Id+300-Xe(),10<f)){if(js(l,s,Xn,!Ns),aa(l,0,!0)!==0)break t;l.timeoutHandle=s2(Dp.bind(null,l,a,vn,bc,xd,s,Xn,Hr,za,Ns,d,2,-0,0),f);break t}Dp(l,a,vn,bc,xd,s,Xn,Hr,za,Ns,d,0,-0,0)}}break}while(!0);xi(e)}function Dp(e,s,a,l,f,d,E,S,O,Q,nt,rt,X,$){if(e.timeoutHandle=-1,rt=s.subtreeFlags,(rt&8192||(rt&16785408)===16785408)&&(Al={stylesheets:null,count:0,unsuspend:V6},Sp(s),rt=N6(),rt!==null)){e.cancelPendingCommit=rt(Pp.bind(null,e,s,d,a,l,f,E,S,O,nt,1,X,$)),js(e,d,E,!Q);return}Pp(e,s,d,a,l,f,E,S,O)}function Z4(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!xn(d(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function js(e,s,a,l){s&=~Rd,s&=~Hr,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var f=s;0<f;){var d=31-ce(f),E=1<<d;l[d]=-1,f&=~E}a!==0&&di(e,a,s)}function Sc(){return(te&6)===0?(_l(0),!1):!0}function Od(){if(Ut!==null){if(ee===0)var e=Ut.return;else e=Ut,ts=Pr=null,$h(e),La=null,ll=0,e=Ut;for(;e!==null;)up(e.alternate,e),e=e.return;Ut=null}}function Ha(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,g6(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Od(),le=e,Ut=a=Zi(e.current,null),Qt=s,ee=0,Vn=null,Ns=!1,Ua=gr(e,s),Cd=!1,za=Xn=Rd=Hr=Ls=_e=0,vn=pl=null,xd=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var f=31-ce(l),d=1<<f;s|=e[f],l&=~d}return ls=s,Fu(),a}function Mp(e,s){Lt=null,Y.H=cc,s===Wo||s===tc?(s=Kg(),ee=3):s===Fg?(s=Kg(),ee=4):ee=s===X0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vn=s,Ut===null&&(_e=1,gc(e,Gn(s,e.current)))}function Vp(){var e=Y.H;return Y.H=cc,e===null?cc:e}function Op(){var e=Y.A;return Y.A=X4,e}function Nd(){_e=4,Ns||(Qt&4194048)!==Qt&&Kn.current!==null||(Ua=!0),(Ls&134217727)===0&&(Hr&134217727)===0||le===null||js(le,Qt,Xn,!1)}function Ld(e,s,a){var l=te;te|=2;var f=Vp(),d=Op();(le!==e||Qt!==s)&&(bc=null,Ha(e,s)),s=!1;var E=_e;t:do try{if(ee!==0&&Ut!==null){var S=Ut,O=Vn;switch(ee){case 8:Od(),E=6;break t;case 3:case 2:case 9:case 6:Kn.current===null&&(s=!0);var Q=ee;if(ee=0,Vn=null,Ga(e,S,O,Q),a&&Ua){E=0;break t}break;default:Q=ee,ee=0,Vn=null,Ga(e,S,O,Q)}}J4(),E=_e;break}catch(nt){Mp(e,nt)}while(!0);return s&&e.shellSuspendCounter++,ts=Pr=null,te=l,Y.H=f,Y.A=d,Ut===null&&(le=null,Qt=0,Fu()),E}function J4(){for(;Ut!==null;)Np(Ut)}function W4(e,s){var a=te;te|=2;var l=Vp(),f=Op();le!==e||Qt!==s?(bc=null,Tc=Xe()+500,Ha(e,s)):Ua=gr(e,s);t:do try{if(ee!==0&&Ut!==null){s=Ut;var d=Vn;e:switch(ee){case 1:ee=0,Vn=null,Ga(e,s,d,1);break;case 2:case 9:if(Qg(d)){ee=0,Vn=null,Lp(s);break}s=function(){ee!==2&&ee!==9||le!==e||(ee=7),xi(e)},d.then(s,s);break t;case 3:ee=7;break t;case 4:ee=5;break t;case 7:Qg(d)?(ee=0,Vn=null,Lp(s)):(ee=0,Vn=null,Ga(e,s,d,7));break;case 5:var E=null;switch(Ut.tag){case 26:E=Ut.memoizedState;case 5:case 27:var S=Ut;if(!E||p2(E)){ee=0,Vn=null;var O=S.sibling;if(O!==null)Ut=O;else{var Q=S.return;Q!==null?(Ut=Q,Ac(Q)):Ut=null}break e}}ee=0,Vn=null,Ga(e,s,d,5);break;case 6:ee=0,Vn=null,Ga(e,s,d,6);break;case 8:Od(),_e=6;break t;default:throw Error(r(462))}}t6();break}catch(nt){Mp(e,nt)}while(!0);return ts=Pr=null,Y.H=l,Y.A=f,te=a,Ut!==null?0:(le=null,Qt=0,Fu(),_e)}function t6(){for(;Ut!==null&&!we();)Np(Ut)}function Np(e){var s=op(e.alternate,e,ls);e.memoizedProps=e.pendingProps,s===null?Ac(e):Ut=s}function Lp(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=ep(a,s,s.pendingProps,s.type,void 0,Qt);break;case 11:s=ep(a,s,s.pendingProps,s.type.render,s.ref,Qt);break;case 5:$h(s);default:up(a,s),s=Ut=kg(s,ls),s=op(a,s,ls)}e.memoizedProps=e.pendingProps,s===null?Ac(e):Ut=s}function Ga(e,s,a,l){ts=Pr=null,$h(s),La=null,ll=0;var f=s.return;try{if(H4(e,f,s,a,Qt)){_e=1,gc(e,Gn(a,e.current)),Ut=null;return}}catch(d){if(f!==null)throw Ut=f,d;_e=1,gc(e,Gn(a,e.current)),Ut=null;return}s.flags&32768?(Zt||l===1?e=!0:Ua||(Qt&536870912)!==0?e=!1:(Ns=e=!0,(l===2||l===9||l===3||l===6)&&(l=Kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),kp(s,e)):Ac(s)}function Ac(e){var s=e;do{if((s.flags&32768)!==0){kp(s,Ns);return}e=s.return;var a=F4(s.alternate,s,ls);if(a!==null){Ut=a;return}if(s=s.sibling,s!==null){Ut=s;return}Ut=s=e}while(s!==null);_e===0&&(_e=5)}function kp(e,s){do{var a=Q4(e.alternate,e);if(a!==null){a.flags&=32767,Ut=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){Ut=e;return}Ut=e=a}while(e!==null);_e=6,Ut=null}function Pp(e,s,a,l,f,d,E,S,O){e.cancelPendingCommit=null;do wc();while(We!==0);if((te&6)!==0)throw Error(r(327));if(s!==null){if(s===e.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=wh,xo(e,a,d,E,S,O),e===le&&(Ut=le=null,Qt=0),Ba=s,Ps=e,qa=a,Dd=d,Md=f,Rp=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s6(ni,function(){return qp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=W.p,W.p=2,E=te,te|=4;try{Y4(e,s,a)}finally{te=E,W.p=f,Y.T=l}}We=1,jp(),Up(),zp()}}function jp(){if(We===1){We=0;var e=Ps,s=Ba,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=W.p;W.p=2;var f=te;te|=4;try{Ep(s,e);var d=Yd,E=Cg(e.containerInfo),S=d.focusedElem,O=d.selectionRange;if(E!==S&&S&&S.ownerDocument&&wg(S.ownerDocument.documentElement,S)){if(O!==null&&Eh(S)){var Q=O.start,nt=O.end;if(nt===void 0&&(nt=Q),"selectionStart"in S)S.selectionStart=Q,S.selectionEnd=Math.min(nt,S.value.length);else{var rt=S.ownerDocument||document,X=rt&&rt.defaultView||window;if(X.getSelection){var $=X.getSelection(),Rt=S.textContent.length,At=Math.min(O.start,Rt),re=O.end===void 0?At:Math.min(O.end,Rt);!$.extend&&At>re&&(E=re,re=At,At=E);var q=Ag(S,At),U=Ag(S,re);if(q&&U&&($.rangeCount!==1||$.anchorNode!==q.node||$.anchorOffset!==q.offset||$.focusNode!==U.node||$.focusOffset!==U.offset)){var F=rt.createRange();F.setStart(q.node,q.offset),$.removeAllRanges(),At>re?($.addRange(F),$.extend(U.node,U.offset)):(F.setEnd(U.node,U.offset),$.addRange(F))}}}}for(rt=[],$=S;$=$.parentNode;)$.nodeType===1&&rt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<rt.length;S++){var st=rt[S];st.element.scrollLeft=st.left,st.element.scrollTop=st.top}}Pc=!!Qd,Yd=Qd=null}finally{te=f,W.p=l,Y.T=a}}e.current=s,We=2}}function Up(){if(We===2){We=0;var e=Ps,s=Ba,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=W.p;W.p=2;var f=te;te|=4;try{pp(e,s.alternate,s)}finally{te=f,W.p=l,Y.T=a}}We=3}}function zp(){if(We===4||We===3){We=0,kn();var e=Ps,s=Ba,a=qa,l=Rp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?We=5:(We=0,Ba=Ps=null,Bp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(ks=null),oa(a),s=s.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot($t,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Y.T,f=W.p,W.p=2,Y.T=null;try{for(var d=e.onRecoverableError,E=0;E<l.length;E++){var S=l[E];d(S.value,{componentStack:S.stack})}}finally{Y.T=s,W.p=f}}(qa&3)!==0&&wc(),xi(e),f=e.pendingLanes,(a&4194090)!==0&&(f&42)!==0?e===Vd?yl++:(yl=0,Vd=e):yl=0,_l(0)}}function Bp(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Zo(s)))}function wc(e){return jp(),Up(),zp(),qp()}function qp(){if(We!==5)return!1;var e=Ps,s=Dd;Dd=0;var a=oa(qa),l=Y.T,f=W.p;try{W.p=32>a?32:a,Y.T=null,a=Md,Md=null;var d=Ps,E=qa;if(We=0,Ba=Ps=null,qa=0,(te&6)!==0)throw Error(r(331));var S=te;if(te|=4,wp(d.current),bp(d,d.current,E,a),te=S,_l(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot($t,d)}catch{}return!0}finally{W.p=f,Y.T=l,Bp(e,s)}}function Hp(e,s,a){s=Gn(a,s),s=cd(e.stateNode,s,2),e=Rs(e,s,2),e!==null&&(zi(e,2),xi(e))}function oe(e,s,a){if(e.tag===3)Hp(e,e,a);else for(;s!==null;){if(s.tag===3){Hp(s,e,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ks===null||!ks.has(l))){e=Gn(a,e),a=Y0(2),l=Rs(s,a,2),l!==null&&(K0(a,l,s,e),zi(l,2),xi(l));break}}s=s.return}}function kd(e,s,a){var l=e.pingCache;if(l===null){l=e.pingCache=new $4;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(Cd=!0,f.add(a),e=e6.bind(null,e,s,a),s.then(e,e))}function e6(e,s,a){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,le===e&&(Qt&a)===a&&(_e===4||_e===3&&(Qt&62914560)===Qt&&300>Xe()-Id?(te&2)===0&&Ha(e,0):Rd|=a,za===Qt&&(za=0)),xi(e)}function Gp(e,s){s===0&&(s=Ro()),e=wa(e,s),e!==null&&(zi(e,s),xi(e))}function n6(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),Gp(e,a)}function i6(e,s){var a=0;switch(e.tag){case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),Gp(e,a)}function s6(e,s){return Oe(e,s)}var Cc=null,Fa=null,Pd=!1,Rc=!1,jd=!1,Gr=0;function xi(e){e!==Fa&&e.next===null&&(Fa===null?Cc=Fa=e:Fa=Fa.next=e),Rc=!0,Pd||(Pd=!0,a6())}function _l(e,s){if(!jd&&Rc){jd=!0;do for(var a=!1,l=Cc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var E=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-ce(42|e)+1)-1,d&=f&~(E&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Kp(l,d))}else d=Qt,d=aa(l,l===le?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||gr(l,d)||(a=!0,Kp(l,d));l=l.next}while(a);jd=!1}}function r6(){Fp()}function Fp(){Rc=Pd=!1;var e=0;Gr!==0&&(m6()&&(e=Gr),Gr=0);for(var s=Xe(),a=null,l=Cc;l!==null;){var f=l.next,d=Qp(l,s);d===0?(l.next=null,a===null?Cc=f:a.next=f,f===null&&(Fa=a)):(a=l,(e!==0||(d&3)!==0)&&(Rc=!0)),l=f}_l(e)}function Qp(e,s){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var E=31-ce(d),S=1<<E,O=f[E];O===-1?((S&a)===0||(S&l)!==0)&&(f[E]=wo(S,s)):O<=s&&(e.expiredLanes|=S),d&=~S}if(s=le,a=Qt,a=aa(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===s&&(ee===2||ee===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&qe(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||gr(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(l!==null&&qe(l),oa(a)){case 2:case 8:a=wn;break;case 32:a=ni;break;case 268435456:a=Cn;break;default:a=ni}return l=Yp.bind(null,e),a=Oe(a,l),e.callbackPriority=s,e.callbackNode=a,s}return l!==null&&l!==null&&qe(l),e.callbackPriority=2,e.callbackNode=null,2}function Yp(e,s){if(We!==0&&We!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(wc()&&e.callbackNode!==a)return null;var l=Qt;return l=aa(e,e===le?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Ip(e,l,s),Qp(e,Xe()),e.callbackNode!=null&&e.callbackNode===a?Yp.bind(null,e):null)}function Kp(e,s){if(wc())return null;Ip(e,s,!0)}function a6(){p6(function(){(te&6)!==0?Oe(Pn,r6):Fp()})}function Ud(){return Gr===0&&(Gr=Co()),Gr}function Xp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:da(""+e)}function $p(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function o6(e,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var d=Xp((f[Ce]||null).action),E=l.submitter;E&&(s=(s=E[Ce]||null)?Xp(s.formAction):E.getAttribute("formAction"),s!==null&&(d=s,E=null));var S=new ma("action","action",null,l,f);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Gr!==0){var O=E?$p(f,E):new FormData(f);rd(a,{pending:!0,data:O,method:f.method,action:d},null,O)}}else typeof d=="function"&&(S.preventDefault(),O=E?$p(f,E):new FormData(f),rd(a,{pending:!0,data:O,method:f.method,action:d},d,O))},currentTarget:f}]})}}for(var zd=0;zd<Ah.length;zd++){var Bd=Ah[zd],l6=Bd.toLowerCase(),u6=Bd[0].toUpperCase()+Bd.slice(1);ai(l6,"on"+u6)}ai(Ig,"onAnimationEnd"),ai(Dg,"onAnimationIteration"),ai(Mg,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(C4,"onTransitionRun"),ai(R4,"onTransitionStart"),ai(x4,"onTransitionCancel"),ai(Vg,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function Zp(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var E=l.length-1;0<=E;E--){var S=l[E],O=S.instance,Q=S.currentTarget;if(S=S.listener,O!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=Q;try{d(f)}catch(nt){mc(nt)}f.currentTarget=null,d=O}else for(E=0;E<l.length;E++){if(S=l[E],O=S.instance,Q=S.currentTarget,S=S.listener,O!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=Q;try{d(f)}catch(nt){mc(nt)}f.currentTarget=null,d=O}}}}function zt(e,s){var a=s[Do];a===void 0&&(a=s[Do]=new Set);var l=e+"__bubble";a.has(l)||(Jp(s,e,2,!1),a.add(l))}function qd(e,s,a){var l=0;s&&(l|=4),Jp(a,e,l,s)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Hd(e){if(!e[xc]){e[xc]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(c6.has(a)||qd(a,!1,e),qd(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[xc]||(s[xc]=!0,qd("selectionchange",!1,s))}}function Jp(e,s,a,l){switch(b2(s)){case 2:var f=P6;break;case 8:f=j6;break;default:f=i1}a=f.bind(null,s,a,e),f=void 0,!qn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(s,a,{capture:!0,passive:f}):e.addEventListener(s,a,!0):f!==void 0?e.addEventListener(s,a,{passive:f}):e.addEventListener(s,a,!1)}function Gd(e,s,a,l,f){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var S=l.stateNode.containerInfo;if(S===f)break;if(E===4)for(E=l.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;S!==null;){if(E=Bi(S),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){l=d=E;continue t}S=S.parentNode}}l=l.return}Du(function(){var Q=d,nt=Bn(a),rt=[];t:{var X=Og.get(e);if(X!==void 0){var $=ma,Rt=e;switch(e){case"keypress":if(vi(a)===0)break t;case"keydown":case"keyup":$=Ea;break;case"focusin":Rt="focus",$=ya;break;case"focusout":Rt="blur",$=ya;break;case"beforeblur":case"afterblur":$=ya;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=ph;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ju;break;case Ig:case Dg:case Mg:$=_a;break;case Vg:$=zu;break;case"scroll":case"scrollend":$=Mu;break;case"wheel":$=Ta;break;case"copy":case"cut":case"paste":$=va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Ho;break;case"toggle":case"beforetoggle":$=qu}var At=(s&4)!==0,re=!At&&(e==="scroll"||e==="scrollend"),q=At?X!==null?X+"Capture":null:X;At=[];for(var U=Q,F;U!==null;){var st=U;if(F=st.stateNode,st=st.tag,st!==5&&st!==26&&st!==27||F===null||q===null||(st=Sr(U,q),st!=null&&At.push(El(U,st,F))),re)break;U=U.return}0<At.length&&(X=new $(X,Rt,null,a,nt),rt.push({event:X,listeners:At}))}}if((s&7)===0){t:{if(X=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",X&&a!==Fi&&(Rt=a.relatedTarget||a.fromElement)&&(Bi(Rt)||Rt[Un]))break t;if(($||X)&&(X=nt.window===nt?nt:(X=nt.ownerDocument)?X.defaultView||X.parentWindow:window,$?(Rt=a.relatedTarget||a.toElement,$=Q,Rt=Rt?Bi(Rt):null,Rt!==null&&(re=u(Rt),At=Rt.tag,Rt!==re||At!==5&&At!==27&&At!==6)&&(Rt=null)):($=null,Rt=Q),$!==Rt)){if(At=Hn,st="onMouseLeave",q="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(At=Ho,st="onPointerLeave",q="onPointerEnter",U="pointer"),re=$==null?X:gi($),F=Rt==null?X:gi(Rt),X=new At(st,U+"leave",$,a,nt),X.target=re,X.relatedTarget=F,st=null,Bi(nt)===Q&&(At=new At(q,U+"enter",Rt,a,nt),At.target=F,At.relatedTarget=re,st=At),re=st,$&&Rt)e:{for(At=$,q=Rt,U=0,F=At;F;F=Qa(F))U++;for(F=0,st=q;st;st=Qa(st))F++;for(;0<U-F;)At=Qa(At),U--;for(;0<F-U;)q=Qa(q),F--;for(;U--;){if(At===q||q!==null&&At===q.alternate)break e;At=Qa(At),q=Qa(q)}At=null}else At=null;$!==null&&Wp(rt,X,$,At,!1),Rt!==null&&re!==null&&Wp(rt,re,Rt,At,!0)}}t:{if(X=Q?gi(Q):window,$=X.nodeName&&X.nodeName.toLowerCase(),$==="select"||$==="input"&&X.type==="file")var vt=_g;else if(ke(X))if(vg)vt=S4;else{vt=T4;var jt=E4}else $=X.nodeName,!$||$.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Q&&ko(Q.elementType)&&(vt=_g):vt=b4;if(vt&&(vt=vt(e,Q))){$i(rt,vt,a,nt);break t}jt&&jt(e,X,Q),e==="focusout"&&Q&&X.type==="number"&&Q.memoizedProps.value!=null&&bs(X,"number",X.value)}switch(jt=Q?gi(Q):window,e){case"focusin":(ke(jt)||jt.contentEditable==="true")&&(ba=jt,Th=Q,Qo=null);break;case"focusout":Qo=Th=ba=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,Rg(rt,a,nt);break;case"selectionchange":if(w4)break;case"keydown":case"keyup":Rg(rt,a,nt)}var Tt;if(bi)t:{switch(e){case"compositionstart":var wt="onCompositionStart";break t;case"compositionend":wt="onCompositionEnd";break t;case"compositionupdate":wt="onCompositionUpdate";break t}wt=void 0}else Gt?tt(e,a)&&(wt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(wt="onCompositionStart");wt&&(v&&a.locale!=="ko"&&(Gt||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Gt&&(Tt=jo()):(_i=nt,Ss="value"in _i?_i.value:_i.textContent,Gt=!0)),jt=Ic(Q,wt),0<jt.length&&(wt=new Bo(wt,e,null,a,nt),rt.push({event:wt,listeners:jt}),Tt?wt.data=Tt:(Tt=ht(a),Tt!==null&&(wt.data=Tt)))),(Tt=p?Le(e,a):Ft(e,a))&&(wt=Ic(Q,"onBeforeInput"),0<wt.length&&(jt=new Bo("onBeforeInput","beforeinput",null,a,nt),rt.push({event:jt,listeners:wt}),jt.data=Tt)),o6(rt,e,Q,a,nt)}Zp(rt,s)})}function El(e,s,a){return{instance:e,listener:s,currentTarget:a}}function Ic(e,s){for(var a=s+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Sr(e,a),f!=null&&l.unshift(El(e,f,d)),f=Sr(e,s),f!=null&&l.push(El(e,f,d))),e.tag===3)return l;e=e.return}return[]}function Qa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wp(e,s,a,l,f){for(var d=s._reactName,E=[];a!==null&&a!==l;){var S=a,O=S.alternate,Q=S.stateNode;if(S=S.tag,O!==null&&O===l)break;S!==5&&S!==26&&S!==27||Q===null||(O=Q,f?(Q=Sr(a,d),Q!=null&&E.unshift(El(a,Q,O))):f||(Q=Sr(a,d),Q!=null&&E.push(El(a,Q,O)))),a=a.return}E.length!==0&&e.push({event:s,listeners:E})}var f6=/\r\n?/g,h6=/\u0000|\uFFFD/g;function t2(e){return(typeof e=="string"?e:""+e).replace(f6,`
`).replace(h6,"")}function e2(e,s){return s=t2(s),t2(e)===s}function Dc(){}function se(e,s,a,l,f,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||zn(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&zn(e,""+l);break;case"className":pi(e,"class",l);break;case"tabIndex":pi(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":pi(e,a,l);break;case"style":Lo(e,l,d);break;case"data":if(s!=="object"){pi(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=da(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&se(e,s,"name",f.name,f,null),se(e,s,"formEncType",f.formEncType,f,null),se(e,s,"formMethod",f.formMethod,f,null),se(e,s,"formTarget",f.formTarget,f,null)):(se(e,s,"encType",f.encType,f,null),se(e,s,"method",f.method,f,null),se(e,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=da(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Dc);break;case"onScroll":l!=null&&zt("scroll",e);break;case"onScrollEnd":l!=null&&zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=da(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":zt("beforetoggle",e),zt("toggle",e),Ts(e,"popover",l);break;case"xlinkActuate":$e(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":$e(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":$e(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":$e(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":$e(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":$e(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":$e(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":$e(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":$e(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ts(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=mh.get(a)||a,Ts(e,a,l))}}function Fd(e,s,a,l,f,d){switch(a){case"style":Lo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?zn(e,l):(typeof l=="number"||typeof l=="bigint")&&zn(e,""+l);break;case"onScroll":l!=null&&zt("scroll",e);break;case"onScrollEnd":l!=null&&zt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Dc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!la.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),d=e[Ce]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(s,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Ts(e,a,l)}}}function tn(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",e),zt("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:se(e,s,d,E,a,null)}}f&&se(e,s,"srcSet",a.srcSet,a,null),l&&se(e,s,"src",a.src,a,null);return;case"input":zt("invalid",e);var S=d=E=f=null,O=null,Q=null;for(l in a)if(a.hasOwnProperty(l)){var nt=a[l];if(nt!=null)switch(l){case"name":f=nt;break;case"type":E=nt;break;case"checked":O=nt;break;case"defaultChecked":Q=nt;break;case"value":d=nt;break;case"defaultValue":S=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,s));break;default:se(e,s,l,nt,a,null)}}Er(e,d,S,O,Q,E,f,!1),ha(e);return;case"select":zt("invalid",e),l=E=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":E=S;break;case"multiple":l=S;default:se(e,s,f,S,a,null)}s=d,a=E,e.multiple=!!l,s!=null?Gi(e,!!l,s,!1):a!=null&&Gi(e,!!l,a,!0);return;case"textarea":zt("invalid",e),d=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(S=a[E],S!=null))switch(E){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:se(e,s,E,S,a,null)}Tr(e,l,f,d),ha(e);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:se(e,s,O,l,a,null)}return;case"dialog":zt("beforetoggle",e),zt("toggle",e),zt("cancel",e),zt("close",e);break;case"iframe":case"object":zt("load",e);break;case"video":case"audio":for(l=0;l<vl.length;l++)zt(vl[l],e);break;case"image":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"embed":case"source":case"link":zt("error",e),zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in a)if(a.hasOwnProperty(Q)&&(l=a[Q],l!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:se(e,s,Q,l,a,null)}return;default:if(ko(s)){for(nt in a)a.hasOwnProperty(nt)&&(l=a[nt],l!==void 0&&Fd(e,s,nt,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&se(e,s,S,l,a,null))}function d6(e,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,E=null,S=null,O=null,Q=null,nt=null;for($ in a){var rt=a[$];if(a.hasOwnProperty($)&&rt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":O=rt;default:l.hasOwnProperty($)||se(e,s,$,null,l,rt)}}for(var X in l){var $=l[X];if(rt=a[X],l.hasOwnProperty(X)&&($!=null||rt!=null))switch(X){case"type":d=$;break;case"name":f=$;break;case"checked":Q=$;break;case"defaultChecked":nt=$;break;case"value":E=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==rt&&se(e,s,X,$,l,rt)}}Rn(e,E,S,O,Q,nt,d,f);return;case"select":$=E=S=X=null;for(d in a)if(O=a[d],a.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":$=O;default:l.hasOwnProperty(d)||se(e,s,d,null,l,O)}for(f in l)if(d=l[f],O=a[f],l.hasOwnProperty(f)&&(d!=null||O!=null))switch(f){case"value":X=d;break;case"defaultValue":S=d;break;case"multiple":E=d;default:d!==O&&se(e,s,f,d,l,O)}s=S,a=E,l=$,X!=null?Gi(e,!!a,X,!1):!!l!=!!a&&(s!=null?Gi(e,!!a,s,!0):Gi(e,!!a,a?[]:"",!1));return;case"textarea":$=X=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:se(e,s,S,null,l,f)}for(E in l)if(f=l[E],d=a[E],l.hasOwnProperty(E)&&(f!=null||d!=null))switch(E){case"value":X=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&se(e,s,E,f,l,d)}ne(e,X,$);return;case"option":for(var Rt in a)if(X=a[Rt],a.hasOwnProperty(Rt)&&X!=null&&!l.hasOwnProperty(Rt))switch(Rt){case"selected":e.selected=!1;break;default:se(e,s,Rt,null,l,X)}for(O in l)if(X=l[O],$=a[O],l.hasOwnProperty(O)&&X!==$&&(X!=null||$!=null))switch(O){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:se(e,s,O,X,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in a)X=a[At],a.hasOwnProperty(At)&&X!=null&&!l.hasOwnProperty(At)&&se(e,s,At,null,l,X);for(Q in l)if(X=l[Q],$=a[Q],l.hasOwnProperty(Q)&&X!==$&&(X!=null||$!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:se(e,s,Q,X,l,$)}return;default:if(ko(s)){for(var re in a)X=a[re],a.hasOwnProperty(re)&&X!==void 0&&!l.hasOwnProperty(re)&&Fd(e,s,re,void 0,l,X);for(nt in l)X=l[nt],$=a[nt],!l.hasOwnProperty(nt)||X===$||X===void 0&&$===void 0||Fd(e,s,nt,X,l,$);return}}for(var q in a)X=a[q],a.hasOwnProperty(q)&&X!=null&&!l.hasOwnProperty(q)&&se(e,s,q,null,l,X);for(rt in l)X=l[rt],$=a[rt],!l.hasOwnProperty(rt)||X===$||X==null&&$==null||se(e,s,rt,X,l,$)}var Qd=null,Yd=null;function Mc(e){return e.nodeType===9?e:e.ownerDocument}function n2(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i2(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Kd(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xd=null;function m6(){var e=window.event;return e&&e.type==="popstate"?e===Xd?!1:(Xd=e,!0):(Xd=null,!1)}var s2=typeof setTimeout=="function"?setTimeout:void 0,g6=typeof clearTimeout=="function"?clearTimeout:void 0,r2=typeof Promise=="function"?Promise:void 0,p6=typeof queueMicrotask=="function"?queueMicrotask:typeof r2<"u"?function(e){return r2.resolve(null).then(e).catch(y6)}:s2;function y6(e){setTimeout(function(){throw e})}function Us(e){return e==="head"}function a2(e,s){var a=s,l=0,f=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=e.ownerDocument;if(a&1&&Tl(E.documentElement),a&2&&Tl(E.body),a&4)for(a=E.head,Tl(a),E=a.firstChild;E;){var S=E.nextSibling,O=E.nodeName;E[pr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=S}}if(f===0){e.removeChild(d),Il(s);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Il(s)}function $d(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$d(a),Es(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function _6(e,s,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[pr])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=li(e.nextSibling),e===null)break}return null}function v6(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=li(e.nextSibling),e===null))return null;return e}function Zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function E6(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function li(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Jd=null;function o2(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function l2(e,s,a){switch(s=Mc(a),e){case"html":if(e=s.documentElement,!e)throw Error(r(452));return e;case"head":if(e=s.head,!e)throw Error(r(453));return e;case"body":if(e=s.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Tl(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Es(e)}var $n=new Map,u2=new Set;function Vc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var us=W.d;W.d={f:T6,r:b6,D:S6,C:A6,L:w6,m:C6,X:x6,S:R6,M:I6};function T6(){var e=us.f(),s=Sc();return e||s}function b6(e){var s=mi(e);s!==null&&s.tag===5&&s.type==="form"?I0(s):us.r(e)}var Ya=typeof document>"u"?null:document;function c2(e,s,a){var l=Ya;if(l&&typeof s=="string"&&s){var f=Re(s);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),u2.has(f)||(u2.add(f),e={rel:e,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),tn(s,"link",e),Ee(s),l.head.appendChild(s)))}}function S6(e){us.D(e),c2("dns-prefetch",e,null)}function A6(e,s){us.C(e,s),c2("preconnect",e,s)}function w6(e,s,a){us.L(e,s,a);var l=Ya;if(l&&e&&s){var f='link[rel="preload"][as="'+Re(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Re(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Re(a.imageSizes)+'"]')):f+='[href="'+Re(e)+'"]';var d=f;switch(s){case"style":d=Ka(e);break;case"script":d=Xa(e)}$n.has(d)||(e=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),$n.set(d,e),l.querySelector(f)!==null||s==="style"&&l.querySelector(bl(d))||s==="script"&&l.querySelector(Sl(d))||(s=l.createElement("link"),tn(s,"link",e),Ee(s),l.head.appendChild(s)))}}function C6(e,s){us.m(e,s);var a=Ya;if(a&&e){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Re(l)+'"][href="'+Re(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Xa(e)}if(!$n.has(d)&&(e=_({rel:"modulepreload",href:e},s),$n.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(d)))return}l=a.createElement("link"),tn(l,"link",e),Ee(l),a.head.appendChild(l)}}}function R6(e,s,a){us.S(e,s,a);var l=Ya;if(l&&e){var f=hn(l).hoistableStyles,d=Ka(e);s=s||"default";var E=f.get(d);if(!E){var S={loading:0,preload:null};if(E=l.querySelector(bl(d)))S.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":s},a),(a=$n.get(d))&&Wd(e,a);var O=E=l.createElement("link");Ee(O),tn(O,"link",e),O._p=new Promise(function(Q,nt){O.onload=Q,O.onerror=nt}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Oc(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:S},f.set(d,E)}}}function x6(e,s){us.X(e,s);var a=Ya;if(a&&e){var l=hn(a).hoistableScripts,f=Xa(e),d=l.get(f);d||(d=a.querySelector(Sl(f)),d||(e=_({src:e,async:!0},s),(s=$n.get(f))&&t1(e,s),d=a.createElement("script"),Ee(d),tn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function I6(e,s){us.M(e,s);var a=Ya;if(a&&e){var l=hn(a).hoistableScripts,f=Xa(e),d=l.get(f);d||(d=a.querySelector(Sl(f)),d||(e=_({src:e,async:!0,type:"module"},s),(s=$n.get(f))&&t1(e,s),d=a.createElement("script"),Ee(d),tn(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function f2(e,s,a,l){var f=(f=_t.current)?Vc(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ka(a.href),a=hn(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ka(a.href);var d=hn(f).hoistableStyles,E=d.get(e);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,E),(d=f.querySelector(bl(e)))&&!d._p&&(E.instance=d,E.state.loading=5),$n.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$n.set(e,a),d||D6(f,e,a,E.state))),s&&l===null)throw Error(r(528,""));return E}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xa(a),a=hn(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ka(e){return'href="'+Re(e)+'"'}function bl(e){return'link[rel="stylesheet"]['+e+"]"}function h2(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function D6(e,s,a,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),tn(s,"link",a),Ee(s),e.head.appendChild(s))}function Xa(e){return'[src="'+Re(e)+'"]'}function Sl(e){return"script[async]"+e}function d2(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+Re(a.href)+'"]');if(l)return s.instance=l,Ee(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ee(l),tn(l,"style",f),Oc(l,a.precedence,e),s.instance=l;case"stylesheet":f=Ka(a.href);var d=e.querySelector(bl(f));if(d)return s.state.loading|=4,s.instance=d,Ee(d),d;l=h2(a),(f=$n.get(f))&&Wd(l,f),d=(e.ownerDocument||e).createElement("link"),Ee(d);var E=d;return E._p=new Promise(function(S,O){E.onload=S,E.onerror=O}),tn(d,"link",l),s.state.loading|=4,Oc(d,a.precedence,e),s.instance=d;case"script":return d=Xa(a.src),(f=e.querySelector(Sl(d)))?(s.instance=f,Ee(f),f):(l=a,(f=$n.get(d))&&(l=_({},a),t1(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ee(f),tn(f,"link",l),e.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Oc(l,a.precedence,e));return s.instance}function Oc(e,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,E=0;E<l.length;E++){var S=l[E];if(S.dataset.precedence===s)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function Wd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function t1(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Nc=null;function m2(e,s,a){if(Nc===null){var l=new Map,f=Nc=new Map;f.set(a,l)}else f=Nc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[pr]||d[Ne]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(s)||"";E=e+E;var S=l.get(E);S?S.push(d):l.set(E,[d])}}return l}function g2(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function M6(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function p2(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Al=null;function V6(){}function O6(e,s,a){if(Al===null)throw Error(r(475));var l=Al;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Ka(a.href),d=e.querySelector(bl(f));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Lc.bind(l),e.then(l,l)),s.state.loading|=4,s.instance=d,Ee(d);return}d=e.ownerDocument||e,a=h2(a),(f=$n.get(f))&&Wd(a,f),d=d.createElement("link"),Ee(d);var E=d;E._p=new Promise(function(S,O){E.onload=S,E.onerror=O}),tn(d,"link",a),s.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Lc.bind(l),e.addEventListener("load",s),e.addEventListener("error",s))}}function N6(){if(Al===null)throw Error(r(475));var e=Al;return e.stylesheets&&e.count===0&&e1(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&e1(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Lc(){if(this.count--,this.count===0){if(this.stylesheets)e1(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var kc=null;function e1(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,kc=new Map,s.forEach(L6,e),kc=null,Lc.call(e))}function L6(e,s){if(!(s.state.loading&4)){var a=kc.get(e);if(a)var l=a.get(null);else{a=new Map,kc.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var E=f[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=s.instance,E=f.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,f),a.set(E,f),this.count++,l=Lc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),s.state.loading|=4}}var wl={$$typeof:H,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function k6(e,s,a,l,f,d,E,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function y2(e,s,a,l,f,d,E,S,O,Q,nt,rt){return e=new k6(e,s,a,E,S,O,Q,rt),s=1,d===!0&&(s|=24),d=In(3,null,null,s),e.current=d,d.stateNode=e,s=kh(),s.refCount++,e.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},zh(d),e}function _2(e){return e?(e=Ca,e):Ca}function v2(e,s,a,l,f,d){f=_2(f),l.context===null?l.context=f:l.pendingContext=f,l=Cs(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Rs(e,l,s),a!==null&&(Nn(a,e,s),el(a,e,s))}function E2(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function n1(e,s){E2(e,s),(e=e.alternate)&&E2(e,s)}function T2(e){if(e.tag===13){var s=wa(e,67108864);s!==null&&Nn(s,e,67108864),n1(e,67108864)}}var Pc=!0;function P6(e,s,a,l){var f=Y.T;Y.T=null;var d=W.p;try{W.p=2,i1(e,s,a,l)}finally{W.p=d,Y.T=f}}function j6(e,s,a,l){var f=Y.T;Y.T=null;var d=W.p;try{W.p=8,i1(e,s,a,l)}finally{W.p=d,Y.T=f}}function i1(e,s,a,l){if(Pc){var f=s1(l);if(f===null)Gd(e,s,l,jc,a),S2(e,l);else if(z6(f,e,s,a,l))l.stopPropagation();else if(S2(e,l),s&4&&-1<U6.indexOf(e)){for(;f!==null;){var d=mi(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=ii(d.pendingLanes);if(E!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var O=1<<31-ce(E);S.entanglements[1]|=O,E&=~O}xi(d),(te&6)===0&&(Tc=Xe()+500,_l(0))}}break;case 13:S=wa(d,2),S!==null&&Nn(S,d,2),Sc(),n1(d,2)}if(d=s1(l),d===null&&Gd(e,s,l,jc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Gd(e,s,l,null,a)}}function s1(e){return e=Bn(e),r1(e)}var jc=null;function r1(e){if(jc=null,e=Bi(e),e!==null){var s=u(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=h(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return jc=e,null}function b2(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case Pn:return 2;case wn:return 8;case ni:case hi:return 32;case Cn:return 268435456;default:return 32}default:return 32}}var a1=!1,zs=null,Bs=null,qs=null,Cl=new Map,Rl=new Map,Hs=[],U6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S2(e,s){switch(e){case"focusin":case"focusout":zs=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Cl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(s.pointerId)}}function xl(e,s,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},s!==null&&(s=mi(s),s!==null&&T2(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),e)}function z6(e,s,a,l,f){switch(s){case"focusin":return zs=xl(zs,e,s,a,l,f),!0;case"dragenter":return Bs=xl(Bs,e,s,a,l,f),!0;case"mouseover":return qs=xl(qs,e,s,a,l,f),!0;case"pointerover":var d=f.pointerId;return Cl.set(d,xl(Cl.get(d)||null,e,s,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Rl.set(d,xl(Rl.get(d)||null,e,s,a,l,f)),!0}return!1}function A2(e){var s=Bi(e.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){e.blockedOn=s,Su(e.priority,function(){if(a.tag===13){var l=On();l=ys(l);var f=wa(a,l);f!==null&&Nn(f,a,l),n1(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=s1(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Fi=l,a.target.dispatchEvent(l),Fi=null}else return s=mi(a),s!==null&&T2(s),e.blockedOn=a,!1;s.shift()}return!0}function w2(e,s,a){Uc(e)&&a.delete(s)}function B6(){a1=!1,zs!==null&&Uc(zs)&&(zs=null),Bs!==null&&Uc(Bs)&&(Bs=null),qs!==null&&Uc(qs)&&(qs=null),Cl.forEach(w2),Rl.forEach(w2)}function zc(e,s){e.blockedOn===s&&(e.blockedOn=null,a1||(a1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,B6)))}var Bc=null;function C2(e){Bc!==e&&(Bc=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bc===e&&(Bc=null);for(var s=0;s<e.length;s+=3){var a=e[s],l=e[s+1],f=e[s+2];if(typeof l!="function"){if(r1(l||a)===null)continue;break}var d=mi(a);d!==null&&(e.splice(s,3),s-=3,rd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Il(e){function s(O){return zc(O,e)}zs!==null&&zc(zs,e),Bs!==null&&zc(Bs,e),qs!==null&&zc(qs,e),Cl.forEach(s),Rl.forEach(s);for(var a=0;a<Hs.length;a++){var l=Hs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Hs.length&&(a=Hs[0],a.blockedOn===null);)A2(a),a.blockedOn===null&&Hs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],E=f[Ce]||null;if(typeof d=="function")E||C2(a);else if(E){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,E=d[Ce]||null)S=E.formAction;else if(r1(f)!==null)continue}else S=E.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),C2(a)}}}function o1(e){this._internalRoot=e}qc.prototype.render=o1.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=On();v2(a,l,e,s,null,null)},qc.prototype.unmount=o1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;v2(e.current,2,null,e,null,null),Sc(),s[Un]=null}};function qc(e){this._internalRoot=e}qc.prototype.unstable_scheduleHydration=function(e){if(e){var s=_s();e={blockedOn:null,target:e,priority:s};for(var a=0;a<Hs.length&&s!==0&&s<Hs[a].priority;a++);Hs.splice(a,0,e),a===0&&A2(e)}};var R2=t.version;if(R2!=="19.1.0")throw Error(r(527,R2,"19.1.0"));W.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(s),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var q6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{$t=Hc.inject(q6),Ht=Hc}catch{}}return Ml.createRoot=function(e,s){if(!o(e))throw Error(r(299));var a=!1,l="",f=H0,d=G0,E=F0,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=y2(e,1,!1,null,null,a,l,f,d,E,S,null),e[Un]=s.current,Hd(e),new o1(s)},Ml.hydrateRoot=function(e,s,a){if(!o(e))throw Error(r(299));var l=!1,f="",d=H0,E=G0,S=F0,O=null,Q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(Q=a.formState)),s=y2(e,1,!0,s,a??null,l,f,d,E,S,O,Q),s.context=_2(null),a=s.current,l=On(),l=ys(l),f=Cs(l),f.callback=null,Rs(a,f,l),a=l,s.current.lanes=a,zi(s,a),xi(s),e[Un]=s.current,Hd(e),new qc(s)},Ml.version="19.1.0",Ml}var P2;function J6(){if(P2)return c1.exports;P2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),c1.exports=Z6(),c1.exports}var W6=J6(),m1={exports:{}},g1={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function t9(){if(j2)return g1;j2=1;var n=Mf().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return g1.c=function(t){return n.H.useMemoCache(t)},g1}var U2;function e9(){return U2||(U2=1,m1.exports=t9()),m1.exports}var Ve=e9();const n9=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}],rn=K.createContext(null),i9=n=>{const t=Ve.c(10),{children:i}=n,[r,o]=K.useState(!0),u=K.useRef("prod"),[h,m]=K.useState(!1),y=K.useRef(null);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[0]=g):g=t[0];const _=K.useRef(g),b=K.useRef(null),T=K.useRef(null),R=K.useRef(null),M=K.useRef(null),P=K.useRef("");let k;t[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],t[1]=k):k=t[1];const B=K.useRef(k);let Z,H;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>(u.current==="testing"?(y.current||(console.log("Creating a peer connection!"),y.current=new RTCPeerConnection({iceServers:n9})),M.current||(M.current=new MediaStream),y.current.ontrack=it=>{M.current.addTrack(it.track)},o(!1)):(async()=>{const I=await(await fetch("https://boop-messenger.metered.live/api/v1/turn/credentials?apiKey=f20a0ef134ca1708feba4abdf392c90361ec")).json();console.log("Peer connection set up!"),y.current=new RTCPeerConnection({iceServers:I}),M.current||(M.current=new MediaStream),y.current.ontrack=w=>{M.current.addTrack(w.track)},o(!1)})(),(async()=>{const it=await fetch("https://tenor.googleapis.com/v2/featured?key=AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k&client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low").then(s9);B.current=it.results,console.log(B.current)})(),()=>{y.current&&(y.current.close(),y.current=null)}),H=[],t[2]=Z,t[3]=H):(Z=t[2],H=t[3]),K.useEffect(Z,H),r){let it;return t[4]===Symbol.for("react.memo_cache_sentinel")?(it=C.jsx("div",{children:" Loading .. "}),t[4]=it):it=t[4],it}let J;t[5]!==h?(J={peerConnection:y,iceCandidates:_,dataChannel:b,imageChannel:T,videoChannel:R,remoteStream:M,peerName:P,connected:h,setConnected:m,featuredGifs:B},t[5]=h,t[6]=J):J=t[6];let z;return t[7]!==i||t[8]!==J?(z=C.jsx(rn,{value:J,children:i}),t[7]=i,t[8]=J,t[9]=z):z=t[9],z};function s9(n){return n.json()}var bm=mu(),Vt=n=>du(n,bm),Sm=mu();Vt.write=n=>du(n,Sm);var Vf=mu();Vt.onStart=n=>du(n,Vf);var Am=mu();Vt.onFrame=n=>du(n,Am);var wm=mu();Vt.onFinish=n=>du(n,wm);var so=[];Vt.setTimeout=(n,t)=>{const i=Vt.now()+t,r=()=>{const u=so.findIndex(h=>h.cancel==r);~u&&so.splice(u,1),Xs-=~u?1:0},o={time:i,handler:n,cancel:r};return so.splice(O_(i),0,o),Xs+=1,N_(),o};var O_=n=>~(~so.findIndex(t=>t.time>n)||~so.length);Vt.cancel=n=>{Vf.delete(n),Am.delete(n),wm.delete(n),bm.delete(n),Sm.delete(n)};Vt.sync=n=>{k1=!0,Vt.batchedUpdates(n),k1=!1};Vt.throttle=n=>{let t;function i(){try{n(...t)}finally{t=null}}function r(...o){t=o,Vt.onStart(i)}return r.handler=n,r.cancel=()=>{Vf.delete(i),t=null},r};var Cm=typeof window<"u"?window.requestAnimationFrame:()=>{};Vt.use=n=>Cm=n;Vt.now=typeof performance<"u"?()=>performance.now():Date.now;Vt.batchedUpdates=n=>n();Vt.catch=console.error;Vt.frameLoop="always";Vt.advance=()=>{Vt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):k_()};var Ks=-1,Xs=0,k1=!1;function du(n,t){k1?(t.delete(n),n(0)):(t.add(n),N_())}function N_(){Ks<0&&(Ks=0,Vt.frameLoop!=="demand"&&Cm(L_))}function r9(){Ks=-1}function L_(){~Ks&&(Cm(L_),Vt.batchedUpdates(k_))}function k_(){const n=Ks;Ks=Vt.now();const t=O_(Ks);if(t&&(P_(so.splice(0,t),i=>i.handler()),Xs-=t),!Xs){r9();return}Vf.flush(),bm.flush(n?Math.min(64,Ks-n):16.667),Am.flush(),Sm.flush(),wm.flush()}function mu(){let n=new Set,t=n;return{add(i){Xs+=t==n&&!n.has(i)?1:0,n.add(i)},delete(i){return Xs-=t==n&&n.has(i)?1:0,n.delete(i)},flush(i){t.size&&(n=new Set,Xs-=t.size,P_(t,r=>r(i)&&n.add(r)),Xs+=n.size,t=n)}}}function P_(n,t){n.forEach(i=>{try{t(i)}catch(r){Vt.catch(r)}})}var a9=Object.defineProperty,o9=(n,t)=>{for(var i in t)a9(n,i,{get:t[i],enumerable:!0})},fi={};o9(fi,{assign:()=>u9,colors:()=>Zs,createStringInterpolator:()=>xm,skipAnimation:()=>U_,to:()=>j_,willAdvance:()=>Im});function P1(){}var l9=(n,t,i)=>Object.defineProperty(n,t,{value:i,writable:!0,configurable:!0}),ft={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function fs(n,t){if(ft.arr(n)){if(!ft.arr(t)||n.length!==t.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return n===t}var It=(n,t)=>n.forEach(t);function Li(n,t,i){if(ft.arr(n)){for(let r=0;r<n.length;r++)t.call(i,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&t.call(i,n[r],r)}var pn=n=>ft.und(n)?[]:ft.arr(n)?n:[n];function Bl(n,t){if(n.size){const i=Array.from(n);n.clear(),It(i,t)}}var kl=(n,...t)=>Bl(n,i=>i(...t)),Rm=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),xm,j_,Zs=null,U_=!1,Im=P1,u9=n=>{n.to&&(j_=n.to),n.now&&(Vt.now=n.now),n.colors!==void 0&&(Zs=n.colors),n.skipAnimation!=null&&(U_=n.skipAnimation),n.createStringInterpolator&&(xm=n.createStringInterpolator),n.requestAnimationFrame&&Vt.use(n.requestAnimationFrame),n.batchedUpdates&&(Vt.batchedUpdates=n.batchedUpdates),n.willAdvance&&(Im=n.willAdvance),n.frameLoop&&(Vt.frameLoop=n.frameLoop)},ql=new Set,ti=[],p1=[],cf=0,Of={get idle(){return!ql.size&&!ti.length},start(n){cf>n.priority?(ql.add(n),Vt.onStart(c9)):(z_(n),Vt(j1))},advance:j1,sort(n){if(cf)Vt.onFrame(()=>Of.sort(n));else{const t=ti.indexOf(n);~t&&(ti.splice(t,1),B_(n))}},clear(){ti=[],ql.clear()}};function c9(){ql.forEach(z_),ql.clear(),Vt(j1)}function z_(n){ti.includes(n)||B_(n)}function B_(n){ti.splice(f9(ti,t=>t.priority>n.priority),0,n)}function j1(n){const t=p1;for(let i=0;i<ti.length;i++){const r=ti[i];cf=r.priority,r.idle||(Im(r),r.advance(n),r.idle||t.push(r))}return cf=0,p1=ti,p1.length=0,ti=t,ti.length>0}function f9(n,t){const i=n.findIndex(t);return i<0?n.length:i}var h9={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ci="[-+]?\\d*\\.?\\d+",ff=ci+"%";function Nf(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var d9=new RegExp("rgb"+Nf(ci,ci,ci)),m9=new RegExp("rgba"+Nf(ci,ci,ci,ci)),g9=new RegExp("hsl"+Nf(ci,ff,ff)),p9=new RegExp("hsla"+Nf(ci,ff,ff,ci)),y9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,v9=/^#([0-9a-fA-F]{6})$/,E9=/^#([0-9a-fA-F]{8})$/;function T9(n){let t;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(t=v9.exec(n))?parseInt(t[1]+"ff",16)>>>0:Zs&&Zs[n]!==void 0?Zs[n]:(t=d9.exec(n))?($a(t[1])<<24|$a(t[2])<<16|$a(t[3])<<8|255)>>>0:(t=m9.exec(n))?($a(t[1])<<24|$a(t[2])<<16|$a(t[3])<<8|q2(t[4]))>>>0:(t=y9.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=E9.exec(n))?parseInt(t[1],16)>>>0:(t=_9.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=g9.exec(n))?(z2(B2(t[1]),Gc(t[2]),Gc(t[3]))|255)>>>0:(t=p9.exec(n))?(z2(B2(t[1]),Gc(t[2]),Gc(t[3]))|q2(t[4]))>>>0:null}function y1(n,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(t-n)*6*i:i<1/2?t:i<2/3?n+(t-n)*(2/3-i)*6:n}function z2(n,t,i){const r=i<.5?i*(1+t):i+t-i*t,o=2*i-r,u=y1(o,r,n+1/3),h=y1(o,r,n),m=y1(o,r,n-1/3);return Math.round(u*255)<<24|Math.round(h*255)<<16|Math.round(m*255)<<8}function $a(n){const t=parseInt(n,10);return t<0?0:t>255?255:t}function B2(n){return(parseFloat(n)%360+360)%360/360}function q2(n){const t=parseFloat(n);return t<0?0:t>1?255:Math.round(t*255)}function Gc(n){const t=parseFloat(n);return t<0?0:t>100?1:t/100}function H2(n){let t=T9(n);if(t===null)return n;t=t||0;const i=(t&4278190080)>>>24,r=(t&16711680)>>>16,o=(t&65280)>>>8,u=(t&255)/255;return`rgba(${i}, ${r}, ${o}, ${u})`}var Zl=(n,t,i)=>{if(ft.fun(n))return n;if(ft.arr(n))return Zl({range:n,output:t,extrapolate:i});if(ft.str(n.output[0]))return xm(n);const r=n,o=r.output,u=r.range||[0,1],h=r.extrapolateLeft||r.extrapolate||"extend",m=r.extrapolateRight||r.extrapolate||"extend",y=r.easing||(g=>g);return g=>{const _=S9(g,u);return b9(g,u[_],u[_+1],o[_],o[_+1],y,h,m,r.map)}};function b9(n,t,i,r,o,u,h,m,y){let g=y?y(n):n;if(g<t){if(h==="identity")return g;h==="clamp"&&(g=t)}if(g>i){if(m==="identity")return g;m==="clamp"&&(g=i)}return r===o?r:t===i?n<=t?r:o:(t===-1/0?g=-g:i===1/0?g=g-t:g=(g-t)/(i-t),g=u(g),r===-1/0?g=-g:o===1/0?g=g+r:g=g*(o-r)+r,g)}function S9(n,t){for(var i=1;i<t.length-1&&!(t[i]>=n);++i);return i-1}var A9={linear:n=>n},Jl=Symbol.for("FluidValue.get"),lo=Symbol.for("FluidValue.observers"),Jn=n=>!!(n&&n[Jl]),Tn=n=>n&&n[Jl]?n[Jl]():n,G2=n=>n[lo]||null;function w9(n,t){n.eventObserved?n.eventObserved(t):n(t)}function Wl(n,t){const i=n[lo];i&&i.forEach(r=>{w9(r,t)})}var q_=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");C9(this,n)}},C9=(n,t)=>H_(n,Jl,t);function vo(n,t){if(n[Jl]){let i=n[lo];i||H_(n,lo,i=new Set),i.has(t)||(i.add(t),n.observerAdded&&n.observerAdded(i.size,t))}return t}function tu(n,t){const i=n[lo];if(i&&i.has(t)){const r=i.size-1;r?i.delete(t):n[lo]=null,n.observerRemoved&&n.observerRemoved(r,t)}}var H_=(n,t,i)=>Object.defineProperty(n,t,{value:i,writable:!0,configurable:!0}),tf=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,R9=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,F2=new RegExp(`(${tf.source})(%|[a-z]+)`,"i"),x9=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Lf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,G_=n=>{const[t,i]=I9(n);if(!t||Rm())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(i&&i.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||n}else{if(i&&Lf.test(i))return G_(i);if(i)return i}return n},I9=n=>{const t=Lf.exec(n);if(!t)return[,];const[,i,r]=t;return[i,r]},_1,D9=(n,t,i,r,o)=>`rgba(${Math.round(t)}, ${Math.round(i)}, ${Math.round(r)}, ${o})`,F_=n=>{_1||(_1=Zs?new RegExp(`(${Object.keys(Zs).join("|")})(?!\\w)`,"g"):/^\b$/);const t=n.output.map(u=>Tn(u).replace(Lf,G_).replace(R9,H2).replace(_1,H2)),i=t.map(u=>u.match(tf).map(Number)),o=i[0].map((u,h)=>i.map(m=>{if(!(h in m))throw Error('The arity of each "output" value must be equal');return m[h]})).map(u=>Zl({...n,output:u}));return u=>{var y;const h=!F2.test(t[0])&&((y=t.find(g=>F2.test(g)))==null?void 0:y.replace(tf,""));let m=0;return t[0].replace(tf,()=>`${o[m++](u)}${h||""}`).replace(x9,D9)}},Dm="react-spring: ",Q_=n=>{const t=n;let i=!1;if(typeof t!="function")throw new TypeError(`${Dm}once requires a function parameter`);return(...r)=>{i||(t(...r),i=!0)}},M9=Q_(console.warn);function V9(){M9(`${Dm}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var O9=Q_(console.warn);function N9(){O9(`${Dm}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function kf(n){return ft.str(n)&&(n[0]=="#"||/\d/.test(n)||!Rm()&&Lf.test(n)||n in(Zs||{}))}var Xr=Rm()?K.useEffect:K.useLayoutEffect,L9=()=>{const n=K.useRef(!1);return Xr(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function Mm(){const n=K.useState()[1],t=L9();return()=>{t.current&&n(Math.random())}}var Vm=n=>K.useEffect(n,k9),k9=[];function U1(n){const t=K.useRef(void 0);return K.useEffect(()=>{t.current=n}),t.current}var eu=Symbol.for("Animated:node"),P9=n=>!!n&&n[eu]===n,Di=n=>n&&n[eu],Om=(n,t)=>l9(n,eu,t),Pf=n=>n&&n[eu]&&n[eu].getPayload(),Y_=class{constructor(){Om(this,this)}getPayload(){return this.payload||[]}},jf=class K_ extends Y_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ft.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new K_(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,i){return ft.num(t)&&(this.lastPosition=t,i&&(t=Math.round(t/i)*i,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ft.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},hf=class X_ extends jf{constructor(t){super(0),this._string=null,this._toString=Zl({output:[t,t]})}static create(t){return new X_(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ft.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Zl({output:[this.getValue(),t]})),this._value=0,super.reset()}},df={dependencies:null},Uf=class extends Y_{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const t={};return Li(this.source,(i,r)=>{P9(i)?t[r]=i.getValue(n):Jn(i)?t[r]=Tn(i):n||(t[r]=i)}),t}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&It(this.payload,n=>n.reset())}_makePayload(n){if(n){const t=new Set;return Li(n,this._addToPayload,t),Array.from(t)}}_addToPayload(n){df.dependencies&&Jn(n)&&df.dependencies.add(n);const t=Pf(n);t&&It(t,i=>this.add(i))}},j9=class $_ extends Uf{constructor(t){super(t)}static create(t){return new $_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const i=this.getPayload();return t.length==i.length?i.map((r,o)=>r.setValue(t[o])).some(Boolean):(super.setValue(t.map(U9)),!0)}};function U9(n){return(kf(n)?hf:jf).create(n)}function z1(n){const t=Di(n);return t?t.constructor:ft.arr(n)?j9:kf(n)?hf:jf}var Q2=(n,t)=>{const i=!ft.fun(n)||n.prototype&&n.prototype.isReactComponent;return K.forwardRef((r,o)=>{const u=K.useRef(null),h=i&&K.useCallback(M=>{u.current=q9(o,M)},[o]),[m,y]=B9(r,t),g=Mm(),_=()=>{const M=u.current;if(i&&!M)return;(M?t.applyAnimatedValues(M,m.getValue(!0)):!1)===!1&&g()},b=new z9(_,y),T=K.useRef(void 0);Xr(()=>(T.current=b,It(y,M=>vo(M,b)),()=>{T.current&&(It(T.current.deps,M=>tu(M,T.current)),Vt.cancel(T.current.update))})),K.useEffect(_,[]),Vm(()=>()=>{const M=T.current;It(M.deps,P=>tu(P,M))});const R=t.getComponentProps(m.getValue());return K.createElement(n,{...R,ref:h})})},z9=class{constructor(n,t){this.update=n,this.deps=t}eventObserved(n){n.type=="change"&&Vt.write(this.update)}};function B9(n,t){const i=new Set;return df.dependencies=i,n.style&&(n={...n,style:t.createAnimatedStyle(n.style)}),n=new Uf(n),df.dependencies=null,[n,i]}function q9(n,t){return n&&(ft.fun(n)?n(t):n.current=t),t}var Y2=Symbol.for("AnimatedComponent"),H9=(n,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=o=>new Uf(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:r},u=h=>{const m=K2(h)||"Anonymous";return ft.str(h)?h=u[h]||(u[h]=Q2(h,o)):h=h[Y2]||(h[Y2]=Q2(h,o)),h.displayName=`Animated(${m})`,h};return Li(n,(h,m)=>{ft.arr(n)&&(m=K2(h)),u[m]=u(h)}),{animated:u}},K2=n=>ft.str(n)?n:n&&ft.str(n.displayName)?n.displayName:ft.fun(n)&&n.name||null;function bn(n,...t){return ft.fun(n)?n(...t):n}var Hl=(n,t)=>n===!0||!!(t&&n&&(ft.fun(n)?n(t):pn(n).includes(t))),Z_=(n,t)=>ft.obj(n)?t&&n[t]:n,J_=(n,t)=>n.default===!0?n[t]:n.default?n.default[t]:void 0,G9=n=>n,zf=(n,t=G9)=>{let i=F9;n.default&&n.default!==!0&&(n=n.default,i=Object.keys(n));const r={};for(const o of i){const u=t(n[o],o);ft.und(u)||(r[o]=u)}return r},F9=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Q9={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Y9(n){const t={};let i=0;if(Li(n,(r,o)=>{Q9[o]||(t[o]=r,i++)}),i)return t}function Nm(n){const t=Y9(n);if(t){const i={to:t};return Li(n,(r,o)=>o in t||(i[o]=r)),i}return{...n}}function nu(n){return n=Tn(n),ft.arr(n)?n.map(nu):kf(n)?fi.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function W_(n){for(const t in n)return!0;return!1}function B1(n){return ft.fun(n)||ft.arr(n)&&ft.obj(n[0])}function q1(n,t){var i;(i=n.ref)==null||i.delete(n),t==null||t.delete(n)}function tv(n,t){var i;t&&n.ref!==t&&((i=n.ref)==null||i.delete(n),t.add(n),n.ref=t)}var H1={default:{tension:170,friction:26},stiff:{tension:210,friction:20}},G1={...H1.default,mass:1,damping:1,easing:A9.linear,clamp:!1},K9=class{constructor(){this.velocity=0,Object.assign(this,G1)}};function X9(n,t,i){i&&(i={...i},X2(i,t),t={...i,...t}),X2(n,t),Object.assign(n,t);for(const h in G1)n[h]==null&&(n[h]=G1[h]);let{frequency:r,damping:o}=n;const{mass:u}=n;return ft.und(r)||(r<.01&&(r=.01),o<0&&(o=0),n.tension=Math.pow(2*Math.PI/r,2)*u,n.friction=4*Math.PI*o*u/r),n}function X2(n,t){if(!ft.und(t.decay))n.duration=void 0;else{const i=!ft.und(t.tension)||!ft.und(t.friction);(i||!ft.und(t.frequency)||!ft.und(t.damping)||!ft.und(t.mass))&&(n.duration=void 0,n.decay=void 0),i&&(n.frequency=void 0)}}var $2=[],$9=class{constructor(){this.changed=!1,this.values=$2,this.toValues=null,this.fromValues=$2,this.config=new K9,this.immediate=!1}};function ev(n,{key:t,props:i,defaultProps:r,state:o,actions:u}){return new Promise((h,m)=>{let y,g,_=Hl(i.cancel??(r==null?void 0:r.cancel),t);if(_)R();else{ft.und(i.pause)||(o.paused=Hl(i.pause,t));let M=r==null?void 0:r.pause;M!==!0&&(M=o.paused||Hl(M,t)),y=bn(i.delay||0,t),M?(o.resumeQueue.add(T),u.pause()):(u.resume(),T())}function b(){o.resumeQueue.add(T),o.timeouts.delete(g),g.cancel(),y=g.time-Vt.now()}function T(){y>0&&!fi.skipAnimation?(o.delayed=!0,g=Vt.setTimeout(R,y),o.pauseQueue.add(b),o.timeouts.add(g)):R()}function R(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(b),o.timeouts.delete(g),n<=(o.cancelId||0)&&(_=!0);try{u.start({...i,callId:n,cancel:_},h)}catch(M){m(M)}}})}var Lm=(n,t)=>t.length==1?t[0]:t.some(i=>i.cancelled)?ro(n.get()):t.every(i=>i.noop)?nv(n.get()):ui(n.get(),t.every(i=>i.finished)),nv=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),ui=(n,t,i=!1)=>({value:n,finished:t,cancelled:i}),ro=n=>({value:n,cancelled:!0,finished:!1});function iv(n,t,i,r){const{callId:o,parentId:u,onRest:h}=t,{asyncTo:m,promise:y}=i;return!u&&n===m&&!t.reset?y:i.promise=(async()=>{i.asyncId=o,i.asyncTo=n;const g=zf(t,(k,B)=>B==="onRest"?void 0:k);let _,b;const T=new Promise((k,B)=>(_=k,b=B)),R=k=>{const B=o<=(i.cancelId||0)&&ro(r)||o!==i.asyncId&&ui(r,!1);if(B)throw k.result=B,b(k),k},M=(k,B)=>{const Z=new Z2,H=new J2;return(async()=>{if(fi.skipAnimation)throw iu(i),H.result=ui(r,!1),b(H),H;R(Z);const J=ft.obj(k)?{...k}:{...B,to:k};J.parentId=o,Li(g,(it,I)=>{ft.und(J[I])&&(J[I]=it)});const z=await r.start(J);return R(Z),i.paused&&await new Promise(it=>{i.resumeQueue.add(it)}),z})()};let P;if(fi.skipAnimation)return iu(i),ui(r,!1);try{let k;ft.arr(n)?k=(async B=>{for(const Z of B)await M(Z)})(n):k=Promise.resolve(n(M,r.stop.bind(r))),await Promise.all([k.then(_),T]),P=ui(r.get(),!0,!1)}catch(k){if(k instanceof Z2)P=k.result;else if(k instanceof J2)P=k.result;else throw k}finally{o==i.asyncId&&(i.asyncId=u,i.asyncTo=u?m:void 0,i.promise=u?y:void 0)}return ft.fun(h)&&Vt.batchedUpdates(()=>{h(P,r,r.item)}),P})()}function iu(n,t){Bl(n.timeouts,i=>i.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,t&&(n.cancelId=t)}var Z2=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},J2=class extends Error{constructor(){super("SkipAnimationSignal")}},F1=n=>n instanceof km,Z9=1,km=class extends q_{constructor(){super(...arguments),this.id=Z9++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Di(this);return n&&n.getValue()}to(...n){return fi.to(this,n)}interpolate(...n){return V9(),fi.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,t=!1){Wl(this,{type:"change",parent:this,value:n,idle:t})}_onPriorityChange(n){this.idle||Of.sort(this),Wl(this,{type:"priority",parent:this,priority:n})}},Zr=Symbol.for("SpringPhase"),sv=1,Q1=2,Y1=4,v1=n=>(n[Zr]&sv)>0,Fs=n=>(n[Zr]&Q1)>0,Vl=n=>(n[Zr]&Y1)>0,W2=(n,t)=>t?n[Zr]|=Q1|sv:n[Zr]&=~Q1,ty=(n,t)=>t?n[Zr]|=Y1:n[Zr]&=~Y1,J9=class extends km{constructor(n,t){if(super(),this.animation=new $9,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ft.und(n)||!ft.und(t)){const i=ft.obj(n)?{...n}:{...t,from:n};ft.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Fs(this)||this._state.asyncTo)||Vl(this)}get goal(){return Tn(this.animation.to)}get velocity(){const n=Di(this);return n instanceof jf?n.lastVelocity||0:n.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return v1(this)}get isAnimating(){return Fs(this)}get isPaused(){return Vl(this)}get isDelayed(){return this._state.delayed}advance(n){let t=!0,i=!1;const r=this.animation;let{toValues:o}=r;const{config:u}=r,h=Pf(r.to);!h&&Jn(r.to)&&(o=pn(Tn(r.to))),r.values.forEach((g,_)=>{if(g.done)return;const b=g.constructor==hf?1:h?h[_].lastPosition:o[_];let T=r.immediate,R=b;if(!T){if(R=g.lastPosition,u.tension<=0){g.done=!0;return}let M=g.elapsedTime+=n;const P=r.fromValues[_],k=g.v0!=null?g.v0:g.v0=ft.arr(u.velocity)?u.velocity[_]:u.velocity;let B;const Z=u.precision||(P==b?.005:Math.min(1,Math.abs(b-P)*.001));if(ft.und(u.duration))if(u.decay){const H=u.decay===!0?.998:u.decay,J=Math.exp(-(1-H)*M);R=P+k/(1-H)*(1-J),T=Math.abs(g.lastPosition-R)<=Z,B=k*J}else{B=g.lastVelocity==null?k:g.lastVelocity;const H=u.restVelocity||Z/10,J=u.clamp?0:u.bounce,z=!ft.und(J),it=P==b?g.v0>0:P<b;let I,w=!1;const x=1,N=Math.ceil(n/x);for(let L=0;L<N&&(I=Math.abs(B)>H,!(!I&&(T=Math.abs(b-R)<=Z,T)));++L){z&&(w=R==b||R>b==it,w&&(B=-B*J,R=b));const j=-u.tension*1e-6*(R-b),D=-u.friction*.001*B,dt=(j+D)/u.mass;B=B+dt*x,R=R+B*x}}else{let H=1;u.duration>0&&(this._memoizedDuration!==u.duration&&(this._memoizedDuration=u.duration,g.durationProgress>0&&(g.elapsedTime=u.duration*g.durationProgress,M=g.elapsedTime+=n)),H=(u.progress||0)+M/this._memoizedDuration,H=H>1?1:H<0?0:H,g.durationProgress=H),R=P+u.easing(H)*(b-P),B=(R-g.lastPosition)/n,T=H==1}g.lastVelocity=B,Number.isNaN(R)&&(console.warn("Got NaN while animating:",this),T=!0)}h&&!h[_].done&&(T=!1),T?g.done=!0:t=!1,g.setValue(R,u.round)&&(i=!0)});const m=Di(this),y=m.getValue();if(t){const g=Tn(r.to);(y!==g||i)&&!u.decay?(m.setValue(g),this._onChange(g)):i&&u.decay&&this._onChange(y),this._stop()}else i&&this._onChange(y)}set(n){return Vt.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Fs(this)){const{to:n,config:t}=this.animation;Vt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,t){let i;return ft.und(n)?(i=this.queue||[],this.queue=[]):i=[ft.obj(n)?n:{...t,to:n}],Promise.all(i.map(r=>this._update(r))).then(r=>Lm(this,r))}stop(n){const{to:t}=this.animation;return this._focus(this.get()),iu(this._state,n&&this._lastCallId),Vt.batchedUpdates(()=>this._stop(t,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const t=this.key||"";let{to:i,from:r}=n;i=ft.obj(i)?i[t]:i,(i==null||B1(i))&&(i=void 0),r=ft.obj(r)?r[t]:r,r==null&&(r=void 0);const o={to:i,from:r};return v1(this)||(n.reverse&&([i,r]=[r,i]),r=Tn(r),ft.und(r)?Di(this)||this._set(i):this._set(r)),o}_update({...n},t){const{key:i,defaultProps:r}=this;n.default&&Object.assign(r,zf(n,(h,m)=>/^on/.test(m)?Z_(h,i):h)),ny(this,n,"onProps"),Nl(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const u=this._state;return ev(++this._lastCallId,{key:i,props:n,defaultProps:r,state:u,actions:{pause:()=>{Vl(this)||(ty(this,!0),kl(u.pauseQueue),Nl(this,"onPause",ui(this,Ol(this,this.animation.to)),this))},resume:()=>{Vl(this)&&(ty(this,!1),Fs(this)&&this._resume(),kl(u.resumeQueue),Nl(this,"onResume",ui(this,Ol(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(h=>{if(n.loop&&h.finished&&!(t&&h.noop)){const m=rv(n);if(m)return this._update(m,!0)}return h})}_merge(n,t,i){if(t.cancel)return this.stop(!0),i(ro(this));const r=!ft.und(n.to),o=!ft.und(n.from);if(r||o)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(ro(this));const{key:u,defaultProps:h,animation:m}=this,{to:y,from:g}=m;let{to:_=y,from:b=g}=n;o&&!r&&(!t.default||ft.und(_))&&(_=b),t.reverse&&([_,b]=[b,_]);const T=!fs(b,g);T&&(m.from=b),b=Tn(b);const R=!fs(_,y);R&&this._focus(_);const M=B1(t.to),{config:P}=m,{decay:k,velocity:B}=P;(r||o)&&(P.velocity=0),t.config&&!M&&X9(P,bn(t.config,u),t.config!==h.config?bn(h.config,u):void 0);let Z=Di(this);if(!Z||ft.und(_))return i(ui(this,!0));const H=ft.und(t.reset)?o&&!t.default:!ft.und(b)&&Hl(t.reset,u),J=H?b:this.get(),z=nu(_),it=ft.num(z)||ft.arr(z)||kf(z),I=!M&&(!it||Hl(h.immediate||t.immediate,u));if(R){const L=z1(_);if(L!==Z.constructor)if(I)Z=this._set(z);else throw Error(`Cannot animate between ${Z.constructor.name} and ${L.name}, as the "to" prop suggests`)}const w=Z.constructor;let x=Jn(_),N=!1;if(!x){const L=H||!v1(this)&&T;(R||L)&&(N=fs(nu(J),z),x=!N),(!fs(m.immediate,I)&&!I||!fs(P.decay,k)||!fs(P.velocity,B))&&(x=!0)}if(N&&Fs(this)&&(m.changed&&!H?x=!0:x||this._stop(y)),!M&&((x||Jn(y))&&(m.values=Z.getPayload(),m.toValues=Jn(_)?null:w==hf?[1]:pn(z)),m.immediate!=I&&(m.immediate=I,!I&&!H&&this._set(y)),x)){const{onRest:L}=m;It(t5,D=>ny(this,t,D));const j=ui(this,Ol(this,y));kl(this._pendingCalls,j),this._pendingCalls.add(i),m.changed&&Vt.batchedUpdates(()=>{var D;m.changed=!H,L==null||L(j,this),H?bn(h.onRest,j):(D=m.onStart)==null||D.call(m,j,this)})}H&&this._set(J),M?i(iv(t.to,t,this._state,this)):x?this._start():Fs(this)&&!R?this._pendingCalls.add(i):i(nv(J))}_focus(n){const t=this.animation;n!==t.to&&(G2(this)&&this._detach(),t.to=n,G2(this)&&this._attach())}_attach(){let n=0;const{to:t}=this.animation;Jn(t)&&(vo(t,this),F1(t)&&(n=t.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;Jn(n)&&tu(n,this)}_set(n,t=!0){const i=Tn(n);if(!ft.und(i)){const r=Di(this);if(!r||!fs(i,r.getValue())){const o=z1(i);!r||r.constructor!=o?Om(this,o.create(i)):r.setValue(i),r&&Vt.batchedUpdates(()=>{this._onChange(i,t)})}}return Di(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,Nl(this,"onStart",ui(this,Ol(this,n.to)),this))}_onChange(n,t){t||(this._onStart(),bn(this.animation.onChange,n,this)),bn(this.defaultProps.onChange,n,this),super._onChange(n,t)}_start(){const n=this.animation;Di(this).reset(Tn(n.to)),n.immediate||(n.fromValues=n.values.map(t=>t.lastPosition)),Fs(this)||(W2(this,!0),Vl(this)||this._resume())}_resume(){fi.skipAnimation?this.finish():Of.start(this)}_stop(n,t){if(Fs(this)){W2(this,!1);const i=this.animation;It(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),Wl(this,{type:"idle",parent:this});const r=t?ro(this.get()):ui(this.get(),Ol(this,n??i.to));kl(this._pendingCalls,r),i.changed&&(i.changed=!1,Nl(this,"onRest",r,this))}}};function Ol(n,t){const i=nu(t),r=nu(n.get());return fs(r,i)}function rv(n,t=n.loop,i=n.to){const r=bn(t);if(r){const o=r!==!0&&Nm(r),u=(o||n).reverse,h=!o||o.reset;return su({...n,loop:t,default:!1,pause:void 0,to:!u||B1(i)?i:void 0,from:h?n.from:void 0,reset:h,...o})}}function su(n){const{to:t,from:i}=n=Nm(n),r=new Set;return ft.obj(t)&&ey(t,r),ft.obj(i)&&ey(i,r),n.keys=r.size?Array.from(r):null,n}function W9(n){const t=su(n);return ft.und(t.default)&&(t.default=zf(t)),t}function ey(n,t){Li(n,(i,r)=>i!=null&&t.add(r))}var t5=["onStart","onRest","onChange","onPause","onResume"];function ny(n,t,i){n.animation[i]=t[i]!==J_(t,i)?Z_(t[i],n.key):void 0}function Nl(n,t,...i){var r,o,u,h;(o=(r=n.animation)[t])==null||o.call(r,...i),(h=(u=n.defaultProps)[t])==null||h.call(u,...i)}var e5=["onStart","onChange","onRest"],n5=1,av=class{constructor(t,i){this.id=n5++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),i&&(this._flush=i),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((i,r)=>t[r]=i.get()),t}set(t){for(const i in t){const r=t[i];ft.und(r)||this.springs[i].set(r)}}update(t){return t&&this.queue.push(su(t)),this}start(t){let{queue:i}=this;return t?i=pn(t).map(su):this.queue=[],this._flush?this._flush(this,i):(fv(this,i),K1(this,i))}stop(t,i){if(t!==!!t&&(i=t),i){const r=this.springs;It(pn(i),o=>r[o].stop(!!t))}else iu(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(ft.und(t))this.start({pause:!0});else{const i=this.springs;It(pn(t),r=>i[r].pause())}return this}resume(t){if(ft.und(t))this.start({pause:!1});else{const i=this.springs;It(pn(t),r=>i[r].resume())}return this}each(t){Li(this.springs,t)}_onFrame(){const{onStart:t,onChange:i,onRest:r}=this._events,o=this._active.size>0,u=this._changed.size>0;(o&&!this._started||u&&!this._started)&&(this._started=!0,Bl(t,([y,g])=>{g.value=this.get(),y(g,this,this._item)}));const h=!o&&this._started,m=u||h&&r.size?this.get():null;u&&i.size&&Bl(i,([y,g])=>{g.value=m,y(g,this,this._item)}),h&&(this._started=!1,Bl(r,([y,g])=>{g.value=m,y(g,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Vt.onFrame(this._onFrame)}};function K1(n,t){return Promise.all(t.map(i=>ov(n,i))).then(i=>Lm(n,i))}async function ov(n,t,i){const{keys:r,to:o,from:u,loop:h,onRest:m,onResolve:y}=t,g=ft.obj(t.default)&&t.default;h&&(t.loop=!1),o===!1&&(t.to=null),u===!1&&(t.from=null);const _=ft.arr(o)||ft.fun(o)?o:void 0;_?(t.to=void 0,t.onRest=void 0,g&&(g.onRest=void 0)):It(e5,P=>{const k=t[P];if(ft.fun(k)){const B=n._events[P];t[P]=({finished:Z,cancelled:H})=>{const J=B.get(k);J?(Z||(J.finished=!1),H&&(J.cancelled=!0)):B.set(k,{value:null,finished:Z||!1,cancelled:H||!1})},g&&(g[P]=t[P])}});const b=n._state;t.pause===!b.paused?(b.paused=t.pause,kl(t.pause?b.pauseQueue:b.resumeQueue)):b.paused&&(t.pause=!0);const T=(r||Object.keys(n.springs)).map(P=>n.springs[P].start(t)),R=t.cancel===!0||J_(t,"cancel")===!0;(_||R&&b.asyncId)&&T.push(ev(++n._lastAsyncId,{props:t,state:b,actions:{pause:P1,resume:P1,start(P,k){R?(iu(b,n._lastAsyncId),k(ro(n))):(P.onRest=m,k(iv(_,P,b,n)))}}})),b.paused&&await new Promise(P=>{b.resumeQueue.add(P)});const M=Lm(n,await Promise.all(T));if(h&&M.finished&&!(i&&M.noop)){const P=rv(t,h,o);if(P)return fv(n,[P]),ov(n,P,!0)}return y&&Vt.batchedUpdates(()=>y(M,n,n.item)),M}function X1(n,t){const i={...n.springs};return t&&It(pn(t),r=>{ft.und(r.keys)&&(r=su(r)),ft.obj(r.to)||(r={...r,to:void 0}),cv(i,r,o=>uv(o))}),lv(n,i),i}function lv(n,t){Li(t,(i,r)=>{n.springs[r]||(n.springs[r]=i,vo(i,n))})}function uv(n,t){const i=new J9;return i.key=n,t&&vo(i,t),i}function cv(n,t,i){t.keys&&It(t.keys,r=>{(n[r]||(n[r]=i(r)))._prepareNode(t)})}function fv(n,t){It(t,i=>{cv(n.springs,i,r=>uv(r,n))})}var hv=K.createContext({pause:!1,immediate:!1}),dv=()=>{const n=[],t=function(r){N9();const o=[];return It(n,(u,h)=>{if(ft.und(r))o.push(u.start());else{const m=i(r,u,h);m&&o.push(u.start(m))}}),o};t.current=n,t.add=function(r){n.includes(r)||n.push(r)},t.delete=function(r){const o=n.indexOf(r);~o&&n.splice(o,1)},t.pause=function(){return It(n,r=>r.pause(...arguments)),this},t.resume=function(){return It(n,r=>r.resume(...arguments)),this},t.set=function(r){It(n,(o,u)=>{const h=ft.fun(r)?r(u,o):r;h&&o.set(h)})},t.start=function(r){const o=[];return It(n,(u,h)=>{if(ft.und(r))o.push(u.start());else{const m=this._getProps(r,u,h);m&&o.push(u.start(m))}}),o},t.stop=function(){return It(n,r=>r.stop(...arguments)),this},t.update=function(r){return It(n,(o,u)=>o.update(this._getProps(r,o,u))),this};const i=function(r,o,u){return ft.fun(r)?r(u,o):r};return t._getProps=i,t};function i5(n,t,i){const r=ft.fun(t)&&t;r&&!i&&(i=[]);const o=K.useMemo(()=>r||arguments.length==3?dv():void 0,[]),u=K.useRef(0),h=Mm(),m=K.useMemo(()=>({ctrls:[],queue:[],flush(B,Z){const H=X1(B,Z);return u.current>0&&!m.queue.length&&!Object.keys(H).some(z=>!B.springs[z])?K1(B,Z):new Promise(z=>{lv(B,H),m.queue.push(()=>{z(K1(B,Z))}),h()})}}),[]),y=K.useRef([...m.ctrls]),g=K.useRef([]),_=U1(n)||0;K.useMemo(()=>{It(y.current.slice(n,_),B=>{q1(B,o),B.stop(!0)}),y.current.length=n,b(_,n)},[n]),K.useMemo(()=>{b(0,Math.min(_,n))},i);function b(B,Z){for(let H=B;H<Z;H++){const J=y.current[H]||(y.current[H]=new av(null,m.flush)),z=r?r(H,J):t[H];z&&(g.current[H]=W9(z))}}const T=y.current.map((B,Z)=>X1(B,g.current[Z])),R=K.useContext(hv),M=U1(R),P=R!==M&&W_(R);Xr(()=>{u.current++,m.ctrls=y.current;const{queue:B}=m;B.length&&(m.queue=[],It(B,Z=>Z())),It(y.current,(Z,H)=>{o==null||o.add(Z),P&&Z.start({default:R});const J=g.current[H];J&&(tv(Z,J.ref),Z.ref?Z.queue.push(J):Z.start(J))})}),Vm(()=>()=>{It(m.ctrls,B=>B.stop(!0))});const k=T.map(B=>({...B}));return o?[k,o]:k}function ta(n,t){const i=ft.fun(n),[[r],o]=i5(1,i?n:[n],i?[]:t);return i||arguments.length==2?[r,o]:r}function s5(n,t,i){const r=ft.fun(t)&&t,{reset:o,sort:u,trail:h=0,expires:m=!0,exitBeforeEnter:y=!1,onDestroyed:g,ref:_,config:b}=r?r():t,T=K.useMemo(()=>r||arguments.length==3?dv():void 0,[]),R=pn(n),M=[],P=K.useRef(null),k=o?null:P.current;Xr(()=>{P.current=M}),Vm(()=>(It(M,dt=>{T==null||T.add(dt.ctrl),dt.ctrl.ref=T}),()=>{It(P.current,dt=>{dt.expired&&clearTimeout(dt.expirationId),q1(dt.ctrl,T),dt.ctrl.stop(!0)})}));const B=a5(R,r?r():t,k),Z=o&&P.current||[];Xr(()=>It(Z,({ctrl:dt,item:mt,key:Y})=>{q1(dt,T),bn(g,mt,Y)}));const H=[];if(k&&It(k,(dt,mt)=>{dt.expired?(clearTimeout(dt.expirationId),Z.push(dt)):(mt=H[mt]=B.indexOf(dt.key),~mt&&(M[mt]=dt))}),It(R,(dt,mt)=>{M[mt]||(M[mt]={key:B[mt],item:dt,phase:"mount",ctrl:new av},M[mt].ctrl.item=dt)}),H.length){let dt=-1;const{leave:mt}=r?r():t;It(H,(Y,W)=>{const ut=k[W];~Y?(dt=M.indexOf(ut),M[dt]={...ut,item:R[Y]}):mt&&M.splice(++dt,0,ut)})}ft.fun(u)&&M.sort((dt,mt)=>u(dt.item,mt.item));let J=-h;const z=Mm(),it=zf(t),I=new Map,w=K.useRef(new Map),x=K.useRef(!1);It(M,(dt,mt)=>{const Y=dt.key,W=dt.phase,ut=r?r():t;let pt,V;const et=bn(ut.delay||0,Y);if(W=="mount")pt=ut.enter,V="enter";else{const Et=B.indexOf(Y)<0;if(W!="leave")if(Et)pt=ut.leave,V="leave";else if(pt=ut.update)V="update";else return;else if(!Et)pt=ut.enter,V="enter";else return}if(pt=bn(pt,dt.item,mt),pt=ft.obj(pt)?Nm(pt):{to:pt},!pt.config){const Et=b||it.config;pt.config=bn(Et,dt.item,mt,V)}J+=h;const ct={...it,delay:et+J,ref:_,immediate:ut.immediate,reset:!1,...pt};if(V=="enter"&&ft.und(ct.from)){const Et=r?r():t,_t=ft.und(Et.initial)||k?Et.from:Et.initial;ct.from=bn(_t,dt.item,mt)}const{onResolve:ot}=ct;ct.onResolve=Et=>{bn(ot,Et);const _t=P.current,Ot=_t.find(xt=>xt.key===Y);if(Ot&&!(Et.cancelled&&Ot.phase!="update")&&Ot.ctrl.idle){const xt=_t.every(qt=>qt.ctrl.idle);if(Ot.phase=="leave"){const qt=bn(m,Ot.item);if(qt!==!1){const ae=qt===!0?0:qt;if(Ot.expired=!0,!xt&&ae>0){ae<=2147483647&&(Ot.expirationId=setTimeout(z,ae));return}}}xt&&_t.some(qt=>qt.expired)&&(w.current.delete(Ot),y&&(x.current=!0),z())}};const gt=X1(dt.ctrl,ct);V==="leave"&&y?w.current.set(dt,{phase:V,springs:gt,payload:ct}):I.set(dt,{phase:V,springs:gt,payload:ct})});const N=K.useContext(hv),L=U1(N),j=N!==L&&W_(N);Xr(()=>{j&&It(M,dt=>{dt.ctrl.start({default:N})})},[N]),It(I,(dt,mt)=>{if(w.current.size){const Y=M.findIndex(W=>W.key===mt.key);M.splice(Y,1)}}),Xr(()=>{It(w.current.size?w.current:I,({phase:dt,payload:mt},Y)=>{const{ctrl:W}=Y;Y.phase=dt,T==null||T.add(W),j&&dt=="enter"&&W.start({default:N}),mt&&(tv(W,mt.ref),(W.ref||T)&&!x.current?W.update(mt):(W.start(mt),x.current&&(x.current=!1)))})},o?void 0:i);const D=dt=>K.createElement(K.Fragment,null,M.map((mt,Y)=>{const{springs:W}=I.get(mt)||mt.ctrl,ut=dt({...W},mt.item,mt,Y),pt=ft.str(mt.key)||ft.num(mt.key)?mt.key:mt.ctrl.id,V=K.version<"19.0.0",et=(ut==null?void 0:ut.props)??{};return V&&(et.ref=ut.ref),ut&&ut.type?K.createElement(ut.type,{key:pt,...et}):ut}));return T?[D,T]:D}var r5=1;function a5(n,{key:t,keys:i=t},r){if(i===null){const o=new Set;return n.map(u=>{const h=r&&r.find(m=>m.item===u&&m.phase!=="leave"&&!o.has(m));return h?(o.add(h),h.key):r5++})}return ft.und(i)?n:ft.fun(i)?n.map(i):pn(i)}var o5=class extends km{constructor(n,t){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=Zl(...t);const i=this._get(),r=z1(i);Om(this,r.create(i))}advance(n){const t=this._get(),i=this.get();fs(t,i)||(Di(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&iy(this._active)&&E1(this)}_get(){const n=ft.arr(this.source)?this.source.map(Tn):pn(Tn(this.source));return this.calc(...n)}_start(){this.idle&&!iy(this._active)&&(this.idle=!1,It(Pf(this),n=>{n.done=!1}),fi.skipAnimation?(Vt.batchedUpdates(()=>this.advance()),E1(this)):Of.start(this))}_attach(){let n=1;It(pn(this.source),t=>{Jn(t)&&vo(t,this),F1(t)&&(t.idle||this._active.add(t),n=Math.max(n,t.priority+1))}),this.priority=n,this._start()}_detach(){It(pn(this.source),n=>{Jn(n)&&tu(n,this)}),this._active.clear(),E1(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=pn(this.source).reduce((t,i)=>Math.max(t,(F1(i)?i.priority:0)+1),0))}};function l5(n){return n.idle!==!1}function iy(n){return!n.size||Array.from(n).every(l5)}function E1(n){n.idle||(n.idle=!0,It(Pf(n),t=>{t.done=!0}),Wl(n,{type:"idle",parent:n}))}fi.assign({createStringInterpolator:F_,to:(n,t)=>new o5(n,t)});var u5=V_(),mv=/^--/;function c5(n,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!mv.test(n)&&!(Gl.hasOwnProperty(n)&&Gl[n])?t+"px":(""+t).trim()}var sy={};function f5(n,t){if(!n.nodeType||!n.setAttribute)return!1;const i=n.nodeName==="filter"||n.parentNode&&n.parentNode.nodeName==="filter",{className:r,style:o,children:u,scrollTop:h,scrollLeft:m,viewBox:y,...g}=t,_=Object.values(g),b=Object.keys(g).map(T=>i||n.hasAttribute(T)?T:sy[T]||(sy[T]=T.replace(/([A-Z])/g,R=>"-"+R.toLowerCase())));u!==void 0&&(n.textContent=u);for(const T in o)if(o.hasOwnProperty(T)){const R=c5(T,o[T]);mv.test(T)?n.style.setProperty(T,R):n.style[T]=R}b.forEach((T,R)=>{n.setAttribute(T,_[R])}),r!==void 0&&(n.className=r),h!==void 0&&(n.scrollTop=h),m!==void 0&&(n.scrollLeft=m),y!==void 0&&n.setAttribute("viewBox",y)}var Gl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h5=(n,t)=>n+t.charAt(0).toUpperCase()+t.substring(1),d5=["Webkit","Ms","Moz","O"];Gl=Object.keys(Gl).reduce((n,t)=>(d5.forEach(i=>n[h5(i,t)]=n[t]),n),Gl);var m5=/^(matrix|translate|scale|rotate|skew)/,g5=/^(translate)/,p5=/^(rotate|skew)/,T1=(n,t)=>ft.num(n)&&n!==0?n+t:n,ef=(n,t)=>ft.arr(n)?n.every(i=>ef(i,t)):ft.num(n)?n===t:parseFloat(n)===t,y5=class extends Uf{constructor({x:n,y:t,z:i,...r}){const o=[],u=[];(n||t||i)&&(o.push([n||0,t||0,i||0]),u.push(h=>[`translate3d(${h.map(m=>T1(m,"px")).join(",")})`,ef(h,0)])),Li(r,(h,m)=>{if(m==="transform")o.push([h||""]),u.push(y=>[y,y===""]);else if(m5.test(m)){if(delete r[m],ft.und(h))return;const y=g5.test(m)?"px":p5.test(m)?"deg":"";o.push(pn(h)),u.push(m==="rotate3d"?([g,_,b,T])=>[`rotate3d(${g},${_},${b},${T1(T,y)})`,ef(T,0)]:g=>[`${m}(${g.map(_=>T1(_,y)).join(",")})`,ef(g,m.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new _5(o,u)),super(r)}},_5=class extends q_{constructor(n,t){super(),this.inputs=n,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let n="",t=!0;return It(this.inputs,(i,r)=>{const o=Tn(i[0]),[u,h]=this.transforms[r](ft.arr(o)?o:i.map(Tn));n+=" "+u,t=t&&h}),t?"none":n}observerAdded(n){n==1&&It(this.inputs,t=>It(t,i=>Jn(i)&&vo(i,this)))}observerRemoved(n){n==0&&It(this.inputs,t=>It(t,i=>Jn(i)&&tu(i,this)))}eventObserved(n){n.type=="change"&&(this._value=null),Wl(this,n)}},v5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];fi.assign({batchedUpdates:u5.unstable_batchedUpdates,createStringInterpolator:F_,colors:h9});var E5=H9(v5,{applyAnimatedValues:f5,createAnimatedStyle:n=>new y5(n),getComponentProps:({scrollTop:n,scrollLeft:t,...i})=>i}),ea=E5.animated;function T5(n,t,i){return Math.max(t,Math.min(n,i))}const ue={toVector(n,t){return n===void 0&&(n=t),Array.isArray(n)?n:[n,n]},add(n,t){return[n[0]+t[0],n[1]+t[1]]},sub(n,t){return[n[0]-t[0],n[1]-t[1]]},addTo(n,t){n[0]+=t[0],n[1]+=t[1]},subTo(n,t){n[0]-=t[0],n[1]-=t[1]}};function ry(n,t,i){return t===0||Math.abs(t)===1/0?Math.pow(n,i*5):n*t*i/(t+i*n)}function ay(n,t,i,r=.15){return r===0?T5(n,t,i):n<t?-ry(t-n,i-t,r)+t:n>i?+ry(n-i,i-t,r)+i:n}function b5(n,[t,i],[r,o]){const[[u,h],[m,y]]=n;return[ay(t,u,h,r),ay(i,m,y,o)]}function S5(n,t){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function A5(n){var t=S5(n,"string");return typeof t=="symbol"?t:String(t)}function Me(n,t,i){return t=A5(t),t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function oy(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,r)}return i}function ge(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oy(Object(i),!0).forEach(function(r){Me(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):oy(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}const gv={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function ly(n){return n?n[0].toUpperCase()+n.slice(1):""}const w5=["enter","leave"];function C5(n=!1,t){return n&&!w5.includes(t)}function R5(n,t="",i=!1){const r=gv[n],o=r&&r[t]||t;return"on"+ly(n)+ly(o)+(C5(i,o)?"Capture":"")}const x5=["gotpointercapture","lostpointercapture"];function I5(n){let t=n.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const r=x5.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:i}}function D5(n,t=""){const i=gv[n],r=i&&i[t]||t;return n+r}function Bf(n){return"touches"in n}function pv(n){return Bf(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function M5(n){return Array.from(n.touches).filter(t=>{var i,r;return t.target===n.currentTarget||((i=n.currentTarget)===null||i===void 0||(r=i.contains)===null||r===void 0?void 0:r.call(i,t.target))})}function V5(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function yv(n){return Bf(n)?V5(n)[0]:n}function $1(n,t){try{const i=t.clientX-n.clientX,r=t.clientY-n.clientY,o=(t.clientX+n.clientX)/2,u=(t.clientY+n.clientY)/2,h=Math.hypot(i,r);return{angle:-(Math.atan2(i,r)*180)/Math.PI,distance:h,origin:[o,u]}}catch{}return null}function O5(n){return M5(n).map(t=>t.identifier)}function uy(n,t){const[i,r]=Array.from(n.touches).filter(o=>t.includes(o.identifier));return $1(i,r)}function b1(n){const t=yv(n);return Bf(n)?t.identifier:t.pointerId}function uo(n){const t=yv(n);return[t.clientX,t.clientY]}const cy=40,fy=800;function _v(n){let{deltaX:t,deltaY:i,deltaMode:r}=n;return r===1?(t*=cy,i*=cy):r===2&&(t*=fy,i*=fy),[t,i]}function N5(n){var t,i;const{scrollX:r,scrollY:o,scrollLeft:u,scrollTop:h}=n.currentTarget;return[(t=r??u)!==null&&t!==void 0?t:0,(i=o??h)!==null&&i!==void 0?i:0]}function L5(n){const t={};if("buttons"in n&&(t.buttons=n.buttons),"shiftKey"in n){const{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u}=n;Object.assign(t,{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u})}return t}function mf(n,...t){return typeof n=="function"?n(...t):n}function k5(){}function P5(...n){return n.length===0?k5:n.length===1?n[0]:function(){let t;for(const i of n)t=i.apply(this,arguments)||t;return t}}function hy(n,t){return Object.assign({},t,n||{})}const j5=32;class vv{constructor(t,i,r){this.ctrl=t,this.args=i,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:i,ingKey:r,args:o}=this;i[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=o,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const i=this.state,r=this.config;i._active||(this.reset(),this.computeInitial(),i._active=!0,i.target=t.target,i.currentTarget=t.currentTarget,i.lastOffset=r.from?mf(r.from,i):i.offset,i.offset=i.lastOffset,i.startTime=i.timeStamp=t.timeStamp)}computeValues(t){const i=this.state;i._values=t,i.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:i,config:r,shared:o}=this;i.args=this.args;let u=0;if(t&&(i.event=t,r.preventDefault&&t.cancelable&&i.event.preventDefault(),i.type=t.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,L5(t)),o.down=o.pressed=o.buttons%2===1||o.touches>0,u=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime),i._active){const it=i._delta.map(Math.abs);ue.addTo(i._distance,it)}this.axisIntent&&this.axisIntent(t);const[h,m]=i._movement,[y,g]=r.threshold,{_step:_,values:b}=i;if(r.hasCustomTransform?(_[0]===!1&&(_[0]=Math.abs(h)>=y&&b[0]),_[1]===!1&&(_[1]=Math.abs(m)>=g&&b[1])):(_[0]===!1&&(_[0]=Math.abs(h)>=y&&Math.sign(h)*y),_[1]===!1&&(_[1]=Math.abs(m)>=g&&Math.sign(m)*g)),i.intentional=_[0]!==!1||_[1]!==!1,!i.intentional)return;const T=[0,0];if(r.hasCustomTransform){const[it,I]=b;T[0]=_[0]!==!1?it-_[0]:0,T[1]=_[1]!==!1?I-_[1]:0}else T[0]=_[0]!==!1?h-_[0]:0,T[1]=_[1]!==!1?m-_[1]:0;this.restrictToAxis&&!i._blocked&&this.restrictToAxis(T);const R=i.offset,M=i._active&&!i._blocked||i.active;M&&(i.first=i._active&&!i.active,i.last=!i._active&&i.active,i.active=o[this.ingKey]=i._active,t&&(i.first&&("bounds"in r&&(i._bounds=mf(r.bounds,i)),this.setup&&this.setup()),i.movement=T,this.computeOffset()));const[P,k]=i.offset,[[B,Z],[H,J]]=i._bounds;i.overflow=[P<B?-1:P>Z?1:0,k<H?-1:k>J?1:0],i._movementBound[0]=i.overflow[0]?i._movementBound[0]===!1?i._movement[0]:i._movementBound[0]:!1,i._movementBound[1]=i.overflow[1]?i._movementBound[1]===!1?i._movement[1]:i._movementBound[1]:!1;const z=i._active?r.rubberband||[0,0]:[0,0];if(i.offset=b5(i._bounds,i.offset,z),i.delta=ue.sub(i.offset,R),this.computeMovement(),M&&(!i.last||u>j5)){i.delta=ue.sub(i.offset,R);const it=i.delta.map(Math.abs);ue.addTo(i.distance,it),i.direction=i.delta.map(Math.sign),i._direction=i._delta.map(Math.sign),!i.first&&u>0&&(i.velocity=[it[0]/u,it[1]/u],i.timeDelta=u)}}emit(){const t=this.state,i=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const o=this.handler(ge(ge(ge({},i),t),{},{[this.aliasKey]:t.values}));o!==void 0&&(t.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function U5([n,t],i){const r=Math.abs(n),o=Math.abs(t);if(r>o&&r>i)return"x";if(o>r&&o>i)return"y"}class gu extends vv{constructor(...t){super(...t),Me(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ue.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ue.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const i=this.state,r=this.config;if(!i.axis&&t){const o=typeof r.axisThreshold=="object"?r.axisThreshold[pv(t)]:r.axisThreshold;i.axis=U5(i._movement,o)}i._blocked=(r.lockDirection||!!r.axis)&&!i.axis||!!r.axis&&r.axis!==i.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const z5=n=>n,dy=.15,Ev={enabled(n=!0){return n},eventOptions(n,t,i){return ge(ge({},i.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[dy,dy];case!1:return[0,0];default:return ue.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return ue.toVector(n)},transform(n,t,i){const r=n||i.shared.transform;return this.hasCustomTransform=!!r,r||z5},threshold(n){return ue.toVector(n,0)}},B5=0,na=ge(ge({},Ev),{},{axis(n,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(n=B5){return n},bounds(n={}){if(typeof n=="function")return u=>na.bounds(n(u));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:t=-1/0,right:i=1/0,top:r=-1/0,bottom:o=1/0}=n;return[[t,i],[r,o]]}}),my={ArrowRight:(n,t=1)=>[n*t,0],ArrowLeft:(n,t=1)=>[-1*n*t,0],ArrowUp:(n,t=1)=>[0,-1*n*t],ArrowDown:(n,t=1)=>[0,n*t]};class q5 extends gu{constructor(...t){super(...t),Me(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const i=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),o={left:i.left-r.left+t.offset[0],right:i.right-r.right+t.offset[0],top:i.top-r.top+t.offset[1],bottom:i.bottom-r.bottom+t.offset[1]};t._bounds=na.bounds(o)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const i=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(i.pointerButtons)?!i.pointerButtons.includes(t.buttons):i.pointerButtons!==-1&&i.pointerButtons!==t.buttons))return;const o=this.ctrl.setEventIds(t);i.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(o&&o.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=b1(t),r._pointerActive=!0,this.computeValues(uo(t)),this.computeInitial(),i.preventScrollAxis&&pv(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):i.delay>0?(this.setupDelayTrigger(t),i.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const i=this.state;i._active=!0,i._preventScroll=!0,i._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const i=this.state,r=this.config;if(!i._pointerActive)return;const o=b1(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;const u=uo(t);if(document.pointerLockElement===t.target?i._delta=[t.movementX,t.movementY]:(i._delta=ue.sub(u,i._values),this.computeValues(u)),ue.addTo(i._movement,i._delta),this.compute(t),i._delayed&&i.intentional){this.timeoutStore.remove("dragDelay"),i.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!i._preventScroll)if(i.axis)if(i.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){i._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const i=this.state,r=this.config;if(!i._active||!i._pointerActive)return;const o=b1(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[u,h]=i._distance;if(i.tap=u<=r.tapsThreshold&&h<=r.tapsThreshold,i.tap&&r.filterTaps)i._force=!0;else{const[m,y]=i._delta,[g,_]=i._movement,[b,T]=r.swipe.velocity,[R,M]=r.swipe.distance,P=r.swipe.duration;if(i.elapsedTime<P){const k=Math.abs(m/i.timeDelta),B=Math.abs(y/i.timeDelta);k>b&&Math.abs(g)>R&&(i.swipe[0]=Math.sign(m)),B>T&&Math.abs(_)>M&&(i.swipe[1]=Math.sign(y))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const i=this.config,r=i.device;i.pointerLock&&t.currentTarget.requestPointerLock(),i.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,H5(t);const i=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",i),this.eventStore.add(this.sharedConfig.window,"touch","cancel",i),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const i=my[t.key];if(i){const r=this.state,o=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=i(this.config.keyboardDisplacement,o),r._keyboardActive=!0,ue.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in my&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const i=this.config.device;t(i,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(i,"change",this.pointerMove.bind(this)),t(i,"end",this.pointerUp.bind(this)),t(i,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function H5(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const pu=typeof window<"u"&&window.document&&window.document.createElement;function Tv(){return pu&&"ontouchstart"in window}function G5(){return Tv()||pu&&window.navigator.maxTouchPoints>1}function F5(){return pu&&"onpointerdown"in window}function Q5(){return pu&&"exitPointerLock"in window.document}function Y5(){try{return"constructor"in GestureEvent}catch{return!1}}const Wn={isBrowser:pu,gesture:Y5(),touch:Tv(),touchscreen:G5(),pointer:F5(),pointerLock:Q5()},K5=250,X5=180,$5=.5,Z5=50,J5=250,W5=10,gy={mouse:0,touch:0,pen:8},tE=ge(ge({},na),{},{device(n,t,{pointer:{touch:i=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&Wn.pointerLock,Wn.touch&&i?"touch":this.pointerLock?"mouse":Wn.pointer&&!o?"pointer":Wn.touch?"touch":"mouse"},preventScrollAxis(n,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&n?K5:void 0,!(!Wn.touchscreen||i===!1))return n||(i!==void 0?"y":void 0)},pointerCapture(n,t,{pointer:{capture:i=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&i},threshold(n,t,{filterTaps:i=!1,tapsThreshold:r=3,axis:o=void 0}){const u=ue.toVector(n,i?r:o?1:0);return this.filterTaps=i,this.tapsThreshold=r,u},swipe({velocity:n=$5,distance:t=Z5,duration:i=J5}={}){return{velocity:this.transform(ue.toVector(n)),distance:this.transform(ue.toVector(t)),duration:i}},delay(n=0){switch(n){case!0:return X5;case!1:return 0;default:return n}},axisThreshold(n){return n?ge(ge({},gy),n):gy},keyboardDisplacement(n=W5){return n}});function bv(n){const[t,i]=n.overflow,[r,o]=n._delta,[u,h]=n._direction;(t<0&&r>0&&u<0||t>0&&r<0&&u>0)&&(n._movement[0]=n._movementBound[0]),(i<0&&o>0&&h<0||i>0&&o<0&&h>0)&&(n._movement[1]=n._movementBound[1])}const eE=30,nE=100;class iE extends vv{constructor(...t){super(...t),Me(this,"ingKey","pinching"),Me(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:i,lastOffset:r}=this.state;t==="wheel"?this.state.offset=ue.add(i,r):this.state.offset=[(1+i[0])*r[0],i[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:i}=this.state;this.state.movement=[t[0]/i[0],t[1]-i[1]]}axisIntent(){const t=this.state,[i,r]=t._movement;if(!t.axis){const o=Math.abs(i)*eE-Math.abs(r);o<0?t.axis="angle":o>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const i=this.state,r=this.ctrl.touchIds;if(i._active&&i._touchIds.every(u=>r.has(u))||r.size<2)return;this.start(t),i._touchIds=Array.from(r).slice(0,2);const o=uy(t,i._touchIds);o&&this.pinchStart(t,o)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const i=this.state,r=i._pointerEvents,o=this.ctrl.pointerIds;if(i._active&&Array.from(r.keys()).every(h=>o.has(h))||(r.size<2&&r.set(t.pointerId,t),i._pointerEvents.size<2))return;this.start(t);const u=$1(...Array.from(r.values()));u&&this.pinchStart(t,u)}pinchStart(t,i){const r=this.state;r.origin=i.origin,this.computeValues([i.distance,i.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const i=uy(t,this.state._touchIds);i&&this.pinchMove(t,i)}pointerMove(t){const i=this.state._pointerEvents;if(i.has(t.pointerId)&&i.set(t.pointerId,t),!this.state._active)return;const r=$1(...Array.from(i.values()));r&&this.pinchMove(t,r)}pinchMove(t,i){const r=this.state,o=r._values[1],u=i.angle-o;let h=0;Math.abs(u)>270&&(h+=Math.sign(u)),this.computeValues([i.distance,i.angle-360*h]),r.origin=i.origin,r.turns=h,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(i=>!this.ctrl.touchIds.has(i))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const i=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}i._pointerEvents.has(t.pointerId)&&i._pointerEvents.delete(t.pointerId),i._active&&i._pointerEvents.size<2&&(i._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const i=this.state;i._active||(this.start(t),this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const i=this.state;this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY];const r=i._movement;i._movement=[t.scale-1,t.rotation],i._delta=ue.sub(i._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const i=this.config.modifierKey;i&&(Array.isArray(i)?!i.find(r=>t[r]):!t[i])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-_v(t)[1]/nE*r.offset[0],0],ue.addTo(r._movement,r._delta),bv(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const i=this.config.device;i&&(t(i,"start",this[i+"Start"].bind(this)),t(i,"change",this[i+"Move"].bind(this)),t(i,"end",this[i+"End"].bind(this)),t(i,"cancel",this[i+"End"].bind(this)),t("lostPointerCapture","",this[i+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const sE=ge(ge({},Ev),{},{device(n,t,{shared:i,pointer:{touch:r=!1}={}}){if(i.target&&!Wn.touch&&Wn.gesture)return"gesture";if(Wn.touch&&r)return"touch";if(Wn.touchscreen){if(Wn.pointer)return"pointer";if(Wn.touch)return"touch"}},bounds(n,t,{scaleBounds:i={},angleBounds:r={}}){const o=h=>{const m=hy(mf(i,h),{min:-1/0,max:1/0});return[m.min,m.max]},u=h=>{const m=hy(mf(r,h),{min:-1/0,max:1/0});return[m.min,m.max]};return typeof i!="function"&&typeof r!="function"?[o(),u()]:h=>[o(h),u(h)]},threshold(n,t,i){return this.lockDirection=i.axis==="lock",ue.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class rE extends gu{constructor(...t){super(...t),Me(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(uo(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const i=uo(t),r=this.state;r._delta=ue.sub(i,r._values),ue.addTo(r._movement,r._delta),this.computeValues(i),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const aE=ge(ge({},na),{},{mouseOnly:(n=!0)=>n});class oE extends gu{constructor(...t){super(...t),Me(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const i=this.state,r=N5(t);i._delta=ue.sub(r,i._values),ue.addTo(i._movement,i._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const lE=na;class uE extends gu{constructor(...t){super(...t),Me(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const i=this.state;i._delta=_v(t),ue.addTo(i._movement,i._delta),bv(i),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const cE=na;class fE extends gu{constructor(...t){super(...t),Me(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(uo(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const i=this.state;if(!i._active)return;i._active=!1;const r=uo(t);i._movement=i._delta=ue.sub(r,i._values),this.computeValues(r),this.compute(t),i.delta=i.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const hE=ge(ge({},na),{},{mouseOnly:(n=!0)=>n}),Pm=new Map,Z1=new Map;function Sv(n){Pm.set(n.key,n.engine),Z1.set(n.key,n.resolver)}const Av={key:"drag",engine:q5,resolver:tE},dE={key:"hover",engine:fE,resolver:hE},mE={key:"move",engine:rE,resolver:aE},gE={key:"pinch",engine:iE,resolver:sE},pE={key:"scroll",engine:oE,resolver:lE},yE={key:"wheel",engine:uE,resolver:cE};function _E(n,t){if(n==null)return{};var i={},r=Object.keys(n),o,u;for(u=0;u<r.length;u++)o=r[u],!(t.indexOf(o)>=0)&&(i[o]=n[o]);return i}function vE(n,t){if(n==null)return{};var i=_E(n,t),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(o=0;o<u.length;o++)r=u[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}const EE={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=Wn.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform(n){return n}},TE=["target","eventOptions","window","enabled","transform"];function nf(n={},t){const i={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":i[r]=o.call(i,n[r],r,n);break;case"object":i[r]=nf(n[r],o);break;case"boolean":o&&(i[r]=n[r]);break}return i}function bE(n,t,i={}){const r=n,{target:o,eventOptions:u,window:h,enabled:m,transform:y}=r,g=vE(r,TE);if(i.shared=nf({target:o,eventOptions:u,window:h,enabled:m,transform:y},EE),t){const _=Z1.get(t);i[t]=nf(ge({shared:i.shared},g),_)}else for(const _ in g){const b=Z1.get(_);b&&(i[_]=nf(ge({shared:i.shared},g[_]),b))}return i}class wv{constructor(t,i){Me(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=i}add(t,i,r,o,u){const h=this._listeners,m=D5(i,r),y=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=ge(ge({},y),u);t.addEventListener(m,o,g);const _=()=>{t.removeEventListener(m,o,g),h.delete(_)};return h.add(_),_}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class SE{constructor(){Me(this,"_timeouts",new Map)}add(t,i,r=140,...o){this.remove(t),this._timeouts.set(t,window.setTimeout(i,r,...o))}remove(t){const i=this._timeouts.get(t);i&&window.clearTimeout(i)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class AE{constructor(t){Me(this,"gestures",new Set),Me(this,"_targetEventStore",new wv(this)),Me(this,"gestureEventStores",{}),Me(this,"gestureTimeoutStores",{}),Me(this,"handlers",{}),Me(this,"config",{}),Me(this,"pointerIds",new Set),Me(this,"touchIds",new Set),Me(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),wE(this,t)}setEventIds(t){if(Bf(t))return this.touchIds=new Set(O5(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,i){this.handlers=t,this.nativeHandlers=i}applyConfig(t,i){this.config=bE(t,i,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const i=this.config.shared,r={};let o;if(!(i.target&&(o=i.target(),!o))){if(i.enabled){for(const h of this.gestures){const m=this.config[h],y=py(r,m.eventOptions,!!o);if(m.enabled){const g=Pm.get(h);new g(this,t,h).bind(y)}}const u=py(r,i.eventOptions,!!o);for(const h in this.nativeHandlers)u(h,"",m=>this.nativeHandlers[h](ge(ge({},this.state.shared),{},{event:m,args:t})),void 0,!0)}for(const u in r)r[u]=P5(...r[u]);if(!o)return r;for(const u in r){const{device:h,capture:m,passive:y}=I5(u);this._targetEventStore.add(o,h,"",r[u],{capture:m,passive:y})}}}}function Za(n,t){n.gestures.add(t),n.gestureEventStores[t]=new wv(n,t),n.gestureTimeoutStores[t]=new SE}function wE(n,t){t.drag&&Za(n,"drag"),t.wheel&&Za(n,"wheel"),t.scroll&&Za(n,"scroll"),t.move&&Za(n,"move"),t.pinch&&Za(n,"pinch"),t.hover&&Za(n,"hover")}const py=(n,t,i)=>(r,o,u,h={},m=!1)=>{var y,g;const _=(y=h.capture)!==null&&y!==void 0?y:t.capture,b=(g=h.passive)!==null&&g!==void 0?g:t.passive;let T=m?r:R5(r,o,_);i&&b&&(T+="Passive"),n[T]=n[T]||[],n[T].push(u)},CE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function RE(n){const t={},i={},r=new Set;for(let o in n)CE.test(o)?(r.add(RegExp.lastMatch),i[o]=n[o]):t[o]=n[o];return[i,t,r]}function Ja(n,t,i,r,o,u){if(!n.has(i)||!Pm.has(r))return;const h=i+"Start",m=i+"End",y=g=>{let _;return g.first&&h in t&&t[h](g),i in t&&(_=t[i](g)),g.last&&m in t&&t[m](g),_};o[r]=y,u[r]=u[r]||{}}function xE(n,t){const[i,r,o]=RE(n),u={};return Ja(o,i,"onDrag","drag",u,t),Ja(o,i,"onWheel","wheel",u,t),Ja(o,i,"onScroll","scroll",u,t),Ja(o,i,"onPinch","pinch",u,t),Ja(o,i,"onMove","move",u,t),Ja(o,i,"onHover","hover",u,t),{handlers:u,config:t,nativeHandlers:r}}function Cv(n,t={},i,r){const o=Kr.useMemo(()=>new AE(n),[]);if(o.applyHandlers(n,r),o.applyConfig(t,i),Kr.useEffect(o.effect.bind(o)),Kr.useEffect(()=>o.clean.bind(o),[]),t.target===void 0)return o.bind.bind(o)}function yu(n,t){return Sv(Av),Cv({drag:n},t||{},"drag")}function IE(n){return n.forEach(Sv),function(i,r){const{handlers:o,nativeHandlers:u,config:h}=xE(i,r||{});return Cv(o,h,void 0,u)}}function DE(n,t){return IE([Av,gE,pE,yE,mE,dE])(n,t||{})}const ME="_popup_tu52t_1",VE={popup:ME},OE=n=>{const t=Ve.c(13),{message:i,onClose:r}=n,[o,u]=K.useState(!1),[h,m]=ta(NE),{x:y,y:g,opacity:_}=h;let b;t[0]!==m||t[1]!==r?(b=k=>{const{down:B,movement:Z,direction:H}=k,[J]=Z,[z]=H;if(!B&&Math.abs(J)>100){u(!0),m.start({x:z>0?500:-500,opacity:0,onRest:r});return}m.start({x:B?J:0,opacity:1})},t[0]=m,t[1]=r,t[2]=b):b=t[2];const T=yu(b);if(o)return null;let R;t[3]!==T?(R=T(),t[3]=T,t[4]=R):R=t[4];let M;t[5]!==_||t[6]!==y||t[7]!==g?(M={x:y,y:g,opacity:_},t[5]=_,t[6]=y,t[7]=g,t[8]=M):M=t[8];let P;return t[9]!==i||t[10]!==R||t[11]!==M?(P=C.jsx(ea.div,{...R,className:VE.popup,style:M,children:i}),t[9]=i,t[10]=R,t[11]=M,t[12]=P):P=t[12],P};function NE(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}const Rv=K.createContext(),_u=()=>K.useContext(Rv),LE=({children:n})=>{const[t,i]=K.useState([]),r=(h,m={})=>{const y=Date.now();i(g=>[...g,{id:y,message:h,...m}]),m.persistent||setTimeout(()=>o(y),m.duration||3e3)},o=h=>{i(m=>m.filter(y=>y.id!==h))},u=K.useMemo(()=>({showNotification:r,removeNotification:o}),[]);return C.jsxs(Rv,{value:u,children:[n,C.jsx("div",{style:{position:"fixed",top:20,right:0,left:0,display:"flex",flexDirection:"column",padding:20,gap:10,zIndex:10,pointerEvents:"none"},children:t.map(h=>C.jsx(OE,{...h,onClose:()=>o(h.id)},h.id))})]})};function Fl(n){const t=n.current.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function kE(n,t){let i=0;return function(...r){const o=Date.now();o-i>=t&&(i=o,n.apply(this,r))}}function PE(n,t){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>n(...r),t)}}async function jE(n,t=32*1024){const i=[];let r=0;const o=await n.arrayBuffer();for(;r<o.byteLength;){const u=o.slice(r,r+t);i.push(u),r+=t,i.length%50===0&&await new Promise(h=>setTimeout(h,0))}return i}async function UE(n,t){let i=0;t.send(JSON.stringify({type:"imageStart",sentId:n.sentId,receivedId:n.receivedId}));for(const r of n.chunks)i++,t.send(r),i%50===0&&await new Promise(o=>setTimeout(o,0));t.send(JSON.stringify({type:"imageEnd",imageType:n.fileType}))}const J1=({type:n,content:t,replying:i,setReplying:r,selectedMessage:o,dataChannel:u,addMessage:h,sentId:m,inputRef:y,atBottomRef:g})=>{const _={type:n,content:t,sentId:m.current,receivedId:null},b={sentId:m.current,receivedId:null,type:n==="text"?n:"image",status:"sending",reaction:-1,content:t,deleted:0};if(i){const T={sentId:o.receivedId,receivedId:o.sentId};_.replyTo={...o,...T},b.replyTo=o,r(!1)}u.send(JSON.stringify(_)),h(b),m.current=m.current+1,y&&(y.current.value=""),g.current=!0};function zE(n){return n?new RegExp("^(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F|\\p{Emoji_Modifier_Base}(?:\\p{Emoji_Modifier})?|\\p{Extended_Pictographic})+$","u").test(n.trim()):void 0}const yy=n=>{let t;const i=new Set,r=(g,_)=>{const b=typeof g=="function"?g(t):g;if(!Object.is(b,t)){const T=t;t=_??(typeof b!="object"||b===null)?b:Object.assign({},t,b),i.forEach(R=>R(t,T))}},o=()=>t,m={setState:r,getState:o,getInitialState:()=>y,subscribe:g=>(i.add(g),()=>i.delete(g))},y=t=n(r,o,m);return m},BE=n=>n?yy(n):yy,qE=n=>n;function HE(n,t=qE){const i=Kr.useSyncExternalStore(n.subscribe,Kr.useCallback(()=>t(n.getState()),[n,t]),Kr.useCallback(()=>t(n.getInitialState()),[n,t]));return Kr.useDebugValue(i),i}const _y=n=>{const t=BE(n),i=r=>HE(t,r);return Object.assign(i,t),i},GE=n=>n?_y(n):_y,Pt=GE(n=>({messages:[],addMessage:t=>n(i=>({messages:[...i.messages,t]})),removeMessage:(t,i)=>n(r=>({messages:r.messages.filter(o=>o.sentId!==t&&o.receivedId!==i)})),updateMessage:(t,i,r)=>n(o=>({messages:o.messages.map(u=>u.sentId===t&&u.receivedId===i?{...u,...r}:u)})),highlightMessage:(t,i)=>n(r=>({messages:r.messages.map(o=>o.sentId===t&&o.receivedId===i?{...o,highlight:!o.highlight}:o)})),replying:null,setReplying:t=>n(()=>({replying:t})),actionsShown:!1,setActionsShown:t=>n(()=>({actionsShown:t})),reactionsShown:!1,setReactionsShown:t=>n(()=>({reactionsShown:t})),newMessage:!1,setNewMessage:t=>n(()=>({newMessage:t})),typing:!1,setTyping:t=>n(()=>({typing:t})),imageDialog:null,setImageDialog:t=>n(()=>({imageDialog:t})),videoCall:"hidden",setVideoCall:t=>n(()=>({videoCall:t}))})),ei=K.createContext(null),FE=({children:n})=>{console.log("Chat context rendered!");const{dataChannel:t,imageChannel:i}=K.useContext(rn),{showNotification:r}=_u(),o=K.useRef(null),u=K.useRef([]),h=K.useRef(0),m=K.useRef(null),y=K.useRef({x:0,y:0}),g=K.useRef(!1),_=K.useRef(null),b=K.useRef(!1),T=K.useRef(null),R=Pt(J=>J.addMessage),M=Pt(J=>J.updateMessage),P=Pt(J=>J.removeMessage),k=Pt(J=>J.setNewMessage),B=Pt(J=>J.setVideoCall),Z=Pt(J=>J.setTyping);K.useEffect(()=>(t.current.onmessage=J=>{let z=JSON.parse(J.data);if(z.type==="typing")clearTimeout(_.current),Z(!0),_.current=setTimeout(()=>{Z(!1)},1400);else if(z.type==="text"){let it={receivedId:z.sentId,sentId:z.receivedId,type:z.type,reaction:-1,content:z.content,deleted:0,hightlight:!1,replyTo:z.replyTo};Fl(m)?(console.log("I am in the bottom!"),b.current=!0):k(!0);let I={type:"ack",sentId:z.sentId,receivedId:z.receivedId};t.current.send(JSON.stringify(I)),R(it)}else if(z.type==="ack")M(z.sentId,null,{status:"sent"});else if(z.type==="reaction"){let it={type:"ackReaction",sentId:z.id,reaction:z.reaction};t.current.send(JSON.stringify(it)),M(z.id,null,{reaction:z.reaction})}else if(z.type==="ackReaction")console.log("I have received an ackReaction message: ",z),M(null,z.sentId,{reaction:z.reaction});else if(z.type==="gif"){let it={receivedId:z.sentId,sentId:z.receivedId,type:"image",reaction:-1,content:z.content,deleted:0,hightlight:!1,replyTo:z.replyTo};Fl(m)?b.current=!0:k(!0);let I={type:"gifAck",sentId:z.sentId,receivedId:z.receivedId};t.current.send(JSON.stringify(I)),R(it)}else if(z.type==="gifAck")M(z.sentId,z.receivedId,{status:"sent"});else if(z.type==="imageRequest"){let it={receivedId:z.sentId,sentId:z.receivedId,type:z.type,reaction:-1,deleted:0,hightlight:!1,replyTo:z.replyTo};Fl(m)?b.current=!0:k(!0),R(it)}else if(z.type==="imageAccept"){const it=u.current.find(I=>I.sentId===z.sentId&&I.receivedId===z.receivedId);console.log(it),(async()=>await UE(it,i.current))()}else if(z.type==="imageReject")console.log("The image I sent was rejected!"),P(z.sentId,z.receivedId);else if(z.type==="imageReceived")M(z.sentId,z.receivedId,{status:"sent"});else if(z.type==="delete"){let it={type:"ackDeletion",sentId:z.sentId};t.current.send(JSON.stringify(it)),M(null,z.sentId,{type:"text",content:"This message has been deleted",deleted:2})}else z.type==="ackDeletion"?M(z.sentId,null,{type:"text",content:"This message has been deleted",deleted:2}):z.type==="callRequest"?(console.log("The other peer is trying to call me!"),B("incoming")):z.type==="callReject"?(r("Your call was rejected!"),B("hidden")):z.type==="callAccept"?B("call"):z.type==="callEnd"&&B("hidden")},i.current.onmessage=J=>{if(typeof J.data=="string"){const z=JSON.parse(J.data);if(z.type==="imageStart")T.current={sentId:z.receivedId,receivedId:z.sentId,chunks:[]};else if(z.type==="imageEnd"){const it=new Blob(T.current.chunks,{type:z.imageType}),I=URL.createObjectURL(it);t.current.send(JSON.stringify({type:"imageReceived",sentId:T.current.receivedId,receivedId:T.current.sentId})),M(T.current.sentId,T.current.receivedId,{type:"image",content:I,status:"received"}),T.current=null}}else T.current.chunks.push(J.data)},()=>{t.current.onmessage=null,i.current.onmessage=null}),[]);const H=K.useMemo(()=>({chatBottom:m,sentId:h,selectedMessage:o,pointerPosition:y,longPressed:g,atBottomRef:b,images:u,receivingImage:T}),[]);return C.jsx(ei,{value:H,children:n})},QE="_navContainer_2izlb_1",YE="_logo_2izlb_10",KE="_navList_2izlb_15",XE="_hamburger_2izlb_30",Ii={navContainer:QE,logo:YE,navList:KE,hamburger:XE};function $E(){const n=Ve.c(5);let t;n[0]===Symbol.for("react.memo_cache_sentinel")?(t=C.jsx("a",{href:"/",className:Ii.logo,"aria-label":"Homepage",children:"boop"}),n[0]=t):t=n[0];let i;n[1]===Symbol.for("react.memo_cache_sentinel")?(i=C.jsx("a",{className:Ii.hamburger,"aria-label":"Expand for menu",children:C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[C.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),C.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),C.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),n[1]=i):i=n[1];let r;n[2]===Symbol.for("react.memo_cache_sentinel")?(r=C.jsx("li",{className:Ii.navItem,children:C.jsx("a",{href:"#about",className:Ii.navLink,children:"About"})}),n[2]=r):r=n[2];let o;n[3]===Symbol.for("react.memo_cache_sentinel")?(o=C.jsx("li",{className:Ii.navItem,children:C.jsx("a",{href:"#projects",className:Ii.navLink,children:"Policy"})}),n[3]=o):o=n[3];let u;return n[4]===Symbol.for("react.memo_cache_sentinel")?(u=C.jsxs("nav",{"aria-label":"Main Navigation",className:Ii.navContainer,children:[t,i,C.jsxs("ul",{className:Ii.navList,children:[r,o,C.jsx("li",{className:Ii.navItem,children:C.jsx("a",{href:"#contact",className:Ii.navLink,children:"Contact"})})]})]}),n[4]=u):u=n[4],u}const ZE="_mainContainer_15mr1_1",JE="_inputCard_15mr1_13",WE="_linkInput_15mr1_41",tT="_loaderWrapper_15mr1_71",eT="_loader_15mr1_71",Ll={mainContainer:ZE,inputCard:JE,linkInput:WE,loaderWrapper:tT,loader:eT},nT=()=>{};var vy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=function(n){const t=[];let i=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},iT=function(n){const t=[];let i=0,r=0;for(;i<n.length;){const o=n[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[i++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[i++],h=n[i++],m=n[i++],y=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=n[i++],h=n[i++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},Iv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const u=n[o],h=o+1<n.length,m=h?n[o+1]:0,y=o+2<n.length,g=y?n[o+2]:0,_=u>>2,b=(u&3)<<4|m>>4;let T=(m&15)<<2|g>>6,R=g&63;y||(R=64,h||(T=64)),r.push(i[_],i[b],i[T],i[R])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(xv(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):iT(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const u=i[n.charAt(o++)],m=o<n.length?i[n.charAt(o)]:0;++o;const g=o<n.length?i[n.charAt(o)]:64;++o;const b=o<n.length?i[n.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new sT;const T=u<<2|m>>4;if(r.push(T),g!==64){const R=m<<4&240|g>>2;if(r.push(R),b!==64){const M=g<<6&192|b;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class sT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rT=function(n){const t=xv(n);return Iv.encodeByteArray(t,!0)},gf=function(n){return rT(n).replace(/\./g,"")},aT=function(n){try{return Iv.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=()=>oT().__FIREBASE_DEFAULTS__,uT=()=>{if(typeof process>"u"||typeof vy>"u")return;const n=vy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},cT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&aT(n[1]);return t&&JSON.parse(t)},jm=()=>{try{return nT()||lT()||uT()||cT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fT=n=>{var t,i;return(i=(t=jm())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[n]},hT=n=>{const t=fT(n);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Dv=()=>{var n;return(n=jm())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n){return n.endsWith(".cloudworkstations.dev")}async function mT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gf(JSON.stringify(i)),gf(JSON.stringify(h)),""].join(".")}const Ql={};function pT(){const n={prod:[],emulator:[]};for(const t of Object.keys(Ql))Ql[t]?n.emulator.push(t):n.prod.push(t);return n}function yT(n){let t=document.getElementById(n),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),i=!0),{created:i,element:t}}let Ey=!1;function _T(n,t){if(typeof window>"u"||typeof document>"u"||!Um(window.location.host)||Ql[n]===t||Ql[n]||Ey)return;Ql[n]=t;function i(T){return`__firebase__banner__${T}`}const r="__firebase__banner",u=pT().prod.length>0;function h(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ey=!0,h()},T}function _(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=yT(r),R=i("text"),M=document.getElementById(R)||document.createElement("span"),P=i("learnmore"),k=document.getElementById(P)||document.createElement("a"),B=i("preprendIcon"),Z=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const H=T.element;m(H),_(k,P);const J=g();y(Z,B),H.append(Z,M,k,J),document.body.appendChild(H)}u?(M.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ET(){var n;const t=(n=jm())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TT(){return!ET()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bT(){try{return typeof indexedDB=="object"}catch{return!1}}function ST(){return new Promise((n,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="FirebaseError";class Eo extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=AT,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mv.prototype.create)}}class Mv{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?wT(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Eo(o,m,r)}}function wT(n,t){return n.replace(CT,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const CT=/\{\$([^}]+)}/g;function pf(n,t){if(n===t)return!0;const i=Object.keys(n),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const u=n[o],h=t[o];if(Ty(u)&&Ty(h)){if(!pf(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function Ty(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n){return n&&n._delegate?n._delegate:n}class ru{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new dT;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IT(t))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Yr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Yr){return this.instances.has(t)}getOptions(t=Yr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,i){var r;const o=this.normalizeInstanceIdentifier(i),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&t(h,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xT(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Yr){return this.component?this.component.multipleInstances?t:Yr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xT(n){return n===Yr?void 0:n}function IT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new RT(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Kt||(Kt={}));const MT={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},VT=Kt.INFO,OT={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},NT=(n,t,...i)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),o=OT[t];if(o)console[o](`[${r}]  ${n.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Vv{constructor(t){this.name=t,this._logLevel=VT,this._logHandler=NT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?MT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...t),this._logHandler(this,Kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...t),this._logHandler(this,Kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...t),this._logHandler(this,Kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...t),this._logHandler(this,Kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...t),this._logHandler(this,Kt.ERROR,...t)}}const LT=(n,t)=>t.some(i=>n instanceof i);let by,Sy;function kT(){return by||(by=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PT(){return Sy||(Sy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ov=new WeakMap,W1=new WeakMap,Nv=new WeakMap,S1=new WeakMap,zm=new WeakMap;function jT(n){const t=new Promise((i,r)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",h)},u=()=>{i(Js(n.result)),o()},h=()=>{r(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",h)});return t.then(i=>{i instanceof IDBCursor&&Ov.set(i,n)}).catch(()=>{}),zm.set(t,n),t}function UT(n){if(W1.has(n))return;const t=new Promise((i,r)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",h),n.removeEventListener("abort",h)},u=()=>{i(),o()},h=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",h),n.addEventListener("abort",h)});W1.set(n,t)}let tm={get(n,t,i){if(n instanceof IDBTransaction){if(t==="done")return W1.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Nv.get(n);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Js(n[t])},set(n,t,i){return n[t]=i,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function zT(n){tm=n(tm)}function BT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=n.call(A1(this),t,...i);return Nv.set(r,t.sort?t.sort():[t]),Js(r)}:PT().includes(n)?function(...t){return n.apply(A1(this),t),Js(Ov.get(this))}:function(...t){return Js(n.apply(A1(this),t))}}function qT(n){return typeof n=="function"?BT(n):(n instanceof IDBTransaction&&UT(n),LT(n,kT())?new Proxy(n,tm):n)}function Js(n){if(n instanceof IDBRequest)return jT(n);if(S1.has(n))return S1.get(n);const t=qT(n);return t!==n&&(S1.set(n,t),zm.set(t,n)),t}const A1=n=>zm.get(n);function HT(n,t,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(n,t),m=Js(h);return r&&h.addEventListener("upgradeneeded",y=>{r(Js(h.result),y.oldVersion,y.newVersion,Js(h.transaction),y)}),i&&h.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const GT=["get","getKey","getAll","getAllKeys","count"],FT=["put","add","delete","clear"],w1=new Map;function Ay(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(w1.get(t))return w1.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=FT.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||GT.includes(i)))return;const u=async function(h,...m){const y=this.transaction(h,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[i](...m),o&&y.done]))[0]};return w1.set(t,u),u}zT(n=>({...n,get:(t,i,r)=>Ay(t,i)||n.get(t,i,r),has:(t,i)=>!!Ay(t,i)||n.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(YT(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function YT(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const em="@firebase/app",wy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Vv("@firebase/app"),KT="@firebase/app-compat",XT="@firebase/analytics-compat",$T="@firebase/analytics",ZT="@firebase/app-check-compat",JT="@firebase/app-check",WT="@firebase/auth",t7="@firebase/auth-compat",e7="@firebase/database",n7="@firebase/data-connect",i7="@firebase/database-compat",s7="@firebase/functions",r7="@firebase/functions-compat",a7="@firebase/installations",o7="@firebase/installations-compat",l7="@firebase/messaging",u7="@firebase/messaging-compat",c7="@firebase/performance",f7="@firebase/performance-compat",h7="@firebase/remote-config",d7="@firebase/remote-config-compat",m7="@firebase/storage",g7="@firebase/storage-compat",p7="@firebase/firestore",y7="@firebase/ai",_7="@firebase/firestore-compat",v7="firebase",E7="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",T7={[em]:"fire-core",[KT]:"fire-core-compat",[$T]:"fire-analytics",[XT]:"fire-analytics-compat",[JT]:"fire-app-check",[ZT]:"fire-app-check-compat",[WT]:"fire-auth",[t7]:"fire-auth-compat",[e7]:"fire-rtdb",[n7]:"fire-data-connect",[i7]:"fire-rtdb-compat",[s7]:"fire-fn",[r7]:"fire-fn-compat",[a7]:"fire-iid",[o7]:"fire-iid-compat",[l7]:"fire-fcm",[u7]:"fire-fcm-compat",[c7]:"fire-perf",[f7]:"fire-perf-compat",[h7]:"fire-rc",[d7]:"fire-rc-compat",[m7]:"fire-gcs",[g7]:"fire-gcs-compat",[p7]:"fire-fst",[_7]:"fire-fst-compat",[y7]:"fire-vertex","fire-js":"fire-js",[v7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Map,b7=new Map,im=new Map;function Cy(n,t){try{n.container.addComponent(t)}catch(i){ms.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,i)}}function _f(n){const t=n.name;if(im.has(t))return ms.debug(`There were multiple attempts to register component ${t}.`),!1;im.set(t,n);for(const i of yf.values())Cy(i,n);for(const i of b7.values())Cy(i,n);return!0}function S7(n,t){const i=n.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),n.container.getProvider(t)}function A7(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new Mv("app","Firebase",w7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ru("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=E7;function Lv(n,t={}){let i=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:nm,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw Ws.create("bad-app-name",{appName:String(o)});if(i||(i=Dv()),!i)throw Ws.create("no-options");const u=yf.get(o);if(u){if(pf(i,u.options)&&pf(r,u.config))return u;throw Ws.create("duplicate-app",{appName:o})}const h=new DT(o);for(const y of im.values())h.addComponent(y);const m=new C7(i,r,h);return yf.set(o,m),m}function x7(n=nm){const t=yf.get(n);if(!t&&n===nm&&Dv())return Lv();if(!t)throw Ws.create("no-app",{appName:n});return t}function ao(n,t,i){var r;let o=(r=T7[n])!==null&&r!==void 0?r:n;i&&(o+=`-${i}`);const u=o.match(/\s|\//),h=t.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ms.warn(m.join(" "));return}_f(new ru(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="firebase-heartbeat-database",D7=1,au="firebase-heartbeat-store";let C1=null;function kv(){return C1||(C1=HT(I7,D7,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(au)}catch(i){console.warn(i)}}}}).catch(n=>{throw Ws.create("idb-open",{originalErrorMessage:n.message})})),C1}async function M7(n){try{const i=(await kv()).transaction(au),r=await i.objectStore(au).get(Pv(n));return await i.done,r}catch(t){if(t instanceof Eo)ms.warn(t.message);else{const i=Ws.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ms.warn(i.message)}}}async function Ry(n,t){try{const r=(await kv()).transaction(au,"readwrite");await r.objectStore(au).put(t,Pv(n)),await r.done}catch(i){if(i instanceof Eo)ms.warn(i.message);else{const r=Ws.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});ms.warn(r.message)}}}function Pv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7=1024,O7=30;class N7{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new k7(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=xy();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>O7){const h=P7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ms.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=xy(),{heartbeatsToSend:r,unsentEntries:o}=L7(this._heartbeatsCache.heartbeats),u=gf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return ms.warn(i),""}}}function xy(){return new Date().toISOString().substring(0,10)}function L7(n,t=V7){const i=[];let r=n.slice();for(const o of n){const u=i.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Iy(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Iy(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class k7{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bT()?ST().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await M7(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function Iy(n){return gf(JSON.stringify({version:2,heartbeats:n})).length}function P7(n){if(n.length===0)return-1;let t=0,i=n[0].date;for(let r=1;r<n.length;r++)n[r].date<i&&(i=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(n){_f(new ru("platform-logger",t=>new QT(t),"PRIVATE")),_f(new ru("heartbeat",t=>new N7(t),"PRIVATE")),ao(em,wy,n),ao(em,wy,"esm2017"),ao("fire-js","")}j7("");var U7="firebase",z7="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ao(U7,z7,"app");var Dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,jv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function x(){}x.prototype=w.prototype,I.D=w.prototype,I.prototype=new x,I.prototype.constructor=I,I.C=function(N,L,j){for(var D=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)D[dt-2]=arguments[dt];return w.prototype[L].apply(N,D)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,x){x||(x=0);var N=Array(16);if(typeof w=="string")for(var L=0;16>L;++L)N[L]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(L=0;16>L;++L)N[L]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=I.g[0],x=I.g[1],L=I.g[2];var j=I.g[3],D=w+(j^x&(L^j))+N[0]+3614090360&4294967295;w=x+(D<<7&4294967295|D>>>25),D=j+(L^w&(x^L))+N[1]+3905402710&4294967295,j=w+(D<<12&4294967295|D>>>20),D=L+(x^j&(w^x))+N[2]+606105819&4294967295,L=j+(D<<17&4294967295|D>>>15),D=x+(w^L&(j^w))+N[3]+3250441966&4294967295,x=L+(D<<22&4294967295|D>>>10),D=w+(j^x&(L^j))+N[4]+4118548399&4294967295,w=x+(D<<7&4294967295|D>>>25),D=j+(L^w&(x^L))+N[5]+1200080426&4294967295,j=w+(D<<12&4294967295|D>>>20),D=L+(x^j&(w^x))+N[6]+2821735955&4294967295,L=j+(D<<17&4294967295|D>>>15),D=x+(w^L&(j^w))+N[7]+4249261313&4294967295,x=L+(D<<22&4294967295|D>>>10),D=w+(j^x&(L^j))+N[8]+1770035416&4294967295,w=x+(D<<7&4294967295|D>>>25),D=j+(L^w&(x^L))+N[9]+2336552879&4294967295,j=w+(D<<12&4294967295|D>>>20),D=L+(x^j&(w^x))+N[10]+4294925233&4294967295,L=j+(D<<17&4294967295|D>>>15),D=x+(w^L&(j^w))+N[11]+2304563134&4294967295,x=L+(D<<22&4294967295|D>>>10),D=w+(j^x&(L^j))+N[12]+1804603682&4294967295,w=x+(D<<7&4294967295|D>>>25),D=j+(L^w&(x^L))+N[13]+4254626195&4294967295,j=w+(D<<12&4294967295|D>>>20),D=L+(x^j&(w^x))+N[14]+2792965006&4294967295,L=j+(D<<17&4294967295|D>>>15),D=x+(w^L&(j^w))+N[15]+1236535329&4294967295,x=L+(D<<22&4294967295|D>>>10),D=w+(L^j&(x^L))+N[1]+4129170786&4294967295,w=x+(D<<5&4294967295|D>>>27),D=j+(x^L&(w^x))+N[6]+3225465664&4294967295,j=w+(D<<9&4294967295|D>>>23),D=L+(w^x&(j^w))+N[11]+643717713&4294967295,L=j+(D<<14&4294967295|D>>>18),D=x+(j^w&(L^j))+N[0]+3921069994&4294967295,x=L+(D<<20&4294967295|D>>>12),D=w+(L^j&(x^L))+N[5]+3593408605&4294967295,w=x+(D<<5&4294967295|D>>>27),D=j+(x^L&(w^x))+N[10]+38016083&4294967295,j=w+(D<<9&4294967295|D>>>23),D=L+(w^x&(j^w))+N[15]+3634488961&4294967295,L=j+(D<<14&4294967295|D>>>18),D=x+(j^w&(L^j))+N[4]+3889429448&4294967295,x=L+(D<<20&4294967295|D>>>12),D=w+(L^j&(x^L))+N[9]+568446438&4294967295,w=x+(D<<5&4294967295|D>>>27),D=j+(x^L&(w^x))+N[14]+3275163606&4294967295,j=w+(D<<9&4294967295|D>>>23),D=L+(w^x&(j^w))+N[3]+4107603335&4294967295,L=j+(D<<14&4294967295|D>>>18),D=x+(j^w&(L^j))+N[8]+1163531501&4294967295,x=L+(D<<20&4294967295|D>>>12),D=w+(L^j&(x^L))+N[13]+2850285829&4294967295,w=x+(D<<5&4294967295|D>>>27),D=j+(x^L&(w^x))+N[2]+4243563512&4294967295,j=w+(D<<9&4294967295|D>>>23),D=L+(w^x&(j^w))+N[7]+1735328473&4294967295,L=j+(D<<14&4294967295|D>>>18),D=x+(j^w&(L^j))+N[12]+2368359562&4294967295,x=L+(D<<20&4294967295|D>>>12),D=w+(x^L^j)+N[5]+4294588738&4294967295,w=x+(D<<4&4294967295|D>>>28),D=j+(w^x^L)+N[8]+2272392833&4294967295,j=w+(D<<11&4294967295|D>>>21),D=L+(j^w^x)+N[11]+1839030562&4294967295,L=j+(D<<16&4294967295|D>>>16),D=x+(L^j^w)+N[14]+4259657740&4294967295,x=L+(D<<23&4294967295|D>>>9),D=w+(x^L^j)+N[1]+2763975236&4294967295,w=x+(D<<4&4294967295|D>>>28),D=j+(w^x^L)+N[4]+1272893353&4294967295,j=w+(D<<11&4294967295|D>>>21),D=L+(j^w^x)+N[7]+4139469664&4294967295,L=j+(D<<16&4294967295|D>>>16),D=x+(L^j^w)+N[10]+3200236656&4294967295,x=L+(D<<23&4294967295|D>>>9),D=w+(x^L^j)+N[13]+681279174&4294967295,w=x+(D<<4&4294967295|D>>>28),D=j+(w^x^L)+N[0]+3936430074&4294967295,j=w+(D<<11&4294967295|D>>>21),D=L+(j^w^x)+N[3]+3572445317&4294967295,L=j+(D<<16&4294967295|D>>>16),D=x+(L^j^w)+N[6]+76029189&4294967295,x=L+(D<<23&4294967295|D>>>9),D=w+(x^L^j)+N[9]+3654602809&4294967295,w=x+(D<<4&4294967295|D>>>28),D=j+(w^x^L)+N[12]+3873151461&4294967295,j=w+(D<<11&4294967295|D>>>21),D=L+(j^w^x)+N[15]+530742520&4294967295,L=j+(D<<16&4294967295|D>>>16),D=x+(L^j^w)+N[2]+3299628645&4294967295,x=L+(D<<23&4294967295|D>>>9),D=w+(L^(x|~j))+N[0]+4096336452&4294967295,w=x+(D<<6&4294967295|D>>>26),D=j+(x^(w|~L))+N[7]+1126891415&4294967295,j=w+(D<<10&4294967295|D>>>22),D=L+(w^(j|~x))+N[14]+2878612391&4294967295,L=j+(D<<15&4294967295|D>>>17),D=x+(j^(L|~w))+N[5]+4237533241&4294967295,x=L+(D<<21&4294967295|D>>>11),D=w+(L^(x|~j))+N[12]+1700485571&4294967295,w=x+(D<<6&4294967295|D>>>26),D=j+(x^(w|~L))+N[3]+2399980690&4294967295,j=w+(D<<10&4294967295|D>>>22),D=L+(w^(j|~x))+N[10]+4293915773&4294967295,L=j+(D<<15&4294967295|D>>>17),D=x+(j^(L|~w))+N[1]+2240044497&4294967295,x=L+(D<<21&4294967295|D>>>11),D=w+(L^(x|~j))+N[8]+1873313359&4294967295,w=x+(D<<6&4294967295|D>>>26),D=j+(x^(w|~L))+N[15]+4264355552&4294967295,j=w+(D<<10&4294967295|D>>>22),D=L+(w^(j|~x))+N[6]+2734768916&4294967295,L=j+(D<<15&4294967295|D>>>17),D=x+(j^(L|~w))+N[13]+1309151649&4294967295,x=L+(D<<21&4294967295|D>>>11),D=w+(L^(x|~j))+N[4]+4149444226&4294967295,w=x+(D<<6&4294967295|D>>>26),D=j+(x^(w|~L))+N[11]+3174756917&4294967295,j=w+(D<<10&4294967295|D>>>22),D=L+(w^(j|~x))+N[2]+718787259&4294967295,L=j+(D<<15&4294967295|D>>>17),D=x+(j^(L|~w))+N[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+L&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var x=w-this.blockSize,N=this.B,L=this.h,j=0;j<w;){if(L==0)for(;j<=x;)o(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<w;)if(N[L++]=I.charCodeAt(j++),L==this.blockSize){o(this,N),L=0;break}}else for(;j<w;)if(N[L++]=I[j++],L==this.blockSize){o(this,N),L=0;break}}this.h=L,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var x=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=x&255,x/=256;for(this.u(I),I=Array(16),w=x=0;4>w;++w)for(var N=0;32>N;N+=8)I[x++]=this.g[w]>>>N&255;return I};function u(I,w){var x=m;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=w(I)}function h(I,w){this.h=w;for(var x=[],N=!0,L=I.length-1;0<=L;L--){var j=I[L]|0;N&&j==w||(x[L]=j,N=!1)}this.g=x}var m={};function y(I){return-128<=I&&128>I?u(I,function(w){return new h([w|0],0>w?-1:0)}):new h([I|0],0>I?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return b;if(0>I)return k(g(-I));for(var w=[],x=1,N=0;I>=x;N++)w[N]=I/x|0,x*=4294967296;return new h(w,0)}function _(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return k(_(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(w,8)),N=b,L=0;L<I.length;L+=8){var j=Math.min(8,I.length-L),D=parseInt(I.substring(L,L+j),w);8>j?(j=g(Math.pow(w,j)),N=N.j(j).add(g(D))):(N=N.j(x),N=N.add(g(D)))}return N}var b=y(0),T=y(1),R=y(16777216);n=h.prototype,n.m=function(){if(P(this))return-k(this).m();for(var I=0,w=1,x=0;x<this.g.length;x++){var N=this.i(x);I+=(0<=N?N:4294967296+N)*w,w*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(M(this))return"0";if(P(this))return"-"+k(this).toString(I);for(var w=g(Math.pow(I,6)),x=this,N="";;){var L=J(x,w).g;x=B(x,L.j(w));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(I);if(x=L,M(x))return j+N;for(;6>j.length;)j="0"+j;N=j+N}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function M(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function P(I){return I.h==-1}n.l=function(I){return I=B(this,I),P(I)?-1:M(I)?0:1};function k(I){for(var w=I.g.length,x=[],N=0;N<w;N++)x[N]=~I.g[N];return new h(x,~I.h).add(T)}n.abs=function(){return P(this)?k(this):this},n.add=function(I){for(var w=Math.max(this.g.length,I.g.length),x=[],N=0,L=0;L<=w;L++){var j=N+(this.i(L)&65535)+(I.i(L)&65535),D=(j>>>16)+(this.i(L)>>>16)+(I.i(L)>>>16);N=D>>>16,j&=65535,D&=65535,x[L]=D<<16|j}return new h(x,x[x.length-1]&-2147483648?-1:0)};function B(I,w){return I.add(k(w))}n.j=function(I){if(M(this)||M(I))return b;if(P(this))return P(I)?k(this).j(k(I)):k(k(this).j(I));if(P(I))return k(this.j(k(I)));if(0>this.l(R)&&0>I.l(R))return g(this.m()*I.m());for(var w=this.g.length+I.g.length,x=[],N=0;N<2*w;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(var L=0;L<I.g.length;L++){var j=this.i(N)>>>16,D=this.i(N)&65535,dt=I.i(L)>>>16,mt=I.i(L)&65535;x[2*N+2*L]+=D*mt,Z(x,2*N+2*L),x[2*N+2*L+1]+=j*mt,Z(x,2*N+2*L+1),x[2*N+2*L+1]+=D*dt,Z(x,2*N+2*L+1),x[2*N+2*L+2]+=j*dt,Z(x,2*N+2*L+2)}for(N=0;N<w;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=w;N<2*w;N++)x[N]=0;return new h(x,0)};function Z(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function H(I,w){this.g=I,this.h=w}function J(I,w){if(M(w))throw Error("division by zero");if(M(I))return new H(b,b);if(P(I))return w=J(k(I),w),new H(k(w.g),k(w.h));if(P(w))return w=J(I,k(w)),new H(k(w.g),w.h);if(30<I.g.length){if(P(I)||P(w))throw Error("slowDivide_ only works with positive integers.");for(var x=T,N=w;0>=N.l(I);)x=z(x),N=z(N);var L=it(x,1),j=it(N,1);for(N=it(N,2),x=it(x,2);!M(N);){var D=j.add(N);0>=D.l(I)&&(L=L.add(x),j=D),N=it(N,1),x=it(x,1)}return w=B(I,L.j(w)),new H(L,w)}for(L=b;0<=I.l(w);){for(x=Math.max(1,Math.floor(I.m()/w.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),j=g(x),D=j.j(w);P(D)||0<D.l(I);)x-=N,j=g(x),D=j.j(w);M(j)&&(j=T),L=L.add(j),I=B(I,D)}return new H(L,I)}n.A=function(I){return J(this,I).h},n.and=function(I){for(var w=Math.max(this.g.length,I.g.length),x=[],N=0;N<w;N++)x[N]=this.i(N)&I.i(N);return new h(x,this.h&I.h)},n.or=function(I){for(var w=Math.max(this.g.length,I.g.length),x=[],N=0;N<w;N++)x[N]=this.i(N)|I.i(N);return new h(x,this.h|I.h)},n.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),x=[],N=0;N<w;N++)x[N]=this.i(N)^I.i(N);return new h(x,this.h^I.h)};function z(I){for(var w=I.g.length+1,x=[],N=0;N<w;N++)x[N]=I.i(N)<<1|I.i(N-1)>>>31;return new h(x,I.h)}function it(I,w){var x=w>>5;w%=32;for(var N=I.g.length-x,L=[],j=0;j<N;j++)L[j]=0<w?I.i(j+x)>>>w|I.i(j+x+1)<<32-w:I.i(j+x);return new h(L,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jv=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=_,tr=h}).apply(typeof Dy<"u"?Dy:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uv,Pl,zv,sf,sm,Bv,qv,Hv;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,v){return c==Array.prototype||c==Object.prototype||(c[p]=v.value),c};function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=i(this);function o(c,p){if(p)t:{var v=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var G=c[A];if(!(G in v))break t;v=v[G]}c=c[c.length-1],A=v[c],p=p(A),p!=A&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var v=0,A=!1,G={next:function(){if(!A&&v<c.length){var tt=v++;return{value:p(tt,c[tt]),done:!1}}return A=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function _(c,p,v){return c.call.apply(c.bind,arguments)}function b(c,p,v){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,A),c.apply(p,G)}}return function(){return c.apply(p,arguments)}}function T(c,p,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,T.apply(null,arguments)}function R(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,p){function v(){}v.prototype=p.prototype,c.aa=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(A,G,tt){for(var ht=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)ht[Gt-2]=arguments[Gt];return p.prototype[G].apply(A,ht)}}function P(c){const p=c.length;if(0<p){const v=Array(p);for(let A=0;A<p;A++)v[A]=c[A];return v}return[]}function k(c,p){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(y(A)){const G=c.length||0,tt=A.length||0;c.length=G+tt;for(let ht=0;ht<tt;ht++)c[G+ht]=A[ht]}else c.push(A)}}class B{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Z(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var z=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function it(c,p,v){for(const A in c)p.call(v,c[A],A,c)}function I(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function w(c){const p={};for(const v in c)p[v]=c[v];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,p){let v,A;for(let G=1;G<arguments.length;G++){A=arguments[G];for(v in A)c[v]=A[v];for(let tt=0;tt<x.length;tt++)v=x[tt],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function L(c){var p=1;c=c.split(":");const v=[];for(;0<p&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function j(c){m.setTimeout(()=>{throw c},0)}function D(){var c=pt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class dt{constructor(){this.h=this.g=null}add(p,v){const A=mt.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var mt=new B(()=>new Y,c=>c.reset());class Y{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let W,ut=!1,pt=new dt,V=()=>{const c=m.Promise.resolve(void 0);W=()=>{c.then(et)}};var et=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(v){j(v)}var p=mt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ut=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,p),m.removeEventListener("test",v,p)}catch{}return c}();function Et(c,p){if(ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(z){t:{try{J(p.nodeName);var G=!0;break t}catch{}G=!1}G||(p=null)}}else v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_t[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Et.aa.h.call(this)}}M(Et,ot);var _t={2:"touch",3:"pen",4:"mouse"};Et.prototype.h=function(){Et.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),xt=0;function qt(c,p,v,A,G){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=G,this.key=++xt,this.da=this.fa=!1}function ae(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ae(c){this.src=c,this.g={},this.h=0}Ae.prototype.add=function(c,p,v,A,G){var tt=c.toString();c=this.g[tt],c||(c=this.g[tt]=[],this.h++);var ht=Oe(c,p,A,G);return-1<ht?(p=c[ht],v||(p.fa=!1)):(p=new qt(p,this.src,tt,!!A,G),p.fa=v,c.push(p)),p};function ve(c,p){var v=p.type;if(v in c.g){var A=c.g[v],G=Array.prototype.indexOf.call(A,p,void 0),tt;(tt=0<=G)&&Array.prototype.splice.call(A,G,1),tt&&(ae(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Oe(c,p,v,A){for(var G=0;G<c.length;++G){var tt=c[G];if(!tt.da&&tt.listener==p&&tt.capture==!!v&&tt.ha==A)return G}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),we={};function kn(c,p,v,A,G){if(Array.isArray(p)){for(var tt=0;tt<p.length;tt++)kn(c,p[tt],v,A,G);return null}return v=ji(v),c&&c[Ot]?c.K(p,v,g(A)?!!A.capture:!1,G):Xe(c,p,v,!1,A,G)}function Xe(c,p,v,A,G,tt){if(!p)throw Error("Invalid event type");var ht=g(G)?!!G.capture:!!G,Gt=Cn(c);if(Gt||(c[qe]=Gt=new Ae(c)),v=Gt.add(p,v,A,ht,tt),v.proxy)return v;if(A=fr(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)gt||(G=ht),G===void 0&&(G=!1),c.addEventListener(p.toString(),A,G);else if(c.attachEvent)c.attachEvent(ni(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function fr(){function c(v){return p.call(c.src,c.listener,v)}const p=hi;return c}function Pn(c,p,v,A,G){if(Array.isArray(p))for(var tt=0;tt<p.length;tt++)Pn(c,p[tt],v,A,G);else A=g(A)?!!A.capture:!!A,v=ji(v),c&&c[Ot]?(c=c.i,p=String(p).toString(),p in c.g&&(tt=c.g[p],v=Oe(tt,v,A,G),-1<v&&(ae(tt[v]),Array.prototype.splice.call(tt,v,1),tt.length==0&&(delete c.g[p],c.h--)))):c&&(c=Cn(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Oe(p,v,A,G)),(v=-1<c?p[c]:null)&&wn(v))}function wn(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Ot])ve(p.i,c);else{var v=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(v,A,c.capture):p.detachEvent?p.detachEvent(ni(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=Cn(p))?(ve(v,c),v.h==0&&(v.src=null,p[qe]=null)):ae(c)}}}function ni(c){return c in we?we[c]:we[c]="on"+c}function hi(c,p){if(c.da)c=!0;else{p=new Et(p,this);var v=c.listener,A=c.ha||c.src;c.fa&&wn(c),c=v.call(A,p)}return c}function Cn(c){return c=c[qe],c instanceof Ae?c:null}var jn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ji(c){return typeof c=="function"?c:(c[jn]||(c[jn]=function(p){return c.handleEvent(p)}),c[jn])}function $t(){ct.call(this),this.i=new Ae(this),this.M=this,this.F=null}M($t,ct),$t.prototype[Ot]=!0,$t.prototype.removeEventListener=function(c,p,v,A){Pn(this,c,p,v,A)};function Ht(c,p){var v,A=c.F;if(A)for(v=[];A;A=A.F)v.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new ot(p,c);else if(p instanceof ot)p.target=p.target||c;else{var G=p;p=new ot(A,c),N(p,G)}if(G=!0,v)for(var tt=v.length-1;0<=tt;tt--){var ht=p.g=v[tt];G=fn(ht,A,!0,p)&&G}if(ht=p.g=c,G=fn(ht,A,!0,p)&&G,G=fn(ht,A,!1,p)&&G,v)for(tt=0;tt<v.length;tt++)ht=p.g=v[tt],G=fn(ht,A,!1,p)&&G}$t.prototype.N=function(){if($t.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var v=c.g[p],A=0;A<v.length;A++)ae(v[A]);delete c.g[p],c.h--}}this.F=null},$t.prototype.K=function(c,p,v,A){return this.i.add(String(c),p,!1,v,A)},$t.prototype.L=function(c,p,v,A){return this.i.add(String(c),p,!0,v,A)};function fn(c,p,v,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var G=!0,tt=0;tt<p.length;++tt){var ht=p[tt];if(ht&&!ht.da&&ht.capture==v){var Gt=ht.listener,Le=ht.ha||ht.src;ht.fa&&ve(c.i,ht),G=Gt.call(Le,A)!==!1&&G}}return G&&!A.defaultPrevented}function ce(c,p,v){if(typeof c=="function")v&&(c=T(c,v));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function ra(c){c.g=ce(()=>{c.g=null,c.i&&(c.i=!1,ra(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ch extends ct{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ra(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(c){ct.call(this),this.h=c,this.g={}}M(hr,ct);var dr=[];function mr(c){it(c.g,function(p,v){this.g.hasOwnProperty(v)&&wn(p)},c),c.g={}}hr.prototype.N=function(){hr.aa.N.call(this),mr(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=m.JSON.stringify,aa=m.JSON.parse,gr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function wo(){}wo.prototype.h=null;function Co(c){return c.h||(c.h=c.i())}function Ro(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zi(){ot.call(this,"d")}M(zi,ot);function xo(){ot.call(this,"c")}M(xo,ot);var di={},Io=null;function ys(){return Io=Io||new $t}di.La="serverreachability";function oa(c){ot.call(this,di.La,c)}M(oa,ot);function _s(c){const p=ys();Ht(p,new oa(p))}di.STAT_EVENT="statevent";function Su(c,p){ot.call(this,di.STAT_EVENT,c),this.stat=p}M(Su,ot);function fe(c){const p=ys();Ht(p,new Su(p,c))}di.Ma="timingevent";function Ne(c,p){ot.call(this,di.Ma,c),this.size=p}M(Ne,ot);function Ce(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function Do(c,p,v,A,G,tt){c.info(function(){if(c.g)if(tt)for(var ht="",Gt=tt.split("&"),Le=0;Le<Gt.length;Le++){var Ft=Gt[Le].split("=");if(1<Ft.length){var Ge=Ft[0];Ft=Ft[1];var ke=Ge.split("_");ht=2<=ke.length&&ke[1]=="type"?ht+(Ge+"="+Ft+"&"):ht+(Ge+"=redacted&")}}else ht=null;else ht=tt;return"XMLHTTP REQ ("+A+") [attempt "+G+"]: "+p+`
`+v+`
`+ht})}function fh(c,p,v,A,G,tt,ht){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+G+"]: "+p+`
`+v+`
`+tt+" "+ht})}function vs(c,p,v,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+pr(c,v)+(A?" "+A:"")})}function Au(c,p){c.info(function(){return"TIMEOUT: "+p})}Un.prototype.info=function(){};function pr(c,p){if(!c.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var A=v[c];if(!(2>A.length)){var G=A[1];if(Array.isArray(G)&&!(1>G.length)){var tt=G[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(var ht=1;ht<G.length;ht++)G[ht]=""}}}}return ii(v)}catch{return p}}var Es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mi;function gi(){}M(gi,wo),gi.prototype.g=function(){return new XMLHttpRequest},gi.prototype.i=function(){return{}},mi=new gi;function hn(c,p,v,A){this.j=c,this.i=p,this.l=v,this.R=A||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ee}function Ee(){this.i=null,this.g="",this.h=!1}var Mo={},la={};function si(c,p,v){c.L=1,c.v=Tr(Rn(p)),c.m=v,c.P=!0,qi(c,null)}function qi(c,p){c.F=Date.now(),yr(c),c.A=Rn(c.v);var v=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Po(v.i,"t",A),c.C=0,v=c.j.J,c.h=new Ee,c.g=zu(c.j,v?p:null,!c.m),0<c.O&&(c.M=new ch(T(c.Y,c,c.g),c.O)),p=c.U,v=c.g,A=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(dr[0]=G.toString()),G=dr);for(var tt=0;tt<G.length;tt++){var ht=kn(v,G[tt],A||p.handleEvent,!1,p.h||p);if(!ht)break;p.g[ht.key]=ht}p=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),_s(),Do(c.i,c.u,c.A,c.l,c.R,c.m)}hn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Hn(c)==3?p.j():this.Y(c)},hn.prototype.Y=function(c){try{if(c==this.g)t:{const ke=Hn(this.g);var p=this.g.Ba();const $i=this.g.Z();if(!(3>ke)&&(ke!=3||this.g&&(this.h.h||this.g.oa()||Vu(this.g)))){this.J||ke!=4||p==7||(p==8||0>=$i?_s(3):_s(2)),Ts(this);var v=this.g.Z();this.X=v;e:if(wu(this)){var A=Vu(this.g);c="";var G=A.length,tt=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$e(this),pi(this);var ht="";break e}this.h.i=new m.TextDecoder}for(p=0;p<G;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(tt&&p==G-1)});A.length=0,this.h.g+=c,this.C=0,ht=this.h.g}else ht=this.g.oa();if(this.o=v==200,fh(this.i,this.u,this.A,this.l,this.R,ke,v),this.o){if(this.T&&!this.K){e:{if(this.g){var Gt,Le=this.g;if((Gt=Le.g?Le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Gt)){var Ft=Gt;break e}}Ft=null}if(v=Ft)vs(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_r(this,v);else{this.o=!1,this.s=3,fe(12),$e(this),pi(this);break t}}if(this.P){v=!0;let Ze;for(;!this.J&&this.C<ht.length;)if(Ze=Cu(this,ht),Ze==la){ke==4&&(this.s=4,fe(14),v=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==Mo){this.s=4,fe(15),vs(this.i,this.l,ht,"[Invalid Chunk]"),v=!1;break}else vs(this.i,this.l,Ze,null),_r(this,Ze);if(wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||ht.length!=0||this.h.h||(this.s=1,fe(16),v=!1),this.o=this.o&&v,!v)vs(this.i,this.l,ht,"[Invalid Chunked Response]"),$e(this),pi(this);else if(0<ht.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+ht.length),Ir(Ge),Ge.M=!0,fe(11))}}else vs(this.i,this.l,ht,null),_r(this,ht);ke==4&&$e(this),this.o&&!this.J&&(ke==4?Pu(this.j,this):(this.o=!1,yr(this)))}else ph(this.g),v==400&&0<ht.indexOf("Unknown SID")?(this.s=3,fe(12)):(this.s=0,fe(13)),$e(this),pi(this)}}}catch{}finally{}};function wu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Cu(c,p){var v=c.C,A=p.indexOf(`
`,v);return A==-1?la:(v=Number(p.substring(v,A)),isNaN(v)?Mo:(A+=1,A+v>p.length?la:(p=p.slice(A,A+v),c.C=A+v,p)))}hn.prototype.cancel=function(){this.J=!0,$e(this)};function yr(c){c.S=Date.now()+c.I,Ru(c,c.I)}function Ru(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ce(T(c.ba,c),p)}function Ts(c){c.B&&(m.clearTimeout(c.B),c.B=null)}hn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Au(this.i,this.A),this.L!=2&&(_s(),fe(17)),$e(this),this.s=2,pi(this)):Ru(this,this.S-c)};function pi(c){c.j.G==0||c.J||Pu(c.j,c)}function $e(c){Ts(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,mr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function _r(c,p){try{var v=c.j;if(v.G!=0&&(v.g==c||Vo(v.h,c))){if(!c.K&&Vo(v.h,c)&&v.G==3){try{var A=v.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var G=A;if(G[0]==0){t:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ea(v),_a(v);else break t;qo(v),fe(18)}}else v.za=G[1],0<v.za-v.T&&37500>G[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ce(T(v.Za,v),6e3));if(1>=ca(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Xi(v,11)}else if((c.K||v.g==c)&&Ea(v),!Z(p))for(G=v.Da.g.parse(p),p=0;p<G.length;p++){let Ft=G[p];if(v.T=Ft[0],Ft=Ft[1],v.G==2)if(Ft[0]=="c"){v.K=Ft[1],v.ia=Ft[2];const Ge=Ft[3];Ge!=null&&(v.la=Ge,v.j.info("VER="+v.la));const ke=Ft[4];ke!=null&&(v.Aa=ke,v.j.info("SVER="+v.Aa));const $i=Ft[5];$i!=null&&typeof $i=="number"&&0<$i&&(A=1.5*$i,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Ze=c.g;if(Ze){const Si=Ze.g?Ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var tt=A.h;tt.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(fa(tt,tt.h),tt.h=null))}if(A.D){const Go=Ze.g?Ze.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(A.ya=Go,ne(A.I,A.D,Go))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ht=c;if(A.qa=Uu(A,A.J?A.ia:null,A.W),ht.K){dn(A.h,ht);var Gt=ht,Le=A.L;Le&&(Gt.I=Le),Gt.B&&(Ts(Gt),yr(Gt)),A.g=ht}else Lu(A);0<v.i.length&&va(v)}else Ft[0]!="stop"&&Ft[0]!="close"||Xi(v,7);else v.G==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?Xi(v,7):zo(v):Ft[0]!="noop"&&v.l&&v.l.ta(Ft),v.v=0)}}_s(4)}catch{}}var xu=class{constructor(c,p){this.g=c,this.map=p}};function Hi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ua(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ca(c){return c.h?1:c.g?c.g.size:0}function Vo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function fa(c,p){c.g?c.g.add(p):c.h=p}function dn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Hi.prototype.cancel=function(){if(this.i=Oo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Oo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.D);return p}return P(c.i)}function hh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],v=c.length,A=0;A<v;A++)p.push(c[A]);return p}p=[],v=0;for(A in c)p[v++]=c[A];return p}function ha(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var v=0;v<c;v++)p.push(v);return p}p=[],v=0;for(const A in c)p[v++]=A;return p}}}function No(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var v=ha(c),A=hh(c),G=A.length,tt=0;tt<G;tt++)p.call(void 0,A[tt],v&&v[tt],c)}var vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dh(c,p){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var A=c[v].indexOf("="),G=null;if(0<=A){var tt=c[v].substring(0,A);G=c[v].substring(A+1)}else tt=c[v];p(tt,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Re(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Re){this.h=c.h,Er(this,c.j),this.o=c.o,this.g=c.g,bs(this,c.s),this.l=c.l;var p=c.i,v=new Fi;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Gi(this,v),this.m=c.m}else c&&(p=String(c).match(vr))?(this.h=!1,Er(this,p[1]||"",!0),this.o=zn(p[2]||""),this.g=zn(p[3]||"",!0),bs(this,p[4]),this.l=zn(p[5]||"",!0),Gi(this,p[6]||"",!0),this.m=zn(p[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}Re.prototype.toString=function(){var c=[],p=this.j;p&&c.push(br(p,Lo,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(br(p,Lo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(br(v,v.charAt(0)=="/"?mh:ko,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",br(v,da)),c.join("")};function Rn(c){return new Re(c)}function Er(c,p,v){c.j=v?zn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function bs(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Gi(c,p,v){p instanceof Fi?(c.i=p,Du(c.i,c.h)):(v||(p=br(p,gh)),c.i=new Fi(p,c.h))}function ne(c,p,v){c.i.set(p,v)}function Tr(c){return ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function br(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,Iu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Iu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Lo=/[#\/\?@]/g,ko=/[#\?:]/g,mh=/[#\?]/g,gh=/[#\?@]/g,da=/#/g;function Fi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Bn(c){c.g||(c.g=new Map,c.h=0,c.i&&dh(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}n=Fi.prototype,n.add=function(c,p){Bn(this),this.i=null,c=yi(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function Qi(c,p){Bn(c),p=yi(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Yi(c,p){return Bn(c),p=yi(c,p),c.g.has(p)}n.forEach=function(c,p){Bn(this),this.g.forEach(function(v,A){v.forEach(function(G){c.call(p,G,A,this)},this)},this)},n.na=function(){Bn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let A=0;A<p.length;A++){const G=c[A];for(let tt=0;tt<G.length;tt++)v.push(p[A])}return v},n.V=function(c){Bn(this);let p=[];if(typeof c=="string")Yi(this,c)&&(p=p.concat(this.g.get(yi(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)p=p.concat(c[v])}return p},n.set=function(c,p){return Bn(this),this.i=null,c=yi(this,c),Yi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Po(c,p,v){Qi(c,p),0<v.length&&(c.i=null,c.g.set(yi(c,p),P(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var A=p[v];const tt=encodeURIComponent(String(A)),ht=this.V(A);for(A=0;A<ht.length;A++){var G=tt;ht[A]!==""&&(G+="="+encodeURIComponent(String(ht[A]))),c.push(G)}}return this.i=c.join("&")};function yi(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Du(c,p){p&&!c.j&&(Bn(c),c.i=null,c.g.forEach(function(v,A){var G=A.toLowerCase();A!=G&&(Qi(this,A),Po(this,G,v))},c)),c.j=p}function Sr(c,p){const v=new Un;if(m.Image){const A=new Image;A.onload=R(qn,v,"TestLoadImage: loaded",!0,p,A),A.onerror=R(qn,v,"TestLoadImage: error",!1,p,A),A.onabort=R(qn,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=R(qn,v,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function ri(c,p){const v=new Un,A=new AbortController,G=setTimeout(()=>{A.abort(),qn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(tt=>{clearTimeout(G),tt.ok?qn(v,"TestPingServer: ok",!0,p):qn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(G),qn(v,"TestPingServer: error",!1,p)})}function qn(c,p,v,A,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),A(v)}catch{}}function Ar(){this.g=new gr}function _i(c,p,v){const A=v||"";try{No(c,function(G,tt){let ht=G;g(G)&&(ht=ii(G)),p.push(A+tt+"="+encodeURIComponent(ht))})}catch(G){throw p.push(A+"type="+encodeURIComponent("_badmap")),G}}function Ss(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Ss,wo),Ss.prototype.g=function(){return new Ki(this.l,this.j)},Ss.prototype.i=function(c){return function(){return c}}({});function Ki(c,p){$t.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ki,$t),n=Ki.prototype,n.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Ei(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function jo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?vi(this):Ei(this),this.readyState==3&&jo(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,vi(this))},n.Qa=function(c){this.g&&(this.response=c,vi(this))},n.ga=function(){this.g&&vi(this)};function vi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ei(c)}n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function Ei(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Uo(c){let p="";return it(c,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function He(c,p,v){t:{for(A in v){var A=!1;break t}A=!0}A||(v=Uo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):ne(c,p,v))}function Jt(c){$t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Jt,$t);var ma=/^https?$/i,wr=["POST","PUT"];n=Jt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mi.g(),this.v=this.o?Co(this.o):Co(mi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(tt){Mu(this,tt);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var G in A)v.set(G,A[G]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const tt of A.keys())v.set(tt,A.get(tt));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(tt=>tt.toLowerCase()=="content-type"),G=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(wr,p,void 0))||A||G||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,ht]of v)this.g.setRequestHeader(tt,ht);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cr(this),this.u=!0,this.g.send(c),this.u=!1}catch(tt){Mu(this,tt)}};function Mu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,ga(c),Ti(c)}function ga(c){c.A||(c.A=!0,Ht(c,"complete"),Ht(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ht(this,"complete"),Ht(this,"abort"),Ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ti(this,!0)),Jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},n.bb=function(){pa(this)};function pa(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)ce(c.Ea,0,c);else if(Ht(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const ht=c.Z();t:switch(ht){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var A;if(A=ht===0){var G=String(c.D).match(vr)[1]||null;!G&&m.self&&m.self.location&&(G=m.self.location.protocol.slice(0,-1)),A=!ma.test(G?G.toLowerCase():"")}v=A}if(v)Ht(c,"complete"),Ht(c,"success");else{c.m=6;try{var tt=2<Hn(c)?c.g.statusText:""}catch{tt=""}c.l=tt+" ["+c.Z()+"]",ga(c)}}finally{Ti(c)}}}}function Ti(c,p){if(c.g){Cr(c);const v=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Ht(c,"ready");try{v.onreadystatechange=A}catch{}}}function Cr(c){c.I&&(m.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),aa(p)}};function Vu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ph(c){const p={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(Z(c[A]))continue;var v=L(c[A]);const G=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const tt=p[G]||[];p[G]=tt,tt.push(v)}I(p,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function ya(c){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rr("baseRetryDelayMs",5e3,c),this.cb=Rr("retryDelaySeedMs",1e4,c),this.Wa=Rr("forwardChannelMaxRetries",2,c),this.wa=Rr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Hi(c&&c.concurrentRequestLimit),this.Da=new Ar,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ya.prototype,n.la=8,n.G=1,n.connect=function(c,p,v,A){fe(0),this.W=c,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=Uu(this,null,this.W),va(this)};function zo(c){if(Ou(c),c.G==3){var p=c.U++,v=Rn(c.I);if(ne(v,"SID",c.K),ne(v,"RID",p),ne(v,"TYPE","terminate"),xr(c,v),p=new hn(c,c.j,p),p.L=2,p.v=Tr(Rn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=p.v,v=!0),v||(p.g=zu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),yr(p)}ju(c)}function _a(c){c.g&&(Ir(c),c.g.cancel(),c.g=null)}function Ou(c){_a(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ea(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function va(c){if(!ua(c.h)&&!c.s){c.s=!0;var p=c.Ga;W||V(),ut||(W(),ut=!0),pt.add(p,c),c.B=0}}function yh(c,p){return ca(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ce(T(c.Ga,c,p),Ho(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new hn(this,this.j,c);let tt=this.o;if(this.S&&(tt?(tt=w(tt),N(tt,this.S)):tt=this.S),this.m!==null||this.O||(G.H=tt,tt=null),this.P)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=Nu(this,G,p),v=Rn(this.I),ne(v,"RID",c),ne(v,"CVER",22),this.D&&ne(v,"X-HTTP-Session-Id",this.D),xr(this,v),tt&&(this.O?p="headers="+encodeURIComponent(String(Uo(tt)))+"&"+p:this.m&&He(v,this.m,tt)),fa(this.h,G),this.Ua&&ne(v,"TYPE","init"),this.P?(ne(v,"$req",p),ne(v,"SID","null"),G.T=!0,si(G,v,null)):si(G,v,p),this.G=2}}else this.G==3&&(c?Bo(this,c):this.i.length==0||ua(this.h)||Bo(this))};function Bo(c,p){var v;p?v=p.l:v=c.U++;const A=Rn(c.I);ne(A,"SID",c.K),ne(A,"RID",v),ne(A,"AID",c.T),xr(c,A),c.m&&c.o&&He(A,c.m,c.o),v=new hn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Nu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),fa(c.h,v),si(v,A,p)}function xr(c,p){c.H&&it(c.H,function(v,A){ne(p,A,v)}),c.l&&No({},function(v,A){ne(p,A,v)})}function Nu(c,p,v){v=Math.min(c.i.length,v);var A=c.l?T(c.l.Na,c.l,c):null;t:{var G=c.i;let tt=-1;for(;;){const ht=["count="+v];tt==-1?0<v?(tt=G[0].g,ht.push("ofs="+tt)):tt=0:ht.push("ofs="+tt);let Gt=!0;for(let Le=0;Le<v;Le++){let Ft=G[Le].g;const Ge=G[Le].map;if(Ft-=tt,0>Ft)tt=Math.max(0,G[Le].g-100),Gt=!1;else try{_i(Ge,ht,"req"+Ft+"_")}catch{A&&A(Ge)}}if(Gt){A=ht.join("&");break t}}}return c=c.i.splice(0,v),p.D=c,A}function Lu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;W||V(),ut||(W(),ut=!0),pt.add(p,c),c.v=0}}function qo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ce(T(c.Fa,c),Ho(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ce(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fe(10),_a(this),ku(this))};function Ir(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ku(c){c.g=new hn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Rn(c.qa);ne(p,"RID","rpc"),ne(p,"SID",c.K),ne(p,"AID",c.T),ne(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&ne(p,"TO",c.ja),ne(p,"TYPE","xmlhttp"),xr(c,p),c.m&&c.o&&He(p,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Tr(Rn(p)),v.m=null,v.P=!0,qi(v,c)}n.Za=function(){this.C!=null&&(this.C=null,_a(this),qo(this),fe(19))};function Ea(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Pu(c,p){var v=null;if(c.g==p){Ea(c),Ir(c),c.g=null;var A=2}else if(Vo(c.h,p))v=p.D,dn(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var G=c.B;A=ys(),Ht(A,new Ne(A,v)),va(c)}else Lu(c);else if(G=p.s,G==3||G==0&&0<p.X||!(A==1&&yh(c,p)||A==2&&qo(c)))switch(v&&0<v.length&&(p=c.h,p.i=p.i.concat(v)),G){case 1:Xi(c,5);break;case 4:Xi(c,10);break;case 3:Xi(c,6);break;default:Xi(c,2)}}}function Ho(c,p){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*p}function Xi(c,p){if(c.j.info("Error code "+p),p==2){var v=T(c.fb,c),A=c.Xa;const G=!A;A=new Re(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Er(A,"https"),Tr(A),G?Sr(A.toString(),v):ri(A.toString(),v)}else fe(2);c.G=0,c.l&&c.l.sa(p),ju(c),Ou(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function ju(c){if(c.G=0,c.ka=[],c.l){const p=Oo(c.h);(p.length!=0||c.i.length!=0)&&(k(c.ka,p),k(c.ka,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.ra()}}function Uu(c,p,v){var A=v instanceof Re?Rn(v):new Re(v);if(A.g!="")p&&(A.g=p+"."+A.g),bs(A,A.s);else{var G=m.location;A=G.protocol,p=p?p+"."+G.hostname:G.hostname,G=+G.port;var tt=new Re(null);A&&Er(tt,A),p&&(tt.g=p),G&&bs(tt,G),v&&(tt.l=v),A=tt}return v=c.D,p=c.ya,v&&p&&ne(A,v,p),ne(A,"VER",c.la),xr(c,A),A}function zu(c,p,v){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Jt(new Ss({eb:v})):new Jt(c.pa),p.Ha(c.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}n=Bu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ta(){}Ta.prototype.g=function(c,p){return new mn(c,p)};function mn(c,p){$t.call(this),this.g=new ya(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!Z(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!Z(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new bi(this)}M(mn,$t),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){zo(this.g)},mn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=ii(c),c=v);p.i.push(new xu(p.Ya++,c)),p.G==3&&va(p)},mn.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,mn.aa.N.call(this)};function qu(c){zi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}M(qu,zi);function Hu(){xo.call(this),this.status=1}M(Hu,xo);function bi(c){this.g=c}M(bi,Bu),bi.prototype.ua=function(){Ht(this.g,"a")},bi.prototype.ta=function(c){Ht(this.g,new qu(c))},bi.prototype.sa=function(c){Ht(this.g,new Hu)},bi.prototype.ra=function(){Ht(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Hv=function(){return new Ta},qv=function(){return ys()},Bv=di,sm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,sf=Es,Bi.COMPLETE="complete",zv=Bi,Ro.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",$t.prototype.listen=$t.prototype.K,Pl=Ro,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,Uv=Jt}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const My="@firebase/firestore",Vy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Vv("@firebase/firestore");function to(){return Jr.logLevel}function yt(n,...t){if(Jr.logLevel<=Kt.DEBUG){const i=t.map(Bm);Jr.debug(`Firestore (${To}): ${n}`,...i)}}function gs(n,...t){if(Jr.logLevel<=Kt.ERROR){const i=t.map(Bm);Jr.error(`Firestore (${To}): ${n}`,...i)}}function co(n,...t){if(Jr.logLevel<=Kt.WARN){const i=t.map(Bm);Jr.warn(`Firestore (${To}): ${n}`,...i)}}function Bm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,Gv(n,r,i)}function Gv(n,t,i){let r=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw gs(r),new Error(r)}function Wt(n,t,i,r){let o="Unexpected state";typeof i=="string"?o=i:r=i,n||Gv(t,o,r)}function Mt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Eo{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class B7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(un.UNAUTHENTICATED))}shutdown(){}}class q7{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class H7{constructor(t){this.t=t,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Wt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new er;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new er,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=u;t.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new er)}},0),h()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Wt(typeof r.accessToken=="string",31837,{l:r}),new Fv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Wt(t===null||typeof t=="string",2055,{h:t}),new un(t)}}class G7{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F7{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new G7(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q7{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,A7(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Wt(this.o===void 0,3512);const r=u=>{u.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,yt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Wt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Oy(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<n;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Y7(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<i&&(r+=t.charAt(o[u]%62))}return r}}function kt(n,t){return n<t?-1:n>t?1:0}function rm(n,t){let i=0;for(;i<n.length&&i<t.length;){const r=n.codePointAt(i),o=t.codePointAt(i);if(r!==o){if(r<128&&o<128)return kt(r,o);{const u=Qv(),h=K7(u.encode(Ny(n,i)),u.encode(Ny(t,i)));return h!==0?h:kt(r,o)}}i+=r>65535?2:1}return kt(n.length,t.length)}function Ny(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function K7(n,t){for(let i=0;i<n.length&&i<t.length;++i)if(n[i]!==t[i])return kt(n[i],t[i]);return kt(n.length,t.length)}function fo(n,t,i){return n.length===t.length&&n.every((r,o)=>i(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=-62135596800,ky=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(t){return ze.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*ky);return new ze(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new bt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new bt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<Ly)throw new bt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ky}_compareTo(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-Ly;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{static fromTimestamp(t){return new Dt(t)}static min(){return new Dt(new ze(0,0))}static max(){return new Dt(new ze(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="__name__";class Mi{constructor(t,i,r){i===void 0?i=0:i>t.length&&Ct(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&Ct(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Mi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Mi?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let o=0;o<r;o++){const u=Mi.compareSegments(t.get(o),i.get(o));if(u!==0)return u}return kt(t.length,i.length)}static compareSegments(t,i){const r=Mi.isNumericId(t),o=Mi.isNumericId(i);return r&&!o?-1:!r&&o?1:r&&o?Mi.extractNumericId(t).compare(Mi.extractNumericId(i)):rm(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return tr.fromString(t.substring(4,t.length-2))}}class de extends Mi{construct(t,i,r){return new de(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(o=>o.length>0))}return new de(i)}static emptyPath(){return new de([])}}const X7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Mi{construct(t,i,r){return new nn(t,i,r)}static isValidIdentifier(t){return X7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Py}static keyField(){return new nn([Py])}static fromServerFormat(t){const i=[];let r="",o=0;const u=()=>{if(r.length===0)throw new bt(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new bt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new bt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new bt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nn(i)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(t){this.path=t}static fromPath(t){return new St(de.fromString(t))}static fromName(t){return new St(de.fromString(t).popFirst(5))}static empty(){return new St(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&de.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return de.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new St(new de(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function $7(n,t){const i=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(r===1e9?new ze(i+1,0):new ze(i,r));return new ir(o,St.empty(),t)}function Z7(n){return new ir(n.readTime,n.key,ou)}class ir{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new ir(Dt.min(),St.empty(),ou)}static max(){return new ir(Dt.max(),St.empty(),ou)}}function J7(n,t){let i=n.readTime.compareTo(t.readTime);return i!==0?i:(i=St.comparator(n.documentKey,t.documentKey),i!==0?i:kt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(n){if(n.code!==lt.FAILED_PRECONDITION||n.message!==W7)throw n;yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new at((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,o)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof at?i:at.resolve(i)}catch(i){return at.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):at.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):at.reject(i)}static resolve(t){return new at((i,r)=>{i(t)})}static reject(t){return new at((i,r)=>{r(t)})}static waitFor(t){return new at((i,r)=>{let o=0,u=0,h=!1;t.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&i()},y=>r(y))}),h=!0,u===o&&i()})}static or(t){let i=at.resolve(!1);for(const r of t)i=i.next(o=>o?at.resolve(o):r());return i}static forEach(t,i){const r=[];return t.forEach((o,u)=>{r.push(i.call(this,o,u))}),this.waitFor(r)}static mapArray(t,i){return new at((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let y=0;y<u;y++){const g=y;i(t[g]).next(_=>{h[g]=_,++m,m===u&&r(h)},_=>o(_))}})}static doWhile(t,i){return new at((r,o)=>{const u=()=>{t()===!0?i().next(()=>{u()},o):r()};u()})}}function e8(n){const t=n.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function So(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>i.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}qf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=-1;function Hf(n){return n==null}function vf(n){return n===0&&1/n==-1/0}function n8(n){return typeof n=="number"&&Number.isInteger(n)&&!vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="";function i8(n){let t="";for(let i=0;i<n.length;i++)t.length>0&&(t=jy(t)),t=s8(n.get(i),t);return jy(t)}function s8(n,t){let i=t;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":i+="";break;case Kv:i+="";break;default:i+=u}}return i}function jy(n){return n+Kv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n){let t=0;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t++;return t}function ur(n,t){for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t(i,n[i])}function Xv(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t,i){this.comparator=t,this.root=i||en.EMPTY}insert(t,i){return new pe(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,en.BLACK,null,null))}remove(t){return new pe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,en.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return i+r.left.size;o<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Qc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Qc(this.root,t,this.comparator,!0)}}class Qc{constructor(t,i,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class en{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??en.RED,this.left=o??en.EMPTY,this.right=u??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,o,u){return new en(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,r),null):u===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,o=this;if(i(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(t,o.key)===0){if(o.right.isEmpty())return en.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ct(27949);return t+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(t,i,r,o,u){return this}insert(t,i,r){return new en(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.comparator=t,this.data=new pe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;i(o.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(t){return new zy(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Be)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Be(this.comparator);return i.data=t,i}}class zy{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.fields=t,t.sort(nn.comparator)}static empty(){return new Ln([])}unionWith(t){let i=new Be(nn.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Ln(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return fo(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new $v("Invalid base64 string: "+u):u}}(t);return new sn(i)}static fromUint8Array(t){const i=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(t);return new sn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const r8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(n){if(Wt(!!n,39018),typeof n=="string"){let t=0;const i=r8.exec(n);if(Wt(!!i,46558,{timestamp:n}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Se(n.seconds),nanos:Se(n.nanos)}}function Se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rr(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="server_timestamp",Jv="__type__",Wv="__previous_value__",t3="__local_write_time__";function Hm(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Jv])===null||i===void 0?void 0:i.stringValue)===Zv}function Gf(n){const t=n.mapValue.fields[Wv];return Hm(t)?Gf(t):t}function lu(n){const t=sr(n.mapValue.fields[t3].timestampValue);return new ze(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(t,i,r,o,u,h,m,y,g,_){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=_}}const Ef="(default)";class uu{constructor(t,i){this.projectId=t,this.database=i||Ef}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(t){return t instanceof uu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="__type__",o8="__max__",Yc={mapValue:{}},n3="__vector__",Tf="value";function ar(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hm(n)?4:u8(n)?9007199254740991:l8(n)?10:11:Ct(28295,{value:n})}function ki(n,t){if(n===t)return!0;const i=ar(n);if(i!==ar(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return lu(n).isEqual(lu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=sr(o.timestampValue),m=sr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(o,u){return rr(o.bytesValue).isEqual(rr(u.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(o,u){return Se(o.geoPointValue.latitude)===Se(u.geoPointValue.latitude)&&Se(o.geoPointValue.longitude)===Se(u.geoPointValue.longitude)}(n,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Se(o.integerValue)===Se(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Se(o.doubleValue),m=Se(u.doubleValue);return h===m?vf(h)===vf(m):isNaN(h)&&isNaN(m)}return!1}(n,t);case 9:return fo(n.arrayValue.values||[],t.arrayValue.values||[],ki);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Uy(h)!==Uy(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!ki(h[y],m[y])))return!1;return!0}(n,t);default:return Ct(52216,{left:n})}}function cu(n,t){return(n.values||[]).find(i=>ki(i,t))!==void 0}function ho(n,t){if(n===t)return 0;const i=ar(n),r=ar(t);if(i!==r)return kt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,t.booleanValue);case 2:return function(u,h){const m=Se(u.integerValue||u.doubleValue),y=Se(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(n,t);case 3:return By(n.timestampValue,t.timestampValue);case 4:return By(lu(n),lu(t));case 5:return rm(n.stringValue,t.stringValue);case 6:return function(u,h){const m=rr(u),y=rr(h);return m.compareTo(y)}(n.bytesValue,t.bytesValue);case 7:return function(u,h){const m=u.split("/"),y=h.split("/");for(let g=0;g<m.length&&g<y.length;g++){const _=kt(m[g],y[g]);if(_!==0)return _}return kt(m.length,y.length)}(n.referenceValue,t.referenceValue);case 8:return function(u,h){const m=kt(Se(u.latitude),Se(h.latitude));return m!==0?m:kt(Se(u.longitude),Se(h.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return qy(n.arrayValue,t.arrayValue);case 10:return function(u,h){var m,y,g,_;const b=u.fields||{},T=h.fields||{},R=(m=b[Tf])===null||m===void 0?void 0:m.arrayValue,M=(y=T[Tf])===null||y===void 0?void 0:y.arrayValue,P=kt(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((_=M==null?void 0:M.values)===null||_===void 0?void 0:_.length)||0);return P!==0?P:qy(R,M)}(n.mapValue,t.mapValue);case 11:return function(u,h){if(u===Yc.mapValue&&h===Yc.mapValue)return 0;if(u===Yc.mapValue)return 1;if(h===Yc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),g=h.fields||{},_=Object.keys(g);y.sort(),_.sort();for(let b=0;b<y.length&&b<_.length;++b){const T=rm(y[b],_[b]);if(T!==0)return T;const R=ho(m[y[b]],g[_[b]]);if(R!==0)return R}return kt(y.length,_.length)}(n.mapValue,t.mapValue);default:throw Ct(23264,{Pe:i})}}function By(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return kt(n,t);const i=sr(n),r=sr(t),o=kt(i.seconds,r.seconds);return o!==0?o:kt(i.nanos,r.nanos)}function qy(n,t){const i=n.values||[],r=t.values||[];for(let o=0;o<i.length&&o<r.length;++o){const u=ho(i[o],r[o]);if(u)return u}return kt(i.length,r.length)}function mo(n){return am(n)}function am(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=sr(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(i){return rr(i).toBase64()}(n.bytesValue):"referenceValue"in n?function(i){return St.fromName(i).toString()}(n.referenceValue):"geoPointValue"in n?function(i){return`geo(${i.latitude},${i.longitude})`}(n.geoPointValue):"arrayValue"in n?function(i){let r="[",o=!0;for(const u of i.values||[])o?o=!1:r+=",",r+=am(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${am(i.fields[h])}`;return o+"}"}(n.mapValue):Ct(61005,{value:n})}function rf(n){switch(ar(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gf(n);return t?16+rf(t):16;case 5:return 2*n.stringValue.length;case 6:return rr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+rf(u),0)}(n.arrayValue);case 10:case 11:return function(r){let o=0;return ur(r.fields,(u,h)=>{o+=u.length+rf(h)}),o}(n.mapValue);default:throw Ct(13486,{value:n})}}function om(n){return!!n&&"integerValue"in n}function Gm(n){return!!n&&"arrayValue"in n}function Hy(n){return!!n&&"nullValue"in n}function Gy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function af(n){return!!n&&"mapValue"in n}function l8(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[e3])===null||i===void 0?void 0:i.stringValue)===n3}function Yl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ur(n.mapValue.fields,(i,r)=>t.mapValue.fields[i]=Yl(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(n.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Yl(n.arrayValue.values[i]);return t}return Object.assign({},n)}function u8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===o8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.value=t}static empty(){return new Sn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!af(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yl(i)}setAll(t){let i=nn.emptyPath(),r={},o=[];t.forEach((h,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,r,o),r={},o=[],i=m.popLast()}h?r[m.lastSegment()]=Yl(h):o.push(m.lastSegment())});const u=this.getFieldsMap(i);this.applyChanges(u,r,o)}delete(t){const i=this.field(t.popLast());af(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return ki(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=i.mapValue.fields[t.get(r)];af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=o),i=o}return i.mapValue.fields}applyChanges(t,i,r){ur(i,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new Sn(Yl(this.value))}}function i3(n){const t=[];return ur(n.fields,(i,r)=>{const o=new nn([i]);if(af(r)){const u=i3(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)}),new Ln(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,i,r,o,u,h,m){this.key=t,this.documentType=i,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new cn(t,0,Dt.min(),Dt.min(),Dt.min(),Sn.empty(),0)}static newFoundDocument(t,i,r,o){return new cn(t,1,i,Dt.min(),r,o,0)}static newNoDocument(t,i){return new cn(t,2,i,Dt.min(),Dt.min(),Sn.empty(),0)}static newUnknownDocument(t,i){return new cn(t,3,i,Dt.min(),Dt.min(),Sn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t,i){this.position=t,this.inclusive=i}}function Fy(n,t,i){let r=0;for(let o=0;o<n.position.length;o++){const u=t[o],h=n.position[o];if(u.field.isKeyField()?r=St.comparator(St.fromName(h.referenceValue),i.key):r=ho(h,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qy(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let i=0;i<n.position.length;i++)if(!ki(n.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,i="asc"){this.field=t,this.dir=i}}function c8(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{}class Ue extends s3{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new h8(t,i,r):i==="array-contains"?new g8(t,r):i==="in"?new p8(t,r):i==="not-in"?new y8(t,r):i==="array-contains-any"?new _8(t,r):new Ue(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new d8(t,r):new m8(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(ho(i,this.value)):i!==null&&ar(this.value)===ar(i)&&this.matchesComparison(ho(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pi extends s3{constructor(t,i){super(),this.filters=t,this.op=i,this.Te=null}static create(t,i){return new Pi(t,i)}matches(t){return r3(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function r3(n){return n.op==="and"}function a3(n){return f8(n)&&r3(n)}function f8(n){for(const t of n.filters)if(t instanceof Pi)return!1;return!0}function lm(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+mo(n.value);if(a3(n))return n.filters.map(t=>lm(t)).join(",");{const t=n.filters.map(i=>lm(i)).join(",");return`${n.op}(${t})`}}function o3(n,t){return n instanceof Ue?function(r,o){return o instanceof Ue&&r.op===o.op&&r.field.isEqual(o.field)&&ki(r.value,o.value)}(n,t):n instanceof Pi?function(r,o){return o instanceof Pi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,h,m)=>u&&o3(h,o.filters[m]),!0):!1}(n,t):void Ct(19439)}function l3(n){return n instanceof Ue?function(i){return`${i.field.canonicalString()} ${i.op} ${mo(i.value)}`}(n):n instanceof Pi?function(i){return i.op.toString()+" {"+i.getFilters().map(l3).join(" ,")+"}"}(n):"Filter"}class h8 extends Ue{constructor(t,i,r){super(t,i,r),this.key=St.fromName(r.referenceValue)}matches(t){const i=St.comparator(t.key,this.key);return this.matchesComparison(i)}}class d8 extends Ue{constructor(t,i){super(t,"in",i),this.keys=u3("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class m8 extends Ue{constructor(t,i){super(t,"not-in",i),this.keys=u3("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function u3(n,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>St.fromName(r.referenceValue))}class g8 extends Ue{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Gm(i)&&cu(i.arrayValue,this.value)}}class p8 extends Ue{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&cu(this.value.arrayValue,i)}}class y8 extends Ue{constructor(t,i){super(t,"not-in",i)}matches(t){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!cu(this.value.arrayValue,i)}}class _8 extends Ue{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Gm(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(t,i=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Ie=null}}function Yy(n,t=null,i=[],r=[],o=null,u=null,h=null){return new v8(n,t,i,r,o,u,h)}function Fm(n){const t=Mt(n);if(t.Ie===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>lm(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Hf(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>mo(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>mo(r)).join(",")),t.Ie=i}return t.Ie}function Qm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!c8(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if(!o3(n.filters[i],t.filters[i]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Qy(n.startAt,t.startAt)&&Qy(n.endAt,t.endAt)}function um(n){return St.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(t,i=null,r=[],o=[],u=null,h="F",m=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function E8(n,t,i,r,o,u,h,m){return new Ff(n,t,i,r,o,u,h,m)}function Qf(n){return new Ff(n)}function Ky(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function T8(n){return n.collectionGroup!==null}function Kl(n){const t=Mt(n);if(t.Ee===null){t.Ee=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ee.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Be(nn.comparator);return h.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(t).forEach(u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ee.push(new Sf(u,r))}),i.has(nn.keyField().canonicalString())||t.Ee.push(new Sf(nn.keyField(),r))}return t.Ee}function Vi(n){const t=Mt(n);return t.de||(t.de=b8(t,Kl(n))),t.de}function b8(n,t){if(n.limitType==="F")return Yy(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Sf(o.field,u)});const i=n.endAt?new bf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bf(n.startAt.position,n.startAt.inclusive):null;return Yy(n.path,n.collectionGroup,t,n.filters,n.limit,i,r)}}function cm(n,t,i){return new Ff(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,i,n.startAt,n.endAt)}function Yf(n,t){return Qm(Vi(n),Vi(t))&&n.limitType===t.limitType}function c3(n){return`${Fm(Vi(n))}|lt:${n.limitType}`}function eo(n){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(o=>l3(o)).join(", ")}]`),Hf(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(o=>mo(o)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(o=>mo(o)).join(",")),`Target(${r})`}(Vi(n))}; limitType=${n.limitType})`}function Kf(n,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):St.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,t)&&function(r,o){for(const u of Kl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(n,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(n,t)&&function(r,o){return!(r.startAt&&!function(h,m,y){const g=Fy(h,m,y);return h.inclusive?g<=0:g<0}(r.startAt,Kl(r),o)||r.endAt&&!function(h,m,y){const g=Fy(h,m,y);return h.inclusive?g>=0:g>0}(r.endAt,Kl(r),o))}(n,t)}function S8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f3(n){return(t,i)=>{let r=!1;for(const o of Kl(n)){const u=A8(o,t,i);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function A8(n,t,i){const r=n.field.isKeyField()?St.comparator(t.key,i.key):function(u,h,m){const y=h.data.field(u),g=m.data.field(u);return y!==null&&g!==null?ho(y,g):Ct(42886)}(n.field,t,i);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ct(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,i]);o.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[i]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){ur(this.inner,(i,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return Xv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=new pe(St.comparator);function ps(){return w8}const h3=new pe(St.comparator);function jl(...n){let t=h3;for(const i of n)t=t.insert(i.key,i);return t}function d3(n){let t=h3;return n.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function $r(){return Xl()}function m3(){return Xl()}function Xl(){return new ia(n=>n.toString(),(n,t)=>n.isEqual(t))}const C8=new pe(St.comparator),R8=new Be(St.comparator);function Bt(...n){let t=R8;for(const i of n)t=t.add(i);return t}const x8=new Be(kt);function I8(){return x8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(t)?"-0":t}}function g3(n){return{integerValue:""+n}}function D8(n,t){return n8(t)?g3(t):Ym(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function M8(n,t,i){return n instanceof Af?function(o,u){const h={fields:{[Jv]:{stringValue:Zv},[t3]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Hm(u)&&(u=Gf(u)),u&&(h.fields[Wv]=u),{mapValue:h}}(i,t):n instanceof fu?y3(n,t):n instanceof hu?_3(n,t):function(o,u){const h=p3(o,u),m=Xy(h)+Xy(o.Re);return om(h)&&om(o.Re)?g3(m):Ym(o.serializer,m)}(n,t)}function V8(n,t,i){return n instanceof fu?y3(n,t):n instanceof hu?_3(n,t):i}function p3(n,t){return n instanceof wf?function(r){return om(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class Af extends Xf{}class fu extends Xf{constructor(t){super(),this.elements=t}}function y3(n,t){const i=v3(t);for(const r of n.elements)i.some(o=>ki(o,r))||i.push(r);return{arrayValue:{values:i}}}class hu extends Xf{constructor(t){super(),this.elements=t}}function _3(n,t){let i=v3(t);for(const r of n.elements)i=i.filter(o=>!ki(o,r));return{arrayValue:{values:i}}}class wf extends Xf{constructor(t,i){super(),this.serializer=t,this.Re=i}}function Xy(n){return Se(n.integerValue||n.doubleValue)}function v3(n){return Gm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function O8(n,t){return n.field.isEqual(t.field)&&function(r,o){return r instanceof fu&&o instanceof fu||r instanceof hu&&o instanceof hu?fo(r.elements,o.elements,ki):r instanceof wf&&o instanceof wf?ki(r.Re,o.Re):r instanceof Af&&o instanceof Af}(n.transform,t.transform)}class N8{constructor(t,i){this.version=t,this.transformResults=i}}class Oi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Oi}static exists(t){return new Oi(void 0,t)}static updateTime(t){return new Oi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function of(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class $f{}function E3(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new b3(n.key,Oi.none()):new vu(n.key,n.data,Oi.none());{const i=n.data,r=Sn.empty();let o=new Be(nn.comparator);for(let u of t.fields)if(!o.has(u)){let h=i.field(u);h===null&&u.length>1&&(u=u.popLast(),h=i.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new cr(n.key,r,new Ln(o.toArray()),Oi.none())}}function L8(n,t,i){n instanceof vu?function(o,u,h){const m=o.value.clone(),y=Zy(o.fieldTransforms,u,h.transformResults);m.setAll(y),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(n,t,i):n instanceof cr?function(o,u,h){if(!of(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Zy(o.fieldTransforms,u,h.transformResults),y=u.data;y.setAll(T3(o)),y.setAll(m),u.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(n,t,i):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,i)}function $l(n,t,i,r){return n instanceof vu?function(u,h,m,y){if(!of(u.precondition,h))return m;const g=u.value.clone(),_=Jy(u.fieldTransforms,y,h);return g.setAll(_),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(n,t,i,r):n instanceof cr?function(u,h,m,y){if(!of(u.precondition,h))return m;const g=Jy(u.fieldTransforms,y,h),_=h.data;return _.setAll(T3(u)),_.setAll(g),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(n,t,i,r):function(u,h,m){return of(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(n,t,i)}function k8(n,t){let i=null;for(const r of n.fieldTransforms){const o=t.data.field(r.field),u=p3(r.transform,o||null);u!=null&&(i===null&&(i=Sn.empty()),i.set(r.field,u))}return i||null}function $y(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&fo(r,o,(u,h)=>O8(u,h))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class vu extends $f{constructor(t,i,r,o=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class cr extends $f{constructor(t,i,r,o,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function T3(n){const t=new Map;return n.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=n.data.field(i);t.set(i,r)}}),t}function Zy(n,t,i){const r=new Map;Wt(n.length===i.length,32656,{Ve:i.length,me:n.length});for(let o=0;o<i.length;o++){const u=n[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,V8(h,m,i[o]))}return r}function Jy(n,t,i){const r=new Map;for(const o of n){const u=o.transform,h=i.data.field(o.field);r.set(o.field,M8(u,h,t))}return r}class b3 extends $f{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P8 extends $f{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(t,i,r,o){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&L8(u,t,r[o])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=$l(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=$l(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=m3();return this.mutations.forEach(o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=i.has(o.key)?null:m;const y=E3(h,m);y!==null&&r.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Bt())}isEqual(t){return this.batchId===t.batchId&&fo(this.mutations,t.mutations,(i,r)=>$y(i,r))&&fo(this.baseMutations,t.baseMutations,(i,r)=>$y(i,r))}}class Km{constructor(t,i,r,o){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=o}static from(t,i,r){Wt(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let o=function(){return C8}();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Km(t,i,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,Yt;function B8(n){switch(n){case lt.OK:return Ct(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return Ct(15467,{code:n})}}function S3(n){if(n===void 0)return gs("GRPC error has no .code"),lt.UNKNOWN;switch(n){case De.OK:return lt.OK;case De.CANCELLED:return lt.CANCELLED;case De.UNKNOWN:return lt.UNKNOWN;case De.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case De.INTERNAL:return lt.INTERNAL;case De.UNAVAILABLE:return lt.UNAVAILABLE;case De.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case De.NOT_FOUND:return lt.NOT_FOUND;case De.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case De.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case De.ABORTED:return lt.ABORTED;case De.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case De.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case De.DATA_LOSS:return lt.DATA_LOSS;default:return Ct(39323,{code:n})}}(Yt=De||(De={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=new tr([4294967295,4294967295],0);function Wy(n){const t=Qv().encode(n),i=new jv;return i.update(t),new Uint8Array(i.digest())}function t_(n){const t=new DataView(n.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new tr([i,r],0),new tr([o,u],0)]}class Xm{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Ul(`Invalid padding: ${i}`);if(r<0)throw new Ul(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Ul(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Ul(`Invalid padding when bitmap length is 0: ${i}`);this.pe=8*t.length-i,this.ye=tr.fromNumber(this.pe)}we(t,i,r){let o=t.add(i.multiply(tr.fromNumber(r)));return o.compare(q8)===1&&(o=new tr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const i=Wy(t),[r,o]=t_(i);for(let u=0;u<this.hashCount;u++){const h=this.we(r,o,u);if(!this.be(h))return!1}return!0}static create(t,i,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Xm(u,o,i);return r.forEach(m=>h.insert(m)),h}insert(t){if(this.pe===0)return;const i=Wy(t),[r,o]=t_(i);for(let u=0;u<this.hashCount;u++){const h=this.we(r,o,u);this.Se(h)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t,i,r,o,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const o=new Map;return o.set(t,Eu.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Zf(Dt.min(),o,new pe(kt),ps(),Bt())}}class Eu{constructor(t,i,r,o,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new Eu(r,i,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t,i,r,o){this.De=t,this.removedTargetIds=i,this.key=r,this.ve=o}}class A3{constructor(t,i){this.targetId=t,this.Ce=i}}class w3{constructor(t,i,r=sn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=o}}class e_{constructor(){this.Fe=0,this.Me=n_(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Bt(),i=Bt(),r=Bt();return this.Me.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:i=i.add(o);break;case 1:r=r.add(o);break;default:Ct(38017,{changeType:u})}}),new Eu(this.xe,this.Oe,t,i,r)}Qe(){this.Ne=!1,this.Me=n_()}$e(t,i){this.Ne=!0,this.Me=this.Me.insert(t,i)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Wt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class H8{constructor(t){this.ze=t,this.je=new Map,this.He=ps(),this.Je=Kc(),this.Ye=Kc(),this.Ze=new pe(kt)}Xe(t){for(const i of t.De)t.ve&&t.ve.isFoundDocument()?this.et(i,t.ve):this.tt(i,t.key,t.ve);for(const i of t.removedTargetIds)this.tt(i,t.key,t.ve)}nt(t){this.forEachTarget(t,i=>{const r=this.rt(i);switch(t.state){case 0:this.it(i)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(i);break;case 3:this.it(i)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(i)&&(this.st(i),r.ke(t.resumeToken));break;default:Ct(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.je.forEach((r,o)=>{this.it(o)&&i(o)})}ot(t){const i=t.targetId,r=t.Ce.count,o=this._t(i);if(o){const u=o.target;if(um(u))if(r===0){const h=new St(u.path);this.tt(i,h,cn.newNoDocument(h,Dt.min()))}else Wt(r===1,20013,{expectedCount:r});else{const h=this.ut(i);if(h!==r){const m=this.ct(t),y=m?this.lt(m,t,h):1;if(y!==0){this.st(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,g)}}}}}ct(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=i;let h,m;try{h=rr(r).toUint8Array()}catch(y){if(y instanceof $v)return co("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Xm(h,o,u)}catch(y){return co(y instanceof Ul?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(t,i,r){return i.Ce.count===r-this.Tt(t,i.targetId)?0:2}Tt(t,i){const r=this.ze.getRemoteKeysForTarget(i);let o=0;return r.forEach(u=>{const h=this.ze.Pt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.tt(i,u,null),o++)}),o}It(t){const i=new Map;this.je.forEach((u,h)=>{const m=this._t(h);if(m){if(u.current&&um(m.target)){const y=new St(m.target.path);this.Et(y).has(h)||this.dt(h,y)||this.tt(h,y,cn.newNoDocument(y,t))}u.Le&&(i.set(h,u.qe()),u.Qe())}});let r=Bt();this.Ye.forEach((u,h)=>{let m=!0;h.forEachWhile(y=>{const g=this._t(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,h)=>h.setReadTime(t));const o=new Zf(t,i,this.Ze,this.He,r);return this.He=ps(),this.Je=Kc(),this.Ye=Kc(),this.Ze=new pe(kt),o}et(t,i){if(!this.it(t))return;const r=this.dt(t,i.key)?2:0;this.rt(t).$e(i.key,r),this.He=this.He.insert(i.key,i),this.Je=this.Je.insert(i.key,this.Et(i.key).add(t)),this.Ye=this.Ye.insert(i.key,this.At(i.key).add(t))}tt(t,i,r){if(!this.it(t))return;const o=this.rt(t);this.dt(t,i)?o.$e(i,1):o.Ue(i),this.Ye=this.Ye.insert(i,this.At(i).delete(t)),this.Ye=this.Ye.insert(i,this.At(i).add(t)),r&&(this.He=this.He.insert(i,r))}removeTarget(t){this.je.delete(t)}ut(t){const i=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let i=this.je.get(t);return i||(i=new e_,this.je.set(t,i)),i}At(t){let i=this.Ye.get(t);return i||(i=new Be(kt),this.Ye=this.Ye.insert(t,i)),i}Et(t){let i=this.Je.get(t);return i||(i=new Be(kt),this.Je=this.Je.insert(t,i)),i}it(t){const i=this._t(t)!==null;return i||yt("WatchChangeAggregator","Detected inactive target",t),i}_t(t){const i=this.je.get(t);return i&&i.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new e_),this.ze.getRemoteKeysForTarget(t).forEach(i=>{this.tt(t,i,null)})}dt(t,i){return this.ze.getRemoteKeysForTarget(t).has(i)}}function Kc(){return new pe(St.comparator)}function n_(){return new pe(St.comparator)}const G8={asc:"ASCENDING",desc:"DESCENDING"},F8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q8={and:"AND",or:"OR"};class Y8{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function fm(n,t){return n.useProto3Json||Hf(t)?t:{value:t}}function Cf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function C3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function K8(n,t){return Cf(n,t.toTimestamp())}function Ni(n){return Wt(!!n,49232),Dt.fromTimestamp(function(i){const r=sr(i);return new ze(r.seconds,r.nanos)}(n))}function $m(n,t){return hm(n,t).canonicalString()}function hm(n,t){const i=function(o){return new de(["projects",o.projectId,"databases",o.database])}(n).child("documents");return t===void 0?i:i.child(t)}function R3(n){const t=de.fromString(n);return Wt(V3(t),10190,{key:t.toString()}),t}function dm(n,t){return $m(n.databaseId,t.path)}function R1(n,t){const i=R3(t);if(i.get(1)!==n.databaseId.projectId)throw new bt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+n.databaseId.projectId);if(i.get(3)!==n.databaseId.database)throw new bt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+n.databaseId.database);return new St(I3(i))}function x3(n,t){return $m(n.databaseId,t)}function X8(n){const t=R3(n);return t.length===4?de.emptyPath():I3(t)}function mm(n){return new de(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function I3(n){return Wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function i_(n,t,i){return{name:dm(n,t),fields:i.value.mapValue.fields}}function $8(n,t){let i;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ct(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(g,_){return g.useProto3Json?(Wt(_===void 0||typeof _=="string",58123),sn.fromBase64String(_||"")):(Wt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sn.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&function(g){const _=g.code===void 0?lt.UNKNOWN:S3(g.code);return new bt(_,g.message||"")}(h);i=new w3(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=R1(n,r.document.name),u=Ni(r.document.updateTime),h=r.document.createTime?Ni(r.document.createTime):Dt.min(),m=new Sn({mapValue:{fields:r.document.fields}}),y=cn.newFoundDocument(o,u,h,m),g=r.targetIds||[],_=r.removedTargetIds||[];i=new lf(g,_,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=R1(n,r.document),u=r.readTime?Ni(r.readTime):Dt.min(),h=cn.newNoDocument(o,u),m=r.removedTargetIds||[];i=new lf([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=R1(n,r.document),u=r.removedTargetIds||[];i=new lf([],u,o,null)}else{if(!("filter"in t))return Ct(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new z8(o,u),m=r.targetId;i=new A3(m,h)}}return i}function Z8(n,t){let i;if(t instanceof vu)i={update:i_(n,t.key,t.value)};else if(t instanceof b3)i={delete:dm(n,t.key)};else if(t instanceof cr)i={update:i_(n,t.key,t.data),updateMask:ab(t.fieldMask)};else{if(!(t instanceof P8))return Ct(16599,{ft:t.type});i={verify:dm(n,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(u,h){const m=h.transform;if(m instanceof Af)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof fu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof hu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wf)return{fieldPath:h.field.canonicalString(),increment:m.Re};throw Ct(20930,{transform:h.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:K8(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ct(27497)}(n,t.precondition)),i}function J8(n,t){return n&&n.length>0?(Wt(t!==void 0,14353),n.map(i=>function(o,u){let h=o.updateTime?Ni(o.updateTime):Ni(u);return h.isEqual(Dt.min())&&(h=Ni(u)),new N8(h,o.transformResults||[])}(i,t))):[]}function W8(n,t){return{documents:[x3(n,t.path)]}}function tb(n,t){const i={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=x3(n,o);const u=function(g){if(g.length!==0)return M3(Pi.create(g,"and"))}(t.filters);u&&(i.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(_=>function(T){return{field:no(T.field),direction:ib(T.dir)}}(_))}(t.orderBy);h&&(i.structuredQuery.orderBy=h);const m=fm(n,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:i,parent:o}}function eb(n){let t=X8(n.parent);const i=n.structuredQuery,r=i.from?i.from.length:0;let o=null;if(r>0){Wt(r===1,65062);const _=i.from[0];_.allDescendants?o=_.collectionId:t=t.child(_.collectionId)}let u=[];i.where&&(u=function(b){const T=D3(b);return T instanceof Pi&&a3(T)?T.getFilters():[T]}(i.where));let h=[];i.orderBy&&(h=function(b){return b.map(T=>function(M){return new Sf(io(M.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(i.orderBy));let m=null;i.limit&&(m=function(b){let T;return T=typeof b=="object"?b.value:b,Hf(T)?null:T}(i.limit));let y=null;i.startAt&&(y=function(b){const T=!!b.before,R=b.values||[];return new bf(R,T)}(i.startAt));let g=null;return i.endAt&&(g=function(b){const T=!b.before,R=b.values||[];return new bf(R,T)}(i.endAt)),E8(t,o,h,u,m,"F",y,g)}function nb(n,t){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:o})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function D3(n){return n.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=io(i.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=io(i.unaryFilter.field);return Ue.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(i.unaryFilter.field);return Ue.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=io(i.unaryFilter.field);return Ue.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}}(n):n.fieldFilter!==void 0?function(i){return Ue.create(io(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(i){return Pi.create(i.compositeFilter.filters.map(r=>D3(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}}(i.compositeFilter.op))}(n):Ct(30097,{filter:n})}function ib(n){return G8[n]}function sb(n){return F8[n]}function rb(n){return Q8[n]}function no(n){return{fieldPath:n.canonicalString()}}function io(n){return nn.fromServerFormat(n.fieldPath)}function M3(n){return n instanceof Ue?function(i){if(i.op==="=="){if(Gy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NAN"}};if(Hy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Gy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NOT_NAN"}};if(Hy(i.value))return{unaryFilter:{field:no(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(i.field),op:sb(i.op),value:i.value}}}(n):n instanceof Pi?function(i){const r=i.getFilters().map(o=>M3(o));return r.length===1?r[0]:{compositeFilter:{op:rb(i.op),filters:r}}}(n):Ct(54877,{filter:n})}function ab(n){const t=[];return n.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function V3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,i,r,o,u=Dt.min(),h=Dt.min(),m=sn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new $s(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t){this.wt=t}}function lb(n){const t=eb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.Cn=new cb}addToCollectionParentIndex(t,i){return this.Cn.add(i),at.resolve()}getCollectionParents(t,i){return at.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return at.resolve()}deleteFieldIndex(t,i){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,i){return at.resolve()}getDocumentsMatchingTarget(t,i){return at.resolve(null)}getIndexType(t,i){return at.resolve(0)}getFieldIndexes(t,i){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,i){return at.resolve(ir.min())}getMinOffsetFromCollectionGroup(t,i){return at.resolve(ir.min())}updateCollectionGroup(t,i,r){return at.resolve()}updateIndexEntries(t,i){return at.resolve()}}class cb{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i]||new Be(de.comparator),u=!o.has(r);return this.index[i]=o.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Be(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O3=41943040;class En{static withCacheSize(t){return new En(t,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(O3,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new go(0)}static lr(){return new go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LruGarbageCollector",fb=1048576;function a_([n,t],[i,r]){const o=kt(n,i);return o===0?kt(t,r):o}class hb{constructor(t){this.Er=t,this.buffer=new Be(a_),this.dr=0}Ar(){return++this.dr}Rr(t){const i=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();a_(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class db{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){yt(r_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){So(i)?yt(r_,"Ignoring IndexedDB error during garbage collection: ",i):await bo(i)}await this.mr(3e5)})}}class mb{constructor(t,i){this.gr=t,this.params=i}calculateTargetCount(t,i){return this.gr.pr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return at.resolve(qf.le);const r=new hb(i);return this.gr.forEachTarget(t,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.gr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.gr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(s_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s_):this.wr(t,i))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,i){let r,o,u,h,m,y,g;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(t,o))).next(b=>(r=b,m=Date.now(),this.removeTargets(t,r,i))).next(b=>(u=b,y=Date.now(),this.removeOrphanedDocuments(t,r))).next(b=>(g=Date.now(),to()<=Kt.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${b} documents in `+(g-y)+`ms
Total Duration: ${g-_}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function gb(n,t){return new mb(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.changes=new ia(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?at.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,i,r,o){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,i))).next(o=>(r!==null&&$l(r.mutation,o,Ln.empty(),ze.now()),o))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Bt()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Bt()){const o=$r();return this.populateOverlays(t,o,i).next(()=>this.computeViews(t,i,o,r).next(u=>{let h=jl();return u.forEach((m,y)=>{h=h.insert(m,y.overlayedDocument)}),h}))}getOverlayedDocuments(t,i){const r=$r();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Bt()))}populateOverlays(t,i,r){const o=[];return r.forEach(u=>{i.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((h,m)=>{i.set(h,m)})})}computeViews(t,i,r,o){let u=ps();const h=Xl(),m=function(){return Xl()}();return i.forEach((y,g)=>{const _=r.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof cr)?u=u.insert(g.key,g):_!==void 0?(h.set(g.key,_.mutation.getFieldMask()),$l(_.mutation,g,_.mutation.getFieldMask(),ze.now())):h.set(g.key,Ln.empty())}),this.recalculateAndSaveOverlays(t,u).next(y=>(y.forEach((g,_)=>h.set(g,_)),i.forEach((g,_)=>{var b;return m.set(g,new yb(_,(b=h.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(t,i){const r=Xl();let o=new pe((h,m)=>h-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(h=>{for(const m of h)m.keys().forEach(y=>{const g=i.get(y);if(g===null)return;let _=r.get(y)||Ln.empty();_=m.applyToLocalView(g,_),r.set(y,_);const b=(o.get(m.batchId)||Bt()).add(y);o=o.insert(m.batchId,b)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,_=y.value,b=m3();_.forEach(T=>{if(!u.has(T)){const R=E3(i.get(T),r.get(T));R!==null&&b.set(T,R),u=u.add(T)}}),h.push(this.documentOverlayCache.saveOverlays(t,g,b))}return at.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,o){return function(h){return St.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):T8(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,o):this.getDocumentsMatchingCollectionQuery(t,i,r,o)}getNextDocuments(t,i,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,o-u.size):at.resolve($r());let m=ou,y=u;return h.next(g=>at.forEach(g,(_,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(_)?at.resolve():this.remoteDocumentCache.getEntry(t,_).next(T=>{y=y.insert(_,T)}))).next(()=>this.populateOverlays(t,g,u)).next(()=>this.computeViews(t,y,g,Bt())).next(_=>({batchId:m,changes:d3(_)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new St(i)).next(r=>{let o=jl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,i,r,o){const u=i.collectionGroup;let h=jl();return this.indexManager.getCollectionParents(t,u).next(m=>at.forEach(m,y=>{const g=function(b,T){return new Ff(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,o).next(_=>{_.forEach((b,T)=>{h=h.insert(b,T)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,i,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,o))).next(h=>{u.forEach((y,g)=>{const _=g.getKey();h.get(_)===null&&(h=h.insert(_,cn.newInvalidDocument(_)))});let m=jl();return h.forEach((y,g)=>{const _=u.get(y);_!==void 0&&$l(_.mutation,g,Ln.empty(),ze.now()),Kf(i,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,i){return at.resolve(this.kr.get(i))}saveBundleMetadata(t,i){return this.kr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:Ni(o.createTime)}}(i)),at.resolve()}getNamedQuery(t,i){return at.resolve(this.qr.get(i))}saveNamedQuery(t,i){return this.qr.set(i.name,function(o){return{name:o.name,query:lb(o.bundledQuery),readTime:Ni(o.readTime)}}(i)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(){this.overlays=new pe(St.comparator),this.Qr=new Map}getOverlay(t,i){return at.resolve(this.overlays.get(i))}getOverlays(t,i){const r=$r();return at.forEach(i,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((o,u)=>{this.St(t,i,u)}),at.resolve()}removeOverlaysForBatchId(t,i,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),at.resolve()}getOverlaysForCollection(t,i,r){const o=$r(),u=i.length+1,h=new St(i.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return at.resolve(o)}getOverlaysForCollectionGroup(t,i,r,o){let u=new pe((g,_)=>g-_);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let _=u.get(g.largestBatchId);_===null&&(_=$r(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const m=$r(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,_)=>m.set(g,_)),!(m.size()>=o)););return at.resolve(m)}St(t,i,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new U8(i,r));let u=this.Qr.get(i);u===void 0&&(u=Bt(),this.Qr.set(i,u)),this.Qr.set(i,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.$r=new Be(Ke.Ur),this.Kr=new Be(Ke.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,i){const r=new Ke(t,i);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.zr(new Ke(t,i))}jr(t,i){t.forEach(r=>this.removeReference(r,i))}Hr(t){const i=new St(new de([])),r=new Ke(i,t),o=new Ke(i,t+1),u=[];return this.Kr.forEachInRange([r,o],h=>{this.zr(h),u.push(h.key)}),u}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const i=new St(new de([])),r=new Ke(i,t),o=new Ke(i,t+1);let u=Bt();return this.Kr.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(t){const i=new Ke(t,0),r=this.$r.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Ke{constructor(t,i){this.key=t,this.Zr=i}static Ur(t,i){return St.comparator(t.key,i.key)||kt(t.Zr,i.Zr)}static Wr(t,i){return kt(t.Zr,i.Zr)||St.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.nr=1,this.Xr=new Be(Ke.Ur)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new j8(u,i,r,o);this.mutationQueue.push(h);for(const m of o)this.Xr=this.Xr.add(new Ke(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return at.resolve(h)}lookupMutationBatch(t,i){return at.resolve(this.ei(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,o=this.ti(r),u=o<0?0:o;return at.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?qm:this.nr-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],h=>{const m=this.ei(h.Zr);u.push(m)}),at.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Be(kt);return i.forEach(o=>{const u=new Ke(o,0),h=new Ke(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,h],m=>{r=r.add(m.Zr)})}),at.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,o=r.length+1;let u=r;St.isDocumentKey(u)||(u=u.child(""));const h=new Ke(new St(u),0);let m=new Be(kt);return this.Xr.forEachWhile(y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(m=m.add(y.Zr)),!0)},h),at.resolve(this.ni(m))}ni(t){const i=[];return t.forEach(r=>{const o=this.ei(r);o!==null&&i.push(o)}),i}removeMutationBatch(t,i){Wt(this.ri(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return at.forEach(i.mutations,o=>{const u=new Ke(o.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,i){const r=new Ke(i,0),o=this.Xr.firstAfterOrEqual(r);return at.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}ri(t,i){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const i=this.ti(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t){this.ii=t,this.docs=function(){return new pe(St.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,o=this.docs.get(r),u=o?o.size:0,h=this.ii(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return at.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(i))}getEntries(t,i){let r=ps();return i.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():cn.newInvalidDocument(o))}),at.resolve(r)}getDocumentsMatchingQuery(t,i,r,o){let u=ps();const h=i.path,m=new St(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:_}}=y.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||J7(Z7(_),r)<=0||(o.has(_.key)||Kf(i,_))&&(u=u.insert(_.key,_.mutableCopy()))}return at.resolve(u)}getAllFromCollectionGroup(t,i,r,o){Ct(9500)}si(t,i){return at.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new Ab(this)}getSize(t){return at.resolve(this.size)}}class Ab extends pb{constructor(t){super(),this.Br=t}applyChanges(t){const i=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?i.push(this.Br.addEntry(t,o)):this.Br.removeEntry(r)}),at.waitFor(i)}getFromCache(t,i){return this.Br.getEntry(t,i)}getAllFromCache(t,i){return this.Br.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t){this.persistence=t,this.oi=new ia(i=>Fm(i),Qm),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this._i=0,this.ai=new Zm,this.targetCount=0,this.ui=go.cr()}forEachTarget(t,i){return this.oi.forEach((r,o)=>i(o)),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this._i&&(this._i=i),at.resolve()}Tr(t){this.oi.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ui=new go(i),this.highestTargetId=i),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,i){return this.Tr(i),this.targetCount+=1,at.resolve()}updateTargetData(t,i){return this.Tr(i),at.resolve()}removeTargetData(t,i){return this.oi.delete(i.target),this.ai.Hr(i.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,i,r){let o=0;const u=[];return this.oi.forEach((h,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.oi.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),at.waitFor(u).next(()=>o)}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,i){const r=this.oi.get(i)||null;return at.resolve(r)}addMatchingKeys(t,i,r){return this.ai.Gr(i,r),at.resolve()}removeMatchingKeys(t,i,r){this.ai.jr(i,r);const o=this.persistence.referenceDelegate,u=[];return o&&i.forEach(h=>{u.push(o.markPotentiallyOrphaned(t,h))}),at.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this.ai.Hr(i),at.resolve()}getMatchingKeysForTargetId(t,i){const r=this.ai.Yr(i);return at.resolve(r)}containsKey(t,i){return at.resolve(this.ai.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(t,i){this.ci={},this.overlays={},this.li=new qf(0),this.hi=!1,this.hi=!0,this.Pi=new Tb,this.referenceDelegate=t(this),this.Ti=new wb(this),this.indexManager=new ub,this.remoteDocumentCache=function(o){return new Sb(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new ob(i),this.Ei=new vb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new Eb,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ci[t.toKey()];return r||(r=new bb(i,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,i,r){yt("MemoryPersistence","Starting transaction:",t);const o=new Cb(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(t,i){return at.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,i)))}}class Cb extends t8{constructor(t){super(),this.currentSequenceNumber=t}}class Jm{constructor(t){this.persistence=t,this.Vi=new Zm,this.mi=null}static fi(t){return new Jm(t)}get gi(){if(this.mi)return this.mi;throw Ct(60996)}addReference(t,i,r){return this.Vi.addReference(r,i),this.gi.delete(r.toString()),at.resolve()}removeReference(t,i,r){return this.Vi.removeReference(r,i),this.gi.add(r.toString()),at.resolve()}markPotentiallyOrphaned(t,i){return this.gi.add(i.toString()),at.resolve()}removeTarget(t,i){this.Vi.Hr(i.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(t,i))}di(){this.mi=new Set}Ai(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.gi,r=>{const o=St.fromPath(r);return this.pi(t,o).next(u=>{u||i.removeEntry(o,Dt.min())})}).next(()=>(this.mi=null,i.apply(t)))}updateLimboDocument(t,i){return this.pi(t,i).next(r=>{r?this.gi.delete(i.toString()):this.gi.add(i.toString())})}Ii(t){return 0}pi(t,i){return at.or([()=>at.resolve(this.Vi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ri(t,i)])}}class Rf{constructor(t,i){this.persistence=t,this.yi=new ia(r=>i8(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=gb(this,i)}static fi(t,i){return new Rf(t,i)}di(){}Ai(t){return at.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}pr(t){const i=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(o=>r+o))}br(t){let i=0;return this.yr(t,r=>{i++}).next(()=>i)}yr(t,i){return at.forEach(this.yi,(r,o)=>this.Dr(t,r,o).next(u=>u?at.resolve():i(o)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(t,h=>this.Dr(t,h,i).next(m=>{m||(r++,u.removeEntry(h,Dt.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.yi.set(i,t.currentSequenceNumber),at.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),at.resolve()}removeReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,i){return this.yi.set(i,t.currentSequenceNumber),at.resolve()}Ii(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=rf(t.data.value)),i}Dr(t,i,r){return at.or([()=>this.persistence.Ri(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const o=this.yi.get(i);return at.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t,i,r,o){this.targetId=t,this.fromCache=i,this.ds=r,this.As=o}static Rs(t,i){let r=Bt(),o=Bt();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Wm(t,i.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return TT()?8:e8(vT())>0?6:4}()}initialize(t,i){this.ys=t,this.indexManager=i,this.Vs=!0}getDocumentsMatchingQuery(t,i,r,o){const u={result:null};return this.ws(t,i).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.bs(t,i,o,r).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new Rb;return this.Ss(t,i,h).next(m=>{if(u.result=m,this.fs)return this.Ds(t,i,h,m.size)})}).next(()=>u.result)}Ds(t,i,r,o){return r.documentReadCount<this.gs?(to()<=Kt.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",eo(i),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),at.resolve()):(to()<=Kt.DEBUG&&yt("QueryEngine","Query:",eo(i),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(to()<=Kt.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",eo(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vi(i))):at.resolve())}ws(t,i){if(Ky(i))return at.resolve(null);let r=Vi(i);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=cm(i,null,"F"),r=Vi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const h=Bt(...u);return this.ys.getDocuments(t,h).next(m=>this.indexManager.getMinOffset(t,r).next(y=>{const g=this.vs(i,m);return this.Cs(i,g,h,y.readTime)?this.ws(t,cm(i,null,"F")):this.Fs(t,g,i,y)}))})))}bs(t,i,r,o){return Ky(i)||o.isEqual(Dt.min())?at.resolve(null):this.ys.getDocuments(t,r).next(u=>{const h=this.vs(i,u);return this.Cs(i,h,r,o)?at.resolve(null):(to()<=Kt.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),eo(i)),this.Fs(t,h,i,$7(o,ou)).next(m=>m))})}vs(t,i){let r=new Be(f3(t));return i.forEach((o,u)=>{Kf(t,u)&&(r=r.add(u))}),r}Cs(t,i,r,o){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,i,r){return to()<=Kt.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",eo(i)),this.ys.getDocumentsMatchingQuery(t,i,ir.min(),r)}Fs(t,i,r,o){return this.ys.getDocumentsMatchingQuery(t,r,o).next(u=>(i.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",Ib=3e8;class Db{constructor(t,i,r,o){this.persistence=t,this.Ms=i,this.serializer=o,this.xs=new pe(kt),this.Os=new ia(u=>Fm(u),Qm),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new _b(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.xs))}}function Mb(n,t,i,r){return new Db(n,t,i,r)}async function L3(n,t){const i=Mt(n);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let o;return i.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,i.Ls(t),i.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let y=Bt();for(const g of o){h.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}for(const g of u){m.push(g.batchId);for(const _ of g.mutations)y=y.add(_.key)}return i.localDocuments.getDocuments(r,y).next(g=>({ks:g,removedBatchIds:h,addedBatchIds:m}))})})}function Vb(n,t){const i=Mt(n);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=i.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,g,_){const b=g.batch,T=b.keys();let R=at.resolve();return T.forEach(M=>{R=R.next(()=>_.getEntry(y,M)).next(P=>{const k=g.docVersions.get(M);Wt(k!==null,48541),P.version.compareTo(k)<0&&(b.applyToRemoteDocument(P,g),P.isValidDocument()&&(P.setReadTime(g.commitVersion),_.addEntry(P)))})}),R.next(()=>m.mutationQueue.removeMutationBatch(y,b))}(i,r,t,u).next(()=>u.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Bt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(t))).next(()=>i.localDocuments.getDocuments(r,o))})}function k3(n){const t=Mt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ti.getLastRemoteSnapshotVersion(i))}function Ob(n,t){const i=Mt(n),r=t.snapshotVersion;let o=i.xs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=i.Bs.newChangeBuffer({trackRemovals:!0});o=i.xs;const m=[];t.targetChanges.forEach((_,b)=>{const T=o.get(b);if(!T)return;m.push(i.Ti.removeMatchingKeys(u,_.removedDocuments,b).next(()=>i.Ti.addMatchingKeys(u,_.addedDocuments,b)));let R=T.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(b)!==null?R=R.withResumeToken(sn.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),o=o.insert(b,R),function(P,k,B){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Ib?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(T,R,_)&&m.push(i.Ti.updateTargetData(u,R))});let y=ps(),g=Bt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,_))}),m.push(Nb(u,h,t.documentUpdates).next(_=>{y=_.qs,g=_.Qs})),!r.isEqual(Dt.min())){const _=i.Ti.getLastRemoteSnapshotVersion(u).next(b=>i.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(_)}return at.waitFor(m).next(()=>h.apply(u)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(i.xs=o,u))}function Nb(n,t,i){let r=Bt(),o=Bt();return i.forEach(u=>r=r.add(u)),t.getEntries(n,r).next(u=>{let h=ps();return i.forEach((m,y)=>{const g=u.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Dt.min())?(t.removeEntry(m,y.readTime),h=h.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),h=h.insert(m,y)):yt(tg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{qs:h,Qs:o}})}function Lb(n,t){const i=Mt(n);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=qm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function kb(n,t){const i=Mt(n);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return i.Ti.getTargetData(r,t).next(u=>u?(o=u,at.resolve(o)):i.Ti.allocateTargetId(r).next(h=>(o=new $s(t,h,"TargetPurposeListen",r.currentSequenceNumber),i.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=i.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.xs=i.xs.insert(r.targetId,r),i.Os.set(t,r.targetId)),r})}async function gm(n,t,i){const r=Mt(n),o=r.xs.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!So(h))throw h;yt(tg,`Failed to update sequence numbers for target ${t}: ${h}`)}r.xs=r.xs.remove(t),r.Os.delete(o.target)}function o_(n,t,i){const r=Mt(n);let o=Dt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readwrite",h=>function(y,g,_){const b=Mt(y),T=b.Os.get(_);return T!==void 0?at.resolve(b.xs.get(T)):b.Ti.getTargetData(g,_)}(r,h,Vi(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(h,m.targetId).next(y=>{u=y})}).next(()=>r.Ms.getDocumentsMatchingQuery(h,t,i?o:Dt.min(),i?u:Bt())).next(m=>(Pb(r,S8(t),m),{documents:m,$s:u})))}function Pb(n,t,i){let r=n.Ns.get(t)||Dt.min();i.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ns.set(t,r)}class l_{constructor(){this.activeTargetIds=I8()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jb{constructor(){this.xo=new l_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,i,r){this.Oo[t]=i}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new l_,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="ConnectivityMonitor";class c_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){yt(u_,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){yt(u_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function pm(){return Xc===null?Xc=function(){return 268435456+Math.round(2147483648*Math.random())}():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="RestConnection",zb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bb{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=i+"://"+t.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Ef?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(t,i,r,o,u){const h=pm(),m=this.jo(t,i.toUriEncodedString());yt(x1,`Sending RPC '${t}' ${h}:`,m,r);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:g}=new URL(m),_=Um(g);return this.Jo(t,m,y,r,_).then(b=>(yt(x1,`Received RPC '${t}' ${h}: `,b),b),b=>{throw co(x1,`RPC '${t}' ${h} failed with error: `,b,"url: ",m,"request:",r),b})}Yo(t,i,r,o,u,h){return this.zo(t,i,r,o,u)}Ho(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+To}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}jo(t,i){const r=zb[t];return`${this.Ko}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Hb extends Bb{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,o,u){const h=pm();return new Promise((m,y)=>{const g=new Uv;g.setWithCredentials(!0),g.listenOnce(zv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case sf.NO_ERROR:const b=g.getResponseJson();yt(ln,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(b)),m(b);break;case sf.TIMEOUT:yt(ln,`RPC '${t}' ${h} timed out`),y(new bt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const T=g.getStatus();if(yt(ln,`RPC '${t}' ${h} failed with status:`,T,"response text:",g.getResponseText()),T>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const P=function(B){const Z=B.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(Z)>=0?Z:lt.UNKNOWN}(M.status);y(new bt(P,M.message))}else y(new bt(lt.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new bt(lt.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{h_:t,streamId:h,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{yt(ln,`RPC '${t}' ${h} completed.`)}});const _=JSON.stringify(o);yt(ln,`RPC '${t}' ${h} sending request:`,o),g.send(i,"POST",_,r,15)})}I_(t,i,r){const o=pm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=Hv(),m=qv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const _=u.join("");yt(ln,`Creating RPC '${t}' stream ${o}: ${_}`,y);const b=h.createWebChannel(_,y);this.E_(b);let T=!1,R=!1;const M=new qb({Zo:k=>{R?yt(ln,`Not sending because RPC '${t}' stream ${o} is closed:`,k):(T||(yt(ln,`Opening RPC '${t}' stream ${o} transport.`),b.open(),T=!0),yt(ln,`RPC '${t}' stream ${o} sending:`,k),b.send(k))},Xo:()=>b.close()}),P=(k,B,Z)=>{k.listen(B,H=>{try{Z(H)}catch(J){setTimeout(()=>{throw J},0)}})};return P(b,Pl.EventType.OPEN,()=>{R||(yt(ln,`RPC '${t}' stream ${o} transport opened.`),M.__())}),P(b,Pl.EventType.CLOSE,()=>{R||(R=!0,yt(ln,`RPC '${t}' stream ${o} transport closed`),M.u_(),this.d_(b))}),P(b,Pl.EventType.ERROR,k=>{R||(R=!0,co(ln,`RPC '${t}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),M.u_(new bt(lt.UNAVAILABLE,"The operation could not be completed")))}),P(b,Pl.EventType.MESSAGE,k=>{var B;if(!R){const Z=k.data[0];Wt(!!Z,16349);const H=Z,J=(H==null?void 0:H.error)||((B=H[0])===null||B===void 0?void 0:B.error);if(J){yt(ln,`RPC '${t}' stream ${o} received error:`,J);const z=J.status;let it=function(x){const N=De[x];if(N!==void 0)return S3(N)}(z),I=J.message;it===void 0&&(it=lt.INTERNAL,I="Unknown error status: "+z+" with message "+J.message),R=!0,M.u_(new bt(it,I)),b.close()}else yt(ln,`RPC '${t}' stream ${o} received:`,Z),M.c_(Z)}}),P(m,Bv.STAT_EVENT,k=>{k.stat===sm.PROXY?yt(ln,`RPC '${t}' stream ${o} detected buffering proxy`):k.stat===sm.NOPROXY&&yt(ln,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.a_()},0),M}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(i=>i===t)}}function I1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n){return new Y8(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(t,i,r=1e3,o=1.5,u=6e4){this.xi=t,this.timerId=i,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const i=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,i-r);o>0&&yt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="PersistentStream";class j3{constructor(t,i,r,o,u,h,m,y){this.xi=t,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new P3(t,i)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,i){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():i&&i.code===lt.RESOURCE_EXHAUSTED?(gs(i.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):i&&i.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(i)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),i=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===i&&this.z_(r,o)},r=>{t(()=>{const o=new bt(lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(t,i){const r=this.G_(this.v_);this.stream=this.H_(t,i),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return yt(f_,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return i=>{this.xi.enqueueAndForget(()=>this.v_===t?i():(yt(f_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gb extends j3{constructor(t,i,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,o,h),this.serializer=u}H_(t,i){return this.connection.I_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const i=$8(this.serializer,t),r=function(u){if(!("targetChange"in u))return Dt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Dt.min():h.readTime?Ni(h.readTime):Dt.min()}(t);return this.listener.Y_(i,r)}Z_(t){const i={};i.database=mm(this.serializer),i.addTarget=function(u,h){let m;const y=h.target;if(m=um(y)?{documents:W8(u,y)}:{query:tb(u,y).gt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=C3(u,h.resumeToken);const g=fm(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Dt.min())>0){m.readTime=Cf(u,h.snapshotVersion.toTimestamp());const g=fm(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,t);const r=nb(this.serializer,t);r&&(i.labels=r),this.Q_(i)}X_(t){const i={};i.database=mm(this.serializer),i.removeTarget=t,this.Q_(i)}}class Fb extends j3{constructor(t,i,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,o,h),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,i){return this.connection.I_("Write",t,i)}J_(t){return Wt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Wt(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){Wt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const i=J8(t.writeResults,t.commitTime),r=Ni(t.commitTime);return this.listener.ra(r,i)}ia(){const t={};t.database=mm(this.serializer),this.Q_(t)}ta(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>Z8(this.serializer,r))};this.Q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{}class Yb extends Qb{constructor(t,i,r,o){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new bt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,i,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.zo(t,hm(i,r),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new bt(lt.UNKNOWN,u.toString())})}Yo(t,i,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Yo(t,hm(i,r),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new bt(lt.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Kb{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(gs(i),this.ua=!1):yt("OnlineStateTracker",i)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="RemoteStore";class Xb{constructor(t,i,r,o,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(h=>{r.enqueueAndForget(async()=>{sa(this)&&(yt(Wr,"Restarting streams for network reachability change."),await async function(y){const g=Mt(y);g.da.add(4),await Tu(g),g.Va.set("Unknown"),g.da.delete(4),await Wf(g)}(this))})}),this.Va=new Kb(r,o)}}async function Wf(n){if(sa(n))for(const t of n.Aa)await t(!0)}async function Tu(n){for(const t of n.Aa)await t(!1)}function U3(n,t){const i=Mt(n);i.Ea.has(t.targetId)||(i.Ea.set(t.targetId,t),sg(i)?ig(i):Ao(i).N_()&&ng(i,t))}function eg(n,t){const i=Mt(n),r=Ao(i);i.Ea.delete(t),r.N_()&&z3(i,t),i.Ea.size===0&&(r.N_()?r.k_():sa(i)&&i.Va.set("Unknown"))}function ng(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Dt.min())>0){const i=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ao(n).Z_(t)}function z3(n,t){n.ma.Ke(t),Ao(n).X_(t)}function ig(n){n.ma=new H8({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),Ao(n).start(),n.Va.ca()}function sg(n){return sa(n)&&!Ao(n).O_()&&n.Ea.size>0}function sa(n){return Mt(n).da.size===0}function B3(n){n.ma=void 0}async function $b(n){n.Va.set("Online")}async function Zb(n){n.Ea.forEach((t,i)=>{ng(n,t)})}async function Jb(n,t){B3(n),sg(n)?(n.Va.Pa(t),ig(n)):n.Va.set("Unknown")}async function Wb(n,t,i){if(n.Va.set("Online"),t instanceof w3&&t.state===2&&t.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ea.delete(m),o.ma.removeTarget(m))}(n,t)}catch(r){yt(Wr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await xf(n,r)}else if(t instanceof lf?n.ma.Xe(t):t instanceof A3?n.ma.ot(t):n.ma.nt(t),!i.isEqual(Dt.min()))try{const r=await k3(n.localStore);i.compareTo(r)>=0&&await function(u,h){const m=u.ma.It(h);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const _=u.Ea.get(g);_&&u.Ea.set(g,_.withResumeToken(y.resumeToken,h))}}),m.targetMismatches.forEach((y,g)=>{const _=u.Ea.get(y);if(!_)return;u.Ea.set(y,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),z3(u,y);const b=new $s(_.target,y,g,_.sequenceNumber);ng(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(n,i)}catch(r){yt(Wr,"Failed to raise snapshot:",r),await xf(n,r)}}async function xf(n,t,i){if(!So(t))throw t;n.da.add(1),await Tu(n),n.Va.set("Offline"),i||(i=()=>k3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{yt(Wr,"Retrying IndexedDB access"),await i(),n.da.delete(1),await Wf(n)})}function q3(n,t){return t().catch(i=>xf(n,i,t))}async function th(n){const t=Mt(n),i=or(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:qm;for(;tS(t);)try{const o=await Lb(t.localStore,r);if(o===null){t.Ia.length===0&&i.k_();break}r=o.batchId,eS(t,o)}catch(o){await xf(t,o)}H3(t)&&G3(t)}function tS(n){return sa(n)&&n.Ia.length<10}function eS(n,t){n.Ia.push(t);const i=or(n);i.N_()&&i.ea&&i.ta(t.mutations)}function H3(n){return sa(n)&&!or(n).O_()&&n.Ia.length>0}function G3(n){or(n).start()}async function nS(n){or(n).ia()}async function iS(n){const t=or(n);for(const i of n.Ia)t.ta(i.mutations)}async function sS(n,t,i){const r=n.Ia.shift(),o=Km.from(r,t,i);await q3(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await th(n)}async function rS(n,t){t&&or(n).ea&&await async function(r,o){if(function(h){return B8(h)&&h!==lt.ABORTED}(o.code)){const u=r.Ia.shift();or(r).L_(),await q3(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await th(r)}}(n,t),H3(n)&&G3(n)}async function h_(n,t){const i=Mt(n);i.asyncQueue.verifyOperationInProgress(),yt(Wr,"RemoteStore received new credentials");const r=sa(i);i.da.add(3),await Tu(i),r&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.da.delete(3),await Wf(i)}async function aS(n,t){const i=Mt(n);t?(i.da.delete(2),await Wf(i)):t||(i.da.add(2),await Tu(i),i.Va.set("Unknown"))}function Ao(n){return n.fa||(n.fa=function(i,r,o){const u=Mt(i);return u.oa(),new Gb(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{e_:$b.bind(null,n),n_:Zb.bind(null,n),i_:Jb.bind(null,n),Y_:Wb.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),sg(n)?ig(n):n.Va.set("Unknown")):(await n.fa.stop(),B3(n))})),n.fa}function or(n){return n.ga||(n.ga=function(i,r,o){const u=Mt(i);return u.oa(),new Fb(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:nS.bind(null,n),i_:rS.bind(null,n),na:iS.bind(null,n),ra:sS.bind(null,n)}),n.Aa.push(async t=>{t?(n.ga.L_(),await th(n)):(await n.ga.stop(),n.Ia.length>0&&(yt(Wr,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,i,r,o,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,o,u){const h=Date.now()+r,m=new rg(t,i,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ag(n,t){if(gs("AsyncQueue",`${t}: ${n}`),So(n))return new bt(lt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static emptySet(t){return new oo(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||St.comparator(i.key,r.key):(i,r)=>St.comparator(i.key,r.key),this.keyedMap=jl(),this.sortedSet=new pe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof oo)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new oo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.pa=new pe(St.comparator)}track(t){const i=t.doc.key,r=this.pa.get(i);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(i,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(i):t.type===1&&r.type===2?this.pa=this.pa.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):Ct(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(i,t)}wa(){const t=[];return this.pa.inorderTraversal((i,r)=>{t.push(r)}),t}}class po{constructor(t,i,r,o,u,h,m,y,g){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,i,r,o,u){const h=[];return i.forEach(m=>{h.push({type:0,doc:m})}),new po(t,i,oo.emptySet(i),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==r[o].type||!i[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class lS{constructor(){this.queries=m_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const o=Mt(i),u=o.queries;o.queries=m_(),u.forEach((h,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new bt(lt.ABORTED,"Firestore shutting down"))}}function m_(){return new ia(n=>c3(n),Yf)}async function F3(n,t){const i=Mt(n);let r=3;const o=t.query;let u=i.queries.get(o);u?!u.Da()&&t.va()&&(r=2):(u=new oS,r=t.va()?0:1);try{switch(r){case 0:u.ba=await i.onListen(o,!0);break;case 1:u.ba=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(h){const m=ag(h,`Initialization of query '${eo(t.query)}' failed`);return void t.onError(m)}i.queries.set(o,u),u.Sa.push(t),t.Fa(i.onlineState),u.ba&&t.Ma(u.ba)&&og(i)}async function Q3(n,t){const i=Mt(n),r=t.query;let o=3;const u=i.queries.get(r);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=t.va()?0:1:!u.Da()&&t.va()&&(o=2))}switch(o){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function uS(n,t){const i=Mt(n);let r=!1;for(const o of t){const u=o.query,h=i.queries.get(u);if(h){for(const m of h.Sa)m.Ma(o)&&(r=!0);h.ba=o}}r&&og(i)}function cS(n,t,i){const r=Mt(n),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(i);r.queries.delete(t)}function og(n){n.Ca.forEach(t=>{t.next()})}var ym,g_;(g_=ym||(ym={})).xa="default",g_.Cache="cache";class Y3{constructor(t,i,r){this.query=t,this.Oa=i,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new po(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Na?this.La(t)&&(this.Oa.next(t),i=!0):this.ka(t,this.onlineState)&&(this.qa(t),i=!0),this.Ba=t,i}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let i=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),i=!0),i}ka(t,i){if(!t.fromCache||!this.va())return!0;const r=i!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}La(t){if(t.docChanges.length>0)return!0;const i=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}qa(t){t=po.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(t){this.key=t}}class X3{constructor(t){this.key=t}}class fS{constructor(t,i){this.query=t,this.Ha=i,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Bt(),this.mutatedKeys=Bt(),this.Za=f3(t),this.Xa=new oo(this.Za)}get eu(){return this.Ha}tu(t,i){const r=i?i.nu:new d_,o=i?i.Xa:this.Xa;let u=i?i.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((_,b)=>{const T=o.get(_),R=Kf(this.query,b)?b:null,M=!!T&&this.mutatedKeys.has(T.key),P=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;T&&R?T.data.isEqual(R.data)?M!==P&&(r.track({type:3,doc:R}),k=!0):this.ru(T,R)||(r.track({type:2,doc:R}),k=!0,(y&&this.Za(R,y)>0||g&&this.Za(R,g)<0)&&(m=!0)):!T&&R?(r.track({type:0,doc:R}),k=!0):T&&!R&&(r.track({type:1,doc:T}),k=!0,(y||g)&&(m=!0)),k&&(R?(h=h.add(R),u=P?u.add(_):u.delete(_)):(h=h.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),u=u.delete(_.key),r.track({type:1,doc:_})}return{Xa:h,nu:r,Cs:m,mutatedKeys:u}}ru(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,o){const u=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const h=t.nu.wa();h.sort((_,b)=>function(R,M){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Vt:k})}};return P(R)-P(M)}(_.type,b.type)||this.Za(_.doc,b.doc)),this.iu(r),o=o!=null&&o;const m=i&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,g=y!==this.Ja;return this.Ja=y,h.length!==0||g?{snapshot:new po(this.query,t.Xa,u,h,t.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new d_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Bt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const i=[];return t.forEach(r=>{this.Ya.has(r)||i.push(new X3(r))}),this.Ya.forEach(r=>{t.has(r)||i.push(new K3(r))}),i}au(t){this.Ha=t.$s,this.Ya=Bt();const i=this.tu(t.documents);return this.applyChanges(i,!0)}uu(){return po.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const lg="SyncEngine";class hS{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class dS{constructor(t){this.key=t,this.cu=!1}}class mS{constructor(t,i,r,o,u,h){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new ia(m=>c3(m),Yf),this.Pu=new Map,this.Tu=new Set,this.Iu=new pe(St.comparator),this.Eu=new Map,this.du=new Zm,this.Au={},this.Ru=new Map,this.Vu=go.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function gS(n,t,i=!0){const r=e4(n);let o;const u=r.hu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await $3(r,t,i,!0),o}async function pS(n,t){const i=e4(n);await $3(i,t,!0,!1)}async function $3(n,t,i,r){const o=await kb(n.localStore,Vi(t)),u=o.targetId,h=n.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await yS(n,t,u,h==="current",o.resumeToken)),n.isPrimaryClient&&i&&U3(n.remoteStore,o),m}async function yS(n,t,i,r,o){n.fu=(b,T,R)=>async function(P,k,B,Z){let H=k.view.tu(B);H.Cs&&(H=await o_(P.localStore,k.query,!1).then(({documents:I})=>k.view.tu(I,H)));const J=Z&&Z.targetChanges.get(k.targetId),z=Z&&Z.targetMismatches.get(k.targetId)!=null,it=k.view.applyChanges(H,P.isPrimaryClient,J,z);return y_(P,k.targetId,it.ou),it.snapshot}(n,b,T,R);const u=await o_(n.localStore,t,!0),h=new fS(t,u.$s),m=h.tu(u.documents),y=Eu.createSynthesizedTargetChangeForCurrentChange(i,r&&n.onlineState!=="Offline",o),g=h.applyChanges(m,n.isPrimaryClient,y);y_(n,i,g.ou);const _=new hS(t,i,h);return n.hu.set(t,_),n.Pu.has(i)?n.Pu.get(i).push(t):n.Pu.set(i,[t]),g.snapshot}async function _S(n,t,i){const r=Mt(n),o=r.hu.get(t),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(h=>!Yf(h,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await gm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),i&&eg(r.remoteStore,o.targetId),_m(r,o.targetId)}).catch(bo)):(_m(r,o.targetId),await gm(r.localStore,o.targetId,!0))}async function vS(n,t){const i=Mt(n),r=i.hu.get(t),o=i.Pu.get(r.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),eg(i.remoteStore,r.targetId))}async function ES(n,t,i){const r=RS(n);try{const o=await function(h,m){const y=Mt(h),g=ze.now(),_=m.reduce((R,M)=>R.add(M.key),Bt());let b,T;return y.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=ps(),P=Bt();return y.Bs.getEntries(R,_).next(k=>{M=k,M.forEach((B,Z)=>{Z.isValidDocument()||(P=P.add(B))})}).next(()=>y.localDocuments.getOverlayedDocuments(R,M)).next(k=>{b=k;const B=[];for(const Z of m){const H=k8(Z,b.get(Z.key).overlayedDocument);H!=null&&B.push(new cr(Z.key,H,i3(H.value.mapValue),Oi.exists(!0)))}return y.mutationQueue.addMutationBatch(R,g,B,m)}).next(k=>{T=k;const B=k.applyToLocalDocumentSet(b,P);return y.documentOverlayCache.saveOverlays(R,k.batchId,B)})}).then(()=>({batchId:T.batchId,changes:d3(b)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(h,m,y){let g=h.Au[h.currentUser.toKey()];g||(g=new pe(kt)),g=g.insert(m,y),h.Au[h.currentUser.toKey()]=g}(r,o.batchId,i),await bu(r,o.changes),await th(r.remoteStore)}catch(o){const u=ag(o,"Failed to persist write");i.reject(u)}}async function Z3(n,t){const i=Mt(n);try{const r=await Ob(i.localStore,t);t.targetChanges.forEach((o,u)=>{const h=i.Eu.get(u);h&&(Wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?Wt(h.cu,14607):o.removedDocuments.size>0&&(Wt(h.cu,42227),h.cu=!1))}),await bu(i,r,t)}catch(r){await bo(r)}}function p_(n,t,i){const r=Mt(n);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const o=[];r.hu.forEach((u,h)=>{const m=h.view.Fa(t);m.snapshot&&o.push(m.snapshot)}),function(h,m){const y=Mt(h);y.onlineState=m;let g=!1;y.queries.forEach((_,b)=>{for(const T of b.Sa)T.Fa(m)&&(g=!0)}),g&&og(y)}(r.eventManager,t),o.length&&r.lu.Y_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function TS(n,t,i){const r=Mt(n);r.sharedClientState.updateQueryState(t,"rejected",i);const o=r.Eu.get(t),u=o&&o.key;if(u){let h=new pe(St.comparator);h=h.insert(u,cn.newNoDocument(u,Dt.min()));const m=Bt().add(u),y=new Zf(Dt.min(),new Map,new pe(kt),h,m);await Z3(r,y),r.Iu=r.Iu.remove(u),r.Eu.delete(t),ug(r)}else await gm(r.localStore,t,!1).then(()=>_m(r,t,i)).catch(bo)}async function bS(n,t){const i=Mt(n),r=t.batch.batchId;try{const o=await Vb(i.localStore,t);W3(i,r,null),J3(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await bu(i,o)}catch(o){await bo(o)}}async function SS(n,t,i){const r=Mt(n);try{const o=await function(h,m){const y=Mt(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return y.mutationQueue.lookupMutationBatch(g,m).next(b=>(Wt(b!==null,37113),_=b.keys(),y.mutationQueue.removeMutationBatch(g,b))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,_,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>y.localDocuments.getDocuments(g,_))})}(r.localStore,t);W3(r,t,i),J3(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await bu(r,o)}catch(o){await bo(o)}}function J3(n,t){(n.Ru.get(t)||[]).forEach(i=>{i.resolve()}),n.Ru.delete(t)}function W3(n,t,i){const r=Mt(n);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(i?u.reject(i):u.resolve(),o=o.remove(t)),r.Au[r.currentUser.toKey()]=o}}function _m(n,t,i=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Pu.get(t))n.hu.delete(r),i&&n.lu.gu(r,i);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(r=>{n.du.containsKey(r)||t4(n,r)})}function t4(n,t){n.Tu.delete(t.path.canonicalString());const i=n.Iu.get(t);i!==null&&(eg(n.remoteStore,i),n.Iu=n.Iu.remove(t),n.Eu.delete(i),ug(n))}function y_(n,t,i){for(const r of i)r instanceof K3?(n.du.addReference(r.key,t),AS(n,r)):r instanceof X3?(yt(lg,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,t),n.du.containsKey(r.key)||t4(n,r.key)):Ct(19791,{pu:r})}function AS(n,t){const i=t.key,r=i.path.canonicalString();n.Iu.get(i)||n.Tu.has(r)||(yt(lg,"New document in limbo: "+i),n.Tu.add(r),ug(n))}function ug(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const i=new St(de.fromString(t)),r=n.Vu.next();n.Eu.set(r,new dS(i)),n.Iu=n.Iu.insert(i,r),U3(n.remoteStore,new $s(Vi(Qf(i.path)),r,"TargetPurposeLimboResolution",qf.le))}}async function bu(n,t,i){const r=Mt(n),o=[],u=[],h=[];r.hu.isEmpty()||(r.hu.forEach((m,y)=>{h.push(r.fu(y,t,i).then(g=>{var _;if((g||i)&&r.isPrimaryClient){const b=g?!g.fromCache:(_=i==null?void 0:i.targetChanges.get(y.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Wm.Rs(y.targetId,g);u.push(b)}}))}),await Promise.all(h),r.lu.Y_(o),await async function(y,g){const _=Mt(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>at.forEach(g,T=>at.forEach(T.ds,R=>_.persistence.referenceDelegate.addReference(b,T.targetId,R)).next(()=>at.forEach(T.As,R=>_.persistence.referenceDelegate.removeReference(b,T.targetId,R)))))}catch(b){if(!So(b))throw b;yt(tg,"Failed to update sequence numbers: "+b)}for(const b of g){const T=b.targetId;if(!b.fromCache){const R=_.xs.get(T),M=R.snapshotVersion,P=R.withLastLimboFreeSnapshotVersion(M);_.xs=_.xs.insert(T,P)}}}(r.localStore,u))}async function wS(n,t){const i=Mt(n);if(!i.currentUser.isEqual(t)){yt(lg,"User change. New user:",t.toKey());const r=await L3(i.localStore,t);i.currentUser=t,function(u,h){u.Ru.forEach(m=>{m.forEach(y=>{y.reject(new bt(lt.CANCELLED,h))})}),u.Ru.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await bu(i,r.ks)}}function CS(n,t){const i=Mt(n),r=i.Eu.get(t);if(r&&r.cu)return Bt().add(r.key);{let o=Bt();const u=i.Pu.get(t);if(!u)return o;for(const h of u){const m=i.hu.get(h);o=o.unionWith(m.view.eu)}return o}}function e4(n){const t=Mt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Z3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=CS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TS.bind(null,t),t.lu.Y_=uS.bind(null,t.eventManager),t.lu.gu=cS.bind(null,t.eventManager),t}function RS(n){const t=Mt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=SS.bind(null,t),t}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,i){return null}Cu(t,i){return null}Du(t){return Mb(this.persistence,new xb,t.initialUser,this.serializer)}Su(t){return new N3(Jm.fi,this.serializer)}bu(t){return new jb}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class xS extends If{constructor(t){super(),this.cacheSizeBytes=t}vu(t,i){Wt(this.persistence.referenceDelegate instanceof Rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new db(r,t.asyncQueue,i)}Su(t){const i=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new N3(r=>Rf.fi(r,i),this.serializer)}}class vm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wS.bind(null,this.syncEngine),await aS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new lS}()}createDatastore(t){const i=Jf(t.databaseInfo.databaseId),r=function(u){return new Hb(u)}(t.databaseInfo);return function(u,h,m,y){return new Yb(u,h,m,y)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,u,h,m){return new Xb(r,o,u,h,m)}(this.localStore,this.datastore,t.asyncQueue,i=>p_(this.syncEngine,i,0),function(){return c_.C()?new c_:new Ub}())}createSyncEngine(t,i){return function(o,u,h,m,y,g,_){const b=new mS(o,u,h,m,y,g);return _&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(o){const u=Mt(o);yt(Wr,"RemoteStore shutting down."),u.da.add(5),await Tu(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}vm.provider={build:()=>new vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):gs("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="FirestoreClient";class IS{constructor(t,i,r,o,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=Yv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async h=>{yt(lr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(yt(lr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=ag(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function D1(n,t){n.asyncQueue.verifyOperationInProgress(),yt(lr,"Initializing OfflineComponentProvider");const i=n.configuration;await t.initialize(i);let r=i.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await L3(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function __(n,t){n.asyncQueue.verifyOperationInProgress();const i=await DS(n);yt(lr,"Initializing OnlineComponentProvider"),await t.initialize(i,n.configuration),n.setCredentialChangeListener(r=>h_(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>h_(t.remoteStore,o)),n._onlineComponents=t}async function DS(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){yt(lr,"Using user provided OfflineComponentProvider");try{await D1(n,n._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(o){return o.name==="FirebaseError"?o.code===lt.FAILED_PRECONDITION||o.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;co("Error using user provided cache. Falling back to memory cache: "+i),await D1(n,new If)}}else yt(lr,"Using default OfflineComponentProvider"),await D1(n,new xS(void 0));return n._offlineComponents}async function i4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(yt(lr,"Using user provided OnlineComponentProvider"),await __(n,n._uninitializedComponentsProvider._online)):(yt(lr,"Using default OnlineComponentProvider"),await __(n,new vm))),n._onlineComponents}function MS(n){return i4(n).then(t=>t.syncEngine)}async function Em(n){const t=await i4(n),i=t.eventManager;return i.onListen=gS.bind(null,t.syncEngine),i.onUnlisten=_S.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=pS.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=vS.bind(null,t.syncEngine),i}function VS(n,t,i={}){const r=new er;return n.asyncQueue.enqueueAndForget(async()=>function(u,h,m,y,g){const _=new n4({next:T=>{_.xu(),h.enqueueAndForget(()=>Q3(u,b));const R=T.docs.has(m);!R&&T.fromCache?g.reject(new bt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&y&&y.source==="server"?g.reject(new bt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new Y3(Qf(m.path),_,{includeMetadataChanges:!0,Qa:!0});return F3(u,b)}(await Em(n),n.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n,t,i){if(!i)throw new bt(lt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function OS(n,t,i,r){if(t===!0&&r===!0)throw new bt(lt.INVALID_ARGUMENT,`${n} and ${i} cannot be used together.`)}function E_(n){if(!St.isDocumentKey(n))throw new bt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function T_(n){if(St.isDocumentKey(n))throw new bt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Ct(12329,{type:typeof n})}function hs(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new bt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=cg(n);throw new bt(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="firestore.googleapis.com",b_=!0;class S_{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a4,this.ssl=b_}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:b_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=O3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<fb)throw new bt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}OS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s4((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new bt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new bt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new bt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class eh{constructor(t,i,r,o){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new bt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B7;switch(r.type){case"firstParty":return new F7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=v_.get(i);r&&(yt("ComponentProvider","Removing Datastore"),v_.delete(i),r.terminate())}(this),Promise.resolve()}}function NS(n,t,i,r={}){var o;n=hs(n,eh);const u=Um(t),h=n._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),y=`${t}:${i}`;u&&(mT(`https://${y}`),_T("Firestore",!0)),h.host!==a4&&h.host!==y&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},h),{host:y,ssl:u,emulatorOptions:r});if(!pf(g,m)&&(n._setSettings(g),r.mockUserToken)){let _,b;if(typeof r.mockUserToken=="string")_=r.mockUserToken,b=un.MOCK_USER;else{_=gT(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new bt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new un(T)}n._authCredentials=new q7(new Fv(_,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new nh(this.firestore,t,this._query)}}class An{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new An(this.firestore,t,this._key)}}class nr extends nh{constructor(t,i,r){super(t,i,Qf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new An(this.firestore,null,new St(t))}withConverter(t){return new nr(this.firestore,t,this._path)}}function LS(n,t,...i){if(n=ds(n),r4("collection","path",t),n instanceof eh){const r=de.fromString(t,...i);return T_(r),new nr(n,null,r)}{if(!(n instanceof An||n instanceof nr))throw new bt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(de.fromString(t,...i));return T_(r),new nr(n.firestore,null,r)}}function ih(n,t,...i){if(n=ds(n),arguments.length===1&&(t=Yv.newId()),r4("doc","path",t),n instanceof eh){const r=de.fromString(t,...i);return E_(r),new An(n,null,new St(r))}{if(!(n instanceof An||n instanceof nr))throw new bt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(de.fromString(t,...i));return E_(r),new An(n.firestore,n instanceof nr?n.converter:null,new St(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="AsyncQueue";class w_{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new P3(this,"async_queue_retry"),this.rc=()=>{const r=I1();r&&yt(A_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const i=I1();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const i=I1();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const i=new er;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!So(t))throw t;yt(A_,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const i=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,gs("INTERNAL UNHANDLED ERROR: ",C_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=i,i}enqueueAfterDelay(t,i,r){this.oc(),this.nc.indexOf(t)>-1&&(i=0);const o=rg.createAndSchedule(this,t,i,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Ct(47125,{cc:C_(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const i of this.Zu)if(i.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.Zu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const i=this.Zu.indexOf(t);this.Zu.splice(i,1)}}function C_(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n){return function(i,r){if(typeof i!="object"||i===null)return!1;const o=i;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(n,["next","error","complete"])}class yo extends eh{constructor(t,i,r,o){super(t,i,r,o),this.type="firestore",this._queue=new w_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new w_(t),this._firestoreClient=void 0,await t}}}function kS(n,t){const i=typeof n=="object"?n:x7(),r=typeof n=="string"?n:Ef,o=S7(i,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=hT("firestore");u&&NS(o,...u)}return o}function fg(n){if(n._terminated)throw new bt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PS(n),n._firestoreClient}function PS(n){var t,i,r;const o=n._freezeSettings(),u=function(m,y,g,_){return new a8(m,y,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,s4(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new IS(n._authCredentials,n._appCheckCredentials,n._queue,u,n._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _o(sn.fromBase64String(t))}catch(i){throw new bt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new _o(sn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new bt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new bt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new bt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return kt(this._lat,t._lat)||kt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=/^__.*__$/;class US{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new cr(t,this.data,this.fieldMask,i,this.fieldTransforms):new vu(t,this.data,i,this.fieldTransforms)}}class o4{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new cr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function l4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ic:n})}}class gg{constructor(t,i,r,o,u,h){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new gg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Vc(t),o}mc(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Df(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(l4(this.Ic)&&jS.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class zS{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Jf(t)}bc(t,i,r,o=!1){return new gg({Ic:t,methodName:i,wc:r,path:nn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u4(n){const t=n._freezeSettings(),i=Jf(n._databaseId);return new zS(n._databaseId,!!t.ignoreUndefinedProperties,i)}function BS(n,t,i,r,o,u={}){const h=n.bc(u.merge||u.mergeFields?2:0,t,i,o);pg("Data must be an object, but it was:",h,r);const m=c4(r,h);let y,g;if(u.merge)y=new Ln(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const _=[];for(const b of u.mergeFields){const T=Tm(t,b,i);if(!h.contains(T))throw new bt(lt.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);h4(_,T)||_.push(T)}y=new Ln(_),g=h.fieldTransforms.filter(b=>y.covers(b.field))}else y=null,g=h.fieldTransforms;return new US(new Sn(m),y,g)}class rh extends hg{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rh}}function qS(n,t,i,r){const o=n.bc(1,t,i);pg("Data must be an object, but it was:",o,r);const u=[],h=Sn.empty();ur(r,(y,g)=>{const _=yg(t,y,i);g=ds(g);const b=o.mc(_);if(g instanceof rh)u.push(_);else{const T=ah(g,b);T!=null&&(u.push(_),h.set(_,T))}});const m=new Ln(u);return new o4(h,m,o.fieldTransforms)}function HS(n,t,i,r,o,u){const h=n.bc(1,t,i),m=[Tm(t,r,i)],y=[o];if(u.length%2!=0)throw new bt(lt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(Tm(t,u[T])),y.push(u[T+1]);const g=[],_=Sn.empty();for(let T=m.length-1;T>=0;--T)if(!h4(g,m[T])){const R=m[T];let M=y[T];M=ds(M);const P=h.mc(R);if(M instanceof rh)g.push(R);else{const k=ah(M,P);k!=null&&(g.push(R),_.set(R,k))}}const b=new Ln(g);return new o4(_,b,h.fieldTransforms)}function ah(n,t){if(f4(n=ds(n)))return pg("Unsupported field value:",t,n),c4(n,t);if(n instanceof hg)return function(r,o){if(!l4(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,o){const u=[];let h=0;for(const m of r){let y=ah(m,o.fc(h));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),h++}return{arrayValue:{values:u}}}(n,t)}return function(r,o){if((r=ds(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return D8(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ze.fromDate(r);return{timestampValue:Cf(o.serializer,u)}}if(r instanceof ze){const u=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cf(o.serializer,u)}}if(r instanceof dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _o)return{bytesValue:C3(o.serializer,r._byteString)};if(r instanceof An){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:$m(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof mg)return function(h,m){return{mapValue:{fields:{[e3]:{stringValue:n3},[Tf]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Ym(m.serializer,g)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${cg(r)}`)}(n,t)}function c4(n,t){const i={};return Xv(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ur(n,(r,o)=>{const u=ah(o,t.Ac(r));u!=null&&(i[r]=u)}),{mapValue:{fields:i}}}function f4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof dg||n instanceof _o||n instanceof An||n instanceof hg||n instanceof mg)}function pg(n,t,i){if(!f4(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const r=cg(i);throw r==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+r)}}function Tm(n,t,i){if((t=ds(t))instanceof sh)return t._internalPath;if(typeof t=="string")return yg(n,t);throw Df("Field path arguments must be of type string or ",n,!1,void 0,i)}const GS=new RegExp("[~\\*/\\[\\]]");function yg(n,t,i){if(t.search(GS)>=0)throw Df(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,i);try{return new sh(...t.split("."))._internalPath}catch{throw Df(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,i)}}function Df(n,t,i,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||h)&&(y+=" (found",u&&(y+=` in field ${r}`),h&&(y+=` in document ${o}`),y+=")"),new bt(lt.INVALID_ARGUMENT,m+n+y)}function h4(n,t){return n.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t,i,r,o,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new FS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(m4("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class FS extends d4{data(){return super.data()}}function m4(n,t){return typeof t=="string"?yg(n,t):t instanceof sh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new bt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class YS{convertValue(t,i="none"){switch(ar(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Se(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(rr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Ct(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return ur(t,(o,u)=>{r[o]=this.convertValue(u,i)}),r}convertVectorValue(t){var i,r,o;const u=(o=(r=(i=t.fields)===null||i===void 0?void 0:i[Tf].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>Se(h.doubleValue));return new mg(u)}convertGeoPoint(t){return new dg(Se(t.latitude),Se(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Gf(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(lu(t));default:return null}}convertTimestamp(t){const i=sr(t);return new ze(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=de.fromString(t);Wt(V3(r),9688,{name:t});const o=new uu(r.get(1),r.get(3)),u=new St(r.popFirst(5));return o.isEqual(i)||gs(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n,t,i){let r;return r=n?n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class g4 extends d4{constructor(t,i,r,o,u,h){super(t,i,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(m4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}}class uf extends g4{data(t={}){return super.data(t)}}class XS{constructor(t,i,r,o){this._firestore=t,this._userDataWriter=i,this._snapshot=o,this.metadata=new zl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new uf(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new bt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const y=new uf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new uf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),_=h.indexOf(m.doc.key)),{type:$S(m.type),doc:y,oldIndex:g,newIndex:_}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function $S(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n){n=hs(n,An);const t=hs(n.firestore,yo);return VS(fg(t),n._key).then(i=>_4(t,n,i))}class p4 extends YS{constructor(t){super(),this.firestore=t}convertBytes(t){return new _o(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new An(this.firestore,null,i)}}function JS(n,t,i,...r){n=hs(n,An);const o=hs(n.firestore,yo),u=u4(o);let h;return h=typeof(t=ds(t))=="string"||t instanceof sh?HS(u,"updateDoc",n._key,t,i,r):qS(u,"updateDoc",n._key,t),y4(o,[h.toMutation(n._key,Oi.exists(!0))])}function WS(n,t){const i=hs(n.firestore,yo),r=ih(n),o=KS(n.converter,t);return y4(i,[BS(u4(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Oi.exists(!1))]).then(()=>r)}function tA(n,...t){var i,r,o;n=ds(n);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof t[h]!="object"||R_(t[h])||(u=t[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(R_(t[h])){const b=t[h];t[h]=(i=b.next)===null||i===void 0?void 0:i.bind(b),t[h+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),t[h+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let y,g,_;if(n instanceof An)g=hs(n.firestore,yo),_=Qf(n._key.path),y={next:b=>{t[h]&&t[h](_4(g,n,b))},error:t[h+1],complete:t[h+2]};else{const b=hs(n,nh);g=hs(b.firestore,yo),_=b._query;const T=new p4(g);y={next:R=>{t[h]&&t[h](new XS(g,T,b,R))},error:t[h+1],complete:t[h+2]},QS(n._query)}return function(T,R,M,P){const k=new n4(P),B=new Y3(R,k,M);return T.asyncQueue.enqueueAndForget(async()=>F3(await Em(T),B)),()=>{k.xu(),T.asyncQueue.enqueueAndForget(async()=>Q3(await Em(T),B))}}(fg(g),_,m,y)}function y4(n,t){return function(r,o){const u=new er;return r.asyncQueue.enqueueAndForget(async()=>ES(await MS(r),o,u)),u.promise}(fg(n),t)}function _4(n,t,i){const r=i.docs.get(t._key),o=new p4(n);return new g4(n,o,t._key,r,new zl(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(o){To=o})(R7),_f(new ru("firestore",(r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new yo(new H7(r.getProvider("auth-internal")),new Q7(h,r.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new bt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(g.options.projectId,_)}(h,o),h);return u=Object.assign({useFetchStreams:i},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ao(My,Vy,t),ao(My,Vy,"esm2017")})();const eA={apiKey:"AIzaSyA1YHZuK7xQzrGf2sVPo8Qax__FqLaFg_g",authDomain:"boop-chat.firebaseapp.com",projectId:"boop-chat",storageBucket:"boop-chat.firebasestorage.app",messagingSenderId:"86390385381",appId:"1:86390385381:web:899e240ed5dedab2a8c20c",measurementId:"G-R49YGVYMFQ"},nA=Lv(eA),oh=kS(nA),iA=async n=>(await WS(LS(oh,"sessions"),n)).id,sA=async n=>{const t=await ZS(ih(oh,"sessions",n));return t.exists()?(console.log("The data has been found at Firestore!"),t.data()):(console.log("The data doesn't exist at Firestore!"),null)},rA=async(n,t)=>{JS(ih(oh,"sessions",n),t)},aA=async(n,t,i)=>{const r=ih(oh,"sessions",n),o=tA(r,async u=>{var m;if(!u.exists())return;const h=u.data();h.receiverDescription&&((m=h.receiverCandidates)==null?void 0:m.length)>0&&(console.log("Receiver info available:",h),i.current=h.receiverName,t(h),o())});return o},x_=async(n,t,i,r,o,u,h,m,y)=>{console.log(t.current),t.current.onicecandidate=_=>{_.candidate?(console.log("Ice candidate found! Candidate = ",_.candidate),console.log(u.current),u.current.push(_.candidate.toJSON())):(console.log("The ice gathering state might have been completed by this time!"),console.log("State = ",t.current.iceGatheringState))},t.current.onicecandidateerror=_=>{console.warn("ICE candidate error:",_.errorCode,_.port,_.url)};const g=t.current.getConfiguration();if(console.log("ICE servers configured on this PC:",g.iceServers),n==="sender"){t.current.addTransceiver("video",{direction:"sendrecv"}),t.current.addTransceiver("audio",{direction:"sendrecv"}),i.current=t.current.createDataChannel("chat"),r.current=t.current.createDataChannel("image"),o.current=t.current.createDataChannel("video"),i.current.onopen=()=>{console.log("The data channel has been established!"),h(!0)},r.current.onopen=()=>{console.log("The image channel has been established!")},o.current.onopen=()=>{console.log("The video channel has been established!")};let _=await t.current.createOffer();console.log("The offer has been created!"),await t.current.setLocalDescription(_),console.log("The local description has been added!")}else{console.log(t.current);let _=await sA(y);if(!_)return null;m.current=_.senderName,await oA(t,_),console.log("The state of the peer connection = ",t.current.iceGatheringState)}console.log("The initial setup of the connection has been established.")},oA=async(n,t)=>{console.log(t.senderDescription),await n.current.setRemoteDescription(t.senderDescription),console.log("The remote description has been added!"),n.current.getTransceivers().forEach(o=>{o.direction="sendrecv"});let r=await n.current.createAnswer();console.log("The answer has been created!"),await n.current.setLocalDescription(r),console.log("The local description has been added!");for(const o of t.senderCandidates)try{await n.current.addIceCandidate(o)}catch(u){console.error("Error adding ICE candidate:",u)}};async function lA(n,t,i,r){console.log("Starting the createLink function! At the beginning of the function, the state = ",n.iceGatheringState),console.log("The iceCandidate object looks like this: ",t.current);let o=await iA({senderName:i,senderDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},senderCandidates:t.current,receiverName:"",receiverDescription:"",receiverCandidates:""});return console.log("The session has been added to Firebase by the sender! Now, waiting for the receiver!"),aA(o,async u=>{await n.current.setRemoteDescription(new RTCSessionDescription(u.receiverDescription));for(const h of u.receiverCandidates)await n.current.addIceCandidate(new RTCIceCandidate(h))},r),o}async function uA(n,t,i,r){return console.log("After the waiting, the state = ",n.current.iceGatheringState),await rA(r,{receiverName:i,receiverDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},receiverCandidates:t.current}),"success"}const cA=new URLSearchParams(window.location.search),Qs=cA.get("link"),fA=()=>{const{peerConnection:n,iceCandidates:t,dataChannel:i,imageChannel:r,videoChannel:o,peerName:u,setConnected:h}=K.useContext(rn),{showNotification:m}=_u(),[y,g]=K.useState(!1),_=K.useRef(null);function b(R){R.preventDefault(),navigator.clipboard.writeText(R.target.elements.link.value),m("The link has been copied!")}const T=async R=>{if(R.preventDefault(),g(!0),Qs){let M=await uA(n,t,_.current.value,Qs);console.log(M),M?M=="success"&&(n.current.ondatachannel=P=>{P.channel.label==="chat"&&(i.current=P.channel,console.log("The data channel has been established!"),h(!0)),P.channel.label==="image"&&(r.current=P.channel,console.log("The image channel has been established!")),P.channel.label==="video"&&(o.current=P.channel,console.log("The video channel has been established!"))}):alert("The link you gave doesn't exist.")}else{let M=await lA(n,t,_.current.value,u);_.current.value=`https://www.mukesharyal.com.np/boop?link=${M}`,_.current.disabled=!0,navigator.clipboard.writeText(_.current.value),m("The link has been copied!")}};return K.useEffect(()=>{x_(Qs?"receiver":"sender",n,i,r,o,t,h,u,Qs)},[]),C.jsxs(C.Fragment,{children:[C.jsx($E,{}),C.jsx("main",{className:Ll.mainContainer,children:C.jsx("section",{className:Ll.inputCard,children:y?C.jsxs(C.Fragment,{children:[C.jsx("div",{className:Ll.loaderWrapper,children:C.jsx("div",{className:Ll.loader})}),C.jsx("h1",{children:Qs?"Joining the chat":"Waiting for other person to join"}),!Qs&&C.jsxs("form",{onSubmit:b,children:[C.jsx("input",{autoFocus:!0,spellCheck:!1,autoComplete:"off",name:"link",ref:_,title:"Copy this link",className:Ll.linkInput}),C.jsx("br",{}),C.jsx("button",{name:"copyLinkButton",children:"Copy Link"})]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("h1",{children:["Welcome to Boop.",C.jsx("br",{}),"Let's Get Started!"]}),C.jsxs("form",{onSubmit:T,children:[C.jsx("input",{name:"name",required:!0,minLength:2,maxLength:20,autoComplete:"off",type:"text",spellCheck:!1,placeholder:"Your Name",title:"Enter your name",id:"name",ref:_}),C.jsx("br",{}),Qs?C.jsx("button",{type:"submit",children:"Join Chat"}):C.jsx("button",{type:"submit",children:"Create Link"})]})]})})})]})},hA="_chatContainer_us48c_1",dA={chatContainer:hA},mA="_actionList_1aynh_1",gA={actionList:mA};function pA(){const n=Ve.c(25);console.log("Actions List rendered!");const{dataChannel:t}=K.useContext(rn),{selectedMessage:i}=K.useContext(ei),r=Pt(_A),o=Pt(yA),{showNotification:u}=_u();let h;n[0]!==i.current.content||n[1]!==i.current.type||n[2]!==u?(h=()=>{i.current.type==="text"?(navigator.clipboard.writeText(i.current.content),u("The message has been copied!")):u("This message cannot be copied!")},n[0]=i.current.content,n[1]=i.current.type,n[2]=u,n[3]=h):h=n[3];const m=h;let y;n[4]!==i.current||n[5]!==r?(y=()=>{r(i.current)},n[4]=i.current,n[5]=r,n[6]=y):y=n[6];const g=y;let _;n[7]!==t||n[8]!==o||n[9]!==i.current.receivedId||n[10]!==i.current.sentId?(_=()=>{if(i.current.sentId===null)o(i.current.sentId,i.current.receivedId);else{const H={type:"delete",sentId:i.current.sentId};t.current.send(JSON.stringify(H))}},n[7]=t,n[8]=o,n[9]=i.current.receivedId,n[10]=i.current.sentId,n[11]=_):_=n[11];const b=_;let T;n[12]===Symbol.for("react.memo_cache_sentinel")?(T=C.jsxs("svg",{fill:"#000000",width:30,height:30,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"reply"}),C.jsx("path",{d:"M3.488 15.136q0 0.96 0.8 1.472l10.72 7.136q0.416 0.288 0.896 0.32t0.928-0.224 0.704-0.672 0.256-0.896v-3.584q3.456 0 6.208 1.984t3.872 5.152q0.64-1.792 0.64-3.552 0-2.912-1.44-5.376t-3.904-3.904-5.376-1.44v-3.584q0-0.48-0.256-0.896t-0.704-0.672-0.928-0.224-0.896 0.32l-10.72 7.136q-0.8 0.512-0.8 1.504z"})]}),n[12]=T):T=n[12];let R;n[13]!==g?(R=C.jsxs("li",{onClick:g,children:[T,"Reply"]}),n[13]=g,n[14]=R):R=n[14];let M;n[15]===Symbol.for("react.memo_cache_sentinel")?(M=C.jsxs("svg",{width:30,height:30,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z",fill:"#292D32"}),C.jsx("path",{d:"M17.0998 2H12.8998C9.81668 2 8.37074 3.09409 8.06951 5.73901C8.00649 6.29235 8.46476 6.75 9.02167 6.75H11.0998C15.2998 6.75 17.2498 8.7 17.2498 12.9V14.9781C17.2498 15.535 17.7074 15.9933 18.2608 15.9303C20.9057 15.629 21.9998 14.1831 21.9998 11.1V6.9C21.9998 3.4 20.5998 2 17.0998 2Z",fill:"#292D32"})]}),n[15]=M):M=n[15];let P;n[16]!==m?(P=C.jsxs("li",{onClick:m,children:[M,"Copy"]}),n[16]=m,n[17]=P):P=n[17];let k;n[18]===Symbol.for("react.memo_cache_sentinel")?(k=C.jsx("svg",{width:30,height:30,viewBox:"-0.5 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"out",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:C.jsx("path",{d:"M4.91666667,14.8888889 C4.91666667,15.3571429 5.60416667,16 6.0625,16 L12.9375,16 C13.3958333,16 14.0833333,15.3571429 14.0833333,14.8888889 L14.0833333,6 L4.91666667,6 L4.91666667,14.8888889 L4.91666667,14.8888889 L4.91666667,14.8888889 Z M15,3.46500003 L12.5555556,3.46500003 L11.3333333,2 L7.66666667,2 L6.44444444,3.46500003 L4,3.46500003 L4,4.93000007 L15,4.93000007 L15,3.46500003 L15,3.46500003 L15,3.46500003 Z",id:"path",fill:"#000000","sketch:type":"MSShapeGroup"})})}),n[18]=k):k=n[18];let B;n[19]!==b?(B=C.jsxs("li",{onClick:b,children:[k,"Delete"]}),n[19]=b,n[20]=B):B=n[20];let Z;return n[21]!==R||n[22]!==P||n[23]!==B?(Z=C.jsxs("ul",{className:gA.actionList,children:[R,P,B]}),n[21]=R,n[22]=P,n[23]=B,n[24]=Z):Z=n[24],Z}function yA(n){return n.removeMessage}function _A(n){return n.setReplying}const vA="_reactionList_18lz1_1",EA="_selectedReaction_18lz1_28",I_={reactionList:vA,selectedReaction:EA},TA=["👍","❤️","😆","😮","😢","😡"];function bA(){const n=Ve.c(12);console.log("Reactions list rendered!");const{dataChannel:t}=K.useContext(rn),{selectedMessage:i,pointerPosition:r}=K.useContext(ei);let o=r.current.y-70,u=r.current.x-90;o<0&&(o=10),u<0&&(u=10);let h;n[0]!==t||n[1]!==i?(h=b=>{b===i.current.reaction&&(b=-1);const R={type:"reaction",id:i.current.receivedId,reaction:b};t.current.send(JSON.stringify(R))},n[0]=t,n[1]=i,n[2]=h):h=n[2];const m=h;let y;n[3]!==u||n[4]!==o?(y={top:o,left:u},n[3]=u,n[4]=o,n[5]=y):y=n[5];let g;n[6]!==i||n[7]!==m?(g=TA.map((b,T)=>C.jsx("li",{onClick:()=>{m(T)},className:i.current.reaction===T?I_.selectedReaction:"",children:b},T)),n[6]=i,n[7]=m,n[8]=g):g=n[8];let _;return n[9]!==y||n[10]!==g?(_=C.jsx("ul",{className:I_.reactionList,style:y,children:g}),n[9]=y,n[10]=g,n[11]=_):_=n[11],_}const SA="_replyInfo_oczyu_1",AA="_replyingTo_oczyu_34",wA="_selectedMessage_oczyu_39",$c={replyInfo:SA,replyingTo:AA,selectedMessage:wA};function CA(){const n=Ve.c(15),{peerName:t}=K.useContext(rn),{selectedMessage:i}=K.useContext(ei),r=Pt(RA),o=i.current.receivedId===null?"yourself":t.current,u=i.current.type==="image"?"Image":i.current.content;let h;n[0]!==r?(h=()=>{r(null)},n[0]=r,n[1]=h):h=n[1];const m=h;let y;n[2]!==o?(y=C.jsxs("p",{className:$c.replyingTo,children:["Replying to ",o]}),n[2]=o,n[3]=y):y=n[3];let g;n[4]!==u?(g=C.jsx("p",{className:$c.selectedMessage,children:u}),n[4]=u,n[5]=g):g=n[5];let _;n[6]!==y||n[7]!==g?(_=C.jsxs("div",{className:$c.messageContents,children:[y,g]}),n[6]=y,n[7]=g,n[8]=_):_=n[8];let b;n[9]===Symbol.for("react.memo_cache_sentinel")?(b=C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"}),n[9]=b):b=n[9];let T;n[10]!==m?(T=C.jsx("svg",{width:16,height:16,onClick:m,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:b}),n[10]=m,n[11]=T):T=n[11];let R;return n[12]!==_||n[13]!==T?(R=C.jsxs("div",{className:$c.replyInfo,children:[_,T]}),n[12]=_,n[13]=T,n[14]=R):R=n[14],R}function RA(n){return n.setReplying}const xA="_sent_1wqkl_15",IA="_received_1wqkl_19",DA="_actionsContainer_1wqkl_28",M1={sent:xA,received:IA,actionsContainer:DA};function MA(n){const t=Ve.c(16),{imageSource:i,imageAlt:r,imageSent:o}=n,u=r===void 0?"Image":r;console.log("Image dialog rendered!");const h=Pt(OA),m=K.useRef(null),y=VA;let g;t[0]!==i?(g=()=>{window.open(i,"_blank")},t[0]=i,t[1]=g):g=t[1];const _=g;let b;t[2]!==h?(b=()=>{const H=m.current;if(!H)return;const J=it=>{it.target===H&&y()},z=()=>{h(null)};return H.addEventListener("click",J),window.addEventListener("popstate",z),()=>{H.removeEventListener("click",J),window.removeEventListener("popstate",z)}},t[2]=h,t[3]=b):b=t[3];let T;t[4]===Symbol.for("react.memo_cache_sentinel")?(T=[],t[4]=T):T=t[4],K.useEffect(b,T);const R=o?M1.sent:M1.received;let M;t[5]===Symbol.for("react.memo_cache_sentinel")?(M=C.jsx("button",{onClick:y,children:C.jsx("svg",{width:24,height:24,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),t[5]=M):M=t[5];let P;t[6]===Symbol.for("react.memo_cache_sentinel")?(P=C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.163 2.819C9 3.139 9 3.559 9 4.4V11H7.803c-.883 0-1.325 0-1.534.176a.75.75 0 0 0-.266.62c.017.274.322.593.931 1.232l4.198 4.401c.302.318.453.476.63.535a.749.749 0 0 0 .476 0c.177-.059.328-.217.63-.535l4.198-4.4c.61-.64.914-.96.93-1.233a.75.75 0 0 0-.265-.62C17.522 11 17.081 11 16.197 11H15V4.4c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656C13.861 2 13.441 2 12.6 2h-1.2c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656zM5 21a1 1 0 0 0 1 1h12a1 1 0 1 0 0-2H6a1 1 0 0 0-1 1z",fill:"#000000"})}),t[6]=P):P=t[6];let k;t[7]!==_?(k=C.jsxs("div",{className:M1.actionsContainer,children:[M,C.jsx("button",{onClick:_,children:P})]}),t[7]=_,t[8]=k):k=t[8];let B;t[9]!==u||t[10]!==i?(B=C.jsx("img",{src:i,alt:u}),t[9]=u,t[10]=i,t[11]=B):B=t[11];let Z;return t[12]!==R||t[13]!==k||t[14]!==B?(Z=C.jsxs("dialog",{ref:m,className:R,children:[k,B]}),t[12]=R,t[13]=k,t[14]=B,t[15]=Z):Z=t[15],Z}function VA(){window.history.back()}function OA(n){return n.setImageDialog}const lh=K.createContext(null),NA=({children:n})=>{const{peerConnection:t,remoteStream:i,videoChannel:r}=K.useContext(rn),[o,u]=K.useState(!1),[h,m]=K.useState(!1),[y,g]=K.useState(!1),[_,b]=K.useState(!1),[T,R]=K.useState("front"),M=K.useRef(null),P=K.useRef(null),k=K.useRef(null),B=K.useRef({x:0,y:0}),Z=K.useRef({x:0,y:0}),H=K.useRef(null);return K.useEffect(()=>{r.current.onmessage=z=>{let it=JSON.parse(z.data);it.message==="audioOn"?g(!0):it.message==="audioOff"?g(!1):it.message==="videoOn"?b(!0):it.message==="videoOff"&&b(!1)},H.current=new MediaStream;const J=t.current.getTransceivers();return P.current=J.find(z=>{var it,I,w;return((it=z.receiver.track)==null?void 0:it.kind)==="video"||((I=z.sender.track)==null?void 0:I.kind)==="video"||((w=z.mid)==null?void 0:w.includes("video"))}),M.current=J.find(z=>{var it,I,w;return((it=z.receiver.track)==null?void 0:it.kind)==="audio"||((I=z.sender.track)==null?void 0:I.kind)==="audio"||((w=z.mid)==null?void 0:w.includes("audio"))}),()=>{var z;(z=H.current)==null||z.getTracks().forEach(it=>{it.stop()}),r.current.onmessage=null,console.log("Cleaning up the video call context!")}},[]),K.useEffect(()=>{(async()=>{H.current.getTracks().forEach(it=>it.stop()),H.current.getTracks().forEach(it=>H.current.removeTrack(it));const J=T==="front"?"user":"environment";(await navigator.mediaDevices.getUserMedia({video:{facingMode:J},audio:!0})).getTracks().forEach(it=>{H.current.addTrack(it)}),k.current==="connected"&&(P.current.sender.replaceTrack(o?H.current.getVideoTracks()[0]:null),M.current.sender.replaceTrack(h?H.current.getAudioTracks()[0]:null))})()},[T]),K.useEffect(()=>{r.current.send(JSON.stringify({message:h?"audioOn":"audioOff"}))},[h]),K.useEffect(()=>{r.current.send(JSON.stringify({message:o?"videoOn":"videoOff"}))},[o]),C.jsx(lh,{value:{audio:h,setAudio:m,video:o,setVideo:u,cameraFace:T,setCameraFace:R,remoteAudio:y,remoteVideo:_,audioTransceiver:M,videoTransceiver:P,callState:k,localStream:H,remoteStream:i,sendingVideoPin:B,receivingVideoPin:Z},children:n})},LA="_navContainer_nf3oy_1",kA="_profileContainer_nf3oy_17",PA="_actionsContainer_nf3oy_31",Zc={navContainer:LA,profileContainer:kA,actionsContainer:PA};function jA(){const n=Ve.c(17);console.log("Chat header rendered!");const{peerName:t}=K.useContext(rn),i=Pt(BA),r=Pt(zA),[o]=K.useState(!1);let u;n[0]===Symbol.for("react.memo_cache_sentinel")?(u={y:100,opacity:0},n[0]=u):u=n[0];let h;n[1]===Symbol.for("react.memo_cache_sentinel")?(h={y:0,opacity:1,config:{tension:300,friction:25}},n[1]=h):h=n[1];let m;n[2]===Symbol.for("react.memo_cache_sentinel")?(m={from:u,enter:h,leave:{y:100,opacity:0,config:{tension:300,friction:25}}},n[2]=m):m=n[2],s5(o,m);let y;n[3]!==r?(y=()=>{r("calling")},n[3]=r,n[4]=y):y=n[4];const g=y,_=UA;let b;n[5]===Symbol.for("react.memo_cache_sentinel")?(b=C.jsx("img",{src:"./pp.svg",width:30,height:30,className:Zc.profileImage}),n[5]=b):b=n[5];const T=t.current?t.current:"Receiver";let R;n[6]!==T?(R=C.jsxs("div",{className:Zc.profileContainer,children:[b,C.jsx("p",{children:T})]}),n[6]=T,n[7]=R):R=n[7];let M;n[8]!==g||n[9]!==i?(M=i==="hidden"&&C.jsx("button",{onClick:g,children:C.jsx("svg",{width:20,height:20,viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})})}),n[8]=g,n[9]=i,n[10]=M):M=n[10];let P;n[11]===Symbol.for("react.memo_cache_sentinel")?(P=C.jsx("button",{onClick:_,children:C.jsx("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2788 2.15224C13.9085 2 13.439 2 12.5 2C11.561 2 11.0915 2 10.7212 2.15224C10.2274 2.35523 9.83509 2.74458 9.63056 3.23463C9.53719 3.45834 9.50065 3.7185 9.48635 4.09799C9.46534 4.65568 9.17716 5.17189 8.69017 5.45093C8.20318 5.72996 7.60864 5.71954 7.11149 5.45876C6.77318 5.2813 6.52789 5.18262 6.28599 5.15102C5.75609 5.08178 5.22018 5.22429 4.79616 5.5472C4.47814 5.78938 4.24339 6.1929 3.7739 6.99993C3.30441 7.80697 3.06967 8.21048 3.01735 8.60491C2.94758 9.1308 3.09118 9.66266 3.41655 10.0835C3.56506 10.2756 3.77377 10.437 4.0977 10.639C4.57391 10.936 4.88032 11.4419 4.88029 12C4.88026 12.5581 4.57386 13.0639 4.0977 13.3608C3.77372 13.5629 3.56497 13.7244 3.41645 13.9165C3.09108 14.3373 2.94749 14.8691 3.01725 15.395C3.06957 15.7894 3.30432 16.193 3.7738 17C4.24329 17.807 4.47804 18.2106 4.79606 18.4527C5.22008 18.7756 5.75599 18.9181 6.28589 18.8489C6.52778 18.8173 6.77305 18.7186 7.11133 18.5412C7.60852 18.2804 8.2031 18.27 8.69012 18.549C9.17714 18.8281 9.46533 19.3443 9.48635 19.9021C9.50065 20.2815 9.53719 20.5417 9.63056 20.7654C9.83509 21.2554 10.2274 21.6448 10.7212 21.8478C11.0915 22 11.561 22 12.5 22C13.439 22 13.9085 22 14.2788 21.8478C14.7726 21.6448 15.1649 21.2554 15.3694 20.7654C15.4628 20.5417 15.4994 20.2815 15.5137 19.902C15.5347 19.3443 15.8228 18.8281 16.3098 18.549C16.7968 18.2699 17.3914 18.2804 17.8886 18.5412C18.2269 18.7186 18.4721 18.8172 18.714 18.8488C19.2439 18.9181 19.7798 18.7756 20.2038 18.4527C20.5219 18.2105 20.7566 17.807 21.2261 16.9999C21.6956 16.1929 21.9303 15.7894 21.9827 15.395C22.0524 14.8691 21.9088 14.3372 21.5835 13.9164C21.4349 13.7243 21.2262 13.5628 20.9022 13.3608C20.4261 13.0639 20.1197 12.558 20.1197 11.9999C20.1197 11.4418 20.4261 10.9361 20.9022 10.6392C21.2263 10.4371 21.435 10.2757 21.5836 10.0835C21.9089 9.66273 22.0525 9.13087 21.9828 8.60497C21.9304 8.21055 21.6957 7.80703 21.2262 7C20.7567 6.19297 20.522 5.78945 20.2039 5.54727C19.7799 5.22436 19.244 5.08185 18.7141 5.15109C18.4722 5.18269 18.2269 5.28136 17.8887 5.4588C17.3915 5.71959 16.7969 5.73002 16.3099 5.45096C15.8229 5.17191 15.5347 4.65566 15.5136 4.09794C15.4993 3.71848 15.4628 3.45833 15.3694 3.23463C15.1649 2.74458 14.7726 2.35523 14.2788 2.15224ZM12.5 15C14.1695 15 15.5228 13.6569 15.5228 12C15.5228 10.3431 14.1695 9 12.5 9C10.8305 9 9.47716 10.3431 9.47716 12C9.47716 13.6569 10.8305 15 12.5 15Z",fill:"#1C274C"})})}),n[11]=P):P=n[11];let k;n[12]!==M?(k=C.jsxs("ul",{className:Zc.actionsContainer,children:[M,P]}),n[12]=M,n[13]=k):k=n[13];let B;return n[14]!==R||n[15]!==k?(B=C.jsx(C.Fragment,{children:C.jsxs("nav",{"aria-label":"Main Navigation",className:Zc.navContainer,children:[R,k]})}),n[14]=R,n[15]=k,n[16]=B):B=n[16],B}function UA(){document.body.classList.toggle("dark")}function zA(n){return n.setVideoCall}function BA(n){return n.videoCall}const qA="_chatContainer_189rb_1",HA="_chatBottom_189rb_18",D_={chatContainer:qA,chatBottom:HA},GA="_textMessage_1lmsy_1",FA="_sentMessage_1lmsy_31",QA="_receivedMessage_1lmsy_36",YA="_sending_1lmsy_41",KA="_sent_1lmsy_31",XA="_deletedMessage_1lmsy_49",$A="_topMessage_1lmsy_55",ZA="_bottomMessage_1lmsy_60",JA="_repliedMessage_1lmsy_73",WA="_hasImage_1lmsy_78",tw="_hasReaction_1lmsy_84",ew="_emoji_1lmsy_88",Zn={textMessage:GA,sentMessage:FA,receivedMessage:QA,sending:YA,sent:KA,deletedMessage:XA,topMessage:$A,bottomMessage:ZA,repliedMessage:JA,hasImage:WA,hasReaction:tw,emoji:ew},nw="_reaction_1t2b5_1",iw="_sentReaction_1t2b5_11",sw="_receivedReaction_1t2b5_16",V1={reaction:nw,sentReaction:iw,receivedReaction:sw},rw=["👍","❤️","😆","😮","😢","😡"];function aw(n){const t=Ve.c(8),{reaction:i,origin:r}=n,[o,u]=ta(ow);let h;t[0]!==u?(h=()=>{u.start({from:{scale:0},to:{scale:1},config:{tension:300,friction:15}})},t[0]=u,t[1]=h):h=t[1];let m;t[2]!==i?(m=[i],t[2]=i,t[3]=m):m=t[3],K.useEffect(h,m);let y;return t[4]!==r||t[5]!==i||t[6]!==o?(y=i!==-1?C.jsx(ea.span,{className:`${V1.reaction} ${r==="sent"?V1.sentReaction:V1.receivedReaction}`,style:{...o},children:rw[i]}):C.jsx(C.Fragment,{}),t[4]=r,t[5]=i,t[6]=o,t[7]=y):y=t[7],y}function ow(){return{scale:1}}const lw="_requestDiv_1axuz_1",uw="_decisionBox_1axuz_9",cw="_loading_1axuz_35",O1={requestDiv:lw,decisionBox:uw,loading:cw};function fw(n){const t=Ve.c(16),{sentId:i,receivedId:r}=n;console.log("Image request rendered!");const{dataChannel:o,peerName:u}=K.useContext(rn),h=Pt(hw),{receivingImage:m}=K.useContext(ei),{showNotification:y}=_u(),[g,_]=K.useState(!1);let b;t[0]!==o.current||t[1]!==r||t[2]!==m.current||t[3]!==i||t[4]!==y?(b=()=>{m.current===null?(o.current.send(JSON.stringify({type:"imageAccept",sentId:r,receivedId:i})),_(!0)):y("Please wait for a while!")},t[0]=o.current,t[1]=r,t[2]=m.current,t[3]=i,t[4]=y,t[5]=b):b=t[5];const T=b;let R;t[6]!==o.current||t[7]!==r||t[8]!==h||t[9]!==i?(R=()=>{o.current.send(JSON.stringify({type:"imageReject",sentId:r,receivedId:i})),h(i,r)},t[6]=o.current,t[7]=r,t[8]=h,t[9]=i,t[10]=R):R=t[10];const M=R;let P;return t[11]!==T||t[12]!==g||t[13]!==u||t[14]!==M?(P=g?C.jsxs("div",{className:O1.loading,children:[C.jsx("span",{children:"L"}),C.jsx("span",{children:"o"}),C.jsx("span",{children:"a"}),C.jsx("span",{children:"d"}),C.jsx("span",{children:"i"}),C.jsx("span",{children:"n"}),C.jsx("span",{children:"g"}),C.jsx("span",{children:" "}),C.jsx("span",{children:"i"}),C.jsx("span",{children:"m"}),C.jsx("span",{children:"a"}),C.jsx("span",{children:"g"}),C.jsx("span",{children:"e"})]}):C.jsxs("div",{className:O1.requestDiv,children:[C.jsxs("div",{children:[u.current," wants to send you an image"]}),C.jsxs("div",{className:O1.decisionBox,children:[C.jsx("button",{onClick:T,children:"Accept"}),C.jsx("button",{onClick:M,children:"Reject"})]})]}),t[11]=T,t[12]=g,t[13]=u,t[14]=M,t[15]=P):P=t[15],P}function hw(n){return n.removeMessage}const dw="_wrapperContainer_ln3cz_1",mw="_stopAnimation_ln3cz_34",gw="_show_ln3cz_44",N1={wrapperContainer:dw,stopAnimation:mw,show:gw};function uh({imageData:n,imageSource:t,imageAlt:i="Image",backgroundColor:r,clickHandler:o}){const[u,h]=K.useState(!1),m={[`data-${n==null?void 0:n.label}`]:n==null?void 0:n.value};return C.jsx("div",{style:{backgroundColor:u?"transparent":r},className:`${N1.wrapperContainer} ${u?N1.stopAnimation:""}`,children:C.jsx("img",{onClick:o,...m,className:u?N1.show:"",onLoad:()=>{h(!0)},src:t,alt:i})})}const v4=K.memo(n=>{const t=Ve.c(81),{message:i,prevMessageSentId:r,prevMessageReceivedId:o,prevMessageReaction:u,nextMessageSentId:h,nextMessageReceivedId:m,nextMessageReplyTo:y}=n,{dataChannel:g}=K.useContext(rn),_=Pt(pw),b=Pt(yw),T=Pt(_w),R=Pt(vw),{chatBottom:M,pointerPosition:P,selectedMessage:k,longPressed:B,atBottomRef:Z}=K.useContext(ei),{sentId:H,receivedId:J,type:z,status:it,content:I,reaction:w,deleted:x,highlight:N,replyTo:L}=i;console.log("Rendering message ",i);let j;t[0]!==I||t[1]!==J||t[2]!==R?(j=()=>{window.history.pushState(null,"","/image"),R({src:I,sent:J===null})},t[0]=I,t[1]=J,t[2]=R,t[3]=j):j=t[3];const D=j;let dt;t[4]!==I?(dt=()=>C.jsx("p",{children:I}),t[4]=I,t[5]=dt):dt=t[5];let mt;t[6]!==I||t[7]!==J||t[8]!==D?(mt=()=>C.jsx(uh,{imageSource:I,backgroundColor:J===null?"#FFD1B3":"#B3E0FF",clickHandler:D}),t[6]=I,t[7]=J,t[8]=D,t[9]=mt):mt=t[9];let Y;t[10]!==J||t[11]!==H?(Y=()=>C.jsx(fw,{sentId:H,receivedId:J}),t[10]=J,t[11]=H,t[12]=Y):Y=t[12];let W;t[13]!==dt||t[14]!==mt||t[15]!==Y?(W={text:dt,image:mt,imageRequest:Y},t[13]=dt,t[14]=mt,t[15]=Y,t[16]=W):W=t[16];const ut=W,[pt,V]=ta(Ew),et=K.useRef(null),ct=K.useRef(!1),ot=K.useRef(!0),gt=K.useRef(0),Et=K.useRef(null);let _t;t[17]!==V||t[18]!==Z||t[19]!==M?(_t=()=>{Z.current&&(M.current.scrollIntoView({behavior:"smooth"}),Z.current=!1),V.start({from:{scale:0,opacity:0},to:[{scale:1,opacity:1}],reset:!1,config:H1.stiff})},t[17]=V,t[18]=Z,t[19]=M,t[20]=_t):_t=t[20];let Ot;t[21]===Symbol.for("react.memo_cache_sentinel")?(Ot=[],t[21]=Ot):Ot=t[21],K.useEffect(_t,Ot);let xt;t[22]!==V?(xt=()=>{if(ot.current){ot.current=!1;return}(async()=>(Et.current.scrollIntoView({behavior:"instant"}),await new Promise(Tw),V.start({from:{scale:1},to:[{scale:1.2},{scale:1}],config:H1.stiff})))()},t[22]=V,t[23]=xt):xt=t[23];let qt;t[24]!==N?(qt=[N],t[24]=N,t[25]=qt):qt=t[25],K.useEffect(xt,qt);let ae;t[26]!==g||t[27]!==w||t[28]!==J||t[29]!==H?(ae=()=>{if(H===null&&w!==1){const $t={type:"reaction",id:J,reaction:1};g.current.send(JSON.stringify($t))}},t[26]=g,t[27]=w,t[28]=J,t[29]=H,t[30]=ae):ae=t[30];const Ae=ae;let ve;t[31]!==V||t[32]!==B||t[33]!==i||t[34]!==P||t[35]!==k||t[36]!==H||t[37]!==b||t[38]!==T||t[39]!==_?(ve=$t=>{const{event:Ht}=$t;ct.current=!1,et.current=setTimeout(()=>{ct.current||(P.current.x=Ht.clientX,P.current.y=Ht.clientY,B.current=!0,V.start({from:{scale:1},to:[{scale:1.1},{scale:1}],config:{duration:150},onRest:()=>{b(!0),_(null),H===null&&T(!0),k.current=i}}))},500)},t[31]=V,t[32]=B,t[33]=i,t[34]=P,t[35]=k,t[36]=H,t[37]=b,t[38]=T,t[39]=_,t[40]=ve):ve=t[40];let Oe;t[41]!==B||t[42]!==Ae?(Oe=()=>{setTimeout(()=>{B.current=!1},100),clearTimeout(et.current);const $t=Date.now();$t-gt.current<500?(Ae(),gt.current=0):gt.current=$t},t[41]=B,t[42]=Ae,t[43]=Oe):Oe=t[43];let qe;t[44]===Symbol.for("react.memo_cache_sentinel")?(qe=()=>{clearTimeout(et.current)},t[44]=qe):qe=t[44];let we;t[45]!==V||t[46]!==i||t[47]!==J||t[48]!==k||t[49]!==H||t[50]!==b||t[51]!==T||t[52]!==_?(we=$t=>{const{last:Ht,movement:fn}=$t,[ce]=fn;if(H===null){if(ce<0)return}else if(ce>0)return;if(Math.abs(ce)<5)return;ct.current=Math.abs(ce)>5;const ra=J===null?Math.min(0,ce):Math.max(0,ce);V.start({x:ra,onRest:()=>{Math.abs(ce)>60&&(k.current=i,_(k.current),b(!1),T(!1))}}),ct.current&&et.current&&(clearTimeout(et.current),et.current=null),Ht&&V.start({x:0,config:{tension:500,friction:20}})},t[45]=V,t[46]=i,t[47]=J,t[48]=k,t[49]=H,t[50]=b,t[51]=T,t[52]=_,t[53]=we):we=t[53];let kn;t[54]!==ve||t[55]!==Oe||t[56]!==we?(kn={onPointerDown:ve,onPointerUp:Oe,onPointerLeave:qe,onDrag:we},t[54]=ve,t[55]=Oe,t[56]=we,t[57]=kn):kn=t[57];let Xe;t[58]===Symbol.for("react.memo_cache_sentinel")?(Xe={eventOptions:{passive:!1}},t[58]=Xe):Xe=t[58];const fr=DE(kn,Xe);let Pn;t[59]!==fr||t[60]!==x||t[61]!==it||t[62]!==z?(Pn=x!==0||z==="imageRequest"||it==="sending"?{}:fr(),t[59]=fr,t[60]=x,t[61]=it,t[62]=z,t[63]=Pn):Pn=t[63];let wn;t[64]!==pt?(wn={...pt},t[64]=pt,t[65]=wn):wn=t[65];const ni=`
        ${Zn.textMessage}
        ${it==="sending"?Zn.sending:Zn.sent}
        ${J===null?Zn.sentMessage:Zn.receivedMessage}
        ${(h===H||m===J)&&i.reaction===-1&&!y?Zn.topMessage:""}
        ${(r===H||o===J)&&!u?Zn.bottomMessage:""}
        ${L?Zn.repliedMessage:""}
        ${x===2?Zn.deletedMessage:""}
        ${w!==-1&&x!==2?Zn.hasReaction:""}
        ${z==="image"?Zn.hasImage:""}
        ${zE(I)?Zn.emoji:""}
      `;let hi;t[66]!==ut||t[67]!==z?(hi=ut[z]||bw,t[66]=ut,t[67]=z,t[68]=hi):hi=t[68];let Cn;t[69]!==hi?(Cn=hi(),t[69]=hi,t[70]=Cn):Cn=t[70];let jn;t[71]!==x||t[72]!==w||t[73]!==H?(jn=x!==2&&C.jsx(aw,{reaction:w,origin:H===null?"received":"sent"}),t[71]=x,t[72]=w,t[73]=H,t[74]=jn):jn=t[74];let ji;return t[75]!==Pn||t[76]!==wn||t[77]!==ni||t[78]!==Cn||t[79]!==jn?(ji=C.jsxs(ea.div,{ref:Et,...Pn,style:wn,className:ni,children:[Cn,jn]}),t[75]=Pn,t[76]=wn,t[77]=ni,t[78]=Cn,t[79]=jn,t[80]=ji):ji=t[80],ji});function pw(n){return n.setReplying}function yw(n){return n.setActionsShown}function _w(n){return n.setReactionsShown}function vw(n){return n.setImageDialog}function Ew(){return{scale:1,x:0}}function Tw(n){return setTimeout(n,100)}function bw(){return C.jsx("p",{children:C.jsx("span",{children:"Unknown type"})})}const Sw="_replyToMessage_1f615_1",Aw="_sentMessage_1f615_20",ww="_receivedMessage_1f615_25",Jc={replyToMessage:Sw,sentMessage:Aw,receivedMessage:ww};function Cw(n){const t=Ve.c(18),{message:i,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}=n,h=Pt(Rw);let m;t[0]!==h||t[1]!==i.replyTo.receivedId||t[2]!==i.replyTo.sentId?(m=()=>{setTimeout(()=>{h(i.replyTo.sentId,i.replyTo.receivedId)},100)},t[0]=h,t[1]=i.replyTo.receivedId,t[2]=i.replyTo.sentId,t[3]=m):m=t[3];const y=m,g=`
          ${Jc.replyToMessage}
          ${i.receivedId===null?Jc.sentMessage:Jc.receivedMessage}
          ${i.reaction!==-1?Jc.hasReaction:""}
        `,_=i.replyTo.type==="image"?"Image":i.replyTo.content;let b;t[4]!==_?(b=C.jsx("p",{children:_}),t[4]=_,t[5]=b):b=t[5];let T;t[6]!==y||t[7]!==g||t[8]!==b?(T=C.jsx("a",{onClick:y,className:g,children:b}),t[6]=y,t[7]=g,t[8]=b,t[9]=T):T=t[9];let R;t[10]!==i||t[11]!==o||t[12]!==u||t[13]!==r?(R=C.jsx(v4,{message:i,replied:!0,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}),t[10]=i,t[11]=o,t[12]=u,t[13]=r,t[14]=R):R=t[14];let M;return t[15]!==T||t[16]!==R?(M=C.jsxs(C.Fragment,{children:[T,R]}),t[15]=T,t[16]=R,t[17]=M):M=t[17],M}function Rw(n){return n.highlightMessage}const xw="_typingIndicator_1e28p_1",Iw="_dot_1e28p_14",Wc={typingIndicator:xw,dot:Iw};function Dw(){const n=Ve.c(1),{chatBottom:t}=K.useContext(ei);Fl(t)&&setTimeout(()=>{t.current.scrollIntoView({behavior:"smooth"})},300);let i;return n[0]===Symbol.for("react.memo_cache_sentinel")?(i=C.jsxs("div",{className:Wc.typingIndicator,children:[C.jsx("span",{className:Wc.dot}),C.jsx("span",{className:Wc.dot}),C.jsx("span",{className:Wc.dot})]}),n[0]=i):i=n[0],i}const Mw="_newMessageContainer_148ji_1",Vw="_newMessage_148ji_1",M_={newMessageContainer:Mw,newMessage:Vw};function Ow(){const n=Ve.c(4);console.log("New Message component rendered!");const{chatBottom:t}=K.useContext(ei);let i;n[0]!==t.current?(i=()=>{t.current.scrollIntoView({behavior:"smooth"})},n[0]=t.current,n[1]=i):i=n[1];const r=i;let o;return n[2]!==r?(o=C.jsx("div",{className:M_.newMessageContainer,children:C.jsx("div",{className:M_.newMessage,onClick:r,children:"New Message"})}),n[2]=r,n[3]=o):o=n[3],o}function Nw(){const n=Ve.c(18);console.log("Chat component rendered!");const{chatBottom:t}=K.useContext(ei),i=Pt(Uw),r=Pt(jw),o=Pt(Pw),u=Pt(kw);let h;n[0]!==t||n[1]!==u?(h=()=>{const M=new IntersectionObserver(k=>{k.forEach(B=>{B.isIntersecting&&u(!1)})},{threshold:.1}),P=t.current;return P&&M.observe(P),()=>{P&&M.unobserve(P)}},n[0]=t,n[1]=u,n[2]=h):h=n[2];let m;n[3]===Symbol.for("react.memo_cache_sentinel")?(m=[],n[3]=m):m=n[3],K.useLayoutEffect(h,m);let y;n[4]!==i?(y=i.map(Lw),n[4]=i,n[5]=y):y=n[5];let g;n[6]===Symbol.for("react.memo_cache_sentinel")?(g=C.jsx(uh,{imageWidth:300,imageHeight:300,imageSource:"./test.jpg",imageAlt:"Image"}),n[6]=g):g=n[6];let _;n[7]!==r?(_=r&&C.jsx(Dw,{}),n[7]=r,n[8]=_):_=n[8];let b;n[9]!==o?(b=o&&C.jsx(Ow,{}),n[9]=o,n[10]=b):b=n[10];let T;n[11]!==t?(T=C.jsx("div",{ref:t,className:D_.chatBottom,children:"Hehe"},"chatBottom"),n[11]=t,n[12]=T):T=n[12];let R;return n[13]!==y||n[14]!==_||n[15]!==b||n[16]!==T?(R=C.jsxs("div",{className:D_.chatContainer,children:[y,g,_,b,T]}),n[13]=y,n[14]=_,n[15]=b,n[16]=T,n[17]=R):R=n[17],R}function Lw(n,t,i){var r,o,u,h,m,y,g,_,b;return n.replyTo?C.jsx(Cw,{message:n,nextMessageSentId:(r=i[t+1])==null?void 0:r.sentId,nextMessageReceivedId:(o=i[t+1])==null?void 0:o.receivedId,nextMessageReplyTo:(u=i[t+1])==null?void 0:u.replyTo},`${n.sentId} m ${n.receivedId}`):C.jsx(v4,{message:n,nextMessageSentId:(h=i[t+1])==null?void 0:h.sentId,nextMessageReceivedId:(m=i[t+1])==null?void 0:m.receivedId,nextMessageReplyTo:(y=i[t+1])==null?void 0:y.replyTo,prevMessageSentId:(g=i[t-1])==null?void 0:g.sentId,prevMessageReceivedId:(_=i[t-1])==null?void 0:_.receivedId,prevMessageReaction:((b=i[t-1])==null?void 0:b.reaction)!==-1},`${n.sentId} m ${n.receivedId}`)}function kw(n){return n.setNewMessage}function Pw(n){return n.newMessage}function jw(n){return n.typing}function Uw(n){return n.messages}const zw="_inputSpaceContainer_1lnqb_1",Bw="_gifSelector_1lnqb_42",qw="_inputOptions_1lnqb_53",Hw="_sendButton_1lnqb_75",Gw="_imageBox_1lnqb_95",Fw="_inputImage_1lnqb_108",Qw="_closeImage_1lnqb_115",Fr={inputSpaceContainer:zw,gifSelector:Bw,inputOptions:qw,sendButton:Hw,imageBox:Gw,inputImage:Fw,closeImage:Qw},Yw="_gifBox_6aqh5_1",Kw="_inputDiv_6aqh5_22",Xw="_gifInput_6aqh5_27",$w="_gifsContainer_6aqh5_42",Zw="_containerColumn_6aqh5_53",Wa={gifBox:Yw,inputDiv:Kw,gifInput:Xw,gifsContainer:$w,containerColumn:Zw},Jw="AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k",Ww="client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low";function tC(n){const t=Ve.c(37),{setGifPicker:i}=n;console.log("Gif Picker rendered!");const{dataChannel:r,featuredGifs:o}=K.useContext(rn),{sentId:u,selectedMessage:h,atBottomRef:m}=K.useContext(ei),y=Pt(uC),g=Pt(lC),_=Pt(oC);let b;t[0]!==i?(b=()=>{i(!1)},t[0]=i,t[1]=b):b=t[1];const T=b,[R,M]=K.useState(o.current),P=K.useRef(null),[k,B]=ta(aC),{h:Z}=k;let H;t[2]!==B?(H=et=>{const{movement:ct,last:ot}=et,[,gt]=ct;Math.abs(gt)<2&&!ot||(ot?gt>60?B.start({h:0,immediate:!1,onRest:rC}):B.start({h:85,immediate:!1}):gt>0&&B.start({h:85-gt/window.innerHeight*100,immediate:!0}))},t[2]=B,t[3]=H):H=t[3];const J=yu(H);let z;t[4]===Symbol.for("react.memo_cache_sentinel")?(z=async et=>{const ct=`https://tenor.googleapis.com/v2/search?q=${et}&key=${Jw}&${Ww}`,ot=await fetch(ct).then(sC);M(ot.results)},t[4]=z):z=t[4];const it=z;let I;t[5]===Symbol.for("react.memo_cache_sentinel")?(I=PE(it,200),t[5]=I):I=t[5];const w=K.useRef(I);let x;t[6]!==o.current?(x=()=>{const et=P.current.value.trimEnd();et.length===0?M(o.current):w.current(et)},t[6]=o.current,t[7]=x):x=t[7];const N=x;let L;t[8]!==y||t[9]!==m||t[10]!==r||t[11]!==g||t[12]!==h||t[13]!==u||t[14]!==i||t[15]!==_?(L=et=>{console.log("Clicked!"),et.target.dataset.url&&(J1({type:"gif",content:et.target.dataset.url,replying:g,setReplying:_,selectedMessage:h.current,dataChannel:r.current,addMessage:y,sentId:u,inputRef:null,atBottomRef:m}),i(!1))},t[8]=y,t[9]=m,t[10]=r,t[11]=g,t[12]=h,t[13]=u,t[14]=i,t[15]=_,t[16]=L):L=t[16];const j=L;let D;t[17]!==B||t[18]!==T?(D=()=>(B.start({from:{h:0},to:[{h:85}],reset:!1}),window.addEventListener("popstate",T),()=>{window.removeEventListener("popstate",T)}),t[17]=B,t[18]=T,t[19]=D):D=t[19];let dt;t[20]===Symbol.for("react.memo_cache_sentinel")?(dt=[],t[20]=dt):dt=t[20],K.useEffect(D,dt);let mt;t[21]!==J?(mt=J(),t[21]=J,t[22]=mt):mt=t[22];let Y;t[23]!==Z?(Y=Z.to(iC),t[23]=Z,t[24]=Y):Y=t[24];let W;t[25]!==Y?(W={height:Y},t[25]=Y,t[26]=W):W=t[26];let ut;t[27]!==N?(ut=C.jsx("div",{className:Wa.inputDiv,children:C.jsx("input",{ref:P,autoComplete:"off",placeholder:"Search",spellCheck:!1,name:"query",title:"Search for GIFs",className:Wa.gifInput,onChange:N})}),t[27]=N,t[28]=ut):ut=t[28];let pt;t[29]!==R||t[30]!==j?(pt=R.length>0?C.jsxs("div",{className:Wa.gifsContainer,onClick:et=>j(et),children:[C.jsx("div",{className:Wa.containerColumn,children:R.map(nC)}),C.jsx("div",{className:Wa.containerColumn,children:R.map(eC)})]}):C.jsx(C.Fragment,{}),t[29]=R,t[30]=j,t[31]=pt):pt=t[31];let V;return t[32]!==mt||t[33]!==W||t[34]!==ut||t[35]!==pt?(V=C.jsxs(ea.div,{...mt,style:W,className:Wa.gifBox,children:[ut,pt]}),t[32]=mt,t[33]=W,t[34]=ut,t[35]=pt,t[36]=V):V=t[36],V}function eC(n,t){return t%2===1&&C.jsx(uh,{imageData:{label:"url",value:n.media_formats.gif.url},imageSource:n.media_formats.tinygif.url,imageAlt:n.content_description,backgroundColor:"#BBDDDF"},n.id+t)}function nC(n,t){return t%2===0&&C.jsx(uh,{imageData:{label:"url",value:n.media_formats.gif.url},imageSource:n.media_formats.tinygif.url,imageAlt:n.content_description,backgroundColor:"#BBDDDF"},n.id+t)}function iC(n){return`${n}vh`}function sC(n){return n.json()}function rC(){window.history.back()}function aC(){return{h:85}}function oC(n){return n.setReplying}function lC(n){return n.replying}function uC(n){return n.addMessage}function cC(){const n=Ve.c(59);console.log("Input space rendered!");const{showNotification:t}=_u(),{dataChannel:i}=K.useContext(rn),{sentId:r,atBottomRef:o,images:u,chatBottom:h,selectedMessage:m}=K.useContext(ei),y=Pt(dC),g=Pt(hC),_=Pt(fC),b=K.useRef(""),T=K.useRef(null),R=K.useRef(null),M=K.useRef(null),[P,k]=K.useState(!1),[B,Z]=K.useState(null),[H,J]=K.useState(!1);let z,it;n[0]!==y?(z=()=>{y&&T.current&&T.current.focus()},it=[y],n[0]=y,n[1]=z,n[2]=it):(z=n[1],it=n[2]),K.useLayoutEffect(z,it);let I;n[3]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{J(!0),window.history.pushState(null,"","/gifs")},n[3]=I):I=n[3];const w=I;let x;n[4]!==i?(x=()=>{i.current.send(JSON.stringify({type:"typing"}))},n[4]=i,n[5]=x):x=n[5];const N=x;let L;n[6]!==N?(L=kE(N,800),n[6]=N,n[7]=L):L=n[7];const j=K.useRef(L);let D;n[8]!==h?(D=()=>{j.current(),k(!0),T.current.style.height="auto",T.current.scrollHeight>T.current.clientHeight&&(T.current.style.height=T.current.scrollHeight+"px"),b.current=T.current.value,Fl(h)&&setTimeout(()=>{h.current.scrollIntoView({behavior:"smooth"})},200)},n[8]=h,n[9]=D):D=n[9];const dt=D;let mt;n[10]!==u.current||n[11]!==r||n[12]!==t?(mt=async qe=>{const we=qe.target.files[0];if(!we)return;const kn=await jE(we);if(kn.length>64){t("Please upload images upto 2 MB!");return}u.current.push({sentId:r.current,receivedId:null,fileType:we.type,chunks:kn}),Z(URL.createObjectURL(we))},n[10]=u.current,n[11]=r,n[12]=t,n[13]=mt):mt=n[13];const Y=mt;let W;n[14]!==_||n[15]!==o||n[16]!==i||n[17]!==y||n[18]!==m||n[19]!==r||n[20]!==g?(W=()=>{b.current.trim().length!==0&&(J1({type:"text",content:b.current.trimEnd(),replying:y,setReplying:g,selectedMessage:m.current,dataChannel:i.current,addMessage:_,sentId:r,inputRef:T,atBottomRef:o}),b.current="")},n[14]=_,n[15]=o,n[16]=i,n[17]=y,n[18]=m,n[19]=r,n[20]=g,n[21]=W):W=n[21];const ut=W;let pt;n[22]!==_||n[23]!==o||n[24]!==i||n[25]!==B||n[26]!==y||n[27]!==m||n[28]!==r||n[29]!==g?(pt=()=>{B!==null&&(J1({type:"imageRequest",content:B,replying:y,setReplying:g,selectedMessage:m.current,dataChannel:i.current,addMessage:_,sentId:r,inputRef:M,atBottomRef:o}),Z(null))},n[22]=_,n[23]=o,n[24]=i,n[25]=B,n[26]=y,n[27]=m,n[28]=r,n[29]=g,n[30]=pt):pt=n[30];const V=pt;let et;n[31]===Symbol.for("react.memo_cache_sentinel")?(et=()=>{k(!1),T.current.style.height="unset",T.current.scrollTop=T.current.scrollHeight},n[31]=et):et=n[31];const ct=et;let ot;n[32]!==u.current||n[33]!==r?(ot=()=>{M.current.value="";const qe=u.current.findIndex(we=>we.sentId===r.current&&we.receivedId===null);u.current.splice(qe,1),Z(null)},n[32]=u.current,n[33]=r,n[34]=ot):ot=n[34];const gt=ot;let Et;n[35]!==B||n[36]!==V||n[37]!==ut?(Et=()=>{B===null?ut():V()},n[35]=B,n[36]=V,n[37]=ut,n[38]=Et):Et=n[38];const _t=Et;let Ot;n[39]!==H?(Ot=H?C.jsx(tC,{setGifPicker:J}):null,n[39]=H,n[40]=Ot):Ot=n[40];let xt;n[41]!==P||n[42]!==Y?(xt=!P&&C.jsxs("div",{className:Fr.inputOptions,children:[C.jsx("label",{htmlFor:"fileInput",children:C.jsx("svg",{width:18,height:18,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM6.016 24q0 0.832 0.576 1.44t1.408 0.576h16q0.832 0 1.408-0.576t0.608-1.44v-0.928q-0.224-0.448-1.12-2.688t-1.6-3.584-1.28-2.112q-0.544-0.576-1.12-0.608t-1.152 0.384-1.152 1.12-1.184 1.568-1.152 1.696-1.152 1.6-1.088 1.184-1.088 0.448q-0.576 0-1.664-1.44-0.16-0.192-0.48-0.608-1.12-1.504-1.6-1.824-0.768-0.512-1.184 0.352-0.224 0.512-0.928 2.24t-1.056 2.56v0.64zM6.016 9.024q0 1.248 0.864 2.112t2.112 0.864 2.144-0.864 0.864-2.112-0.864-2.144-2.144-0.864-2.112 0.864-0.864 2.144z"})})}),C.jsx("input",{ref:M,id:"fileInput",type:"file",accept:"image/*",onChange:qe=>Y(qe)}),C.jsx("svg",{width:18,height:18,viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--twemoji",preserveAspectRatio:"xMidYMid meet",children:C.jsx("path",{fill:"#FFAC33",d:"M27.287 34.627c-.404 0-.806-.124-1.152-.371L18 28.422l-8.135 5.834a1.97 1.97 0 0 1-2.312-.008a1.971 1.971 0 0 1-.721-2.194l3.034-9.792l-8.062-5.681a1.98 1.98 0 0 1-.708-2.203a1.978 1.978 0 0 1 1.866-1.363L12.947 13l3.179-9.549a1.976 1.976 0 0 1 3.749 0L23 13l10.036.015a1.975 1.975 0 0 1 1.159 3.566l-8.062 5.681l3.034 9.792a1.97 1.97 0 0 1-.72 2.194a1.957 1.957 0 0 1-1.16.379z"})})]}),n[41]=P,n[42]=Y,n[43]=xt):xt=n[43];let qt;n[44]!==P||n[45]!==dt||n[46]!==B||n[47]!==gt?(qt=B?C.jsxs("div",{className:Fr.imageBox,children:[C.jsx("img",{src:B,className:Fr.inputImage}),C.jsx("svg",{className:Fr.closeImage,width:16,height:16,onClick:gt,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})]}):C.jsxs(C.Fragment,{children:[C.jsx("textarea",{onChange:dt,onFocus:dt,onBlur:ct,ref:T,name:"textMessage",placeholder:"Message",rows:1,spellCheck:!1}),!P&&C.jsx("svg",{className:Fr.gifSelector,onClick:w,width:24,height:24,viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"ic_fluent_gif_24_filled",fillRule:"nonzero",children:C.jsx("path",{d:"M18.75,3.50054297 C20.5449254,3.50054297 22,4.95561754 22,6.75054297 L22,17.2531195 C22,19.048045 20.5449254,20.5031195 18.75,20.5031195 L5.25,20.5031195 C3.45507456,20.5031195 2,19.048045 2,17.2531195 L2,6.75054297 C2,4.95561754 3.45507456,3.50054297 5.25,3.50054297 L18.75,3.50054297 Z M8.01459972,8.87193666 C6.38839145,8.87193666 5.26103525,10.2816525 5.26103525,11.9943017 C5.26103525,13.707564 6.38857781,15.1202789 8.01459972,15.1202789 C8.90237918,15.1202789 9.71768065,14.6931811 10.1262731,13.9063503 L10.2024697,13.7442077 L10.226,13.674543 L10.2440163,13.5999276 L10.2440163,13.5999276 L10.2516169,13.5169334 L10.2518215,11.9961937 L10.2450448,11.9038358 C10.2053646,11.6359388 9.99569349,11.4234501 9.72919932,11.3795378 L9.62682145,11.3711937 L8.62521827,11.3711937 L8.53286035,11.3779703 C8.26496328,11.4176506 8.05247466,11.6273217 8.00856234,11.8938159 L8.00021827,11.9961937 L8.00699487,12.0885517 C8.0466751,12.3564487 8.25634623,12.5689373 8.5228404,12.6128497 L8.62521827,12.6211937 L9.00103525,12.6209367 L9.00103525,13.3549367 L8.99484486,13.3695045 C8.80607251,13.6904125 8.44322427,13.8702789 8.01459972,13.8702789 C7.14873038,13.8702789 6.51103525,13.0713011 6.51103525,11.9943017 C6.51103525,10.9182985 7.14788947,10.1219367 8.01459972,10.1219367 C8.43601415,10.1219367 8.67582824,10.1681491 8.97565738,10.3121334 C9.28681641,10.4615586 9.6601937,10.3304474 9.80961888,10.0192884 C9.95904407,9.70812933 9.82793289,9.33475204 9.51677386,9.18532686 C9.03352891,8.95326234 8.61149825,8.87193666 8.01459972,8.87193666 Z M12.6289445,8.99393497 C12.3151463,8.99393497 12.0553614,9.22519285 12.0107211,9.52657705 L12.0039445,9.61893497 L12.0039445,14.381065 L12.0107211,14.4734229 C12.0553614,14.7748072 12.3151463,15.006065 12.6289445,15.006065 C12.9427427,15.006065 13.2025276,14.7748072 13.2471679,14.4734229 L13.2539445,14.381065 L13.2539445,9.61893497 L13.2471679,9.52657705 C13.2025276,9.22519285 12.9427427,8.99393497 12.6289445,8.99393497 Z M17.6221579,9.00083497 L15.6247564,8.99393111 C15.3109601,8.99285493 15.0503782,9.22321481 15.0046948,9.52444312 L14.9975984,9.61677709 L14.9975984,14.3649711 L15.0043751,14.4573291 C15.0440553,14.7252261 15.2537265,14.9377148 15.5202206,14.9816271 L15.6225985,14.9899711 L15.7149564,14.9831945 C15.9828535,14.9435143 16.1953421,14.7338432 16.2392544,14.467349 L16.2475985,14.3649711 L16.2470353,13.2499367 L17.37,13.2504012 L17.4623579,13.2436246 C17.730255,13.2039444 17.9427436,12.9942732 17.9866559,12.7277791 L17.995,12.6254012 L17.9882234,12.5330433 C17.9485432,12.2651462 17.738872,12.0526576 17.4723779,12.0087453 L17.37,12.0004012 L16.2470353,11.9999367 L16.2470353,10.2449367 L17.6178421,10.2508313 L17.7102229,10.2443727 C18.0117595,10.2007704 18.2439132,9.94178541 18.2450039,9.62798912 C18.24608,9.31419284 18.0157202,9.05361096 17.7144919,9.00793041 L17.6221579,9.00083497 L15.6247564,8.99393111 L17.6221579,9.00083497 Z",id:"🎨-Color"})})})]}),n[44]=P,n[45]=dt,n[46]=B,n[47]=gt,n[48]=qt):qt=n[48];let ae;n[49]===Symbol.for("react.memo_cache_sentinel")?(ae=C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",id:"send",className:"icon glyph",children:C.jsx("path",{d:"M21.66,12a2,2,0,0,1-1.14,1.81L5.87,20.75A2.08,2.08,0,0,1,5,21a2,2,0,0,1-1.82-2.82L5.46,13H11a1,1,0,0,0,0-2H5.46L3.18,5.87A2,2,0,0,1,5.86,3.25h0l14.65,6.94A2,2,0,0,1,21.66,12Z"})}),n[49]=ae):ae=n[49];let Ae;n[50]!==_t?(Ae=C.jsx("button",{className:Fr.sendButton,onClick:_t,children:ae}),n[50]=_t,n[51]=Ae):Ae=n[51];let ve;n[52]!==xt||n[53]!==qt||n[54]!==Ae?(ve=C.jsxs("div",{className:Fr.inputSpaceContainer,ref:R,children:[xt,qt,Ae]}),n[52]=xt,n[53]=qt,n[54]=Ae,n[55]=ve):ve=n[55];let Oe;return n[56]!==Ot||n[57]!==ve?(Oe=C.jsxs(C.Fragment,{children:[Ot,ve]}),n[56]=Ot,n[57]=ve,n[58]=Oe):Oe=n[58],Oe}function fC(n){return n.addMessage}function hC(n){return n.setReplying}function dC(n){return n.replying}const mC="_containingDiv_1w6qf_1",gC="_incomingCall_1w6qf_8",pC="_incomingCallText_1w6qf_25",yC="_callingText_1w6qf_31",_C="_callActions_1w6qf_42",vC="_acceptCall_1w6qf_49",EC="_rejectCall_1w6qf_53",cs={containingDiv:mC,incomingCall:gC,incomingCallText:pC,callingText:yC,callActions:_C,acceptCall:vC,rejectCall:EC};function TC(){const n=Ve.c(33);console.log("Incoming call rendered!");const{peerName:t,dataChannel:i}=K.useContext(rn),r=Pt(SC),[o,u]=ta(bC),{x:h,y:m,opacity:y}=o;let g;n[0]!==i.current||n[1]!==r?(g=()=>{i.current.send(JSON.stringify({type:"callAccept"})),r("call")},n[0]=i.current,n[1]=r,n[2]=g):g=n[2];const _=g;let b;n[3]!==i.current||n[4]!==r?(b=()=>{i.current.send(JSON.stringify({type:"callReject"})),r("hidden")},n[3]=i.current,n[4]=r,n[5]=b):b=n[5];const T=b;let R;n[6]!==u||n[7]!==T?(R=N=>{const{down:L,movement:j,direction:D}=N,[dt]=j,[mt]=D;if(!L&&Math.abs(dt)>100){u.start({x:mt>0?500:-500,opacity:0,onRest:T});return}u.start({x:L?dt:0,opacity:1})},n[6]=u,n[7]=T,n[8]=R):R=n[8];const M=yu(R);let P;n[9]!==M?(P=M(),n[9]=M,n[10]=P):P=n[10];let k;n[11]!==y||n[12]!==h||n[13]!==m?(k={x:h,y:m,opacity:y},n[11]=y,n[12]=h,n[13]=m,n[14]=k):k=n[14];let B,Z;n[15]===Symbol.for("react.memo_cache_sentinel")?(B=C.jsx("div",{className:cs.profileImage,children:C.jsx("img",{src:"./pp.svg",width:50,height:50,className:cs.profileImage})}),Z=C.jsx("p",{className:cs.incomingCallText,children:"Incoming Call"}),n[15]=B,n[16]=Z):(B=n[15],Z=n[16]);let H;n[17]!==t.current?(H=C.jsxs("div",{children:[Z,C.jsxs("p",{className:cs.callingText,children:[t.current," is calling you"]})]}),n[17]=t.current,n[18]=H):H=n[18];let J;n[19]===Symbol.for("react.memo_cache_sentinel")?(J=C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})}),n[19]=J):J=n[19];let z;n[20]!==_?(z=C.jsx("button",{className:cs.acceptCall,onClick:_,children:J}),n[20]=_,n[21]=z):z=n[21];let it;n[22]===Symbol.for("react.memo_cache_sentinel")?(it=C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})}),n[22]=it):it=n[22];let I;n[23]!==T?(I=C.jsx("button",{className:cs.rejectCall,onClick:T,children:it}),n[23]=T,n[24]=I):I=n[24];let w;n[25]!==z||n[26]!==I?(w=C.jsxs("div",{className:cs.callActions,children:[z,I]}),n[25]=z,n[26]=I,n[27]=w):w=n[27];let x;return n[28]!==w||n[29]!==P||n[30]!==k||n[31]!==H?(x=C.jsx("div",{className:cs.containingDiv,children:C.jsxs(ea.div,{...P,className:cs.incomingCall,style:k,children:[B,H,w]})}),n[28]=w,n[29]=P,n[30]=k,n[31]=H,n[32]=x):x=n[32],x}function bC(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}function SC(n){return n.setVideoCall}const AC="_videoCallContainer_1mqwf_1",wC="_sendingVideo_1mqwf_26",CC="_actionList_1mqwf_37",RC="_startCall_1mqwf_62",xC="_endCall_1mqwf_66",IC="_rotateLogo_1mqwf_75",DC="_callingIndicatorContainer_1mqwf_79",MC="_callingIndicator_1mqwf_79",Ys={videoCallContainer:AC,sendingVideo:wC,actionList:CC,startCall:RC,endCall:xC,rotateLogo:IC,callingIndicatorContainer:DC,callingIndicator:MC};function VC(){console.log("Calling screen rendered!");const{dataChannel:n}=K.useContext(rn),{audio:t,video:i,setAudio:r,setVideo:o,cameraFace:u,setCameraFace:h,callState:m,localStream:y}=K.useContext(lh),g=Pt(z=>z.setVideoCall),_=K.useRef(null),[b,T]=K.useState(m.current!==null),R=()=>{r(z=>!z)},M=()=>{o(z=>!z)},P=()=>{n.current.send(JSON.stringify({type:"callEnd"})),m.current=null,g("hidden")},k=()=>{m.current=null,g("hidden")},B=()=>{g("mini")},Z=()=>{n.current.send(JSON.stringify({type:"callRequest"})),console.log("I am attempting a call!"),m.current="calling",T(z=>!z)},H=()=>{b?P():Z()},J=()=>{h(u==="front"?"back":"front")};return K.useEffect(()=>{_.current.srcObject=i?y.current:null},[i]),C.jsxs("div",{className:Ys.videoCallContainer,children:[C.jsx("video",{className:Ys.sendingVideo,ref:_,autoPlay:!0,muted:!0,poster:"./pp.svg"}),b?C.jsx("button",{onClick:B,children:C.jsx("svg",{width:20,height:20,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"})})}):C.jsx("button",{onClick:k,children:C.jsx("svg",{width:20,height:20,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),b&&C.jsx("div",{className:Ys.callingIndicatorContainer,children:C.jsx("span",{className:Ys.callingIndicator,children:"Calling"})}),C.jsxs("ul",{className:Ys.actionList,children:[C.jsx("li",{onClick:R,children:t?C.jsx("svg",{width:24,height:24,viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:C.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):C.jsx("svg",{width:24,height:24,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:C.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),C.jsx("li",{onClick:M,children:i?C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):C.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),C.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),C.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),C.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),C.jsx("li",{children:C.jsxs("svg",{onClick:J,width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),C.jsx("path",{className:Ys.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),C.jsx("li",{onClick:H,className:b?Ys.endCall:Ys.startCall,children:C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})})]})]})}const OC="_videoCallContainer_nlosb_1",NC="_sendingVideo_nlosb_26",LC="_receivingVideo_nlosb_39",kC="_actionList_nlosb_48",PC="_endCall_nlosb_73",jC="_rotateLogo_nlosb_82",UC="_mutedButton_nlosb_86",Qr={videoCallContainer:OC,sendingVideo:NC,receivingVideo:LC,actionList:kC,endCall:PC,rotateLogo:jC,mutedButton:UC};function zC(){console.log("Call screen rendered!");const{dataChannel:n,videoChannel:t}=K.useContext(rn),i=Pt(W=>W.setVideoCall),{audio:r,video:o,setAudio:u,setVideo:h,cameraFace:m,remoteAudio:y,remoteVideo:g,setCameraFace:_,localStream:b,remoteStream:T,sendingVideoPin:R,callState:M,videoTransceiver:P,audioTransceiver:k}=K.useContext(lh),B=K.useRef(null),Z=K.useRef(null),H=K.useRef(null),[J,z]=K.useState(!0),it=W=>{W.stopPropagation(),clearTimeout(H.current),H.current=setTimeout(()=>{z(!1)},4e3)},I=W=>{it(W),u(ut=>!ut)},w=W=>{it(W),h(ut=>!ut)},x=W=>{it(W),n.current.send(JSON.stringify({type:"callEnd"})),i("hidden")},[{x:N,y:L},j]=ta(()=>({x:R.current.x,y:R.current.y,config:{tension:300,friction:15}})),D=yu(({down:W,offset:[ut,pt],last:V})=>{if(W)R.current={x:ut,y:pt},j.start({x:ut,y:pt,immediate:!0});else if(V){const et=window.innerWidth,ct=window.innerHeight,{width:ot,height:gt}=Z.current.getBoundingClientRect(),Et=16,_t=16,Ot=16,xt=96;let qt=0;ut<-((et-(Ot+_t)-ot)/2)&&(qt=-(et-(Ot+_t)-ot));let ae=pt;pt<0&&(ae=0),pt>ct-(Et+xt+gt)&&(ae=ct-(Et+xt+gt)),R.current={x:qt,y:ae},j.start({x:qt,y:ae,immediate:!1})}},{from:()=>[N.get(),L.get()]}),dt=W=>{W.stopPropagation(),i("mini")},mt=W=>{it(W),_(m==="front"?"back":"front")};K.useEffect(()=>{M.current="connected",t.current.send(JSON.stringify({message:r?"audioOn":"audioOff"})),t.current.send(JSON.stringify({message:o?"videoOn":"videoOff"}))},[]),K.useEffect(()=>{B.current.srcObject=g?T.current:null},[g]),K.useEffect(()=>{Z.current.srcObject=o?b.current:null,P.current.sender.replaceTrack(o?b.current.getVideoTracks()[0]:null)},[o]),K.useEffect(()=>{k.current.sender.replaceTrack(r?b.current.getAudioTracks()[0]:null)},[r]),K.useLayoutEffect(()=>{j.start({x:N.get(),y:L.get(),immediate:!0})}),K.useEffect(()=>{J?H.current=setTimeout(()=>{z(!1)},4e3):clearTimeout(H.current)},[J]);const Y=()=>{z(W=>!W)};return C.jsxs("div",{className:Qr.videoCallContainer,onClick:Y,children:[C.jsx("video",{className:Qr.receivingVideo,autoPlay:!0,ref:B,poster:"./pp.svg"}),!y&&C.jsx("button",{className:Qr.mutedButton,children:C.jsx("svg",{width:16,height:16,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:C.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),C.jsx(ea.video,{...D(),className:Qr.sendingVideo,style:{x:N,y:L},ref:Z,autoPlay:!0,muted:!0,poster:"./pp.svg"}),J&&C.jsxs(C.Fragment,{children:[C.jsx("button",{onClick:W=>{dt(W)},children:C.jsx("svg",{width:20,height:20,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M222.927 580.115l301.354 328.512c24.354 28.708 20.825 71.724-7.883 96.078s-71.724 20.825-96.078-7.883L19.576 559.963a67.846 67.846 0 01-13.784-20.022 68.03 68.03 0 01-5.977-29.488l.001-.063a68.343 68.343 0 017.265-29.134 68.28 68.28 0 011.384-2.6 67.59 67.59 0 0110.102-13.687L429.966 21.113c25.592-27.611 68.721-29.247 96.331-3.656s29.247 68.721 3.656 96.331L224.088 443.784h730.46c37.647 0 68.166 30.519 68.166 68.166s-30.519 68.166-68.166 68.166H222.927z"})})}),C.jsxs("ul",{className:Qr.actionList,children:[C.jsx("li",{onClick:W=>{I(W)},children:r?C.jsx("svg",{width:24,height:24,viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:C.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):C.jsx("svg",{width:24,height:24,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:C.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),C.jsx("li",{onClick:W=>{w(W)},children:o?C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):C.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),C.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),C.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),C.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),C.jsx("li",{onClick:W=>mt(W),children:C.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),C.jsx("path",{className:Qr.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),C.jsx("li",{className:Qr.endCall,onClick:W=>{x(W)},children:C.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})})]})]})]})}const BC="_miniVideoContainer_14cmt_1",qC="_miniVideo_14cmt_1",HC="_mutedButton_14cmt_22",L1={miniVideoContainer:BC,miniVideo:qC,mutedButton:HC};function GC(){console.log("Mini video call rendered!");const{remoteStream:n}=K.useContext(rn),t=Pt(T=>T.setVideoCall),{receivingVideoPin:i,callState:r,remoteVideo:o,remoteAudio:u}=K.useContext(lh),h=K.useRef(null);K.useEffect(()=>{h.current.srcObject=o?n.current:null},[o]);const[{x:m,y},g]=ta(()=>({x:i.current.x,y:i.current.y,config:{tension:300,friction:30}})),_=yu(({down:T,offset:[R,M],last:P})=>{if(T)i.current={x:R,y:M},g.start({x:R,y:M,immediate:!0});else if(P){const k=window.innerWidth,B=window.innerHeight,{width:Z,height:H}=h.current.getBoundingClientRect(),J=16,z=16,it=16,I=96;let w=0;R>(k-(it+z)-Z)/2&&(w=k-(it+z)-Z);let x=M;M<0&&(x=0),M>B-(J+I+H)&&(x=B-(J+I+H)),i.current={x:w,y:x},g.start({x:w,y:x,immediate:!1})}},{from:()=>[m.get(),y.get()]}),b=()=>{t(r.current!=="connected"?"calling":"call")};return K.useLayoutEffect(()=>{g.start({x:m.get(),y:y.get(),immediate:!0})}),C.jsxs(ea.div,{..._(),onClick:b,style:{x:m,y},className:L1.miniVideoContainer,children:[C.jsx("video",{className:L1.miniVideo,autoPlay:!0,ref:h,poster:"./pp.svg"}),!u&&C.jsx("button",{className:L1.mutedButton,children:C.jsx("svg",{width:12,height:12,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:C.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:C.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:C.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})})]})}function FC(){const n=Ve.c(24);console.log("Chat Page rendered!");const{longPressed:t}=K.useContext(ei),i=Pt(JC),r=Pt(ZC),o=Pt($C),u=Pt(XC),h=Pt(KC),m=Pt(YC),y=Pt(QC);let g;n[0]!==t||n[1]!==m||n[2]!==y?(g=()=>{const J=()=>{t.current===!1&&(m(!1),y(!1))};return document.addEventListener("click",J),()=>{document.removeEventListener("click",J)}},n[0]=t,n[1]=m,n[2]=y,n[3]=g):g=n[3];let _;n[4]===Symbol.for("react.memo_cache_sentinel")?(_=[],n[4]=_):_=n[4],K.useLayoutEffect(g,_);let b;n[5]===Symbol.for("react.memo_cache_sentinel")?(b=C.jsx(jA,{}),n[5]=b):b=n[5];let T;n[6]!==h?(T=h!=="hidden"&&C.jsxs(NA,{children:[h==="incoming"&&C.jsx(TC,{}),h==="calling"&&C.jsx(VC,{}),h==="call"&&C.jsx(zC,{}),h==="mini"&&C.jsx(GC,{})]}),n[6]=h,n[7]=T):T=n[7];let R;n[8]===Symbol.for("react.memo_cache_sentinel")?(R=C.jsx(Nw,{}),n[8]=R):R=n[8];let M;n[9]!==i?(M=i&&C.jsx(CA,{}),n[9]=i,n[10]=M):M=n[10];let P;n[11]===Symbol.for("react.memo_cache_sentinel")?(P=C.jsx(cC,{}),n[11]=P):P=n[11];let k;n[12]!==r?(k=r&&C.jsx(bA,{}),n[12]=r,n[13]=k):k=n[13];let B;n[14]!==o?(B=o&&C.jsx(pA,{}),n[14]=o,n[15]=B):B=n[15];let Z;n[16]!==u?(Z=u&&C.jsx(MA,{imageSource:u.src,imageSent:u.sent}),n[16]=u,n[17]=Z):Z=n[17];let H;return n[18]!==T||n[19]!==M||n[20]!==k||n[21]!==B||n[22]!==Z?(H=C.jsxs("div",{className:dA.chatContainer,children:[b,T,R,M,P,k,B,Z]}),n[18]=T,n[19]=M,n[20]=k,n[21]=B,n[22]=Z,n[23]=H):H=n[23],H}function QC(n){return n.setReactionsShown}function YC(n){return n.setActionsShown}function KC(n){return n.videoCall}function XC(n){return n.imageDialog}function $C(n){return n.actionsShown}function ZC(n){return n.reactionsShown}function JC(n){return n.replying}function WC(){const n=Ve.c(5),{connected:t,peerConnection:i}=K.useContext(rn);let r;n[0]!==i.current?(r=()=>{const h=eR;return document.addEventListener("contextmenu",h),document.addEventListener("touchstart",tR,{passive:!1}),()=>{var m;document.removeEventListener("contextmenu",h),document.removeEventListener("touchstart",h),(m=i.current)==null||m.close()}},n[0]=i.current,n[1]=r):r=n[1];let o;n[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],n[2]=o):o=n[2],K.useEffect(r,o);let u;return n[3]!==t?(u=C.jsx(LE,{children:t?C.jsx(FE,{children:C.jsx(FC,{})}):C.jsx(fA,{})}),n[3]=t,n[4]=u):u=n[4],u}function tR(n){n.touches.length>1&&n.preventDefault()}function eR(n){return n.preventDefault()}W6.createRoot(document.getElementById("root")).render(C.jsx(i9,{children:C.jsx(K.StrictMode,{children:C.jsx(WC,{})})}));
