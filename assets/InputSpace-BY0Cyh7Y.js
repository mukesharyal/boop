import{r as t,C as j,c as _,j as s}from"./index-Dix0VLSN.js";const M="_inputSpaceContainer_1mye8_1",R="_inputOptions_1mye8_34",w="_sendImage_1mye8_47",l={inputSpaceContainer:M,inputOptions:R,sendImage:w};function N(){const{dataChannel:h}=t.useContext(j),{chatBottom:m,setMessages:f,sentId:i,selectedMessageId:r,replying:o,messages:c,setReplying:x,setSelectedMessageId:E}=t.useContext(_),e=t.useRef(null),[n,u]=t.useState(""),I=t.useRef(null),[y,d]=t.useState(!1);t.useEffect(()=>{o&&e.current.focus()},[o]);const a=()=>{d(!0),e.current.style.height="auto",e.current.scrollHeight>e.current.clientHeight&&(e.current.style.height=e.current.scrollHeight+"px"),u(e.current.value),e.current.setSelectionRange(e.current.value.length,e.current.value.length)},v=()=>{d(!1),e.current.style.height="unset"},C=()=>{if(n==null||n.trim().length===0)return;const g={type:"text",content:n.trimEnd()},p={sentId:i.current,type:"text",origin:"sent",status:"sending",reaction:-1,content:n.trimEnd(),deleted:0};o&&(g.reply={sentId:c[r].receivedId,receivedId:c[r].sentId},p.reply={sentId:c[r].sentId,receivedId:c[r].receivedId},x(!1)),h.current.send(JSON.stringify(g)),f(S=>[...S,p]),i.current=i.current+1,e.current.value="",setTimeout(()=>{m.current.scrollIntoView({behavior:"smooth"})},100),u(null)};return s.jsxs("div",{className:l.inputSpaceContainer,ref:I,children:[!y&&s.jsx("div",{className:l.inputOptions,children:s.jsxs("div",{style:{display:"flex",gap:"1.5rem"},children:[s.jsx("img",{src:"./photos.svg",width:20,height:20}),s.jsx("img",{src:"./microphone.svg",width:20,height:20})]})}),s.jsx("textarea",{onChange:a,onFocus:a,onClick:a,onBlur:v,ref:e,placeholder:"Message",rows:1,spellCheck:!1}),s.jsx("img",{src:"./send.svg",width:24,height:24,className:l.sendImage,style:{opacity:n&&n.trim().length!=0?1:.6},onClick:C})]})}export{N as default};
