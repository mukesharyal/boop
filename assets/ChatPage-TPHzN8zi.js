const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatHeader-BH_L7aMP.js","./index-Cr1LMo6m.js","./ChatHeader-B8K36_uz.css","./ChatComponent-De9elLli.js","./ChatComponent-Dwrenxgm.css","./InputSpace-XSPZsbnc.js","./InputSpace--uHCRP1_.css"])))=>i.map(i=>d[i]);
import{r as l,C as h,c as m,b as v,j as e,d as j,e as x,R as f,_}from"./index-Cr1LMo6m.js";const I="_chatContainer_us48c_1",R={chatContainer:I},L="_actionList_1j2sj_1",M={actionList:L};function N({style:r}){const{dataChannel:i}=l.useContext(h),{selectedMessageId:s,setReplying:d,messages:o,setMessages:a}=l.useContext(m),{showNotification:c}=v(),g=async()=>{o[s].type==="text"?(navigator.clipboard.writeText(o[s].content),c("The message has been copied!")):c("This message cannot be copied!")},p=()=>{d(!0)},t=()=>{if(o[s].sentId===null)a(n=>{const y=[...n];return y.splice(s,1),console.log(y),y});else{const n={type:"delete",sentId:o[s].sentId};i.current.send(JSON.stringify(n))}};return e.jsxs(j.ul,{className:M.actionList,style:{...r},children:[e.jsxs("li",{onClick:p,children:[e.jsx("img",{src:"./reply.svg",width:30,height:30}),"Reply"]}),e.jsxs("li",{onClick:g,children:[e.jsx("img",{src:"./copy.svg",width:30,height:30}),"Copy"]}),e.jsxs("li",{onClick:t,children:[e.jsx("img",{src:"./delete.svg",width:30,height:30}),"Delete"]})]})}const T="_reactionList_2658x_1",w="_selectedReaction_2658x_26",C={reactionList:T,selectedReaction:w},E=["👍","❤️","😆","😮","😢","😡"];function k({pointerPosition:r,style:i}){const{dataChannel:s}=l.useContext(h),{messages:d,selectedMessageId:o}=l.useContext(m),a=d[o];let c=r.y-70,g=r.x-90;c<0&&(c=10),g<0&&(g=10);const p=t=>{t===a.reaction&&(t=-1);let y={type:"reaction",id:a.receivedId,reaction:t};s.current.send(JSON.stringify(y))};return e.jsx(j.ul,{className:C.reactionList,style:{top:c,left:g,...i},children:E.map((t,n)=>e.jsx("li",{onClick:()=>{p(n)},className:a.reaction===n?C.selectedReaction:"",children:t},n))})}const P="_replyInfo_t53j4_1",S="_replyingTo_t53j4_16",A="_selectedMessage_t53j4_21",u={replyInfo:P,replyingTo:S,selectedMessage:A};function O(){const{peerName:r}=l.useContext(h),{messages:i,selectedMessageId:s,setReplying:d}=l.useContext(m),o=i[s].receivedId===null?"yourself":r.current,a=i[s].type==="image"?"Image":i[s].content,c=()=>{d(!1)};return e.jsxs("div",{className:u.replyInfo,children:[e.jsxs("div",{className:u.messageContents,children:[e.jsxs("p",{className:u.replyingTo,children:["Replying to ",o]}),e.jsx("p",{className:u.selectedMessage,children:a})]}),e.jsx("img",{src:"./close.svg",width:16,height:16,onClick:c})]})}const b=f.lazy(()=>_(()=>import("./ChatHeader-BH_L7aMP.js"),__vite__mapDeps([0,1,2]),import.meta.url)),D=f.lazy(()=>_(()=>import("./ChatComponent-De9elLli.js"),__vite__mapDeps([3,1,4]),import.meta.url)),z=f.lazy(()=>_(()=>import("./InputSpace-XSPZsbnc.js"),__vite__mapDeps([5,1,6]),import.meta.url));function $(){const{replying:r,actionsShown:i,reactionsShown:s,setActionsShown:d,setReactionsShown:o,pointerPosition:a,longPressed:c}=l.useContext(m);l.useLayoutEffect(()=>{const t=()=>{c.current===!1&&(d(!1),o(!1))};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]);const g=x(s,{from:{scale:0,opacity:0},enter:{scale:1,opacity:1,config:{tension:200,friction:15}},leave:{scale:0,opacity:0,config:{tension:400,friction:20}}}),p=x(i,{from:{y:100,opacity:0},enter:{y:0,opacity:1,config:{tension:300,friction:25}},leave:{y:100,opacity:0,config:{tension:300,friction:25}}});return e.jsxs("div",{className:R.chatContainer,children:[e.jsx(b,{}),e.jsx(D,{}),r&&e.jsx(O,{}),e.jsx(z,{}),g((t,n)=>n?e.jsx(k,{pointerPosition:a.current,style:t}):null),p((t,n)=>n?e.jsx(N,{style:t}):null)]})}export{$ as default};
