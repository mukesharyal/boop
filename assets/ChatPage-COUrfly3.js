const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatHeader-BDtrwhfm.js","./index-BkPeKK39.js","./ChatHeader-B8K36_uz.css","./ChatComponent-CwPr3jzH.js","./ChatComponent-B6FKmR9X.css","./InputSpace-vep1cYak.js","./InputSpace--uHCRP1_.css"])))=>i.map(i=>d[i]);
import{r as l,C as _,b as w,c as m,j as e,d as x,e as f,R as C,_ as j}from"./index-BkPeKK39.js";const R="_chatContainer_us48c_1",I={chatContainer:R},L="_actionList_1j2sj_1",N={actionList:L};function T({style:t}){const{dataChannel:n}=l.useContext(_),{showNotification:o}=w(),d=()=>{console.log("Something happened!"),navigator.clipboard.writeText(i[s].content),o("The message has been copied!")},g=()=>{p(!0)},a=()=>{if(i[s].origin==="received")i[s].deleted=1,i[s].type==="image"&&URL.revokeObjectURL(i[s].content);else{const r={type:"delete",sentId:i[s].sentId};n.current.send(JSON.stringify(r))}},{selectedMessageId:s,setReplying:p,messages:i}=l.useContext(m);return e.jsxs(x.ul,{className:N.actionList,style:{...t},children:[e.jsxs("li",{onClick:g,children:[e.jsx("img",{src:"./reply.svg",width:30,height:30}),"Reply"]}),e.jsxs("li",{onClick:d,children:[e.jsx("img",{src:"./copy.svg",width:30,height:30}),"Copy"]}),e.jsxs("li",{onClick:a,children:[e.jsx("img",{src:"./delete.svg",width:30,height:30}),"Delete"]})]})}const E="_reactionList_2658x_1",k="_selectedReaction_2658x_26",v={reactionList:E,selectedReaction:k},P=["ğŸ‘","â¤ï¸","ğŸ˜†","ğŸ˜®","ğŸ˜¢","ğŸ˜¡"];function S({pointerPosition:t,style:n}){const{dataChannel:o}=l.useContext(_),{messages:d,selectedMessageId:g}=l.useContext(m),a=d[g];let s=t.y-70,p=t.x-90;s<0&&(s=10),p<0&&(p=10);const i=r=>{r===a.reaction&&(r=-1);let c={type:"reaction",id:a.receivedId,reaction:r};o.current.send(JSON.stringify(c))};return e.jsx(x.ul,{className:v.reactionList,style:{top:s,left:p,...n},children:P.map((r,y)=>e.jsx("li",{onClick:()=>{i(y)},className:a.reaction===y?v.selectedReaction:"",children:r},y))})}const O="_replyInfo_t53j4_1",A="_replyingTo_t53j4_16",b="_selectedMessage_t53j4_21",u={replyInfo:O,replyingTo:A,selectedMessage:b};function D(){const{peerName:t}=l.useContext(_),{messages:n,selectedMessageId:o,setReplying:d}=l.useContext(m),g=n[o].sentId!=null?"yourself":t.current,a=n[o].content,s=()=>{d(!1)};return e.jsxs("div",{className:u.replyInfo,children:[e.jsxs("div",{className:u.messageContents,children:[e.jsxs("p",{className:u.replyingTo,children:["Replying to ",g]}),e.jsx("p",{className:u.selectedMessage,children:a})]}),e.jsx("img",{src:"./close.svg",width:16,height:16,onClick:s})]})}const V="_newMessageContainer_hryrq_1",$="_newMessage_hryrq_1",M={newMessageContainer:V,newMessage:$};function z({style:t}){const n=()=>{o.current.scrollIntoView({behavior:"smooth"})},{chatBottom:o}=l.useContext(m);return e.jsx("div",{className:M.newMessageContainer,children:e.jsx(x.div,{className:M.newMessage,onClick:n,style:t,children:"New Message"})})}const q=C.lazy(()=>j(()=>import("./ChatHeader-BDtrwhfm.js"),__vite__mapDeps([0,1,2]),import.meta.url)),B=C.lazy(()=>j(()=>import("./ChatComponent-CwPr3jzH.js"),__vite__mapDeps([3,1,4]),import.meta.url)),J=C.lazy(()=>j(()=>import("./InputSpace-vep1cYak.js"),__vite__mapDeps([5,1,6]),import.meta.url));function H(){l.useEffect(()=>{const c=()=>{p.current===!1&&(g(!1),a(!1))};return document.addEventListener("click",c),()=>{document.removeEventListener("click",c)}},[]);const{replying:t,newMessage:n,actionsShown:o,reactionsShown:d,setActionsShown:g,setReactionsShown:a,pointerPosition:s,longPressed:p}=l.useContext(m),i=f(d,{from:{scale:0,opacity:0},enter:{scale:1,opacity:1,config:{tension:200,friction:15}},leave:{scale:0,opacity:0,config:{tension:400,friction:20}}}),r=f(o,{from:{y:100,opacity:0},enter:{y:0,opacity:1,config:{tension:300,friction:25}},leave:{y:100,opacity:0,config:{tension:300,friction:25}}}),y=f(n,{from:{scale:0,opacity:0},enter:{scale:1,opacity:1,config:{tension:500,friction:15}},leave:{scale:0,opacity:0,config:{tension:500,friction:20}}});return e.jsxs("div",{className:I.chatContainer,children:[e.jsx(q,{}),e.jsx(B,{}),t&&e.jsx(D,{}),e.jsx(J,{}),i((c,h)=>h?e.jsx(S,{pointerPosition:s.current,style:c}):null),r((c,h)=>h?e.jsx(T,{style:c}):null),y((c,h)=>h?e.jsx(z,{style:c}):null)]})}export{H as default};
