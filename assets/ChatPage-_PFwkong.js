const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatHeader-2NyIAEJh.js","./index-CWDg0isr.js","./ChatHeader-UpnFzFzz.css","./ChatComponent-BkV__rM-.js","./ChatComponent-CQIoMCEJ.css","./InputSpace-BXDHED5R.js","./InputSpace-WWc10-hi.css"])))=>i.map(i=>d[i]);
import{r,C as f,b as M,c as m,j as e,d as C,e as _,R as x,_ as j}from"./index-CWDg0isr.js";const R="_chatContainer_us48c_1",I={chatContainer:R},N="_actionList_a3nu8_1",L={actionList:N};function k({style:t}){const{dataChannel:n}=r.useContext(f),{showNotification:o}=M(),d=()=>{console.log("Something happened!"),navigator.clipboard.writeText(l[s].content),o("The message has been copied!")},g=()=>{p(!0)},c=()=>{if(l[s].origin==="received")l[s].deleted=1;else{const a={type:"delete",sentId:l[s].sentId};n.current.send(JSON.stringify(a))}},{selectedMessageId:s,setReplying:p,messages:l}=r.useContext(m);return e.jsxs(C.ul,{className:L.actionList,style:{...t},children:[e.jsxs("li",{onClick:g,children:[e.jsx("img",{src:"./reply.svg",width:30,height:30}),"Reply"]}),e.jsxs("li",{onClick:d,children:[e.jsx("img",{src:"./copy.svg",width:30,height:30}),"Copy"]}),e.jsxs("li",{onClick:c,children:[e.jsx("img",{src:"./delete.svg",width:30,height:30}),"Delete"]})]})}const T="_reactionList_8jgw8_1",E="_selectedReaction_8jgw8_25",v={reactionList:T,selectedReaction:E},P=["👍","❤️","😆","😮","😢","😡"];function S({pointerPosition:t,style:n}){const{dataChannel:o}=r.useContext(f),{messages:d,selectedMessageId:g}=r.useContext(m),c=d[g];let s=t.y-70,p=t.x-90;s<0&&(s=10),p<0&&(p=10);const l=a=>{a===c.reaction&&(a=-1);let i={type:"reaction",id:c.receivedId,reaction:a};o.current.send(JSON.stringify(i))};return e.jsx(C.ul,{className:v.reactionList,style:{top:s,left:p,...n},children:P.map((a,h)=>e.jsx("li",{onClick:()=>{l(h)},className:c.reaction===h?v.selectedReaction:"",children:a},h))})}const b="_replyInfo_12k6b_1",A="_replyingTo_12k6b_15",O="_selectedMessage_12k6b_20",y={replyInfo:b,replyingTo:A,selectedMessage:O};function D(){const{peerName:t}=r.useContext(f),{messages:n,selectedMessageId:o,setReplying:d}=r.useContext(m),g=n[o].sentId!=null?"yourself":t.current,c=n[o].content,s=()=>{d(!1)};return e.jsxs("div",{className:y.replyInfo,children:[e.jsxs("div",{className:y.messageContents,children:[e.jsxs("p",{className:y.replyingTo,children:["Replying to ",g]}),e.jsx("p",{className:y.selectedMessage,children:c})]}),e.jsx("img",{src:"./close.svg",width:16,height:16,onClick:s})]})}const V="_newMessageContainer_82a2h_1",$="_newMessage_82a2h_1",w={newMessageContainer:V,newMessage:$};function z({style:t}){const n=()=>{o.current.scrollIntoView({behavior:"smooth"})},{chatBottom:o}=r.useContext(m);return e.jsx("div",{className:w.newMessageContainer,children:e.jsx(C.div,{className:w.newMessage,onClick:n,style:t,children:"New Message"})})}const B=x.lazy(()=>j(()=>import("./ChatHeader-2NyIAEJh.js"),__vite__mapDeps([0,1,2]),import.meta.url)),J=x.lazy(()=>j(()=>import("./ChatComponent-BkV__rM-.js"),__vite__mapDeps([3,1,4]),import.meta.url)),H=x.lazy(()=>j(()=>import("./InputSpace-BXDHED5R.js"),__vite__mapDeps([5,1,6]),import.meta.url));function F(){r.useEffect(()=>{const i=()=>{p.current===!1&&(g(!1),c(!1))};return document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}},[]);const{replying:t,newMessage:n,actionsShown:o,reactionsShown:d,setActionsShown:g,setReactionsShown:c,pointerPosition:s,longPressed:p}=r.useContext(m),l=_(d,{from:{scale:0,opacity:0},enter:{scale:1,opacity:1,config:{tension:200,friction:15}},leave:{scale:0,opacity:0,config:{tension:400,friction:20}}}),a=_(o,{from:{y:100,opacity:0},enter:{y:0,opacity:1,config:{tension:300,friction:25}},leave:{y:100,opacity:0,config:{tension:300,friction:25}}}),h=_(n,{from:{scale:0,opacity:0},enter:{scale:1,opacity:1,config:{tension:500,friction:15}},leave:{scale:0,opacity:0,config:{tension:500,friction:20}}});return e.jsxs("div",{className:I.chatContainer,children:[e.jsx(B,{}),e.jsx(J,{}),t&&e.jsx(D,{}),e.jsx(H,{}),l((i,u)=>u?e.jsx(S,{pointerPosition:s.current,style:i}):null),a((i,u)=>u?e.jsx(k,{style:i}):null),h((i,u)=>u?e.jsx(z,{style:i}):null)]})}export{F as default};
