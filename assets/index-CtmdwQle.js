(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();function G6(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var om={exports:{}},Dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function F6(){if(Ry)return Dl;Ry=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:n,type:r,key:h,ref:o!==void 0?o:null,props:u}}return Dl.Fragment=t,Dl.jsx=i,Dl.jsxs=i,Dl}var Iy;function Q6(){return Iy||(Iy=1,om.exports=F6()),om.exports}var I=Q6(),lm={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function Y6(){if(xy)return kt;xy=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function T(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,j={};function k(M,J,ct){this.props=M,this.context=J,this.refs=j,this.updater=ct||R}k.prototype.isReactComponent={},k.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function z(){}z.prototype=k.prototype;function W(M,J,ct){this.props=M,this.context=J,this.refs=j,this.updater=ct||R}var Q=W.prototype=new z;Q.constructor=W,V(Q,k.prototype),Q.isPureReactComponent=!0;var et=Array.isArray,tt={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function x(M,J,ct,ot,pt,Tt){return ct=Tt.ref,{$$typeof:n,type:M,key:J,ref:ct!==void 0?ct:null,props:Tt}}function w(M,J){return x(M.type,J,void 0,void 0,void 0,M.props)}function C(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ct){return J[ct]})}var L=/\/+/g;function P(M,J){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):J.toString(36)}function D(){}function dt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function mt(M,J,ct,ot,pt){var Tt=typeof M;(Tt==="undefined"||Tt==="boolean")&&(M=null);var Et=!1;if(M===null)Et=!0;else switch(Tt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(M.$$typeof){case n:case t:Et=!0;break;case v:return Et=M._init,mt(Et(M._payload),J,ct,ot,pt)}}if(Et)return pt=pt(M),Et=ot===""?"."+P(M,0):ot,et(pt)?(ct="",Et!=null&&(ct=Et.replace(L,"$&/")+"/"),mt(pt,J,ct,"",function(At){return At})):pt!=null&&(C(pt)&&(pt=w(pt,ct+(pt.key==null||M&&M.key===pt.key?"":(""+pt.key).replace(L,"$&/")+"/")+Et)),J.push(pt)),1;Et=0;var Lt=ot===""?".":ot+":";if(et(M))for(var ht=0;ht<M.length;ht++)ot=M[ht],Tt=Lt+P(ot,ht),Et+=mt(ot,J,ct,Tt,pt);else if(ht=T(M),typeof ht=="function")for(M=ht.call(M),ht=0;!(ot=M.next()).done;)ot=ot.value,Tt=Lt+P(ot,ht++),Et+=mt(ot,J,ct,Tt,pt);else if(Tt==="object"){if(typeof M.then=="function")return mt(dt(M),J,ct,ot,pt);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Et}function G(M,J,ct){if(M==null)return M;var ot=[],pt=0;return mt(M,ot,"","",function(Tt){return J.call(ct,Tt,pt++)}),ot}function st(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(ct){(M._status===0||M._status===-1)&&(M._status=1,M._result=ct)},function(ct){(M._status===0||M._status===-1)&&(M._status=2,M._result=ct)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var ut=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function _t(){}return kt.Children={map:G,forEach:function(M,J,ct){G(M,function(){J.apply(this,arguments)},ct)},count:function(M){var J=0;return G(M,function(){J++}),J},toArray:function(M){return G(M,function(J){return J})||[]},only:function(M){if(!C(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},kt.Component=k,kt.Fragment=i,kt.Profiler=o,kt.PureComponent=W,kt.StrictMode=r,kt.Suspense=y,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=tt,kt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return tt.H.useMemoCache(M)}},kt.cache=function(M){return function(){return M.apply(null,arguments)}},kt.cloneElement=function(M,J,ct){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ot=V({},M.props),pt=M.key,Tt=void 0;if(J!=null)for(Et in J.ref!==void 0&&(Tt=void 0),J.key!==void 0&&(pt=""+J.key),J)!Y.call(J,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&J.ref===void 0||(ot[Et]=J[Et]);var Et=arguments.length-2;if(Et===1)ot.children=ct;else if(1<Et){for(var Lt=Array(Et),ht=0;ht<Et;ht++)Lt[ht]=arguments[ht+2];ot.children=Lt}return x(M.type,pt,void 0,void 0,Tt,ot)},kt.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},kt.createElement=function(M,J,ct){var ot,pt={},Tt=null;if(J!=null)for(ot in J.key!==void 0&&(Tt=""+J.key),J)Y.call(J,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(pt[ot]=J[ot]);var Et=arguments.length-2;if(Et===1)pt.children=ct;else if(1<Et){for(var Lt=Array(Et),ht=0;ht<Et;ht++)Lt[ht]=arguments[ht+2];pt.children=Lt}if(M&&M.defaultProps)for(ot in Et=M.defaultProps,Et)pt[ot]===void 0&&(pt[ot]=Et[ot]);return x(M,Tt,void 0,void 0,null,pt)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(M){return{$$typeof:m,render:M}},kt.isValidElement=C,kt.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:st}},kt.memo=function(M,J){return{$$typeof:g,type:M,compare:J===void 0?null:J}},kt.startTransition=function(M){var J=tt.T,ct={};tt.T=ct;try{var ot=M(),pt=tt.S;pt!==null&&pt(ct,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(_t,ut)}catch(Tt){ut(Tt)}finally{tt.T=J}},kt.unstable_useCacheRefresh=function(){return tt.H.useCacheRefresh()},kt.use=function(M){return tt.H.use(M)},kt.useActionState=function(M,J,ct){return tt.H.useActionState(M,J,ct)},kt.useCallback=function(M,J){return tt.H.useCallback(M,J)},kt.useContext=function(M){return tt.H.useContext(M)},kt.useDebugValue=function(){},kt.useDeferredValue=function(M,J){return tt.H.useDeferredValue(M,J)},kt.useEffect=function(M,J,ct){var ot=tt.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ot.useEffect(M,J)},kt.useId=function(){return tt.H.useId()},kt.useImperativeHandle=function(M,J,ct){return tt.H.useImperativeHandle(M,J,ct)},kt.useInsertionEffect=function(M,J){return tt.H.useInsertionEffect(M,J)},kt.useLayoutEffect=function(M,J){return tt.H.useLayoutEffect(M,J)},kt.useMemo=function(M,J){return tt.H.useMemo(M,J)},kt.useOptimistic=function(M,J){return tt.H.useOptimistic(M,J)},kt.useReducer=function(M,J,ct){return tt.H.useReducer(M,J,ct)},kt.useRef=function(M){return tt.H.useRef(M)},kt.useState=function(M){return tt.H.useState(M)},kt.useSyncExternalStore=function(M,J,ct){return tt.H.useSyncExternalStore(M,J,ct)},kt.useTransition=function(){return tt.H.useTransition()},kt.version="19.1.0",kt}var Dy;function Mf(){return Dy||(Dy=1,lm.exports=Y6()),lm.exports}var X=Mf();const Kr=G6(X);var um={exports:{}},Ml={},cm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function K6(){return My||(My=1,function(n){function t(G,st){var ut=G.length;G.push(st);t:for(;0<ut;){var _t=ut-1>>>1,M=G[_t];if(0<o(M,st))G[_t]=st,G[ut]=M,ut=_t;else break t}}function i(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var st=G[0],ut=G.pop();if(ut!==st){G[0]=ut;t:for(var _t=0,M=G.length,J=M>>>1;_t<J;){var ct=2*(_t+1)-1,ot=G[ct],pt=ct+1,Tt=G[pt];if(0>o(ot,ut))pt<M&&0>o(Tt,ot)?(G[_t]=Tt,G[pt]=ut,_t=pt):(G[_t]=ot,G[ct]=ut,_t=ct);else if(pt<M&&0>o(Tt,ut))G[_t]=Tt,G[pt]=ut,_t=pt;else break t}}return st}function o(G,st){var ut=G.sortIndex-st.sortIndex;return ut!==0?ut:G.id-st.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var y=[],g=[],v=1,b=null,T=3,R=!1,V=!1,j=!1,k=!1,z=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function et(G){for(var st=i(g);st!==null;){if(st.callback===null)r(g);else if(st.startTime<=G)r(g),st.sortIndex=st.expirationTime,t(y,st);else break;st=i(g)}}function tt(G){if(j=!1,et(G),!V)if(i(y)!==null)V=!0,Y||(Y=!0,P());else{var st=i(g);st!==null&&mt(tt,st.startTime-G)}}var Y=!1,x=-1,w=5,C=-1;function O(){return k?!0:!(n.unstable_now()-C<w)}function L(){if(k=!1,Y){var G=n.unstable_now();C=G;var st=!0;try{t:{V=!1,j&&(j=!1,W(x),x=-1),R=!0;var ut=T;try{e:{for(et(G),b=i(y);b!==null&&!(b.expirationTime>G&&O());){var _t=b.callback;if(typeof _t=="function"){b.callback=null,T=b.priorityLevel;var M=_t(b.expirationTime<=G);if(G=n.unstable_now(),typeof M=="function"){b.callback=M,et(G),st=!0;break e}b===i(y)&&r(y),et(G)}else r(y);b=i(y)}if(b!==null)st=!0;else{var J=i(g);J!==null&&mt(tt,J.startTime-G),st=!1}}break t}finally{b=null,T=ut,R=!1}st=void 0}}finally{st?P():Y=!1}}}var P;if(typeof Q=="function")P=function(){Q(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,dt=D.port2;D.port1.onmessage=L,P=function(){dt.postMessage(null)}}else P=function(){z(L,0)};function mt(G,st){x=z(function(){G(n.unstable_now())},st)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(G){switch(T){case 1:case 2:case 3:var st=3;break;default:st=T}var ut=T;T=st;try{return G()}finally{T=ut}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(G,st){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ut=T;T=G;try{return st()}finally{T=ut}},n.unstable_scheduleCallback=function(G,st,ut){var _t=n.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?_t+ut:_t):ut=_t,G){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ut+M,G={id:v++,callback:st,priorityLevel:G,startTime:ut,expirationTime:M,sortIndex:-1},ut>_t?(G.sortIndex=ut,t(g,G),i(y)===null&&G===i(g)&&(j?(W(x),x=-1):j=!0,mt(tt,ut-_t))):(G.sortIndex=M,t(y,G),V||R||(V=!0,Y||(Y=!0,P()))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var st=T;return function(){var ut=T;T=st;try{return G.apply(this,arguments)}finally{T=ut}}}}(fm)),fm}var Vy;function $6(){return Vy||(Vy=1,cm.exports=K6()),cm.exports}var hm={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function X6(){if(Ny)return ln;Ny=1;var n=Mf();function t(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,g,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:g,implementation:v}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ln.createPortal=function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(y,g,null,v)},ln.flushSync=function(y){var g=h.T,v=r.p;try{if(h.T=null,r.p=2,y)return y()}finally{h.T=g,r.p=v,r.d.f()}},ln.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},ln.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},ln.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:R}):v==="script"&&r.d.X(y,{crossOrigin:b,integrity:T,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ln.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},ln.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,b=m(v,g.crossOrigin);r.d.L(y,v,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ln.preloadModule=function(y,g){if(typeof y=="string")if(g){var v=m(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},ln.requestFormReset=function(y){r.d.r(y)},ln.unstable_batchedUpdates=function(y,g){return y(g)},ln.useFormState=function(y,g,v){return h.H.useFormState(y,g,v)},ln.useFormStatus=function(){return h.H.useHostTransitionStatus()},ln.version="19.1.0",ln}var Oy;function M_(){if(Oy)return hm.exports;Oy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),hm.exports=X6(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function Z6(){if(Ly)return Ml;Ly=1;var n=$6(),t=Mf(),i=M_();function r(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function h(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(r(188))}function y(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(r(188));return s!==e?null:e}for(var a=e,l=s;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),e;if(d===l)return m(f),s;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var E=!1,S=f.child;S;){if(S===a){E=!0,a=f,l=d;break}if(S===l){E=!0,l=f,a=d;break}S=S.sibling}if(!E){for(S=d.child;S;){if(S===a){E=!0,a=d,l=f;break}if(S===l){E=!0,l=d,a=f;break}S=S.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:s}function g(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=g(e),s!==null)return s;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),et=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=L&&e[L]||e["@@iterator"],typeof e=="function"?e:null)}var D=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===D?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case tt:return"Suspense";case Y:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case Q:return(e.displayName||"Context")+".Provider";case W:return(e._context.displayName||"Context")+".Consumer";case et:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case x:return s=e.displayName||null,s!==null?s:dt(e.type)||"Memo";case w:s=e._payload,e=e._init;try{return dt(e(s))}catch{}}return null}var mt=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},_t=[],M=-1;function J(e){return{current:e}}function ct(e){0>M||(e.current=_t[M],_t[M]=null,M--)}function ot(e,s){M++,_t[M]=e.current,e.current=s}var pt=J(null),Tt=J(null),Et=J(null),Lt=J(null);function ht(e,s){switch(ot(Et,s),ot(Tt,e),ot(pt,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?ey(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=ey(s),e=ny(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ct(pt),ot(pt,e)}function At(){ct(pt),ct(Tt),ct(Et)}function Dt(e){e.memoizedState!==null&&ot(Lt,e);var s=pt.current,a=ny(s,e.type);s!==a&&(ot(Tt,e),ot(pt,a))}function se(e){Tt.current===e&&(ct(pt),ct(Tt)),Lt.current===e&&(ct(Lt),wl._currentValue=ut)}var ee=Object.prototype.hasOwnProperty,Te=n.unstable_scheduleCallback,Ae=n.unstable_cancelCallback,pe=n.unstable_shouldYield,hn=n.unstable_requestPaint,De=n.unstable_now,mi=n.unstable_getCurrentPriorityLevel,dn=n.unstable_ImmediatePriority,an=n.unstable_UserBlockingPriority,mn=n.unstable_NormalPriority,gn=n.unstable_LowPriority,Mn=n.unstable_IdlePriority,zn=n.log,Bi=n.unstable_setDisableYieldValue,Zt=null,Gt=null;function pn(e){if(typeof zn=="function"&&Bi(e),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Zt,e)}catch{}}var he=Math.clz32?Math.clz32:hr,ia=Math.log,uh=Math.LN2;function hr(e){return e>>>=0,e===0?32:31-(ia(e)/uh|0)|0}var dr=256,mr=4194304;function ri(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function sa(e,s,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=ri(l):(E&=S,E!==0?f=ri(E):a||(a=S&~e,a!==0&&(f=ri(a))))):(S=l&~d,S!==0?f=ri(S):E!==0?f=ri(E):a||(a=l&~e,a!==0&&(f=ri(a)))),f===0?0:s!==0&&s!==f&&(s&d)===0&&(d=f&-f,a=s&-s,d>=a||d===32&&(a&4194048)!==0)?s:f}function gr(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function wo(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Co(){var e=dr;return dr<<=1,(dr&4194048)===0&&(dr=256),e}function Ro(){var e=mr;return mr<<=1,(mr&62914560)===0&&(mr=4194304),e}function zi(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function qi(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Io(e,s,a,l,f,d){var E=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,N=e.expirationTimes,F=e.hiddenUpdates;for(a=E&~a;0<a;){var nt=31-he(a),rt=1<<nt;S[nt]=0,N[nt]=-1;var K=F[nt];if(K!==null)for(F[nt]=null,nt=0;nt<K.length;nt++){var $=K[nt];$!==null&&($.lane&=-536870913)}a&=~rt}l!==0&&gi(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(E&~s))}function gi(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-he(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function xo(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var l=31-he(a),f=1<<l;f&s|e[l]&s&&(e[l]|=s),a&=~f}}function vs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ra(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Es(){var e=st.p;return e!==0?e:(e=window.event,e===void 0?32:Ty(e.type))}function Su(e,s){var a=st.p;try{return st.p=e,s()}finally{st.p=a}}var de=Math.random().toString(36).slice(2),Pe="__reactFiber$"+de,Me="__reactProps$"+de,qn="__reactContainer$"+de,Do="__reactEvents$"+de,ch="__reactListeners$"+de,Ts="__reactHandles$"+de,Au="__reactResources$"+de,pr="__reactMarker$"+de;function bs(e){delete e[Pe],delete e[Me],delete e[Do],delete e[ch],delete e[Ts]}function Hi(e){var s=e[Pe];if(s)return s;for(var a=e.parentNode;a;){if(s=a[qn]||a[Pe]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=ay(e);e!==null;){if(a=e[Pe])return a;e=ay(e)}return s}e=a,a=e.parentNode}return null}function pi(e){if(e=e[Pe]||e[qn]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function yi(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(r(33))}function yn(e){var s=e[Au];return s||(s=e[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function we(e){e[pr]=!0}var Mo=new Set,aa={};function ai(e,s){Gi(e,s),Gi(e+"Capture",s)}function Gi(e,s){for(aa[e]=s,e=0;e<s.length;e++)Mo.add(s[e])}var wu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cu={},yr={};function Ru(e){return ee.call(yr,e)?!0:ee.call(Cu,e)?!1:wu.test(e)?yr[e]=!0:(Cu[e]=!0,!1)}function Ss(e,s,a){if(Ru(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function _i(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function Ze(e,s,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+l)}}var _r,Iu;function Fi(e){if(_r===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);_r=s&&s[1]||"",Iu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_r+e+Iu}var oa=!1;function la(e,s){if(!e||oa)return"";oa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch($){var K=$}Reflect.construct(e,[],rt)}else{try{rt.call()}catch($){K=$}e.call(rt.prototype)}}else{try{throw Error()}catch($){K=$}(rt=e())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],S=d[1];if(E&&S){var N=E.split(`
`),F=S.split(`
`);for(f=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===N.length||f===F.length)for(l=N.length-1,f=F.length-1;1<=l&&0<=f&&N[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(N[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||N[l]!==F[f]){var nt=`
`+N[l].replace(" at new "," at ");return e.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",e.displayName)),nt}while(1<=l&&0<=f);break}}}finally{oa=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Fi(a):""}function Vo(e){switch(e.tag){case 26:case 27:case 5:return Fi(e.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return la(e.type,!1);case 11:return la(e.type.render,!1);case 1:return la(e.type,!0);case 31:return Fi("Activity");default:return""}}function ua(e){try{var s="";do s+=Vo(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function No(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function fh(e){var s=No(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),l=""+e[s];if(!e.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function ca(e){e._valueTracker||(e._valueTracker=fh(e))}function Oo(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return e&&(l=No(e)?e.checked?"true":"false":e.value),e=l,e!==a?(s.setValue(e),!0):!1}function vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var hh=/[\n"\\]/g;function Ve(e){return e.replace(hh,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Vn(e,s,a,l,f,d,E,S){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),s!=null?E==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+_n(s)):e.value!==""+_n(s)&&(e.value=""+_n(s)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),s!=null?As(e,E,_n(s)):a!=null?As(e,E,_n(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+_n(S):e.removeAttribute("name")}function Er(e,s,a,l,f,d,E,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),s!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||s!=null))return;a=a!=null?""+_n(a):"",s=s!=null?""+_n(s):a,S||s===e.value||(e.value=s),e.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function As(e,s,a){s==="number"&&vr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Qi(e,s,a,l){if(e=e.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=s.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+_n(a),s=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}s!==null||e[f].disabled||(s=e[f])}s!==null&&(s.selected=!0)}}function re(e,s,a){if(s!=null&&(s=""+_n(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+_n(a):""}function Tr(e,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(mt(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=_n(s),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Hn(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xu(e,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,a):typeof a!="number"||a===0||br.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function Lo(e,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&xu(e,f,l)}else for(var d in s)s.hasOwnProperty(d)&&xu(e,d,s[d])}function ko(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fa(e){return mh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Yi=null;function Gn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ki=null,$i=null;function Po(e){var s=pi(e);if(s&&(e=s.stateNode)){var a=e[Me]||null;t:switch(e=s.stateNode,s.type){case"input":if(Vn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ve(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==e&&l.form===e.form){var f=l[Me]||null;if(!f)throw Error(r(90));Vn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===e.form&&Oo(l)}break t;case"textarea":re(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Qi(e,!!a.multiple,s,!1)}}}var vi=!1;function Du(e,s,a){if(vi)return e(s,a);vi=!0;try{var l=e(s);return l}finally{if(vi=!1,(Ki!==null||$i!==null)&&(Sc(),Ki&&(s=Ki,e=$i,$i=Ki=null,Po(s),e)))for(s=0;s<e.length;s++)Po(e[s])}}function Sr(e,s){var a=e.stateNode;if(a===null)return null;var l=a[Me]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fn=!1;if(oi)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Fn=!1}var Ei=null,ws=null,Xi=null;function Uo(){if(Xi)return Xi;var e,s=ws,a=s.length,l,f="value"in Ei?Ei.value:Ei.textContent,d=f.length;for(e=0;e<a&&s[e]===f[e];e++);var E=a-e;for(l=1;l<=E&&s[a-l]===f[d-l];l++);return Xi=f.slice(e,1<l?1-l:void 0)}function Ti(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function bi(){return!0}function jo(){return!1}function Fe(e){function s(a,l,f,d,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?bi:jo,this.isPropagationStopped=jo,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),s}var Wt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=Fe(Wt),wr=v({},Wt,{view:0,detail:0}),Mu=Fe(wr),da,ma,Si,Cr=v({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Si&&(Si&&e.type==="mousemove"?(da=e.screenX-Si.screenX,ma=e.screenY-Si.screenY):ma=da=0,Si=e),da)},movementY:function(e){return"movementY"in e?e.movementY:ma}}),Qn=Fe(Cr),Vu=v({},Cr,{dataTransfer:0}),gh=Fe(Vu),Rr=v({},wr,{relatedTarget:0}),ga=Fe(Rr),Bo=v({},Wt,{animationName:0,elapsedTime:0,pseudoElement:0}),pa=Fe(Bo),Nu=v({},Wt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ya=Fe(Nu),ph=v({},Wt,{data:0}),zo=Fe(ph),Ir={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ou={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qo(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Lu[e])?!!s[e]:!1}function xr(){return qo}var ku=v({},wr,{key:function(e){if(e.key){var s=Ir[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Ti(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ou[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(e){return e.type==="keypress"?Ti(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ti(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_a=Fe(ku),Pu=v({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ho=Fe(Pu),Zi=v({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),Uu=Fe(Zi),ju=v({},Wt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bu=Fe(ju),zu=v({},Cr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),va=Fe(zu),vn=v({},Wt,{newState:0,oldState:0}),qu=Fe(vn),Hu=[9,13,27,32],Ai=oi&&"CompositionEvent"in window,c=null;oi&&"documentMode"in document&&(c=document.documentMode);var p=oi&&"TextEvent"in window&&!c,_=oi&&(!Ai||c&&8<c&&11>=c),A=" ",q=!1;function Z(e,s){switch(e){case"keyup":return Hu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ft=!1;function Ue(e,s){switch(e){case"compositionend":return gt(s);case"keypress":return s.which!==32?null:(q=!0,A);case"textInput":return e=s.data,e===A&&q?null:e;default:return null}}function Qt(e,s){if(Ft)return e==="compositionend"||!Ai&&Z(e,s)?(e=Uo(),Xi=ws=Ei=null,Ft=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _&&s.locale!=="ko"?null:s.data;default:return null}}var Qe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function je(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Qe[e.type]:s==="textarea"}function Ji(e,s,a,l){Ki?$i?$i.push(l):$i=[l]:Ki=l,s=xc(s,"onChange"),0<s.length&&(a=new ha("onChange","change",null,a,l),e.push({event:a,listeners:s}))}var Je=null,wi=null;function Go(e){X0(e,0)}function Gu(e){var s=yi(e);if(Oo(s))return e}function yg(e,s){if(e==="change")return s}var _g=!1;if(oi){var yh;if(oi){var _h="oninput"in document;if(!_h){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),_h=typeof vg.oninput=="function"}yh=_h}else yh=!1;_g=yh&&(!document.documentMode||9<document.documentMode)}function Eg(){Je&&(Je.detachEvent("onpropertychange",Tg),wi=Je=null)}function Tg(e){if(e.propertyName==="value"&&Gu(wi)){var s=[];Ji(s,wi,e,Gn(e)),Du(Go,s)}}function E4(e,s,a){e==="focusin"?(Eg(),Je=s,wi=a,Je.attachEvent("onpropertychange",Tg)):e==="focusout"&&Eg()}function T4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gu(wi)}function b4(e,s){if(e==="click")return Gu(s)}function S4(e,s){if(e==="input"||e==="change")return Gu(s)}function A4(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Nn=typeof Object.is=="function"?Object.is:A4;function Fo(e,s){if(Nn(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!ee.call(s,f)||!Nn(e[f],s[f]))return!1}return!0}function bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sg(e,s){var a=bg(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=s&&l>=s)return{node:a,offset:s-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=bg(a)}}function Ag(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Ag(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function wg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=vr(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=vr(e.document)}return s}function vh(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var w4=oi&&"documentMode"in document&&11>=document.documentMode,Ea=null,Eh=null,Qo=null,Th=!1;function Cg(e,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Th||Ea==null||Ea!==vr(l)||(l=Ea,"selectionStart"in l&&vh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Qo&&Fo(Qo,l)||(Qo=l,l=xc(Eh,"onSelect"),0<l.length&&(s=new ha("onSelect","select",null,s,a),e.push({event:s,listeners:l}),s.target=Ea)))}function Dr(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var Ta={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},bh={},Rg={};oi&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Mr(e){if(bh[e])return bh[e];if(!Ta[e])return e;var s=Ta[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in Rg)return bh[e]=s[a];return e}var Ig=Mr("animationend"),xg=Mr("animationiteration"),Dg=Mr("animationstart"),C4=Mr("transitionrun"),R4=Mr("transitionstart"),I4=Mr("transitioncancel"),Mg=Mr("transitionend"),Vg=new Map,Sh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sh.push("scrollEnd");function li(e,s){Vg.set(e,s),ai(s,[e])}var Ng=new WeakMap;function Yn(e,s){if(typeof e=="object"&&e!==null){var a=Ng.get(e);return a!==void 0?a:(s={value:e,source:s,stack:ua(s)},Ng.set(e,s),s)}return{value:e,source:s,stack:ua(s)}}var Kn=[],ba=0,Ah=0;function Fu(){for(var e=ba,s=Ah=ba=0;s<e;){var a=Kn[s];Kn[s++]=null;var l=Kn[s];Kn[s++]=null;var f=Kn[s];Kn[s++]=null;var d=Kn[s];if(Kn[s++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}d!==0&&Og(a,f,d)}}function Qu(e,s,a,l){Kn[ba++]=e,Kn[ba++]=s,Kn[ba++]=a,Kn[ba++]=l,Ah|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function wh(e,s,a,l){return Qu(e,s,a,l),Yu(e)}function Sa(e,s){return Qu(e,null,null,s),Yu(e)}function Og(e,s,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&s!==null&&(f=31-he(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[s]:l.push(s),s.lane=a|536870912),d):null}function Yu(e){if(50<yl)throw yl=0,Md=null,Error(r(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var Aa={};function x4(e,s,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(e,s,a,l){return new x4(e,s,a,l)}function Ch(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wi(e,s){var a=e.alternate;return a===null?(a=On(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Lg(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Ku(e,s,a,l,f,d){var E=0;if(l=e,typeof e=="function")Ch(e)&&(E=1);else if(typeof e=="string")E=M6(e,a,pt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=On(31,a,s,f),e.elementType=C,e.lanes=d,e;case V:return Vr(a.children,f,d,s);case j:E=8,f|=24;break;case k:return e=On(12,a,s,f|2),e.elementType=k,e.lanes=d,e;case tt:return e=On(13,a,s,f),e.elementType=tt,e.lanes=d,e;case Y:return e=On(19,a,s,f),e.elementType=Y,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:case Q:E=10;break t;case W:E=9;break t;case et:E=11;break t;case x:E=14;break t;case w:E=16,l=null;break t}E=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return s=On(E,a,s,f),s.elementType=e,s.type=l,s.lanes=d,s}function Vr(e,s,a,l){return e=On(7,e,l,s),e.lanes=a,e}function Rh(e,s,a){return e=On(6,e,null,s),e.lanes=a,e}function Ih(e,s,a){return s=On(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var wa=[],Ca=0,$u=null,Xu=0,$n=[],Xn=0,Nr=null,ts=1,es="";function Or(e,s){wa[Ca++]=Xu,wa[Ca++]=$u,$u=e,Xu=s}function kg(e,s,a){$n[Xn++]=ts,$n[Xn++]=es,$n[Xn++]=Nr,Nr=e;var l=ts;e=es;var f=32-he(l)-1;l&=~(1<<f),a+=1;var d=32-he(s)+f;if(30<d){var E=f-f%5;d=(l&(1<<E)-1).toString(32),l>>=E,f-=E,ts=1<<32-he(s)+f|a<<f|l,es=d+e}else ts=1<<d|a<<f|l,es=e}function xh(e){e.return!==null&&(Or(e,1),kg(e,1,0))}function Dh(e){for(;e===$u;)$u=wa[--Ca],wa[Ca]=null,Xu=wa[--Ca],wa[Ca]=null;for(;e===Nr;)Nr=$n[--Xn],$n[Xn]=null,es=$n[--Xn],$n[Xn]=null,ts=$n[--Xn],$n[Xn]=null}var En=null,be=null,Jt=!1,Lr=null,Ci=!1,Mh=Error(r(519));function kr(e){var s=Error(r(418,""));throw $o(Yn(s,e)),Mh}function Pg(e){var s=e.stateNode,a=e.type,l=e.memoizedProps;switch(s[Pe]=e,s[Me]=l,a){case"dialog":qt("cancel",s),qt("close",s);break;case"iframe":case"object":case"embed":qt("load",s);break;case"video":case"audio":for(a=0;a<vl.length;a++)qt(vl[a],s);break;case"source":qt("error",s);break;case"img":case"image":case"link":qt("error",s),qt("load",s);break;case"details":qt("toggle",s);break;case"input":qt("invalid",s),Er(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ca(s);break;case"select":qt("invalid",s);break;case"textarea":qt("invalid",s),Tr(s,l.value,l.defaultValue,l.children),ca(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||ty(s.textContent,a)?(l.popover!=null&&(qt("beforetoggle",s),qt("toggle",s)),l.onScroll!=null&&qt("scroll",s),l.onScrollEnd!=null&&qt("scrollend",s),l.onClick!=null&&(s.onclick=Dc),s=!0):s=!1,s||kr(e)}function Ug(e){for(En=e.return;En;)switch(En.tag){case 5:case 13:Ci=!1;return;case 27:case 3:Ci=!0;return;default:En=En.return}}function Yo(e){if(e!==En)return!1;if(!Jt)return Ug(e),Jt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Yd(e.type,e.memoizedProps)),a=!a),a&&be&&kr(e),Ug(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){be=ci(e.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}be=null}}else s===27?(s=be,zs(e.type)?(e=Zd,Zd=null,be=e):be=s):be=En?ci(e.stateNode.nextSibling):null;return!0}function Ko(){be=En=null,Jt=!1}function jg(){var e=Lr;return e!==null&&(An===null?An=e:An.push.apply(An,e),Lr=null),e}function $o(e){Lr===null?Lr=[e]:Lr.push(e)}var Vh=J(null),Pr=null,ns=null;function Cs(e,s,a){ot(Vh,s._currentValue),s._currentValue=a}function is(e){e._currentValue=Vh.current,ct(Vh)}function Nh(e,s,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===a)break;e=e.return}}function Oh(e,s,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var E=f.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=f;for(var N=0;N<s.length;N++)if(S.context===s[N]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Nh(d.return,a,e),l||(E=null);break t}d=S.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Nh(E,a,e),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===e){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Xo(e,s,a,l){e=null;for(var f=s,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=f.type;Nn(f.pendingProps.value,E.value)||(e!==null?e.push(S):e=[S])}}else if(f===Lt.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(wl):e=[wl])}f=f.return}e!==null&&Oh(s,e,a,l),s.flags|=262144}function Zu(e){for(e=e.firstContext;e!==null;){if(!Nn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ur(e){Pr=e,ns=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function on(e){return Bg(Pr,e)}function Ju(e,s){return Pr===null&&Ur(e),Bg(e,s)}function Bg(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ns===null){if(e===null)throw Error(r(308));ns=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else ns=ns.next=s;return a}var D4=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},M4=n.unstable_scheduleCallback,V4=n.unstable_NormalPriority,Be={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lh(){return{controller:new D4,data:new Map,refCount:0}}function Zo(e){e.refCount--,e.refCount===0&&M4(V4,function(){e.controller.abort()})}var Jo=null,kh=0,Ra=0,Ia=null;function N4(e,s){if(Jo===null){var a=Jo=[];kh=0,Ra=Ud(),Ia={status:"pending",value:void 0,then:function(l){a.push(l)}}}return kh++,s.then(zg,zg),s}function zg(){if(--kh===0&&Jo!==null){Ia!==null&&(Ia.status="fulfilled");var e=Jo;Jo=null,Ra=0,Ia=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function O4(e,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var qg=G.S;G.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&N4(e,s),qg!==null&&qg(e,s)};var jr=J(null);function Ph(){var e=jr.current;return e!==null?e:ce.pooledCache}function Wu(e,s){s===null?ot(jr,jr.current):ot(jr,s.pool)}function Hg(){var e=Ph();return e===null?null:{parent:Be._currentValue,pool:e}}var Wo=Error(r(460)),Gg=Error(r(474)),tc=Error(r(542)),Uh={then:function(){}};function Fg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ec(){}function Qg(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(ec,ec),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Kg(e),e;default:if(typeof s.status=="string")s.then(ec,ec);else{if(e=ce,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Kg(e),e}throw tl=s,Wo}}var tl=null;function Yg(){if(tl===null)throw Error(r(459));var e=tl;return tl=null,e}function Kg(e){if(e===Wo||e===tc)throw Error(r(483))}var Rs=!1;function jh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xs(e,s,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ne&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=Yu(e),Og(e,null,a),s}return Qu(e,l,s,a),Yu(e)}function el(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,xo(e,a)}}function zh(e,s){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?f=d=s:d=d.next=s}else f=d=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var qh=!1;function nl(){if(qh){var e=Ia;if(e!==null)throw e}}function il(e,s,a,l){qh=!1;var f=e.updateQueue;Rs=!1;var d=f.firstBaseUpdate,E=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var N=S,F=N.next;N.next=null,E===null?d=F:E.next=F,E=N;var nt=e.alternate;nt!==null&&(nt=nt.updateQueue,S=nt.lastBaseUpdate,S!==E&&(S===null?nt.firstBaseUpdate=F:S.next=F,nt.lastBaseUpdate=N))}if(d!==null){var rt=f.baseState;E=0,nt=F=N=null,S=d;do{var K=S.lane&-536870913,$=K!==S.lane;if($?(Yt&K)===K:(l&K)===K){K!==0&&K===Ra&&(qh=!0),nt!==null&&(nt=nt.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var xt=e,Ct=S;K=s;var le=a;switch(Ct.tag){case 1:if(xt=Ct.payload,typeof xt=="function"){rt=xt.call(le,rt,K);break t}rt=xt;break t;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Ct.payload,K=typeof xt=="function"?xt.call(le,rt,K):xt,K==null)break t;rt=v({},rt,K);break t;case 2:Rs=!0}}K=S.callback,K!==null&&(e.flags|=64,$&&(e.flags|=8192),$=f.callbacks,$===null?f.callbacks=[K]:$.push(K))}else $={lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},nt===null?(F=nt=$,N=rt):nt=nt.next=$,E|=K;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;$=S,S=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);nt===null&&(N=rt),f.baseState=N,f.firstBaseUpdate=F,f.lastBaseUpdate=nt,d===null&&(f.shared.lanes=0),Ps|=E,e.lanes=E,e.memoizedState=rt}}function $g(e,s){if(typeof e!="function")throw Error(r(191,e));e.call(s)}function Xg(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)$g(a[e],s)}var xa=J(null),nc=J(0);function Zg(e,s){e=cs,ot(nc,e),ot(xa,s),cs=e|s.baseLanes}function Hh(){ot(nc,cs),ot(xa,xa.current)}function Gh(){cs=nc.current,ct(xa),ct(nc)}var Ds=0,Ut=null,ae=null,Ne=null,ic=!1,Da=!1,Br=!1,sc=0,sl=0,Ma=null,L4=0;function Ce(){throw Error(r(321))}function Fh(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!Nn(e[a],s[a]))return!1;return!0}function Qh(e,s,a,l,f,d){return Ds=d,Ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=e===null||e.memoizedState===null?Op:Lp,Br=!1,d=a(l,f),Br=!1,Da&&(d=Wg(s,a,l,f)),Jg(e),d}function Jg(e){G.H=cc;var s=ae!==null&&ae.next!==null;if(Ds=0,Ne=ae=Ut=null,ic=!1,sl=0,Ma=null,s)throw Error(r(300));e===null||Ye||(e=e.dependencies,e!==null&&Zu(e)&&(Ye=!0))}function Wg(e,s,a,l){Ut=e;var f=0;do{if(Da&&(Ma=null),sl=0,Da=!1,25<=f)throw Error(r(301));if(f+=1,Ne=ae=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=q4,d=s(a,l)}while(Da);return d}function k4(){var e=G.H,s=e.useState()[0];return s=typeof s.then=="function"?rl(s):s,e=e.useState()[0],(ae!==null?ae.memoizedState:null)!==e&&(Ut.flags|=1024),s}function Yh(){var e=sc!==0;return sc=0,e}function Kh(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function $h(e){if(ic){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}ic=!1}Ds=0,Ne=ae=Ut=null,Da=!1,sl=sc=0,Ma=null}function bn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?Ut.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function Oe(){if(ae===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=ae.next;var s=Ne===null?Ut.memoizedState:Ne.next;if(s!==null)Ne=s,ae=e;else{if(e===null)throw Ut.alternate===null?Error(r(467)):Error(r(310));ae=e,e={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Ne===null?Ut.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function Xh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rl(e){var s=sl;return sl+=1,Ma===null&&(Ma=[]),e=Qg(Ma,e,s),s=Ut,(Ne===null?s.memoizedState:Ne.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?Op:Lp),e}function rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rl(e);if(e.$$typeof===Q)return on(e)}throw Error(r(438,String(e)))}function Zh(e){var s=null,a=Ut.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ut.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Xh(),Ut.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),l=0;l<e;l++)a[l]=O;return s.index++,a}function ss(e,s){return typeof s=="function"?s(e):s}function ac(e){var s=Oe();return Jh(s,ae,e)}function Jh(e,s,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var E=f.next;f.next=d.next,d.next=E}s.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{s=f.next;var S=E=null,N=null,F=s,nt=!1;do{var rt=F.lane&-536870913;if(rt!==F.lane?(Yt&rt)===rt:(Ds&rt)===rt){var K=F.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),rt===Ra&&(nt=!0);else if((Ds&K)===K){F=F.next,K===Ra&&(nt=!0);continue}else rt={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(S=N=rt,E=d):N=N.next=rt,Ut.lanes|=K,Ps|=K;rt=F.action,Br&&a(d,rt),d=F.hasEagerState?F.eagerState:a(d,rt)}else K={lane:rt,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(S=N=K,E=d):N=N.next=K,Ut.lanes|=rt,Ps|=rt;F=F.next}while(F!==null&&F!==s);if(N===null?E=d:N.next=S,!Nn(d,e.memoizedState)&&(Ye=!0,nt&&(a=Ia,a!==null)))throw a;e.memoizedState=d,e.baseState=E,e.baseQueue=N,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Wh(e){var s=Oe(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do d=e(d,E.action),E=E.next;while(E!==f);Nn(d,s.memoizedState)||(Ye=!0),s.memoizedState=d,s.baseQueue===null&&(s.baseState=d),a.lastRenderedState=d}return[d,l]}function tp(e,s,a){var l=Ut,f=Oe(),d=Jt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=s();var E=!Nn((ae||f).memoizedState,a);E&&(f.memoizedState=a,Ye=!0),f=f.queue;var S=ip.bind(null,l,f,e);if(al(2048,8,S,[e]),f.getSnapshot!==s||E||Ne!==null&&Ne.memoizedState.tag&1){if(l.flags|=2048,Va(9,oc(),np.bind(null,l,f,a,s),null),ce===null)throw Error(r(349));d||(Ds&124)!==0||ep(l,s,a)}return a}function ep(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=Ut.updateQueue,s===null?(s=Xh(),Ut.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function np(e,s,a,l){s.value=a,s.getSnapshot=l,sp(s)&&rp(e)}function ip(e,s,a){return a(function(){sp(s)&&rp(e)})}function sp(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!Nn(e,a)}catch{return!0}}function rp(e){var s=Sa(e,2);s!==null&&jn(s,e,2)}function td(e){var s=bn();if(typeof e=="function"){var a=e;if(e=a(),Br){pn(!0);try{a()}finally{pn(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},s}function ap(e,s,a,l){return e.baseState=a,Jh(e,ae,typeof l=="function"?l:ss)}function P4(e,s,a,l,f){if(uc(e))throw Error(r(485));if(e=s.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=s.pending,a===null?(d.next=s.pending=d,op(s,d)):(d.next=a.next,s.pending=a.next=d)}}function op(e,s){var a=s.action,l=s.payload,f=e.state;if(s.isTransition){var d=G.T,E={};G.T=E;try{var S=a(f,l),N=G.S;N!==null&&N(E,S),lp(e,s,S)}catch(F){ed(e,s,F)}finally{G.T=d}}else try{d=a(f,l),lp(e,s,d)}catch(F){ed(e,s,F)}}function lp(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){up(e,s,l)},function(l){return ed(e,s,l)}):up(e,s,a)}function up(e,s,a){s.status="fulfilled",s.value=a,cp(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,op(e,a)))}function ed(e,s,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,cp(s),s=s.next;while(s!==l)}e.action=null}function cp(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function fp(e,s){return s}function hp(e,s){if(Jt){var a=ce.formState;if(a!==null){t:{var l=Ut;if(Jt){if(be){e:{for(var f=be,d=Ci;f.nodeType!==8;){if(!d){f=null;break e}if(f=ci(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){be=ci(f.nextSibling),l=f.data==="F!";break t}}kr(l)}l=!1}l&&(s=a[0])}}return a=bn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fp,lastRenderedState:s},a.queue=l,a=Mp.bind(null,Ut,l),l.dispatch=a,l=td(!1),d=ad.bind(null,Ut,!1,l.queue),l=bn(),f={state:s,dispatch:null,action:e,pending:null},l.queue=f,a=P4.bind(null,Ut,f,d,a),f.dispatch=a,l.memoizedState=e,[s,a,!1]}function dp(e){var s=Oe();return mp(s,ae,e)}function mp(e,s,a){if(s=Jh(e,s,fp)[0],e=ac(ss)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=rl(s)}catch(E){throw E===Wo?tc:E}else l=s;s=Oe();var f=s.queue,d=f.dispatch;return a!==s.memoizedState&&(Ut.flags|=2048,Va(9,oc(),U4.bind(null,f,a),null)),[l,d,e]}function U4(e,s){e.action=s}function gp(e){var s=Oe(),a=ae;if(a!==null)return mp(s,a,e);Oe(),s=s.memoizedState,a=Oe();var l=a.queue.dispatch;return a.memoizedState=e,[s,l,!1]}function Va(e,s,a,l){return e={tag:e,create:a,deps:l,inst:s,next:null},s=Ut.updateQueue,s===null&&(s=Xh(),Ut.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,s.lastEffect=e),e}function oc(){return{destroy:void 0,resource:void 0}}function pp(){return Oe().memoizedState}function lc(e,s,a,l){var f=bn();l=l===void 0?null:l,Ut.flags|=e,f.memoizedState=Va(1|s,oc(),a,l)}function al(e,s,a,l){var f=Oe();l=l===void 0?null:l;var d=f.memoizedState.inst;ae!==null&&l!==null&&Fh(l,ae.memoizedState.deps)?f.memoizedState=Va(s,d,a,l):(Ut.flags|=e,f.memoizedState=Va(1|s,d,a,l))}function yp(e,s){lc(8390656,8,e,s)}function _p(e,s){al(2048,8,e,s)}function vp(e,s){return al(4,2,e,s)}function Ep(e,s){return al(4,4,e,s)}function Tp(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function bp(e,s,a){a=a!=null?a.concat([e]):null,al(4,4,Tp.bind(null,s,e),a)}function nd(){}function Sp(e,s){var a=Oe();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Fh(s,l[1])?l[0]:(a.memoizedState=[e,s],e)}function Ap(e,s){var a=Oe();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Fh(s,l[1]))return l[0];if(l=e(),Br){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[l,s],l}function id(e,s,a){return a===void 0||(Ds&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=R0(),Ut.lanes|=e,Ps|=e,a)}function wp(e,s,a,l){return Nn(a,s)?a:xa.current!==null?(e=id(e,a,l),Nn(e,s)||(Ye=!0),e):(Ds&42)===0?(Ye=!0,e.memoizedState=a):(e=R0(),Ut.lanes|=e,Ps|=e,s)}function Cp(e,s,a,l,f){var d=st.p;st.p=d!==0&&8>d?d:8;var E=G.T,S={};G.T=S,ad(e,!1,s,a);try{var N=f(),F=G.S;if(F!==null&&F(S,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var nt=O4(N,l);ol(e,s,nt,Un(e))}else ol(e,s,l,Un(e))}catch(rt){ol(e,s,{then:function(){},status:"rejected",reason:rt},Un())}finally{st.p=d,G.T=E}}function j4(){}function sd(e,s,a,l){if(e.tag!==5)throw Error(r(476));var f=Rp(e).queue;Cp(e,f,s,ut,a===null?j4:function(){return Ip(e),a(l)})}function Rp(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:ut},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function Ip(e){var s=Rp(e).next.queue;ol(e,s,{},Un())}function rd(){return on(wl)}function xp(){return Oe().memoizedState}function Dp(){return Oe().memoizedState}function B4(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=Un();e=Is(a);var l=xs(s,e,a);l!==null&&(jn(l,s,a),el(l,s,a)),s={cache:Lh()},e.payload=s;return}s=s.return}}function z4(e,s,a){var l=Un();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},uc(e)?Vp(s,a):(a=wh(e,s,a,l),a!==null&&(jn(a,e,l),Np(a,s,l)))}function Mp(e,s,a){var l=Un();ol(e,s,a,l)}function ol(e,s,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(uc(e))Vp(s,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=s.lastRenderedReducer,d!==null))try{var E=s.lastRenderedState,S=d(E,a);if(f.hasEagerState=!0,f.eagerState=S,Nn(S,E))return Qu(e,s,f,0),ce===null&&Fu(),!1}catch{}finally{}if(a=wh(e,s,f,l),a!==null)return jn(a,e,l),Np(a,s,l),!0}return!1}function ad(e,s,a,l){if(l={lane:2,revertLane:Ud(),action:l,hasEagerState:!1,eagerState:null,next:null},uc(e)){if(s)throw Error(r(479))}else s=wh(e,a,l,2),s!==null&&jn(s,e,2)}function uc(e){var s=e.alternate;return e===Ut||s!==null&&s===Ut}function Vp(e,s){Da=ic=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function Np(e,s,a){if((a&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,xo(e,a)}}var cc={readContext:on,use:rc,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce},Op={readContext:on,use:rc,useCallback:function(e,s){return bn().memoizedState=[e,s===void 0?null:s],e},useContext:on,useEffect:yp,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,lc(4194308,4,Tp.bind(null,s,e),a)},useLayoutEffect:function(e,s){return lc(4194308,4,e,s)},useInsertionEffect:function(e,s){lc(4,2,e,s)},useMemo:function(e,s){var a=bn();s=s===void 0?null:s;var l=e();if(Br){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(e,s,a){var l=bn();if(a!==void 0){var f=a(s);if(Br){pn(!0);try{a(s)}finally{pn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=z4.bind(null,Ut,e),[l.memoizedState,e]},useRef:function(e){var s=bn();return e={current:e},s.memoizedState=e},useState:function(e){e=td(e);var s=e.queue,a=Mp.bind(null,Ut,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:nd,useDeferredValue:function(e,s){var a=bn();return id(a,e,s)},useTransition:function(){var e=td(!1);return e=Cp.bind(null,Ut,e.queue,!0,!1),bn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var l=Ut,f=bn();if(Jt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ce===null)throw Error(r(349));(Yt&124)!==0||ep(l,s,a)}f.memoizedState=a;var d={value:a,getSnapshot:s};return f.queue=d,yp(ip.bind(null,l,d,e),[e]),l.flags|=2048,Va(9,oc(),np.bind(null,l,d,a,s),null),a},useId:function(){var e=bn(),s=ce.identifierPrefix;if(Jt){var a=es,l=ts;a=(l&~(1<<32-he(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=sc++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=L4++,s="«"+s+"r"+a.toString(32)+"»";return e.memoizedState=s},useHostTransitionStatus:rd,useFormState:hp,useActionState:hp,useOptimistic:function(e){var s=bn();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=ad.bind(null,Ut,!0,a),a.dispatch=s,[e,s]},useMemoCache:Zh,useCacheRefresh:function(){return bn().memoizedState=B4.bind(null,Ut)}},Lp={readContext:on,use:rc,useCallback:Sp,useContext:on,useEffect:_p,useImperativeHandle:bp,useInsertionEffect:vp,useLayoutEffect:Ep,useMemo:Ap,useReducer:ac,useRef:pp,useState:function(){return ac(ss)},useDebugValue:nd,useDeferredValue:function(e,s){var a=Oe();return wp(a,ae.memoizedState,e,s)},useTransition:function(){var e=ac(ss)[0],s=Oe().memoizedState;return[typeof e=="boolean"?e:rl(e),s]},useSyncExternalStore:tp,useId:xp,useHostTransitionStatus:rd,useFormState:dp,useActionState:dp,useOptimistic:function(e,s){var a=Oe();return ap(a,ae,e,s)},useMemoCache:Zh,useCacheRefresh:Dp},q4={readContext:on,use:rc,useCallback:Sp,useContext:on,useEffect:_p,useImperativeHandle:bp,useInsertionEffect:vp,useLayoutEffect:Ep,useMemo:Ap,useReducer:Wh,useRef:pp,useState:function(){return Wh(ss)},useDebugValue:nd,useDeferredValue:function(e,s){var a=Oe();return ae===null?id(a,e,s):wp(a,ae.memoizedState,e,s)},useTransition:function(){var e=Wh(ss)[0],s=Oe().memoizedState;return[typeof e=="boolean"?e:rl(e),s]},useSyncExternalStore:tp,useId:xp,useHostTransitionStatus:rd,useFormState:gp,useActionState:gp,useOptimistic:function(e,s){var a=Oe();return ae!==null?ap(a,ae,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Zh,useCacheRefresh:Dp},Na=null,ll=0;function fc(e){var s=ll;return ll+=1,Na===null&&(Na=[]),Qg(Na,e,s)}function ul(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function hc(e,s){throw s.$$typeof===b?Error(r(525)):(e=Object.prototype.toString.call(s),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function kp(e){var s=e._init;return s(e._payload)}function Pp(e){function s(B,U){if(e){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function a(B,U){if(!e)return null;for(;U!==null;)s(B,U),U=U.sibling;return null}function l(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function f(B,U){return B=Wi(B,U),B.index=0,B.sibling=null,B}function d(B,U,H){return B.index=H,e?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function E(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function S(B,U,H,it){return U===null||U.tag!==6?(U=Rh(H,B.mode,it),U.return=B,U):(U=f(U,H),U.return=B,U)}function N(B,U,H,it){var vt=H.type;return vt===V?nt(B,U,H.props.children,it,H.key):U!==null&&(U.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===w&&kp(vt)===U.type)?(U=f(U,H.props),ul(U,H),U.return=B,U):(U=Ku(H.type,H.key,H.props,null,B.mode,it),ul(U,H),U.return=B,U)}function F(B,U,H,it){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=Ih(H,B.mode,it),U.return=B,U):(U=f(U,H.children||[]),U.return=B,U)}function nt(B,U,H,it,vt){return U===null||U.tag!==7?(U=Vr(H,B.mode,it,vt),U.return=B,U):(U=f(U,H),U.return=B,U)}function rt(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Rh(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return H=Ku(U.type,U.key,U.props,null,B.mode,H),ul(H,U),H.return=B,H;case R:return U=Ih(U,B.mode,H),U.return=B,U;case w:var it=U._init;return U=it(U._payload),rt(B,U,H)}if(mt(U)||P(U))return U=Vr(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return rt(B,fc(U),H);if(U.$$typeof===Q)return rt(B,Ju(B,U),H);hc(B,U)}return null}function K(B,U,H,it){var vt=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return vt!==null?null:S(B,U,""+H,it);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===vt?N(B,U,H,it):null;case R:return H.key===vt?F(B,U,H,it):null;case w:return vt=H._init,H=vt(H._payload),K(B,U,H,it)}if(mt(H)||P(H))return vt!==null?null:nt(B,U,H,it,null);if(typeof H.then=="function")return K(B,U,fc(H),it);if(H.$$typeof===Q)return K(B,U,Ju(B,H),it);hc(B,H)}return null}function $(B,U,H,it,vt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return B=B.get(H)||null,S(U,B,""+it,vt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case T:return B=B.get(it.key===null?H:it.key)||null,N(U,B,it,vt);case R:return B=B.get(it.key===null?H:it.key)||null,F(U,B,it,vt);case w:var Bt=it._init;return it=Bt(it._payload),$(B,U,H,it,vt)}if(mt(it)||P(it))return B=B.get(H)||null,nt(U,B,it,vt,null);if(typeof it.then=="function")return $(B,U,H,fc(it),vt);if(it.$$typeof===Q)return $(B,U,H,Ju(U,it),vt);hc(U,it)}return null}function xt(B,U,H,it){for(var vt=null,Bt=null,bt=U,Rt=U=0,$e=null;bt!==null&&Rt<H.length;Rt++){bt.index>Rt?($e=bt,bt=null):$e=bt.sibling;var Xt=K(B,bt,H[Rt],it);if(Xt===null){bt===null&&(bt=$e);break}e&&bt&&Xt.alternate===null&&s(B,bt),U=d(Xt,U,Rt),Bt===null?vt=Xt:Bt.sibling=Xt,Bt=Xt,bt=$e}if(Rt===H.length)return a(B,bt),Jt&&Or(B,Rt),vt;if(bt===null){for(;Rt<H.length;Rt++)bt=rt(B,H[Rt],it),bt!==null&&(U=d(bt,U,Rt),Bt===null?vt=bt:Bt.sibling=bt,Bt=bt);return Jt&&Or(B,Rt),vt}for(bt=l(bt);Rt<H.length;Rt++)$e=$(bt,B,Rt,H[Rt],it),$e!==null&&(e&&$e.alternate!==null&&bt.delete($e.key===null?Rt:$e.key),U=d($e,U,Rt),Bt===null?vt=$e:Bt.sibling=$e,Bt=$e);return e&&bt.forEach(function(Qs){return s(B,Qs)}),Jt&&Or(B,Rt),vt}function Ct(B,U,H,it){if(H==null)throw Error(r(151));for(var vt=null,Bt=null,bt=U,Rt=U=0,$e=null,Xt=H.next();bt!==null&&!Xt.done;Rt++,Xt=H.next()){bt.index>Rt?($e=bt,bt=null):$e=bt.sibling;var Qs=K(B,bt,Xt.value,it);if(Qs===null){bt===null&&(bt=$e);break}e&&bt&&Qs.alternate===null&&s(B,bt),U=d(Qs,U,Rt),Bt===null?vt=Qs:Bt.sibling=Qs,Bt=Qs,bt=$e}if(Xt.done)return a(B,bt),Jt&&Or(B,Rt),vt;if(bt===null){for(;!Xt.done;Rt++,Xt=H.next())Xt=rt(B,Xt.value,it),Xt!==null&&(U=d(Xt,U,Rt),Bt===null?vt=Xt:Bt.sibling=Xt,Bt=Xt);return Jt&&Or(B,Rt),vt}for(bt=l(bt);!Xt.done;Rt++,Xt=H.next())Xt=$(bt,B,Rt,Xt.value,it),Xt!==null&&(e&&Xt.alternate!==null&&bt.delete(Xt.key===null?Rt:Xt.key),U=d(Xt,U,Rt),Bt===null?vt=Xt:Bt.sibling=Xt,Bt=Xt);return e&&bt.forEach(function(H6){return s(B,H6)}),Jt&&Or(B,Rt),vt}function le(B,U,H,it){if(typeof H=="object"&&H!==null&&H.type===V&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:t:{for(var vt=H.key;U!==null;){if(U.key===vt){if(vt=H.type,vt===V){if(U.tag===7){a(B,U.sibling),it=f(U,H.props.children),it.return=B,B=it;break t}}else if(U.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===w&&kp(vt)===U.type){a(B,U.sibling),it=f(U,H.props),ul(it,H),it.return=B,B=it;break t}a(B,U);break}else s(B,U);U=U.sibling}H.type===V?(it=Vr(H.props.children,B.mode,it,H.key),it.return=B,B=it):(it=Ku(H.type,H.key,H.props,null,B.mode,it),ul(it,H),it.return=B,B=it)}return E(B);case R:t:{for(vt=H.key;U!==null;){if(U.key===vt)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){a(B,U.sibling),it=f(U,H.children||[]),it.return=B,B=it;break t}else{a(B,U);break}else s(B,U);U=U.sibling}it=Ih(H,B.mode,it),it.return=B,B=it}return E(B);case w:return vt=H._init,H=vt(H._payload),le(B,U,H,it)}if(mt(H))return xt(B,U,H,it);if(P(H)){if(vt=P(H),typeof vt!="function")throw Error(r(150));return H=vt.call(H),Ct(B,U,H,it)}if(typeof H.then=="function")return le(B,U,fc(H),it);if(H.$$typeof===Q)return le(B,U,Ju(B,H),it);hc(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(a(B,U.sibling),it=f(U,H),it.return=B,B=it):(a(B,U),it=Rh(H,B.mode,it),it.return=B,B=it),E(B)):a(B,U)}return function(B,U,H,it){try{ll=0;var vt=le(B,U,H,it);return Na=null,vt}catch(bt){if(bt===Wo||bt===tc)throw bt;var Bt=On(29,bt,null,B.mode);return Bt.lanes=it,Bt.return=B,Bt}finally{}}}var Oa=Pp(!0),Up=Pp(!1),Zn=J(null),Ri=null;function Ms(e){var s=e.alternate;ot(ze,ze.current&1),ot(Zn,e),Ri===null&&(s===null||xa.current!==null||s.memoizedState!==null)&&(Ri=e)}function jp(e){if(e.tag===22){if(ot(ze,ze.current),ot(Zn,e),Ri===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(Ri=e)}}else Vs()}function Vs(){ot(ze,ze.current),ot(Zn,Zn.current)}function rs(e){ct(Zn),Ri===e&&(Ri=null),ct(ze)}var ze=J(0);function dc(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Xd(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function od(e,s,a,l){s=e.memoizedState,a=a(l,s),a=a==null?s:v({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ld={enqueueSetState:function(e,s,a){e=e._reactInternals;var l=Un(),f=Is(l);f.payload=s,a!=null&&(f.callback=a),s=xs(e,f,l),s!==null&&(jn(s,e,l),el(s,e,l))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var l=Un(),f=Is(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=xs(e,f,l),s!==null&&(jn(s,e,l),el(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=Un(),l=Is(a);l.tag=2,s!=null&&(l.callback=s),s=xs(e,l,a),s!==null&&(jn(s,e,a),el(s,e,a))}};function Bp(e,s,a,l,f,d,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,E):s.prototype&&s.prototype.isPureReactComponent?!Fo(a,l)||!Fo(f,d):!0}function zp(e,s,a,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==e&&ld.enqueueReplaceState(s,s.state,null)}function zr(e,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(e=e.defaultProps){a===s&&(a=v({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}var mc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function qp(e){mc(e)}function Hp(e){console.error(e)}function Gp(e){mc(e)}function gc(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Fp(e,s,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ud(e,s,a){return a=Is(a),a.tag=3,a.payload={element:null},a.callback=function(){gc(e,s)},a}function Qp(e){return e=Is(e),e.tag=3,e}function Yp(e,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){Fp(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){Fp(s,a,l),typeof f!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function H4(e,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Xo(s,a,f,!0),a=Zn.current,a!==null){switch(a.tag){case 13:return Ri===null?Nd():a.alternate===null&&Se===0&&(Se=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Uh?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Ld(e,l,f)),!1;case 22:return a.flags|=65536,l===Uh?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Ld(e,l,f)),!1}throw Error(r(435,a.tag))}return Ld(e,l,f),Nd(),!1}if(Jt)return s=Zn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==Mh&&(e=Error(r(422),{cause:l}),$o(Yn(e,a)))):(l!==Mh&&(s=Error(r(423),{cause:l}),$o(Yn(s,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Yn(l,a),f=ud(e.stateNode,l,f),zh(e,f),Se!==4&&(Se=2)),!1;var d=Error(r(520),{cause:l});if(d=Yn(d,a),pl===null?pl=[d]:pl.push(d),Se!==4&&(Se=2),s===null)return!0;l=Yn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=ud(a.stateNode,l,e),zh(a,e),!1;case 1:if(s=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Us===null||!Us.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Qp(f),Yp(f,e,a,l),zh(a,f),!1}a=a.return}while(a!==null);return!1}var Kp=Error(r(461)),Ye=!1;function We(e,s,a,l){s.child=e===null?Up(s,null,a,l):Oa(s,e.child,a,l)}function $p(e,s,a,l,f){a=a.render;var d=s.ref;if("ref"in l){var E={};for(var S in l)S!=="ref"&&(E[S]=l[S])}else E=l;return Ur(s),l=Qh(e,s,a,E,d,f),S=Yh(),e!==null&&!Ye?(Kh(e,s,f),as(e,s,f)):(Jt&&S&&xh(s),s.flags|=1,We(e,s,l,f),s.child)}function Xp(e,s,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!Ch(d)&&d.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=d,Zp(e,s,d,l,f)):(e=Ku(a.type,null,l,s,s.mode,f),e.ref=s.ref,e.return=s,s.child=e)}if(d=e.child,!yd(e,f)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(E,l)&&e.ref===s.ref)return as(e,s,f)}return s.flags|=1,e=Wi(d,l),e.ref=s.ref,e.return=s,s.child=e}function Zp(e,s,a,l,f){if(e!==null){var d=e.memoizedProps;if(Fo(d,l)&&e.ref===s.ref)if(Ye=!1,s.pendingProps=l=d,yd(e,f))(e.flags&131072)!==0&&(Ye=!0);else return s.lanes=e.lanes,as(e,s,f)}return cd(e,s,a,l,f)}function Jp(e,s,a){var l=s.pendingProps,f=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(f=s.child=e.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;s.childLanes=d&~l}else s.childLanes=0,s.child=null;return Wp(e,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wu(s,d!==null?d.cachePool:null),d!==null?Zg(s,d):Hh(),jp(s);else return s.lanes=s.childLanes=536870912,Wp(e,s,d!==null?d.baseLanes|a:a,a)}else d!==null?(Wu(s,d.cachePool),Zg(s,d),Vs(),s.memoizedState=null):(e!==null&&Wu(s,null),Hh(),Vs());return We(e,s,f,a),s.child}function Wp(e,s,a,l){var f=Ph();return f=f===null?null:{parent:Be._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},e!==null&&Wu(s,null),Hh(),jp(s),e!==null&&Xo(e,s,l,!0),null}function pc(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function cd(e,s,a,l,f){return Ur(s),a=Qh(e,s,a,l,void 0,f),l=Yh(),e!==null&&!Ye?(Kh(e,s,f),as(e,s,f)):(Jt&&l&&xh(s),s.flags|=1,We(e,s,a,f),s.child)}function t0(e,s,a,l,f,d){return Ur(s),s.updateQueue=null,a=Wg(s,l,a,f),Jg(e),l=Yh(),e!==null&&!Ye?(Kh(e,s,d),as(e,s,d)):(Jt&&l&&xh(s),s.flags|=1,We(e,s,a,d),s.child)}function e0(e,s,a,l,f){if(Ur(s),s.stateNode===null){var d=Aa,E=a.contextType;typeof E=="object"&&E!==null&&(d=on(E)),d=new a(l,d),s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=ld,s.stateNode=d,d._reactInternals=s,d=s.stateNode,d.props=l,d.state=s.memoizedState,d.refs={},jh(s),E=a.contextType,d.context=typeof E=="object"&&E!==null?on(E):Aa,d.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(od(s,a,E,l),d.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&ld.enqueueReplaceState(d,d.state,null),il(s,l,d,f),nl(),d.state=s.memoizedState),typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){d=s.stateNode;var S=s.memoizedProps,N=zr(a,S);d.props=N;var F=d.context,nt=a.contextType;E=Aa,typeof nt=="object"&&nt!==null&&(E=on(nt));var rt=a.getDerivedStateFromProps;nt=typeof rt=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,nt||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||F!==E)&&zp(s,d,l,E),Rs=!1;var K=s.memoizedState;d.state=K,il(s,l,d,f),nl(),F=s.memoizedState,S||K!==F||Rs?(typeof rt=="function"&&(od(s,a,rt,l),F=s.memoizedState),(N=Rs||Bp(s,a,N,l,K,F,E))?(nt||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=F),d.props=l,d.state=F,d.context=E,l=N):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{d=s.stateNode,Bh(e,s),E=s.memoizedProps,nt=zr(a,E),d.props=nt,rt=s.pendingProps,K=d.context,F=a.contextType,N=Aa,typeof F=="object"&&F!==null&&(N=on(F)),S=a.getDerivedStateFromProps,(F=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==rt||K!==N)&&zp(s,d,l,N),Rs=!1,K=s.memoizedState,d.state=K,il(s,l,d,f),nl();var $=s.memoizedState;E!==rt||K!==$||Rs||e!==null&&e.dependencies!==null&&Zu(e.dependencies)?(typeof S=="function"&&(od(s,a,S,l),$=s.memoizedState),(nt=Rs||Bp(s,a,nt,l,K,$,N)||e!==null&&e.dependencies!==null&&Zu(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,N)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&K===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&K===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=$),d.props=l,d.state=$,d.context=N,l=nt):(typeof d.componentDidUpdate!="function"||E===e.memoizedProps&&K===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&K===e.memoizedState||(s.flags|=1024),l=!1)}return d=l,pc(e,s),l=(s.flags&128)!==0,d||l?(d=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),s.flags|=1,e!==null&&l?(s.child=Oa(s,e.child,null,f),s.child=Oa(s,null,a,f)):We(e,s,a,f),s.memoizedState=d.state,e=s.child):e=as(e,s,f),e}function n0(e,s,a,l){return Ko(),s.flags|=256,We(e,s,a,l),s.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hd(e){return{baseLanes:e,cachePool:Hg()}}function dd(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=Jn),e}function i0(e,s,a){var l=s.pendingProps,f=!1,d=(s.flags&128)!==0,E;if((E=d)||(E=e!==null&&e.memoizedState===null?!1:(ze.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,e===null){if(Jt){if(f?Ms(s):Vs(),Jt){var S=be,N;if(N=S){t:{for(N=S,S=Ci;N.nodeType!==8;){if(!S){S=null;break t}if(N=ci(N.nextSibling),N===null){S=null;break t}}S=N}S!==null?(s.memoizedState={dehydrated:S,treeContext:Nr!==null?{id:ts,overflow:es}:null,retryLane:536870912,hydrationErrors:null},N=On(18,null,null,0),N.stateNode=S,N.return=s,s.child=N,En=s,be=null,N=!0):N=!1}N||kr(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Xd(S)?s.lanes=32:s.lanes=536870912,null;rs(s)}return S=l.children,l=l.fallback,f?(Vs(),f=s.mode,S=yc({mode:"hidden",children:S},f),l=Vr(l,f,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,f=s.child,f.memoizedState=hd(a),f.childLanes=dd(e,E,a),s.memoizedState=fd,l):(Ms(s),md(s,S))}if(N=e.memoizedState,N!==null&&(S=N.dehydrated,S!==null)){if(d)s.flags&256?(Ms(s),s.flags&=-257,s=gd(e,s,a)):s.memoizedState!==null?(Vs(),s.child=e.child,s.flags|=128,s=null):(Vs(),f=l.fallback,S=s.mode,l=yc({mode:"visible",children:l.children},S),f=Vr(f,S,a,null),f.flags|=2,l.return=s,f.return=s,l.sibling=f,s.child=l,Oa(s,e.child,null,a),l=s.child,l.memoizedState=hd(a),l.childLanes=dd(e,E,a),s.memoizedState=fd,s=f);else if(Ms(s),Xd(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(r(419)),l.stack="",l.digest=E,$o({value:l,source:null,stack:null}),s=gd(e,s,a)}else if(Ye||Xo(e,s,a,!1),E=(a&e.childLanes)!==0,Ye||E){if(E=ce,E!==null&&(l=a&-a,l=(l&42)!==0?1:vs(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Sa(e,l),jn(E,e,l),Kp;S.data==="$?"||Nd(),s=gd(e,s,a)}else S.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=N.treeContext,be=ci(S.nextSibling),En=s,Jt=!0,Lr=null,Ci=!1,e!==null&&($n[Xn++]=ts,$n[Xn++]=es,$n[Xn++]=Nr,ts=e.id,es=e.overflow,Nr=s),s=md(s,l.children),s.flags|=4096);return s}return f?(Vs(),f=l.fallback,S=s.mode,N=e.child,F=N.sibling,l=Wi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,F!==null?f=Wi(F,f):(f=Vr(f,S,a,null),f.flags|=2),f.return=s,l.return=s,l.sibling=f,s.child=l,l=f,f=s.child,S=e.child.memoizedState,S===null?S=hd(a):(N=S.cachePool,N!==null?(F=Be._currentValue,N=N.parent!==F?{parent:F,pool:F}:N):N=Hg(),S={baseLanes:S.baseLanes|a,cachePool:N}),f.memoizedState=S,f.childLanes=dd(e,E,a),s.memoizedState=fd,l):(Ms(s),a=e.child,e=a.sibling,a=Wi(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,e!==null&&(E=s.deletions,E===null?(s.deletions=[e],s.flags|=16):E.push(e)),s.child=a,s.memoizedState=null,a)}function md(e,s){return s=yc({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function yc(e,s){return e=On(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function gd(e,s,a){return Oa(s,e.child,null,a),e=md(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function s0(e,s,a){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),Nh(e.return,s,a)}function pd(e,s,a,l,f){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=s,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function r0(e,s,a){var l=s.pendingProps,f=l.revealOrder,d=l.tail;if(We(e,s,l.children,a),l=ze.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&s0(e,a,s);else if(e.tag===19)s0(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ot(ze,l),f){case"forwards":for(a=s.child,f=null;a!==null;)e=a.alternate,e!==null&&dc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),pd(s,!1,f,a,d);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(e=f.alternate,e!==null&&dc(e)===null){s.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}pd(s,!0,a,null,d);break;case"together":pd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function as(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),Ps|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(Xo(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(r(153));if(s.child!==null){for(e=s.child,a=Wi(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Wi(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function yd(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Zu(e)))}function G4(e,s,a){switch(s.tag){case 3:ht(s,s.stateNode.containerInfo),Cs(s,Be,e.memoizedState.cache),Ko();break;case 27:case 5:Dt(s);break;case 4:ht(s,s.stateNode.containerInfo);break;case 10:Cs(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ms(s),s.flags|=128,null):(a&s.child.childLanes)!==0?i0(e,s,a):(Ms(s),e=as(e,s,a),e!==null?e.sibling:null);Ms(s);break;case 19:var f=(e.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Xo(e,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return r0(e,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(ze,ze.current),l)break;return null;case 22:case 23:return s.lanes=0,Jp(e,s,a);case 24:Cs(s,Be,e.memoizedState.cache)}return as(e,s,a)}function a0(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)Ye=!0;else{if(!yd(e,a)&&(s.flags&128)===0)return Ye=!1,G4(e,s,a);Ye=(e.flags&131072)!==0}else Ye=!1,Jt&&(s.flags&1048576)!==0&&kg(s,Xu,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var l=s.elementType,f=l._init;if(l=f(l._payload),s.type=l,typeof l=="function")Ch(l)?(e=zr(l,e),s.tag=1,s=e0(null,s,l,e,a)):(s.tag=0,s=cd(null,s,l,e,a));else{if(l!=null){if(f=l.$$typeof,f===et){s.tag=11,s=$p(null,s,l,e,a);break t}else if(f===x){s.tag=14,s=Xp(null,s,l,e,a);break t}}throw s=dt(l)||l,Error(r(306,s,""))}}return s;case 0:return cd(e,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=zr(l,s.pendingProps),e0(e,s,l,f,a);case 3:t:{if(ht(s,s.stateNode.containerInfo),e===null)throw Error(r(387));l=s.pendingProps;var d=s.memoizedState;f=d.element,Bh(e,s),il(s,l,null,a);var E=s.memoizedState;if(l=E.cache,Cs(s,Be,l),l!==d.cache&&Oh(s,[Be],a,!0),nl(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=d,s.memoizedState=d,s.flags&256){s=n0(e,s,l,a);break t}else if(l!==f){f=Yn(Error(r(424)),s),$o(f),s=n0(e,s,l,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(be=ci(e.firstChild),En=s,Jt=!0,Lr=null,Ci=!0,a=Up(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ko(),l===f){s=as(e,s,a);break t}We(e,s,l,a)}s=s.child}return s;case 26:return pc(e,s),e===null?(a=cy(s.type,null,s.pendingProps,null))?s.memoizedState=a:Jt||(a=s.type,e=s.pendingProps,l=Mc(Et.current).createElement(a),l[Pe]=s,l[Me]=e,en(l,a,e),we(l),s.stateNode=l):s.memoizedState=cy(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Dt(s),e===null&&Jt&&(l=s.stateNode=oy(s.type,s.pendingProps,Et.current),En=s,Ci=!0,f=be,zs(s.type)?(Zd=f,be=ci(l.firstChild)):be=f),We(e,s,s.pendingProps.children,a),pc(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Jt&&((f=l=be)&&(l=_6(l,s.type,s.pendingProps,Ci),l!==null?(s.stateNode=l,En=s,be=ci(l.firstChild),Ci=!1,f=!0):f=!1),f||kr(s)),Dt(s),f=s.type,d=s.pendingProps,E=e!==null?e.memoizedProps:null,l=d.children,Yd(f,d)?l=null:E!==null&&Yd(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=Qh(e,s,k4,null,null,a),wl._currentValue=f),pc(e,s),We(e,s,l,a),s.child;case 6:return e===null&&Jt&&((e=a=be)&&(a=v6(a,s.pendingProps,Ci),a!==null?(s.stateNode=a,En=s,be=null,e=!0):e=!1),e||kr(s)),null;case 13:return i0(e,s,a);case 4:return ht(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=Oa(s,null,l,a):We(e,s,l,a),s.child;case 11:return $p(e,s,s.type,s.pendingProps,a);case 7:return We(e,s,s.pendingProps,a),s.child;case 8:return We(e,s,s.pendingProps.children,a),s.child;case 12:return We(e,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Cs(s,s.type,l.value),We(e,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Ur(s),f=on(f),l=l(f),s.flags|=1,We(e,s,l,a),s.child;case 14:return Xp(e,s,s.type,s.pendingProps,a);case 15:return Zp(e,s,s.type,s.pendingProps,a);case 19:return r0(e,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},e===null?(a=yc(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Wi(e.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Jp(e,s,a);case 24:return Ur(s),l=on(Be),e===null?(f=Ph(),f===null&&(f=ce,d=Lh(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),s.memoizedState={parent:l,cache:f},jh(s),Cs(s,Be,f)):((e.lanes&a)!==0&&(Bh(e,s),il(s,null,null,a),nl()),f=e.memoizedState,d=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Cs(s,Be,l)):(l=d.cache,Cs(s,Be,l),l!==f.cache&&Oh(s,[Be],a,!0))),We(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function os(e){e.flags|=4}function o0(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!gy(s)){if(s=Zn.current,s!==null&&((Yt&4194048)===Yt?Ri!==null:(Yt&62914560)!==Yt&&(Yt&536870912)===0||s!==Ri))throw tl=Uh,Gg;e.flags|=8192}}function _c(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Ro():536870912,e.lanes|=s,Ua|=s)}function cl(e,s){if(!Jt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function ye(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(s)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,s}function F4(e,s,a){var l=s.pendingProps;switch(Dh(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(s),null;case 1:return ye(s),null;case 3:return a=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),is(Be),At(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Yo(s)?os(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jg())),ye(s),null;case 26:return a=s.memoizedState,e===null?(os(s),a!==null?(ye(s),o0(s,a)):(ye(s),s.flags&=-16777217)):a?a!==e.memoizedState?(os(s),ye(s),o0(s,a)):(ye(s),s.flags&=-16777217):(e.memoizedProps!==l&&os(s),ye(s),s.flags&=-16777217),null;case 27:se(s),a=Et.current;var f=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==l&&os(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ye(s),null}e=pt.current,Yo(s)?Pg(s):(e=oy(f,l,a),s.stateNode=e,os(s))}return ye(s),null;case 5:if(se(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&os(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return ye(s),null}if(e=pt.current,Yo(s))Pg(s);else{switch(f=Mc(Et.current),e){case 1:e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}e[Pe]=s,e[Me]=l;t:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)e.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break t;for(;f.sibling===null;){if(f.return===null||f.return===s)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=e;t:switch(en(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&os(s)}}return ye(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&os(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(e=Et.current,Yo(s)){if(e=s.stateNode,a=s.memoizedProps,l=null,f=En,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Pe]=s,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ty(e.nodeValue,a)),e||kr(s)}else e=Mc(e).createTextNode(l),e[Pe]=s,s.stateNode=e}return ye(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Yo(s),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Pe]=s}else Ko(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ye(s),f=!1}else f=jg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(rs(s),s):(rs(s),null)}if(rs(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),_c(s,s.updateQueue),ye(s),null;case 4:return At(),e===null&&qd(s.stateNode.containerInfo),ye(s),null;case 10:return is(s.type),ye(s),null;case 19:if(ct(ze),f=s.memoizedState,f===null)return ye(s),null;if(l=(s.flags&128)!==0,d=f.rendering,d===null)if(l)cl(f,!1);else{if(Se!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(d=dc(e),d!==null){for(s.flags|=128,cl(f,!1),e=d.updateQueue,s.updateQueue=e,_c(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)Lg(a,e),a=a.sibling;return ot(ze,ze.current&1|2),s.child}e=e.sibling}f.tail!==null&&De()>Tc&&(s.flags|=128,l=!0,cl(f,!1),s.lanes=4194304)}else{if(!l)if(e=dc(d),e!==null){if(s.flags|=128,l=!0,e=e.updateQueue,s.updateQueue=e,_c(s,e),cl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!Jt)return ye(s),null}else 2*De()-f.renderingStartTime>Tc&&a!==536870912&&(s.flags|=128,l=!0,cl(f,!1),s.lanes=4194304);f.isBackwards?(d.sibling=s.child,s.child=d):(e=f.last,e!==null?e.sibling=d:s.child=d,f.last=d)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=De(),s.sibling=null,e=ze.current,ot(ze,l?e&1|2:e&1),s):(ye(s),null);case 22:case 23:return rs(s),Gh(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(ye(s),s.subtreeFlags&6&&(s.flags|=8192)):ye(s),a=s.updateQueue,a!==null&&_c(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),e!==null&&ct(jr),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),is(Be),ye(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Q4(e,s){switch(Dh(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return is(Be),At(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return se(s),null;case 13:if(rs(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ko()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return ct(ze),null;case 4:return At(),null;case 10:return is(s.type),null;case 22:case 23:return rs(s),Gh(),e!==null&&ct(jr),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return is(Be),null;case 25:return null;default:return null}}function l0(e,s){switch(Dh(s),s.tag){case 3:is(Be),At();break;case 26:case 27:case 5:se(s);break;case 4:At();break;case 13:rs(s);break;case 19:ct(ze);break;case 10:is(s.type);break;case 22:case 23:rs(s),Gh(),e!==null&&ct(jr);break;case 24:is(Be)}}function fl(e,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==f)}}catch(S){ue(s,s.return,S)}}function Ns(e,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var E=l.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,f=s;var N=a,F=S;try{F()}catch(nt){ue(f,N,nt)}}}l=l.next}while(l!==d)}}catch(nt){ue(s,s.return,nt)}}function u0(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{Xg(s,a)}catch(l){ue(e,e.return,l)}}}function c0(e,s,a){a.props=zr(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ue(e,s,l)}}function hl(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){ue(e,s,f)}}function Ii(e,s){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ue(e,s,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ue(e,s,f)}else a.current=null}function f0(e){var s=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ue(e,e.return,f)}}function _d(e,s,a){try{var l=e.stateNode;d6(l,e.type,a,s),l[Me]=s}catch(f){ue(e,e.return,f)}}function h0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zs(e.type)||e.tag===4}function vd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||h0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ed(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Dc));else if(l!==4&&(l===27&&zs(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(Ed(e,s,a),e=e.sibling;e!==null;)Ed(e,s,a),e=e.sibling}function vc(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(l!==4&&(l===27&&zs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(vc(e,s,a),e=e.sibling;e!==null;)vc(e,s,a),e=e.sibling}function d0(e){var s=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);en(s,l,a),s[Pe]=e,s[Me]=a}catch(d){ue(e,e.return,d)}}var ls=!1,Re=!1,Td=!1,m0=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Y4(e,s){if(e=e.containerInfo,Fd=Pc,e=wg(e),vh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var E=0,S=-1,N=-1,F=0,nt=0,rt=e,K=null;e:for(;;){for(var $;rt!==a||f!==0&&rt.nodeType!==3||(S=E+f),rt!==d||l!==0&&rt.nodeType!==3||(N=E+l),rt.nodeType===3&&(E+=rt.nodeValue.length),($=rt.firstChild)!==null;)K=rt,rt=$;for(;;){if(rt===e)break e;if(K===a&&++F===f&&(S=E),K===d&&++nt===l&&(N=E),($=rt.nextSibling)!==null)break;rt=K,K=rt.parentNode}rt=$}a=S===-1||N===-1?null:{start:S,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qd={focusedElem:e,selectionRange:a},Pc=!1,Ke=s;Ke!==null;)if(s=Ke,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,Ke=e;else for(;Ke!==null;){switch(s=Ke,d=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=s,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var xt=zr(a.type,f,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(xt,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ct){ue(a,a.return,Ct)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)$d(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=s.sibling,e!==null){e.return=s.return,Ke=e;break}Ke=s.return}}function g0(e,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Os(e,a),l&4&&fl(5,a);break;case 1:if(Os(e,a),l&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(E){ue(a,a.return,E)}else{var f=zr(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(f,s,e.__reactInternalSnapshotBeforeUpdate)}catch(E){ue(a,a.return,E)}}l&64&&u0(a),l&512&&hl(a,a.return);break;case 3:if(Os(e,a),l&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Xg(e,s)}catch(E){ue(a,a.return,E)}}break;case 27:s===null&&l&4&&d0(a);case 26:case 5:Os(e,a),s===null&&l&4&&f0(a),l&512&&hl(a,a.return);break;case 12:Os(e,a);break;case 13:Os(e,a),l&4&&_0(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=n6.bind(null,a),E6(e,a))));break;case 22:if(l=a.memoizedState!==null||ls,!l){s=s!==null&&s.memoizedState!==null||Re,f=ls;var d=Re;ls=l,(Re=s)&&!d?Ls(e,a,(a.subtreeFlags&8772)!==0):Os(e,a),ls=f,Re=d}break;case 30:break;default:Os(e,a)}}function p0(e){var s=e.alternate;s!==null&&(e.alternate=null,p0(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&bs(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var me=null,Sn=!1;function us(e,s,a){for(a=a.child;a!==null;)y0(e,s,a),a=a.sibling}function y0(e,s,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Zt,a)}catch{}switch(a.tag){case 26:Re||Ii(a,s),us(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Re||Ii(a,s);var l=me,f=Sn;zs(a.type)&&(me=a.stateNode,Sn=!1),us(e,s,a),Tl(a.stateNode),me=l,Sn=f;break;case 5:Re||Ii(a,s);case 6:if(l=me,f=Sn,me=null,us(e,s,a),me=l,Sn=f,me!==null)if(Sn)try{(me.nodeType===9?me.body:me.nodeName==="HTML"?me.ownerDocument.body:me).removeChild(a.stateNode)}catch(d){ue(a,s,d)}else try{me.removeChild(a.stateNode)}catch(d){ue(a,s,d)}break;case 18:me!==null&&(Sn?(e=me,ry(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),xl(e)):ry(me,a.stateNode));break;case 4:l=me,f=Sn,me=a.stateNode.containerInfo,Sn=!0,us(e,s,a),me=l,Sn=f;break;case 0:case 11:case 14:case 15:Re||Ns(2,a,s),Re||Ns(4,a,s),us(e,s,a);break;case 1:Re||(Ii(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&c0(a,s,l)),us(e,s,a);break;case 21:us(e,s,a);break;case 22:Re=(l=Re)||a.memoizedState!==null,us(e,s,a),Re=l;break;default:us(e,s,a)}}function _0(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{xl(e)}catch(a){ue(s,s.return,a)}}function K4(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new m0),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new m0),s;default:throw Error(r(435,e.tag))}}function bd(e,s){var a=K4(e);s.forEach(function(l){var f=i6.bind(null,e,l);a.has(l)||(a.add(l),l.then(f,f))})}function Ln(e,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,E=s,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(zs(S.type)){me=S.stateNode,Sn=!1;break t}break;case 5:me=S.stateNode,Sn=!1;break t;case 3:case 4:me=S.stateNode.containerInfo,Sn=!0;break t}S=S.return}if(me===null)throw Error(r(160));y0(d,E,f),me=null,Sn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)v0(s,e),s=s.sibling}var ui=null;function v0(e,s){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ln(s,e),kn(e),l&4&&(Ns(3,e,e.return),fl(3,e),Ns(5,e,e.return));break;case 1:Ln(s,e),kn(e),l&512&&(Re||a===null||Ii(a,a.return)),l&64&&ls&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ui;if(Ln(s,e),kn(e),l&512&&(Re||a===null||Ii(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[pr]||d[Pe]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),en(d,l,a),d[Pe]=e,we(d),l=d;break t;case"link":var E=dy("link","href",f).get(l+(a.href||""));if(E){for(var S=0;S<E.length;S++)if(d=E[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(S,1);break e}}d=f.createElement(l),en(d,l,a),f.head.appendChild(d);break;case"meta":if(E=dy("meta","content",f).get(l+(a.content||""))){for(S=0;S<E.length;S++)if(d=E[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(S,1);break e}}d=f.createElement(l),en(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Pe]=e,we(d),l=d}e.stateNode=l}else my(f,e.type,e.stateNode);else e.stateNode=hy(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?my(f,e.type,e.stateNode):hy(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&_d(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ln(s,e),kn(e),l&512&&(Re||a===null||Ii(a,a.return)),a!==null&&l&4&&_d(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ln(s,e),kn(e),l&512&&(Re||a===null||Ii(a,a.return)),e.flags&32){f=e.stateNode;try{Hn(f,"")}catch($){ue(e,e.return,$)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,_d(e,f,a!==null?a.memoizedProps:f)),l&1024&&(Td=!0);break;case 6:if(Ln(s,e),kn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch($){ue(e,e.return,$)}}break;case 3:if(Oc=null,f=ui,ui=Vc(s.containerInfo),Ln(s,e),ui=f,kn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{xl(s.containerInfo)}catch($){ue(e,e.return,$)}Td&&(Td=!1,E0(e));break;case 4:l=ui,ui=Vc(e.stateNode.containerInfo),Ln(s,e),kn(e),ui=l;break;case 12:Ln(s,e),kn(e);break;case 13:Ln(s,e),kn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Id=De()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bd(e,l)));break;case 22:f=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,F=ls,nt=Re;if(ls=F||f,Re=nt||N,Ln(s,e),Re=nt,ls=F,kn(e),l&8192)t:for(s=e.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||N||ls||Re||qr(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(d=N.stateNode,f)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=N.stateNode;var rt=N.memoizedProps.style,K=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;S.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch($){ue(N,N.return,$)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch($){ue(N,N.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bd(e,a))));break;case 19:Ln(s,e),kn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bd(e,l)));break;case 30:break;case 21:break;default:Ln(s,e),kn(e)}}function kn(e){var s=e.flags;if(s&2){try{for(var a,l=e.return;l!==null;){if(h0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=vd(e);vc(e,d,f);break;case 5:var E=a.stateNode;a.flags&32&&(Hn(E,""),a.flags&=-33);var S=vd(e);vc(e,S,E);break;case 3:case 4:var N=a.stateNode.containerInfo,F=vd(e);Ed(e,F,N);break;default:throw Error(r(161))}}catch(nt){ue(e,e.return,nt)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function E0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;E0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function Os(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)g0(e,s.alternate,s),s=s.sibling}function qr(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Ns(4,s,s.return),qr(s);break;case 1:Ii(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&c0(s,s.return,a),qr(s);break;case 27:Tl(s.stateNode);case 26:case 5:Ii(s,s.return),qr(s);break;case 22:s.memoizedState===null&&qr(s);break;case 30:qr(s);break;default:qr(s)}e=e.sibling}}function Ls(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=e,d=s,E=d.flags;switch(d.tag){case 0:case 11:case 15:Ls(f,d,a),fl(4,d);break;case 1:if(Ls(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ue(l,l.return,F)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)$g(N[f],S)}catch(F){ue(l,l.return,F)}}a&&E&64&&u0(d),hl(d,d.return);break;case 27:d0(d);case 26:case 5:Ls(f,d,a),a&&l===null&&E&4&&f0(d),hl(d,d.return);break;case 12:Ls(f,d,a);break;case 13:Ls(f,d,a),a&&E&4&&_0(f,d);break;case 22:d.memoizedState===null&&Ls(f,d,a),hl(d,d.return);break;case 30:break;default:Ls(f,d,a)}s=s.sibling}}function Sd(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Zo(a))}function Ad(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Zo(e))}function xi(e,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)T0(e,s,a,l),s=s.sibling}function T0(e,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:xi(e,s,a,l),f&2048&&fl(9,s);break;case 1:xi(e,s,a,l);break;case 3:xi(e,s,a,l),f&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Zo(e)));break;case 12:if(f&2048){xi(e,s,a,l),e=s.stateNode;try{var d=s.memoizedProps,E=d.id,S=d.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){ue(s,s.return,N)}}else xi(e,s,a,l);break;case 13:xi(e,s,a,l);break;case 23:break;case 22:d=s.stateNode,E=s.alternate,s.memoizedState!==null?d._visibility&2?xi(e,s,a,l):dl(e,s):d._visibility&2?xi(e,s,a,l):(d._visibility|=2,La(e,s,a,l,(s.subtreeFlags&10256)!==0)),f&2048&&Sd(E,s);break;case 24:xi(e,s,a,l),f&2048&&Ad(s.alternate,s);break;default:xi(e,s,a,l)}}function La(e,s,a,l,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var d=e,E=s,S=a,N=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:La(d,E,S,N,f),fl(8,E);break;case 23:break;case 22:var nt=E.stateNode;E.memoizedState!==null?nt._visibility&2?La(d,E,S,N,f):dl(d,E):(nt._visibility|=2,La(d,E,S,N,f)),f&&F&2048&&Sd(E.alternate,E);break;case 24:La(d,E,S,N,f),f&&F&2048&&Ad(E.alternate,E);break;default:La(d,E,S,N,f)}s=s.sibling}}function dl(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,l=s,f=l.flags;switch(l.tag){case 22:dl(a,l),f&2048&&Sd(l.alternate,l);break;case 24:dl(a,l),f&2048&&Ad(l.alternate,l);break;default:dl(a,l)}s=s.sibling}}var ml=8192;function ka(e){if(e.subtreeFlags&ml)for(e=e.child;e!==null;)b0(e),e=e.sibling}function b0(e){switch(e.tag){case 26:ka(e),e.flags&ml&&e.memoizedState!==null&&N6(ui,e.memoizedState,e.memoizedProps);break;case 5:ka(e);break;case 3:case 4:var s=ui;ui=Vc(e.stateNode.containerInfo),ka(e),ui=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=ml,ml=16777216,ka(e),ml=s):ka(e));break;default:ka(e)}}function S0(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function gl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ke=l,w0(l,e)}S0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)A0(e),e=e.sibling}function A0(e){switch(e.tag){case 0:case 11:case 15:gl(e),e.flags&2048&&Ns(9,e,e.return);break;case 3:gl(e);break;case 12:gl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Ec(e)):gl(e);break;default:gl(e)}}function Ec(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ke=l,w0(l,e)}S0(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Ns(8,s,s.return),Ec(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ec(s));break;default:Ec(s)}e=e.sibling}}function w0(e,s){for(;Ke!==null;){var a=Ke;switch(a.tag){case 0:case 11:case 15:Ns(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ke=l;else t:for(a=e;Ke!==null;){l=Ke;var f=l.sibling,d=l.return;if(p0(l),l===a){Ke=null;break t}if(f!==null){f.return=d,Ke=f;break t}Ke=d}}}var $4={getCacheForType:function(e){var s=on(Be),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},X4=typeof WeakMap=="function"?WeakMap:Map,ne=0,ce=null,zt=null,Yt=0,ie=0,Pn=null,ks=!1,Pa=!1,wd=!1,cs=0,Se=0,Ps=0,Hr=0,Cd=0,Jn=0,Ua=0,pl=null,An=null,Rd=!1,Id=0,Tc=1/0,bc=null,Us=null,tn=0,js=null,ja=null,Ba=0,xd=0,Dd=null,C0=null,yl=0,Md=null;function Un(){if((ne&2)!==0&&Yt!==0)return Yt&-Yt;if(G.T!==null){var e=Ra;return e!==0?e:Ud()}return Es()}function R0(){Jn===0&&(Jn=(Yt&536870912)===0||Jt?Co():536870912);var e=Zn.current;return e!==null&&(e.flags|=32),Jn}function jn(e,s,a){(e===ce&&(ie===2||ie===9)||e.cancelPendingCommit!==null)&&(za(e,0),Bs(e,Yt,Jn,!1)),qi(e,a),((ne&2)===0||e!==ce)&&(e===ce&&((ne&2)===0&&(Hr|=a),Se===4&&Bs(e,Yt,Jn,!1)),Di(e))}function I0(e,s,a){if((ne&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&e.expiredLanes)===0||gr(e,s),f=l?W4(e,s):Od(e,s,!0),d=l;do{if(f===0){Pa&&!l&&Bs(e,s,0,!1);break}else{if(a=e.current.alternate,d&&!Z4(a)){f=Od(e,s,!1),d=!1;continue}if(f===2){if(d=s,e.errorRecoveryDisabledLanes&d)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var S=e;f=pl;var N=S.current.memoizedState.isDehydrated;if(N&&(za(S,E).flags|=256),E=Od(S,E,!1),E!==2){if(wd&&!N){S.errorRecoveryDisabledLanes|=d,Hr|=d,f=4;break t}d=An,An=f,d!==null&&(An===null?An=d:An.push.apply(An,d))}f=E}if(d=!1,f!==2)continue}}if(f===1){za(e,0),Bs(e,s,0,!0);break}t:{switch(l=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Bs(l,s,Jn,!ks);break t;case 2:An=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Id+300-De(),10<f)){if(Bs(l,s,Jn,!ks),sa(l,0,!0)!==0)break t;l.timeoutHandle=iy(x0.bind(null,l,a,An,bc,Rd,s,Jn,Hr,Ua,ks,d,2,-0,0),f);break t}x0(l,a,An,bc,Rd,s,Jn,Hr,Ua,ks,d,0,-0,0)}}break}while(!0);Di(e)}function x0(e,s,a,l,f,d,E,S,N,F,nt,rt,K,$){if(e.timeoutHandle=-1,rt=s.subtreeFlags,(rt&8192||(rt&16785408)===16785408)&&(Al={stylesheets:null,count:0,unsuspend:V6},b0(s),rt=O6(),rt!==null)){e.cancelPendingCommit=rt(k0.bind(null,e,s,d,a,l,f,E,S,N,nt,1,K,$)),Bs(e,d,E,!F);return}k0(e,s,d,a,l,f,E,S,N)}function Z4(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Nn(d(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Bs(e,s,a,l){s&=~Cd,s&=~Hr,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var f=s;0<f;){var d=31-he(f),E=1<<d;l[d]=-1,f&=~E}a!==0&&gi(e,a,s)}function Sc(){return(ne&6)===0?(_l(0),!1):!0}function Vd(){if(zt!==null){if(ie===0)var e=zt.return;else e=zt,ns=Pr=null,$h(e),Na=null,ll=0,e=zt;for(;e!==null;)l0(e.alternate,e),e=e.return;zt=null}}function za(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,g6(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Vd(),ce=e,zt=a=Wi(e.current,null),Yt=s,ie=0,Pn=null,ks=!1,Pa=gr(e,s),wd=!1,Ua=Jn=Cd=Hr=Ps=Se=0,An=pl=null,Rd=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var f=31-he(l),d=1<<f;s|=e[f],l&=~d}return cs=s,Fu(),a}function D0(e,s){Ut=null,G.H=cc,s===Wo||s===tc?(s=Yg(),ie=3):s===Gg?(s=Yg(),ie=4):ie=s===Kp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pn=s,zt===null&&(Se=1,gc(e,Yn(s,e.current)))}function M0(){var e=G.H;return G.H=cc,e===null?cc:e}function V0(){var e=G.A;return G.A=$4,e}function Nd(){Se=4,ks||(Yt&4194048)!==Yt&&Zn.current!==null||(Pa=!0),(Ps&134217727)===0&&(Hr&134217727)===0||ce===null||Bs(ce,Yt,Jn,!1)}function Od(e,s,a){var l=ne;ne|=2;var f=M0(),d=V0();(ce!==e||Yt!==s)&&(bc=null,za(e,s)),s=!1;var E=Se;t:do try{if(ie!==0&&zt!==null){var S=zt,N=Pn;switch(ie){case 8:Vd(),E=6;break t;case 3:case 2:case 9:case 6:Zn.current===null&&(s=!0);var F=ie;if(ie=0,Pn=null,qa(e,S,N,F),a&&Pa){E=0;break t}break;default:F=ie,ie=0,Pn=null,qa(e,S,N,F)}}J4(),E=Se;break}catch(nt){D0(e,nt)}while(!0);return s&&e.shellSuspendCounter++,ns=Pr=null,ne=l,G.H=f,G.A=d,zt===null&&(ce=null,Yt=0,Fu()),E}function J4(){for(;zt!==null;)N0(zt)}function W4(e,s){var a=ne;ne|=2;var l=M0(),f=V0();ce!==e||Yt!==s?(bc=null,Tc=De()+500,za(e,s)):Pa=gr(e,s);t:do try{if(ie!==0&&zt!==null){s=zt;var d=Pn;e:switch(ie){case 1:ie=0,Pn=null,qa(e,s,d,1);break;case 2:case 9:if(Fg(d)){ie=0,Pn=null,O0(s);break}s=function(){ie!==2&&ie!==9||ce!==e||(ie=7),Di(e)},d.then(s,s);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:Fg(d)?(ie=0,Pn=null,O0(s)):(ie=0,Pn=null,qa(e,s,d,7));break;case 5:var E=null;switch(zt.tag){case 26:E=zt.memoizedState;case 5:case 27:var S=zt;if(!E||gy(E)){ie=0,Pn=null;var N=S.sibling;if(N!==null)zt=N;else{var F=S.return;F!==null?(zt=F,Ac(F)):zt=null}break e}}ie=0,Pn=null,qa(e,s,d,5);break;case 6:ie=0,Pn=null,qa(e,s,d,6);break;case 8:Vd(),Se=6;break t;default:throw Error(r(462))}}t6();break}catch(nt){D0(e,nt)}while(!0);return ns=Pr=null,G.H=l,G.A=f,ne=a,zt!==null?0:(ce=null,Yt=0,Fu(),Se)}function t6(){for(;zt!==null&&!pe();)N0(zt)}function N0(e){var s=a0(e.alternate,e,cs);e.memoizedProps=e.pendingProps,s===null?Ac(e):zt=s}function O0(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=t0(a,s,s.pendingProps,s.type,void 0,Yt);break;case 11:s=t0(a,s,s.pendingProps,s.type.render,s.ref,Yt);break;case 5:$h(s);default:l0(a,s),s=zt=Lg(s,cs),s=a0(a,s,cs)}e.memoizedProps=e.pendingProps,s===null?Ac(e):zt=s}function qa(e,s,a,l){ns=Pr=null,$h(s),Na=null,ll=0;var f=s.return;try{if(H4(e,f,s,a,Yt)){Se=1,gc(e,Yn(a,e.current)),zt=null;return}}catch(d){if(f!==null)throw zt=f,d;Se=1,gc(e,Yn(a,e.current)),zt=null;return}s.flags&32768?(Jt||l===1?e=!0:Pa||(Yt&536870912)!==0?e=!1:(ks=e=!0,(l===2||l===9||l===3||l===6)&&(l=Zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),L0(s,e)):Ac(s)}function Ac(e){var s=e;do{if((s.flags&32768)!==0){L0(s,ks);return}e=s.return;var a=F4(s.alternate,s,cs);if(a!==null){zt=a;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=e}while(s!==null);Se===0&&(Se=5)}function L0(e,s){do{var a=Q4(e.alternate,e);if(a!==null){a.flags&=32767,zt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){zt=e;return}zt=e=a}while(e!==null);Se=6,zt=null}function k0(e,s,a,l,f,d,E,S,N){e.cancelPendingCommit=null;do wc();while(tn!==0);if((ne&6)!==0)throw Error(r(327));if(s!==null){if(s===e.current)throw Error(r(177));if(d=s.lanes|s.childLanes,d|=Ah,Io(e,a,d,E,S,N),e===ce&&(zt=ce=null,Yt=0),ja=s,js=e,Ba=a,xd=d,Dd=f,C0=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s6(mn,function(){return z0(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,f=st.p,st.p=2,E=ne,ne|=4;try{Y4(e,s,a)}finally{ne=E,st.p=f,G.T=l}}tn=1,P0(),U0(),j0()}}function P0(){if(tn===1){tn=0;var e=js,s=ja,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=st.p;st.p=2;var f=ne;ne|=4;try{v0(s,e);var d=Qd,E=wg(e.containerInfo),S=d.focusedElem,N=d.selectionRange;if(E!==S&&S&&S.ownerDocument&&Ag(S.ownerDocument.documentElement,S)){if(N!==null&&vh(S)){var F=N.start,nt=N.end;if(nt===void 0&&(nt=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(nt,S.value.length);else{var rt=S.ownerDocument||document,K=rt&&rt.defaultView||window;if(K.getSelection){var $=K.getSelection(),xt=S.textContent.length,Ct=Math.min(N.start,xt),le=N.end===void 0?Ct:Math.min(N.end,xt);!$.extend&&Ct>le&&(E=le,le=Ct,Ct=E);var B=Sg(S,Ct),U=Sg(S,le);if(B&&U&&($.rangeCount!==1||$.anchorNode!==B.node||$.anchorOffset!==B.offset||$.focusNode!==U.node||$.focusOffset!==U.offset)){var H=rt.createRange();H.setStart(B.node,B.offset),$.removeAllRanges(),Ct>le?($.addRange(H),$.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),$.addRange(H))}}}}for(rt=[],$=S;$=$.parentNode;)$.nodeType===1&&rt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<rt.length;S++){var it=rt[S];it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}Pc=!!Fd,Qd=Fd=null}finally{ne=f,st.p=l,G.T=a}}e.current=s,tn=2}}function U0(){if(tn===2){tn=0;var e=js,s=ja,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=st.p;st.p=2;var f=ne;ne|=4;try{g0(e,s.alternate,s)}finally{ne=f,st.p=l,G.T=a}}tn=3}}function j0(){if(tn===4||tn===3){tn=0,hn();var e=js,s=ja,a=Ba,l=C0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tn=5:(tn=0,ja=js=null,B0(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Us=null),ra(a),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Zt,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=G.T,f=st.p,st.p=2,G.T=null;try{for(var d=e.onRecoverableError,E=0;E<l.length;E++){var S=l[E];d(S.value,{componentStack:S.stack})}}finally{G.T=s,st.p=f}}(Ba&3)!==0&&wc(),Di(e),f=e.pendingLanes,(a&4194090)!==0&&(f&42)!==0?e===Md?yl++:(yl=0,Md=e):yl=0,_l(0)}}function B0(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Zo(s)))}function wc(e){return P0(),U0(),j0(),z0()}function z0(){if(tn!==5)return!1;var e=js,s=xd;xd=0;var a=ra(Ba),l=G.T,f=st.p;try{st.p=32>a?32:a,G.T=null,a=Dd,Dd=null;var d=js,E=Ba;if(tn=0,ja=js=null,Ba=0,(ne&6)!==0)throw Error(r(331));var S=ne;if(ne|=4,A0(d.current),T0(d,d.current,E,a),ne=S,_l(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Zt,d)}catch{}return!0}finally{st.p=f,G.T=l,B0(e,s)}}function q0(e,s,a){s=Yn(a,s),s=ud(e.stateNode,s,2),e=xs(e,s,2),e!==null&&(qi(e,2),Di(e))}function ue(e,s,a){if(e.tag===3)q0(e,e,a);else for(;s!==null;){if(s.tag===3){q0(s,e,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Us===null||!Us.has(l))){e=Yn(a,e),a=Qp(2),l=xs(s,a,2),l!==null&&(Yp(a,l,s,e),qi(l,2),Di(l));break}}s=s.return}}function Ld(e,s,a){var l=e.pingCache;if(l===null){l=e.pingCache=new X4;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(wd=!0,f.add(a),e=e6.bind(null,e,s,a),s.then(e,e))}function e6(e,s,a){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ce===e&&(Yt&a)===a&&(Se===4||Se===3&&(Yt&62914560)===Yt&&300>De()-Id?(ne&2)===0&&za(e,0):Cd|=a,Ua===Yt&&(Ua=0)),Di(e)}function H0(e,s){s===0&&(s=Ro()),e=Sa(e,s),e!==null&&(qi(e,s),Di(e))}function n6(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),H0(e,a)}function i6(e,s){var a=0;switch(e.tag){case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),H0(e,a)}function s6(e,s){return Te(e,s)}var Cc=null,Ha=null,kd=!1,Rc=!1,Pd=!1,Gr=0;function Di(e){e!==Ha&&e.next===null&&(Ha===null?Cc=Ha=e:Ha=Ha.next=e),Rc=!0,kd||(kd=!0,a6())}function _l(e,s){if(!Pd&&Rc){Pd=!0;do for(var a=!1,l=Cc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var E=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-he(42|e)+1)-1,d&=f&~(E&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Y0(l,d))}else d=Yt,d=sa(l,l===ce?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||gr(l,d)||(a=!0,Y0(l,d));l=l.next}while(a);Pd=!1}}function r6(){G0()}function G0(){Rc=kd=!1;var e=0;Gr!==0&&(m6()&&(e=Gr),Gr=0);for(var s=De(),a=null,l=Cc;l!==null;){var f=l.next,d=F0(l,s);d===0?(l.next=null,a===null?Cc=f:a.next=f,f===null&&(Ha=a)):(a=l,(e!==0||(d&3)!==0)&&(Rc=!0)),l=f}_l(e)}function F0(e,s){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var E=31-he(d),S=1<<E,N=f[E];N===-1?((S&a)===0||(S&l)!==0)&&(f[E]=wo(S,s)):N<=s&&(e.expiredLanes|=S),d&=~S}if(s=ce,a=Yt,a=sa(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===s&&(ie===2||ie===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ae(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||gr(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(l!==null&&Ae(l),ra(a)){case 2:case 8:a=an;break;case 32:a=mn;break;case 268435456:a=Mn;break;default:a=mn}return l=Q0.bind(null,e),a=Te(a,l),e.callbackPriority=s,e.callbackNode=a,s}return l!==null&&l!==null&&Ae(l),e.callbackPriority=2,e.callbackNode=null,2}function Q0(e,s){if(tn!==0&&tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(wc()&&e.callbackNode!==a)return null;var l=Yt;return l=sa(e,e===ce?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(I0(e,l,s),F0(e,De()),e.callbackNode!=null&&e.callbackNode===a?Q0.bind(null,e):null)}function Y0(e,s){if(wc())return null;I0(e,s,!0)}function a6(){p6(function(){(ne&6)!==0?Te(dn,r6):G0()})}function Ud(){return Gr===0&&(Gr=Co()),Gr}function K0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fa(""+e)}function $0(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function o6(e,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var d=K0((f[Me]||null).action),E=l.submitter;E&&(s=(s=E[Me]||null)?K0(s.formAction):E.getAttribute("formAction"),s!==null&&(d=s,E=null));var S=new ha("action","action",null,l,f);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Gr!==0){var N=E?$0(f,E):new FormData(f);sd(a,{pending:!0,data:N,method:f.method,action:d},null,N)}}else typeof d=="function"&&(S.preventDefault(),N=E?$0(f,E):new FormData(f),sd(a,{pending:!0,data:N,method:f.method,action:d},d,N))},currentTarget:f}]})}}for(var jd=0;jd<Sh.length;jd++){var Bd=Sh[jd],l6=Bd.toLowerCase(),u6=Bd[0].toUpperCase()+Bd.slice(1);li(l6,"on"+u6)}li(Ig,"onAnimationEnd"),li(xg,"onAnimationIteration"),li(Dg,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(C4,"onTransitionRun"),li(R4,"onTransitionStart"),li(I4,"onTransitionCancel"),li(Mg,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function X0(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var d=void 0;if(s)for(var E=l.length-1;0<=E;E--){var S=l[E],N=S.instance,F=S.currentTarget;if(S=S.listener,N!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=F;try{d(f)}catch(nt){mc(nt)}f.currentTarget=null,d=N}else for(E=0;E<l.length;E++){if(S=l[E],N=S.instance,F=S.currentTarget,S=S.listener,N!==d&&f.isPropagationStopped())break t;d=S,f.currentTarget=F;try{d(f)}catch(nt){mc(nt)}f.currentTarget=null,d=N}}}}function qt(e,s){var a=s[Do];a===void 0&&(a=s[Do]=new Set);var l=e+"__bubble";a.has(l)||(Z0(s,e,2,!1),a.add(l))}function zd(e,s,a){var l=0;s&&(l|=4),Z0(a,e,l,s)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function qd(e){if(!e[Ic]){e[Ic]=!0,Mo.forEach(function(a){a!=="selectionchange"&&(c6.has(a)||zd(a,!1,e),zd(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Ic]||(s[Ic]=!0,zd("selectionchange",!1,s))}}function Z0(e,s,a,l){switch(Ty(s)){case 2:var f=P6;break;case 8:f=U6;break;default:f=nm}a=f.bind(null,s,a,e),f=void 0,!Fn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(s,a,{capture:!0,passive:f}):e.addEventListener(s,a,!0):f!==void 0?e.addEventListener(s,a,{passive:f}):e.addEventListener(s,a,!1)}function Hd(e,s,a,l,f){var d=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var S=l.stateNode.containerInfo;if(S===f)break;if(E===4)for(E=l.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;S!==null;){if(E=Hi(S),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){l=d=E;continue t}S=S.parentNode}}l=l.return}Du(function(){var F=d,nt=Gn(a),rt=[];t:{var K=Vg.get(e);if(K!==void 0){var $=ha,xt=e;switch(e){case"keypress":if(Ti(a)===0)break t;case"keydown":case"keyup":$=_a;break;case"focusin":xt="focus",$=ga;break;case"focusout":xt="blur",$=ga;break;case"beforeblur":case"afterblur":$=ga;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Uu;break;case Ig:case xg:case Dg:$=pa;break;case Mg:$=Bu;break;case"scroll":case"scrollend":$=Mu;break;case"wheel":$=va;break;case"copy":case"cut":case"paste":$=ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Ho;break;case"toggle":case"beforetoggle":$=qu}var Ct=(s&4)!==0,le=!Ct&&(e==="scroll"||e==="scrollend"),B=Ct?K!==null?K+"Capture":null:K;Ct=[];for(var U=F,H;U!==null;){var it=U;if(H=it.stateNode,it=it.tag,it!==5&&it!==26&&it!==27||H===null||B===null||(it=Sr(U,B),it!=null&&Ct.push(El(U,it,H))),le)break;U=U.return}0<Ct.length&&(K=new $(K,xt,null,a,nt),rt.push({event:K,listeners:Ct}))}}if((s&7)===0){t:{if(K=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",K&&a!==Yi&&(xt=a.relatedTarget||a.fromElement)&&(Hi(xt)||xt[qn]))break t;if(($||K)&&(K=nt.window===nt?nt:(K=nt.ownerDocument)?K.defaultView||K.parentWindow:window,$?(xt=a.relatedTarget||a.toElement,$=F,xt=xt?Hi(xt):null,xt!==null&&(le=u(xt),Ct=xt.tag,xt!==le||Ct!==5&&Ct!==27&&Ct!==6)&&(xt=null)):($=null,xt=F),$!==xt)){if(Ct=Qn,it="onMouseLeave",B="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(Ct=Ho,it="onPointerLeave",B="onPointerEnter",U="pointer"),le=$==null?K:yi($),H=xt==null?K:yi(xt),K=new Ct(it,U+"leave",$,a,nt),K.target=le,K.relatedTarget=H,it=null,Hi(nt)===F&&(Ct=new Ct(B,U+"enter",xt,a,nt),Ct.target=H,Ct.relatedTarget=le,it=Ct),le=it,$&&xt)e:{for(Ct=$,B=xt,U=0,H=Ct;H;H=Ga(H))U++;for(H=0,it=B;it;it=Ga(it))H++;for(;0<U-H;)Ct=Ga(Ct),U--;for(;0<H-U;)B=Ga(B),H--;for(;U--;){if(Ct===B||B!==null&&Ct===B.alternate)break e;Ct=Ga(Ct),B=Ga(B)}Ct=null}else Ct=null;$!==null&&J0(rt,K,$,Ct,!1),xt!==null&&le!==null&&J0(rt,le,xt,Ct,!0)}}t:{if(K=F?yi(F):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var vt=yg;else if(je(K))if(_g)vt=S4;else{vt=T4;var Bt=E4}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&ko(F.elementType)&&(vt=yg):vt=b4;if(vt&&(vt=vt(e,F))){Ji(rt,vt,a,nt);break t}Bt&&Bt(e,K,F),e==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&As(K,"number",K.value)}switch(Bt=F?yi(F):window,e){case"focusin":(je(Bt)||Bt.contentEditable==="true")&&(Ea=Bt,Eh=F,Qo=null);break;case"focusout":Qo=Eh=Ea=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,Cg(rt,a,nt);break;case"selectionchange":if(w4)break;case"keydown":case"keyup":Cg(rt,a,nt)}var bt;if(Ai)t:{switch(e){case"compositionstart":var Rt="onCompositionStart";break t;case"compositionend":Rt="onCompositionEnd";break t;case"compositionupdate":Rt="onCompositionUpdate";break t}Rt=void 0}else Ft?Z(e,a)&&(Rt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Rt="onCompositionStart");Rt&&(_&&a.locale!=="ko"&&(Ft||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Ft&&(bt=Uo()):(Ei=nt,ws="value"in Ei?Ei.value:Ei.textContent,Ft=!0)),Bt=xc(F,Rt),0<Bt.length&&(Rt=new zo(Rt,e,null,a,nt),rt.push({event:Rt,listeners:Bt}),bt?Rt.data=bt:(bt=gt(a),bt!==null&&(Rt.data=bt)))),(bt=p?Ue(e,a):Qt(e,a))&&(Rt=xc(F,"onBeforeInput"),0<Rt.length&&(Bt=new zo("onBeforeInput","beforeinput",null,a,nt),rt.push({event:Bt,listeners:Rt}),Bt.data=bt)),o6(rt,e,F,a,nt)}X0(rt,s)})}function El(e,s,a){return{instance:e,listener:s,currentTarget:a}}function xc(e,s){for(var a=s+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Sr(e,a),f!=null&&l.unshift(El(e,f,d)),f=Sr(e,s),f!=null&&l.push(El(e,f,d))),e.tag===3)return l;e=e.return}return[]}function Ga(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function J0(e,s,a,l,f){for(var d=s._reactName,E=[];a!==null&&a!==l;){var S=a,N=S.alternate,F=S.stateNode;if(S=S.tag,N!==null&&N===l)break;S!==5&&S!==26&&S!==27||F===null||(N=F,f?(F=Sr(a,d),F!=null&&E.unshift(El(a,F,N))):f||(F=Sr(a,d),F!=null&&E.push(El(a,F,N)))),a=a.return}E.length!==0&&e.push({event:s,listeners:E})}var f6=/\r\n?/g,h6=/\u0000|\uFFFD/g;function W0(e){return(typeof e=="string"?e:""+e).replace(f6,`
`).replace(h6,"")}function ty(e,s){return s=W0(s),W0(e)===s}function Dc(){}function oe(e,s,a,l,f,d){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Hn(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Hn(e,""+l);break;case"className":_i(e,"class",l);break;case"tabIndex":_i(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(e,a,l);break;case"style":Lo(e,l,d);break;case"data":if(s!=="object"){_i(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=fa(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(s!=="input"&&oe(e,s,"name",f.name,f,null),oe(e,s,"formEncType",f.formEncType,f,null),oe(e,s,"formMethod",f.formMethod,f,null),oe(e,s,"formTarget",f.formTarget,f,null)):(oe(e,s,"encType",f.encType,f,null),oe(e,s,"method",f.method,f,null),oe(e,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=fa(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Dc);break;case"onScroll":l!=null&&qt("scroll",e);break;case"onScrollEnd":l!=null&&qt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=fa(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":qt("beforetoggle",e),qt("toggle",e),Ss(e,"popover",l);break;case"xlinkActuate":Ze(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ze(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ze(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ze(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ze(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ze(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ze(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ze(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ze(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ss(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=dh.get(a)||a,Ss(e,a,l))}}function Gd(e,s,a,l,f,d){switch(a){case"style":Lo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Hn(e,l):(typeof l=="number"||typeof l=="bigint")&&Hn(e,""+l);break;case"onScroll":l!=null&&qt("scroll",e);break;case"onScrollEnd":l!=null&&qt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Dc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!aa.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),d=e[Me]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(s,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Ss(e,a,l)}}}function en(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",e),qt("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(e,s,d,E,a,null)}}f&&oe(e,s,"srcSet",a.srcSet,a,null),l&&oe(e,s,"src",a.src,a,null);return;case"input":qt("invalid",e);var S=d=E=f=null,N=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var nt=a[l];if(nt!=null)switch(l){case"name":f=nt;break;case"type":E=nt;break;case"checked":N=nt;break;case"defaultChecked":F=nt;break;case"value":d=nt;break;case"defaultValue":S=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(r(137,s));break;default:oe(e,s,l,nt,a,null)}}Er(e,d,S,N,F,E,f,!1),ca(e);return;case"select":qt("invalid",e),l=E=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":E=S;break;case"multiple":l=S;default:oe(e,s,f,S,a,null)}s=d,a=E,e.multiple=!!l,s!=null?Qi(e,!!l,s,!1):a!=null&&Qi(e,!!l,a,!0);return;case"textarea":qt("invalid",e),d=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(S=a[E],S!=null))switch(E){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:oe(e,s,E,S,a,null)}Tr(e,l,f,d),ca(e);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:oe(e,s,N,l,a,null)}return;case"dialog":qt("beforetoggle",e),qt("toggle",e),qt("cancel",e),qt("close",e);break;case"iframe":case"object":qt("load",e);break;case"video":case"audio":for(l=0;l<vl.length;l++)qt(vl[l],e);break;case"image":qt("error",e),qt("load",e);break;case"details":qt("toggle",e);break;case"embed":case"source":case"link":qt("error",e),qt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(e,s,F,l,a,null)}return;default:if(ko(s)){for(nt in a)a.hasOwnProperty(nt)&&(l=a[nt],l!==void 0&&Gd(e,s,nt,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&oe(e,s,S,l,a,null))}function d6(e,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,E=null,S=null,N=null,F=null,nt=null;for($ in a){var rt=a[$];if(a.hasOwnProperty($)&&rt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":N=rt;default:l.hasOwnProperty($)||oe(e,s,$,null,l,rt)}}for(var K in l){var $=l[K];if(rt=a[K],l.hasOwnProperty(K)&&($!=null||rt!=null))switch(K){case"type":d=$;break;case"name":f=$;break;case"checked":F=$;break;case"defaultChecked":nt=$;break;case"value":E=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:$!==rt&&oe(e,s,K,$,l,rt)}}Vn(e,E,S,N,F,nt,d,f);return;case"select":$=E=S=K=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":$=N;default:l.hasOwnProperty(d)||oe(e,s,d,null,l,N)}for(f in l)if(d=l[f],N=a[f],l.hasOwnProperty(f)&&(d!=null||N!=null))switch(f){case"value":K=d;break;case"defaultValue":S=d;break;case"multiple":E=d;default:d!==N&&oe(e,s,f,d,l,N)}s=S,a=E,l=$,K!=null?Qi(e,!!a,K,!1):!!l!=!!a&&(s!=null?Qi(e,!!a,s,!0):Qi(e,!!a,a?[]:"",!1));return;case"textarea":$=K=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:oe(e,s,S,null,l,f)}for(E in l)if(f=l[E],d=a[E],l.hasOwnProperty(E)&&(f!=null||d!=null))switch(E){case"value":K=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&oe(e,s,E,f,l,d)}re(e,K,$);return;case"option":for(var xt in a)if(K=a[xt],a.hasOwnProperty(xt)&&K!=null&&!l.hasOwnProperty(xt))switch(xt){case"selected":e.selected=!1;break;default:oe(e,s,xt,null,l,K)}for(N in l)if(K=l[N],$=a[N],l.hasOwnProperty(N)&&K!==$&&(K!=null||$!=null))switch(N){case"selected":e.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:oe(e,s,N,K,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ct in a)K=a[Ct],a.hasOwnProperty(Ct)&&K!=null&&!l.hasOwnProperty(Ct)&&oe(e,s,Ct,null,l,K);for(F in l)if(K=l[F],$=a[F],l.hasOwnProperty(F)&&K!==$&&(K!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:oe(e,s,F,K,l,$)}return;default:if(ko(s)){for(var le in a)K=a[le],a.hasOwnProperty(le)&&K!==void 0&&!l.hasOwnProperty(le)&&Gd(e,s,le,void 0,l,K);for(nt in l)K=l[nt],$=a[nt],!l.hasOwnProperty(nt)||K===$||K===void 0&&$===void 0||Gd(e,s,nt,K,l,$);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&oe(e,s,B,null,l,K);for(rt in l)K=l[rt],$=a[rt],!l.hasOwnProperty(rt)||K===$||K==null&&$==null||oe(e,s,rt,K,l,$)}var Fd=null,Qd=null;function Mc(e){return e.nodeType===9?e:e.ownerDocument}function ey(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ny(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Yd(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kd=null;function m6(){var e=window.event;return e&&e.type==="popstate"?e===Kd?!1:(Kd=e,!0):(Kd=null,!1)}var iy=typeof setTimeout=="function"?setTimeout:void 0,g6=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,p6=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(e){return sy.resolve(null).then(e).catch(y6)}:iy;function y6(e){setTimeout(function(){throw e})}function zs(e){return e==="head"}function ry(e,s){var a=s,l=0,f=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=e.ownerDocument;if(a&1&&Tl(E.documentElement),a&2&&Tl(E.body),a&4)for(a=E.head,Tl(a),E=a.firstChild;E;){var S=E.nextSibling,N=E.nodeName;E[pr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=S}}if(f===0){e.removeChild(d),xl(s);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);xl(s)}function $d(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":$d(a),bs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function _6(e,s,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[pr])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=ci(e.nextSibling),e===null)break}return null}function v6(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ci(e.nextSibling),e===null))return null;return e}function Xd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function E6(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ci(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Zd=null;function ay(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function oy(e,s,a){switch(s=Mc(a),e){case"html":if(e=s.documentElement,!e)throw Error(r(452));return e;case"head":if(e=s.head,!e)throw Error(r(453));return e;case"body":if(e=s.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Tl(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);bs(e)}var Wn=new Map,ly=new Set;function Vc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fs=st.d;st.d={f:T6,r:b6,D:S6,C:A6,L:w6,m:C6,X:I6,S:R6,M:x6};function T6(){var e=fs.f(),s=Sc();return e||s}function b6(e){var s=pi(e);s!==null&&s.tag===5&&s.type==="form"?Ip(s):fs.r(e)}var Fa=typeof document>"u"?null:document;function uy(e,s,a){var l=Fa;if(l&&typeof s=="string"&&s){var f=Ve(s);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),ly.has(f)||(ly.add(f),e={rel:e,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),en(s,"link",e),we(s),l.head.appendChild(s)))}}function S6(e){fs.D(e),uy("dns-prefetch",e,null)}function A6(e,s){fs.C(e,s),uy("preconnect",e,s)}function w6(e,s,a){fs.L(e,s,a);var l=Fa;if(l&&e&&s){var f='link[rel="preload"][as="'+Ve(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ve(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ve(a.imageSizes)+'"]')):f+='[href="'+Ve(e)+'"]';var d=f;switch(s){case"style":d=Qa(e);break;case"script":d=Ya(e)}Wn.has(d)||(e=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),Wn.set(d,e),l.querySelector(f)!==null||s==="style"&&l.querySelector(bl(d))||s==="script"&&l.querySelector(Sl(d))||(s=l.createElement("link"),en(s,"link",e),we(s),l.head.appendChild(s)))}}function C6(e,s){fs.m(e,s);var a=Fa;if(a&&e){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ve(l)+'"][href="'+Ve(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ya(e)}if(!Wn.has(d)&&(e=v({rel:"modulepreload",href:e},s),Wn.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(d)))return}l=a.createElement("link"),en(l,"link",e),we(l),a.head.appendChild(l)}}}function R6(e,s,a){fs.S(e,s,a);var l=Fa;if(l&&e){var f=yn(l).hoistableStyles,d=Qa(e);s=s||"default";var E=f.get(d);if(!E){var S={loading:0,preload:null};if(E=l.querySelector(bl(d)))S.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":s},a),(a=Wn.get(d))&&Jd(e,a);var N=E=l.createElement("link");we(N),en(N,"link",e),N._p=new Promise(function(F,nt){N.onload=F,N.onerror=nt}),N.addEventListener("load",function(){S.loading|=1}),N.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Nc(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:S},f.set(d,E)}}}function I6(e,s){fs.X(e,s);var a=Fa;if(a&&e){var l=yn(a).hoistableScripts,f=Ya(e),d=l.get(f);d||(d=a.querySelector(Sl(f)),d||(e=v({src:e,async:!0},s),(s=Wn.get(f))&&Wd(e,s),d=a.createElement("script"),we(d),en(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function x6(e,s){fs.M(e,s);var a=Fa;if(a&&e){var l=yn(a).hoistableScripts,f=Ya(e),d=l.get(f);d||(d=a.querySelector(Sl(f)),d||(e=v({src:e,async:!0,type:"module"},s),(s=Wn.get(f))&&Wd(e,s),d=a.createElement("script"),we(d),en(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function cy(e,s,a,l){var f=(f=Et.current)?Vc(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Qa(a.href),a=yn(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Qa(a.href);var d=yn(f).hoistableStyles,E=d.get(e);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,E),(d=f.querySelector(bl(e)))&&!d._p&&(E.instance=d,E.state.loading=5),Wn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(e,a),d||D6(f,e,a,E.state))),s&&l===null)throw Error(r(528,""));return E}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ya(a),a=yn(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Qa(e){return'href="'+Ve(e)+'"'}function bl(e){return'link[rel="stylesheet"]['+e+"]"}function fy(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function D6(e,s,a,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),en(s,"link",a),we(s),e.head.appendChild(s))}function Ya(e){return'[src="'+Ve(e)+'"]'}function Sl(e){return"script[async]"+e}function hy(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+Ve(a.href)+'"]');if(l)return s.instance=l,we(l),l;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),we(l),en(l,"style",f),Nc(l,a.precedence,e),s.instance=l;case"stylesheet":f=Qa(a.href);var d=e.querySelector(bl(f));if(d)return s.state.loading|=4,s.instance=d,we(d),d;l=fy(a),(f=Wn.get(f))&&Jd(l,f),d=(e.ownerDocument||e).createElement("link"),we(d);var E=d;return E._p=new Promise(function(S,N){E.onload=S,E.onerror=N}),en(d,"link",l),s.state.loading|=4,Nc(d,a.precedence,e),s.instance=d;case"script":return d=Ya(a.src),(f=e.querySelector(Sl(d)))?(s.instance=f,we(f),f):(l=a,(f=Wn.get(d))&&(l=v({},a),Wd(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),we(f),en(f,"link",l),e.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Nc(l,a.precedence,e));return s.instance}function Nc(e,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,E=0;E<l.length;E++){var S=l[E];if(S.dataset.precedence===s)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function Jd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Wd(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Oc=null;function dy(e,s,a){if(Oc===null){var l=new Map,f=Oc=new Map;f.set(a,l)}else f=Oc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[pr]||d[Pe]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(s)||"";E=e+E;var S=l.get(E);S?S.push(d):l.set(E,[d])}}return l}function my(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function M6(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function gy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Al=null;function V6(){}function N6(e,s,a){if(Al===null)throw Error(r(475));var l=Al;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Qa(a.href),d=e.querySelector(bl(f));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Lc.bind(l),e.then(l,l)),s.state.loading|=4,s.instance=d,we(d);return}d=e.ownerDocument||e,a=fy(a),(f=Wn.get(f))&&Jd(a,f),d=d.createElement("link"),we(d);var E=d;E._p=new Promise(function(S,N){E.onload=S,E.onerror=N}),en(d,"link",a),s.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Lc.bind(l),e.addEventListener("load",s),e.addEventListener("error",s))}}function O6(){if(Al===null)throw Error(r(475));var e=Al;return e.stylesheets&&e.count===0&&tm(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&tm(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Lc(){if(this.count--,this.count===0){if(this.stylesheets)tm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var kc=null;function tm(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,kc=new Map,s.forEach(L6,e),kc=null,Lc.call(e))}function L6(e,s){if(!(s.state.loading&4)){var a=kc.get(e);if(a)var l=a.get(null);else{a=new Map,kc.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var E=f[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=s.instance,E=f.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,f),a.set(E,f),this.count++,l=Lc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),s.state.loading|=4}}var wl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function k6(e,s,a,l,f,d,E,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function py(e,s,a,l,f,d,E,S,N,F,nt,rt){return e=new k6(e,s,a,E,S,N,F,rt),s=1,d===!0&&(s|=24),d=On(3,null,null,s),e.current=d,d.stateNode=e,s=Lh(),s.refCount++,e.pooledCache=s,s.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:s},jh(d),e}function yy(e){return e?(e=Aa,e):Aa}function _y(e,s,a,l,f,d){f=yy(f),l.context===null?l.context=f:l.pendingContext=f,l=Is(s),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=xs(e,l,s),a!==null&&(jn(a,e,s),el(a,e,s))}function vy(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function em(e,s){vy(e,s),(e=e.alternate)&&vy(e,s)}function Ey(e){if(e.tag===13){var s=Sa(e,67108864);s!==null&&jn(s,e,67108864),em(e,67108864)}}var Pc=!0;function P6(e,s,a,l){var f=G.T;G.T=null;var d=st.p;try{st.p=2,nm(e,s,a,l)}finally{st.p=d,G.T=f}}function U6(e,s,a,l){var f=G.T;G.T=null;var d=st.p;try{st.p=8,nm(e,s,a,l)}finally{st.p=d,G.T=f}}function nm(e,s,a,l){if(Pc){var f=im(l);if(f===null)Hd(e,s,l,Uc,a),by(e,l);else if(B6(f,e,s,a,l))l.stopPropagation();else if(by(e,l),s&4&&-1<j6.indexOf(e)){for(;f!==null;){var d=pi(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=ri(d.pendingLanes);if(E!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var N=1<<31-he(E);S.entanglements[1]|=N,E&=~N}Di(d),(ne&6)===0&&(Tc=De()+500,_l(0))}}break;case 13:S=Sa(d,2),S!==null&&jn(S,d,2),Sc(),em(d,2)}if(d=im(l),d===null&&Hd(e,s,l,Uc,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Hd(e,s,l,null,a)}}function im(e){return e=Gn(e),sm(e)}var Uc=null;function sm(e){if(Uc=null,e=Hi(e),e!==null){var s=u(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=h(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Uc=e,null}function Ty(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mi()){case dn:return 2;case an:return 8;case mn:case gn:return 32;case Mn:return 268435456;default:return 32}default:return 32}}var rm=!1,qs=null,Hs=null,Gs=null,Cl=new Map,Rl=new Map,Fs=[],j6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function by(e,s){switch(e){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Cl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(s.pointerId)}}function Il(e,s,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},s!==null&&(s=pi(s),s!==null&&Ey(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),e)}function B6(e,s,a,l,f){switch(s){case"focusin":return qs=Il(qs,e,s,a,l,f),!0;case"dragenter":return Hs=Il(Hs,e,s,a,l,f),!0;case"mouseover":return Gs=Il(Gs,e,s,a,l,f),!0;case"pointerover":var d=f.pointerId;return Cl.set(d,Il(Cl.get(d)||null,e,s,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Rl.set(d,Il(Rl.get(d)||null,e,s,a,l,f)),!0}return!1}function Sy(e){var s=Hi(e.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){e.blockedOn=s,Su(e.priority,function(){if(a.tag===13){var l=Un();l=vs(l);var f=Sa(a,l);f!==null&&jn(f,a,l),em(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=im(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Yi=l,a.target.dispatchEvent(l),Yi=null}else return s=pi(a),s!==null&&Ey(s),e.blockedOn=a,!1;s.shift()}return!0}function Ay(e,s,a){jc(e)&&a.delete(s)}function z6(){rm=!1,qs!==null&&jc(qs)&&(qs=null),Hs!==null&&jc(Hs)&&(Hs=null),Gs!==null&&jc(Gs)&&(Gs=null),Cl.forEach(Ay),Rl.forEach(Ay)}function Bc(e,s){e.blockedOn===s&&(e.blockedOn=null,rm||(rm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,z6)))}var zc=null;function wy(e){zc!==e&&(zc=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zc===e&&(zc=null);for(var s=0;s<e.length;s+=3){var a=e[s],l=e[s+1],f=e[s+2];if(typeof l!="function"){if(sm(l||a)===null)continue;break}var d=pi(a);d!==null&&(e.splice(s,3),s-=3,sd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function xl(e){function s(N){return Bc(N,e)}qs!==null&&Bc(qs,e),Hs!==null&&Bc(Hs,e),Gs!==null&&Bc(Gs,e),Cl.forEach(s),Rl.forEach(s);for(var a=0;a<Fs.length;a++){var l=Fs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Fs.length&&(a=Fs[0],a.blockedOn===null);)Sy(a),a.blockedOn===null&&Fs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],E=f[Me]||null;if(typeof d=="function")E||wy(a);else if(E){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,E=d[Me]||null)S=E.formAction;else if(sm(f)!==null)continue}else S=E.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),wy(a)}}}function am(e){this._internalRoot=e}qc.prototype.render=am.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=Un();_y(a,l,e,s,null,null)},qc.prototype.unmount=am.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;_y(e.current,2,null,e,null,null),Sc(),s[qn]=null}};function qc(e){this._internalRoot=e}qc.prototype.unstable_scheduleHydration=function(e){if(e){var s=Es();e={blockedOn:null,target:e,priority:s};for(var a=0;a<Fs.length&&s!==0&&s<Fs[a].priority;a++);Fs.splice(a,0,e),a===0&&Sy(e)}};var Cy=t.version;if(Cy!=="19.1.0")throw Error(r(527,Cy,"19.1.0"));st.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(s),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var q6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Zt=Hc.inject(q6),Gt=Hc}catch{}}return Ml.createRoot=function(e,s){if(!o(e))throw Error(r(299));var a=!1,l="",f=qp,d=Hp,E=Gp,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=py(e,1,!1,null,null,a,l,f,d,E,S,null),e[qn]=s.current,qd(e),new am(s)},Ml.hydrateRoot=function(e,s,a){if(!o(e))throw Error(r(299));var l=!1,f="",d=qp,E=Hp,S=Gp,N=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),s=py(e,1,!0,s,a??null,l,f,d,E,S,N,F),s.context=yy(null),a=s.current,l=Un(),l=vs(l),f=Is(l),f.callback=null,xs(a,f,l),a=l,s.current.lanes=a,qi(s,a),Di(s),e[qn]=s.current,qd(e),new qc(s)},Ml.version="19.1.0",Ml}var ky;function J6(){if(ky)return um.exports;ky=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),um.exports=Z6(),um.exports}var W6=J6(),dm={exports:{}},mm={};/**
 * @license React
 * react-compiler-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function t9(){if(Py)return mm;Py=1;var n=Mf().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;return mm.c=function(t){return n.H.useMemoCache(t)},mm}var Uy;function e9(){return Uy||(Uy=1,dm.exports=t9()),dm.exports}var xe=e9();const n9=[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}],Dn=X.createContext(null),i9=n=>{const t=xe.c(10),{children:i}=n,[r,o]=X.useState(!0),u=X.useRef("prod"),[h,m]=X.useState(!1),y=X.useRef(null);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[0]=g):g=t[0];const v=X.useRef(g),b=X.useRef(null),T=X.useRef(null),R=X.useRef(null),V=X.useRef(null),j=X.useRef("");let k;t[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],t[1]=k):k=t[1];const z=X.useRef(k);let W,Q;if(t[2]===Symbol.for("react.memo_cache_sentinel")?(W=()=>(u.current==="testing"?(y.current||(console.log("Creating a peer connection!"),y.current=new RTCPeerConnection({iceServers:n9})),V.current||(V.current=new MediaStream),y.current.ontrack=Y=>{V.current.addTrack(Y.track)},o(!1)):(async()=>{const x=await(await fetch("https://boopp.metered.live/api/v1/turn/credentials?apiKey=4ed69c72a74b9dba8ccbda3d7e966f90f898")).json();console.log("Peer connection set up!"),y.current=new RTCPeerConnection({iceServers:x}),V.current||(V.current=new MediaStream),y.current.ontrack=w=>{V.current.addTrack(w.track)},o(!1)})(),(async()=>{const Y=await fetch("https://tenor.googleapis.com/v2/featured?key=AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k&client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low").then(s9);z.current=Y.results,console.log(z.current)})(),()=>{y.current&&(y.current.close(),y.current=null)}),Q=[],t[2]=W,t[3]=Q):(W=t[2],Q=t[3]),X.useEffect(W,Q),r){let Y;return t[4]===Symbol.for("react.memo_cache_sentinel")?(Y=I.jsx("div",{children:" Loading .. "}),t[4]=Y):Y=t[4],Y}let et;t[5]!==h?(et={peerConnection:y,iceCandidates:v,dataChannel:b,imageChannel:T,videoChannel:R,remoteStream:V,peerName:j,connected:h,setConnected:m,featuredGifs:z},t[5]=h,t[6]=et):et=t[6];let tt;return t[7]!==i||t[8]!==et?(tt=I.jsx(Dn,{value:et,children:i}),t[7]=i,t[8]=et,t[9]=tt):tt=t[9],tt};function s9(n){return n.json()}var E1=gu(),Ot=n=>mu(n,E1),T1=gu();Ot.write=n=>mu(n,T1);var Vf=gu();Ot.onStart=n=>mu(n,Vf);var b1=gu();Ot.onFrame=n=>mu(n,b1);var S1=gu();Ot.onFinish=n=>mu(n,S1);var no=[];Ot.setTimeout=(n,t)=>{const i=Ot.now()+t,r=()=>{const u=no.findIndex(h=>h.cancel==r);~u&&no.splice(u,1),Xs-=~u?1:0},o={time:i,handler:n,cancel:r};return no.splice(V_(i),0,o),Xs+=1,N_(),o};var V_=n=>~(~no.findIndex(t=>t.time>n)||~no.length);Ot.cancel=n=>{Vf.delete(n),b1.delete(n),S1.delete(n),E1.delete(n),T1.delete(n)};Ot.sync=n=>{Om=!0,Ot.batchedUpdates(n),Om=!1};Ot.throttle=n=>{let t;function i(){try{n(...t)}finally{t=null}}function r(...o){t=o,Ot.onStart(i)}return r.handler=n,r.cancel=()=>{Vf.delete(i),t=null},r};var A1=typeof window<"u"?window.requestAnimationFrame:()=>{};Ot.use=n=>A1=n;Ot.now=typeof performance<"u"?()=>performance.now():Date.now;Ot.batchedUpdates=n=>n();Ot.catch=console.error;Ot.frameLoop="always";Ot.advance=()=>{Ot.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):L_()};var $s=-1,Xs=0,Om=!1;function mu(n,t){Om?(t.delete(n),n(0)):(t.add(n),N_())}function N_(){$s<0&&($s=0,Ot.frameLoop!=="demand"&&A1(O_))}function r9(){$s=-1}function O_(){~$s&&(A1(O_),Ot.batchedUpdates(L_))}function L_(){const n=$s;$s=Ot.now();const t=V_($s);if(t&&(k_(no.splice(0,t),i=>i.handler()),Xs-=t),!Xs){r9();return}Vf.flush(),E1.flush(n?Math.min(64,$s-n):16.667),b1.flush(),T1.flush(),S1.flush()}function gu(){let n=new Set,t=n;return{add(i){Xs+=t==n&&!n.has(i)?1:0,n.add(i)},delete(i){return Xs-=t==n&&n.has(i)?1:0,n.delete(i)},flush(i){t.size&&(n=new Set,Xs-=t.size,k_(t,r=>r(i)&&n.add(r)),Xs+=n.size,t=n)}}}function k_(n,t){n.forEach(i=>{try{t(i)}catch(r){Ot.catch(r)}})}var a9=Object.defineProperty,o9=(n,t)=>{for(var i in t)a9(n,i,{get:t[i],enumerable:!0})},di={};o9(di,{assign:()=>u9,colors:()=>Js,createStringInterpolator:()=>C1,skipAnimation:()=>U_,to:()=>P_,willAdvance:()=>R1});function Lm(){}var l9=(n,t,i)=>Object.defineProperty(n,t,{value:i,writable:!0,configurable:!0}),ft={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function ds(n,t){if(ft.arr(n)){if(!ft.arr(t)||n.length!==t.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return n===t}var Mt=(n,t)=>n.forEach(t);function Pi(n,t,i){if(ft.arr(n)){for(let r=0;r<n.length;r++)t.call(i,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&t.call(i,n[r],r)}var Tn=n=>ft.und(n)?[]:ft.arr(n)?n:[n];function ql(n,t){if(n.size){const i=Array.from(n);n.clear(),Mt(i,t)}}var Pl=(n,...t)=>ql(n,i=>i(...t)),w1=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),C1,P_,Js=null,U_=!1,R1=Lm,u9=n=>{n.to&&(P_=n.to),n.now&&(Ot.now=n.now),n.colors!==void 0&&(Js=n.colors),n.skipAnimation!=null&&(U_=n.skipAnimation),n.createStringInterpolator&&(C1=n.createStringInterpolator),n.requestAnimationFrame&&Ot.use(n.requestAnimationFrame),n.batchedUpdates&&(Ot.batchedUpdates=n.batchedUpdates),n.willAdvance&&(R1=n.willAdvance),n.frameLoop&&(Ot.frameLoop=n.frameLoop)},Hl=new Set,ii=[],gm=[],cf=0,Nf={get idle(){return!Hl.size&&!ii.length},start(n){cf>n.priority?(Hl.add(n),Ot.onStart(c9)):(j_(n),Ot(km))},advance:km,sort(n){if(cf)Ot.onFrame(()=>Nf.sort(n));else{const t=ii.indexOf(n);~t&&(ii.splice(t,1),B_(n))}},clear(){ii=[],Hl.clear()}};function c9(){Hl.forEach(j_),Hl.clear(),Ot(km)}function j_(n){ii.includes(n)||B_(n)}function B_(n){ii.splice(f9(ii,t=>t.priority>n.priority),0,n)}function km(n){const t=gm;for(let i=0;i<ii.length;i++){const r=ii[i];cf=r.priority,r.idle||(R1(r),r.advance(n),r.idle||t.push(r))}return cf=0,gm=ii,gm.length=0,ii=t,ii.length>0}function f9(n,t){const i=n.findIndex(t);return i<0?n.length:i}var h9={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},hi="[-+]?\\d*\\.?\\d+",ff=hi+"%";function Of(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var d9=new RegExp("rgb"+Of(hi,hi,hi)),m9=new RegExp("rgba"+Of(hi,hi,hi,hi)),g9=new RegExp("hsl"+Of(hi,ff,ff)),p9=new RegExp("hsla"+Of(hi,ff,ff,hi)),y9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_9=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,v9=/^#([0-9a-fA-F]{6})$/,E9=/^#([0-9a-fA-F]{8})$/;function T9(n){let t;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(t=v9.exec(n))?parseInt(t[1]+"ff",16)>>>0:Js&&Js[n]!==void 0?Js[n]:(t=d9.exec(n))?(Ka(t[1])<<24|Ka(t[2])<<16|Ka(t[3])<<8|255)>>>0:(t=m9.exec(n))?(Ka(t[1])<<24|Ka(t[2])<<16|Ka(t[3])<<8|zy(t[4]))>>>0:(t=y9.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=E9.exec(n))?parseInt(t[1],16)>>>0:(t=_9.exec(n))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=g9.exec(n))?(jy(By(t[1]),Gc(t[2]),Gc(t[3]))|255)>>>0:(t=p9.exec(n))?(jy(By(t[1]),Gc(t[2]),Gc(t[3]))|zy(t[4]))>>>0:null}function pm(n,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(t-n)*6*i:i<1/2?t:i<2/3?n+(t-n)*(2/3-i)*6:n}function jy(n,t,i){const r=i<.5?i*(1+t):i+t-i*t,o=2*i-r,u=pm(o,r,n+1/3),h=pm(o,r,n),m=pm(o,r,n-1/3);return Math.round(u*255)<<24|Math.round(h*255)<<16|Math.round(m*255)<<8}function Ka(n){const t=parseInt(n,10);return t<0?0:t>255?255:t}function By(n){return(parseFloat(n)%360+360)%360/360}function zy(n){const t=parseFloat(n);return t<0?0:t>1?255:Math.round(t*255)}function Gc(n){const t=parseFloat(n);return t<0?0:t>100?1:t/100}function qy(n){let t=T9(n);if(t===null)return n;t=t||0;const i=(t&4278190080)>>>24,r=(t&16711680)>>>16,o=(t&65280)>>>8,u=(t&255)/255;return`rgba(${i}, ${r}, ${o}, ${u})`}var Jl=(n,t,i)=>{if(ft.fun(n))return n;if(ft.arr(n))return Jl({range:n,output:t,extrapolate:i});if(ft.str(n.output[0]))return C1(n);const r=n,o=r.output,u=r.range||[0,1],h=r.extrapolateLeft||r.extrapolate||"extend",m=r.extrapolateRight||r.extrapolate||"extend",y=r.easing||(g=>g);return g=>{const v=S9(g,u);return b9(g,u[v],u[v+1],o[v],o[v+1],y,h,m,r.map)}};function b9(n,t,i,r,o,u,h,m,y){let g=y?y(n):n;if(g<t){if(h==="identity")return g;h==="clamp"&&(g=t)}if(g>i){if(m==="identity")return g;m==="clamp"&&(g=i)}return r===o?r:t===i?n<=t?r:o:(t===-1/0?g=-g:i===1/0?g=g-t:g=(g-t)/(i-t),g=u(g),r===-1/0?g=-g:o===1/0?g=g+r:g=g*(o-r)+r,g)}function S9(n,t){for(var i=1;i<t.length-1&&!(t[i]>=n);++i);return i-1}var A9={linear:n=>n},Wl=Symbol.for("FluidValue.get"),ao=Symbol.for("FluidValue.observers"),ei=n=>!!(n&&n[Wl]),Cn=n=>n&&n[Wl]?n[Wl]():n,Hy=n=>n[ao]||null;function w9(n,t){n.eventObserved?n.eventObserved(t):n(t)}function tu(n,t){const i=n[ao];i&&i.forEach(r=>{w9(r,t)})}var z_=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");C9(this,n)}},C9=(n,t)=>q_(n,Wl,t);function yo(n,t){if(n[Wl]){let i=n[ao];i||q_(n,ao,i=new Set),i.has(t)||(i.add(t),n.observerAdded&&n.observerAdded(i.size,t))}return t}function eu(n,t){const i=n[ao];if(i&&i.has(t)){const r=i.size-1;r?i.delete(t):n[ao]=null,n.observerRemoved&&n.observerRemoved(r,t)}}var q_=(n,t,i)=>Object.defineProperty(n,t,{value:i,writable:!0,configurable:!0}),tf=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,R9=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Gy=new RegExp(`(${tf.source})(%|[a-z]+)`,"i"),I9=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Lf=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,H_=n=>{const[t,i]=x9(n);if(!t||w1())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(i&&i.startsWith("--")){const o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||n}else{if(i&&Lf.test(i))return H_(i);if(i)return i}return n},x9=n=>{const t=Lf.exec(n);if(!t)return[,];const[,i,r]=t;return[i,r]},ym,D9=(n,t,i,r,o)=>`rgba(${Math.round(t)}, ${Math.round(i)}, ${Math.round(r)}, ${o})`,G_=n=>{ym||(ym=Js?new RegExp(`(${Object.keys(Js).join("|")})(?!\\w)`,"g"):/^\b$/);const t=n.output.map(u=>Cn(u).replace(Lf,H_).replace(R9,qy).replace(ym,qy)),i=t.map(u=>u.match(tf).map(Number)),o=i[0].map((u,h)=>i.map(m=>{if(!(h in m))throw Error('The arity of each "output" value must be equal');return m[h]})).map(u=>Jl({...n,output:u}));return u=>{var y;const h=!Gy.test(t[0])&&((y=t.find(g=>Gy.test(g)))==null?void 0:y.replace(tf,""));let m=0;return t[0].replace(tf,()=>`${o[m++](u)}${h||""}`).replace(I9,D9)}},I1="react-spring: ",F_=n=>{const t=n;let i=!1;if(typeof t!="function")throw new TypeError(`${I1}once requires a function parameter`);return(...r)=>{i||(t(...r),i=!0)}},M9=F_(console.warn);function V9(){M9(`${I1}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var N9=F_(console.warn);function O9(){N9(`${I1}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function kf(n){return ft.str(n)&&(n[0]=="#"||/\d/.test(n)||!w1()&&Lf.test(n)||n in(Js||{}))}var $r=w1()?X.useEffect:X.useLayoutEffect,L9=()=>{const n=X.useRef(!1);return $r(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function x1(){const n=X.useState()[1],t=L9();return()=>{t.current&&n(Math.random())}}var D1=n=>X.useEffect(n,k9),k9=[];function Pm(n){const t=X.useRef(void 0);return X.useEffect(()=>{t.current=n}),t.current}var nu=Symbol.for("Animated:node"),P9=n=>!!n&&n[nu]===n,Vi=n=>n&&n[nu],M1=(n,t)=>l9(n,nu,t),Pf=n=>n&&n[nu]&&n[nu].getPayload(),Q_=class{constructor(){M1(this,this)}getPayload(){return this.payload||[]}},Uf=class Y_ extends Q_{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ft.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Y_(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,i){return ft.num(t)&&(this.lastPosition=t,i&&(t=Math.round(t/i)*i,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ft.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},hf=class K_ extends Uf{constructor(t){super(0),this._string=null,this._toString=Jl({output:[t,t]})}static create(t){return new K_(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ft.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Jl({output:[this.getValue(),t]})),this._value=0,super.reset()}},df={dependencies:null},jf=class extends Q_{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const t={};return Pi(this.source,(i,r)=>{P9(i)?t[r]=i.getValue(n):ei(i)?t[r]=Cn(i):n||(t[r]=i)}),t}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&Mt(this.payload,n=>n.reset())}_makePayload(n){if(n){const t=new Set;return Pi(n,this._addToPayload,t),Array.from(t)}}_addToPayload(n){df.dependencies&&ei(n)&&df.dependencies.add(n);const t=Pf(n);t&&Mt(t,i=>this.add(i))}},U9=class $_ extends jf{constructor(t){super(t)}static create(t){return new $_(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const i=this.getPayload();return t.length==i.length?i.map((r,o)=>r.setValue(t[o])).some(Boolean):(super.setValue(t.map(j9)),!0)}};function j9(n){return(kf(n)?hf:Uf).create(n)}function Um(n){const t=Vi(n);return t?t.constructor:ft.arr(n)?U9:kf(n)?hf:Uf}var Fy=(n,t)=>{const i=!ft.fun(n)||n.prototype&&n.prototype.isReactComponent;return X.forwardRef((r,o)=>{const u=X.useRef(null),h=i&&X.useCallback(V=>{u.current=q9(o,V)},[o]),[m,y]=z9(r,t),g=x1(),v=()=>{const V=u.current;if(i&&!V)return;(V?t.applyAnimatedValues(V,m.getValue(!0)):!1)===!1&&g()},b=new B9(v,y),T=X.useRef(void 0);$r(()=>(T.current=b,Mt(y,V=>yo(V,b)),()=>{T.current&&(Mt(T.current.deps,V=>eu(V,T.current)),Ot.cancel(T.current.update))})),X.useEffect(v,[]),D1(()=>()=>{const V=T.current;Mt(V.deps,j=>eu(j,V))});const R=t.getComponentProps(m.getValue());return X.createElement(n,{...R,ref:h})})},B9=class{constructor(n,t){this.update=n,this.deps=t}eventObserved(n){n.type=="change"&&Ot.write(this.update)}};function z9(n,t){const i=new Set;return df.dependencies=i,n.style&&(n={...n,style:t.createAnimatedStyle(n.style)}),n=new jf(n),df.dependencies=null,[n,i]}function q9(n,t){return n&&(ft.fun(n)?n(t):n.current=t),t}var Qy=Symbol.for("AnimatedComponent"),H9=(n,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:i=o=>new jf(o),getComponentProps:r=o=>o}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:i,getComponentProps:r},u=h=>{const m=Yy(h)||"Anonymous";return ft.str(h)?h=u[h]||(u[h]=Fy(h,o)):h=h[Qy]||(h[Qy]=Fy(h,o)),h.displayName=`Animated(${m})`,h};return Pi(n,(h,m)=>{ft.arr(n)&&(m=Yy(h)),u[m]=u(h)}),{animated:u}},Yy=n=>ft.str(n)?n:n&&ft.str(n.displayName)?n.displayName:ft.fun(n)&&n.name||null;function Rn(n,...t){return ft.fun(n)?n(...t):n}var Gl=(n,t)=>n===!0||!!(t&&n&&(ft.fun(n)?n(t):Tn(n).includes(t))),X_=(n,t)=>ft.obj(n)?t&&n[t]:n,Z_=(n,t)=>n.default===!0?n[t]:n.default?n.default[t]:void 0,G9=n=>n,Bf=(n,t=G9)=>{let i=F9;n.default&&n.default!==!0&&(n=n.default,i=Object.keys(n));const r={};for(const o of i){const u=t(n[o],o);ft.und(u)||(r[o]=u)}return r},F9=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Q9={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Y9(n){const t={};let i=0;if(Pi(n,(r,o)=>{Q9[o]||(t[o]=r,i++)}),i)return t}function V1(n){const t=Y9(n);if(t){const i={to:t};return Pi(n,(r,o)=>o in t||(i[o]=r)),i}return{...n}}function iu(n){return n=Cn(n),ft.arr(n)?n.map(iu):kf(n)?di.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function J_(n){for(const t in n)return!0;return!1}function jm(n){return ft.fun(n)||ft.arr(n)&&ft.obj(n[0])}function Bm(n,t){var i;(i=n.ref)==null||i.delete(n),t==null||t.delete(n)}function W_(n,t){var i;t&&n.ref!==t&&((i=n.ref)==null||i.delete(n),t.add(n),n.ref=t)}var zm={default:{tension:170,friction:26},stiff:{tension:210,friction:20}},qm={...zm.default,mass:1,damping:1,easing:A9.linear,clamp:!1},K9=class{constructor(){this.velocity=0,Object.assign(this,qm)}};function $9(n,t,i){i&&(i={...i},Ky(i,t),t={...i,...t}),Ky(n,t),Object.assign(n,t);for(const h in qm)n[h]==null&&(n[h]=qm[h]);let{frequency:r,damping:o}=n;const{mass:u}=n;return ft.und(r)||(r<.01&&(r=.01),o<0&&(o=0),n.tension=Math.pow(2*Math.PI/r,2)*u,n.friction=4*Math.PI*o*u/r),n}function Ky(n,t){if(!ft.und(t.decay))n.duration=void 0;else{const i=!ft.und(t.tension)||!ft.und(t.friction);(i||!ft.und(t.frequency)||!ft.und(t.damping)||!ft.und(t.mass))&&(n.duration=void 0,n.decay=void 0),i&&(n.frequency=void 0)}}var $y=[],X9=class{constructor(){this.changed=!1,this.values=$y,this.toValues=null,this.fromValues=$y,this.config=new K9,this.immediate=!1}};function tv(n,{key:t,props:i,defaultProps:r,state:o,actions:u}){return new Promise((h,m)=>{let y,g,v=Gl(i.cancel??(r==null?void 0:r.cancel),t);if(v)R();else{ft.und(i.pause)||(o.paused=Gl(i.pause,t));let V=r==null?void 0:r.pause;V!==!0&&(V=o.paused||Gl(V,t)),y=Rn(i.delay||0,t),V?(o.resumeQueue.add(T),u.pause()):(u.resume(),T())}function b(){o.resumeQueue.add(T),o.timeouts.delete(g),g.cancel(),y=g.time-Ot.now()}function T(){y>0&&!di.skipAnimation?(o.delayed=!0,g=Ot.setTimeout(R,y),o.pauseQueue.add(b),o.timeouts.add(g)):R()}function R(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(b),o.timeouts.delete(g),n<=(o.cancelId||0)&&(v=!0);try{u.start({...i,callId:n,cancel:v},h)}catch(V){m(V)}}})}var N1=(n,t)=>t.length==1?t[0]:t.some(i=>i.cancelled)?io(n.get()):t.every(i=>i.noop)?ev(n.get()):fi(n.get(),t.every(i=>i.finished)),ev=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),fi=(n,t,i=!1)=>({value:n,finished:t,cancelled:i}),io=n=>({value:n,cancelled:!0,finished:!1});function nv(n,t,i,r){const{callId:o,parentId:u,onRest:h}=t,{asyncTo:m,promise:y}=i;return!u&&n===m&&!t.reset?y:i.promise=(async()=>{i.asyncId=o,i.asyncTo=n;const g=Bf(t,(k,z)=>z==="onRest"?void 0:k);let v,b;const T=new Promise((k,z)=>(v=k,b=z)),R=k=>{const z=o<=(i.cancelId||0)&&io(r)||o!==i.asyncId&&fi(r,!1);if(z)throw k.result=z,b(k),k},V=(k,z)=>{const W=new Xy,Q=new Zy;return(async()=>{if(di.skipAnimation)throw su(i),Q.result=fi(r,!1),b(Q),Q;R(W);const et=ft.obj(k)?{...k}:{...z,to:k};et.parentId=o,Pi(g,(Y,x)=>{ft.und(et[x])&&(et[x]=Y)});const tt=await r.start(et);return R(W),i.paused&&await new Promise(Y=>{i.resumeQueue.add(Y)}),tt})()};let j;if(di.skipAnimation)return su(i),fi(r,!1);try{let k;ft.arr(n)?k=(async z=>{for(const W of z)await V(W)})(n):k=Promise.resolve(n(V,r.stop.bind(r))),await Promise.all([k.then(v),T]),j=fi(r.get(),!0,!1)}catch(k){if(k instanceof Xy)j=k.result;else if(k instanceof Zy)j=k.result;else throw k}finally{o==i.asyncId&&(i.asyncId=u,i.asyncTo=u?m:void 0,i.promise=u?y:void 0)}return ft.fun(h)&&Ot.batchedUpdates(()=>{h(j,r,r.item)}),j})()}function su(n,t){ql(n.timeouts,i=>i.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,t&&(n.cancelId=t)}var Xy=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Zy=class extends Error{constructor(){super("SkipAnimationSignal")}},Hm=n=>n instanceof O1,Z9=1,O1=class extends z_{constructor(){super(...arguments),this.id=Z9++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Vi(this);return n&&n.getValue()}to(...n){return di.to(this,n)}interpolate(...n){return V9(),di.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,t=!1){tu(this,{type:"change",parent:this,value:n,idle:t})}_onPriorityChange(n){this.idle||Nf.sort(this),tu(this,{type:"priority",parent:this,priority:n})}},Zr=Symbol.for("SpringPhase"),iv=1,Gm=2,Fm=4,_m=n=>(n[Zr]&iv)>0,Ys=n=>(n[Zr]&Gm)>0,Vl=n=>(n[Zr]&Fm)>0,Jy=(n,t)=>t?n[Zr]|=Gm|iv:n[Zr]&=~Gm,Wy=(n,t)=>t?n[Zr]|=Fm:n[Zr]&=~Fm,J9=class extends O1{constructor(n,t){if(super(),this.animation=new X9,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ft.und(n)||!ft.und(t)){const i=ft.obj(n)?{...n}:{...t,from:n};ft.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(Ys(this)||this._state.asyncTo)||Vl(this)}get goal(){return Cn(this.animation.to)}get velocity(){const n=Vi(this);return n instanceof Uf?n.lastVelocity||0:n.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return _m(this)}get isAnimating(){return Ys(this)}get isPaused(){return Vl(this)}get isDelayed(){return this._state.delayed}advance(n){let t=!0,i=!1;const r=this.animation;let{toValues:o}=r;const{config:u}=r,h=Pf(r.to);!h&&ei(r.to)&&(o=Tn(Cn(r.to))),r.values.forEach((g,v)=>{if(g.done)return;const b=g.constructor==hf?1:h?h[v].lastPosition:o[v];let T=r.immediate,R=b;if(!T){if(R=g.lastPosition,u.tension<=0){g.done=!0;return}let V=g.elapsedTime+=n;const j=r.fromValues[v],k=g.v0!=null?g.v0:g.v0=ft.arr(u.velocity)?u.velocity[v]:u.velocity;let z;const W=u.precision||(j==b?.005:Math.min(1,Math.abs(b-j)*.001));if(ft.und(u.duration))if(u.decay){const Q=u.decay===!0?.998:u.decay,et=Math.exp(-(1-Q)*V);R=j+k/(1-Q)*(1-et),T=Math.abs(g.lastPosition-R)<=W,z=k*et}else{z=g.lastVelocity==null?k:g.lastVelocity;const Q=u.restVelocity||W/10,et=u.clamp?0:u.bounce,tt=!ft.und(et),Y=j==b?g.v0>0:j<b;let x,w=!1;const C=1,O=Math.ceil(n/C);for(let L=0;L<O&&(x=Math.abs(z)>Q,!(!x&&(T=Math.abs(b-R)<=W,T)));++L){tt&&(w=R==b||R>b==Y,w&&(z=-z*et,R=b));const P=-u.tension*1e-6*(R-b),D=-u.friction*.001*z,dt=(P+D)/u.mass;z=z+dt*C,R=R+z*C}}else{let Q=1;u.duration>0&&(this._memoizedDuration!==u.duration&&(this._memoizedDuration=u.duration,g.durationProgress>0&&(g.elapsedTime=u.duration*g.durationProgress,V=g.elapsedTime+=n)),Q=(u.progress||0)+V/this._memoizedDuration,Q=Q>1?1:Q<0?0:Q,g.durationProgress=Q),R=j+u.easing(Q)*(b-j),z=(R-g.lastPosition)/n,T=Q==1}g.lastVelocity=z,Number.isNaN(R)&&(console.warn("Got NaN while animating:",this),T=!0)}h&&!h[v].done&&(T=!1),T?g.done=!0:t=!1,g.setValue(R,u.round)&&(i=!0)});const m=Vi(this),y=m.getValue();if(t){const g=Cn(r.to);(y!==g||i)&&!u.decay?(m.setValue(g),this._onChange(g)):i&&u.decay&&this._onChange(y),this._stop()}else i&&this._onChange(y)}set(n){return Ot.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ys(this)){const{to:n,config:t}=this.animation;Ot.batchedUpdates(()=>{this._onStart(),t.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,t){let i;return ft.und(n)?(i=this.queue||[],this.queue=[]):i=[ft.obj(n)?n:{...t,to:n}],Promise.all(i.map(r=>this._update(r))).then(r=>N1(this,r))}stop(n){const{to:t}=this.animation;return this._focus(this.get()),su(this._state,n&&this._lastCallId),Ot.batchedUpdates(()=>this._stop(t,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const t=this.key||"";let{to:i,from:r}=n;i=ft.obj(i)?i[t]:i,(i==null||jm(i))&&(i=void 0),r=ft.obj(r)?r[t]:r,r==null&&(r=void 0);const o={to:i,from:r};return _m(this)||(n.reverse&&([i,r]=[r,i]),r=Cn(r),ft.und(r)?Vi(this)||this._set(i):this._set(r)),o}_update({...n},t){const{key:i,defaultProps:r}=this;n.default&&Object.assign(r,Bf(n,(h,m)=>/^on/.test(m)?X_(h,i):h)),e2(this,n,"onProps"),Ol(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const u=this._state;return tv(++this._lastCallId,{key:i,props:n,defaultProps:r,state:u,actions:{pause:()=>{Vl(this)||(Wy(this,!0),Pl(u.pauseQueue),Ol(this,"onPause",fi(this,Nl(this,this.animation.to)),this))},resume:()=>{Vl(this)&&(Wy(this,!1),Ys(this)&&this._resume(),Pl(u.resumeQueue),Ol(this,"onResume",fi(this,Nl(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then(h=>{if(n.loop&&h.finished&&!(t&&h.noop)){const m=sv(n);if(m)return this._update(m,!0)}return h})}_merge(n,t,i){if(t.cancel)return this.stop(!0),i(io(this));const r=!ft.und(n.to),o=!ft.und(n.from);if(r||o)if(t.callId>this._lastToId)this._lastToId=t.callId;else return i(io(this));const{key:u,defaultProps:h,animation:m}=this,{to:y,from:g}=m;let{to:v=y,from:b=g}=n;o&&!r&&(!t.default||ft.und(v))&&(v=b),t.reverse&&([v,b]=[b,v]);const T=!ds(b,g);T&&(m.from=b),b=Cn(b);const R=!ds(v,y);R&&this._focus(v);const V=jm(t.to),{config:j}=m,{decay:k,velocity:z}=j;(r||o)&&(j.velocity=0),t.config&&!V&&$9(j,Rn(t.config,u),t.config!==h.config?Rn(h.config,u):void 0);let W=Vi(this);if(!W||ft.und(v))return i(fi(this,!0));const Q=ft.und(t.reset)?o&&!t.default:!ft.und(b)&&Gl(t.reset,u),et=Q?b:this.get(),tt=iu(v),Y=ft.num(tt)||ft.arr(tt)||kf(tt),x=!V&&(!Y||Gl(h.immediate||t.immediate,u));if(R){const L=Um(v);if(L!==W.constructor)if(x)W=this._set(tt);else throw Error(`Cannot animate between ${W.constructor.name} and ${L.name}, as the "to" prop suggests`)}const w=W.constructor;let C=ei(v),O=!1;if(!C){const L=Q||!_m(this)&&T;(R||L)&&(O=ds(iu(et),tt),C=!O),(!ds(m.immediate,x)&&!x||!ds(j.decay,k)||!ds(j.velocity,z))&&(C=!0)}if(O&&Ys(this)&&(m.changed&&!Q?C=!0:C||this._stop(y)),!V&&((C||ei(y))&&(m.values=W.getPayload(),m.toValues=ei(v)?null:w==hf?[1]:Tn(tt)),m.immediate!=x&&(m.immediate=x,!x&&!Q&&this._set(y)),C)){const{onRest:L}=m;Mt(t5,D=>e2(this,t,D));const P=fi(this,Nl(this,y));Pl(this._pendingCalls,P),this._pendingCalls.add(i),m.changed&&Ot.batchedUpdates(()=>{var D;m.changed=!Q,L==null||L(P,this),Q?Rn(h.onRest,P):(D=m.onStart)==null||D.call(m,P,this)})}Q&&this._set(et),V?i(nv(t.to,t,this._state,this)):C?this._start():Ys(this)&&!R?this._pendingCalls.add(i):i(ev(et))}_focus(n){const t=this.animation;n!==t.to&&(Hy(this)&&this._detach(),t.to=n,Hy(this)&&this._attach())}_attach(){let n=0;const{to:t}=this.animation;ei(t)&&(yo(t,this),Hm(t)&&(n=t.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;ei(n)&&eu(n,this)}_set(n,t=!0){const i=Cn(n);if(!ft.und(i)){const r=Vi(this);if(!r||!ds(i,r.getValue())){const o=Um(i);!r||r.constructor!=o?M1(this,o.create(i)):r.setValue(i),r&&Ot.batchedUpdates(()=>{this._onChange(i,t)})}}return Vi(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,Ol(this,"onStart",fi(this,Nl(this,n.to)),this))}_onChange(n,t){t||(this._onStart(),Rn(this.animation.onChange,n,this)),Rn(this.defaultProps.onChange,n,this),super._onChange(n,t)}_start(){const n=this.animation;Vi(this).reset(Cn(n.to)),n.immediate||(n.fromValues=n.values.map(t=>t.lastPosition)),Ys(this)||(Jy(this,!0),Vl(this)||this._resume())}_resume(){di.skipAnimation?this.finish():Nf.start(this)}_stop(n,t){if(Ys(this)){Jy(this,!1);const i=this.animation;Mt(i.values,o=>{o.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),tu(this,{type:"idle",parent:this});const r=t?io(this.get()):fi(this.get(),Nl(this,n??i.to));Pl(this._pendingCalls,r),i.changed&&(i.changed=!1,Ol(this,"onRest",r,this))}}};function Nl(n,t){const i=iu(t),r=iu(n.get());return ds(r,i)}function sv(n,t=n.loop,i=n.to){const r=Rn(t);if(r){const o=r!==!0&&V1(r),u=(o||n).reverse,h=!o||o.reset;return ru({...n,loop:t,default:!1,pause:void 0,to:!u||jm(i)?i:void 0,from:h?n.from:void 0,reset:h,...o})}}function ru(n){const{to:t,from:i}=n=V1(n),r=new Set;return ft.obj(t)&&t2(t,r),ft.obj(i)&&t2(i,r),n.keys=r.size?Array.from(r):null,n}function W9(n){const t=ru(n);return ft.und(t.default)&&(t.default=Bf(t)),t}function t2(n,t){Pi(n,(i,r)=>i!=null&&t.add(r))}var t5=["onStart","onRest","onChange","onPause","onResume"];function e2(n,t,i){n.animation[i]=t[i]!==Z_(t,i)?X_(t[i],n.key):void 0}function Ol(n,t,...i){var r,o,u,h;(o=(r=n.animation)[t])==null||o.call(r,...i),(h=(u=n.defaultProps)[t])==null||h.call(u,...i)}var e5=["onStart","onChange","onRest"],n5=1,rv=class{constructor(t,i){this.id=n5++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),i&&(this._flush=i),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((i,r)=>t[r]=i.get()),t}set(t){for(const i in t){const r=t[i];ft.und(r)||this.springs[i].set(r)}}update(t){return t&&this.queue.push(ru(t)),this}start(t){let{queue:i}=this;return t?i=Tn(t).map(ru):this.queue=[],this._flush?this._flush(this,i):(cv(this,i),Qm(this,i))}stop(t,i){if(t!==!!t&&(i=t),i){const r=this.springs;Mt(Tn(i),o=>r[o].stop(!!t))}else su(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(ft.und(t))this.start({pause:!0});else{const i=this.springs;Mt(Tn(t),r=>i[r].pause())}return this}resume(t){if(ft.und(t))this.start({pause:!1});else{const i=this.springs;Mt(Tn(t),r=>i[r].resume())}return this}each(t){Pi(this.springs,t)}_onFrame(){const{onStart:t,onChange:i,onRest:r}=this._events,o=this._active.size>0,u=this._changed.size>0;(o&&!this._started||u&&!this._started)&&(this._started=!0,ql(t,([y,g])=>{g.value=this.get(),y(g,this,this._item)}));const h=!o&&this._started,m=u||h&&r.size?this.get():null;u&&i.size&&ql(i,([y,g])=>{g.value=m,y(g,this,this._item)}),h&&(this._started=!1,ql(r,([y,g])=>{g.value=m,y(g,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Ot.onFrame(this._onFrame)}};function Qm(n,t){return Promise.all(t.map(i=>av(n,i))).then(i=>N1(n,i))}async function av(n,t,i){const{keys:r,to:o,from:u,loop:h,onRest:m,onResolve:y}=t,g=ft.obj(t.default)&&t.default;h&&(t.loop=!1),o===!1&&(t.to=null),u===!1&&(t.from=null);const v=ft.arr(o)||ft.fun(o)?o:void 0;v?(t.to=void 0,t.onRest=void 0,g&&(g.onRest=void 0)):Mt(e5,j=>{const k=t[j];if(ft.fun(k)){const z=n._events[j];t[j]=({finished:W,cancelled:Q})=>{const et=z.get(k);et?(W||(et.finished=!1),Q&&(et.cancelled=!0)):z.set(k,{value:null,finished:W||!1,cancelled:Q||!1})},g&&(g[j]=t[j])}});const b=n._state;t.pause===!b.paused?(b.paused=t.pause,Pl(t.pause?b.pauseQueue:b.resumeQueue)):b.paused&&(t.pause=!0);const T=(r||Object.keys(n.springs)).map(j=>n.springs[j].start(t)),R=t.cancel===!0||Z_(t,"cancel")===!0;(v||R&&b.asyncId)&&T.push(tv(++n._lastAsyncId,{props:t,state:b,actions:{pause:Lm,resume:Lm,start(j,k){R?(su(b,n._lastAsyncId),k(io(n))):(j.onRest=m,k(nv(v,j,b,n)))}}})),b.paused&&await new Promise(j=>{b.resumeQueue.add(j)});const V=N1(n,await Promise.all(T));if(h&&V.finished&&!(i&&V.noop)){const j=sv(t,h,o);if(j)return cv(n,[j]),av(n,j,!0)}return y&&Ot.batchedUpdates(()=>y(V,n,n.item)),V}function Ym(n,t){const i={...n.springs};return t&&Mt(Tn(t),r=>{ft.und(r.keys)&&(r=ru(r)),ft.obj(r.to)||(r={...r,to:void 0}),uv(i,r,o=>lv(o))}),ov(n,i),i}function ov(n,t){Pi(t,(i,r)=>{n.springs[r]||(n.springs[r]=i,yo(i,n))})}function lv(n,t){const i=new J9;return i.key=n,t&&yo(i,t),i}function uv(n,t,i){t.keys&&Mt(t.keys,r=>{(n[r]||(n[r]=i(r)))._prepareNode(t)})}function cv(n,t){Mt(t,i=>{uv(n.springs,i,r=>lv(r,n))})}var fv=X.createContext({pause:!1,immediate:!1}),hv=()=>{const n=[],t=function(r){O9();const o=[];return Mt(n,(u,h)=>{if(ft.und(r))o.push(u.start());else{const m=i(r,u,h);m&&o.push(u.start(m))}}),o};t.current=n,t.add=function(r){n.includes(r)||n.push(r)},t.delete=function(r){const o=n.indexOf(r);~o&&n.splice(o,1)},t.pause=function(){return Mt(n,r=>r.pause(...arguments)),this},t.resume=function(){return Mt(n,r=>r.resume(...arguments)),this},t.set=function(r){Mt(n,(o,u)=>{const h=ft.fun(r)?r(u,o):r;h&&o.set(h)})},t.start=function(r){const o=[];return Mt(n,(u,h)=>{if(ft.und(r))o.push(u.start());else{const m=this._getProps(r,u,h);m&&o.push(u.start(m))}}),o},t.stop=function(){return Mt(n,r=>r.stop(...arguments)),this},t.update=function(r){return Mt(n,(o,u)=>o.update(this._getProps(r,o,u))),this};const i=function(r,o,u){return ft.fun(r)?r(u,o):r};return t._getProps=i,t};function i5(n,t,i){const r=ft.fun(t)&&t;r&&!i&&(i=[]);const o=X.useMemo(()=>r||arguments.length==3?hv():void 0,[]),u=X.useRef(0),h=x1(),m=X.useMemo(()=>({ctrls:[],queue:[],flush(z,W){const Q=Ym(z,W);return u.current>0&&!m.queue.length&&!Object.keys(Q).some(tt=>!z.springs[tt])?Qm(z,W):new Promise(tt=>{ov(z,Q),m.queue.push(()=>{tt(Qm(z,W))}),h()})}}),[]),y=X.useRef([...m.ctrls]),g=X.useRef([]),v=Pm(n)||0;X.useMemo(()=>{Mt(y.current.slice(n,v),z=>{Bm(z,o),z.stop(!0)}),y.current.length=n,b(v,n)},[n]),X.useMemo(()=>{b(0,Math.min(v,n))},i);function b(z,W){for(let Q=z;Q<W;Q++){const et=y.current[Q]||(y.current[Q]=new rv(null,m.flush)),tt=r?r(Q,et):t[Q];tt&&(g.current[Q]=W9(tt))}}const T=y.current.map((z,W)=>Ym(z,g.current[W])),R=X.useContext(fv),V=Pm(R),j=R!==V&&J_(R);$r(()=>{u.current++,m.ctrls=y.current;const{queue:z}=m;z.length&&(m.queue=[],Mt(z,W=>W())),Mt(y.current,(W,Q)=>{o==null||o.add(W),j&&W.start({default:R});const et=g.current[Q];et&&(W_(W,et.ref),W.ref?W.queue.push(et):W.start(et))})}),D1(()=>()=>{Mt(m.ctrls,z=>z.stop(!0))});const k=T.map(z=>({...z}));return o?[k,o]:k}function _o(n,t){const i=ft.fun(n),[[r],o]=i5(1,i?n:[n],i?[]:t);return i||arguments.length==2?[r,o]:r}function s5(n,t,i){const r=ft.fun(t)&&t,{reset:o,sort:u,trail:h=0,expires:m=!0,exitBeforeEnter:y=!1,onDestroyed:g,ref:v,config:b}=r?r():t,T=X.useMemo(()=>r||arguments.length==3?hv():void 0,[]),R=Tn(n),V=[],j=X.useRef(null),k=o?null:j.current;$r(()=>{j.current=V}),D1(()=>(Mt(V,dt=>{T==null||T.add(dt.ctrl),dt.ctrl.ref=T}),()=>{Mt(j.current,dt=>{dt.expired&&clearTimeout(dt.expirationId),Bm(dt.ctrl,T),dt.ctrl.stop(!0)})}));const z=a5(R,r?r():t,k),W=o&&j.current||[];$r(()=>Mt(W,({ctrl:dt,item:mt,key:G})=>{Bm(dt,T),Rn(g,mt,G)}));const Q=[];if(k&&Mt(k,(dt,mt)=>{dt.expired?(clearTimeout(dt.expirationId),W.push(dt)):(mt=Q[mt]=z.indexOf(dt.key),~mt&&(V[mt]=dt))}),Mt(R,(dt,mt)=>{V[mt]||(V[mt]={key:z[mt],item:dt,phase:"mount",ctrl:new rv},V[mt].ctrl.item=dt)}),Q.length){let dt=-1;const{leave:mt}=r?r():t;Mt(Q,(G,st)=>{const ut=k[st];~G?(dt=V.indexOf(ut),V[dt]={...ut,item:R[G]}):mt&&V.splice(++dt,0,ut)})}ft.fun(u)&&V.sort((dt,mt)=>u(dt.item,mt.item));let et=-h;const tt=x1(),Y=Bf(t),x=new Map,w=X.useRef(new Map),C=X.useRef(!1);Mt(V,(dt,mt)=>{const G=dt.key,st=dt.phase,ut=r?r():t;let _t,M;const J=Rn(ut.delay||0,G);if(st=="mount")_t=ut.enter,M="enter";else{const Tt=z.indexOf(G)<0;if(st!="leave")if(Tt)_t=ut.leave,M="leave";else if(_t=ut.update)M="update";else return;else if(!Tt)_t=ut.enter,M="enter";else return}if(_t=Rn(_t,dt.item,mt),_t=ft.obj(_t)?V1(_t):{to:_t},!_t.config){const Tt=b||Y.config;_t.config=Rn(Tt,dt.item,mt,M)}et+=h;const ct={...Y,delay:J+et,ref:v,immediate:ut.immediate,reset:!1,..._t};if(M=="enter"&&ft.und(ct.from)){const Tt=r?r():t,Et=ft.und(Tt.initial)||k?Tt.from:Tt.initial;ct.from=Rn(Et,dt.item,mt)}const{onResolve:ot}=ct;ct.onResolve=Tt=>{Rn(ot,Tt);const Et=j.current,Lt=Et.find(ht=>ht.key===G);if(Lt&&!(Tt.cancelled&&Lt.phase!="update")&&Lt.ctrl.idle){const ht=Et.every(At=>At.ctrl.idle);if(Lt.phase=="leave"){const At=Rn(m,Lt.item);if(At!==!1){const Dt=At===!0?0:At;if(Lt.expired=!0,!ht&&Dt>0){Dt<=2147483647&&(Lt.expirationId=setTimeout(tt,Dt));return}}}ht&&Et.some(At=>At.expired)&&(w.current.delete(Lt),y&&(C.current=!0),tt())}};const pt=Ym(dt.ctrl,ct);M==="leave"&&y?w.current.set(dt,{phase:M,springs:pt,payload:ct}):x.set(dt,{phase:M,springs:pt,payload:ct})});const O=X.useContext(fv),L=Pm(O),P=O!==L&&J_(O);$r(()=>{P&&Mt(V,dt=>{dt.ctrl.start({default:O})})},[O]),Mt(x,(dt,mt)=>{if(w.current.size){const G=V.findIndex(st=>st.key===mt.key);V.splice(G,1)}}),$r(()=>{Mt(w.current.size?w.current:x,({phase:dt,payload:mt},G)=>{const{ctrl:st}=G;G.phase=dt,T==null||T.add(st),P&&dt=="enter"&&st.start({default:O}),mt&&(W_(st,mt.ref),(st.ref||T)&&!C.current?st.update(mt):(st.start(mt),C.current&&(C.current=!1)))})},o?void 0:i);const D=dt=>X.createElement(X.Fragment,null,V.map((mt,G)=>{const{springs:st}=x.get(mt)||mt.ctrl,ut=dt({...st},mt.item,mt,G),_t=ft.str(mt.key)||ft.num(mt.key)?mt.key:mt.ctrl.id,M=X.version<"19.0.0",J=(ut==null?void 0:ut.props)??{};return M&&(J.ref=ut.ref),ut&&ut.type?X.createElement(ut.type,{key:_t,...J}):ut}));return T?[D,T]:D}var r5=1;function a5(n,{key:t,keys:i=t},r){if(i===null){const o=new Set;return n.map(u=>{const h=r&&r.find(m=>m.item===u&&m.phase!=="leave"&&!o.has(m));return h?(o.add(h),h.key):r5++})}return ft.und(i)?n:ft.fun(i)?n.map(i):Tn(i)}var o5=class extends O1{constructor(n,t){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=Jl(...t);const i=this._get(),r=Um(i);M1(this,r.create(i))}advance(n){const t=this._get(),i=this.get();ds(t,i)||(Vi(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&n2(this._active)&&vm(this)}_get(){const n=ft.arr(this.source)?this.source.map(Cn):Tn(Cn(this.source));return this.calc(...n)}_start(){this.idle&&!n2(this._active)&&(this.idle=!1,Mt(Pf(this),n=>{n.done=!1}),di.skipAnimation?(Ot.batchedUpdates(()=>this.advance()),vm(this)):Nf.start(this))}_attach(){let n=1;Mt(Tn(this.source),t=>{ei(t)&&yo(t,this),Hm(t)&&(t.idle||this._active.add(t),n=Math.max(n,t.priority+1))}),this.priority=n,this._start()}_detach(){Mt(Tn(this.source),n=>{ei(n)&&eu(n,this)}),this._active.clear(),vm(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Tn(this.source).reduce((t,i)=>Math.max(t,(Hm(i)?i.priority:0)+1),0))}};function l5(n){return n.idle!==!1}function n2(n){return!n.size||Array.from(n).every(l5)}function vm(n){n.idle||(n.idle=!0,Mt(Pf(n),t=>{t.done=!0}),tu(n,{type:"idle",parent:n}))}di.assign({createStringInterpolator:G_,to:(n,t)=>new o5(n,t)});var u5=M_(),dv=/^--/;function c5(n,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!dv.test(n)&&!(Fl.hasOwnProperty(n)&&Fl[n])?t+"px":(""+t).trim()}var i2={};function f5(n,t){if(!n.nodeType||!n.setAttribute)return!1;const i=n.nodeName==="filter"||n.parentNode&&n.parentNode.nodeName==="filter",{className:r,style:o,children:u,scrollTop:h,scrollLeft:m,viewBox:y,...g}=t,v=Object.values(g),b=Object.keys(g).map(T=>i||n.hasAttribute(T)?T:i2[T]||(i2[T]=T.replace(/([A-Z])/g,R=>"-"+R.toLowerCase())));u!==void 0&&(n.textContent=u);for(const T in o)if(o.hasOwnProperty(T)){const R=c5(T,o[T]);dv.test(T)?n.style.setProperty(T,R):n.style[T]=R}b.forEach((T,R)=>{n.setAttribute(T,v[R])}),r!==void 0&&(n.className=r),h!==void 0&&(n.scrollTop=h),m!==void 0&&(n.scrollLeft=m),y!==void 0&&n.setAttribute("viewBox",y)}var Fl={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h5=(n,t)=>n+t.charAt(0).toUpperCase()+t.substring(1),d5=["Webkit","Ms","Moz","O"];Fl=Object.keys(Fl).reduce((n,t)=>(d5.forEach(i=>n[h5(i,t)]=n[t]),n),Fl);var m5=/^(matrix|translate|scale|rotate|skew)/,g5=/^(translate)/,p5=/^(rotate|skew)/,Em=(n,t)=>ft.num(n)&&n!==0?n+t:n,ef=(n,t)=>ft.arr(n)?n.every(i=>ef(i,t)):ft.num(n)?n===t:parseFloat(n)===t,y5=class extends jf{constructor({x:n,y:t,z:i,...r}){const o=[],u=[];(n||t||i)&&(o.push([n||0,t||0,i||0]),u.push(h=>[`translate3d(${h.map(m=>Em(m,"px")).join(",")})`,ef(h,0)])),Pi(r,(h,m)=>{if(m==="transform")o.push([h||""]),u.push(y=>[y,y===""]);else if(m5.test(m)){if(delete r[m],ft.und(h))return;const y=g5.test(m)?"px":p5.test(m)?"deg":"";o.push(Tn(h)),u.push(m==="rotate3d"?([g,v,b,T])=>[`rotate3d(${g},${v},${b},${Em(T,y)})`,ef(T,0)]:g=>[`${m}(${g.map(v=>Em(v,y)).join(",")})`,ef(g,m.startsWith("scale")?1:0)])}}),o.length&&(r.transform=new _5(o,u)),super(r)}},_5=class extends z_{constructor(n,t){super(),this.inputs=n,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let n="",t=!0;return Mt(this.inputs,(i,r)=>{const o=Cn(i[0]),[u,h]=this.transforms[r](ft.arr(o)?o:i.map(Cn));n+=" "+u,t=t&&h}),t?"none":n}observerAdded(n){n==1&&Mt(this.inputs,t=>Mt(t,i=>ei(i)&&yo(i,this)))}observerRemoved(n){n==0&&Mt(this.inputs,t=>Mt(t,i=>ei(i)&&eu(i,this)))}eventObserved(n){n.type=="change"&&(this._value=null),tu(this,n)}},v5=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];di.assign({batchedUpdates:u5.unstable_batchedUpdates,createStringInterpolator:G_,colors:h9});var E5=H9(v5,{applyAnimatedValues:f5,createAnimatedStyle:n=>new y5(n),getComponentProps:({scrollTop:n,scrollLeft:t,...i})=>i}),vo=E5.animated;function T5(n,t,i){return Math.max(t,Math.min(n,i))}const fe={toVector(n,t){return n===void 0&&(n=t),Array.isArray(n)?n:[n,n]},add(n,t){return[n[0]+t[0],n[1]+t[1]]},sub(n,t){return[n[0]-t[0],n[1]-t[1]]},addTo(n,t){n[0]+=t[0],n[1]+=t[1]},subTo(n,t){n[0]-=t[0],n[1]-=t[1]}};function s2(n,t,i){return t===0||Math.abs(t)===1/0?Math.pow(n,i*5):n*t*i/(t+i*n)}function r2(n,t,i,r=.15){return r===0?T5(n,t,i):n<t?-s2(t-n,i-t,r)+t:n>i?+s2(n-i,i-t,r)+i:n}function b5(n,[t,i],[r,o]){const[[u,h],[m,y]]=n;return[r2(t,u,h,r),r2(i,m,y,o)]}function S5(n,t){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function A5(n){var t=S5(n,"string");return typeof t=="symbol"?t:String(t)}function ke(n,t,i){return t=A5(t),t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function a2(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,r)}return i}function ve(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(i),!0).forEach(function(r){ke(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):a2(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}const mv={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function o2(n){return n?n[0].toUpperCase()+n.slice(1):""}const w5=["enter","leave"];function C5(n=!1,t){return n&&!w5.includes(t)}function R5(n,t="",i=!1){const r=mv[n],o=r&&r[t]||t;return"on"+o2(n)+o2(o)+(C5(i,o)?"Capture":"")}const I5=["gotpointercapture","lostpointercapture"];function x5(n){let t=n.substring(2).toLowerCase();const i=!!~t.indexOf("passive");i&&(t=t.replace("passive",""));const r=I5.includes(t)?"capturecapture":"capture",o=!!~t.indexOf(r);return o&&(t=t.replace("capture","")),{device:t,capture:o,passive:i}}function D5(n,t=""){const i=mv[n],r=i&&i[t]||t;return n+r}function zf(n){return"touches"in n}function gv(n){return zf(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function M5(n){return Array.from(n.touches).filter(t=>{var i,r;return t.target===n.currentTarget||((i=n.currentTarget)===null||i===void 0||(r=i.contains)===null||r===void 0?void 0:r.call(i,t.target))})}function V5(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function pv(n){return zf(n)?V5(n)[0]:n}function Km(n,t){try{const i=t.clientX-n.clientX,r=t.clientY-n.clientY,o=(t.clientX+n.clientX)/2,u=(t.clientY+n.clientY)/2,h=Math.hypot(i,r);return{angle:-(Math.atan2(i,r)*180)/Math.PI,distance:h,origin:[o,u]}}catch{}return null}function N5(n){return M5(n).map(t=>t.identifier)}function l2(n,t){const[i,r]=Array.from(n.touches).filter(o=>t.includes(o.identifier));return Km(i,r)}function Tm(n){const t=pv(n);return zf(n)?t.identifier:t.pointerId}function oo(n){const t=pv(n);return[t.clientX,t.clientY]}const u2=40,c2=800;function yv(n){let{deltaX:t,deltaY:i,deltaMode:r}=n;return r===1?(t*=u2,i*=u2):r===2&&(t*=c2,i*=c2),[t,i]}function O5(n){var t,i;const{scrollX:r,scrollY:o,scrollLeft:u,scrollTop:h}=n.currentTarget;return[(t=r??u)!==null&&t!==void 0?t:0,(i=o??h)!==null&&i!==void 0?i:0]}function L5(n){const t={};if("buttons"in n&&(t.buttons=n.buttons),"shiftKey"in n){const{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u}=n;Object.assign(t,{shiftKey:i,altKey:r,metaKey:o,ctrlKey:u})}return t}function mf(n,...t){return typeof n=="function"?n(...t):n}function k5(){}function P5(...n){return n.length===0?k5:n.length===1?n[0]:function(){let t;for(const i of n)t=i.apply(this,arguments)||t;return t}}function f2(n,t){return Object.assign({},t,n||{})}const U5=32;class _v{constructor(t,i,r){this.ctrl=t,this.args=i,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:i,ingKey:r,args:o}=this;i[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=o,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const i=this.state,r=this.config;i._active||(this.reset(),this.computeInitial(),i._active=!0,i.target=t.target,i.currentTarget=t.currentTarget,i.lastOffset=r.from?mf(r.from,i):i.offset,i.offset=i.lastOffset,i.startTime=i.timeStamp=t.timeStamp)}computeValues(t){const i=this.state;i._values=t,i.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:i,config:r,shared:o}=this;i.args=this.args;let u=0;if(t&&(i.event=t,r.preventDefault&&t.cancelable&&i.event.preventDefault(),i.type=t.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,L5(t)),o.down=o.pressed=o.buttons%2===1||o.touches>0,u=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime),i._active){const Y=i._delta.map(Math.abs);fe.addTo(i._distance,Y)}this.axisIntent&&this.axisIntent(t);const[h,m]=i._movement,[y,g]=r.threshold,{_step:v,values:b}=i;if(r.hasCustomTransform?(v[0]===!1&&(v[0]=Math.abs(h)>=y&&b[0]),v[1]===!1&&(v[1]=Math.abs(m)>=g&&b[1])):(v[0]===!1&&(v[0]=Math.abs(h)>=y&&Math.sign(h)*y),v[1]===!1&&(v[1]=Math.abs(m)>=g&&Math.sign(m)*g)),i.intentional=v[0]!==!1||v[1]!==!1,!i.intentional)return;const T=[0,0];if(r.hasCustomTransform){const[Y,x]=b;T[0]=v[0]!==!1?Y-v[0]:0,T[1]=v[1]!==!1?x-v[1]:0}else T[0]=v[0]!==!1?h-v[0]:0,T[1]=v[1]!==!1?m-v[1]:0;this.restrictToAxis&&!i._blocked&&this.restrictToAxis(T);const R=i.offset,V=i._active&&!i._blocked||i.active;V&&(i.first=i._active&&!i.active,i.last=!i._active&&i.active,i.active=o[this.ingKey]=i._active,t&&(i.first&&("bounds"in r&&(i._bounds=mf(r.bounds,i)),this.setup&&this.setup()),i.movement=T,this.computeOffset()));const[j,k]=i.offset,[[z,W],[Q,et]]=i._bounds;i.overflow=[j<z?-1:j>W?1:0,k<Q?-1:k>et?1:0],i._movementBound[0]=i.overflow[0]?i._movementBound[0]===!1?i._movement[0]:i._movementBound[0]:!1,i._movementBound[1]=i.overflow[1]?i._movementBound[1]===!1?i._movement[1]:i._movementBound[1]:!1;const tt=i._active?r.rubberband||[0,0]:[0,0];if(i.offset=b5(i._bounds,i.offset,tt),i.delta=fe.sub(i.offset,R),this.computeMovement(),V&&(!i.last||u>U5)){i.delta=fe.sub(i.offset,R);const Y=i.delta.map(Math.abs);fe.addTo(i.distance,Y),i.direction=i.delta.map(Math.sign),i._direction=i._delta.map(Math.sign),!i.first&&u>0&&(i.velocity=[Y[0]/u,Y[1]/u],i.timeDelta=u)}}emit(){const t=this.state,i=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const o=this.handler(ve(ve(ve({},i),t),{},{[this.aliasKey]:t.values}));o!==void 0&&(t.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function j5([n,t],i){const r=Math.abs(n),o=Math.abs(t);if(r>o&&r>i)return"x";if(o>r&&o>i)return"y"}class pu extends _v{constructor(...t){super(...t),ke(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=fe.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=fe.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const i=this.state,r=this.config;if(!i.axis&&t){const o=typeof r.axisThreshold=="object"?r.axisThreshold[gv(t)]:r.axisThreshold;i.axis=j5(i._movement,o)}i._blocked=(r.lockDirection||!!r.axis)&&!i.axis||!!r.axis&&r.axis!==i.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const B5=n=>n,h2=.15,vv={enabled(n=!0){return n},eventOptions(n,t,i){return ve(ve({},i.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[h2,h2];case!1:return[0,0];default:return fe.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return fe.toVector(n)},transform(n,t,i){const r=n||i.shared.transform;return this.hasCustomTransform=!!r,r||B5},threshold(n){return fe.toVector(n,0)}},z5=0,ta=ve(ve({},vv),{},{axis(n,t,{axis:i}){if(this.lockDirection=i==="lock",!this.lockDirection)return i},axisThreshold(n=z5){return n},bounds(n={}){if(typeof n=="function")return u=>ta.bounds(n(u));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:t=-1/0,right:i=1/0,top:r=-1/0,bottom:o=1/0}=n;return[[t,i],[r,o]]}}),d2={ArrowRight:(n,t=1)=>[n*t,0],ArrowLeft:(n,t=1)=>[-1*n*t,0],ArrowUp:(n,t=1)=>[0,-1*n*t],ArrowDown:(n,t=1)=>[0,n*t]};class q5 extends pu{constructor(...t){super(...t),ke(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const i=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),o={left:i.left-r.left+t.offset[0],right:i.right-r.right+t.offset[0],top:i.top-r.top+t.offset[1],bottom:i.bottom-r.bottom+t.offset[1]};t._bounds=ta.bounds(o)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const i=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(i.pointerButtons)?!i.pointerButtons.includes(t.buttons):i.pointerButtons!==-1&&i.pointerButtons!==t.buttons))return;const o=this.ctrl.setEventIds(t);i.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(o&&o.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=Tm(t),r._pointerActive=!0,this.computeValues(oo(t)),this.computeInitial(),i.preventScrollAxis&&gv(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):i.delay>0?(this.setupDelayTrigger(t),i.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const i=this.state;i._active=!0,i._preventScroll=!0,i._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const i=this.state,r=this.config;if(!i._pointerActive)return;const o=Tm(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;const u=oo(t);if(document.pointerLockElement===t.target?i._delta=[t.movementX,t.movementY]:(i._delta=fe.sub(u,i._values),this.computeValues(u)),fe.addTo(i._movement,i._delta),this.compute(t),i._delayed&&i.intentional){this.timeoutStore.remove("dragDelay"),i.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!i._preventScroll)if(i.axis)if(i.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){i._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const i=this.state,r=this.config;if(!i._active||!i._pointerActive)return;const o=Tm(t);if(i._pointerId!==void 0&&o!==i._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[u,h]=i._distance;if(i.tap=u<=r.tapsThreshold&&h<=r.tapsThreshold,i.tap&&r.filterTaps)i._force=!0;else{const[m,y]=i._delta,[g,v]=i._movement,[b,T]=r.swipe.velocity,[R,V]=r.swipe.distance,j=r.swipe.duration;if(i.elapsedTime<j){const k=Math.abs(m/i.timeDelta),z=Math.abs(y/i.timeDelta);k>b&&Math.abs(g)>R&&(i.swipe[0]=Math.sign(m)),z>T&&Math.abs(v)>V&&(i.swipe[1]=Math.sign(y))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const i=this.config,r=i.device;i.pointerLock&&t.currentTarget.requestPointerLock(),i.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,H5(t);const i=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",i),this.eventStore.add(this.sharedConfig.window,"touch","cancel",i),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const i=d2[t.key];if(i){const r=this.state,o=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=i(this.config.keyboardDisplacement,o),r._keyboardActive=!0,fe.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in d2&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const i=this.config.device;t(i,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(i,"change",this.pointerMove.bind(this)),t(i,"end",this.pointerUp.bind(this)),t(i,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function H5(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const yu=typeof window<"u"&&window.document&&window.document.createElement;function Ev(){return yu&&"ontouchstart"in window}function G5(){return Ev()||yu&&window.navigator.maxTouchPoints>1}function F5(){return yu&&"onpointerdown"in window}function Q5(){return yu&&"exitPointerLock"in window.document}function Y5(){try{return"constructor"in GestureEvent}catch{return!1}}const ni={isBrowser:yu,gesture:Y5(),touch:Ev(),touchscreen:G5(),pointer:F5(),pointerLock:Q5()},K5=250,$5=180,X5=.5,Z5=50,J5=250,W5=10,m2={mouse:0,touch:0,pen:8},tE=ve(ve({},ta),{},{device(n,t,{pointer:{touch:i=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&ni.pointerLock,ni.touch&&i?"touch":this.pointerLock?"mouse":ni.pointer&&!o?"pointer":ni.touch?"touch":"mouse"},preventScrollAxis(n,t,{preventScroll:i}){if(this.preventScrollDelay=typeof i=="number"?i:i||i===void 0&&n?K5:void 0,!(!ni.touchscreen||i===!1))return n||(i!==void 0?"y":void 0)},pointerCapture(n,t,{pointer:{capture:i=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&i},threshold(n,t,{filterTaps:i=!1,tapsThreshold:r=3,axis:o=void 0}){const u=fe.toVector(n,i?r:o?1:0);return this.filterTaps=i,this.tapsThreshold=r,u},swipe({velocity:n=X5,distance:t=Z5,duration:i=J5}={}){return{velocity:this.transform(fe.toVector(n)),distance:this.transform(fe.toVector(t)),duration:i}},delay(n=0){switch(n){case!0:return $5;case!1:return 0;default:return n}},axisThreshold(n){return n?ve(ve({},m2),n):m2},keyboardDisplacement(n=W5){return n}});function Tv(n){const[t,i]=n.overflow,[r,o]=n._delta,[u,h]=n._direction;(t<0&&r>0&&u<0||t>0&&r<0&&u>0)&&(n._movement[0]=n._movementBound[0]),(i<0&&o>0&&h<0||i>0&&o<0&&h>0)&&(n._movement[1]=n._movementBound[1])}const eE=30,nE=100;class iE extends _v{constructor(...t){super(...t),ke(this,"ingKey","pinching"),ke(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:i,lastOffset:r}=this.state;t==="wheel"?this.state.offset=fe.add(i,r):this.state.offset=[(1+i[0])*r[0],i[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:i}=this.state;this.state.movement=[t[0]/i[0],t[1]-i[1]]}axisIntent(){const t=this.state,[i,r]=t._movement;if(!t.axis){const o=Math.abs(i)*eE-Math.abs(r);o<0?t.axis="angle":o>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const i=this.state,r=this.ctrl.touchIds;if(i._active&&i._touchIds.every(u=>r.has(u))||r.size<2)return;this.start(t),i._touchIds=Array.from(r).slice(0,2);const o=l2(t,i._touchIds);o&&this.pinchStart(t,o)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const i=this.state,r=i._pointerEvents,o=this.ctrl.pointerIds;if(i._active&&Array.from(r.keys()).every(h=>o.has(h))||(r.size<2&&r.set(t.pointerId,t),i._pointerEvents.size<2))return;this.start(t);const u=Km(...Array.from(r.values()));u&&this.pinchStart(t,u)}pinchStart(t,i){const r=this.state;r.origin=i.origin,this.computeValues([i.distance,i.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const i=l2(t,this.state._touchIds);i&&this.pinchMove(t,i)}pointerMove(t){const i=this.state._pointerEvents;if(i.has(t.pointerId)&&i.set(t.pointerId,t),!this.state._active)return;const r=Km(...Array.from(i.values()));r&&this.pinchMove(t,r)}pinchMove(t,i){const r=this.state,o=r._values[1],u=i.angle-o;let h=0;Math.abs(u)>270&&(h+=Math.sign(u)),this.computeValues([i.distance,i.angle-360*h]),r.origin=i.origin,r.turns=h,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(i=>!this.ctrl.touchIds.has(i))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const i=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}i._pointerEvents.has(t.pointerId)&&i._pointerEvents.delete(t.pointerId),i._active&&i._pointerEvents.size<2&&(i._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const i=this.state;i._active||(this.start(t),this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const i=this.state;this.computeValues([t.scale,t.rotation]),i.origin=[t.clientX,t.clientY];const r=i._movement;i._movement=[t.scale-1,t.rotation],i._delta=fe.sub(i._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const i=this.config.modifierKey;i&&(Array.isArray(i)?!i.find(r=>t[r]):!t[i])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-yv(t)[1]/nE*r.offset[0],0],fe.addTo(r._movement,r._delta),Tv(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const i=this.config.device;i&&(t(i,"start",this[i+"Start"].bind(this)),t(i,"change",this[i+"Move"].bind(this)),t(i,"end",this[i+"End"].bind(this)),t(i,"cancel",this[i+"End"].bind(this)),t("lostPointerCapture","",this[i+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const sE=ve(ve({},vv),{},{device(n,t,{shared:i,pointer:{touch:r=!1}={}}){if(i.target&&!ni.touch&&ni.gesture)return"gesture";if(ni.touch&&r)return"touch";if(ni.touchscreen){if(ni.pointer)return"pointer";if(ni.touch)return"touch"}},bounds(n,t,{scaleBounds:i={},angleBounds:r={}}){const o=h=>{const m=f2(mf(i,h),{min:-1/0,max:1/0});return[m.min,m.max]},u=h=>{const m=f2(mf(r,h),{min:-1/0,max:1/0});return[m.min,m.max]};return typeof i!="function"&&typeof r!="function"?[o(),u()]:h=>[o(h),u(h)]},threshold(n,t,i){return this.lockDirection=i.axis==="lock",fe.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class rE extends pu{constructor(...t){super(...t),ke(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(oo(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const i=oo(t),r=this.state;r._delta=fe.sub(i,r._values),fe.addTo(r._movement,r._delta),this.computeValues(i),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const aE=ve(ve({},ta),{},{mouseOnly:(n=!0)=>n});class oE extends pu{constructor(...t){super(...t),ke(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const i=this.state,r=O5(t);i._delta=fe.sub(r,i._values),fe.addTo(i._movement,i._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const lE=ta;class uE extends pu{constructor(...t){super(...t),ke(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const i=this.state;i._delta=yv(t),fe.addTo(i._movement,i._delta),Tv(i),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const cE=ta;class fE extends pu{constructor(...t){super(...t),ke(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(oo(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const i=this.state;if(!i._active)return;i._active=!1;const r=oo(t);i._movement=i._delta=fe.sub(r,i._values),this.computeValues(r),this.compute(t),i.delta=i.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const hE=ve(ve({},ta),{},{mouseOnly:(n=!0)=>n}),L1=new Map,$m=new Map;function bv(n){L1.set(n.key,n.engine),$m.set(n.key,n.resolver)}const Sv={key:"drag",engine:q5,resolver:tE},dE={key:"hover",engine:fE,resolver:hE},mE={key:"move",engine:rE,resolver:aE},gE={key:"pinch",engine:iE,resolver:sE},pE={key:"scroll",engine:oE,resolver:lE},yE={key:"wheel",engine:uE,resolver:cE};function _E(n,t){if(n==null)return{};var i={},r=Object.keys(n),o,u;for(u=0;u<r.length;u++)o=r[u],!(t.indexOf(o)>=0)&&(i[o]=n[o]);return i}function vE(n,t){if(n==null)return{};var i=_E(n,t),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(o=0;o<u.length;o++)r=u[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(i[r]=n[r])}return i}const EE={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ni.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform(n){return n}},TE=["target","eventOptions","window","enabled","transform"];function nf(n={},t){const i={};for(const[r,o]of Object.entries(t))switch(typeof o){case"function":i[r]=o.call(i,n[r],r,n);break;case"object":i[r]=nf(n[r],o);break;case"boolean":o&&(i[r]=n[r]);break}return i}function bE(n,t,i={}){const r=n,{target:o,eventOptions:u,window:h,enabled:m,transform:y}=r,g=vE(r,TE);if(i.shared=nf({target:o,eventOptions:u,window:h,enabled:m,transform:y},EE),t){const v=$m.get(t);i[t]=nf(ve({shared:i.shared},g),v)}else for(const v in g){const b=$m.get(v);b&&(i[v]=nf(ve({shared:i.shared},g[v]),b))}return i}class Av{constructor(t,i){ke(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=i}add(t,i,r,o,u){const h=this._listeners,m=D5(i,r),y=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},g=ve(ve({},y),u);t.addEventListener(m,o,g);const v=()=>{t.removeEventListener(m,o,g),h.delete(v)};return h.add(v),v}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class SE{constructor(){ke(this,"_timeouts",new Map)}add(t,i,r=140,...o){this.remove(t),this._timeouts.set(t,window.setTimeout(i,r,...o))}remove(t){const i=this._timeouts.get(t);i&&window.clearTimeout(i)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class AE{constructor(t){ke(this,"gestures",new Set),ke(this,"_targetEventStore",new Av(this)),ke(this,"gestureEventStores",{}),ke(this,"gestureTimeoutStores",{}),ke(this,"handlers",{}),ke(this,"config",{}),ke(this,"pointerIds",new Set),ke(this,"touchIds",new Set),ke(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),wE(this,t)}setEventIds(t){if(zf(t))return this.touchIds=new Set(N5(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,i){this.handlers=t,this.nativeHandlers=i}applyConfig(t,i){this.config=bE(t,i,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const i=this.config.shared,r={};let o;if(!(i.target&&(o=i.target(),!o))){if(i.enabled){for(const h of this.gestures){const m=this.config[h],y=g2(r,m.eventOptions,!!o);if(m.enabled){const g=L1.get(h);new g(this,t,h).bind(y)}}const u=g2(r,i.eventOptions,!!o);for(const h in this.nativeHandlers)u(h,"",m=>this.nativeHandlers[h](ve(ve({},this.state.shared),{},{event:m,args:t})),void 0,!0)}for(const u in r)r[u]=P5(...r[u]);if(!o)return r;for(const u in r){const{device:h,capture:m,passive:y}=x5(u);this._targetEventStore.add(o,h,"",r[u],{capture:m,passive:y})}}}}function $a(n,t){n.gestures.add(t),n.gestureEventStores[t]=new Av(n,t),n.gestureTimeoutStores[t]=new SE}function wE(n,t){t.drag&&$a(n,"drag"),t.wheel&&$a(n,"wheel"),t.scroll&&$a(n,"scroll"),t.move&&$a(n,"move"),t.pinch&&$a(n,"pinch"),t.hover&&$a(n,"hover")}const g2=(n,t,i)=>(r,o,u,h={},m=!1)=>{var y,g;const v=(y=h.capture)!==null&&y!==void 0?y:t.capture,b=(g=h.passive)!==null&&g!==void 0?g:t.passive;let T=m?r:R5(r,o,v);i&&b&&(T+="Passive"),n[T]=n[T]||[],n[T].push(u)},CE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function RE(n){const t={},i={},r=new Set;for(let o in n)CE.test(o)?(r.add(RegExp.lastMatch),i[o]=n[o]):t[o]=n[o];return[i,t,r]}function Xa(n,t,i,r,o,u){if(!n.has(i)||!L1.has(r))return;const h=i+"Start",m=i+"End",y=g=>{let v;return g.first&&h in t&&t[h](g),i in t&&(v=t[i](g)),g.last&&m in t&&t[m](g),v};o[r]=y,u[r]=u[r]||{}}function IE(n,t){const[i,r,o]=RE(n),u={};return Xa(o,i,"onDrag","drag",u,t),Xa(o,i,"onWheel","wheel",u,t),Xa(o,i,"onScroll","scroll",u,t),Xa(o,i,"onPinch","pinch",u,t),Xa(o,i,"onMove","move",u,t),Xa(o,i,"onHover","hover",u,t),{handlers:u,config:t,nativeHandlers:r}}function wv(n,t={},i,r){const o=Kr.useMemo(()=>new AE(n),[]);if(o.applyHandlers(n,r),o.applyConfig(t,i),Kr.useEffect(o.effect.bind(o)),Kr.useEffect(()=>o.clean.bind(o),[]),t.target===void 0)return o.bind.bind(o)}function qf(n,t){return bv(Sv),wv({drag:n},t||{},"drag")}function xE(n){return n.forEach(bv),function(i,r){const{handlers:o,nativeHandlers:u,config:h}=IE(i,r||{});return wv(o,h,void 0,u)}}function DE(n,t){return xE([Sv,gE,pE,yE,mE,dE])(n,t||{})}const ME="_popup_tu52t_1",VE={popup:ME},NE=n=>{const t=xe.c(13),{message:i,onClose:r}=n,[o,u]=X.useState(!1),[h,m]=_o(OE),{x:y,y:g,opacity:v}=h;let b;t[0]!==m||t[1]!==r?(b=k=>{const{down:z,movement:W,direction:Q}=k,[et]=W,[tt]=Q;if(!z&&Math.abs(et)>100){u(!0),m.start({x:tt>0?500:-500,opacity:0,onRest:r});return}m.start({x:z?et:0,opacity:1})},t[0]=m,t[1]=r,t[2]=b):b=t[2];const T=qf(b);if(o)return null;let R;t[3]!==T?(R=T(),t[3]=T,t[4]=R):R=t[4];let V;t[5]!==v||t[6]!==y||t[7]!==g?(V={x:y,y:g,opacity:v},t[5]=v,t[6]=y,t[7]=g,t[8]=V):V=t[8];let j;return t[9]!==i||t[10]!==R||t[11]!==V?(j=I.jsx(vo.div,{...R,className:VE.popup,style:V,children:i}),t[9]=i,t[10]=R,t[11]=V,t[12]=j):j=t[12],j};function OE(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}const Cv=X.createContext(),_u=()=>X.useContext(Cv),LE=({children:n})=>{const[t,i]=X.useState([]),r=(h,m={})=>{const y=Date.now();i(g=>[...g,{id:y,message:h,...m}]),m.persistent||setTimeout(()=>o(y),m.duration||3e3)},o=h=>{i(m=>m.filter(y=>y.id!==h))},u=X.useMemo(()=>({showNotification:r,removeNotification:o}),[]);return I.jsxs(Cv,{value:u,children:[n,I.jsx("div",{style:{position:"fixed",top:20,right:0,left:0,display:"flex",flexDirection:"column",padding:20,gap:10,zIndex:10,pointerEvents:"none"},children:t.map(h=>I.jsx(NE,{...h,onClose:()=>o(h.id)},h.id))})]})};function Ql(n){const t=n.current.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function kE(n,t){let i=0;return function(...r){const o=Date.now();o-i>=t&&(i=o,n.apply(this,r))}}function PE(n,t){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>n(...r),t)}}async function UE(n,t=32*1024){const i=[];let r=0;const o=await n.arrayBuffer();for(;r<o.byteLength;){const u=o.slice(r,r+t);i.push(u),r+=t,i.length%50===0&&await new Promise(h=>setTimeout(h,0))}return i}async function jE(n,t){let i=0;t.send(JSON.stringify({type:"imageStart",sentId:n.sentId,receivedId:n.receivedId}));for(const r of n.chunks)i++,t.send(r),i%50===0&&await new Promise(o=>setTimeout(o,0));t.send(JSON.stringify({type:"imageEnd",imageType:n.fileType}))}const Xm=({type:n,content:t,replying:i,setReplying:r,selectedMessage:o,dataChannel:u,addMessage:h,sentId:m,inputRef:y,atBottomRef:g})=>{const v={type:n,content:t,sentId:m.current,receivedId:null},b={sentId:m.current,receivedId:null,type:n==="text"?n:"image",status:"sending",reaction:-1,content:t,deleted:0};if(i){const T={sentId:o.receivedId,receivedId:o.sentId};v.replyTo={...o,...T},b.replyTo=o,r(!1)}u.send(JSON.stringify(v)),h(b),m.current=m.current+1,y&&(y.current.value=""),g.current=!0};function BE(n){return n?new RegExp("^(?:\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F|\\p{Emoji_Modifier_Base}(?:\\p{Emoji_Modifier})?|\\p{Extended_Pictographic})+$","u").test(n.trim()):void 0}const p2=n=>{let t;const i=new Set,r=(g,v)=>{const b=typeof g=="function"?g(t):g;if(!Object.is(b,t)){const T=t;t=v??(typeof b!="object"||b===null)?b:Object.assign({},t,b),i.forEach(R=>R(t,T))}},o=()=>t,m={setState:r,getState:o,getInitialState:()=>y,subscribe:g=>(i.add(g),()=>i.delete(g))},y=t=n(r,o,m);return m},zE=n=>n?p2(n):p2,qE=n=>n;function HE(n,t=qE){const i=Kr.useSyncExternalStore(n.subscribe,Kr.useCallback(()=>t(n.getState()),[n,t]),Kr.useCallback(()=>t(n.getInitialState()),[n,t]));return Kr.useDebugValue(i),i}const y2=n=>{const t=zE(n),i=r=>HE(t,r);return Object.assign(i,t),i},Rv=n=>n?y2(n):y2,Pt=Rv(n=>({messages:[],addMessage:t=>n(i=>({messages:[...i.messages,t]})),removeMessage:(t,i)=>n(r=>({messages:r.messages.filter(o=>o.sentId!==t&&o.receivedId!==i)})),updateMessage:(t,i,r)=>n(o=>({messages:o.messages.map(u=>u.sentId===t&&u.receivedId===i?{...u,...r}:u)})),highlightMessage:(t,i)=>n(r=>({messages:r.messages.map(o=>o.sentId===t&&o.receivedId===i?{...o,highlight:!o.highlight}:o)})),replying:null,setReplying:t=>n(()=>({replying:t})),actionsShown:!1,setActionsShown:t=>n(()=>({actionsShown:t})),reactionsShown:!1,setReactionsShown:t=>n(()=>({reactionsShown:t})),newMessage:!1,setNewMessage:t=>n(()=>({newMessage:t})),incomingCall:!1,setIncomingCall:t=>n(()=>({incomingCall:t})),typing:!1,setTyping:t=>n(()=>({typing:t})),imageDialog:null,setImageDialog:t=>n(()=>({imageDialog:t})),videoCall:"hidden",setVideoCall:t=>n(()=>({videoCall:t}))}));Rv(n=>({}));const si=X.createContext(null),GE=({children:n})=>{console.log("Chat context rendered!");const{dataChannel:t,imageChannel:i}=X.useContext(Dn),{showNotification:r}=_u(),o=X.useRef(null),u=X.useRef([]),h=X.useRef(0),m=X.useRef(null),y=X.useRef({x:0,y:0}),g=X.useRef(!1),v=X.useRef(null),b=X.useRef(!1),T=X.useRef(null),R=Pt(tt=>tt.addMessage),V=Pt(tt=>tt.updateMessage),j=Pt(tt=>tt.removeMessage),k=Pt(tt=>tt.setNewMessage),z=Pt(tt=>tt.setVideoCall),W=Pt(tt=>tt.setIncomingCall),Q=Pt(tt=>tt.setTyping);X.useEffect(()=>(t.current.onmessage=tt=>{let Y=JSON.parse(tt.data);if(Y.type==="typing")clearTimeout(v.current),Q(!0),v.current=setTimeout(()=>{Q(!1)},1400);else if(Y.type==="text"){let x={receivedId:Y.sentId,sentId:Y.receivedId,type:Y.type,reaction:-1,content:Y.content,deleted:0,hightlight:!1,replyTo:Y.replyTo};Ql(m)?(console.log("I am in the bottom!"),b.current=!0):k(!0);let w={type:"ack",sentId:Y.sentId,receivedId:Y.receivedId};t.current.send(JSON.stringify(w)),R(x)}else if(Y.type==="ack")V(Y.sentId,null,{status:"sent"});else if(Y.type==="reaction"){let x={type:"ackReaction",sentId:Y.id,reaction:Y.reaction};t.current.send(JSON.stringify(x)),V(Y.id,null,{reaction:Y.reaction})}else if(Y.type==="ackReaction")console.log("I have received an ackReaction message: ",Y),V(null,Y.sentId,{reaction:Y.reaction});else if(Y.type==="gif"){let x={receivedId:Y.sentId,sentId:Y.receivedId,type:"image",reaction:-1,content:Y.content,deleted:0,hightlight:!1,replyTo:Y.replyTo};Ql(m)?b.current=!0:k(!0);let w={type:"gifAck",sentId:Y.sentId,receivedId:Y.receivedId};t.current.send(JSON.stringify(w)),R(x)}else if(Y.type==="gifAck")V(Y.sentId,Y.receivedId,{status:"sent"});else if(Y.type==="imageRequest"){let x={receivedId:Y.sentId,sentId:Y.receivedId,type:Y.type,reaction:-1,deleted:0,hightlight:!1,replyTo:Y.replyTo};Ql(m)?b.current=!0:k(!0),R(x)}else if(Y.type==="imageAccept"){const x=u.current.find(w=>w.sentId===Y.sentId&&w.receivedId===Y.receivedId);console.log(x),(async()=>await jE(x,i.current))()}else if(Y.type==="imageReject")console.log("The image I sent was rejected!"),j(Y.sentId,Y.receivedId);else if(Y.type==="imageReceived")V(Y.sentId,Y.receivedId,{status:"sent"});else if(Y.type==="delete"){let x={type:"ackDeletion",sentId:Y.sentId};t.current.send(JSON.stringify(x)),V(null,Y.sentId,{type:"text",content:"This message has been deleted",deleted:2})}else Y.type==="ackDeletion"?V(Y.sentId,null,{type:"text",content:"This message has been deleted",deleted:2}):Y.type==="callRequest"?(console.log("The other peer is trying to call me!"),W(!0)):Y.type==="callCancel"?W(!1):Y.type==="callReject"?(r("Your call was rejected!"),z("hidden")):Y.type==="callAccept"?z("connected"):Y.type==="callEnd"&&z("hidden")},i.current.onmessage=tt=>{if(typeof tt.data=="string"){const Y=JSON.parse(tt.data);if(Y.type==="imageStart")T.current={sentId:Y.receivedId,receivedId:Y.sentId,chunks:[]};else if(Y.type==="imageEnd"){const x=new Blob(T.current.chunks,{type:Y.imageType}),w=URL.createObjectURL(x);t.current.send(JSON.stringify({type:"imageReceived",sentId:T.current.receivedId,receivedId:T.current.sentId})),V(T.current.sentId,T.current.receivedId,{type:"image",content:w,status:"received"}),T.current=null}}else T.current.chunks.push(tt.data)},()=>{t.current.onmessage=null,i.current.onmessage=null}),[]);const et=X.useMemo(()=>({chatBottom:m,sentId:h,selectedMessage:o,pointerPosition:y,longPressed:g,atBottomRef:b,images:u,receivingImage:T}),[]);return I.jsx(si,{value:et,children:n})},FE="_navContainer_2izlb_1",QE="_logo_2izlb_10",YE="_navList_2izlb_15",KE="_hamburger_2izlb_30",Mi={navContainer:FE,logo:QE,navList:YE,hamburger:KE};function $E(){const n=xe.c(5);let t;n[0]===Symbol.for("react.memo_cache_sentinel")?(t=I.jsx("a",{href:"/",className:Mi.logo,"aria-label":"Homepage",children:"boop"}),n[0]=t):t=n[0];let i;n[1]===Symbol.for("react.memo_cache_sentinel")?(i=I.jsx("a",{className:Mi.hamburger,"aria-label":"Expand for menu",children:I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[I.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),I.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),I.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),n[1]=i):i=n[1];let r;n[2]===Symbol.for("react.memo_cache_sentinel")?(r=I.jsx("li",{className:Mi.navItem,children:I.jsx("a",{href:"#about",className:Mi.navLink,children:"About"})}),n[2]=r):r=n[2];let o;n[3]===Symbol.for("react.memo_cache_sentinel")?(o=I.jsx("li",{className:Mi.navItem,children:I.jsx("a",{href:"#projects",className:Mi.navLink,children:"Policy"})}),n[3]=o):o=n[3];let u;return n[4]===Symbol.for("react.memo_cache_sentinel")?(u=I.jsxs("nav",{"aria-label":"Main Navigation",className:Mi.navContainer,children:[t,i,I.jsxs("ul",{className:Mi.navList,children:[r,o,I.jsx("li",{className:Mi.navItem,children:I.jsx("a",{href:"#contact",className:Mi.navLink,children:"Contact"})})]})]}),n[4]=u):u=n[4],u}const XE="_mainContainer_15mr1_1",ZE="_inputCard_15mr1_13",JE="_linkInput_15mr1_41",WE="_loaderWrapper_15mr1_71",tT="_loader_15mr1_71",Ll={mainContainer:XE,inputCard:ZE,linkInput:JE,loaderWrapper:WE,loader:tT},eT=()=>{};var _2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv=function(n){const t=[];let i=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},nT=function(n){const t=[];let i=0,r=0;for(;i<n.length;){const o=n[i++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[i++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[i++],h=n[i++],m=n[i++],y=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(y>>10)),t[r++]=String.fromCharCode(56320+(y&1023))}else{const u=n[i++],h=n[i++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const u=n[o],h=o+1<n.length,m=h?n[o+1]:0,y=o+2<n.length,g=y?n[o+2]:0,v=u>>2,b=(u&3)<<4|m>>4;let T=(m&15)<<2|g>>6,R=g&63;y||(R=64,h||(T=64)),r.push(i[v],i[b],i[T],i[R])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Iv(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):nT(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const u=i[n.charAt(o++)],m=o<n.length?i[n.charAt(o)]:0;++o;const g=o<n.length?i[n.charAt(o)]:64;++o;const b=o<n.length?i[n.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new iT;const T=u<<2|m>>4;if(r.push(T),g!==64){const R=m<<4&240|g>>2;if(r.push(R),b!==64){const V=g<<6&192|b;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sT=function(n){const t=Iv(n);return xv.encodeByteArray(t,!0)},gf=function(n){return sT(n).replace(/\./g,"")},rT=function(n){try{return xv.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=()=>aT().__FIREBASE_DEFAULTS__,lT=()=>{if(typeof process>"u"||typeof _2>"u")return;const n=_2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&rT(n[1]);return t&&JSON.parse(t)},k1=()=>{try{return eT()||oT()||lT()||uT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cT=n=>{var t,i;return(i=(t=k1())===null||t===void 0?void 0:t.emulatorHosts)===null||i===void 0?void 0:i[n]},fT=n=>{const t=cT(n);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Dv=()=>{var n;return(n=k1())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n){return n.endsWith(".cloudworkstations.dev")}async function dT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=t||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gf(JSON.stringify(i)),gf(JSON.stringify(h)),""].join(".")}const Yl={};function gT(){const n={prod:[],emulator:[]};for(const t of Object.keys(Yl))Yl[t]?n.emulator.push(t):n.prod.push(t);return n}function pT(n){let t=document.getElementById(n),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),i=!0),{created:i,element:t}}let v2=!1;function yT(n,t){if(typeof window>"u"||typeof document>"u"||!P1(window.location.host)||Yl[n]===t||Yl[n]||v2)return;Yl[n]=t;function i(T){return`__firebase__banner__${T}`}const r="__firebase__banner",u=gT().prod.length>0;function h(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function y(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{v2=!0,h()},T}function v(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=pT(r),R=i("text"),V=document.getElementById(R)||document.createElement("span"),j=i("learnmore"),k=document.getElementById(j)||document.createElement("a"),z=i("preprendIcon"),W=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;m(Q),v(k,j);const et=g();y(W,z),Q.append(W,V,k,et),document.body.appendChild(Q)}u?(V.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vT(){var n;const t=(n=k1())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ET(){return!vT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TT(){try{return typeof indexedDB=="object"}catch{return!1}}function bT(){return new Promise((n,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="FirebaseError";class Eo extends Error{constructor(t,i,r){super(i),this.code=t,this.customData=r,this.name=ST,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mv.prototype.create)}}class Mv{constructor(t,i,r){this.service=t,this.serviceName=i,this.errors=r}create(t,...i){const r=i[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?AT(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Eo(o,m,r)}}function AT(n,t){return n.replace(wT,(i,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const wT=/\{\$([^}]+)}/g;function pf(n,t){if(n===t)return!0;const i=Object.keys(n),r=Object.keys(t);for(const o of i){if(!r.includes(o))return!1;const u=n[o],h=t[o];if(E2(u)&&E2(h)){if(!pf(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!i.includes(o))return!1;return!0}function E2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n){return n&&n._delegate?n._delegate:n}class au{constructor(t,i,r){this.name=t,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const r=new hT;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){var i;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(i=t==null?void 0:t.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IT(t))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Yr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Yr){return this.instances.has(t)}getOptions(t=Yr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,i){var r;const o=this.normalizeInstanceIdentifier(i),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&t(h,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,i){const r=this.onInitCallbacks.get(i);if(r)for(const o of r)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RT(t),options:i}),this.instances.set(t,r),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Yr){return this.component?this.component.multipleInstances?t:Yr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RT(n){return n===Yr?void 0:n}function IT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new CT(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($t||($t={}));const DT={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},MT=$t.INFO,VT={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},NT=(n,t,...i)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),o=VT[t];if(o)console[o](`[${r}]  ${n.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Vv{constructor(t){this.name=t,this._logLevel=MT,this._logHandler=NT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in $t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...t),this._logHandler(this,$t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...t),this._logHandler(this,$t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...t),this._logHandler(this,$t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...t),this._logHandler(this,$t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...t),this._logHandler(this,$t.ERROR,...t)}}const OT=(n,t)=>t.some(i=>n instanceof i);let T2,b2;function LT(){return T2||(T2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kT(){return b2||(b2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nv=new WeakMap,Zm=new WeakMap,Ov=new WeakMap,bm=new WeakMap,U1=new WeakMap;function PT(n){const t=new Promise((i,r)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",h)},u=()=>{i(Ws(n.result)),o()},h=()=>{r(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",h)});return t.then(i=>{i instanceof IDBCursor&&Nv.set(i,n)}).catch(()=>{}),U1.set(t,n),t}function UT(n){if(Zm.has(n))return;const t=new Promise((i,r)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",h),n.removeEventListener("abort",h)},u=()=>{i(),o()},h=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",h),n.addEventListener("abort",h)});Zm.set(n,t)}let Jm={get(n,t,i){if(n instanceof IDBTransaction){if(t==="done")return Zm.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Ov.get(n);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ws(n[t])},set(n,t,i){return n[t]=i,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function jT(n){Jm=n(Jm)}function BT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const r=n.call(Sm(this),t,...i);return Ov.set(r,t.sort?t.sort():[t]),Ws(r)}:kT().includes(n)?function(...t){return n.apply(Sm(this),t),Ws(Nv.get(this))}:function(...t){return Ws(n.apply(Sm(this),t))}}function zT(n){return typeof n=="function"?BT(n):(n instanceof IDBTransaction&&UT(n),OT(n,LT())?new Proxy(n,Jm):n)}function Ws(n){if(n instanceof IDBRequest)return PT(n);if(bm.has(n))return bm.get(n);const t=zT(n);return t!==n&&(bm.set(n,t),U1.set(t,n)),t}const Sm=n=>U1.get(n);function qT(n,t,{blocked:i,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(n,t),m=Ws(h);return r&&h.addEventListener("upgradeneeded",y=>{r(Ws(h.result),y.oldVersion,y.newVersion,Ws(h.transaction),y)}),i&&h.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const HT=["get","getKey","getAll","getAllKeys","count"],GT=["put","add","delete","clear"],Am=new Map;function S2(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Am.get(t))return Am.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,o=GT.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(o||HT.includes(i)))return;const u=async function(h,...m){const y=this.transaction(h,o?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[i](...m),o&&y.done]))[0]};return Am.set(t,u),u}jT(n=>({...n,get:(t,i,r)=>S2(t,i)||n.get(t,i,r),has:(t,i)=>!!S2(t,i)||n.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(QT(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function QT(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Wm="@firebase/app",A2="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Vv("@firebase/app"),YT="@firebase/app-compat",KT="@firebase/analytics-compat",$T="@firebase/analytics",XT="@firebase/app-check-compat",ZT="@firebase/app-check",JT="@firebase/auth",WT="@firebase/auth-compat",t7="@firebase/database",e7="@firebase/data-connect",n7="@firebase/database-compat",i7="@firebase/functions",s7="@firebase/functions-compat",r7="@firebase/installations",a7="@firebase/installations-compat",o7="@firebase/messaging",l7="@firebase/messaging-compat",u7="@firebase/performance",c7="@firebase/performance-compat",f7="@firebase/remote-config",h7="@firebase/remote-config-compat",d7="@firebase/storage",m7="@firebase/storage-compat",g7="@firebase/firestore",p7="@firebase/ai",y7="@firebase/firestore-compat",_7="firebase",v7="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="[DEFAULT]",E7={[Wm]:"fire-core",[YT]:"fire-core-compat",[$T]:"fire-analytics",[KT]:"fire-analytics-compat",[ZT]:"fire-app-check",[XT]:"fire-app-check-compat",[JT]:"fire-auth",[WT]:"fire-auth-compat",[t7]:"fire-rtdb",[e7]:"fire-data-connect",[n7]:"fire-rtdb-compat",[i7]:"fire-fn",[s7]:"fire-fn-compat",[r7]:"fire-iid",[a7]:"fire-iid-compat",[o7]:"fire-fcm",[l7]:"fire-fcm-compat",[u7]:"fire-perf",[c7]:"fire-perf-compat",[f7]:"fire-rc",[h7]:"fire-rc-compat",[d7]:"fire-gcs",[m7]:"fire-gcs-compat",[g7]:"fire-fst",[y7]:"fire-fst-compat",[p7]:"fire-vertex","fire-js":"fire-js",[_7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Map,T7=new Map,e1=new Map;function w2(n,t){try{n.container.addComponent(t)}catch(i){ps.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,i)}}function _f(n){const t=n.name;if(e1.has(t))return ps.debug(`There were multiple attempts to register component ${t}.`),!1;e1.set(t,n);for(const i of yf.values())w2(i,n);for(const i of T7.values())w2(i,n);return!0}function b7(n,t){const i=n.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),n.container.getProvider(t)}function S7(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Mv("app","Firebase",A7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(t,i,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new au("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=v7;function Lv(n,t={}){let i=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:t1,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw tr.create("bad-app-name",{appName:String(o)});if(i||(i=Dv()),!i)throw tr.create("no-options");const u=yf.get(o);if(u){if(pf(i,u.options)&&pf(r,u.config))return u;throw tr.create("duplicate-app",{appName:o})}const h=new xT(o);for(const y of e1.values())h.addComponent(y);const m=new w7(i,r,h);return yf.set(o,m),m}function R7(n=t1){const t=yf.get(n);if(!t&&n===t1&&Dv())return Lv();if(!t)throw tr.create("no-app",{appName:n});return t}function so(n,t,i){var r;let o=(r=E7[n])!==null&&r!==void 0?r:n;i&&(o+=`-${i}`);const u=o.match(/\s|\//),h=t.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ps.warn(m.join(" "));return}_f(new au(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="firebase-heartbeat-database",x7=1,ou="firebase-heartbeat-store";let wm=null;function kv(){return wm||(wm=qT(I7,x7,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ou)}catch(i){console.warn(i)}}}}).catch(n=>{throw tr.create("idb-open",{originalErrorMessage:n.message})})),wm}async function D7(n){try{const i=(await kv()).transaction(ou),r=await i.objectStore(ou).get(Pv(n));return await i.done,r}catch(t){if(t instanceof Eo)ps.warn(t.message);else{const i=tr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ps.warn(i.message)}}}async function C2(n,t){try{const r=(await kv()).transaction(ou,"readwrite");await r.objectStore(ou).put(t,Pv(n)),await r.done}catch(i){if(i instanceof Eo)ps.warn(i.message);else{const r=tr.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});ps.warn(r.message)}}}function Pv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=1024,V7=30;class N7{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new L7(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=R2();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>V7){const h=k7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ps.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=R2(),{heartbeatsToSend:r,unsentEntries:o}=O7(this._heartbeatsCache.heartbeats),u=gf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(i){return ps.warn(i),""}}}function R2(){return new Date().toISOString().substring(0,10)}function O7(n,t=M7){const i=[];let r=n.slice();for(const o of n){const u=i.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),I2(i)>t){u.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),I2(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class L7{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TT()?bT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await D7(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return C2(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return C2(this.app,{lastSentHeartbeatDate:(i=t.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function I2(n){return gf(JSON.stringify({version:2,heartbeats:n})).length}function k7(n){if(n.length===0)return-1;let t=0,i=n[0].date;for(let r=1;r<n.length;r++)n[r].date<i&&(i=n[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(n){_f(new au("platform-logger",t=>new FT(t),"PRIVATE")),_f(new au("heartbeat",t=>new N7(t),"PRIVATE")),so(Wm,A2,n),so(Wm,A2,"esm2017"),so("fire-js","")}P7("");var U7="firebase",j7="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so(U7,j7,"app");var x2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var er,Uv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,w){function C(){}C.prototype=w.prototype,x.D=w.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(O,L,P){for(var D=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)D[dt-2]=arguments[dt];return w.prototype[L].apply(O,D)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,i),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,w,C){C||(C=0);var O=Array(16);if(typeof w=="string")for(var L=0;16>L;++L)O[L]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(L=0;16>L;++L)O[L]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=x.g[0],C=x.g[1],L=x.g[2];var P=x.g[3],D=w+(P^C&(L^P))+O[0]+3614090360&4294967295;w=C+(D<<7&4294967295|D>>>25),D=P+(L^w&(C^L))+O[1]+3905402710&4294967295,P=w+(D<<12&4294967295|D>>>20),D=L+(C^P&(w^C))+O[2]+606105819&4294967295,L=P+(D<<17&4294967295|D>>>15),D=C+(w^L&(P^w))+O[3]+3250441966&4294967295,C=L+(D<<22&4294967295|D>>>10),D=w+(P^C&(L^P))+O[4]+4118548399&4294967295,w=C+(D<<7&4294967295|D>>>25),D=P+(L^w&(C^L))+O[5]+1200080426&4294967295,P=w+(D<<12&4294967295|D>>>20),D=L+(C^P&(w^C))+O[6]+2821735955&4294967295,L=P+(D<<17&4294967295|D>>>15),D=C+(w^L&(P^w))+O[7]+4249261313&4294967295,C=L+(D<<22&4294967295|D>>>10),D=w+(P^C&(L^P))+O[8]+1770035416&4294967295,w=C+(D<<7&4294967295|D>>>25),D=P+(L^w&(C^L))+O[9]+2336552879&4294967295,P=w+(D<<12&4294967295|D>>>20),D=L+(C^P&(w^C))+O[10]+4294925233&4294967295,L=P+(D<<17&4294967295|D>>>15),D=C+(w^L&(P^w))+O[11]+2304563134&4294967295,C=L+(D<<22&4294967295|D>>>10),D=w+(P^C&(L^P))+O[12]+1804603682&4294967295,w=C+(D<<7&4294967295|D>>>25),D=P+(L^w&(C^L))+O[13]+4254626195&4294967295,P=w+(D<<12&4294967295|D>>>20),D=L+(C^P&(w^C))+O[14]+2792965006&4294967295,L=P+(D<<17&4294967295|D>>>15),D=C+(w^L&(P^w))+O[15]+1236535329&4294967295,C=L+(D<<22&4294967295|D>>>10),D=w+(L^P&(C^L))+O[1]+4129170786&4294967295,w=C+(D<<5&4294967295|D>>>27),D=P+(C^L&(w^C))+O[6]+3225465664&4294967295,P=w+(D<<9&4294967295|D>>>23),D=L+(w^C&(P^w))+O[11]+643717713&4294967295,L=P+(D<<14&4294967295|D>>>18),D=C+(P^w&(L^P))+O[0]+3921069994&4294967295,C=L+(D<<20&4294967295|D>>>12),D=w+(L^P&(C^L))+O[5]+3593408605&4294967295,w=C+(D<<5&4294967295|D>>>27),D=P+(C^L&(w^C))+O[10]+38016083&4294967295,P=w+(D<<9&4294967295|D>>>23),D=L+(w^C&(P^w))+O[15]+3634488961&4294967295,L=P+(D<<14&4294967295|D>>>18),D=C+(P^w&(L^P))+O[4]+3889429448&4294967295,C=L+(D<<20&4294967295|D>>>12),D=w+(L^P&(C^L))+O[9]+568446438&4294967295,w=C+(D<<5&4294967295|D>>>27),D=P+(C^L&(w^C))+O[14]+3275163606&4294967295,P=w+(D<<9&4294967295|D>>>23),D=L+(w^C&(P^w))+O[3]+4107603335&4294967295,L=P+(D<<14&4294967295|D>>>18),D=C+(P^w&(L^P))+O[8]+1163531501&4294967295,C=L+(D<<20&4294967295|D>>>12),D=w+(L^P&(C^L))+O[13]+2850285829&4294967295,w=C+(D<<5&4294967295|D>>>27),D=P+(C^L&(w^C))+O[2]+4243563512&4294967295,P=w+(D<<9&4294967295|D>>>23),D=L+(w^C&(P^w))+O[7]+1735328473&4294967295,L=P+(D<<14&4294967295|D>>>18),D=C+(P^w&(L^P))+O[12]+2368359562&4294967295,C=L+(D<<20&4294967295|D>>>12),D=w+(C^L^P)+O[5]+4294588738&4294967295,w=C+(D<<4&4294967295|D>>>28),D=P+(w^C^L)+O[8]+2272392833&4294967295,P=w+(D<<11&4294967295|D>>>21),D=L+(P^w^C)+O[11]+1839030562&4294967295,L=P+(D<<16&4294967295|D>>>16),D=C+(L^P^w)+O[14]+4259657740&4294967295,C=L+(D<<23&4294967295|D>>>9),D=w+(C^L^P)+O[1]+2763975236&4294967295,w=C+(D<<4&4294967295|D>>>28),D=P+(w^C^L)+O[4]+1272893353&4294967295,P=w+(D<<11&4294967295|D>>>21),D=L+(P^w^C)+O[7]+4139469664&4294967295,L=P+(D<<16&4294967295|D>>>16),D=C+(L^P^w)+O[10]+3200236656&4294967295,C=L+(D<<23&4294967295|D>>>9),D=w+(C^L^P)+O[13]+681279174&4294967295,w=C+(D<<4&4294967295|D>>>28),D=P+(w^C^L)+O[0]+3936430074&4294967295,P=w+(D<<11&4294967295|D>>>21),D=L+(P^w^C)+O[3]+3572445317&4294967295,L=P+(D<<16&4294967295|D>>>16),D=C+(L^P^w)+O[6]+76029189&4294967295,C=L+(D<<23&4294967295|D>>>9),D=w+(C^L^P)+O[9]+3654602809&4294967295,w=C+(D<<4&4294967295|D>>>28),D=P+(w^C^L)+O[12]+3873151461&4294967295,P=w+(D<<11&4294967295|D>>>21),D=L+(P^w^C)+O[15]+530742520&4294967295,L=P+(D<<16&4294967295|D>>>16),D=C+(L^P^w)+O[2]+3299628645&4294967295,C=L+(D<<23&4294967295|D>>>9),D=w+(L^(C|~P))+O[0]+4096336452&4294967295,w=C+(D<<6&4294967295|D>>>26),D=P+(C^(w|~L))+O[7]+1126891415&4294967295,P=w+(D<<10&4294967295|D>>>22),D=L+(w^(P|~C))+O[14]+2878612391&4294967295,L=P+(D<<15&4294967295|D>>>17),D=C+(P^(L|~w))+O[5]+4237533241&4294967295,C=L+(D<<21&4294967295|D>>>11),D=w+(L^(C|~P))+O[12]+1700485571&4294967295,w=C+(D<<6&4294967295|D>>>26),D=P+(C^(w|~L))+O[3]+2399980690&4294967295,P=w+(D<<10&4294967295|D>>>22),D=L+(w^(P|~C))+O[10]+4293915773&4294967295,L=P+(D<<15&4294967295|D>>>17),D=C+(P^(L|~w))+O[1]+2240044497&4294967295,C=L+(D<<21&4294967295|D>>>11),D=w+(L^(C|~P))+O[8]+1873313359&4294967295,w=C+(D<<6&4294967295|D>>>26),D=P+(C^(w|~L))+O[15]+4264355552&4294967295,P=w+(D<<10&4294967295|D>>>22),D=L+(w^(P|~C))+O[6]+2734768916&4294967295,L=P+(D<<15&4294967295|D>>>17),D=C+(P^(L|~w))+O[13]+1309151649&4294967295,C=L+(D<<21&4294967295|D>>>11),D=w+(L^(C|~P))+O[4]+4149444226&4294967295,w=C+(D<<6&4294967295|D>>>26),D=P+(C^(w|~L))+O[11]+3174756917&4294967295,P=w+(D<<10&4294967295|D>>>22),D=L+(w^(P|~C))+O[2]+718787259&4294967295,L=P+(D<<15&4294967295|D>>>17),D=C+(P^(L|~w))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+P&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var C=w-this.blockSize,O=this.B,L=this.h,P=0;P<w;){if(L==0)for(;P<=C;)o(this,x,P),P+=this.blockSize;if(typeof x=="string"){for(;P<w;)if(O[L++]=x.charCodeAt(P++),L==this.blockSize){o(this,O),L=0;break}}else for(;P<w;)if(O[L++]=x[P++],L==this.blockSize){o(this,O),L=0;break}}this.h=L,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var C=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=C&255,C/=256;for(this.u(x),x=Array(16),w=C=0;4>w;++w)for(var O=0;32>O;O+=8)x[C++]=this.g[w]>>>O&255;return x};function u(x,w){var C=m;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=w(x)}function h(x,w){this.h=w;for(var C=[],O=!0,L=x.length-1;0<=L;L--){var P=x[L]|0;O&&P==w||(C[L]=P,O=!1)}this.g=C}var m={};function y(x){return-128<=x&&128>x?u(x,function(w){return new h([w|0],0>w?-1:0)}):new h([x|0],0>x?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return b;if(0>x)return k(g(-x));for(var w=[],C=1,O=0;x>=C;O++)w[O]=x/C|0,C*=4294967296;return new h(w,0)}function v(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return k(v(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(w,8)),O=b,L=0;L<x.length;L+=8){var P=Math.min(8,x.length-L),D=parseInt(x.substring(L,L+P),w);8>P?(P=g(Math.pow(w,P)),O=O.j(P).add(g(D))):(O=O.j(C),O=O.add(g(D)))}return O}var b=y(0),T=y(1),R=y(16777216);n=h.prototype,n.m=function(){if(j(this))return-k(this).m();for(var x=0,w=1,C=0;C<this.g.length;C++){var O=this.i(C);x+=(0<=O?O:4294967296+O)*w,w*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V(this))return"0";if(j(this))return"-"+k(this).toString(x);for(var w=g(Math.pow(x,6)),C=this,O="";;){var L=et(C,w).g;C=z(C,L.j(w));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=L,V(C))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function V(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function j(x){return x.h==-1}n.l=function(x){return x=z(this,x),j(x)?-1:V(x)?0:1};function k(x){for(var w=x.g.length,C=[],O=0;O<w;O++)C[O]=~x.g[O];return new h(C,~x.h).add(T)}n.abs=function(){return j(this)?k(this):this},n.add=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],O=0,L=0;L<=w;L++){var P=O+(this.i(L)&65535)+(x.i(L)&65535),D=(P>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);O=D>>>16,P&=65535,D&=65535,C[L]=D<<16|P}return new h(C,C[C.length-1]&-2147483648?-1:0)};function z(x,w){return x.add(k(w))}n.j=function(x){if(V(this)||V(x))return b;if(j(this))return j(x)?k(this).j(k(x)):k(k(this).j(x));if(j(x))return k(this.j(k(x)));if(0>this.l(R)&&0>x.l(R))return g(this.m()*x.m());for(var w=this.g.length+x.g.length,C=[],O=0;O<2*w;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<x.g.length;L++){var P=this.i(O)>>>16,D=this.i(O)&65535,dt=x.i(L)>>>16,mt=x.i(L)&65535;C[2*O+2*L]+=D*mt,W(C,2*O+2*L),C[2*O+2*L+1]+=P*mt,W(C,2*O+2*L+1),C[2*O+2*L+1]+=D*dt,W(C,2*O+2*L+1),C[2*O+2*L+2]+=P*dt,W(C,2*O+2*L+2)}for(O=0;O<w;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=w;O<2*w;O++)C[O]=0;return new h(C,0)};function W(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function Q(x,w){this.g=x,this.h=w}function et(x,w){if(V(w))throw Error("division by zero");if(V(x))return new Q(b,b);if(j(x))return w=et(k(x),w),new Q(k(w.g),k(w.h));if(j(w))return w=et(x,k(w)),new Q(k(w.g),w.h);if(30<x.g.length){if(j(x)||j(w))throw Error("slowDivide_ only works with positive integers.");for(var C=T,O=w;0>=O.l(x);)C=tt(C),O=tt(O);var L=Y(C,1),P=Y(O,1);for(O=Y(O,2),C=Y(C,2);!V(O);){var D=P.add(O);0>=D.l(x)&&(L=L.add(C),P=D),O=Y(O,1),C=Y(C,1)}return w=z(x,L.j(w)),new Q(L,w)}for(L=b;0<=x.l(w);){for(C=Math.max(1,Math.floor(x.m()/w.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=g(C),D=P.j(w);j(D)||0<D.l(x);)C-=O,P=g(C),D=P.j(w);V(P)&&(P=T),L=L.add(P),x=z(x,D)}return new Q(L,x)}n.A=function(x){return et(this,x).h},n.and=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],O=0;O<w;O++)C[O]=this.i(O)&x.i(O);return new h(C,this.h&x.h)},n.or=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],O=0;O<w;O++)C[O]=this.i(O)|x.i(O);return new h(C,this.h|x.h)},n.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],O=0;O<w;O++)C[O]=this.i(O)^x.i(O);return new h(C,this.h^x.h)};function tt(x){for(var w=x.g.length+1,C=[],O=0;O<w;O++)C[O]=x.i(O)<<1|x.i(O-1)>>>31;return new h(C,x.h)}function Y(x,w){var C=w>>5;w%=32;for(var O=x.g.length-C,L=[],P=0;P<O;P++)L[P]=0<w?x.i(P+C)>>>w|x.i(P+C+1)<<32-w:x.i(P+C);return new h(L,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Uv=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=v,er=h}).apply(typeof x2<"u"?x2:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jv,Ul,Bv,sf,n1,zv,qv,Hv;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function i(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=i(this);function o(c,p){if(p)t:{var _=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var q=c[A];if(!(q in _))break t;_=_[q]}c=c[c.length-1],A=_[c],p=p(A),p!=A&&p!=null&&t(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,A=!1,q={next:function(){if(!A&&_<c.length){var Z=_++;return{value:p(Z,c[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function g(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function v(c,p,_){return c.call.apply(c.bind,arguments)}function b(c,p,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),c.apply(p,q)}}return function(){return c.apply(p,arguments)}}function T(c,p,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,T.apply(null,arguments)}function R(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function V(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,q,Z){for(var gt=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)gt[Ft-2]=arguments[Ft];return p.prototype[q].apply(A,gt)}}function j(c){const p=c.length;if(0<p){const _=Array(p);for(let A=0;A<p;A++)_[A]=c[A];return _}return[]}function k(c,p){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(y(A)){const q=c.length||0,Z=A.length||0;c.length=q+Z;for(let gt=0;gt<Z;gt++)c[q+gt]=A[gt]}else c.push(A)}}class z{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function W(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function et(c){return et[" "](c),c}et[" "]=function(){};var tt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function Y(c,p,_){for(const A in c)p.call(_,c[A],A,c)}function x(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function w(c){const p={};for(const _ in c)p[_]=c[_];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,p){let _,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(_ in A)c[_]=A[_];for(let Z=0;Z<C.length;Z++)_=C[Z],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function L(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function P(c){m.setTimeout(()=>{throw c},0)}function D(){var c=_t;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class dt{constructor(){this.h=this.g=null}add(p,_){const A=mt.get();A.set(p,_),this.h?this.h.next=A:this.g=A,this.h=A}}var mt=new z(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let st,ut=!1,_t=new dt,M=()=>{const c=m.Promise.resolve(void 0);st=()=>{c.then(J)}};var J=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(_){P(_)}var p=mt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ut=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function Tt(c,p){if(ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(tt){t:{try{et(p.nodeName);var q=!0;break t}catch{}q=!1}q||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Et[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Tt.aa.h.call(this)}}V(Tt,ot);var Et={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function At(c,p,_,A,q){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!A,this.ha=q,this.key=++ht,this.da=this.fa=!1}function Dt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function se(c){this.src=c,this.g={},this.h=0}se.prototype.add=function(c,p,_,A,q){var Z=c.toString();c=this.g[Z],c||(c=this.g[Z]=[],this.h++);var gt=Te(c,p,A,q);return-1<gt?(p=c[gt],_||(p.fa=!1)):(p=new At(p,this.src,Z,!!A,q),p.fa=_,c.push(p)),p};function ee(c,p){var _=p.type;if(_ in c.g){var A=c.g[_],q=Array.prototype.indexOf.call(A,p,void 0),Z;(Z=0<=q)&&Array.prototype.splice.call(A,q,1),Z&&(Dt(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Te(c,p,_,A){for(var q=0;q<c.length;++q){var Z=c[q];if(!Z.da&&Z.listener==p&&Z.capture==!!_&&Z.ha==A)return q}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),pe={};function hn(c,p,_,A,q){if(Array.isArray(p)){for(var Z=0;Z<p.length;Z++)hn(c,p[Z],_,A,q);return null}return _=Bi(_),c&&c[Lt]?c.K(p,_,g(A)?!!A.capture:!1,q):De(c,p,_,!1,A,q)}function De(c,p,_,A,q,Z){if(!p)throw Error("Invalid event type");var gt=g(q)?!!q.capture:!!q,Ft=Mn(c);if(Ft||(c[Ae]=Ft=new se(c)),_=Ft.add(p,_,A,gt,Z),_.proxy)return _;if(A=mi(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)pt||(q=gt),q===void 0&&(q=!1),c.addEventListener(p.toString(),A,q);else if(c.attachEvent)c.attachEvent(mn(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function mi(){function c(_){return p.call(c.src,c.listener,_)}const p=gn;return c}function dn(c,p,_,A,q){if(Array.isArray(p))for(var Z=0;Z<p.length;Z++)dn(c,p[Z],_,A,q);else A=g(A)?!!A.capture:!!A,_=Bi(_),c&&c[Lt]?(c=c.i,p=String(p).toString(),p in c.g&&(Z=c.g[p],_=Te(Z,_,A,q),-1<_&&(Dt(Z[_]),Array.prototype.splice.call(Z,_,1),Z.length==0&&(delete c.g[p],c.h--)))):c&&(c=Mn(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Te(p,_,A,q)),(_=-1<c?p[c]:null)&&an(_))}function an(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Lt])ee(p.i,c);else{var _=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(_,A,c.capture):p.detachEvent?p.detachEvent(mn(_),A):p.addListener&&p.removeListener&&p.removeListener(A),(_=Mn(p))?(ee(_,c),_.h==0&&(_.src=null,p[Ae]=null)):Dt(c)}}}function mn(c){return c in pe?pe[c]:pe[c]="on"+c}function gn(c,p){if(c.da)c=!0;else{p=new Tt(p,this);var _=c.listener,A=c.ha||c.src;c.fa&&an(c),c=_.call(A,p)}return c}function Mn(c){return c=c[Ae],c instanceof se?c:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bi(c){return typeof c=="function"?c:(c[zn]||(c[zn]=function(p){return c.handleEvent(p)}),c[zn])}function Zt(){ct.call(this),this.i=new se(this),this.M=this,this.F=null}V(Zt,ct),Zt.prototype[Lt]=!0,Zt.prototype.removeEventListener=function(c,p,_,A){dn(this,c,p,_,A)};function Gt(c,p){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new ot(p,c);else if(p instanceof ot)p.target=p.target||c;else{var q=p;p=new ot(A,c),O(p,q)}if(q=!0,_)for(var Z=_.length-1;0<=Z;Z--){var gt=p.g=_[Z];q=pn(gt,A,!0,p)&&q}if(gt=p.g=c,q=pn(gt,A,!0,p)&&q,q=pn(gt,A,!1,p)&&q,_)for(Z=0;Z<_.length;Z++)gt=p.g=_[Z],q=pn(gt,A,!1,p)&&q}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],A=0;A<_.length;A++)Dt(_[A]);delete c.g[p],c.h--}}this.F=null},Zt.prototype.K=function(c,p,_,A){return this.i.add(String(c),p,!1,_,A)},Zt.prototype.L=function(c,p,_,A){return this.i.add(String(c),p,!0,_,A)};function pn(c,p,_,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var q=!0,Z=0;Z<p.length;++Z){var gt=p[Z];if(gt&&!gt.da&&gt.capture==_){var Ft=gt.listener,Ue=gt.ha||gt.src;gt.fa&&ee(c.i,gt),q=Ft.call(Ue,A)!==!1&&q}}return q&&!A.defaultPrevented}function he(c,p,_){if(typeof c=="function")_&&(c=T(c,_));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function ia(c){c.g=he(()=>{c.g=null,c.i&&(c.i=!1,ia(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class uh extends ct{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ia(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(c){ct.call(this),this.h=c,this.g={}}V(hr,ct);var dr=[];function mr(c){Y(c.g,function(p,_){this.g.hasOwnProperty(_)&&an(p)},c),c.g={}}hr.prototype.N=function(){hr.aa.N.call(this),mr(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=m.JSON.stringify,sa=m.JSON.parse,gr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function wo(){}wo.prototype.h=null;function Co(c){return c.h||(c.h=c.i())}function Ro(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qi(){ot.call(this,"d")}V(qi,ot);function Io(){ot.call(this,"c")}V(Io,ot);var gi={},xo=null;function vs(){return xo=xo||new Zt}gi.La="serverreachability";function ra(c){ot.call(this,gi.La,c)}V(ra,ot);function Es(c){const p=vs();Gt(p,new ra(p))}gi.STAT_EVENT="statevent";function Su(c,p){ot.call(this,gi.STAT_EVENT,c),this.stat=p}V(Su,ot);function de(c){const p=vs();Gt(p,new Su(p,c))}gi.Ma="timingevent";function Pe(c,p){ot.call(this,gi.Ma,c),this.size=p}V(Pe,ot);function Me(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Do(c,p,_,A,q,Z){c.info(function(){if(c.g)if(Z)for(var gt="",Ft=Z.split("&"),Ue=0;Ue<Ft.length;Ue++){var Qt=Ft[Ue].split("=");if(1<Qt.length){var Qe=Qt[0];Qt=Qt[1];var je=Qe.split("_");gt=2<=je.length&&je[1]=="type"?gt+(Qe+"="+Qt+"&"):gt+(Qe+"=redacted&")}}else gt=null;else gt=Z;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+p+`
`+_+`
`+gt})}function ch(c,p,_,A,q,Z,gt){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+p+`
`+_+`
`+Z+" "+gt})}function Ts(c,p,_,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+pr(c,_)+(A?" "+A:"")})}function Au(c,p){c.info(function(){return"TIMEOUT: "+p})}qn.prototype.info=function(){};function pr(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var gt=1;gt<q.length;gt++)q[gt]=""}}}}return ri(_)}catch{return p}}var bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pi;function yi(){}V(yi,wo),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},pi=new yi;function yn(c,p,_,A){this.j=c,this.i=p,this.l=_,this.R=A||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Mo={},aa={};function ai(c,p,_){c.L=1,c.v=Tr(Vn(p)),c.m=_,c.P=!0,Gi(c,null)}function Gi(c,p){c.F=Date.now(),yr(c),c.A=Vn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Po(_.i,"t",A),c.C=0,_=c.j.J,c.h=new we,c.g=Bu(c.j,_?p:null,!c.m),0<c.O&&(c.M=new uh(T(c.Y,c,c.g),c.O)),p=c.U,_=c.g,A=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(dr[0]=q.toString()),q=dr);for(var Z=0;Z<q.length;Z++){var gt=hn(_,q[Z],A||p.handleEvent,!1,p.h||p);if(!gt)break;p.g[gt.key]=gt}p=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Es(),Do(c.i,c.u,c.A,c.l,c.R,c.m)}yn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Qn(c)==3?p.j():this.Y(c)},yn.prototype.Y=function(c){try{if(c==this.g)t:{const je=Qn(this.g);var p=this.g.Ba();const Ji=this.g.Z();if(!(3>je)&&(je!=3||this.g&&(this.h.h||this.g.oa()||Vu(this.g)))){this.J||je!=4||p==7||(p==8||0>=Ji?Es(3):Es(2)),Ss(this);var _=this.g.Z();this.X=_;e:if(wu(this)){var A=Vu(this.g);c="";var q=A.length,Z=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ze(this),_i(this);var gt="";break e}this.h.i=new m.TextDecoder}for(p=0;p<q;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(Z&&p==q-1)});A.length=0,this.h.g+=c,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=_==200,ch(this.i,this.u,this.A,this.l,this.R,je,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Ft,Ue=this.g;if((Ft=Ue.g?Ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ft)){var Qt=Ft;break e}}Qt=null}if(_=Qt)Ts(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_r(this,_);else{this.o=!1,this.s=3,de(12),Ze(this),_i(this);break t}}if(this.P){_=!0;let Je;for(;!this.J&&this.C<gt.length;)if(Je=Cu(this,gt),Je==aa){je==4&&(this.s=4,de(14),_=!1),Ts(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==Mo){this.s=4,de(15),Ts(this.i,this.l,gt,"[Invalid Chunk]"),_=!1;break}else Ts(this.i,this.l,Je,null),_r(this,Je);if(wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||gt.length!=0||this.h.h||(this.s=1,de(16),_=!1),this.o=this.o&&_,!_)Ts(this.i,this.l,gt,"[Invalid Chunked Response]"),Ze(this),_i(this);else if(0<gt.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),xr(Qe),Qe.M=!0,de(11))}}else Ts(this.i,this.l,gt,null),_r(this,gt);je==4&&Ze(this),this.o&&!this.J&&(je==4?Pu(this.j,this):(this.o=!1,yr(this)))}else gh(this.g),_==400&&0<gt.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),Ze(this),_i(this)}}}catch{}finally{}};function wu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Cu(c,p){var _=c.C,A=p.indexOf(`
`,_);return A==-1?aa:(_=Number(p.substring(_,A)),isNaN(_)?Mo:(A+=1,A+_>p.length?aa:(p=p.slice(A,A+_),c.C=A+_,p)))}yn.prototype.cancel=function(){this.J=!0,Ze(this)};function yr(c){c.S=Date.now()+c.I,Ru(c,c.I)}function Ru(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Me(T(c.ba,c),p)}function Ss(c){c.B&&(m.clearTimeout(c.B),c.B=null)}yn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Au(this.i,this.A),this.L!=2&&(Es(),de(17)),Ze(this),this.s=2,_i(this)):Ru(this,this.S-c)};function _i(c){c.j.G==0||c.J||Pu(c.j,c)}function Ze(c){Ss(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,mr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function _r(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||Vo(_.h,c))){if(!c.K&&Vo(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)_a(_),pa(_);else break t;qo(_),de(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=Me(T(_.Za,_),6e3));if(1>=la(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Zi(_,11)}else if((c.K||_.g==c)&&_a(_),!W(p))for(q=_.Da.g.parse(p),p=0;p<q.length;p++){let Qt=q[p];if(_.T=Qt[0],Qt=Qt[1],_.G==2)if(Qt[0]=="c"){_.K=Qt[1],_.ia=Qt[2];const Qe=Qt[3];Qe!=null&&(_.la=Qe,_.j.info("VER="+_.la));const je=Qt[4];je!=null&&(_.Aa=je,_.j.info("SVER="+_.Aa));const Ji=Qt[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(A=1.5*Ji,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Je=c.g;if(Je){const wi=Je.g?Je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var Z=A.h;Z.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ua(Z,Z.h),Z.h=null))}if(A.D){const Go=Je.g?Je.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(A.ya=Go,re(A.I,A.D,Go))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var gt=c;if(A.qa=ju(A,A.J?A.ia:null,A.W),gt.K){_n(A.h,gt);var Ft=gt,Ue=A.L;Ue&&(Ft.I=Ue),Ft.B&&(Ss(Ft),yr(Ft)),A.g=gt}else Lu(A);0<_.i.length&&ya(_)}else Qt[0]!="stop"&&Qt[0]!="close"||Zi(_,7);else _.G==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Zi(_,7):Bo(_):Qt[0]!="noop"&&_.l&&_.l.ta(Qt),_.v=0)}}Es(4)}catch{}}var Iu=class{constructor(c,p){this.g=c,this.map=p}};function Fi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function la(c){return c.h?1:c.g?c.g.size:0}function Vo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ua(c,p){c.g?c.g.add(p):c.h=p}function _n(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Fi.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function No(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return j(c.i)}function fh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],_=c.length,A=0;A<_;A++)p.push(c[A]);return p}p=[],_=0;for(A in c)p[_++]=c[A];return p}function ca(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const A in c)p[_++]=A;return p}}}function Oo(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=ca(c),A=fh(c),q=A.length,Z=0;Z<q;Z++)p.call(void 0,A[Z],_&&_[Z],c)}var vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hh(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),q=null;if(0<=A){var Z=c[_].substring(0,A);q=c[_].substring(A+1)}else Z=c[_];p(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Ve(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ve){this.h=c.h,Er(this,c.j),this.o=c.o,this.g=c.g,As(this,c.s),this.l=c.l;var p=c.i,_=new Yi;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Qi(this,_),this.m=c.m}else c&&(p=String(c).match(vr))?(this.h=!1,Er(this,p[1]||"",!0),this.o=Hn(p[2]||""),this.g=Hn(p[3]||"",!0),As(this,p[4]),this.l=Hn(p[5]||"",!0),Qi(this,p[6]||"",!0),this.m=Hn(p[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Ve.prototype.toString=function(){var c=[],p=this.j;p&&c.push(br(p,Lo,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(br(p,Lo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(br(_,_.charAt(0)=="/"?dh:ko,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",br(_,fa)),c.join("")};function Vn(c){return new Ve(c)}function Er(c,p,_){c.j=_?Hn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function As(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Qi(c,p,_){p instanceof Yi?(c.i=p,Du(c.i,c.h)):(_||(p=br(p,mh)),c.i=new Yi(p,c.h))}function re(c,p,_){c.i.set(p,_)}function Tr(c){return re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Hn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function br(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,xu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Lo=/[#\/\?@]/g,ko=/[#\?:]/g,dh=/[#\?]/g,mh=/[#\?@]/g,fa=/#/g;function Yi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Gn(c){c.g||(c.g=new Map,c.h=0,c.i&&hh(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=Yi.prototype,n.add=function(c,p){Gn(this),this.i=null,c=vi(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function Ki(c,p){Gn(c),p=vi(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function $i(c,p){return Gn(c),p=vi(c,p),c.g.has(p)}n.forEach=function(c,p){Gn(this),this.g.forEach(function(_,A){_.forEach(function(q){c.call(p,q,A,this)},this)},this)},n.na=function(){Gn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let A=0;A<p.length;A++){const q=c[A];for(let Z=0;Z<q.length;Z++)_.push(p[A])}return _},n.V=function(c){Gn(this);let p=[];if(typeof c=="string")$i(this,c)&&(p=p.concat(this.g.get(vi(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},n.set=function(c,p){return Gn(this),this.i=null,c=vi(this,c),$i(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},n.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Po(c,p,_){Ki(c,p),0<_.length&&(c.i=null,c.g.set(vi(c,p),j(_)),c.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var A=p[_];const Z=encodeURIComponent(String(A)),gt=this.V(A);for(A=0;A<gt.length;A++){var q=Z;gt[A]!==""&&(q+="="+encodeURIComponent(String(gt[A]))),c.push(q)}}return this.i=c.join("&")};function vi(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Du(c,p){p&&!c.j&&(Gn(c),c.i=null,c.g.forEach(function(_,A){var q=A.toLowerCase();A!=q&&(Ki(this,A),Po(this,q,_))},c)),c.j=p}function Sr(c,p){const _=new qn;if(m.Image){const A=new Image;A.onload=R(Fn,_,"TestLoadImage: loaded",!0,p,A),A.onerror=R(Fn,_,"TestLoadImage: error",!1,p,A),A.onabort=R(Fn,_,"TestLoadImage: abort",!1,p,A),A.ontimeout=R(Fn,_,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function oi(c,p){const _=new qn,A=new AbortController,q=setTimeout(()=>{A.abort(),Fn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(Z=>{clearTimeout(q),Z.ok?Fn(_,"TestPingServer: ok",!0,p):Fn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(q),Fn(_,"TestPingServer: error",!1,p)})}function Fn(c,p,_,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(_)}catch{}}function Ar(){this.g=new gr}function Ei(c,p,_){const A=_||"";try{Oo(c,function(q,Z){let gt=q;g(q)&&(gt=ri(q)),p.push(A+Z+"="+encodeURIComponent(gt))})}catch(q){throw p.push(A+"type="+encodeURIComponent("_badmap")),q}}function ws(c){this.l=c.Ub||null,this.j=c.eb||!1}V(ws,wo),ws.prototype.g=function(){return new Xi(this.l,this.j)},ws.prototype.i=function(c){return function(){return c}}({});function Xi(c,p){Zt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Xi,Zt),n=Xi.prototype,n.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,bi(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ti(this):bi(this),this.readyState==3&&Uo(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ti(this))},n.Qa=function(c){this.g&&(this.response=c,Ti(this))},n.ga=function(){this.g&&Ti(this)};function Ti(c){c.readyState=4,c.l=null,c.j=null,c.v=null,bi(c)}n.setRequestHeader=function(c,p){this.u.append(c,p)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function bi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jo(c){let p="";return Y(c,function(_,A){p+=A,p+=":",p+=_,p+=`\r
`}),p}function Fe(c,p,_){t:{for(A in _){var A=!1;break t}A=!0}A||(_=jo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):re(c,p,_))}function Wt(c){Zt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Wt,Zt);var ha=/^https?$/i,wr=["POST","PUT"];n=Wt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,p,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pi.g(),this.v=this.o?Co(this.o):Co(pi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(Z){Mu(this,Z);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)_.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())_.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(wr,p,void 0))||A||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,gt]of _)this.g.setRequestHeader(Z,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cr(this),this.u=!0,this.g.send(c),this.u=!1}catch(Z){Mu(this,Z)}};function Mu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,da(c),Si(c)}function da(c){c.A||(c.A=!0,Gt(c,"complete"),Gt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Gt(this,"complete"),Gt(this,"abort"),Si(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Si(this,!0)),Wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ma(this):this.bb())},n.bb=function(){ma(this)};function ma(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Qn(c)!=4||c.Z()!=2)){if(c.u&&Qn(c)==4)he(c.Ea,0,c);else if(Gt(c,"readystatechange"),Qn(c)==4){c.h=!1;try{const gt=c.Z();t:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var _;if(!(_=p)){var A;if(A=gt===0){var q=String(c.D).match(vr)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),A=!ha.test(q?q.toLowerCase():"")}_=A}if(_)Gt(c,"complete"),Gt(c,"success");else{c.m=6;try{var Z=2<Qn(c)?c.g.statusText:""}catch{Z=""}c.l=Z+" ["+c.Z()+"]",da(c)}}finally{Si(c)}}}}function Si(c,p){if(c.g){Cr(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Gt(c,"ready");try{_.onreadystatechange=A}catch{}}}function Cr(c){c.I&&(m.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Qn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),sa(p)}};function Vu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gh(c){const p={};c=(c.g&&2<=Qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(W(c[A]))continue;var _=L(c[A]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=p[q]||[];p[q]=Z,Z.push(_)}x(p,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function ga(c){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rr("baseRetryDelayMs",5e3,c),this.cb=Rr("retryDelaySeedMs",1e4,c),this.Wa=Rr("forwardChannelMaxRetries",2,c),this.wa=Rr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(c&&c.concurrentRequestLimit),this.Da=new Ar,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ga.prototype,n.la=8,n.G=1,n.connect=function(c,p,_,A){de(0),this.W=c,this.H=p||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=ju(this,null,this.W),ya(this)};function Bo(c){if(Nu(c),c.G==3){var p=c.U++,_=Vn(c.I);if(re(_,"SID",c.K),re(_,"RID",p),re(_,"TYPE","terminate"),Ir(c,_),p=new yn(c,c.j,p),p.L=2,p.v=Tr(Vn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=Bu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),yr(p)}Uu(c)}function pa(c){c.g&&(xr(c),c.g.cancel(),c.g=null)}function Nu(c){pa(c),c.u&&(m.clearTimeout(c.u),c.u=null),_a(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ya(c){if(!oa(c.h)&&!c.s){c.s=!0;var p=c.Ga;st||M(),ut||(st(),ut=!0),_t.add(p,c),c.B=0}}function ph(c,p){return la(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Me(T(c.Ga,c,p),Ho(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new yn(this,this.j,c);let Z=this.o;if(this.S&&(Z?(Z=w(Z),O(Z,this.S)):Z=this.S),this.m!==null||this.O||(q.H=Z,Z=null),this.P)t:{for(var p=0,_=0;_<this.i.length;_++){e:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=_;break t}if(p===4096||_===this.i.length-1){p=_+1;break t}}p=1e3}else p=1e3;p=Ou(this,q,p),_=Vn(this.I),re(_,"RID",c),re(_,"CVER",22),this.D&&re(_,"X-HTTP-Session-Id",this.D),Ir(this,_),Z&&(this.O?p="headers="+encodeURIComponent(String(jo(Z)))+"&"+p:this.m&&Fe(_,this.m,Z)),ua(this.h,q),this.Ua&&re(_,"TYPE","init"),this.P?(re(_,"$req",p),re(_,"SID","null"),q.T=!0,ai(q,_,null)):ai(q,_,p),this.G=2}}else this.G==3&&(c?zo(this,c):this.i.length==0||oa(this.h)||zo(this))};function zo(c,p){var _;p?_=p.l:_=c.U++;const A=Vn(c.I);re(A,"SID",c.K),re(A,"RID",_),re(A,"AID",c.T),Ir(c,A),c.m&&c.o&&Fe(A,c.m,c.o),_=new yn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Ou(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ua(c.h,_),ai(_,A,p)}function Ir(c,p){c.H&&Y(c.H,function(_,A){re(p,A,_)}),c.l&&Oo({},function(_,A){re(p,A,_)})}function Ou(c,p,_){_=Math.min(c.i.length,_);var A=c.l?T(c.l.Na,c.l,c):null;t:{var q=c.i;let Z=-1;for(;;){const gt=["count="+_];Z==-1?0<_?(Z=q[0].g,gt.push("ofs="+Z)):Z=0:gt.push("ofs="+Z);let Ft=!0;for(let Ue=0;Ue<_;Ue++){let Qt=q[Ue].g;const Qe=q[Ue].map;if(Qt-=Z,0>Qt)Z=Math.max(0,q[Ue].g-100),Ft=!1;else try{Ei(Qe,gt,"req"+Qt+"_")}catch{A&&A(Qe)}}if(Ft){A=gt.join("&");break t}}}return c=c.i.splice(0,_),p.D=c,A}function Lu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;st||M(),ut||(st(),ut=!0),_t.add(p,c),c.v=0}}function qo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Me(T(c.Fa,c),Ho(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Me(T(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),pa(this),ku(this))};function xr(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ku(c){c.g=new yn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Vn(c.qa);re(p,"RID","rpc"),re(p,"SID",c.K),re(p,"AID",c.T),re(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&re(p,"TO",c.ja),re(p,"TYPE","xmlhttp"),Ir(c,p),c.m&&c.o&&Fe(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Tr(Vn(p)),_.m=null,_.P=!0,Gi(_,c)}n.Za=function(){this.C!=null&&(this.C=null,pa(this),qo(this),de(19))};function _a(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Pu(c,p){var _=null;if(c.g==p){_a(c),xr(c),c.g=null;var A=2}else if(Vo(c.h,p))_=p.D,_n(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var q=c.B;A=vs(),Gt(A,new Pe(A,_)),ya(c)}else Lu(c);else if(q=p.s,q==3||q==0&&0<p.X||!(A==1&&ph(c,p)||A==2&&qo(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),q){case 1:Zi(c,5);break;case 4:Zi(c,10);break;case 3:Zi(c,6);break;default:Zi(c,2)}}}function Ho(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Zi(c,p){if(c.j.info("Error code "+p),p==2){var _=T(c.fb,c),A=c.Xa;const q=!A;A=new Ve(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Er(A,"https"),Tr(A),q?Sr(A.toString(),_):oi(A.toString(),_)}else de(2);c.G=0,c.l&&c.l.sa(p),Uu(c),Nu(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Uu(c){if(c.G=0,c.ka=[],c.l){const p=No(c.h);(p.length!=0||c.i.length!=0)&&(k(c.ka,p),k(c.ka,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.ra()}}function ju(c,p,_){var A=_ instanceof Ve?Vn(_):new Ve(_);if(A.g!="")p&&(A.g=p+"."+A.g),As(A,A.s);else{var q=m.location;A=q.protocol,p=p?p+"."+q.hostname:q.hostname,q=+q.port;var Z=new Ve(null);A&&Er(Z,A),p&&(Z.g=p),q&&As(Z,q),_&&(Z.l=_),A=Z}return _=c.D,p=c.ya,_&&p&&re(A,_,p),re(A,"VER",c.la),Ir(c,A),A}function Bu(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Wt(new ws({eb:_})):new Wt(c.pa),p.Ha(c.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}n=zu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function va(){}va.prototype.g=function(c,p){return new vn(c,p)};function vn(c,p){Zt.call(this),this.g=new ga(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!W(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!W(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Ai(this)}V(vn,Zt),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Bo(this.g)},vn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ri(c),c=_);p.i.push(new Iu(p.Ya++,c)),p.G==3&&ya(p)},vn.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,vn.aa.N.call(this)};function qu(c){qi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const _ in p){c=_;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}V(qu,qi);function Hu(){Io.call(this),this.status=1}V(Hu,Io);function Ai(c){this.g=c}V(Ai,zu),Ai.prototype.ua=function(){Gt(this.g,"a")},Ai.prototype.ta=function(c){Gt(this.g,new qu(c))},Ai.prototype.sa=function(c){Gt(this.g,new Hu)},Ai.prototype.ra=function(){Gt(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,Hv=function(){return new va},qv=function(){return vs()},zv=gi,n1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,sf=bs,Hi.COMPLETE="complete",Bv=Hi,Ro.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,Ul=Ro,Wt.prototype.listenOnce=Wt.prototype.L,Wt.prototype.getLastError=Wt.prototype.Ka,Wt.prototype.getLastErrorCode=Wt.prototype.Ba,Wt.prototype.getStatus=Wt.prototype.Z,Wt.prototype.getResponseJson=Wt.prototype.Oa,Wt.prototype.getResponseText=Wt.prototype.oa,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Ha,jv=Wt}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const D2="@firebase/firestore",M2="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Vv("@firebase/firestore");function Ja(){return Jr.logLevel}function yt(n,...t){if(Jr.logLevel<=$t.DEBUG){const i=t.map(j1);Jr.debug(`Firestore (${To}): ${n}`,...i)}}function ys(n,...t){if(Jr.logLevel<=$t.ERROR){const i=t.map(j1);Jr.error(`Firestore (${To}): ${n}`,...i)}}function lo(n,...t){if(Jr.logLevel<=$t.WARN){const i=t.map(j1);Jr.warn(`Firestore (${To}): ${n}`,...i)}}function j1(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,Gv(n,r,i)}function Gv(n,t,i){let r=`FIRESTORE (${To}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw ys(r),new Error(r)}function te(n,t,i,r){let o="Unexpected state";typeof i=="string"?o=i:r=i,n||Gv(t,o,r)}function Nt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends Eo{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class B7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(cn.UNAUTHENTICATED))}shutdown(){}}class z7{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class q7{constructor(t){this.t=t,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){te(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let u=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new nr,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=u;t.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new nr)}},0),h()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(r=>this.i!==t?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string",31837,{l:r}),new Fv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return te(t===null||typeof t=="string",2055,{h:t}),new cn(t)}}class H7{constructor(t,i,r){this.P=t,this.T=i,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class G7{constructor(t,i,r){this.P=t,this.T=i,this.I=r}getToken(){return Promise.resolve(new H7(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class V2{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F7{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,S7(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){te(this.o===void 0,3512);const r=u=>{u.error!=null&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,yt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?i(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new V2(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(te(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new V2(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q7(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let r=0;r<n;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Q7(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<i&&(r+=t.charAt(o[u]%62))}return r}}function jt(n,t){return n<t?-1:n>t?1:0}function i1(n,t){let i=0;for(;i<n.length&&i<t.length;){const r=n.codePointAt(i),o=t.codePointAt(i);if(r!==o){if(r<128&&o<128)return jt(r,o);{const u=Qv(),h=Y7(u.encode(N2(n,i)),u.encode(N2(t,i)));return h!==0?h:jt(r,o)}}i+=r>65535?2:1}return jt(n.length,t.length)}function N2(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function Y7(n,t){for(let i=0;i<n.length&&i<t.length;++i)if(n[i]!==t[i])return jt(n[i],t[i]);return jt(n.length,t.length)}function uo(n,t,i){return n.length===t.length&&n.every((r,o)=>i(r,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=-62135596800,L2=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(t){return He.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),r=Math.floor((t-1e3*i)*L2);return new He(i,r)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new St(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new St(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<O2)throw new St(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new St(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L2}_compareTo(t){return this.seconds===t.seconds?jt(this.nanoseconds,t.nanoseconds):jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-O2;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{static fromTimestamp(t){return new Vt(t)}static min(){return new Vt(new He(0,0))}static max(){return new Vt(new He(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="__name__";class Ni{constructor(t,i,r){i===void 0?i=0:i>t.length&&It(637,{offset:i,range:t.length}),r===void 0?r=t.length-i:r>t.length-i&&It(1746,{length:r,range:t.length-i}),this.segments=t,this.offset=i,this.len=r}get length(){return this.len}isEqual(t){return Ni.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Ni?t.forEach(r=>{i.push(r)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,r=this.limit();i<r;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const r=Math.min(t.length,i.length);for(let o=0;o<r;o++){const u=Ni.compareSegments(t.get(o),i.get(o));if(u!==0)return u}return jt(t.length,i.length)}static compareSegments(t,i){const r=Ni.isNumericId(t),o=Ni.isNumericId(i);return r&&!o?-1:!r&&o?1:r&&o?Ni.extractNumericId(t).compare(Ni.extractNumericId(i)):i1(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return er.fromString(t.substring(4,t.length-2))}}class ge extends Ni{construct(t,i,r){return new ge(t,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const r of t){if(r.indexOf("//")>=0)throw new St(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter(o=>o.length>0))}return new ge(i)}static emptyPath(){return new ge([])}}const K7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Ni{construct(t,i,r){return new sn(t,i,r)}static isValidIdentifier(t){return K7.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k2}static keyField(){return new sn([k2])}static fromServerFormat(t){const i=[];let r="",o=0;const u=()=>{if(r.length===0)throw new St(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new St(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new St(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=y,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new St(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new sn(i)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this.path=t}static fromPath(t){return new wt(ge.fromString(t))}static fromName(t){return new wt(ge.fromString(t).popFirst(5))}static empty(){return new wt(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ge.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ge.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new wt(new ge(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=-1;function $7(n,t){const i=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Vt.fromTimestamp(r===1e9?new He(i+1,0):new He(i,r));return new sr(o,wt.empty(),t)}function X7(n){return new sr(n.readTime,n.key,lu)}class sr{constructor(t,i,r){this.readTime=t,this.documentKey=i,this.largestBatchId=r}static min(){return new sr(Vt.min(),wt.empty(),lu)}static max(){return new sr(Vt.max(),wt.empty(),lu)}}function Z7(n,t){let i=n.readTime.compareTo(t.readTime);return i!==0?i:(i=wt.comparator(n.documentKey,t.documentKey),i!==0?i:jt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class W7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(n){if(n.code!==lt.FAILED_PRECONDITION||n.message!==J7)throw n;yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new at((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(i,u).next(r,o)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof at?i:at.resolve(i)}catch(i){return at.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):at.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):at.reject(i)}static resolve(t){return new at((i,r)=>{i(t)})}static reject(t){return new at((i,r)=>{r(t)})}static waitFor(t){return new at((i,r)=>{let o=0,u=0,h=!1;t.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&i()},y=>r(y))}),h=!0,u===o&&i()})}static or(t){let i=at.resolve(!1);for(const r of t)i=i.next(o=>o?at.resolve(o):r());return i}static forEach(t,i){const r=[];return t.forEach((o,u)=>{r.push(i.call(this,o,u))}),this.waitFor(r)}static mapArray(t,i){return new at((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let y=0;y<u;y++){const g=y;i(t[g]).next(v=>{h[g]=v,++m,m===u&&r(h)},v=>o(v))}})}static doWhile(t,i){return new at((r,o)=>{const u=()=>{t()===!0?i().next(()=>{u()},o):r()};u()})}}function tb(n){const t=n.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function So(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>i.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Hf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=-1;function Gf(n){return n==null}function vf(n){return n===0&&1/n==-1/0}function eb(n){return typeof n=="number"&&Number.isInteger(n)&&!vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="";function nb(n){let t="";for(let i=0;i<n.length;i++)t.length>0&&(t=P2(t)),t=ib(n.get(i),t);return P2(t)}function ib(n,t){let i=t;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":i+="";break;case Kv:i+="";break;default:i+=u}}return i}function P2(n){return n+Kv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(n){let t=0;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t++;return t}function cr(n,t){for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t(i,n[i])}function $v(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t,i){this.comparator=t,this.root=i||nn.EMPTY}insert(t,i){return new Ee(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(t){return new Ee(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nn.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(t){let i=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return i+r.left.size;o<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,r)=>(t(i,r),!1))}toString(){const t=[];return this.inorderTraversal((i,r)=>(t.push(`${i}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Qc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Qc(this.root,t,this.comparator,!0)}}class Qc{constructor(t,i,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=i?r(t.key,i):1,i&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class nn{constructor(t,i,r,o,u){this.key=t,this.value=i,this.color=r??nn.RED,this.left=o??nn.EMPTY,this.right=u??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,r,o,u){return new nn(t??this.key,i??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,i,r),null):u===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let r,o=this;if(i(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(t,o.key)===0){if(o.right.isEmpty())return nn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw It(27949);return t+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(t,i,r,o,u){return this}insert(t,i,r){return new nn(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t){this.comparator=t,this.data=new Ee(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,r)=>(t(i),!1))}forEachInRange(t,i){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;i(o.key)}}forEachWhile(t,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new j2(this.data.getIterator())}getIteratorFrom(t){return new j2(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(r=>{i=i.add(r)}),i}isEqual(t){if(!(t instanceof Ge)||this.size!==t.size)return!1;const i=this.data.getIterator(),r=t.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Ge(this.comparator);return i.data=t,i}}class j2{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.fields=t,t.sort(sn.comparator)}static empty(){return new Bn([])}unionWith(t){let i=new Ge(sn.comparator);for(const r of this.fields)i=i.add(r);for(const r of t)i=i.add(r);return new Bn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return uo(this.fields,t.fields,(i,r)=>i.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Xv("Invalid base64 string: "+u):u}}(t);return new rn(i)}static fromUint8Array(t){const i=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(t);return new rn(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const r=new Uint8Array(i.length);for(let o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const sb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(n){if(te(!!n,39018),typeof n=="string"){let t=0;const i=sb.exec(n);if(te(!!i,46558,{timestamp:n}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ie(n.seconds),nanos:Ie(n.nanos)}}function Ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ar(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="server_timestamp",Jv="__type__",Wv="__previous_value__",t3="__local_write_time__";function z1(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Jv])===null||i===void 0?void 0:i.stringValue)===Zv}function Ff(n){const t=n.mapValue.fields[Wv];return z1(t)?Ff(t):t}function uu(n){const t=rr(n.mapValue.fields[t3].timestampValue);return new He(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t,i,r,o,u,h,m,y,g,v){this.databaseId=t,this.appId=i,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=v}}const Ef="(default)";class cu{constructor(t,i){this.projectId=t,this.database=i||Ef}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(t){return t instanceof cu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="__type__",ab="__max__",Yc={mapValue:{}},n3="__vector__",Tf="value";function or(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?z1(n)?4:lb(n)?9007199254740991:ob(n)?10:11:It(28295,{value:n})}function Ui(n,t){if(n===t)return!0;const i=or(n);if(i!==or(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return uu(n).isEqual(uu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=rr(o.timestampValue),m=rr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(o,u){return ar(o.bytesValue).isEqual(ar(u.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(o,u){return Ie(o.geoPointValue.latitude)===Ie(u.geoPointValue.latitude)&&Ie(o.geoPointValue.longitude)===Ie(u.geoPointValue.longitude)}(n,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ie(o.integerValue)===Ie(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Ie(o.doubleValue),m=Ie(u.doubleValue);return h===m?vf(h)===vf(m):isNaN(h)&&isNaN(m)}return!1}(n,t);case 9:return uo(n.arrayValue.values||[],t.arrayValue.values||[],Ui);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(U2(h)!==U2(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!Ui(h[y],m[y])))return!1;return!0}(n,t);default:return It(52216,{left:n})}}function fu(n,t){return(n.values||[]).find(i=>Ui(i,t))!==void 0}function co(n,t){if(n===t)return 0;const i=or(n),r=or(t);if(i!==r)return jt(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,t.booleanValue);case 2:return function(u,h){const m=Ie(u.integerValue||u.doubleValue),y=Ie(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(n,t);case 3:return B2(n.timestampValue,t.timestampValue);case 4:return B2(uu(n),uu(t));case 5:return i1(n.stringValue,t.stringValue);case 6:return function(u,h){const m=ar(u),y=ar(h);return m.compareTo(y)}(n.bytesValue,t.bytesValue);case 7:return function(u,h){const m=u.split("/"),y=h.split("/");for(let g=0;g<m.length&&g<y.length;g++){const v=jt(m[g],y[g]);if(v!==0)return v}return jt(m.length,y.length)}(n.referenceValue,t.referenceValue);case 8:return function(u,h){const m=jt(Ie(u.latitude),Ie(h.latitude));return m!==0?m:jt(Ie(u.longitude),Ie(h.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return z2(n.arrayValue,t.arrayValue);case 10:return function(u,h){var m,y,g,v;const b=u.fields||{},T=h.fields||{},R=(m=b[Tf])===null||m===void 0?void 0:m.arrayValue,V=(y=T[Tf])===null||y===void 0?void 0:y.arrayValue,j=jt(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return j!==0?j:z2(R,V)}(n.mapValue,t.mapValue);case 11:return function(u,h){if(u===Yc.mapValue&&h===Yc.mapValue)return 0;if(u===Yc.mapValue)return 1;if(h===Yc.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),g=h.fields||{},v=Object.keys(g);y.sort(),v.sort();for(let b=0;b<y.length&&b<v.length;++b){const T=i1(y[b],v[b]);if(T!==0)return T;const R=co(m[y[b]],g[v[b]]);if(R!==0)return R}return jt(y.length,v.length)}(n.mapValue,t.mapValue);default:throw It(23264,{Pe:i})}}function B2(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return jt(n,t);const i=rr(n),r=rr(t),o=jt(i.seconds,r.seconds);return o!==0?o:jt(i.nanos,r.nanos)}function z2(n,t){const i=n.values||[],r=t.values||[];for(let o=0;o<i.length&&o<r.length;++o){const u=co(i[o],r[o]);if(u)return u}return jt(i.length,r.length)}function fo(n){return s1(n)}function s1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=rr(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(i){return ar(i).toBase64()}(n.bytesValue):"referenceValue"in n?function(i){return wt.fromName(i).toString()}(n.referenceValue):"geoPointValue"in n?function(i){return`geo(${i.latitude},${i.longitude})`}(n.geoPointValue):"arrayValue"in n?function(i){let r="[",o=!0;for(const u of i.values||[])o?o=!1:r+=",",r+=s1(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${s1(i.fields[h])}`;return o+"}"}(n.mapValue):It(61005,{value:n})}function rf(n){switch(or(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ff(n);return t?16+rf(t):16;case 5:return 2*n.stringValue.length;case 6:return ar(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+rf(u),0)}(n.arrayValue);case 10:case 11:return function(r){let o=0;return cr(r.fields,(u,h)=>{o+=u.length+rf(h)}),o}(n.mapValue);default:throw It(13486,{value:n})}}function r1(n){return!!n&&"integerValue"in n}function q1(n){return!!n&&"arrayValue"in n}function q2(n){return!!n&&"nullValue"in n}function H2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function af(n){return!!n&&"mapValue"in n}function ob(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[e3])===null||i===void 0?void 0:i.stringValue)===n3}function Kl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return cr(n.mapValue.fields,(i,r)=>t.mapValue.fields[i]=Kl(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(n.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Kl(n.arrayValue.values[i]);return t}return Object.assign({},n)}function lb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ab}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.value=t}static empty(){return new In({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let r=0;r<t.length-1;++r)if(i=(i.mapValue.fields||{})[t.get(r)],!af(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Kl(i)}setAll(t){let i=sn.emptyPath(),r={},o=[];t.forEach((h,m)=>{if(!i.isImmediateParentOf(m)){const y=this.getFieldsMap(i);this.applyChanges(y,r,o),r={},o=[],i=m.popLast()}h?r[m.lastSegment()]=Kl(h):o.push(m.lastSegment())});const u=this.getFieldsMap(i);this.applyChanges(u,r,o)}delete(t){const i=this.field(t.popLast());af(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ui(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=i.mapValue.fields[t.get(r)];af(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[t.get(r)]=o),i=o}return i.mapValue.fields}applyChanges(t,i,r){cr(i,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new In(Kl(this.value))}}function i3(n){const t=[];return cr(n.fields,(i,r)=>{const o=new sn([i]);if(af(r)){const u=i3(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)}),new Bn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t,i,r,o,u,h,m){this.key=t,this.documentType=i,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new fn(t,0,Vt.min(),Vt.min(),Vt.min(),In.empty(),0)}static newFoundDocument(t,i,r,o){return new fn(t,1,i,Vt.min(),r,o,0)}static newNoDocument(t,i){return new fn(t,2,i,Vt.min(),Vt.min(),In.empty(),0)}static newUnknownDocument(t,i){return new fn(t,3,i,Vt.min(),Vt.min(),In.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t,i){this.position=t,this.inclusive=i}}function G2(n,t,i){let r=0;for(let o=0;o<n.position.length;o++){const u=t[o],h=n.position[o];if(u.field.isKeyField()?r=wt.comparator(wt.fromName(h.referenceValue),i.key):r=co(h,i.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function F2(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let i=0;i<n.position.length;i++)if(!Ui(n.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,i="asc"){this.field=t,this.dir=i}}function ub(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{}class qe extends s3{constructor(t,i,r){super(),this.field=t,this.op=i,this.value=r}static create(t,i,r){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,r):new fb(t,i,r):i==="array-contains"?new mb(t,r):i==="in"?new gb(t,r):i==="not-in"?new pb(t,r):i==="array-contains-any"?new yb(t,r):new qe(t,i,r)}static createKeyFieldInFilter(t,i,r){return i==="in"?new hb(t,r):new db(t,r)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(co(i,this.value)):i!==null&&or(this.value)===or(i)&&this.matchesComparison(co(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ji extends s3{constructor(t,i){super(),this.filters=t,this.op=i,this.Te=null}static create(t,i){return new ji(t,i)}matches(t){return r3(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function r3(n){return n.op==="and"}function a3(n){return cb(n)&&r3(n)}function cb(n){for(const t of n.filters)if(t instanceof ji)return!1;return!0}function a1(n){if(n instanceof qe)return n.field.canonicalString()+n.op.toString()+fo(n.value);if(a3(n))return n.filters.map(t=>a1(t)).join(",");{const t=n.filters.map(i=>a1(i)).join(",");return`${n.op}(${t})`}}function o3(n,t){return n instanceof qe?function(r,o){return o instanceof qe&&r.op===o.op&&r.field.isEqual(o.field)&&Ui(r.value,o.value)}(n,t):n instanceof ji?function(r,o){return o instanceof ji&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,h,m)=>u&&o3(h,o.filters[m]),!0):!1}(n,t):void It(19439)}function l3(n){return n instanceof qe?function(i){return`${i.field.canonicalString()} ${i.op} ${fo(i.value)}`}(n):n instanceof ji?function(i){return i.op.toString()+" {"+i.getFilters().map(l3).join(" ,")+"}"}(n):"Filter"}class fb extends qe{constructor(t,i,r){super(t,i,r),this.key=wt.fromName(r.referenceValue)}matches(t){const i=wt.comparator(t.key,this.key);return this.matchesComparison(i)}}class hb extends qe{constructor(t,i){super(t,"in",i),this.keys=u3("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class db extends qe{constructor(t,i){super(t,"not-in",i),this.keys=u3("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function u3(n,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(r=>wt.fromName(r.referenceValue))}class mb extends qe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return q1(i)&&fu(i.arrayValue,this.value)}}class gb extends qe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&fu(this.value.arrayValue,i)}}class pb extends qe{constructor(t,i){super(t,"not-in",i)}matches(t){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!fu(this.value.arrayValue,i)}}class yb extends qe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!q1(i)||!i.arrayValue.values)&&i.arrayValue.values.some(r=>fu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,i=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=i,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Ie=null}}function Q2(n,t=null,i=[],r=[],o=null,u=null,h=null){return new _b(n,t,i,r,o,u,h)}function H1(n){const t=Nt(n);if(t.Ie===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(r=>a1(r)).join(","),i+="|ob:",i+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Gf(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>fo(r)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>fo(r)).join(",")),t.Ie=i}return t.Ie}function G1(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!ub(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if(!o3(n.filters[i],t.filters[i]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!F2(n.startAt,t.startAt)&&F2(n.endAt,t.endAt)}function o1(n){return wt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t,i=null,r=[],o=[],u=null,h="F",m=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function vb(n,t,i,r,o,u,h,m){return new Qf(n,t,i,r,o,u,h,m)}function Yf(n){return new Qf(n)}function Y2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Eb(n){return n.collectionGroup!==null}function $l(n){const t=Nt(n);if(t.Ee===null){t.Ee=[];const i=new Set;for(const u of t.explicitOrderBy)t.Ee.push(u),i.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Ge(sn.comparator);return h.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(t).forEach(u=>{i.has(u.canonicalString())||u.isKeyField()||t.Ee.push(new Sf(u,r))}),i.has(sn.keyField().canonicalString())||t.Ee.push(new Sf(sn.keyField(),r))}return t.Ee}function Oi(n){const t=Nt(n);return t.de||(t.de=Tb(t,$l(n))),t.de}function Tb(n,t){if(n.limitType==="F")return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Sf(o.field,u)});const i=n.endAt?new bf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bf(n.startAt.position,n.startAt.inclusive):null;return Q2(n.path,n.collectionGroup,t,n.filters,n.limit,i,r)}}function l1(n,t,i){return new Qf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,i,n.startAt,n.endAt)}function Kf(n,t){return G1(Oi(n),Oi(t))&&n.limitType===t.limitType}function c3(n){return`${H1(Oi(n))}|lt:${n.limitType}`}function Wa(n){return`Query(target=${function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(o=>l3(o)).join(", ")}]`),Gf(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map(o=>fo(o)).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map(o=>fo(o)).join(",")),`Target(${r})`}(Oi(n))}; limitType=${n.limitType})`}function $f(n,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):wt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,t)&&function(r,o){for(const u of $l(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(n,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(n,t)&&function(r,o){return!(r.startAt&&!function(h,m,y){const g=G2(h,m,y);return h.inclusive?g<=0:g<0}(r.startAt,$l(r),o)||r.endAt&&!function(h,m,y){const g=G2(h,m,y);return h.inclusive?g>=0:g>0}(r.endAt,$l(r),o))}(n,t)}function bb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function f3(n){return(t,i)=>{let r=!1;for(const o of $l(n)){const u=Sb(o,t,i);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function Sb(n,t,i){const r=n.field.isKeyField()?wt.comparator(t.key,i.key):function(u,h,m){const y=h.data.field(u),g=m.data.field(u);return y!==null&&g!==null?co(y,g):It(42886)}(n.field,t,i);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,i){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,i]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,i]);o.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[i]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){cr(this.inner,(i,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return $v(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=new Ee(wt.comparator);function _s(){return Ab}const h3=new Ee(wt.comparator);function jl(...n){let t=h3;for(const i of n)t=t.insert(i.key,i);return t}function d3(n){let t=h3;return n.forEach((i,r)=>t=t.insert(i,r.overlayedDocument)),t}function Xr(){return Xl()}function m3(){return Xl()}function Xl(){return new ea(n=>n.toString(),(n,t)=>n.isEqual(t))}const wb=new Ee(wt.comparator),Cb=new Ge(wt.comparator);function Ht(...n){let t=Cb;for(const i of n)t=t.add(i);return t}const Rb=new Ge(jt);function Ib(){return Rb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(t)?"-0":t}}function g3(n){return{integerValue:""+n}}function xb(n,t){return eb(t)?g3(t):F1(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this._=void 0}}function Db(n,t,i){return n instanceof Af?function(o,u){const h={fields:{[Jv]:{stringValue:Zv},[t3]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&z1(u)&&(u=Ff(u)),u&&(h.fields[Wv]=u),{mapValue:h}}(i,t):n instanceof hu?y3(n,t):n instanceof du?_3(n,t):function(o,u){const h=p3(o,u),m=K2(h)+K2(o.Re);return r1(h)&&r1(o.Re)?g3(m):F1(o.serializer,m)}(n,t)}function Mb(n,t,i){return n instanceof hu?y3(n,t):n instanceof du?_3(n,t):i}function p3(n,t){return n instanceof wf?function(r){return r1(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class Af extends Xf{}class hu extends Xf{constructor(t){super(),this.elements=t}}function y3(n,t){const i=v3(t);for(const r of n.elements)i.some(o=>Ui(o,r))||i.push(r);return{arrayValue:{values:i}}}class du extends Xf{constructor(t){super(),this.elements=t}}function _3(n,t){let i=v3(t);for(const r of n.elements)i=i.filter(o=>!Ui(o,r));return{arrayValue:{values:i}}}class wf extends Xf{constructor(t,i){super(),this.serializer=t,this.Re=i}}function K2(n){return Ie(n.integerValue||n.doubleValue)}function v3(n){return q1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Vb(n,t){return n.field.isEqual(t.field)&&function(r,o){return r instanceof hu&&o instanceof hu||r instanceof du&&o instanceof du?uo(r.elements,o.elements,Ui):r instanceof wf&&o instanceof wf?Ui(r.Re,o.Re):r instanceof Af&&o instanceof Af}(n.transform,t.transform)}class Nb{constructor(t,i){this.version=t,this.transformResults=i}}class Li{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Li}static exists(t){return new Li(void 0,t)}static updateTime(t){return new Li(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function of(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Zf{}function E3(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new b3(n.key,Li.none()):new vu(n.key,n.data,Li.none());{const i=n.data,r=In.empty();let o=new Ge(sn.comparator);for(let u of t.fields)if(!o.has(u)){let h=i.field(u);h===null&&u.length>1&&(u=u.popLast(),h=i.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new fr(n.key,r,new Bn(o.toArray()),Li.none())}}function Ob(n,t,i){n instanceof vu?function(o,u,h){const m=o.value.clone(),y=X2(o.fieldTransforms,u,h.transformResults);m.setAll(y),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(n,t,i):n instanceof fr?function(o,u,h){if(!of(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=X2(o.fieldTransforms,u,h.transformResults),y=u.data;y.setAll(T3(o)),y.setAll(m),u.convertToFoundDocument(h.version,y).setHasCommittedMutations()}(n,t,i):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,i)}function Zl(n,t,i,r){return n instanceof vu?function(u,h,m,y){if(!of(u.precondition,h))return m;const g=u.value.clone(),v=Z2(u.fieldTransforms,y,h);return g.setAll(v),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(n,t,i,r):n instanceof fr?function(u,h,m,y){if(!of(u.precondition,h))return m;const g=Z2(u.fieldTransforms,y,h),v=h.data;return v.setAll(T3(u)),v.setAll(g),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(n,t,i,r):function(u,h,m){return of(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(n,t,i)}function Lb(n,t){let i=null;for(const r of n.fieldTransforms){const o=t.data.field(r.field),u=p3(r.transform,o||null);u!=null&&(i===null&&(i=In.empty()),i.set(r.field,u))}return i||null}function $2(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&uo(r,o,(u,h)=>Vb(u,h))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class vu extends Zf{constructor(t,i,r,o=[]){super(),this.key=t,this.value=i,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fr extends Zf{constructor(t,i,r,o,u=[]){super(),this.key=t,this.data=i,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function T3(n){const t=new Map;return n.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=n.data.field(i);t.set(i,r)}}),t}function X2(n,t,i){const r=new Map;te(n.length===i.length,32656,{Ve:i.length,me:n.length});for(let o=0;o<i.length;o++){const u=n[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,Mb(h,m,i[o]))}return r}function Z2(n,t,i){const r=new Map;for(const o of n){const u=o.transform,h=i.data.field(o.field);r.set(o.field,Db(u,h,t))}return r}class b3 extends Zf{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kb extends Zf{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t,i,r,o){this.batchId=t,this.localWriteTime=i,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,i){const r=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&Ob(u,t,r[o])}}applyToLocalView(t,i){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(i=Zl(r,t,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(i=Zl(r,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const r=m3();return this.mutations.forEach(o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=i.has(o.key)?null:m;const y=E3(h,m);y!==null&&r.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Ht())}isEqual(t){return this.batchId===t.batchId&&uo(this.mutations,t.mutations,(i,r)=>$2(i,r))&&uo(this.baseMutations,t.baseMutations,(i,r)=>$2(i,r))}}class Q1{constructor(t,i,r,o){this.batch=t,this.commitVersion=i,this.mutationResults=r,this.docVersions=o}static from(t,i,r){te(t.mutations.length===r.length,58842,{fe:t.mutations.length,ge:r.length});let o=function(){return wb}();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Q1(t,i,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,Kt;function Bb(n){switch(n){case lt.OK:return It(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return It(15467,{code:n})}}function S3(n){if(n===void 0)return ys("GRPC error has no .code"),lt.UNKNOWN;switch(n){case Le.OK:return lt.OK;case Le.CANCELLED:return lt.CANCELLED;case Le.UNKNOWN:return lt.UNKNOWN;case Le.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case Le.INTERNAL:return lt.INTERNAL;case Le.UNAVAILABLE:return lt.UNAVAILABLE;case Le.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case Le.NOT_FOUND:return lt.NOT_FOUND;case Le.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case Le.ABORTED:return lt.ABORTED;case Le.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case Le.DATA_LOSS:return lt.DATA_LOSS;default:return It(39323,{code:n})}}(Kt=Le||(Le={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new er([4294967295,4294967295],0);function J2(n){const t=Qv().encode(n),i=new Uv;return i.update(t),new Uint8Array(i.digest())}function W2(n){const t=new DataView(n.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new er([i,r],0),new er([o,u],0)]}class Y1{constructor(t,i,r){if(this.bitmap=t,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Bl(`Invalid padding: ${i}`);if(r<0)throw new Bl(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${r}`);if(t.length===0&&i!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${i}`);this.pe=8*t.length-i,this.ye=er.fromNumber(this.pe)}we(t,i,r){let o=t.add(i.multiply(er.fromNumber(r)));return o.compare(zb)===1&&(o=new er([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const i=J2(t),[r,o]=W2(i);for(let u=0;u<this.hashCount;u++){const h=this.we(r,o,u);if(!this.be(h))return!1}return!0}static create(t,i,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Y1(u,o,i);return r.forEach(m=>h.insert(m)),h}insert(t){if(this.pe===0)return;const i=J2(t),[r,o]=W2(i);for(let u=0;u<this.hashCount;u++){const h=this.we(r,o,u);this.Se(h)}}Se(t){const i=Math.floor(t/8),r=t%8;this.bitmap[i]|=1<<r}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,i,r,o,u){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,i,r){const o=new Map;return o.set(t,Eu.createSynthesizedTargetChangeForCurrentChange(t,i,r)),new Jf(Vt.min(),o,new Ee(jt),_s(),Ht())}}class Eu{constructor(t,i,r,o,u){this.resumeToken=t,this.current=i,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,i,r){return new Eu(r,i,Ht(),Ht(),Ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t,i,r,o){this.De=t,this.removedTargetIds=i,this.key=r,this.ve=o}}class A3{constructor(t,i){this.targetId=t,this.Ce=i}}class w3{constructor(t,i,r=rn.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=i,this.resumeToken=r,this.cause=o}}class t_{constructor(){this.Fe=0,this.Me=e_(),this.xe=rn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Ht(),i=Ht(),r=Ht();return this.Me.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:i=i.add(o);break;case 1:r=r.add(o);break;default:It(38017,{changeType:u})}}),new Eu(this.xe,this.Oe,t,i,r)}Qe(){this.Ne=!1,this.Me=e_()}$e(t,i){this.Ne=!0,this.Me=this.Me.insert(t,i)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,te(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class qb{constructor(t){this.ze=t,this.je=new Map,this.He=_s(),this.Je=Kc(),this.Ye=Kc(),this.Ze=new Ee(jt)}Xe(t){for(const i of t.De)t.ve&&t.ve.isFoundDocument()?this.et(i,t.ve):this.tt(i,t.key,t.ve);for(const i of t.removedTargetIds)this.tt(i,t.key,t.ve)}nt(t){this.forEachTarget(t,i=>{const r=this.rt(i);switch(t.state){case 0:this.it(i)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(i);break;case 3:this.it(i)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(i)&&(this.st(i),r.ke(t.resumeToken));break;default:It(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.je.forEach((r,o)=>{this.it(o)&&i(o)})}ot(t){const i=t.targetId,r=t.Ce.count,o=this._t(i);if(o){const u=o.target;if(o1(u))if(r===0){const h=new wt(u.path);this.tt(i,h,fn.newNoDocument(h,Vt.min()))}else te(r===1,20013,{expectedCount:r});else{const h=this.ut(i);if(h!==r){const m=this.ct(t),y=m?this.lt(m,t,h):1;if(y!==0){this.st(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,g)}}}}}ct(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=i;let h,m;try{h=ar(r).toUint8Array()}catch(y){if(y instanceof Xv)return lo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Y1(h,o,u)}catch(y){return lo(y instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(t,i,r){return i.Ce.count===r-this.Tt(t,i.targetId)?0:2}Tt(t,i){const r=this.ze.getRemoteKeysForTarget(i);let o=0;return r.forEach(u=>{const h=this.ze.Pt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.tt(i,u,null),o++)}),o}It(t){const i=new Map;this.je.forEach((u,h)=>{const m=this._t(h);if(m){if(u.current&&o1(m.target)){const y=new wt(m.target.path);this.Et(y).has(h)||this.dt(h,y)||this.tt(h,y,fn.newNoDocument(y,t))}u.Le&&(i.set(h,u.qe()),u.Qe())}});let r=Ht();this.Ye.forEach((u,h)=>{let m=!0;h.forEachWhile(y=>{const g=this._t(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.He.forEach((u,h)=>h.setReadTime(t));const o=new Jf(t,i,this.Ze,this.He,r);return this.He=_s(),this.Je=Kc(),this.Ye=Kc(),this.Ze=new Ee(jt),o}et(t,i){if(!this.it(t))return;const r=this.dt(t,i.key)?2:0;this.rt(t).$e(i.key,r),this.He=this.He.insert(i.key,i),this.Je=this.Je.insert(i.key,this.Et(i.key).add(t)),this.Ye=this.Ye.insert(i.key,this.At(i.key).add(t))}tt(t,i,r){if(!this.it(t))return;const o=this.rt(t);this.dt(t,i)?o.$e(i,1):o.Ue(i),this.Ye=this.Ye.insert(i,this.At(i).delete(t)),this.Ye=this.Ye.insert(i,this.At(i).add(t)),r&&(this.He=this.He.insert(i,r))}removeTarget(t){this.je.delete(t)}ut(t){const i=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let i=this.je.get(t);return i||(i=new t_,this.je.set(t,i)),i}At(t){let i=this.Ye.get(t);return i||(i=new Ge(jt),this.Ye=this.Ye.insert(t,i)),i}Et(t){let i=this.Je.get(t);return i||(i=new Ge(jt),this.Je=this.Je.insert(t,i)),i}it(t){const i=this._t(t)!==null;return i||yt("WatchChangeAggregator","Detected inactive target",t),i}_t(t){const i=this.je.get(t);return i&&i.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new t_),this.ze.getRemoteKeysForTarget(t).forEach(i=>{this.tt(t,i,null)})}dt(t,i){return this.ze.getRemoteKeysForTarget(t).has(i)}}function Kc(){return new Ee(wt.comparator)}function e_(){return new Ee(wt.comparator)}const Hb={asc:"ASCENDING",desc:"DESCENDING"},Gb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fb={and:"AND",or:"OR"};class Qb{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function u1(n,t){return n.useProto3Json||Gf(t)?t:{value:t}}function Cf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function C3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Yb(n,t){return Cf(n,t.toTimestamp())}function ki(n){return te(!!n,49232),Vt.fromTimestamp(function(i){const r=rr(i);return new He(r.seconds,r.nanos)}(n))}function K1(n,t){return c1(n,t).canonicalString()}function c1(n,t){const i=function(o){return new ge(["projects",o.projectId,"databases",o.database])}(n).child("documents");return t===void 0?i:i.child(t)}function R3(n){const t=ge.fromString(n);return te(V3(t),10190,{key:t.toString()}),t}function f1(n,t){return K1(n.databaseId,t.path)}function Cm(n,t){const i=R3(t);if(i.get(1)!==n.databaseId.projectId)throw new St(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+n.databaseId.projectId);if(i.get(3)!==n.databaseId.database)throw new St(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+n.databaseId.database);return new wt(x3(i))}function I3(n,t){return K1(n.databaseId,t)}function Kb(n){const t=R3(n);return t.length===4?ge.emptyPath():x3(t)}function h1(n){return new ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function x3(n){return te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function n_(n,t,i){return{name:f1(n,t),fields:i.value.mapValue.fields}}function $b(n,t){let i;if("targetChange"in t){t.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:It(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(g,v){return g.useProto3Json?(te(v===void 0||typeof v=="string",58123),rn.fromBase64String(v||"")):(te(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),rn.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&function(g){const v=g.code===void 0?lt.UNKNOWN:S3(g.code);return new St(v,g.message||"")}(h);i=new w3(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Cm(n,r.document.name),u=ki(r.document.updateTime),h=r.document.createTime?ki(r.document.createTime):Vt.min(),m=new In({mapValue:{fields:r.document.fields}}),y=fn.newFoundDocument(o,u,h,m),g=r.targetIds||[],v=r.removedTargetIds||[];i=new lf(g,v,y.key,y)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Cm(n,r.document),u=r.readTime?ki(r.readTime):Vt.min(),h=fn.newNoDocument(o,u),m=r.removedTargetIds||[];i=new lf([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Cm(n,r.document),u=r.removedTargetIds||[];i=new lf([],u,o,null)}else{if(!("filter"in t))return It(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new jb(o,u),m=r.targetId;i=new A3(m,h)}}return i}function Xb(n,t){let i;if(t instanceof vu)i={update:n_(n,t.key,t.value)};else if(t instanceof b3)i={delete:f1(n,t.key)};else if(t instanceof fr)i={update:n_(n,t.key,t.data),updateMask:rS(t.fieldMask)};else{if(!(t instanceof kb))return It(16599,{ft:t.type});i={verify:f1(n,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(r=>function(u,h){const m=h.transform;if(m instanceof Af)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof hu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof du)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wf)return{fieldPath:h.field.canonicalString(),increment:m.Re};throw It(20930,{transform:h.transform})}(0,r))),t.precondition.isNone||(i.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:Yb(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:It(27497)}(n,t.precondition)),i}function Zb(n,t){return n&&n.length>0?(te(t!==void 0,14353),n.map(i=>function(o,u){let h=o.updateTime?ki(o.updateTime):ki(u);return h.isEqual(Vt.min())&&(h=ki(u)),new Nb(h,o.transformResults||[])}(i,t))):[]}function Jb(n,t){return{documents:[I3(n,t.path)]}}function Wb(n,t){const i={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=I3(n,o);const u=function(g){if(g.length!==0)return M3(ji.create(g,"and"))}(t.filters);u&&(i.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(v=>function(T){return{field:to(T.field),direction:nS(T.dir)}}(v))}(t.orderBy);h&&(i.structuredQuery.orderBy=h);const m=u1(n,t.limit);return m!==null&&(i.structuredQuery.limit=m),t.startAt&&(i.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{gt:i,parent:o}}function tS(n){let t=Kb(n.parent);const i=n.structuredQuery,r=i.from?i.from.length:0;let o=null;if(r>0){te(r===1,65062);const v=i.from[0];v.allDescendants?o=v.collectionId:t=t.child(v.collectionId)}let u=[];i.where&&(u=function(b){const T=D3(b);return T instanceof ji&&a3(T)?T.getFilters():[T]}(i.where));let h=[];i.orderBy&&(h=function(b){return b.map(T=>function(V){return new Sf(eo(V.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(T))}(i.orderBy));let m=null;i.limit&&(m=function(b){let T;return T=typeof b=="object"?b.value:b,Gf(T)?null:T}(i.limit));let y=null;i.startAt&&(y=function(b){const T=!!b.before,R=b.values||[];return new bf(R,T)}(i.startAt));let g=null;return i.endAt&&(g=function(b){const T=!b.before,R=b.values||[];return new bf(R,T)}(i.endAt)),vb(t,o,h,u,m,"F",y,g)}function eS(n,t){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:o})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function D3(n){return n.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=eo(i.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=eo(i.unaryFilter.field);return qe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=eo(i.unaryFilter.field);return qe.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=eo(i.unaryFilter.field);return qe.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(n):n.fieldFilter!==void 0?function(i){return qe.create(eo(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(i){return ji.create(i.compositeFilter.filters.map(r=>D3(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(i.compositeFilter.op))}(n):It(30097,{filter:n})}function nS(n){return Hb[n]}function iS(n){return Gb[n]}function sS(n){return Fb[n]}function to(n){return{fieldPath:n.canonicalString()}}function eo(n){return sn.fromServerFormat(n.fieldPath)}function M3(n){return n instanceof qe?function(i){if(i.op==="=="){if(H2(i.value))return{unaryFilter:{field:to(i.field),op:"IS_NAN"}};if(q2(i.value))return{unaryFilter:{field:to(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(H2(i.value))return{unaryFilter:{field:to(i.field),op:"IS_NOT_NAN"}};if(q2(i.value))return{unaryFilter:{field:to(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:to(i.field),op:iS(i.op),value:i.value}}}(n):n instanceof ji?function(i){const r=i.getFilters().map(o=>M3(o));return r.length===1?r[0]:{compositeFilter:{op:sS(i.op),filters:r}}}(n):It(54877,{filter:n})}function rS(n){const t=[];return n.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function V3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(t,i,r,o,u=Vt.min(),h=Vt.min(),m=rn.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(t){return new Zs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(t){this.wt=t}}function oS(n){const t=tS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?l1(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.Cn=new uS}addToCollectionParentIndex(t,i){return this.Cn.add(i),at.resolve()}getCollectionParents(t,i){return at.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return at.resolve()}deleteFieldIndex(t,i){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,i){return at.resolve()}getDocumentsMatchingTarget(t,i){return at.resolve(null)}getIndexType(t,i){return at.resolve(0)}getFieldIndexes(t,i){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,i){return at.resolve(sr.min())}getMinOffsetFromCollectionGroup(t,i){return at.resolve(sr.min())}updateCollectionGroup(t,i,r){return at.resolve()}updateIndexEntries(t,i){return at.resolve()}}class uS{constructor(){this.index={}}add(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i]||new Ge(ge.comparator),u=!o.has(r);return this.index[i]=o.add(r),u}has(t){const i=t.lastSegment(),r=t.popLast(),o=this.index[i];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Ge(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},N3=41943040;class wn{static withCacheSize(t){return new wn(t,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(N3,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new ho(0)}static lr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="LruGarbageCollector",cS=1048576;function r_([n,t],[i,r]){const o=jt(n,i);return o===0?jt(t,r):o}class fS{constructor(t){this.Er=t,this.buffer=new Ge(r_),this.dr=0}Ar(){return++this.dr}Rr(t){const i=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();r_(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class hS{constructor(t,i,r){this.garbageCollector=t,this.asyncQueue=i,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){yt(s_,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){So(i)?yt(s_,"Ignoring IndexedDB error during garbage collection: ",i):await bo(i)}await this.mr(3e5)})}}class dS{constructor(t,i){this.gr=t,this.params=i}calculateTargetCount(t,i){return this.gr.pr(t).next(r=>Math.floor(i/100*r))}nthSequenceNumber(t,i){if(i===0)return at.resolve(Hf.le);const r=new fS(i);return this.gr.forEachTarget(t,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(t,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(t,i,r){return this.gr.removeTargets(t,i,r)}removeOrphanedDocuments(t,i){return this.gr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(i_)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i_):this.wr(t,i))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,i){let r,o,u,h,m,y,g;const v=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(t,o))).next(b=>(r=b,m=Date.now(),this.removeTargets(t,r,i))).next(b=>(u=b,y=Date.now(),this.removeOrphanedDocuments(t,r))).next(b=>(g=Date.now(),Ja()<=$t.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${b} documents in `+(g-y)+`ms
Total Duration: ${g-v}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function mS(n,t){return new dS(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.changes=new ea(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,fn.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?at.resolve(r):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t,i,r,o){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,i){let r=null;return this.documentOverlayCache.getOverlay(t,i).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,i))).next(o=>(r!==null&&Zl(r.mutation,o,Bn.empty(),He.now()),o))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.getLocalViewOfDocuments(t,r,Ht()).next(()=>r))}getLocalViewOfDocuments(t,i,r=Ht()){const o=Xr();return this.populateOverlays(t,o,i).next(()=>this.computeViews(t,i,o,r).next(u=>{let h=jl();return u.forEach((m,y)=>{h=h.insert(m,y.overlayedDocument)}),h}))}getOverlayedDocuments(t,i){const r=Xr();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,Ht()))}populateOverlays(t,i,r){const o=[];return r.forEach(u=>{i.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((h,m)=>{i.set(h,m)})})}computeViews(t,i,r,o){let u=_s();const h=Xl(),m=function(){return Xl()}();return i.forEach((y,g)=>{const v=r.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof fr)?u=u.insert(g.key,g):v!==void 0?(h.set(g.key,v.mutation.getFieldMask()),Zl(v.mutation,g,v.mutation.getFieldMask(),He.now())):h.set(g.key,Bn.empty())}),this.recalculateAndSaveOverlays(t,u).next(y=>(y.forEach((g,v)=>h.set(g,v)),i.forEach((g,v)=>{var b;return m.set(g,new pS(v,(b=h.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(t,i){const r=Xl();let o=new Ee((h,m)=>h-m),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(h=>{for(const m of h)m.keys().forEach(y=>{const g=i.get(y);if(g===null)return;let v=r.get(y)||Bn.empty();v=m.applyToLocalView(g,v),r.set(y,v);const b=(o.get(m.batchId)||Ht()).add(y);o=o.insert(m.batchId,b)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),g=y.key,v=y.value,b=m3();v.forEach(T=>{if(!u.has(T)){const R=E3(i.get(T),r.get(T));R!==null&&b.set(T,R),u=u.add(T)}}),h.push(this.documentOverlayCache.saveOverlays(t,g,b))}return at.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,i,r,o){return function(h){return wt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):Eb(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,r,o):this.getDocumentsMatchingCollectionQuery(t,i,r,o)}getNextDocuments(t,i,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,r,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,r.largestBatchId,o-u.size):at.resolve(Xr());let m=lu,y=u;return h.next(g=>at.forEach(g,(v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(v)?at.resolve():this.remoteDocumentCache.getEntry(t,v).next(T=>{y=y.insert(v,T)}))).next(()=>this.populateOverlays(t,g,u)).next(()=>this.computeViews(t,y,g,Ht())).next(v=>({batchId:m,changes:d3(v)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new wt(i)).next(r=>{let o=jl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,i,r,o){const u=i.collectionGroup;let h=jl();return this.indexManager.getCollectionParents(t,u).next(m=>at.forEach(m,y=>{const g=function(b,T){return new Qf(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(i,y.child(u));return this.getDocumentsMatchingCollectionQuery(t,g,r,o).next(v=>{v.forEach((b,T)=>{h=h.insert(b,T)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,i,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,r.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,r,u,o))).next(h=>{u.forEach((y,g)=>{const v=g.getKey();h.get(v)===null&&(h=h.insert(v,fn.newInvalidDocument(v)))});let m=jl();return h.forEach((y,g)=>{const v=u.get(y);v!==void 0&&Zl(v.mutation,g,Bn.empty(),He.now()),$f(i,g)&&(m=m.insert(y,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,i){return at.resolve(this.kr.get(i))}saveBundleMetadata(t,i){return this.kr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}}(i)),at.resolve()}getNamedQuery(t,i){return at.resolve(this.qr.get(i))}saveNamedQuery(t,i){return this.qr.set(i.name,function(o){return{name:o.name,query:oS(o.bundledQuery),readTime:ki(o.readTime)}}(i)),at.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.overlays=new Ee(wt.comparator),this.Qr=new Map}getOverlay(t,i){return at.resolve(this.overlays.get(i))}getOverlays(t,i){const r=Xr();return at.forEach(i,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,i,r){return r.forEach((o,u)=>{this.St(t,i,u)}),at.resolve()}removeOverlaysForBatchId(t,i,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),at.resolve()}getOverlaysForCollection(t,i,r){const o=Xr(),u=i.length+1,h=new wt(i.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return at.resolve(o)}getOverlaysForCollectionGroup(t,i,r,o){let u=new Ee((g,v)=>g-v);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let v=u.get(g.largestBatchId);v===null&&(v=Xr(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=Xr(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,v)=>m.set(g,v)),!(m.size()>=o)););return at.resolve(m)}St(t,i,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Ub(i,r));let u=this.Qr.get(i);u===void 0&&(u=Ht(),this.Qr.set(i,u)),this.Qr.set(i,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,at.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.$r=new Ge(Xe.Ur),this.Kr=new Ge(Xe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,i){const r=new Xe(t,i);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(t,i){t.forEach(r=>this.addReference(r,i))}removeReference(t,i){this.zr(new Xe(t,i))}jr(t,i){t.forEach(r=>this.removeReference(r,i))}Hr(t){const i=new wt(new ge([])),r=new Xe(i,t),o=new Xe(i,t+1),u=[];return this.Kr.forEachInRange([r,o],h=>{this.zr(h),u.push(h.key)}),u}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const i=new wt(new ge([])),r=new Xe(i,t),o=new Xe(i,t+1);let u=Ht();return this.Kr.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(t){const i=new Xe(t,0),r=this.$r.firstAfterOrEqual(i);return r!==null&&t.isEqual(r.key)}}class Xe{constructor(t,i){this.key=t,this.Zr=i}static Ur(t,i){return wt.comparator(t.key,i.key)||jt(t.Zr,i.Zr)}static Wr(t,i){return jt(t.Zr,i.Zr)||wt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.nr=1,this.Xr=new Ge(Xe.Ur)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Pb(u,i,r,o);this.mutationQueue.push(h);for(const m of o)this.Xr=this.Xr.add(new Xe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return at.resolve(h)}lookupMutationBatch(t,i){return at.resolve(this.ei(i))}getNextMutationBatchAfterBatchId(t,i){const r=i+1,o=this.ti(r),u=o<0?0:o;return at.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?B1:this.nr-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const r=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],h=>{const m=this.ei(h.Zr);u.push(m)}),at.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,i){let r=new Ge(jt);return i.forEach(o=>{const u=new Xe(o,0),h=new Xe(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,h],m=>{r=r.add(m.Zr)})}),at.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(t,i){const r=i.path,o=r.length+1;let u=r;wt.isDocumentKey(u)||(u=u.child(""));const h=new Xe(new wt(u),0);let m=new Ge(jt);return this.Xr.forEachWhile(y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(m=m.add(y.Zr)),!0)},h),at.resolve(this.ni(m))}ni(t){const i=[];return t.forEach(r=>{const o=this.ei(r);o!==null&&i.push(o)}),i}removeMutationBatch(t,i){te(this.ri(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return at.forEach(i.mutations,o=>{const u=new Xe(o.key,i.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Xr=r})}sr(t){}containsKey(t,i){const r=new Xe(i,0),o=this.Xr.firstAfterOrEqual(r);return at.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}ri(t,i){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const i=this.ti(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(t){this.ii=t,this.docs=function(){return new Ee(wt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const r=i.key,o=this.docs.get(r),u=o?o.size:0,h=this.ii(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const r=this.docs.get(i);return at.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(i))}getEntries(t,i){let r=_s();return i.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():fn.newInvalidDocument(o))}),at.resolve(r)}getDocumentsMatchingQuery(t,i,r,o){let u=_s();const h=i.path,m=new wt(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:g,value:{document:v}}=y.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||Z7(X7(v),r)<=0||(o.has(v.key)||$f(i,v))&&(u=u.insert(v.key,v.mutableCopy()))}return at.resolve(u)}getAllFromCollectionGroup(t,i,r,o){It(9500)}si(t,i){return at.forEach(this.docs,r=>i(r))}newChangeBuffer(t){return new SS(this)}getSize(t){return at.resolve(this.size)}}class SS extends gS{constructor(t){super(),this.Br=t}applyChanges(t){const i=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?i.push(this.Br.addEntry(t,o)):this.Br.removeEntry(r)}),at.waitFor(i)}getFromCache(t,i){return this.Br.getEntry(t,i)}getAllFromCache(t,i){return this.Br.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(t){this.persistence=t,this.oi=new ea(i=>H1(i),G1),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this._i=0,this.ai=new $1,this.targetCount=0,this.ui=ho.cr()}forEachTarget(t,i){return this.oi.forEach((r,o)=>i(o)),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this._i&&(this._i=i),at.resolve()}Tr(t){this.oi.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ui=new ho(i),this.highestTargetId=i),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,i){return this.Tr(i),this.targetCount+=1,at.resolve()}updateTargetData(t,i){return this.Tr(i),at.resolve()}removeTargetData(t,i){return this.oi.delete(i.target),this.ai.Hr(i.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,i,r){let o=0;const u=[];return this.oi.forEach((h,m)=>{m.sequenceNumber<=i&&r.get(m.targetId)===null&&(this.oi.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),at.waitFor(u).next(()=>o)}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,i){const r=this.oi.get(i)||null;return at.resolve(r)}addMatchingKeys(t,i,r){return this.ai.Gr(i,r),at.resolve()}removeMatchingKeys(t,i,r){this.ai.jr(i,r);const o=this.persistence.referenceDelegate,u=[];return o&&i.forEach(h=>{u.push(o.markPotentiallyOrphaned(t,h))}),at.waitFor(u)}removeMatchingKeysForTargetId(t,i){return this.ai.Hr(i),at.resolve()}getMatchingKeysForTargetId(t,i){const r=this.ai.Yr(i);return at.resolve(r)}containsKey(t,i){return at.resolve(this.ai.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(t,i){this.ci={},this.overlays={},this.li=new Hf(0),this.hi=!1,this.hi=!0,this.Pi=new ES,this.referenceDelegate=t(this),this.Ti=new AS(this),this.indexManager=new lS,this.remoteDocumentCache=function(o){return new bS(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new aS(i),this.Ei=new _S(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new vS,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let r=this.ci[t.toKey()];return r||(r=new TS(i,this.referenceDelegate),this.ci[t.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,i,r){yt("MemoryPersistence","Starting transaction:",t);const o=new wS(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(t,i){return at.or(Object.values(this.ci).map(r=>()=>r.containsKey(t,i)))}}class wS extends W7{constructor(t){super(),this.currentSequenceNumber=t}}class X1{constructor(t){this.persistence=t,this.Vi=new $1,this.mi=null}static fi(t){return new X1(t)}get gi(){if(this.mi)return this.mi;throw It(60996)}addReference(t,i,r){return this.Vi.addReference(r,i),this.gi.delete(r.toString()),at.resolve()}removeReference(t,i,r){return this.Vi.removeReference(r,i),this.gi.add(r.toString()),at.resolve()}markPotentiallyOrphaned(t,i){return this.gi.add(i.toString()),at.resolve()}removeTarget(t,i){this.Vi.Hr(i.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,i.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(t,i))}di(){this.mi=new Set}Ai(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.gi,r=>{const o=wt.fromPath(r);return this.pi(t,o).next(u=>{u||i.removeEntry(o,Vt.min())})}).next(()=>(this.mi=null,i.apply(t)))}updateLimboDocument(t,i){return this.pi(t,i).next(r=>{r?this.gi.delete(i.toString()):this.gi.add(i.toString())})}Ii(t){return 0}pi(t,i){return at.or([()=>at.resolve(this.Vi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ri(t,i)])}}class Rf{constructor(t,i){this.persistence=t,this.yi=new ea(r=>nb(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=mS(this,i)}static fi(t,i){return new Rf(t,i)}di(){}Ai(t){return at.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}pr(t){const i=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>i.next(o=>r+o))}br(t){let i=0;return this.yr(t,r=>{i++}).next(()=>i)}yr(t,i){return at.forEach(this.yi,(r,o)=>this.Dr(t,r,o).next(u=>u?at.resolve():i(o)))}removeTargets(t,i,r){return this.persistence.getTargetCache().removeTargets(t,i,r)}removeOrphanedDocuments(t,i){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(t,h=>this.Dr(t,h,i).next(m=>{m||(r++,u.removeEntry(h,Vt.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,i){return this.yi.set(i,t.currentSequenceNumber),at.resolve()}removeTarget(t,i){const r=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),at.resolve()}removeReference(t,i,r){return this.yi.set(r,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,i){return this.yi.set(i,t.currentSequenceNumber),at.resolve()}Ii(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=rf(t.data.value)),i}Dr(t,i,r){return at.or([()=>this.persistence.Ri(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const o=this.yi.get(i);return at.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,i,r,o){this.targetId=t,this.fromCache=i,this.ds=r,this.As=o}static Rs(t,i){let r=Ht(),o=Ht();for(const u of i.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Z1(t,i.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return ET()?8:tb(_T())>0?6:4}()}initialize(t,i){this.ys=t,this.indexManager=i,this.Vs=!0}getDocumentsMatchingQuery(t,i,r,o){const u={result:null};return this.ws(t,i).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.bs(t,i,o,r).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new CS;return this.Ss(t,i,h).next(m=>{if(u.result=m,this.fs)return this.Ds(t,i,h,m.size)})}).next(()=>u.result)}Ds(t,i,r,o){return r.documentReadCount<this.gs?(Ja()<=$t.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",Wa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),at.resolve()):(Ja()<=$t.DEBUG&&yt("QueryEngine","Query:",Wa(i),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Ja()<=$t.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",Wa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Oi(i))):at.resolve())}ws(t,i){if(Y2(i))return at.resolve(null);let r=Oi(i);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=l1(i,null,"F"),r=Oi(i)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const h=Ht(...u);return this.ys.getDocuments(t,h).next(m=>this.indexManager.getMinOffset(t,r).next(y=>{const g=this.vs(i,m);return this.Cs(i,g,h,y.readTime)?this.ws(t,l1(i,null,"F")):this.Fs(t,g,i,y)}))})))}bs(t,i,r,o){return Y2(i)||o.isEqual(Vt.min())?at.resolve(null):this.ys.getDocuments(t,r).next(u=>{const h=this.vs(i,u);return this.Cs(i,h,r,o)?at.resolve(null):(Ja()<=$t.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Wa(i)),this.Fs(t,h,i,$7(o,lu)).next(m=>m))})}vs(t,i){let r=new Ge(f3(t));return i.forEach((o,u)=>{$f(t,u)&&(r=r.add(u))}),r}Cs(t,i,r,o){if(t.limit===null)return!1;if(r.size!==i.size)return!0;const u=t.limitType==="F"?i.last():i.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,i,r){return Ja()<=$t.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Wa(i)),this.ys.getDocumentsMatchingQuery(t,i,sr.min(),r)}Fs(t,i,r,o){return this.ys.getDocumentsMatchingQuery(t,r,o).next(u=>(i.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="LocalStore",IS=3e8;class xS{constructor(t,i,r,o){this.persistence=t,this.Ms=i,this.serializer=o,this.xs=new Ee(jt),this.Os=new ea(u=>H1(u),G1),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(r)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new yS(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.xs))}}function DS(n,t,i,r){return new xS(n,t,i,r)}async function L3(n,t){const i=Nt(n);return await i.persistence.runTransaction("Handle user change","readonly",r=>{let o;return i.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,i.Ls(t),i.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let y=Ht();for(const g of o){h.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}return i.localDocuments.getDocuments(r,y).next(g=>({ks:g,removedBatchIds:h,addedBatchIds:m}))})})}function MS(n,t){const i=Nt(n);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=i.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,g,v){const b=g.batch,T=b.keys();let R=at.resolve();return T.forEach(V=>{R=R.next(()=>v.getEntry(y,V)).next(j=>{const k=g.docVersions.get(V);te(k!==null,48541),j.version.compareTo(k)<0&&(b.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))})}),R.next(()=>m.mutationQueue.removeMutationBatch(y,b))}(i,r,t,u).next(()=>u.apply(r)).next(()=>i.mutationQueue.performConsistencyCheck(r)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let y=Ht();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(y=y.add(m.batch.mutations[g].key));return y}(t))).next(()=>i.localDocuments.getDocuments(r,o))})}function k3(n){const t=Nt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ti.getLastRemoteSnapshotVersion(i))}function VS(n,t){const i=Nt(n),r=t.snapshotVersion;let o=i.xs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=i.Bs.newChangeBuffer({trackRemovals:!0});o=i.xs;const m=[];t.targetChanges.forEach((v,b)=>{const T=o.get(b);if(!T)return;m.push(i.Ti.removeMatchingKeys(u,v.removedDocuments,b).next(()=>i.Ti.addMatchingKeys(u,v.addedDocuments,b)));let R=T.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(b)!==null?R=R.withResumeToken(rn.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),o=o.insert(b,R),function(j,k,z){return j.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=IS?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(T,R,v)&&m.push(i.Ti.updateTargetData(u,R))});let y=_s(),g=Ht();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&m.push(i.persistence.referenceDelegate.updateLimboDocument(u,v))}),m.push(NS(u,h,t.documentUpdates).next(v=>{y=v.qs,g=v.Qs})),!r.isEqual(Vt.min())){const v=i.Ti.getLastRemoteSnapshotVersion(u).next(b=>i.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(v)}return at.waitFor(m).next(()=>h.apply(u)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,y,g)).next(()=>y)}).then(u=>(i.xs=o,u))}function NS(n,t,i){let r=Ht(),o=Ht();return i.forEach(u=>r=r.add(u)),t.getEntries(n,r).next(u=>{let h=_s();return i.forEach((m,y)=>{const g=u.get(m);y.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Vt.min())?(t.removeEntry(m,y.readTime),h=h.insert(m,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(y),h=h.insert(m,y)):yt(J1,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",y.version)}),{qs:h,Qs:o}})}function OS(n,t){const i=Nt(n);return i.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=B1),i.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function LS(n,t){const i=Nt(n);return i.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return i.Ti.getTargetData(r,t).next(u=>u?(o=u,at.resolve(o)):i.Ti.allocateTargetId(r).next(h=>(o=new Zs(t,h,"TargetPurposeListen",r.currentSequenceNumber),i.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=i.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.xs=i.xs.insert(r.targetId,r),i.Os.set(t,r.targetId)),r})}async function d1(n,t,i){const r=Nt(n),o=r.xs.get(t),u=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!So(h))throw h;yt(J1,`Failed to update sequence numbers for target ${t}: ${h}`)}r.xs=r.xs.remove(t),r.Os.delete(o.target)}function a_(n,t,i){const r=Nt(n);let o=Vt.min(),u=Ht();return r.persistence.runTransaction("Execute query","readwrite",h=>function(y,g,v){const b=Nt(y),T=b.Os.get(v);return T!==void 0?at.resolve(b.xs.get(T)):b.Ti.getTargetData(g,v)}(r,h,Oi(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(h,m.targetId).next(y=>{u=y})}).next(()=>r.Ms.getDocumentsMatchingQuery(h,t,i?o:Vt.min(),i?u:Ht())).next(m=>(kS(r,bb(t),m),{documents:m,$s:u})))}function kS(n,t,i){let r=n.Ns.get(t)||Vt.min();i.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ns.set(t,r)}class o_{constructor(){this.activeTargetIds=Ib()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class PS{constructor(){this.xo=new o_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,r){}addLocalQueryTarget(t,i=!0){return i&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,i,r){this.Oo[t]=i}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new o_,Promise.resolve()}handleUserChange(t,i,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="ConnectivityMonitor";class u_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){yt(l_,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){yt(l_,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c=null;function m1(){return $c===null?$c=function(){return 268435456+Math.round(2147483648*Math.random())}():$c++,"0x"+$c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="RestConnection",jS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BS{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=i+"://"+t.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Ef?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(t,i,r,o,u){const h=m1(),m=this.jo(t,i.toUriEncodedString());yt(Rm,`Sending RPC '${t}' ${h}:`,m,r);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:g}=new URL(m),v=P1(g);return this.Jo(t,m,y,r,v).then(b=>(yt(Rm,`Received RPC '${t}' ${h}: `,b),b),b=>{throw lo(Rm,`RPC '${t}' ${h} failed with error: `,b,"url: ",m,"request:",r),b})}Yo(t,i,r,o,u,h){return this.zo(t,i,r,o,u)}Ho(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+To}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}jo(t,i){const r=jS[t];return`${this.Ko}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class qS extends BS{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,r,o,u){const h=m1();return new Promise((m,y)=>{const g=new jv;g.setWithCredentials(!0),g.listenOnce(Bv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case sf.NO_ERROR:const b=g.getResponseJson();yt(un,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(b)),m(b);break;case sf.TIMEOUT:yt(un,`RPC '${t}' ${h} timed out`),y(new St(lt.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:const T=g.getStatus();if(yt(un,`RPC '${t}' ${h} failed with status:`,T,"response text:",g.getResponseText()),T>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const j=function(z){const W=z.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(W)>=0?W:lt.UNKNOWN}(V.status);y(new St(j,V.message))}else y(new St(lt.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new St(lt.UNAVAILABLE,"Connection failed."));break;default:It(9055,{h_:t,streamId:h,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{yt(un,`RPC '${t}' ${h} completed.`)}});const v=JSON.stringify(o);yt(un,`RPC '${t}' ${h} sending request:`,o),g.send(i,"POST",v,r,15)})}I_(t,i,r){const o=m1(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=Hv(),m=qv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const v=u.join("");yt(un,`Creating RPC '${t}' stream ${o}: ${v}`,y);const b=h.createWebChannel(v,y);this.E_(b);let T=!1,R=!1;const V=new zS({Zo:k=>{R?yt(un,`Not sending because RPC '${t}' stream ${o} is closed:`,k):(T||(yt(un,`Opening RPC '${t}' stream ${o} transport.`),b.open(),T=!0),yt(un,`RPC '${t}' stream ${o} sending:`,k),b.send(k))},Xo:()=>b.close()}),j=(k,z,W)=>{k.listen(z,Q=>{try{W(Q)}catch(et){setTimeout(()=>{throw et},0)}})};return j(b,Ul.EventType.OPEN,()=>{R||(yt(un,`RPC '${t}' stream ${o} transport opened.`),V.__())}),j(b,Ul.EventType.CLOSE,()=>{R||(R=!0,yt(un,`RPC '${t}' stream ${o} transport closed`),V.u_(),this.d_(b))}),j(b,Ul.EventType.ERROR,k=>{R||(R=!0,lo(un,`RPC '${t}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),V.u_(new St(lt.UNAVAILABLE,"The operation could not be completed")))}),j(b,Ul.EventType.MESSAGE,k=>{var z;if(!R){const W=k.data[0];te(!!W,16349);const Q=W,et=(Q==null?void 0:Q.error)||((z=Q[0])===null||z===void 0?void 0:z.error);if(et){yt(un,`RPC '${t}' stream ${o} received error:`,et);const tt=et.status;let Y=function(C){const O=Le[C];if(O!==void 0)return S3(O)}(tt),x=et.message;Y===void 0&&(Y=lt.INTERNAL,x="Unknown error status: "+tt+" with message "+et.message),R=!0,V.u_(new St(Y,x)),b.close()}else yt(un,`RPC '${t}' stream ${o} received:`,W),V.c_(W)}}),j(m,zv.STAT_EVENT,k=>{k.stat===n1.PROXY?yt(un,`RPC '${t}' stream ${o} detected buffering proxy`):k.stat===n1.NOPROXY&&yt(un,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{V.a_()},0),V}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(i=>i===t)}}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){return new Qb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(t,i,r=1e3,o=1.5,u=6e4){this.xi=t,this.timerId=i,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const i=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,i-r);o>0&&yt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="PersistentStream";class U3{constructor(t,i,r,o,u,h,m,y){this.xi=t,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new P3(t,i)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,i){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():i&&i.code===lt.RESOURCE_EXHAUSTED?(ys(i.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):i&&i.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(i)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),i=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===i&&this.z_(r,o)},r=>{t(()=>{const o=new St(lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(t,i){const r=this.G_(this.v_);this.stream=this.H_(t,i),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return yt(c_,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return i=>{this.xi.enqueueAndForget(()=>this.v_===t?i():(yt(c_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HS extends U3{constructor(t,i,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,o,h),this.serializer=u}H_(t,i){return this.connection.I_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const i=$b(this.serializer,t),r=function(u){if(!("targetChange"in u))return Vt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Vt.min():h.readTime?ki(h.readTime):Vt.min()}(t);return this.listener.Y_(i,r)}Z_(t){const i={};i.database=h1(this.serializer),i.addTarget=function(u,h){let m;const y=h.target;if(m=o1(y)?{documents:Jb(u,y)}:{query:Wb(u,y).gt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=C3(u,h.resumeToken);const g=u1(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Vt.min())>0){m.readTime=Cf(u,h.snapshotVersion.toTimestamp());const g=u1(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,t);const r=eS(this.serializer,t);r&&(i.labels=r),this.Q_(i)}X_(t){const i={};i.database=h1(this.serializer),i.removeTarget=t,this.Q_(i)}}class GS extends U3{constructor(t,i,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,o,h),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,i){return this.connection.I_("Write",t,i)}J_(t){return te(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,te(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){te(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const i=Zb(t.writeResults,t.commitTime),r=ki(t.commitTime);return this.listener.ra(r,i)}ia(){const t={};t.database=h1(this.serializer),this.Q_(t)}ta(t){const i={streamToken:this.lastStreamToken,writes:t.map(r=>Xb(this.serializer,r))};this.Q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{}class QS extends FS{constructor(t,i,r,o){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new St(lt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,i,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.zo(t,c1(i,r),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new St(lt.UNKNOWN,u.toString())})}Yo(t,i,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Yo(t,c1(i,r),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new St(lt.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class YS{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ys(i),this.ua=!1):yt("OnlineStateTracker",i)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="RemoteStore";class KS{constructor(t,i,r,o,u){this.localStore=t,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(h=>{r.enqueueAndForget(async()=>{na(this)&&(yt(Wr,"Restarting streams for network reachability change."),await async function(y){const g=Nt(y);g.da.add(4),await Tu(g),g.Va.set("Unknown"),g.da.delete(4),await th(g)}(this))})}),this.Va=new YS(r,o)}}async function th(n){if(na(n))for(const t of n.Aa)await t(!0)}async function Tu(n){for(const t of n.Aa)await t(!1)}function j3(n,t){const i=Nt(n);i.Ea.has(t.targetId)||(i.Ea.set(t.targetId,t),ng(i)?eg(i):Ao(i).N_()&&tg(i,t))}function W1(n,t){const i=Nt(n),r=Ao(i);i.Ea.delete(t),r.N_()&&B3(i,t),i.Ea.size===0&&(r.N_()?r.k_():na(i)&&i.Va.set("Unknown"))}function tg(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vt.min())>0){const i=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ao(n).Z_(t)}function B3(n,t){n.ma.Ke(t),Ao(n).X_(t)}function eg(n){n.ma=new qb({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),Ao(n).start(),n.Va.ca()}function ng(n){return na(n)&&!Ao(n).O_()&&n.Ea.size>0}function na(n){return Nt(n).da.size===0}function z3(n){n.ma=void 0}async function $S(n){n.Va.set("Online")}async function XS(n){n.Ea.forEach((t,i)=>{tg(n,t)})}async function ZS(n,t){z3(n),ng(n)?(n.Va.Pa(t),eg(n)):n.Va.set("Unknown")}async function JS(n,t,i){if(n.Va.set("Online"),t instanceof w3&&t.state===2&&t.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ea.delete(m),o.ma.removeTarget(m))}(n,t)}catch(r){yt(Wr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await If(n,r)}else if(t instanceof lf?n.ma.Xe(t):t instanceof A3?n.ma.ot(t):n.ma.nt(t),!i.isEqual(Vt.min()))try{const r=await k3(n.localStore);i.compareTo(r)>=0&&await function(u,h){const m=u.ma.It(h);return m.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const v=u.Ea.get(g);v&&u.Ea.set(g,v.withResumeToken(y.resumeToken,h))}}),m.targetMismatches.forEach((y,g)=>{const v=u.Ea.get(y);if(!v)return;u.Ea.set(y,v.withResumeToken(rn.EMPTY_BYTE_STRING,v.snapshotVersion)),B3(u,y);const b=new Zs(v.target,y,g,v.sequenceNumber);tg(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(n,i)}catch(r){yt(Wr,"Failed to raise snapshot:",r),await If(n,r)}}async function If(n,t,i){if(!So(t))throw t;n.da.add(1),await Tu(n),n.Va.set("Offline"),i||(i=()=>k3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{yt(Wr,"Retrying IndexedDB access"),await i(),n.da.delete(1),await th(n)})}function q3(n,t){return t().catch(i=>If(n,i,t))}async function eh(n){const t=Nt(n),i=lr(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:B1;for(;WS(t);)try{const o=await OS(t.localStore,r);if(o===null){t.Ia.length===0&&i.k_();break}r=o.batchId,tA(t,o)}catch(o){await If(t,o)}H3(t)&&G3(t)}function WS(n){return na(n)&&n.Ia.length<10}function tA(n,t){n.Ia.push(t);const i=lr(n);i.N_()&&i.ea&&i.ta(t.mutations)}function H3(n){return na(n)&&!lr(n).O_()&&n.Ia.length>0}function G3(n){lr(n).start()}async function eA(n){lr(n).ia()}async function nA(n){const t=lr(n);for(const i of n.Ia)t.ta(i.mutations)}async function iA(n,t,i){const r=n.Ia.shift(),o=Q1.from(r,t,i);await q3(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await eh(n)}async function sA(n,t){t&&lr(n).ea&&await async function(r,o){if(function(h){return Bb(h)&&h!==lt.ABORTED}(o.code)){const u=r.Ia.shift();lr(r).L_(),await q3(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await eh(r)}}(n,t),H3(n)&&G3(n)}async function f_(n,t){const i=Nt(n);i.asyncQueue.verifyOperationInProgress(),yt(Wr,"RemoteStore received new credentials");const r=na(i);i.da.add(3),await Tu(i),r&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.da.delete(3),await th(i)}async function rA(n,t){const i=Nt(n);t?(i.da.delete(2),await th(i)):t||(i.da.add(2),await Tu(i),i.Va.set("Unknown"))}function Ao(n){return n.fa||(n.fa=function(i,r,o){const u=Nt(i);return u.oa(),new HS(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{e_:$S.bind(null,n),n_:XS.bind(null,n),i_:ZS.bind(null,n),Y_:JS.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),ng(n)?eg(n):n.Va.set("Unknown")):(await n.fa.stop(),z3(n))})),n.fa}function lr(n){return n.ga||(n.ga=function(i,r,o){const u=Nt(i);return u.oa(),new GS(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:eA.bind(null,n),i_:sA.bind(null,n),na:nA.bind(null,n),ra:iA.bind(null,n)}),n.Aa.push(async t=>{t?(n.ga.L_(),await eh(n)):(await n.ga.stop(),n.Ia.length>0&&(yt(Wr,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,i,r,o,u){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,r,o,u){const h=Date.now()+r,m=new ig(t,i,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(n,t){if(ys("AsyncQueue",`${t}: ${n}`),So(n))return new St(lt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(t){return new ro(t.comparator)}constructor(t){this.comparator=t?(i,r)=>t(i,r)||wt.comparator(i.key,r.key):(i,r)=>wt.comparator(i.key,r.key),this.keyedMap=jl(),this.sortedSet=new Ee(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,r)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof ro)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const r=new ro;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.pa=new Ee(wt.comparator)}track(t){const i=t.doc.key,r=this.pa.get(i);r?t.type!==0&&r.type===3?this.pa=this.pa.insert(i,t):t.type===3&&r.type!==1?this.pa=this.pa.insert(i,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pa=this.pa.insert(i,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pa=this.pa.remove(i):t.type===1&&r.type===2?this.pa=this.pa.insert(i,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pa=this.pa.insert(i,{type:2,doc:t.doc}):It(63341,{Vt:t,ya:r}):this.pa=this.pa.insert(i,t)}wa(){const t=[];return this.pa.inorderTraversal((i,r)=>{t.push(r)}),t}}class mo{constructor(t,i,r,o,u,h,m,y,g){this.query=t,this.docs=i,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(t,i,r,o,u){const h=[];return i.forEach(m=>{h.push({type:0,doc:m})}),new mo(t,i,ro.emptySet(i),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Kf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,r=t.docChanges;if(i.length!==r.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==r[o].type||!i[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class oA{constructor(){this.queries=d_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const o=Nt(i),u=o.queries;o.queries=d_(),u.forEach((h,m)=>{for(const y of m.Sa)y.onError(r)})})(this,new St(lt.ABORTED,"Firestore shutting down"))}}function d_(){return new ea(n=>c3(n),Kf)}async function F3(n,t){const i=Nt(n);let r=3;const o=t.query;let u=i.queries.get(o);u?!u.Da()&&t.va()&&(r=2):(u=new aA,r=t.va()?0:1);try{switch(r){case 0:u.ba=await i.onListen(o,!0);break;case 1:u.ba=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(h){const m=sg(h,`Initialization of query '${Wa(t.query)}' failed`);return void t.onError(m)}i.queries.set(o,u),u.Sa.push(t),t.Fa(i.onlineState),u.ba&&t.Ma(u.ba)&&rg(i)}async function Q3(n,t){const i=Nt(n),r=t.query;let o=3;const u=i.queries.get(r);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=t.va()?0:1:!u.Da()&&t.va()&&(o=2))}switch(o){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function lA(n,t){const i=Nt(n);let r=!1;for(const o of t){const u=o.query,h=i.queries.get(u);if(h){for(const m of h.Sa)m.Ma(o)&&(r=!0);h.ba=o}}r&&rg(i)}function uA(n,t,i){const r=Nt(n),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(i);r.queries.delete(t)}function rg(n){n.Ca.forEach(t=>{t.next()})}var g1,m_;(m_=g1||(g1={})).xa="default",m_.Cache="cache";class Y3{constructor(t,i,r){this.query=t,this.Oa=i,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new mo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Na?this.La(t)&&(this.Oa.next(t),i=!0):this.ka(t,this.onlineState)&&(this.qa(t),i=!0),this.Ba=t,i}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let i=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),i=!0),i}ka(t,i){if(!t.fromCache||!this.va())return!0;const r=i!=="Offline";return(!this.options.Qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}La(t){if(t.docChanges.length>0)return!0;const i=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}qa(t){t=mo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==g1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(t){this.key=t}}class $3{constructor(t){this.key=t}}class cA{constructor(t,i){this.query=t,this.Ha=i,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ht(),this.mutatedKeys=Ht(),this.Za=f3(t),this.Xa=new ro(this.Za)}get eu(){return this.Ha}tu(t,i){const r=i?i.nu:new h_,o=i?i.Xa:this.Xa;let u=i?i.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((v,b)=>{const T=o.get(v),R=$f(this.query,b)?b:null,V=!!T&&this.mutatedKeys.has(T.key),j=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;T&&R?T.data.isEqual(R.data)?V!==j&&(r.track({type:3,doc:R}),k=!0):this.ru(T,R)||(r.track({type:2,doc:R}),k=!0,(y&&this.Za(R,y)>0||g&&this.Za(R,g)<0)&&(m=!0)):!T&&R?(r.track({type:0,doc:R}),k=!0):T&&!R&&(r.track({type:1,doc:T}),k=!0,(y||g)&&(m=!0)),k&&(R?(h=h.add(R),u=j?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),r.track({type:1,doc:v})}return{Xa:h,nu:r,Cs:m,mutatedKeys:u}}ru(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,r,o){const u=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const h=t.nu.wa();h.sort((v,b)=>function(R,V){const j=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Vt:k})}};return j(R)-j(V)}(v.type,b.type)||this.Za(v.doc,b.doc)),this.iu(r),o=o!=null&&o;const m=i&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,g=y!==this.Ja;return this.Ja=y,h.length!==0||g?{snapshot:new mo(this.query,t.Xa,u,h,t.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new h_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Ht(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const i=[];return t.forEach(r=>{this.Ya.has(r)||i.push(new $3(r))}),this.Ya.forEach(r=>{t.has(r)||i.push(new K3(r))}),i}au(t){this.Ha=t.$s,this.Ya=Ht();const i=this.tu(t.documents);return this.applyChanges(i,!0)}uu(){return mo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ag="SyncEngine";class fA{constructor(t,i,r){this.query=t,this.targetId=i,this.view=r}}class hA{constructor(t){this.key=t,this.cu=!1}}class dA{constructor(t,i,r,o,u,h){this.localStore=t,this.remoteStore=i,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new ea(m=>c3(m),Kf),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ee(wt.comparator),this.Eu=new Map,this.du=new $1,this.Au={},this.Ru=new Map,this.Vu=ho.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function mA(n,t,i=!0){const r=e4(n);let o;const u=r.hu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await X3(r,t,i,!0),o}async function gA(n,t){const i=e4(n);await X3(i,t,!0,!1)}async function X3(n,t,i,r){const o=await LS(n.localStore,Oi(t)),u=o.targetId,h=n.sharedClientState.addLocalQueryTarget(u,i);let m;return r&&(m=await pA(n,t,u,h==="current",o.resumeToken)),n.isPrimaryClient&&i&&j3(n.remoteStore,o),m}async function pA(n,t,i,r,o){n.fu=(b,T,R)=>async function(j,k,z,W){let Q=k.view.tu(z);Q.Cs&&(Q=await a_(j.localStore,k.query,!1).then(({documents:x})=>k.view.tu(x,Q)));const et=W&&W.targetChanges.get(k.targetId),tt=W&&W.targetMismatches.get(k.targetId)!=null,Y=k.view.applyChanges(Q,j.isPrimaryClient,et,tt);return p_(j,k.targetId,Y.ou),Y.snapshot}(n,b,T,R);const u=await a_(n.localStore,t,!0),h=new cA(t,u.$s),m=h.tu(u.documents),y=Eu.createSynthesizedTargetChangeForCurrentChange(i,r&&n.onlineState!=="Offline",o),g=h.applyChanges(m,n.isPrimaryClient,y);p_(n,i,g.ou);const v=new fA(t,i,h);return n.hu.set(t,v),n.Pu.has(i)?n.Pu.get(i).push(t):n.Pu.set(i,[t]),g.snapshot}async function yA(n,t,i){const r=Nt(n),o=r.hu.get(t),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(h=>!Kf(h,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await d1(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),i&&W1(r.remoteStore,o.targetId),p1(r,o.targetId)}).catch(bo)):(p1(r,o.targetId),await d1(r.localStore,o.targetId,!0))}async function _A(n,t){const i=Nt(n),r=i.hu.get(t),o=i.Pu.get(r.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),W1(i.remoteStore,r.targetId))}async function vA(n,t,i){const r=CA(n);try{const o=await function(h,m){const y=Nt(h),g=He.now(),v=m.reduce((R,V)=>R.add(V.key),Ht());let b,T;return y.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=_s(),j=Ht();return y.Bs.getEntries(R,v).next(k=>{V=k,V.forEach((z,W)=>{W.isValidDocument()||(j=j.add(z))})}).next(()=>y.localDocuments.getOverlayedDocuments(R,V)).next(k=>{b=k;const z=[];for(const W of m){const Q=Lb(W,b.get(W.key).overlayedDocument);Q!=null&&z.push(new fr(W.key,Q,i3(Q.value.mapValue),Li.exists(!0)))}return y.mutationQueue.addMutationBatch(R,g,z,m)}).next(k=>{T=k;const z=k.applyToLocalDocumentSet(b,j);return y.documentOverlayCache.saveOverlays(R,k.batchId,z)})}).then(()=>({batchId:T.batchId,changes:d3(b)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(h,m,y){let g=h.Au[h.currentUser.toKey()];g||(g=new Ee(jt)),g=g.insert(m,y),h.Au[h.currentUser.toKey()]=g}(r,o.batchId,i),await bu(r,o.changes),await eh(r.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");i.reject(u)}}async function Z3(n,t){const i=Nt(n);try{const r=await VS(i.localStore,t);t.targetChanges.forEach((o,u)=>{const h=i.Eu.get(u);h&&(te(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?te(h.cu,14607):o.removedDocuments.size>0&&(te(h.cu,42227),h.cu=!1))}),await bu(i,r,t)}catch(r){await bo(r)}}function g_(n,t,i){const r=Nt(n);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const o=[];r.hu.forEach((u,h)=>{const m=h.view.Fa(t);m.snapshot&&o.push(m.snapshot)}),function(h,m){const y=Nt(h);y.onlineState=m;let g=!1;y.queries.forEach((v,b)=>{for(const T of b.Sa)T.Fa(m)&&(g=!0)}),g&&rg(y)}(r.eventManager,t),o.length&&r.lu.Y_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function EA(n,t,i){const r=Nt(n);r.sharedClientState.updateQueryState(t,"rejected",i);const o=r.Eu.get(t),u=o&&o.key;if(u){let h=new Ee(wt.comparator);h=h.insert(u,fn.newNoDocument(u,Vt.min()));const m=Ht().add(u),y=new Jf(Vt.min(),new Map,new Ee(jt),h,m);await Z3(r,y),r.Iu=r.Iu.remove(u),r.Eu.delete(t),og(r)}else await d1(r.localStore,t,!1).then(()=>p1(r,t,i)).catch(bo)}async function TA(n,t){const i=Nt(n),r=t.batch.batchId;try{const o=await MS(i.localStore,t);W3(i,r,null),J3(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await bu(i,o)}catch(o){await bo(o)}}async function bA(n,t,i){const r=Nt(n);try{const o=await function(h,m){const y=Nt(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return y.mutationQueue.lookupMutationBatch(g,m).next(b=>(te(b!==null,37113),v=b.keys(),y.mutationQueue.removeMutationBatch(g,b))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,v,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>y.localDocuments.getDocuments(g,v))})}(r.localStore,t);W3(r,t,i),J3(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await bu(r,o)}catch(o){await bo(o)}}function J3(n,t){(n.Ru.get(t)||[]).forEach(i=>{i.resolve()}),n.Ru.delete(t)}function W3(n,t,i){const r=Nt(n);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(i?u.reject(i):u.resolve(),o=o.remove(t)),r.Au[r.currentUser.toKey()]=o}}function p1(n,t,i=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Pu.get(t))n.hu.delete(r),i&&n.lu.gu(r,i);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(r=>{n.du.containsKey(r)||t4(n,r)})}function t4(n,t){n.Tu.delete(t.path.canonicalString());const i=n.Iu.get(t);i!==null&&(W1(n.remoteStore,i),n.Iu=n.Iu.remove(t),n.Eu.delete(i),og(n))}function p_(n,t,i){for(const r of i)r instanceof K3?(n.du.addReference(r.key,t),SA(n,r)):r instanceof $3?(yt(ag,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,t),n.du.containsKey(r.key)||t4(n,r.key)):It(19791,{pu:r})}function SA(n,t){const i=t.key,r=i.path.canonicalString();n.Iu.get(i)||n.Tu.has(r)||(yt(ag,"New document in limbo: "+i),n.Tu.add(r),og(n))}function og(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const i=new wt(ge.fromString(t)),r=n.Vu.next();n.Eu.set(r,new hA(i)),n.Iu=n.Iu.insert(i,r),j3(n.remoteStore,new Zs(Oi(Yf(i.path)),r,"TargetPurposeLimboResolution",Hf.le))}}async function bu(n,t,i){const r=Nt(n),o=[],u=[],h=[];r.hu.isEmpty()||(r.hu.forEach((m,y)=>{h.push(r.fu(y,t,i).then(g=>{var v;if((g||i)&&r.isPrimaryClient){const b=g?!g.fromCache:(v=i==null?void 0:i.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Z1.Rs(y.targetId,g);u.push(b)}}))}),await Promise.all(h),r.lu.Y_(o),await async function(y,g){const v=Nt(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>at.forEach(g,T=>at.forEach(T.ds,R=>v.persistence.referenceDelegate.addReference(b,T.targetId,R)).next(()=>at.forEach(T.As,R=>v.persistence.referenceDelegate.removeReference(b,T.targetId,R)))))}catch(b){if(!So(b))throw b;yt(J1,"Failed to update sequence numbers: "+b)}for(const b of g){const T=b.targetId;if(!b.fromCache){const R=v.xs.get(T),V=R.snapshotVersion,j=R.withLastLimboFreeSnapshotVersion(V);v.xs=v.xs.insert(T,j)}}}(r.localStore,u))}async function AA(n,t){const i=Nt(n);if(!i.currentUser.isEqual(t)){yt(ag,"User change. New user:",t.toKey());const r=await L3(i.localStore,t);i.currentUser=t,function(u,h){u.Ru.forEach(m=>{m.forEach(y=>{y.reject(new St(lt.CANCELLED,h))})}),u.Ru.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await bu(i,r.ks)}}function wA(n,t){const i=Nt(n),r=i.Eu.get(t);if(r&&r.cu)return Ht().add(r.key);{let o=Ht();const u=i.Pu.get(t);if(!u)return o;for(const h of u){const m=i.hu.get(h);o=o.unionWith(m.view.eu)}return o}}function e4(n){const t=Nt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Z3.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=EA.bind(null,t),t.lu.Y_=lA.bind(null,t.eventManager),t.lu.gu=uA.bind(null,t.eventManager),t}function CA(n){const t=Nt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bA.bind(null,t),t}class xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wf(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,i){return null}Cu(t,i){return null}Du(t){return DS(this.persistence,new RS,t.initialUser,this.serializer)}Su(t){return new O3(X1.fi,this.serializer)}bu(t){return new PS}async terminate(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xf.provider={build:()=>new xf};class RA extends xf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,i){te(this.persistence.referenceDelegate instanceof Rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new hS(r,t.asyncQueue,i)}Su(t){const i=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new O3(r=>Rf.fi(r,i),this.serializer)}}class y1{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AA.bind(null,this.syncEngine),await rA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new oA}()}createDatastore(t){const i=Wf(t.databaseInfo.databaseId),r=function(u){return new qS(u)}(t.databaseInfo);return function(u,h,m,y){return new QS(u,h,m,y)}(t.authCredentials,t.appCheckCredentials,r,i)}createRemoteStore(t){return function(r,o,u,h,m){return new KS(r,o,u,h,m)}(this.localStore,this.datastore,t.asyncQueue,i=>g_(this.syncEngine,i,0),function(){return u_.C()?new u_:new US}())}createSyncEngine(t,i){return function(o,u,h,m,y,g,v){const b=new dA(o,u,h,m,y,g);return v&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){var t,i;await async function(o){const u=Nt(o);yt(Wr,"RemoteStore shutting down."),u.da.add(5),await Tu(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}y1.provider={build:()=>new y1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):ys("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="FirestoreClient";class IA{constructor(t,i,r,o,u){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=Yv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async h=>{yt(ur,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(yt(ur,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=sg(i,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function xm(n,t){n.asyncQueue.verifyOperationInProgress(),yt(ur,"Initializing OfflineComponentProvider");const i=n.configuration;await t.initialize(i);let r=i.initialUser;n.setCredentialChangeListener(async o=>{r.isEqual(o)||(await L3(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function y_(n,t){n.asyncQueue.verifyOperationInProgress();const i=await xA(n);yt(ur,"Initializing OnlineComponentProvider"),await t.initialize(i,n.configuration),n.setCredentialChangeListener(r=>f_(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>f_(t.remoteStore,o)),n._onlineComponents=t}async function xA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){yt(ur,"Using user provided OfflineComponentProvider");try{await xm(n,n._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(o){return o.name==="FirebaseError"?o.code===lt.FAILED_PRECONDITION||o.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;lo("Error using user provided cache. Falling back to memory cache: "+i),await xm(n,new xf)}}else yt(ur,"Using default OfflineComponentProvider"),await xm(n,new RA(void 0));return n._offlineComponents}async function i4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(yt(ur,"Using user provided OnlineComponentProvider"),await y_(n,n._uninitializedComponentsProvider._online)):(yt(ur,"Using default OnlineComponentProvider"),await y_(n,new y1))),n._onlineComponents}function DA(n){return i4(n).then(t=>t.syncEngine)}async function _1(n){const t=await i4(n),i=t.eventManager;return i.onListen=mA.bind(null,t.syncEngine),i.onUnlisten=yA.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=gA.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=_A.bind(null,t.syncEngine),i}function MA(n,t,i={}){const r=new nr;return n.asyncQueue.enqueueAndForget(async()=>function(u,h,m,y,g){const v=new n4({next:T=>{v.xu(),h.enqueueAndForget(()=>Q3(u,b));const R=T.docs.has(m);!R&&T.fromCache?g.reject(new St(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&y&&y.source==="server"?g.reject(new St(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),b=new Y3(Yf(m.path),v,{includeMetadataChanges:!0,Qa:!0});return F3(u,b)}(await _1(n),n.asyncQueue,t,i,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(n,t,i){if(!i)throw new St(lt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function VA(n,t,i,r){if(t===!0&&r===!0)throw new St(lt.INVALID_ARGUMENT,`${n} and ${i} cannot be used together.`)}function v_(n){if(!wt.isDocumentKey(n))throw new St(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E_(n){if(wt.isDocumentKey(n))throw new St(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":It(12329,{type:typeof n})}function ms(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new St(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=lg(n);throw new St(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="firestore.googleapis.com",T_=!0;class b_{constructor(t){var i,r;if(t.host===void 0){if(t.ssl!==void 0)throw new St(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a4,this.ssl=T_}else this.host=t.host,this.ssl=(i=t.ssl)!==null&&i!==void 0?i:T_;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=N3;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<cS)throw new St(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}VA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s4((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new St(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new St(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new St(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nh{constructor(t,i,r,o){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new St(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b_(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B7;switch(r.type){case"firstParty":return new G7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const r=__.get(i);r&&(yt("ComponentProvider","Removing Datastore"),__.delete(i),r.terminate())}(this),Promise.resolve()}}function NA(n,t,i,r={}){var o;n=ms(n,nh);const u=P1(t),h=n._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:n._getEmulatorOptions()}),y=`${t}:${i}`;u&&(dT(`https://${y}`),yT("Firestore",!0)),h.host!==a4&&h.host!==y&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},h),{host:y,ssl:u,emulatorOptions:r});if(!pf(g,m)&&(n._setSettings(g),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=cn.MOCK_USER;else{v=mT(r.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new St(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new cn(T)}n._authCredentials=new z7(new Fv(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ih(this.firestore,t,this._query)}}class xn{constructor(t,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xn(this.firestore,t,this._key)}}class ir extends ih{constructor(t,i,r){super(t,i,Yf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xn(this.firestore,null,new wt(t))}withConverter(t){return new ir(this.firestore,t,this._path)}}function OA(n,t,...i){if(n=gs(n),r4("collection","path",t),n instanceof nh){const r=ge.fromString(t,...i);return E_(r),new ir(n,null,r)}{if(!(n instanceof xn||n instanceof ir))throw new St(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ge.fromString(t,...i));return E_(r),new ir(n.firestore,null,r)}}function sh(n,t,...i){if(n=gs(n),arguments.length===1&&(t=Yv.newId()),r4("doc","path",t),n instanceof nh){const r=ge.fromString(t,...i);return v_(r),new xn(n,null,new wt(r))}{if(!(n instanceof xn||n instanceof ir))throw new St(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ge.fromString(t,...i));return v_(r),new xn(n.firestore,n instanceof ir?n.converter:null,new wt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="AsyncQueue";class A_{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new P3(this,"async_queue_retry"),this.rc=()=>{const r=Im();r&&yt(S_,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=t;const i=Im();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const i=Im();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const i=new nr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!So(t))throw t;yt(S_,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const i=this.sc.then(()=>(this.ec=!0,t().catch(r=>{throw this.Xu=r,this.ec=!1,ys("INTERNAL UNHANDLED ERROR: ",w_(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=i,i}enqueueAfterDelay(t,i,r){this.oc(),this.nc.indexOf(t)>-1&&(i=0);const o=ig.createAndSchedule(this,t,i,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&It(47125,{cc:w_(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const i of this.Zu)if(i.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((i,r)=>i.targetTimeMs-r.targetTimeMs);for(const i of this.Zu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const i=this.Zu.indexOf(t);this.Zu.splice(i,1)}}function w_(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(n){return function(i,r){if(typeof i!="object"||i===null)return!1;const o=i;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(n,["next","error","complete"])}class go extends nh{constructor(t,i,r,o){super(t,i,r,o),this.type="firestore",this._queue=new A_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new A_(t),this._firestoreClient=void 0,await t}}}function LA(n,t){const i=typeof n=="object"?n:R7(),r=typeof n=="string"?n:Ef,o=b7(i,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=fT("firestore");u&&NA(o,...u)}return o}function ug(n){if(n._terminated)throw new St(lt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kA(n),n._firestoreClient}function kA(n){var t,i,r;const o=n._freezeSettings(),u=function(m,y,g,v){return new rb(m,y,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,s4(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new IA(n._authCredentials,n._appCheckCredentials,n._queue,u,n._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t){this._byteString=t}static fromBase64String(t){try{return new po(rn.fromBase64String(t))}catch(i){throw new St(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new po(rn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new St(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new St(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new St(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return jt(this._lat,t._lat)||jt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=/^__.*__$/;class UA{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return this.fieldMask!==null?new fr(t,this.data,this.fieldMask,i,this.fieldTransforms):new vu(t,this.data,i,this.fieldTransforms)}}class o4{constructor(t,i,r){this.data=t,this.fieldMask=i,this.fieldTransforms=r}toMutation(t,i){return new fr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function l4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ic:n})}}class dg{constructor(t,i,r,o,u,h){this.settings=t,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new dg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Vc(t),o}mc(t){var i;const r=(i=this.path)===null||i===void 0?void 0:i.child(t),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Df(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(l4(this.Ic)&&PA.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class jA{constructor(t,i,r){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=r||Wf(t)}bc(t,i,r,o=!1){return new dg({Ic:t,methodName:i,wc:r,path:sn.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u4(n){const t=n._freezeSettings(),i=Wf(n._databaseId);return new jA(n._databaseId,!!t.ignoreUndefinedProperties,i)}function BA(n,t,i,r,o,u={}){const h=n.bc(u.merge||u.mergeFields?2:0,t,i,o);mg("Data must be an object, but it was:",h,r);const m=c4(r,h);let y,g;if(u.merge)y=new Bn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const b of u.mergeFields){const T=v1(t,b,i);if(!h.contains(T))throw new St(lt.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);h4(v,T)||v.push(T)}y=new Bn(v),g=h.fieldTransforms.filter(b=>y.covers(b.field))}else y=null,g=h.fieldTransforms;return new UA(new In(m),y,g)}class ah extends cg{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ah}}function zA(n,t,i,r){const o=n.bc(1,t,i);mg("Data must be an object, but it was:",o,r);const u=[],h=In.empty();cr(r,(y,g)=>{const v=gg(t,y,i);g=gs(g);const b=o.mc(v);if(g instanceof ah)u.push(v);else{const T=oh(g,b);T!=null&&(u.push(v),h.set(v,T))}});const m=new Bn(u);return new o4(h,m,o.fieldTransforms)}function qA(n,t,i,r,o,u){const h=n.bc(1,t,i),m=[v1(t,r,i)],y=[o];if(u.length%2!=0)throw new St(lt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(v1(t,u[T])),y.push(u[T+1]);const g=[],v=In.empty();for(let T=m.length-1;T>=0;--T)if(!h4(g,m[T])){const R=m[T];let V=y[T];V=gs(V);const j=h.mc(R);if(V instanceof ah)g.push(R);else{const k=oh(V,j);k!=null&&(g.push(R),v.set(R,k))}}const b=new Bn(g);return new o4(v,b,h.fieldTransforms)}function oh(n,t){if(f4(n=gs(n)))return mg("Unsupported field value:",t,n),c4(n,t);if(n instanceof cg)return function(r,o){if(!l4(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(r,o){const u=[];let h=0;for(const m of r){let y=oh(m,o.fc(h));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),h++}return{arrayValue:{values:u}}}(n,t)}return function(r,o){if((r=gs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xb(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=He.fromDate(r);return{timestampValue:Cf(o.serializer,u)}}if(r instanceof He){const u=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cf(o.serializer,u)}}if(r instanceof fg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof po)return{bytesValue:C3(o.serializer,r._byteString)};if(r instanceof xn){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:K1(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof hg)return function(h,m){return{mapValue:{fields:{[e3]:{stringValue:n3},[Tf]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return F1(m.serializer,g)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${lg(r)}`)}(n,t)}function c4(n,t){const i={};return $v(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cr(n,(r,o)=>{const u=oh(o,t.Ac(r));u!=null&&(i[r]=u)}),{mapValue:{fields:i}}}function f4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof He||n instanceof fg||n instanceof po||n instanceof xn||n instanceof cg||n instanceof hg)}function mg(n,t,i){if(!f4(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const r=lg(i);throw r==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+r)}}function v1(n,t,i){if((t=gs(t))instanceof rh)return t._internalPath;if(typeof t=="string")return gg(n,t);throw Df("Field path arguments must be of type string or ",n,!1,void 0,i)}const HA=new RegExp("[~\\*/\\[\\]]");function gg(n,t,i){if(t.search(HA)>=0)throw Df(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,i);try{return new rh(...t.split("."))._internalPath}catch{throw Df(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,i)}}function Df(n,t,i,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;i&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||h)&&(y+=" (found",u&&(y+=` in field ${r}`),h&&(y+=` in document ${o}`),y+=")"),new St(lt.INVALID_ARGUMENT,m+n+y)}function h4(n,t){return n.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t,i,r,o,u){this._firestore=t,this._userDataWriter=i,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new GA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(m4("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class GA extends d4{data(){return super.data()}}function m4(n,t){return typeof t=="string"?gg(n,t):t instanceof rh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new St(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QA{convertValue(t,i="none"){switch(or(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ie(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(ar(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw It(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const r={};return cr(t,(o,u)=>{r[o]=this.convertValue(u,i)}),r}convertVectorValue(t){var i,r,o;const u=(o=(r=(i=t.fields)===null||i===void 0?void 0:i[Tf].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>Ie(h.doubleValue));return new hg(u)}convertGeoPoint(t){return new fg(Ie(t.latitude),Ie(t.longitude))}convertArray(t,i){return(t.values||[]).map(r=>this.convertValue(r,i))}convertServerTimestamp(t,i){switch(i){case"previous":const r=Ff(t);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(uu(t));default:return null}}convertTimestamp(t){const i=rr(t);return new He(i.seconds,i.nanos)}convertDocumentKey(t,i){const r=ge.fromString(t);te(V3(r),9688,{name:t});const o=new cu(r.get(1),r.get(3)),u=new wt(r.popFirst(5));return o.isEqual(i)||ys(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(n,t,i){let r;return r=n?n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class g4 extends d4{constructor(t,i,r,o,u,h){super(t,i,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const r=this._document.data.field(m4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}}class uf extends g4{data(t={}){return super.data(t)}}class KA{constructor(t,i,r,o){this._firestore=t,this._userDataWriter=i,this._snapshot=o,this.metadata=new zl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(r=>{t.call(i,new uf(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new St(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const y=new uf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new uf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),v=h.indexOf(m.doc.key)),{type:$A(m.type),doc:y,oldIndex:g,newIndex:v}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function $A(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n){n=ms(n,xn);const t=ms(n.firestore,go);return MA(ug(t),n._key).then(i=>_4(t,n,i))}class p4 extends QA{constructor(t){super(),this.firestore=t}convertBytes(t){return new po(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new xn(this.firestore,null,i)}}function ZA(n,t,i,...r){n=ms(n,xn);const o=ms(n.firestore,go),u=u4(o);let h;return h=typeof(t=gs(t))=="string"||t instanceof rh?qA(u,"updateDoc",n._key,t,i,r):zA(u,"updateDoc",n._key,t),y4(o,[h.toMutation(n._key,Li.exists(!0))])}function JA(n,t){const i=ms(n.firestore,go),r=sh(n),o=YA(n.converter,t);return y4(i,[BA(u4(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Li.exists(!1))]).then(()=>r)}function WA(n,...t){var i,r,o;n=gs(n);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof t[h]!="object"||C_(t[h])||(u=t[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(C_(t[h])){const b=t[h];t[h]=(i=b.next)===null||i===void 0?void 0:i.bind(b),t[h+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),t[h+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let y,g,v;if(n instanceof xn)g=ms(n.firestore,go),v=Yf(n._key.path),y={next:b=>{t[h]&&t[h](_4(g,n,b))},error:t[h+1],complete:t[h+2]};else{const b=ms(n,ih);g=ms(b.firestore,go),v=b._query;const T=new p4(g);y={next:R=>{t[h]&&t[h](new KA(g,T,b,R))},error:t[h+1],complete:t[h+2]},FA(n._query)}return function(T,R,V,j){const k=new n4(j),z=new Y3(R,k,V);return T.asyncQueue.enqueueAndForget(async()=>F3(await _1(T),z)),()=>{k.xu(),T.asyncQueue.enqueueAndForget(async()=>Q3(await _1(T),z))}}(ug(g),v,m,y)}function y4(n,t){return function(r,o){const u=new nr;return r.asyncQueue.enqueueAndForget(async()=>vA(await DA(r),o,u)),u.promise}(ug(n),t)}function _4(n,t,i){const r=i.docs.get(t._key),o=new p4(n);return new g4(n,o,t._key,r,new zl(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(o){To=o})(C7),_f(new au("firestore",(r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new go(new q7(r.getProvider("auth-internal")),new F7(h,r.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new St(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(g.options.projectId,v)}(h,o),h);return u=Object.assign({useFetchStreams:i},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),so(D2,M2,t),so(D2,M2,"esm2017")})();const t8={apiKey:"AIzaSyA1YHZuK7xQzrGf2sVPo8Qax__FqLaFg_g",authDomain:"boop-chat.firebaseapp.com",projectId:"boop-chat",storageBucket:"boop-chat.firebasestorage.app",messagingSenderId:"86390385381",appId:"1:86390385381:web:899e240ed5dedab2a8c20c",measurementId:"G-R49YGVYMFQ"},e8=Lv(t8),lh=LA(e8),n8=async n=>(await JA(OA(lh,"sessions"),n)).id,i8=async n=>{const t=await XA(sh(lh,"sessions",n));return t.exists()?(console.log("The data has been found at Firestore!"),t.data()):(console.log("The data doesn't exist at Firestore!"),null)},s8=async(n,t)=>{ZA(sh(lh,"sessions",n),t)},r8=async(n,t,i)=>{const r=sh(lh,"sessions",n),o=WA(r,async u=>{var m;if(!u.exists())return;const h=u.data();h.receiverDescription&&((m=h.receiverCandidates)==null?void 0:m.length)>0&&(console.log("Receiver info available:",h),i.current=h.receiverName,t(h),o())});return o},R_=async(n,t,i,r,o,u,h,m,y)=>{console.log(t.current),t.current.onicecandidate=v=>{v.candidate?(console.log("Ice candidate found! Candidate = ",v.candidate),console.log(u.current),u.current.push(v.candidate.toJSON())):(console.log("The ice gathering state might have been completed by this time!"),console.log("State = ",t.current.iceGatheringState))},t.current.onicecandidateerror=v=>{console.warn("ICE candidate error:",v.errorCode,v.port,v.url)};const g=t.current.getConfiguration();if(console.log("ICE servers configured on this PC:",g.iceServers),n==="sender"){t.current.addTransceiver("video",{direction:"sendrecv"}),t.current.addTransceiver("audio",{direction:"sendrecv"}),i.current=t.current.createDataChannel("chat"),r.current=t.current.createDataChannel("image"),o.current=t.current.createDataChannel("video"),i.current.onopen=()=>{console.log("The data channel has been established!"),h(!0)},r.current.onopen=()=>{console.log("The image channel has been established!")},o.current.onopen=()=>{console.log("The video channel has been established!")};let v=await t.current.createOffer();console.log("The offer has been created!"),await t.current.setLocalDescription(v),console.log("The local description has been added!")}else{console.log(t.current);let v=await i8(y);if(!v)return null;m.current=v.senderName,await a8(t,v),console.log("The state of the peer connection = ",t.current.iceGatheringState)}console.log("The initial setup of the connection has been established.")},a8=async(n,t)=>{console.log(t.senderDescription),await n.current.setRemoteDescription(t.senderDescription),console.log("The remote description has been added!"),n.current.getTransceivers().forEach(o=>{o.direction="sendrecv"});let r=await n.current.createAnswer();console.log("The answer has been created!"),await n.current.setLocalDescription(r),console.log("The local description has been added!");for(const o of t.senderCandidates)try{await n.current.addIceCandidate(o)}catch(u){console.error("Error adding ICE candidate:",u)}};async function o8(n,t,i,r){console.log("Starting the createLink function! At the beginning of the function, the state = ",n.iceGatheringState),console.log("The iceCandidate object looks like this: ",t.current);let o=await n8({senderName:i,senderDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},senderCandidates:t.current,receiverName:"",receiverDescription:"",receiverCandidates:""});return console.log("The session has been added to Firebase by the sender! Now, waiting for the receiver!"),r8(o,async u=>{await n.current.setRemoteDescription(new RTCSessionDescription(u.receiverDescription));for(const h of u.receiverCandidates)await n.current.addIceCandidate(new RTCIceCandidate(h))},r),o}async function l8(n,t,i,r){return console.log("After the waiting, the state = ",n.current.iceGatheringState),await s8(r,{receiverName:i,receiverDescription:{type:n.current.localDescription.type,sdp:n.current.localDescription.sdp},receiverCandidates:t.current}),"success"}const u8=new URLSearchParams(window.location.search),Ks=u8.get("link"),c8=()=>{const{peerConnection:n,iceCandidates:t,dataChannel:i,imageChannel:r,videoChannel:o,peerName:u,setConnected:h}=X.useContext(Dn),{showNotification:m}=_u(),[y,g]=X.useState(!1),v=X.useRef(null);function b(R){R.preventDefault(),navigator.clipboard.writeText(R.target.elements.link.value),m("The link has been copied!")}const T=async R=>{if(R.preventDefault(),g(!0),Ks){let V=await l8(n,t,v.current.value,Ks);console.log(V),V?V=="success"&&(n.current.ondatachannel=j=>{j.channel.label==="chat"&&(i.current=j.channel,console.log("The data channel has been established!"),h(!0)),j.channel.label==="image"&&(r.current=j.channel,console.log("The image channel has been established!")),j.channel.label==="video"&&(o.current=j.channel,console.log("The video channel has been established!"))}):alert("The link you gave doesn't exist.")}else{let V=await o8(n,t,v.current.value,u);v.current.value=`https://www.mukesharyal.com.np/boop?link=${V}`,v.current.disabled=!0,navigator.clipboard.writeText(v.current.value),m("The link has been copied!")}};return X.useEffect(()=>{R_(Ks?"receiver":"sender",n,i,r,o,t,h,u,Ks)},[]),I.jsxs(I.Fragment,{children:[I.jsx($E,{}),I.jsx("main",{className:Ll.mainContainer,children:I.jsx("section",{className:Ll.inputCard,children:y?I.jsxs(I.Fragment,{children:[I.jsx("div",{className:Ll.loaderWrapper,children:I.jsx("div",{className:Ll.loader})}),I.jsx("h1",{children:Ks?"Joining the chat":"Waiting for other person to join"}),!Ks&&I.jsxs("form",{onSubmit:b,children:[I.jsx("input",{autoFocus:!0,spellCheck:!1,autoComplete:"off",name:"link",ref:v,title:"Copy this link",className:Ll.linkInput}),I.jsx("br",{}),I.jsx("button",{name:"copyLinkButton",children:"Copy Link"})]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("h1",{children:["Welcome to Boop.",I.jsx("br",{}),"Let's Get Started!"]}),I.jsxs("form",{onSubmit:T,children:[I.jsx("input",{name:"name",required:!0,minLength:2,maxLength:20,autoComplete:"off",type:"text",spellCheck:!1,placeholder:"Your Name",title:"Enter your name",id:"name",ref:v}),I.jsx("br",{}),Ks?I.jsx("button",{type:"submit",children:"Join Chat"}):I.jsx("button",{type:"submit",children:"Create Link"})]})]})})})]})},f8="_chatPage_1bc0h_1",h8="_videoContainer_1bc0h_6",d8="_chatContainer_1bc0h_11",m8="_shown_1bc0h_26",Xc={chatPage:f8,videoContainer:h8,chatContainer:d8,shown:m8},g8="_actionList_1aynh_1",p8={actionList:g8};function y8(){const n=xe.c(25);console.log("Actions List rendered!");const{dataChannel:t}=X.useContext(Dn),{selectedMessage:i}=X.useContext(si),r=Pt(v8),o=Pt(_8),{showNotification:u}=_u();let h;n[0]!==i.current.content||n[1]!==i.current.type||n[2]!==u?(h=()=>{i.current.type==="text"?(navigator.clipboard.writeText(i.current.content),u("The message has been copied!")):u("This message cannot be copied!")},n[0]=i.current.content,n[1]=i.current.type,n[2]=u,n[3]=h):h=n[3];const m=h;let y;n[4]!==i.current||n[5]!==r?(y=()=>{r(i.current)},n[4]=i.current,n[5]=r,n[6]=y):y=n[6];const g=y;let v;n[7]!==t||n[8]!==o||n[9]!==i.current.receivedId||n[10]!==i.current.sentId?(v=()=>{if(i.current.sentId===null)o(i.current.sentId,i.current.receivedId);else{const Q={type:"delete",sentId:i.current.sentId};t.current.send(JSON.stringify(Q))}},n[7]=t,n[8]=o,n[9]=i.current.receivedId,n[10]=i.current.sentId,n[11]=v):v=n[11];const b=v;let T;n[12]===Symbol.for("react.memo_cache_sentinel")?(T=I.jsxs("svg",{fill:"#000000",width:30,height:30,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[I.jsx("title",{children:"reply"}),I.jsx("path",{d:"M3.488 15.136q0 0.96 0.8 1.472l10.72 7.136q0.416 0.288 0.896 0.32t0.928-0.224 0.704-0.672 0.256-0.896v-3.584q3.456 0 6.208 1.984t3.872 5.152q0.64-1.792 0.64-3.552 0-2.912-1.44-5.376t-3.904-3.904-5.376-1.44v-3.584q0-0.48-0.256-0.896t-0.704-0.672-0.928-0.224-0.896 0.32l-10.72 7.136q-0.8 0.512-0.8 1.504z"})]}),n[12]=T):T=n[12];let R;n[13]!==g?(R=I.jsxs("li",{onClick:g,children:[T,"Reply"]}),n[13]=g,n[14]=R):R=n[14];let V;n[15]===Symbol.for("react.memo_cache_sentinel")?(V=I.jsxs("svg",{width:30,height:30,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[I.jsx("path",{d:"M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z",fill:"#292D32"}),I.jsx("path",{d:"M17.0998 2H12.8998C9.81668 2 8.37074 3.09409 8.06951 5.73901C8.00649 6.29235 8.46476 6.75 9.02167 6.75H11.0998C15.2998 6.75 17.2498 8.7 17.2498 12.9V14.9781C17.2498 15.535 17.7074 15.9933 18.2608 15.9303C20.9057 15.629 21.9998 14.1831 21.9998 11.1V6.9C21.9998 3.4 20.5998 2 17.0998 2Z",fill:"#292D32"})]}),n[15]=V):V=n[15];let j;n[16]!==m?(j=I.jsxs("li",{onClick:m,children:[V,"Copy"]}),n[16]=m,n[17]=j):j=n[17];let k;n[18]===Symbol.for("react.memo_cache_sentinel")?(k=I.jsx("svg",{width:30,height:30,viewBox:"-0.5 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:I.jsx("g",{id:"out",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:I.jsx("path",{d:"M4.91666667,14.8888889 C4.91666667,15.3571429 5.60416667,16 6.0625,16 L12.9375,16 C13.3958333,16 14.0833333,15.3571429 14.0833333,14.8888889 L14.0833333,6 L4.91666667,6 L4.91666667,14.8888889 L4.91666667,14.8888889 L4.91666667,14.8888889 Z M15,3.46500003 L12.5555556,3.46500003 L11.3333333,2 L7.66666667,2 L6.44444444,3.46500003 L4,3.46500003 L4,4.93000007 L15,4.93000007 L15,3.46500003 L15,3.46500003 L15,3.46500003 Z",id:"path",fill:"#000000","sketch:type":"MSShapeGroup"})})}),n[18]=k):k=n[18];let z;n[19]!==b?(z=I.jsxs("li",{onClick:b,children:[k,"Delete"]}),n[19]=b,n[20]=z):z=n[20];let W;return n[21]!==R||n[22]!==j||n[23]!==z?(W=I.jsxs("ul",{className:p8.actionList,children:[R,j,z]}),n[21]=R,n[22]=j,n[23]=z,n[24]=W):W=n[24],W}function _8(n){return n.removeMessage}function v8(n){return n.setReplying}const E8="_reactionList_18lz1_1",T8="_selectedReaction_18lz1_28",I_={reactionList:E8,selectedReaction:T8},b8=["👍","❤️","😆","😮","😢","😡"];function S8(){const n=xe.c(12);console.log("Reactions list rendered!");const{dataChannel:t}=X.useContext(Dn),{selectedMessage:i,pointerPosition:r}=X.useContext(si);let o=r.current.y-70,u=r.current.x-90;o<0&&(o=10),u<0&&(u=10);let h;n[0]!==t||n[1]!==i?(h=b=>{b===i.current.reaction&&(b=-1);const R={type:"reaction",id:i.current.receivedId,reaction:b};t.current.send(JSON.stringify(R))},n[0]=t,n[1]=i,n[2]=h):h=n[2];const m=h;let y;n[3]!==u||n[4]!==o?(y={top:o,left:u},n[3]=u,n[4]=o,n[5]=y):y=n[5];let g;n[6]!==i||n[7]!==m?(g=b8.map((b,T)=>I.jsx("li",{onClick:()=>{m(T)},className:i.current.reaction===T?I_.selectedReaction:"",children:b},T)),n[6]=i,n[7]=m,n[8]=g):g=n[8];let v;return n[9]!==y||n[10]!==g?(v=I.jsx("ul",{className:I_.reactionList,style:y,children:g}),n[9]=y,n[10]=g,n[11]=v):v=n[11],v}const A8="_replyInfo_oczyu_1",w8="_replyingTo_oczyu_34",C8="_selectedMessage_oczyu_39",Zc={replyInfo:A8,replyingTo:w8,selectedMessage:C8};function R8(){const n=xe.c(15),{peerName:t}=X.useContext(Dn),{selectedMessage:i}=X.useContext(si),r=Pt(I8),o=i.current.receivedId===null?"yourself":t.current,u=i.current.type==="image"?"Image":i.current.content;let h;n[0]!==r?(h=()=>{r(null)},n[0]=r,n[1]=h):h=n[1];const m=h;let y;n[2]!==o?(y=I.jsxs("p",{className:Zc.replyingTo,children:["Replying to ",o]}),n[2]=o,n[3]=y):y=n[3];let g;n[4]!==u?(g=I.jsx("p",{className:Zc.selectedMessage,children:u}),n[4]=u,n[5]=g):g=n[5];let v;n[6]!==y||n[7]!==g?(v=I.jsxs("div",{className:Zc.messageContents,children:[y,g]}),n[6]=y,n[7]=g,n[8]=v):v=n[8];let b;n[9]===Symbol.for("react.memo_cache_sentinel")?(b=I.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"}),n[9]=b):b=n[9];let T;n[10]!==m?(T=I.jsx("svg",{width:16,height:16,onClick:m,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:b}),n[10]=m,n[11]=T):T=n[11];let R;return n[12]!==v||n[13]!==T?(R=I.jsxs("div",{className:Zc.replyInfo,children:[v,T]}),n[12]=v,n[13]=T,n[14]=R):R=n[14],R}function I8(n){return n.setReplying}const x8="_sent_1wqkl_15",D8="_received_1wqkl_19",M8="_actionsContainer_1wqkl_28",Dm={sent:x8,received:D8,actionsContainer:M8};function V8(n){const t=xe.c(16),{imageSource:i,imageAlt:r,imageSent:o}=n,u=r===void 0?"Image":r;console.log("Image dialog rendered!");const h=Pt(O8),m=X.useRef(null),y=N8;let g;t[0]!==i?(g=()=>{window.open(i,"_blank")},t[0]=i,t[1]=g):g=t[1];const v=g;let b;t[2]!==h?(b=()=>{const Q=m.current;if(!Q)return;const et=Y=>{Y.target===Q&&y()},tt=()=>{h(null)};return Q.addEventListener("click",et),window.addEventListener("popstate",tt),()=>{Q.removeEventListener("click",et),window.removeEventListener("popstate",tt)}},t[2]=h,t[3]=b):b=t[3];let T;t[4]===Symbol.for("react.memo_cache_sentinel")?(T=[],t[4]=T):T=t[4],X.useEffect(b,T);const R=o?Dm.sent:Dm.received;let V;t[5]===Symbol.for("react.memo_cache_sentinel")?(V=I.jsx("button",{onClick:y,children:I.jsx("svg",{width:24,height:24,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),t[5]=V):V=t[5];let j;t[6]===Symbol.for("react.memo_cache_sentinel")?(j=I.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.163 2.819C9 3.139 9 3.559 9 4.4V11H7.803c-.883 0-1.325 0-1.534.176a.75.75 0 0 0-.266.62c.017.274.322.593.931 1.232l4.198 4.401c.302.318.453.476.63.535a.749.749 0 0 0 .476 0c.177-.059.328-.217.63-.535l4.198-4.4c.61-.64.914-.96.93-1.233a.75.75 0 0 0-.265-.62C17.522 11 17.081 11 16.197 11H15V4.4c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656C13.861 2 13.441 2 12.6 2h-1.2c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656zM5 21a1 1 0 0 0 1 1h12a1 1 0 1 0 0-2H6a1 1 0 0 0-1 1z",fill:"#000000"})}),t[6]=j):j=t[6];let k;t[7]!==v?(k=I.jsxs("div",{className:Dm.actionsContainer,children:[V,I.jsx("button",{onClick:v,children:j})]}),t[7]=v,t[8]=k):k=t[8];let z;t[9]!==u||t[10]!==i?(z=I.jsx("img",{src:i,alt:u}),t[9]=u,t[10]=i,t[11]=z):z=t[11];let W;return t[12]!==R||t[13]!==k||t[14]!==z?(W=I.jsxs("dialog",{ref:m,className:R,children:[k,z]}),t[12]=R,t[13]=k,t[14]=z,t[15]=W):W=t[15],W}function N8(){window.history.back()}function O8(n){return n.setImageDialog}const L8="_navContainer_jqxvx_1",k8="_profileContainer_jqxvx_17",P8="_actionsContainer_jqxvx_31",kl={navContainer:L8,profileContainer:k8,actionsContainer:P8};function U8(){const n=xe.c(17);console.log("Chat header rendered!");const{peerName:t}=X.useContext(Dn),i=Pt(z8),r=Pt(B8),[o]=X.useState(!1);let u;n[0]===Symbol.for("react.memo_cache_sentinel")?(u={y:100,opacity:0},n[0]=u):u=n[0];let h;n[1]===Symbol.for("react.memo_cache_sentinel")?(h={y:0,opacity:1,config:{tension:300,friction:25}},n[1]=h):h=n[1];let m;n[2]===Symbol.for("react.memo_cache_sentinel")?(m={from:u,enter:h,leave:{y:100,opacity:0,config:{tension:300,friction:25}}},n[2]=m):m=n[2],s5(o,m);let y;n[3]!==r?(y=()=>{r("idle")},n[3]=r,n[4]=y):y=n[4];const g=y,v=j8;let b;n[5]===Symbol.for("react.memo_cache_sentinel")?(b=I.jsx("img",{src:"./pp.svg",width:30,height:30,className:kl.profileImage}),n[5]=b):b=n[5];const T=t.current?t.current:"Receiver";let R;n[6]!==T?(R=I.jsxs("div",{className:kl.profileContainer,children:[b,I.jsx("p",{children:T})]}),n[6]=T,n[7]=R):R=n[7];let V;n[8]!==g||n[9]!==i?(V=i==="hidden"&&I.jsx("button",{className:kl.videoCallButton,onClick:g,children:I.jsx("svg",{width:20,height:20,viewBox:"0 -32 576 576",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"})})}),n[8]=g,n[9]=i,n[10]=V):V=n[10];let j;n[11]===Symbol.for("react.memo_cache_sentinel")?(j=I.jsx("button",{onClick:v,children:I.jsx("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.2788 2.15224C13.9085 2 13.439 2 12.5 2C11.561 2 11.0915 2 10.7212 2.15224C10.2274 2.35523 9.83509 2.74458 9.63056 3.23463C9.53719 3.45834 9.50065 3.7185 9.48635 4.09799C9.46534 4.65568 9.17716 5.17189 8.69017 5.45093C8.20318 5.72996 7.60864 5.71954 7.11149 5.45876C6.77318 5.2813 6.52789 5.18262 6.28599 5.15102C5.75609 5.08178 5.22018 5.22429 4.79616 5.5472C4.47814 5.78938 4.24339 6.1929 3.7739 6.99993C3.30441 7.80697 3.06967 8.21048 3.01735 8.60491C2.94758 9.1308 3.09118 9.66266 3.41655 10.0835C3.56506 10.2756 3.77377 10.437 4.0977 10.639C4.57391 10.936 4.88032 11.4419 4.88029 12C4.88026 12.5581 4.57386 13.0639 4.0977 13.3608C3.77372 13.5629 3.56497 13.7244 3.41645 13.9165C3.09108 14.3373 2.94749 14.8691 3.01725 15.395C3.06957 15.7894 3.30432 16.193 3.7738 17C4.24329 17.807 4.47804 18.2106 4.79606 18.4527C5.22008 18.7756 5.75599 18.9181 6.28589 18.8489C6.52778 18.8173 6.77305 18.7186 7.11133 18.5412C7.60852 18.2804 8.2031 18.27 8.69012 18.549C9.17714 18.8281 9.46533 19.3443 9.48635 19.9021C9.50065 20.2815 9.53719 20.5417 9.63056 20.7654C9.83509 21.2554 10.2274 21.6448 10.7212 21.8478C11.0915 22 11.561 22 12.5 22C13.439 22 13.9085 22 14.2788 21.8478C14.7726 21.6448 15.1649 21.2554 15.3694 20.7654C15.4628 20.5417 15.4994 20.2815 15.5137 19.902C15.5347 19.3443 15.8228 18.8281 16.3098 18.549C16.7968 18.2699 17.3914 18.2804 17.8886 18.5412C18.2269 18.7186 18.4721 18.8172 18.714 18.8488C19.2439 18.9181 19.7798 18.7756 20.2038 18.4527C20.5219 18.2105 20.7566 17.807 21.2261 16.9999C21.6956 16.1929 21.9303 15.7894 21.9827 15.395C22.0524 14.8691 21.9088 14.3372 21.5835 13.9164C21.4349 13.7243 21.2262 13.5628 20.9022 13.3608C20.4261 13.0639 20.1197 12.558 20.1197 11.9999C20.1197 11.4418 20.4261 10.9361 20.9022 10.6392C21.2263 10.4371 21.435 10.2757 21.5836 10.0835C21.9089 9.66273 22.0525 9.13087 21.9828 8.60497C21.9304 8.21055 21.6957 7.80703 21.2262 7C20.7567 6.19297 20.522 5.78945 20.2039 5.54727C19.7799 5.22436 19.244 5.08185 18.7141 5.15109C18.4722 5.18269 18.2269 5.28136 17.8887 5.4588C17.3915 5.71959 16.7969 5.73002 16.3099 5.45096C15.8229 5.17191 15.5347 4.65566 15.5136 4.09794C15.4993 3.71848 15.4628 3.45833 15.3694 3.23463C15.1649 2.74458 14.7726 2.35523 14.2788 2.15224ZM12.5 15C14.1695 15 15.5228 13.6569 15.5228 12C15.5228 10.3431 14.1695 9 12.5 9C10.8305 9 9.47716 10.3431 9.47716 12C9.47716 13.6569 10.8305 15 12.5 15Z",fill:"#1C274C"})})}),n[11]=j):j=n[11];let k;n[12]!==V?(k=I.jsxs("ul",{className:kl.actionsContainer,children:[V,j]}),n[12]=V,n[13]=k):k=n[13];let z;return n[14]!==R||n[15]!==k?(z=I.jsxs("nav",{"aria-label":"Main Navigation",className:kl.navContainer,children:[R,k]}),n[14]=R,n[15]=k,n[16]=z):z=n[16],z}function j8(){document.body.classList.toggle("dark")}function B8(n){return n.setVideoCall}function z8(n){return n.videoCall}const q8="_chatContainer_189rb_1",H8="_chatBottom_189rb_18",x_={chatContainer:q8,chatBottom:H8},G8="_textMessage_1lmsy_1",F8="_sentMessage_1lmsy_31",Q8="_receivedMessage_1lmsy_36",Y8="_sending_1lmsy_41",K8="_sent_1lmsy_31",$8="_deletedMessage_1lmsy_49",X8="_topMessage_1lmsy_55",Z8="_bottomMessage_1lmsy_60",J8="_repliedMessage_1lmsy_73",W8="_hasImage_1lmsy_78",tw="_hasReaction_1lmsy_84",ew="_emoji_1lmsy_88",ti={textMessage:G8,sentMessage:F8,receivedMessage:Q8,sending:Y8,sent:K8,deletedMessage:$8,topMessage:X8,bottomMessage:Z8,repliedMessage:J8,hasImage:W8,hasReaction:tw,emoji:ew},nw="_reaction_1t2b5_1",iw="_sentReaction_1t2b5_11",sw="_receivedReaction_1t2b5_16",Mm={reaction:nw,sentReaction:iw,receivedReaction:sw},rw=["👍","❤️","😆","😮","😢","😡"];function aw(n){const t=xe.c(8),{reaction:i,origin:r}=n,[o,u]=_o(ow);let h;t[0]!==u?(h=()=>{u.start({from:{scale:0},to:{scale:1},config:{tension:300,friction:15}})},t[0]=u,t[1]=h):h=t[1];let m;t[2]!==i?(m=[i],t[2]=i,t[3]=m):m=t[3],X.useEffect(h,m);let y;return t[4]!==r||t[5]!==i||t[6]!==o?(y=i!==-1?I.jsx(vo.span,{className:`${Mm.reaction} ${r==="sent"?Mm.sentReaction:Mm.receivedReaction}`,style:{...o},children:rw[i]}):I.jsx(I.Fragment,{}),t[4]=r,t[5]=i,t[6]=o,t[7]=y):y=t[7],y}function ow(){return{scale:1}}const lw="_requestDiv_1axuz_1",uw="_decisionBox_1axuz_9",cw="_loading_1axuz_35",Vm={requestDiv:lw,decisionBox:uw,loading:cw};function fw(n){const t=xe.c(16),{sentId:i,receivedId:r}=n;console.log("Image request rendered!");const{dataChannel:o,peerName:u}=X.useContext(Dn),h=Pt(hw),{receivingImage:m}=X.useContext(si),{showNotification:y}=_u(),[g,v]=X.useState(!1);let b;t[0]!==o.current||t[1]!==r||t[2]!==m.current||t[3]!==i||t[4]!==y?(b=()=>{m.current===null?(o.current.send(JSON.stringify({type:"imageAccept",sentId:r,receivedId:i})),v(!0)):y("Please wait for a while!")},t[0]=o.current,t[1]=r,t[2]=m.current,t[3]=i,t[4]=y,t[5]=b):b=t[5];const T=b;let R;t[6]!==o.current||t[7]!==r||t[8]!==h||t[9]!==i?(R=()=>{o.current.send(JSON.stringify({type:"imageReject",sentId:r,receivedId:i})),h(i,r)},t[6]=o.current,t[7]=r,t[8]=h,t[9]=i,t[10]=R):R=t[10];const V=R;let j;return t[11]!==T||t[12]!==g||t[13]!==u||t[14]!==V?(j=g?I.jsxs("div",{className:Vm.loading,children:[I.jsx("span",{children:"L"}),I.jsx("span",{children:"o"}),I.jsx("span",{children:"a"}),I.jsx("span",{children:"d"}),I.jsx("span",{children:"i"}),I.jsx("span",{children:"n"}),I.jsx("span",{children:"g"}),I.jsx("span",{children:" "}),I.jsx("span",{children:"i"}),I.jsx("span",{children:"m"}),I.jsx("span",{children:"a"}),I.jsx("span",{children:"g"}),I.jsx("span",{children:"e"})]}):I.jsxs("div",{className:Vm.requestDiv,children:[I.jsxs("div",{children:[u.current," wants to send you an image"]}),I.jsxs("div",{className:Vm.decisionBox,children:[I.jsx("button",{onClick:T,children:"Accept"}),I.jsx("button",{onClick:V,children:"Reject"})]})]}),t[11]=T,t[12]=g,t[13]=u,t[14]=V,t[15]=j):j=t[15],j}function hw(n){return n.removeMessage}const dw="_wrapperContainer_ln3cz_1",mw="_stopAnimation_ln3cz_34",gw="_show_ln3cz_44",Nm={wrapperContainer:dw,stopAnimation:mw,show:gw};function pg({imageData:n,imageSource:t,imageAlt:i="Image",backgroundColor:r,clickHandler:o}){const[u,h]=X.useState(!1),m={[`data-${n==null?void 0:n.label}`]:n==null?void 0:n.value};return I.jsx("div",{style:{backgroundColor:u?"transparent":r},className:`${Nm.wrapperContainer} ${u?Nm.stopAnimation:""}`,children:I.jsx("img",{onClick:o,...m,className:u?Nm.show:"",onLoad:()=>{h(!0)},src:t,alt:i})})}const v4=X.memo(n=>{const t=xe.c(81),{message:i,prevMessageSentId:r,prevMessageReceivedId:o,prevMessageReaction:u,nextMessageSentId:h,nextMessageReceivedId:m,nextMessageReplyTo:y}=n,{dataChannel:g}=X.useContext(Dn),v=Pt(pw),b=Pt(yw),T=Pt(_w),R=Pt(vw),{chatBottom:V,pointerPosition:j,selectedMessage:k,longPressed:z,atBottomRef:W}=X.useContext(si),{sentId:Q,receivedId:et,type:tt,status:Y,content:x,reaction:w,deleted:C,highlight:O,replyTo:L}=i;console.log("Rendering message ",i);let P;t[0]!==x||t[1]!==et||t[2]!==R?(P=()=>{window.history.pushState(null,"","/image"),R({src:x,sent:et===null})},t[0]=x,t[1]=et,t[2]=R,t[3]=P):P=t[3];const D=P;let dt;t[4]!==x?(dt=()=>I.jsx("p",{children:x}),t[4]=x,t[5]=dt):dt=t[5];let mt;t[6]!==x||t[7]!==et||t[8]!==D?(mt=()=>I.jsx(pg,{imageSource:x,backgroundColor:et===null?"#FFD1B3":"#B3E0FF",clickHandler:D}),t[6]=x,t[7]=et,t[8]=D,t[9]=mt):mt=t[9];let G;t[10]!==et||t[11]!==Q?(G=()=>I.jsx(fw,{sentId:Q,receivedId:et}),t[10]=et,t[11]=Q,t[12]=G):G=t[12];let st;t[13]!==dt||t[14]!==mt||t[15]!==G?(st={text:dt,image:mt,imageRequest:G},t[13]=dt,t[14]=mt,t[15]=G,t[16]=st):st=t[16];const ut=st,[_t,M]=_o(Ew),J=X.useRef(null),ct=X.useRef(!1),ot=X.useRef(!0),pt=X.useRef(0),Tt=X.useRef(null);let Et;t[17]!==M||t[18]!==W||t[19]!==V?(Et=()=>{W.current&&(V.current.scrollIntoView({behavior:"smooth"}),W.current=!1),M.start({from:{scale:0,opacity:0},to:[{scale:1,opacity:1}],reset:!1,config:zm.stiff})},t[17]=M,t[18]=W,t[19]=V,t[20]=Et):Et=t[20];let Lt;t[21]===Symbol.for("react.memo_cache_sentinel")?(Lt=[],t[21]=Lt):Lt=t[21],X.useEffect(Et,Lt);let ht;t[22]!==M?(ht=()=>{if(ot.current){ot.current=!1;return}(async()=>(Tt.current.scrollIntoView({behavior:"instant"}),await new Promise(Tw),M.start({from:{scale:1},to:[{scale:1.2},{scale:1}],config:zm.stiff})))()},t[22]=M,t[23]=ht):ht=t[23];let At;t[24]!==O?(At=[O],t[24]=O,t[25]=At):At=t[25],X.useEffect(ht,At);let Dt;t[26]!==g||t[27]!==w||t[28]!==et||t[29]!==Q?(Dt=()=>{if(Q===null&&w!==1){const Zt={type:"reaction",id:et,reaction:1};g.current.send(JSON.stringify(Zt))}},t[26]=g,t[27]=w,t[28]=et,t[29]=Q,t[30]=Dt):Dt=t[30];const se=Dt;let ee;t[31]!==M||t[32]!==z||t[33]!==i||t[34]!==j||t[35]!==k||t[36]!==Q||t[37]!==b||t[38]!==T||t[39]!==v?(ee=Zt=>{const{event:Gt}=Zt;ct.current=!1,J.current=setTimeout(()=>{ct.current||(j.current.x=Gt.clientX,j.current.y=Gt.clientY,z.current=!0,M.start({from:{scale:1},to:[{scale:1.1},{scale:1}],config:{duration:150},onRest:()=>{b(!0),v(null),Q===null&&T(!0),k.current=i}}))},500)},t[31]=M,t[32]=z,t[33]=i,t[34]=j,t[35]=k,t[36]=Q,t[37]=b,t[38]=T,t[39]=v,t[40]=ee):ee=t[40];let Te;t[41]!==z||t[42]!==se?(Te=()=>{setTimeout(()=>{z.current=!1},100),clearTimeout(J.current);const Zt=Date.now();Zt-pt.current<500?(se(),pt.current=0):pt.current=Zt},t[41]=z,t[42]=se,t[43]=Te):Te=t[43];let Ae;t[44]===Symbol.for("react.memo_cache_sentinel")?(Ae=()=>{clearTimeout(J.current)},t[44]=Ae):Ae=t[44];let pe;t[45]!==M||t[46]!==i||t[47]!==et||t[48]!==k||t[49]!==Q||t[50]!==b||t[51]!==T||t[52]!==v?(pe=Zt=>{const{last:Gt,movement:pn}=Zt,[he]=pn;if(Q===null){if(he<0)return}else if(he>0)return;if(Math.abs(he)<5)return;ct.current=Math.abs(he)>5;const ia=et===null?Math.min(0,he):Math.max(0,he);M.start({x:ia,onRest:()=>{Math.abs(he)>60&&(k.current=i,v(k.current),b(!1),T(!1))}}),ct.current&&J.current&&(clearTimeout(J.current),J.current=null),Gt&&M.start({x:0,config:{tension:500,friction:20}})},t[45]=M,t[46]=i,t[47]=et,t[48]=k,t[49]=Q,t[50]=b,t[51]=T,t[52]=v,t[53]=pe):pe=t[53];let hn;t[54]!==ee||t[55]!==Te||t[56]!==pe?(hn={onPointerDown:ee,onPointerUp:Te,onPointerLeave:Ae,onDrag:pe},t[54]=ee,t[55]=Te,t[56]=pe,t[57]=hn):hn=t[57];let De;t[58]===Symbol.for("react.memo_cache_sentinel")?(De={eventOptions:{passive:!1}},t[58]=De):De=t[58];const mi=DE(hn,De);let dn;t[59]!==mi||t[60]!==C||t[61]!==Y||t[62]!==tt?(dn=C!==0||tt==="imageRequest"||Y==="sending"?{}:mi(),t[59]=mi,t[60]=C,t[61]=Y,t[62]=tt,t[63]=dn):dn=t[63];let an;t[64]!==_t?(an={..._t},t[64]=_t,t[65]=an):an=t[65];const mn=`
        ${ti.textMessage}
        ${Y==="sending"?ti.sending:ti.sent}
        ${et===null?ti.sentMessage:ti.receivedMessage}
        ${(h===Q||m===et)&&i.reaction===-1&&!y?ti.topMessage:""}
        ${(r===Q||o===et)&&!u?ti.bottomMessage:""}
        ${L?ti.repliedMessage:""}
        ${C===2?ti.deletedMessage:""}
        ${w!==-1&&C!==2?ti.hasReaction:""}
        ${tt==="image"?ti.hasImage:""}
        ${BE(x)?ti.emoji:""}
      `;let gn;t[66]!==ut||t[67]!==tt?(gn=ut[tt]||bw,t[66]=ut,t[67]=tt,t[68]=gn):gn=t[68];let Mn;t[69]!==gn?(Mn=gn(),t[69]=gn,t[70]=Mn):Mn=t[70];let zn;t[71]!==C||t[72]!==w||t[73]!==Q?(zn=C!==2&&I.jsx(aw,{reaction:w,origin:Q===null?"received":"sent"}),t[71]=C,t[72]=w,t[73]=Q,t[74]=zn):zn=t[74];let Bi;return t[75]!==dn||t[76]!==an||t[77]!==mn||t[78]!==Mn||t[79]!==zn?(Bi=I.jsxs(vo.div,{ref:Tt,...dn,style:an,className:mn,children:[Mn,zn]}),t[75]=dn,t[76]=an,t[77]=mn,t[78]=Mn,t[79]=zn,t[80]=Bi):Bi=t[80],Bi});function pw(n){return n.setReplying}function yw(n){return n.setActionsShown}function _w(n){return n.setReactionsShown}function vw(n){return n.setImageDialog}function Ew(){return{scale:1,x:0}}function Tw(n){return setTimeout(n,100)}function bw(){return I.jsx("p",{children:I.jsx("span",{children:"Unknown type"})})}const Sw="_replyToMessage_1f615_1",Aw="_sentMessage_1f615_20",ww="_receivedMessage_1f615_25",Jc={replyToMessage:Sw,sentMessage:Aw,receivedMessage:ww};function Cw(n){const t=xe.c(18),{message:i,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}=n,h=Pt(Rw);let m;t[0]!==h||t[1]!==i.replyTo.receivedId||t[2]!==i.replyTo.sentId?(m=()=>{setTimeout(()=>{h(i.replyTo.sentId,i.replyTo.receivedId)},100)},t[0]=h,t[1]=i.replyTo.receivedId,t[2]=i.replyTo.sentId,t[3]=m):m=t[3];const y=m,g=`
          ${Jc.replyToMessage}
          ${i.receivedId===null?Jc.sentMessage:Jc.receivedMessage}
          ${i.reaction!==-1?Jc.hasReaction:""}
        `,v=i.replyTo.type==="image"?"Image":i.replyTo.content;let b;t[4]!==v?(b=I.jsx("p",{children:v}),t[4]=v,t[5]=b):b=t[5];let T;t[6]!==y||t[7]!==g||t[8]!==b?(T=I.jsx("a",{onClick:y,className:g,children:b}),t[6]=y,t[7]=g,t[8]=b,t[9]=T):T=t[9];let R;t[10]!==i||t[11]!==o||t[12]!==u||t[13]!==r?(R=I.jsx(v4,{message:i,replied:!0,nextMessageSentId:r,nextMessageReceivedId:o,nextMessageReplyTo:u}),t[10]=i,t[11]=o,t[12]=u,t[13]=r,t[14]=R):R=t[14];let V;return t[15]!==T||t[16]!==R?(V=I.jsxs(I.Fragment,{children:[T,R]}),t[15]=T,t[16]=R,t[17]=V):V=t[17],V}function Rw(n){return n.highlightMessage}const Iw="_typingIndicator_1e28p_1",xw="_dot_1e28p_14",Wc={typingIndicator:Iw,dot:xw};function Dw(){const n=xe.c(1),{chatBottom:t}=X.useContext(si);Ql(t)&&setTimeout(()=>{t.current.scrollIntoView({behavior:"smooth"})},300);let i;return n[0]===Symbol.for("react.memo_cache_sentinel")?(i=I.jsxs("div",{className:Wc.typingIndicator,children:[I.jsx("span",{className:Wc.dot}),I.jsx("span",{className:Wc.dot}),I.jsx("span",{className:Wc.dot})]}),n[0]=i):i=n[0],i}const Mw="_newMessageContainer_148ji_1",Vw="_newMessage_148ji_1",D_={newMessageContainer:Mw,newMessage:Vw};function Nw(){const n=xe.c(4);console.log("New Message component rendered!");const{chatBottom:t}=X.useContext(si);let i;n[0]!==t.current?(i=()=>{t.current.scrollIntoView({behavior:"smooth"})},n[0]=t.current,n[1]=i):i=n[1];const r=i;let o;return n[2]!==r?(o=I.jsx("div",{className:D_.newMessageContainer,children:I.jsx("div",{className:D_.newMessage,onClick:r,children:"New Message"})}),n[2]=r,n[3]=o):o=n[3],o}function Ow(){const n=xe.c(13);console.log("Chat component rendered!");const{chatBottom:t}=X.useContext(si),i=Pt(jw),r=Pt(Uw),o=Pt(Pw);Pt(kw);let u;n[0]!==i?(u=i.map(Lw),n[0]=i,n[1]=u):u=n[1];let h;n[2]!==r?(h=r&&I.jsx(Dw,{}),n[2]=r,n[3]=h):h=n[3];let m;n[4]!==o?(m=o&&I.jsx(Nw,{}),n[4]=o,n[5]=m):m=n[5];let y;n[6]!==t?(y=I.jsx("div",{ref:t,className:x_.chatBottom,children:"Hehe"},"chatBottom"),n[6]=t,n[7]=y):y=n[7];let g;return n[8]!==u||n[9]!==h||n[10]!==m||n[11]!==y?(g=I.jsxs("div",{className:x_.chatContainer,children:[u,h,m,y]}),n[8]=u,n[9]=h,n[10]=m,n[11]=y,n[12]=g):g=n[12],g}function Lw(n,t,i){var r,o,u,h,m,y,g,v,b;return n.replyTo?I.jsx(Cw,{message:n,nextMessageSentId:(r=i[t+1])==null?void 0:r.sentId,nextMessageReceivedId:(o=i[t+1])==null?void 0:o.receivedId,nextMessageReplyTo:(u=i[t+1])==null?void 0:u.replyTo},`${n.sentId} m ${n.receivedId}`):I.jsx(v4,{message:n,nextMessageSentId:(h=i[t+1])==null?void 0:h.sentId,nextMessageReceivedId:(m=i[t+1])==null?void 0:m.receivedId,nextMessageReplyTo:(y=i[t+1])==null?void 0:y.replyTo,prevMessageSentId:(g=i[t-1])==null?void 0:g.sentId,prevMessageReceivedId:(v=i[t-1])==null?void 0:v.receivedId,prevMessageReaction:((b=i[t-1])==null?void 0:b.reaction)!==-1},`${n.sentId} m ${n.receivedId}`)}function kw(n){return n.setNewMessage}function Pw(n){return n.newMessage}function Uw(n){return n.typing}function jw(n){return n.messages}const Bw="_inputSpaceContainer_1lnqb_1",zw="_gifSelector_1lnqb_42",qw="_inputOptions_1lnqb_53",Hw="_sendButton_1lnqb_75",Gw="_imageBox_1lnqb_95",Fw="_inputImage_1lnqb_108",Qw="_closeImage_1lnqb_115",Fr={inputSpaceContainer:Bw,gifSelector:zw,inputOptions:qw,sendButton:Hw,imageBox:Gw,inputImage:Fw,closeImage:Qw},Yw="_gifBox_6aqh5_1",Kw="_inputDiv_6aqh5_22",$w="_gifInput_6aqh5_27",Xw="_gifsContainer_6aqh5_42",Zw="_containerColumn_6aqh5_53",Za={gifBox:Yw,inputDiv:Kw,gifInput:$w,gifsContainer:Xw,containerColumn:Zw},Jw="AIzaSyAnvUI0Ka40pbNu4COdmUoeMiIrf3gPg3k",Ww="client_key=boop-chat&media_filter=tinygif,gif&contentfilter=low";function tC(n){const t=xe.c(37),{setGifPicker:i}=n;console.log("Gif Picker rendered!");const{dataChannel:r,featuredGifs:o}=X.useContext(Dn),{sentId:u,selectedMessage:h,atBottomRef:m}=X.useContext(si),y=Pt(uC),g=Pt(lC),v=Pt(oC);let b;t[0]!==i?(b=()=>{i(!1)},t[0]=i,t[1]=b):b=t[1];const T=b,[R,V]=X.useState(o.current),j=X.useRef(null),[k,z]=_o(aC),{h:W}=k;let Q;t[2]!==z?(Q=J=>{const{movement:ct,last:ot}=J,[,pt]=ct;Math.abs(pt)<2&&!ot||(ot?pt>60?z.start({h:0,immediate:!1,onRest:rC}):z.start({h:85,immediate:!1}):pt>0&&z.start({h:85-pt/window.innerHeight*100,immediate:!0}))},t[2]=z,t[3]=Q):Q=t[3];const et=qf(Q);let tt;t[4]===Symbol.for("react.memo_cache_sentinel")?(tt=async J=>{const ct=`https://tenor.googleapis.com/v2/search?q=${J}&key=${Jw}&${Ww}`,ot=await fetch(ct).then(sC);V(ot.results)},t[4]=tt):tt=t[4];const Y=tt;let x;t[5]===Symbol.for("react.memo_cache_sentinel")?(x=PE(Y,200),t[5]=x):x=t[5];const w=X.useRef(x);let C;t[6]!==o.current?(C=()=>{const J=j.current.value.trimEnd();J.length===0?V(o.current):w.current(J)},t[6]=o.current,t[7]=C):C=t[7];const O=C;let L;t[8]!==y||t[9]!==m||t[10]!==r||t[11]!==g||t[12]!==h||t[13]!==u||t[14]!==i||t[15]!==v?(L=J=>{console.log("Clicked!"),J.target.dataset.url&&(Xm({type:"gif",content:J.target.dataset.url,replying:g,setReplying:v,selectedMessage:h.current,dataChannel:r.current,addMessage:y,sentId:u,inputRef:null,atBottomRef:m}),i(!1))},t[8]=y,t[9]=m,t[10]=r,t[11]=g,t[12]=h,t[13]=u,t[14]=i,t[15]=v,t[16]=L):L=t[16];const P=L;let D;t[17]!==z||t[18]!==T?(D=()=>(z.start({from:{h:0},to:[{h:85}],reset:!1}),window.addEventListener("popstate",T),()=>{window.removeEventListener("popstate",T)}),t[17]=z,t[18]=T,t[19]=D):D=t[19];let dt;t[20]===Symbol.for("react.memo_cache_sentinel")?(dt=[],t[20]=dt):dt=t[20],X.useEffect(D,dt);let mt;t[21]!==et?(mt=et(),t[21]=et,t[22]=mt):mt=t[22];let G;t[23]!==W?(G=W.to(iC),t[23]=W,t[24]=G):G=t[24];let st;t[25]!==G?(st={height:G},t[25]=G,t[26]=st):st=t[26];let ut;t[27]!==O?(ut=I.jsx("div",{className:Za.inputDiv,children:I.jsx("input",{ref:j,autoComplete:"off",placeholder:"Search",spellCheck:!1,name:"query",title:"Search for GIFs",className:Za.gifInput,onChange:O})}),t[27]=O,t[28]=ut):ut=t[28];let _t;t[29]!==R||t[30]!==P?(_t=R.length>0?I.jsxs("div",{className:Za.gifsContainer,onClick:J=>P(J),children:[I.jsx("div",{className:Za.containerColumn,children:R.map(nC)}),I.jsx("div",{className:Za.containerColumn,children:R.map(eC)})]}):I.jsx(I.Fragment,{}),t[29]=R,t[30]=P,t[31]=_t):_t=t[31];let M;return t[32]!==mt||t[33]!==st||t[34]!==ut||t[35]!==_t?(M=I.jsxs(vo.div,{...mt,style:st,className:Za.gifBox,children:[ut,_t]}),t[32]=mt,t[33]=st,t[34]=ut,t[35]=_t,t[36]=M):M=t[36],M}function eC(n,t){return t%2===1&&I.jsx(pg,{imageData:{label:"url",value:n.media_formats.gif.url},imageSource:n.media_formats.tinygif.url,imageAlt:n.content_description,backgroundColor:"#BBDDDF"},n.id+t)}function nC(n,t){return t%2===0&&I.jsx(pg,{imageData:{label:"url",value:n.media_formats.gif.url},imageSource:n.media_formats.tinygif.url,imageAlt:n.content_description,backgroundColor:"#BBDDDF"},n.id+t)}function iC(n){return`${n}vh`}function sC(n){return n.json()}function rC(){window.history.back()}function aC(){return{h:85}}function oC(n){return n.setReplying}function lC(n){return n.replying}function uC(n){return n.addMessage}function cC(){const n=xe.c(59);console.log("Input space rendered!");const{showNotification:t}=_u(),{dataChannel:i}=X.useContext(Dn),{sentId:r,atBottomRef:o,images:u,chatBottom:h,selectedMessage:m}=X.useContext(si),y=Pt(dC),g=Pt(hC),v=Pt(fC),b=X.useRef(""),T=X.useRef(null),R=X.useRef(null),V=X.useRef(null),[j,k]=X.useState(!1),[z,W]=X.useState(null),[Q,et]=X.useState(!1);let tt,Y;n[0]!==y?(tt=()=>{y&&T.current&&T.current.focus()},Y=[y],n[0]=y,n[1]=tt,n[2]=Y):(tt=n[1],Y=n[2]),X.useLayoutEffect(tt,Y);let x;n[3]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{et(!0),window.history.pushState(null,"","/gifs")},n[3]=x):x=n[3];const w=x;let C;n[4]!==i?(C=()=>{i.current.send(JSON.stringify({type:"typing"}))},n[4]=i,n[5]=C):C=n[5];const O=C;let L;n[6]!==O?(L=kE(O,800),n[6]=O,n[7]=L):L=n[7];const P=X.useRef(L);let D;n[8]!==h?(D=()=>{P.current(),k(!0),T.current.style.height="auto",T.current.scrollHeight>T.current.clientHeight&&(T.current.style.height=T.current.scrollHeight+"px"),b.current=T.current.value,Ql(h)&&setTimeout(()=>{h.current.scrollIntoView({behavior:"smooth"})},200)},n[8]=h,n[9]=D):D=n[9];const dt=D;let mt;n[10]!==u.current||n[11]!==r||n[12]!==t?(mt=async Ae=>{const pe=Ae.target.files[0];if(!pe)return;const hn=await UE(pe);if(hn.length>64){t("Please upload images upto 2 MB!");return}u.current.push({sentId:r.current,receivedId:null,fileType:pe.type,chunks:hn}),W(URL.createObjectURL(pe))},n[10]=u.current,n[11]=r,n[12]=t,n[13]=mt):mt=n[13];const G=mt;let st;n[14]!==v||n[15]!==o||n[16]!==i||n[17]!==y||n[18]!==m||n[19]!==r||n[20]!==g?(st=()=>{b.current.trim().length!==0&&(Xm({type:"text",content:b.current.trimEnd(),replying:y,setReplying:g,selectedMessage:m.current,dataChannel:i.current,addMessage:v,sentId:r,inputRef:T,atBottomRef:o}),b.current="")},n[14]=v,n[15]=o,n[16]=i,n[17]=y,n[18]=m,n[19]=r,n[20]=g,n[21]=st):st=n[21];const ut=st;let _t;n[22]!==v||n[23]!==o||n[24]!==i||n[25]!==z||n[26]!==y||n[27]!==m||n[28]!==r||n[29]!==g?(_t=()=>{z!==null&&(Xm({type:"imageRequest",content:z,replying:y,setReplying:g,selectedMessage:m.current,dataChannel:i.current,addMessage:v,sentId:r,inputRef:V,atBottomRef:o}),W(null))},n[22]=v,n[23]=o,n[24]=i,n[25]=z,n[26]=y,n[27]=m,n[28]=r,n[29]=g,n[30]=_t):_t=n[30];const M=_t;let J;n[31]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{k(!1),T.current.style.height="unset",T.current.scrollTop=T.current.scrollHeight},n[31]=J):J=n[31];const ct=J;let ot;n[32]!==u.current||n[33]!==r?(ot=()=>{V.current.value="";const Ae=u.current.findIndex(pe=>pe.sentId===r.current&&pe.receivedId===null);u.current.splice(Ae,1),W(null)},n[32]=u.current,n[33]=r,n[34]=ot):ot=n[34];const pt=ot;let Tt;n[35]!==z||n[36]!==M||n[37]!==ut?(Tt=()=>{z===null?ut():M()},n[35]=z,n[36]=M,n[37]=ut,n[38]=Tt):Tt=n[38];const Et=Tt;let Lt;n[39]!==Q?(Lt=Q?I.jsx(tC,{setGifPicker:et}):null,n[39]=Q,n[40]=Lt):Lt=n[40];let ht;n[41]!==j||n[42]!==G?(ht=!j&&I.jsxs("div",{className:Fr.inputOptions,children:[I.jsx("label",{htmlFor:"fileInput",children:I.jsx("svg",{width:18,height:18,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M0 26.016q0 2.496 1.76 4.224t4.256 1.76h20q2.464 0 4.224-1.76t1.76-4.224v-20q0-2.496-1.76-4.256t-4.224-1.76h-20q-2.496 0-4.256 1.76t-1.76 4.256v20zM4 26.016v-20q0-0.832 0.576-1.408t1.44-0.608h20q0.8 0 1.408 0.608t0.576 1.408v20q0 0.832-0.576 1.408t-1.408 0.576h-20q-0.832 0-1.44-0.576t-0.576-1.408zM6.016 24q0 0.832 0.576 1.44t1.408 0.576h16q0.832 0 1.408-0.576t0.608-1.44v-0.928q-0.224-0.448-1.12-2.688t-1.6-3.584-1.28-2.112q-0.544-0.576-1.12-0.608t-1.152 0.384-1.152 1.12-1.184 1.568-1.152 1.696-1.152 1.6-1.088 1.184-1.088 0.448q-0.576 0-1.664-1.44-0.16-0.192-0.48-0.608-1.12-1.504-1.6-1.824-0.768-0.512-1.184 0.352-0.224 0.512-0.928 2.24t-1.056 2.56v0.64zM6.016 9.024q0 1.248 0.864 2.112t2.112 0.864 2.144-0.864 0.864-2.112-0.864-2.144-2.144-0.864-2.112 0.864-0.864 2.144z"})})}),I.jsx("input",{ref:V,id:"fileInput",type:"file",accept:"image/*",onChange:Ae=>G(Ae)}),I.jsx("svg",{width:18,height:18,viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",className:"iconify iconify--twemoji",preserveAspectRatio:"xMidYMid meet",children:I.jsx("path",{fill:"#FFAC33",d:"M27.287 34.627c-.404 0-.806-.124-1.152-.371L18 28.422l-8.135 5.834a1.97 1.97 0 0 1-2.312-.008a1.971 1.971 0 0 1-.721-2.194l3.034-9.792l-8.062-5.681a1.98 1.98 0 0 1-.708-2.203a1.978 1.978 0 0 1 1.866-1.363L12.947 13l3.179-9.549a1.976 1.976 0 0 1 3.749 0L23 13l10.036.015a1.975 1.975 0 0 1 1.159 3.566l-8.062 5.681l3.034 9.792a1.97 1.97 0 0 1-.72 2.194a1.957 1.957 0 0 1-1.16.379z"})})]}),n[41]=j,n[42]=G,n[43]=ht):ht=n[43];let At;n[44]!==j||n[45]!==dt||n[46]!==z||n[47]!==pt?(At=z?I.jsxs("div",{className:Fr.imageBox,children:[I.jsx("img",{src:z,className:Fr.inputImage}),I.jsx("svg",{className:Fr.closeImage,width:16,height:16,onClick:pt,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})]}):I.jsxs(I.Fragment,{children:[I.jsx("textarea",{onChange:dt,onFocus:dt,onBlur:ct,ref:T,name:"textMessage",placeholder:"Message",rows:1,spellCheck:!1}),!j&&I.jsx("svg",{className:Fr.gifSelector,onClick:w,width:24,height:24,viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:I.jsx("g",{id:"ic_fluent_gif_24_filled",fillRule:"nonzero",children:I.jsx("path",{d:"M18.75,3.50054297 C20.5449254,3.50054297 22,4.95561754 22,6.75054297 L22,17.2531195 C22,19.048045 20.5449254,20.5031195 18.75,20.5031195 L5.25,20.5031195 C3.45507456,20.5031195 2,19.048045 2,17.2531195 L2,6.75054297 C2,4.95561754 3.45507456,3.50054297 5.25,3.50054297 L18.75,3.50054297 Z M8.01459972,8.87193666 C6.38839145,8.87193666 5.26103525,10.2816525 5.26103525,11.9943017 C5.26103525,13.707564 6.38857781,15.1202789 8.01459972,15.1202789 C8.90237918,15.1202789 9.71768065,14.6931811 10.1262731,13.9063503 L10.2024697,13.7442077 L10.226,13.674543 L10.2440163,13.5999276 L10.2440163,13.5999276 L10.2516169,13.5169334 L10.2518215,11.9961937 L10.2450448,11.9038358 C10.2053646,11.6359388 9.99569349,11.4234501 9.72919932,11.3795378 L9.62682145,11.3711937 L8.62521827,11.3711937 L8.53286035,11.3779703 C8.26496328,11.4176506 8.05247466,11.6273217 8.00856234,11.8938159 L8.00021827,11.9961937 L8.00699487,12.0885517 C8.0466751,12.3564487 8.25634623,12.5689373 8.5228404,12.6128497 L8.62521827,12.6211937 L9.00103525,12.6209367 L9.00103525,13.3549367 L8.99484486,13.3695045 C8.80607251,13.6904125 8.44322427,13.8702789 8.01459972,13.8702789 C7.14873038,13.8702789 6.51103525,13.0713011 6.51103525,11.9943017 C6.51103525,10.9182985 7.14788947,10.1219367 8.01459972,10.1219367 C8.43601415,10.1219367 8.67582824,10.1681491 8.97565738,10.3121334 C9.28681641,10.4615586 9.6601937,10.3304474 9.80961888,10.0192884 C9.95904407,9.70812933 9.82793289,9.33475204 9.51677386,9.18532686 C9.03352891,8.95326234 8.61149825,8.87193666 8.01459972,8.87193666 Z M12.6289445,8.99393497 C12.3151463,8.99393497 12.0553614,9.22519285 12.0107211,9.52657705 L12.0039445,9.61893497 L12.0039445,14.381065 L12.0107211,14.4734229 C12.0553614,14.7748072 12.3151463,15.006065 12.6289445,15.006065 C12.9427427,15.006065 13.2025276,14.7748072 13.2471679,14.4734229 L13.2539445,14.381065 L13.2539445,9.61893497 L13.2471679,9.52657705 C13.2025276,9.22519285 12.9427427,8.99393497 12.6289445,8.99393497 Z M17.6221579,9.00083497 L15.6247564,8.99393111 C15.3109601,8.99285493 15.0503782,9.22321481 15.0046948,9.52444312 L14.9975984,9.61677709 L14.9975984,14.3649711 L15.0043751,14.4573291 C15.0440553,14.7252261 15.2537265,14.9377148 15.5202206,14.9816271 L15.6225985,14.9899711 L15.7149564,14.9831945 C15.9828535,14.9435143 16.1953421,14.7338432 16.2392544,14.467349 L16.2475985,14.3649711 L16.2470353,13.2499367 L17.37,13.2504012 L17.4623579,13.2436246 C17.730255,13.2039444 17.9427436,12.9942732 17.9866559,12.7277791 L17.995,12.6254012 L17.9882234,12.5330433 C17.9485432,12.2651462 17.738872,12.0526576 17.4723779,12.0087453 L17.37,12.0004012 L16.2470353,11.9999367 L16.2470353,10.2449367 L17.6178421,10.2508313 L17.7102229,10.2443727 C18.0117595,10.2007704 18.2439132,9.94178541 18.2450039,9.62798912 C18.24608,9.31419284 18.0157202,9.05361096 17.7144919,9.00793041 L17.6221579,9.00083497 L15.6247564,8.99393111 L17.6221579,9.00083497 Z",id:"🎨-Color"})})})]}),n[44]=j,n[45]=dt,n[46]=z,n[47]=pt,n[48]=At):At=n[48];let Dt;n[49]===Symbol.for("react.memo_cache_sentinel")?(Dt=I.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",id:"send",className:"icon glyph",children:I.jsx("path",{d:"M21.66,12a2,2,0,0,1-1.14,1.81L5.87,20.75A2.08,2.08,0,0,1,5,21a2,2,0,0,1-1.82-2.82L5.46,13H11a1,1,0,0,0,0-2H5.46L3.18,5.87A2,2,0,0,1,5.86,3.25h0l14.65,6.94A2,2,0,0,1,21.66,12Z"})}),n[49]=Dt):Dt=n[49];let se;n[50]!==Et?(se=I.jsx("button",{className:Fr.sendButton,onClick:Et,children:Dt}),n[50]=Et,n[51]=se):se=n[51];let ee;n[52]!==ht||n[53]!==At||n[54]!==se?(ee=I.jsxs("div",{className:Fr.inputSpaceContainer,ref:R,children:[ht,At,se]}),n[52]=ht,n[53]=At,n[54]=se,n[55]=ee):ee=n[55];let Te;return n[56]!==Lt||n[57]!==ee?(Te=I.jsxs(I.Fragment,{children:[Lt,ee]}),n[56]=Lt,n[57]=ee,n[58]=Te):Te=n[58],Te}function fC(n){return n.addMessage}function hC(n){return n.setReplying}function dC(n){return n.replying}const mC="_containingDiv_1w6qf_1",gC="_incomingCall_1w6qf_8",pC="_incomingCallText_1w6qf_25",yC="_callingText_1w6qf_31",_C="_callActions_1w6qf_42",vC="_acceptCall_1w6qf_49",EC="_rejectCall_1w6qf_53",hs={containingDiv:mC,incomingCall:gC,incomingCallText:pC,callingText:yC,callActions:_C,acceptCall:vC,rejectCall:EC};function TC(){const n=xe.c(34);console.log("Incoming call rendered!");const{peerName:t,dataChannel:i}=X.useContext(Dn),r=Pt(AC),o=Pt(SC),[u,h]=_o(bC),{x:m,y,opacity:g}=u;let v;n[0]!==i.current||n[1]!==r||n[2]!==o?(v=()=>{i.current.send(JSON.stringify({type:"callAccept"})),r(!1),o("connected")},n[0]=i.current,n[1]=r,n[2]=o,n[3]=v):v=n[3];const b=v;let T;n[4]!==i.current||n[5]!==r?(T=()=>{i.current.send(JSON.stringify({type:"callReject"})),r(!1)},n[4]=i.current,n[5]=r,n[6]=T):T=n[6];const R=T;let V;n[7]!==h||n[8]!==R?(V=L=>{const{down:P,movement:D,direction:dt}=L,[mt]=D,[G]=dt;if(!P&&Math.abs(mt)>100){h.start({x:G>0?500:-500,opacity:0,onRest:R});return}h.start({x:P?mt:0,opacity:1})},n[7]=h,n[8]=R,n[9]=V):V=n[9];const j=qf(V);let k;n[10]!==j?(k=j(),n[10]=j,n[11]=k):k=n[11];let z;n[12]!==g||n[13]!==m||n[14]!==y?(z={x:m,y,opacity:g},n[12]=g,n[13]=m,n[14]=y,n[15]=z):z=n[15];let W,Q;n[16]===Symbol.for("react.memo_cache_sentinel")?(W=I.jsx("div",{className:hs.profileImage,children:I.jsx("img",{src:"./pp.svg",width:50,height:50,className:hs.profileImage})}),Q=I.jsx("p",{className:hs.incomingCallText,children:"Incoming Call"}),n[16]=W,n[17]=Q):(W=n[16],Q=n[17]);let et;n[18]!==t.current?(et=I.jsxs("div",{children:[Q,I.jsxs("p",{className:hs.callingText,children:[t.current," is calling you"]})]}),n[18]=t.current,n[19]=et):et=n[19];let tt;n[20]===Symbol.for("react.memo_cache_sentinel")?(tt=I.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})}),n[20]=tt):tt=n[20];let Y;n[21]!==b?(Y=I.jsx("button",{className:hs.acceptCall,onClick:b,children:tt}),n[21]=b,n[22]=Y):Y=n[22];let x;n[23]===Symbol.for("react.memo_cache_sentinel")?(x=I.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})}),n[23]=x):x=n[23];let w;n[24]!==R?(w=I.jsx("button",{className:hs.rejectCall,onClick:R,children:x}),n[24]=R,n[25]=w):w=n[25];let C;n[26]!==Y||n[27]!==w?(C=I.jsxs("div",{className:hs.callActions,children:[Y,w]}),n[26]=Y,n[27]=w,n[28]=C):C=n[28];let O;return n[29]!==C||n[30]!==k||n[31]!==z||n[32]!==et?(O=I.jsx("div",{className:hs.containingDiv,children:I.jsxs(vo.div,{...k,className:hs.incomingCall,style:z,children:[W,et,C]})}),n[29]=C,n[30]=k,n[31]=z,n[32]=et,n[33]=O):O=n[33],O}function bC(){return{from:{y:-60,opacity:0,x:0},to:{y:0,opacity:1,x:0},config:{tension:280,friction:22}}}function SC(n){return n.setVideoCall}function AC(n){return n.setIncomingCall}const wC="_videoCallContainer_vr7rp_1",CC="_mini_vr7rp_16",RC="_videoContainer_vr7rp_36",IC="_video_vr7rp_1",xC="_mutedButton_vr7rp_54",DC="_sendingVideo_vr7rp_59",MC="_receivingVideo_vr7rp_63",VC="_actionList_vr7rp_67",NC="_shown_vr7rp_85",OC="_hidden_vr7rp_89",LC="_endCall_vr7rp_105",kC="_startCall_vr7rp_109",PC="_rotateLogo_vr7rp_121",UC="_cancelButton_vr7rp_125",jC="_expandButton_vr7rp_175",BC="_callingIndicatorContainer_vr7rp_202",zC="_callingIndicator_vr7rp_202",_e={videoCallContainer:wC,mini:CC,videoContainer:RC,video:IC,mutedButton:xC,sendingVideo:DC,receivingVideo:MC,actionList:VC,shown:NC,hidden:OC,endCall:LC,startCall:kC,rotateLogo:PC,cancelButton:UC,expandButton:jC,callingIndicatorContainer:BC,callingIndicator:zC};function qC({callState:n}){console.log("Call screen rendered!");const{peerConnection:t,remoteStream:i,videoChannel:r,dataChannel:o}=X.useContext(Dn),u=Pt(ht=>ht.setVideoCall),[h,m]=X.useState(!1),[y,g]=X.useState(!1),[v,b]=X.useState(!1),[T,R]=X.useState(!1),[V,j]=X.useState("front"),[k,z]=X.useState("normal"),[W,Q]=X.useState(!0),et=X.useRef(null),tt=X.useRef(null),Y=X.useRef({x:0,y:0}),x=X.useRef(null),w=X.useRef(null),C=X.useRef(null),O=X.useRef(null),L=X.useRef(null),P=X.useRef(null),[{x:D,y:dt},mt]=_o(()=>({x:Y.current.x,y:Y.current.y,config:{tension:300,friction:15}}));X.useEffect(()=>{window.history.pushState(null,"","/call"),r.current.onmessage=At=>{let Dt=JSON.parse(At.data);Dt.message==="audioOn"?b(!0):Dt.message==="audioOff"?b(!1):Dt.message==="videoOn"?R(!0):Dt.message==="videoOff"&&R(!1)},L.current=new MediaStream;const ht=t.current.getTransceivers();return tt.current=ht.find(At=>{var Dt,se,ee;return((Dt=At.receiver.track)==null?void 0:Dt.kind)==="video"||((se=At.sender.track)==null?void 0:se.kind)==="video"||((ee=At.mid)==null?void 0:ee.includes("video"))}),et.current=ht.find(At=>{var Dt,se,ee;return((Dt=At.receiver.track)==null?void 0:Dt.kind)==="audio"||((se=At.sender.track)==null?void 0:se.kind)==="audio"||((ee=At.mid)==null?void 0:ee.includes("audio"))}),window.addEventListener("popstate",st),()=>{var At;(At=L.current)==null||At.getTracks().forEach(Dt=>{Dt.stop()}),window.removeEventListener("popstate",st)}},[]),X.useEffect(()=>{(async()=>{L.current.getTracks().forEach(Dt=>Dt.stop()),L.current.getTracks().forEach(Dt=>L.current.removeTrack(Dt));const ht=V==="front"?"user":"environment";(await navigator.mediaDevices.getUserMedia({video:{facingMode:ht},audio:!0})).getTracks().forEach(Dt=>{L.current.addTrack(Dt)}),n==="connected"&&(tt.current.sender.replaceTrack(h?L.current.getVideoTracks()[0]:null),et.current.sender.replaceTrack(y?L.current.getAudioTracks()[0]:null))})()},[V]),X.useEffect(()=>{n==="connected"&&r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"}))},[y]),X.useEffect(()=>{n==="connected"&&r.current.send(JSON.stringify({message:h?"videoOn":"videoOff"}))},[h]);const G=qf(({down:ht,offset:[At,Dt],movement:[se],last:ee})=>{if(!(Math.abs(se)<2)){if(ht)Y.current={x:At,y:Dt},mt.start({x:At,y:Dt,immediate:!0});else if(ee){O.current=!0;const Te=C.current.clientWidth,Ae=C.current.clientHeight,{width:pe,height:hn}=x.current.getBoundingClientRect(),De=16,mi=16,dn=16,an=128;let mn=0;At>(Te-(dn+mi)-pe)/2&&(mn=Te-(dn+mi)-pe);let gn=Dt;Dt<0&&(gn=0),Dt>Ae-(De+an+hn)&&(gn=Ae-(De+an+hn)),Y.current={x:mn,y:gn},mt.start({x:mn,y:gn,immediate:!1,onRest:()=>{O.current=!1}})}}},{from:()=>[D.get(),dt.get()]});X.useEffect(()=>{x.current.srcObject=T?i.current:null},[T]),X.useEffect(()=>{var ht;w.current.srcObject=h?L.current:null,(ht=tt.current)==null||ht.sender.replaceTrack(h?L.current.getVideoTracks()[0]:null)},[h]),X.useEffect(()=>{var ht;(ht=et.current)==null||ht.sender.replaceTrack(y?L.current.getAudioTracks()[0]:null)},[y]),X.useLayoutEffect(()=>{mt.start({x:D.get(),y:dt.get(),immediate:!0})}),X.useEffect(()=>{P.current=n,n==="connected"&&(r.current.send(JSON.stringify({message:y?"audioOn":"audioOff"})),r.current.send(JSON.stringify({message:h?"videoOn":"videoOff"})))},[n]);const st=()=>{P.current==="connected"?z("mini"):u("hidden")},ut=ht=>{ht.stopPropagation()},_t=ht=>{ut(ht),g(At=>!At)},M=ht=>{ut(ht),m(At=>!At)},J=ht=>{ut(ht),n==="connected"?o.current.send(JSON.stringify({type:"callEnd"})):o.current.send(JSON.stringify({type:"callCancel"})),u("hidden")},ct=ht=>{ut(ht),o.current.send(JSON.stringify({type:"callRequest"})),console.log("I am attempting a call!"),u("calling")},ot=ht=>{ut(ht),j(V==="front"?"back":"front")},pt=()=>{O.current||Q(ht=>!ht)},Tt=()=>{Q(!0)},Et=()=>{Q(!1)},Lt=ht=>{ut(ht),z(k==="normal"?"mini":"normal")};return I.jsxs("div",{className:`${_e.videoCallContainer} ${k==="mini"?_e.mini:""}`,onClick:pt,onMouseEnter:Tt,onMouseLeave:Et,ref:C,children:[I.jsxs(vo.div,{...k==="mini"?G():{},style:k==="mini"?{x:D,y:dt}:{},className:`${_e.videoContainer} ${_e.receivingVideo} ${k==="mini"?_e.mini:""}`,children:[I.jsx("video",{className:_e.video,autoPlay:!0,ref:x,poster:"./pp.svg"}),!v&&I.jsx("button",{className:_e.mutedButton,children:I.jsx("svg",{width:12,height:12,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:I.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:I.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:I.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),I.jsx("button",{className:_e.expandButton,onClick:ht=>{Lt(ht)},children:I.jsxs("svg",{width:12,height:12,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[I.jsx("path",{d:"M23 4C23 2.34315 21.6569 1 20 1H16C15.4477 1 15 1.44772 15 2C15 2.55228 15.4477 3 16 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 21.4477 9 22 9C22.5523 9 23 8.55228 23 8V4Z"}),I.jsx("path",{d:"M23 16C23 15.4477 22.5523 15 22 15C21.4477 15 21 15.4477 21 16V20C21 20.5523 20.5523 21 20 21H16C15.4477 21 15 21.4477 15 22C15 22.5523 15.4477 23 16 23H20C21.6569 23 23 21.6569 23 20V16Z"}),I.jsx("path",{d:"M4 21H8C8.55228 21 9 21.4477 9 22C9 22.5523 8.55228 23 8 23H4C2.34315 23 1 21.6569 1 20V16C1 15.4477 1.44772 15 2 15C2.55228 15 3 15.4477 3 16V20C3 20.5523 3.44772 21 4 21Z"}),I.jsx("path",{d:"M1 8C1 8.55228 1.44772 9 2 9C2.55228 9 3 8.55228 3 8L3 4C3 3.44772 3.44772 3 4 3H8C8.55228 3 9 2.55228 9 2C9 1.44772 8.55228 1 8 1H4C2.34315 1 1 2.34315 1 4V8Z"})]})})]}),k!=="mini"&&I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:`${_e.videoContainer} ${_e.sendingVideo}`,children:[I.jsx("video",{className:_e.video,autoPlay:!0,poster:"./pp.svg",ref:w,muted:!0}),!y&&I.jsx("button",{className:_e.mutedButton,children:I.jsx("svg",{width:12,height:12,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:I.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:I.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:I.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})})]}),I.jsxs("ul",{className:`${_e.actionList} ${W?_e.shown:_e.hidden}`,children:[I.jsx("li",{onClick:ht=>{_t(ht)},children:y?I.jsx("svg",{width:24,height:24,viewBox:"-5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:I.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:I.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-107.000000, -309.000000)",children:I.jsx("path",{d:"M118,333 C121.866,333 125,329.866 125,326 L125,316 C125,312.134 121.866,309 118,309 C114.134,309 111,312.134 111,316 L111,326 C111,329.866 114.134,333 118,333 L118,333 Z M129,328 L127,328 C126.089,332.007 122.282,335 118,335 C113.718,335 109.911,332.007 109,328 L107,328 C107.883,332.799 112.063,336.51 117,336.955 L117,339 L116,339 C115.448,339 115,339.448 115,340 C115,340.553 115.448,341 116,341 L120,341 C120.552,341 121,340.553 121,340 C121,339.448 120.552,339 120,339 L119,339 L119,336.955 C123.937,336.51 128.117,332.799 129,328 L129,328 Z",id:"microphone","sketch:type":"MSShapeGroup"})})})}):I.jsx("svg",{width:24,height:24,viewBox:"-3.5 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:I.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:I.jsx("g",{id:"Icon-Set-Filled",transform:"translate(-156.000000, -309.000000)",children:I.jsx("path",{d:"M169,335 C167.061,335 165.236,334.362 163.716,333.318 L162.31,334.742 C163.944,335.953 165.892,336.765 168,336.955 L168,339 L167,339 C166.448,339 166,339.448 166,340 C166,340.553 166.448,341 167,341 L171,341 C171.552,341 172,340.553 172,340 C172,339.448 171.552,339 171,339 L170,339 L170,336.955 C174.938,336.51 179.117,332.799 180,328 L178,328 C177.089,332.007 173.282,335 169,335 L169,335 Z M176,326 L176,320.739 L164.735,331.515 C165.918,332.432 167.386,333 169,333 C172.866,333 176,329.866 176,326 L176,326 Z M160.047,328.145 L160,328 L158,328 C158.109,328.596 158.271,329.175 158.478,329.733 L160.047,328.145 L160.047,328.145 Z M179.577,312.013 L155.99,334.597 L157.418,336.005 L181.014,313.433 L179.577,312.013 L179.577,312.013 Z M169,309 C165.134,309 162,312.134 162,316 L161.997,326.309 L175.489,313.401 C174.456,310.825 171.946,309 169,309 L169,309 Z",id:"microphone-off"})})})})}),I.jsx("li",{onClick:ht=>{M(ht)},children:h?I.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M21.15 6.17C20.74 5.95 19.88 5.72 18.71 6.54L17.24 7.58C17.13 4.47 15.78 3.25 12.5 3.25H6.5C3.08 3.25 1.75 4.58 1.75 8V16C1.75 18.3 3 20.75 6.5 20.75H12.5C15.78 20.75 17.13 19.53 17.24 16.42L18.71 17.46C19.33 17.9 19.87 18.04 20.3 18.04C20.67 18.04 20.96 17.93 21.15 17.83C21.56 17.62 22.25 17.05 22.25 15.62V8.38C22.25 6.95 21.56 6.38 21.15 6.17ZM11 11.38C9.97 11.38 9.12 10.54 9.12 9.5C9.12 8.46 9.97 7.62 11 7.62C12.03 7.62 12.88 8.46 12.88 9.5C12.88 10.54 12.03 11.38 11 11.38Z",fill:"#292D32"})}):I.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[I.jsx("path",{opacity:"0.4",d:"M17.7405 7.57031C17.7505 7.64031 17.7505 7.72031 17.7405 7.79031C17.7405 7.72031 17.7305 7.65031 17.7305 7.58031L17.7405 7.57031Z",fill:"#292D32"}),I.jsx("path",{d:"M17.2789 6.56L3.82891 20.01C2.42891 19.12 1.87891 17.53 1.87891 16V8C1.87891 4.58 3.20891 3.25 6.62891 3.25H12.6289C15.5189 3.25 16.9089 4.2 17.2789 6.56Z",fill:"#292D32"}),I.jsx("path",{d:"M21.4 2.22891C21.1 1.92891 20.61 1.92891 20.31 2.22891L1.85 20.6889C1.55 20.9889 1.55 21.4789 1.85 21.7789C2 21.9189 2.2 21.9989 2.39 21.9989C2.59 21.9989 2.78 21.9189 2.93 21.7689L21.4 3.30891C21.7 3.00891 21.7 2.52891 21.4 2.22891Z",fill:"#292D32"}),I.jsx("path",{d:"M22.3802 8.38047V15.6205C22.3802 17.0505 21.6802 17.6205 21.2802 17.8305C21.0902 17.9305 20.7902 18.0405 20.4202 18.0405C19.9902 18.0405 19.4602 17.9005 18.8402 17.4605L17.3602 16.4205C17.2902 18.6305 16.5902 19.8905 15.0002 20.4205C14.3602 20.6505 13.5702 20.7505 12.6202 20.7505H6.62016C6.38016 20.7505 6.15016 20.7405 5.91016 20.7105L15.0002 11.6305L20.6502 5.98047C20.9102 6.00047 21.1202 6.08047 21.2802 6.17047C21.6802 6.38047 22.3802 6.95047 22.3802 8.38047Z",fill:"#292D32"})]})}),I.jsx("li",{onClick:ht=>ot(ht),children:I.jsxs("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[I.jsx("path",{d:"M9.77778 21H14.2222C17.3433 21 18.9038 21 20.0248 20.2646C20.51 19.9462 20.9267 19.5371 21.251 19.0607C22 17.9601 22 16.4279 22 13.3636C22 10.2994 22 8.76721 21.251 7.6666C20.9267 7.19014 20.51 6.78104 20.0248 6.46268C19.3044 5.99013 18.4027 5.82123 17.022 5.76086C16.3631 5.76086 15.7959 5.27068 15.6667 4.63636C15.4728 3.68489 14.6219 3 13.6337 3H10.3663C9.37805 3 8.52715 3.68489 8.33333 4.63636C8.20412 5.27068 7.63685 5.76086 6.978 5.76086C5.59733 5.82123 4.69555 5.99013 3.97524 6.46268C3.48995 6.78104 3.07328 7.19014 2.74902 7.6666C2 8.76721 2 10.2994 2 13.3636C2 16.4279 2 17.9601 2.74902 19.0607C3.07328 19.5371 3.48995 19.9462 3.97524 20.2646C5.09624 21 6.65675 21 9.77778 21Z"}),I.jsx("path",{className:_e.rotateLogo,d:"M14.5197 8.84961C14.9339 8.84961 15.2697 9.1854 15.2697 9.59961V11.2796C15.2697 11.6342 15.0213 11.9404 14.6743 12.0135L13.1546 12.3335C12.7492 12.4189 12.3515 12.1595 12.2661 11.7542C12.1928 11.4061 12.3737 11.0637 12.6828 10.9198C11.8617 10.6788 10.9379 10.8822 10.2902 11.5299C9.34598 12.4741 9.34598 14.0049 10.2902 14.9491C11.2344 15.8933 12.7652 15.8933 13.7094 14.9491C14.112 14.5465 14.3422 14.0392 14.4019 13.5148C14.4487 13.1033 14.8203 12.8076 15.2319 12.8544C15.6434 12.9012 15.9391 13.2728 15.8923 13.6844C15.7957 14.5337 15.421 15.3588 14.77 16.0098C13.2401 17.5397 10.7595 17.5397 9.22951 16.0098C7.69954 14.4798 7.69954 11.9992 9.22951 10.4692C10.4581 9.24066 12.2996 8.99864 13.7697 9.74316V9.59961C13.7697 9.1854 14.1055 8.84961 14.5197 8.84961Z"})]})}),n==="calling"||n==="connected"?I.jsx("li",{className:_e.endCall,onClick:ht=>{J(ht)},children:I.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M8 13.4782L8 12.8617C8 12.8617 8 11.3963 12 11.3963C16 11.3963 16 12.8617 16 12.8617V13.25C16 14.2064 16.7227 15.0192 17.7004 15.1625L19.7004 15.4556C20.9105 15.6329 22 14.7267 22 13.5429V11.4183C22 10.8313 21.8162 10.2542 21.3703 9.85601C20.2296 8.83732 17.4208 7 12 7C6.25141 7 3.44027 9.58269 2.44083 10.7889C2.1247 11.1704 2 11.6525 2 12.1414L2 14.0643C2 15.3623 3.29561 16.292 4.57997 15.9156L6.57997 15.3295C7.42329 15.0823 8 14.3305 8 13.4782Z"})})}):I.jsx("li",{className:_e.startCall,onClick:ht=>{ct(ht)},children:I.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M9 16C2.814 9.813 3.11 5.134 5.94 3.012l.627-.467a1.483 1.483 0 0 1 2.1.353l1.579 2.272a1.5 1.5 0 0 1-.25 1.99L8.476 8.474c-.38.329-.566.828-.395 1.301.316.88 1.083 2.433 2.897 4.246 1.814 1.814 3.366 2.581 4.246 2.898.474.17.973-.015 1.302-.396l1.314-1.518a1.5 1.5 0 0 1 1.99-.25l2.276 1.58a1.48 1.48 0 0 1 .354 2.096l-.47.633C19.869 21.892 15.188 22.187 9 16z"})})})]}),n==="idle"&&I.jsx("button",{onClick:()=>{u("hidden")},className:`${_e.cancelButton} ${W?_e.shown:_e.hidden}`,children:I.jsx("svg",{width:24,height:24,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})})]}),n==="calling"&&I.jsx("div",{className:_e.callingIndicatorContainer,children:I.jsx("span",{className:_e.callingIndicator,children:"Calling"})})]})}const HC="_videoCallContainer_fjg94_1",GC="_videoContainer_fjg94_12",FC="_image_fjg94_20",QC="_sendingImage_fjg94_27",YC="_receivingImage_fjg94_31",Qr={videoCallContainer:HC,videoContainer:GC,image:FC,sendingImage:QC,receivingImage:YC};function KC(){const n=xe.c(2);let t;n[0]===Symbol.for("react.memo_cache_sentinel")?(t=I.jsx("div",{className:Qr.videoContainer,children:I.jsx("img",{className:`${Qr.image} ${Qr.receivingImage}`,src:"./pp.svg",alt:"Profile picture of receiver"})}),n[0]=t):t=n[0];let i;return n[1]===Symbol.for("react.memo_cache_sentinel")?(i=I.jsxs("div",{className:Qr.videoCallContainer,children:[t,I.jsx("div",{className:Qr.videoContainer,children:I.jsx("img",{className:`${Qr.image} ${Qr.sendingImage}`,src:"./pp.svg",alt:"Profile picture of sender"})})]}),n[1]=i):i=n[1],i}function $C(){const n=xe.c(32);console.log("Chat Page rendered!");const{longPressed:t}=X.useContext(si),i=Pt(iR),r=Pt(nR),o=Pt(eR),u=Pt(tR),h=Pt(WC),m=Pt(JC),y=Pt(ZC),g=Pt(XC);let v;n[0]!==t||n[1]!==y||n[2]!==g?(v=()=>{const C=()=>{t.current===!1&&(y(!1),g(!1))};return document.addEventListener("click",C),()=>{document.removeEventListener("click",C)}},n[0]=t,n[1]=y,n[2]=g,n[3]=v):v=n[3];let b;n[4]===Symbol.for("react.memo_cache_sentinel")?(b=[],n[4]=b):b=n[4],X.useLayoutEffect(v,b);const T=`${Xc.videoContainer} ${h!=="hidden"?Xc.shown:""}`;let R;n[5]!==h?(R=h!=="hidden"?I.jsx(qC,{callState:h}):I.jsx(KC,{}),n[5]=h,n[6]=R):R=n[6];let V;n[7]!==T||n[8]!==R?(V=I.jsx("div",{className:T,children:R}),n[7]=T,n[8]=R,n[9]=V):V=n[9];let j,k;n[10]===Symbol.for("react.memo_cache_sentinel")?(j=I.jsx(U8,{}),k=I.jsx(Ow,{}),n[10]=j,n[11]=k):(j=n[10],k=n[11]);let z;n[12]!==i?(z=i&&I.jsx(R8,{}),n[12]=i,n[13]=z):z=n[13];let W;n[14]===Symbol.for("react.memo_cache_sentinel")?(W=I.jsx(cC,{}),n[14]=W):W=n[14];let Q;n[15]!==r?(Q=r&&I.jsx(S8,{}),n[15]=r,n[16]=Q):Q=n[16];let et;n[17]!==o?(et=o&&I.jsx(y8,{}),n[17]=o,n[18]=et):et=n[18];let tt;n[19]!==u?(tt=u&&I.jsx(V8,{imageSource:u.src,imageSent:u.sent}),n[19]=u,n[20]=tt):tt=n[20];let Y;n[21]!==m?(Y=m&&I.jsx(TC,{}),n[21]=m,n[22]=Y):Y=n[22];let x;n[23]!==et||n[24]!==tt||n[25]!==Y||n[26]!==z||n[27]!==Q?(x=I.jsxs("div",{className:Xc.chatContainer,children:[j,k,z,W,Q,et,tt,Y]}),n[23]=et,n[24]=tt,n[25]=Y,n[26]=z,n[27]=Q,n[28]=x):x=n[28];let w;return n[29]!==x||n[30]!==V?(w=I.jsxs("div",{className:Xc.chatPage,children:[V,x]}),n[29]=x,n[30]=V,n[31]=w):w=n[31],w}function XC(n){return n.setReactionsShown}function ZC(n){return n.setActionsShown}function JC(n){return n.incomingCall}function WC(n){return n.videoCall}function tR(n){return n.imageDialog}function eR(n){return n.actionsShown}function nR(n){return n.reactionsShown}function iR(n){return n.replying}function sR(){const n=xe.c(5),{connected:t,peerConnection:i}=X.useContext(Dn);let r;n[0]!==i.current?(r=()=>{const h=aR;return document.addEventListener("contextmenu",h),document.addEventListener("touchstart",rR,{passive:!1}),()=>{var m;document.removeEventListener("contextmenu",h),document.removeEventListener("touchstart",h),(m=i.current)==null||m.close()}},n[0]=i.current,n[1]=r):r=n[1];let o;n[2]===Symbol.for("react.memo_cache_sentinel")?(o=[],n[2]=o):o=n[2],X.useEffect(r,o);let u;return n[3]!==t?(u=I.jsx(LE,{children:t?I.jsx(GE,{children:I.jsx($C,{})}):I.jsx(c8,{})}),n[3]=t,n[4]=u):u=n[4],u}function rR(n){n.touches.length>1&&n.preventDefault()}function aR(n){return n.preventDefault()}W6.createRoot(document.getElementById("root")).render(I.jsx(i9,{children:I.jsx(X.StrictMode,{children:I.jsx(sR,{})})}));
