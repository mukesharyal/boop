const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ChatHeader-B-lmKjm4.js","./index-CngHVNkC.js","./index-C4Ky1Rgz.css","./ChatHeader-DxrUcYpZ.css","./ChatComponent-BblNyxnT.js","./ChatComponent-6egzH-WX.css","./InputSpace-Bm6HQy1g.js","./InputSpace-DXqJicbL.css"])))=>i.map(i=>d[i]);
import{r as d,C as w,c as x,b as L,j as e,d as _,e as C,R as f,_ as y}from"./index-CngHVNkC.js";const j="_chatContainer_us48c_1",I={chatContainer:j},M="_actionList_6al25_1",k={actionList:M};function R({style:l}){const{dataChannel:r}=d.useContext(w),{selectedMessageId:s,setReplying:g,messages:i,setMessages:o}=d.useContext(x),{showNotification:c}=L(),n=async()=>{i[s].type==="text"?(navigator.clipboard.writeText(i[s].content),c("The message has been copied!")):c("This message cannot be copied!")},p=()=>{g(!0)},a=()=>{if(i[s].sentId===null)o(t=>{const h=[...t];return h.splice(s,1),console.log(h),h});else{const t={type:"delete",sentId:i[s].sentId};r.current.send(JSON.stringify(t))}};return e.jsxs(_.ul,{className:k.actionList,style:{...l},children:[e.jsxs("li",{onClick:p,children:[e.jsxs("svg",{fill:"#000000",width:30,height:30,viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("title",{children:"reply"}),e.jsx("path",{d:"M3.488 15.136q0 0.96 0.8 1.472l10.72 7.136q0.416 0.288 0.896 0.32t0.928-0.224 0.704-0.672 0.256-0.896v-3.584q3.456 0 6.208 1.984t3.872 5.152q0.64-1.792 0.64-3.552 0-2.912-1.44-5.376t-3.904-3.904-5.376-1.44v-3.584q0-0.48-0.256-0.896t-0.704-0.672-0.928-0.224-0.896 0.32l-10.72 7.136q-0.8 0.512-0.8 1.504z"})]}),"Reply"]}),e.jsxs("li",{onClick:n,children:[e.jsxs("svg",{width:30,height:30,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z",fill:"#292D32"}),e.jsx("path",{d:"M17.0998 2H12.8998C9.81668 2 8.37074 3.09409 8.06951 5.73901C8.00649 6.29235 8.46476 6.75 9.02167 6.75H11.0998C15.2998 6.75 17.2498 8.7 17.2498 12.9V14.9781C17.2498 15.535 17.7074 15.9933 18.2608 15.9303C20.9057 15.629 21.9998 14.1831 21.9998 11.1V6.9C21.9998 3.4 20.5998 2 17.0998 2Z",fill:"#292D32"})]}),"Copy"]}),e.jsxs("li",{onClick:a,children:[e.jsx("svg",{width:30,height:30,viewBox:"-0.5 0 19 19",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",children:e.jsx("g",{id:"out",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage",children:e.jsx("path",{d:"M4.91666667,14.8888889 C4.91666667,15.3571429 5.60416667,16 6.0625,16 L12.9375,16 C13.3958333,16 14.0833333,15.3571429 14.0833333,14.8888889 L14.0833333,6 L4.91666667,6 L4.91666667,14.8888889 L4.91666667,14.8888889 L4.91666667,14.8888889 Z M15,3.46500003 L12.5555556,3.46500003 L11.3333333,2 L7.66666667,2 L6.44444444,3.46500003 L4,3.46500003 L4,4.93000007 L15,4.93000007 L15,3.46500003 L15,3.46500003 L15,3.46500003 Z",id:"path",fill:"#000000","sketch:type":"MSShapeGroup"})})}),"Delete"]})]})}const E="_reactionList_1e0gn_1",N="_selectedReaction_1e0gn_28",v={reactionList:E,selectedReaction:N},T=["üëç","‚ù§Ô∏è","üòÜ","üòÆ","üò¢","üò°"];function S({pointerPosition:l,style:r}){const{dataChannel:s}=d.useContext(w),{messages:g,selectedMessageId:i}=d.useContext(x),o=g[i];let c=l.y-70,n=l.x-90;c<0&&(c=10),n<0&&(n=10);const p=a=>{a===o.reaction&&(a=-1);let h={type:"reaction",id:o.receivedId,reaction:a};s.current.send(JSON.stringify(h))};return e.jsx(_.ul,{className:v.reactionList,style:{top:c,left:n,...r},children:T.map((a,t)=>e.jsx("li",{onClick:()=>{p(t)},className:o.reaction===t?v.selectedReaction:"",children:a},t))})}const D="_replyInfo_8samy_1",q="_replyingTo_8samy_23",P="_selectedMessage_8samy_28",u={replyInfo:D,replyingTo:q,selectedMessage:P};function V(){const{peerName:l}=d.useContext(w),{messages:r,selectedMessageId:s,setReplying:g}=d.useContext(x),i=r[s].receivedId===null?"yourself":l.current,o=r[s].type==="image"?"Image":r[s].content,c=()=>{g(!1)};return e.jsxs("div",{className:u.replyInfo,children:[e.jsxs("div",{className:u.messageContents,children:[e.jsxs("p",{className:u.replyingTo,children:["Replying to ",i]}),e.jsx("p",{className:u.selectedMessage,children:o})]}),e.jsx("svg",{className:u.closeImage,width:16,height:16,onClick:c,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})]})}const b="_sent_1wqkl_15",z="_received_1wqkl_19",H="_actionsContainer_1wqkl_28",m={sent:b,received:z,actionsContainer:H};function A({src:l,alt:r="image",sent:s}){const{setImageDialog:g}=d.useContext(x),i=d.useRef(null),o=()=>{window.history.back()},c=()=>{window.open(l,"_blank")};return d.useEffect(()=>{const n=i.current;if(!n)return;const p=t=>{t.target===n&&o()},a=()=>{g({src:null,sent:null})};return n.addEventListener("click",p),window.addEventListener("popstate",a),()=>{n.removeEventListener("click",p),window.removeEventListener("popstate",a)}},[]),e.jsxs("dialog",{ref:i,className:s?m.sent:m.received,children:[e.jsxs("div",{className:m.actionsContainer,children:[e.jsx("button",{onClick:o,children:e.jsx("svg",{width:24,height:24,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"#000000",d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})})}),e.jsx("button",{onClick:c,children:e.jsx("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.163 2.819C9 3.139 9 3.559 9 4.4V11H7.803c-.883 0-1.325 0-1.534.176a.75.75 0 0 0-.266.62c.017.274.322.593.931 1.232l4.198 4.401c.302.318.453.476.63.535a.749.749 0 0 0 .476 0c.177-.059.328-.217.63-.535l4.198-4.4c.61-.64.914-.96.93-1.233a.75.75 0 0 0-.265-.62C17.522 11 17.081 11 16.197 11H15V4.4c0-.84 0-1.26-.164-1.581a1.5 1.5 0 0 0-.655-.656C13.861 2 13.441 2 12.6 2h-1.2c-.84 0-1.26 0-1.581.163a1.5 1.5 0 0 0-.656.656zM5 21a1 1 0 0 0 1 1h12a1 1 0 1 0 0-2H6a1 1 0 0 0-1 1z",fill:"#000000"})})})]}),e.jsx("img",{src:l,alt:r})]})}const B=f.lazy(()=>y(()=>import("./ChatHeader-B-lmKjm4.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),O=f.lazy(()=>y(()=>import("./ChatComponent-BblNyxnT.js"),__vite__mapDeps([4,1,2,5]),import.meta.url)),Z=f.lazy(()=>y(()=>import("./InputSpace-Bm6HQy1g.js"),__vite__mapDeps([6,1,2,7]),import.meta.url));function J(){const{replying:l,actionsShown:r,reactionsShown:s,setActionsShown:g,setReactionsShown:i,pointerPosition:o,longPressed:c,imageDialog:n}=d.useContext(x);d.useLayoutEffect(()=>{const t=()=>{c.current===!1&&(g(!1),i(!1))};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]);const p=C(s,{from:{scale:0,opacity:0},enter:{scale:1,opacity:1,config:{tension:200,friction:15}},leave:{scale:0,opacity:0,config:{tension:400,friction:20}}}),a=C(r,{from:{y:100,opacity:0},enter:{y:0,opacity:1,config:{tension:300,friction:25}},leave:{y:100,opacity:0,config:{tension:300,friction:25}}});return e.jsxs("div",{className:I.chatContainer,children:[e.jsx(B,{}),e.jsx(O,{}),l&&e.jsx(V,{}),e.jsx(Z,{}),p((t,h)=>h?e.jsx(S,{pointerPosition:o.current,style:t}):null),a((t,h)=>h?e.jsx(R,{style:t}):null),n.src&&e.jsx(A,{src:n.src,sent:n.sent})]})}export{J as default};
