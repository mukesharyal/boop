import{r as n,C as M,b as S,j as t}from"./index-BwGppaVX.js";const _="_inputSpaceContainer_169l5_1",O="_inputOptions_169l5_35",R="_sendImage_169l5_48",l={inputSpaceContainer:_,inputOptions:O,sendImage:R};function N(){const{dataChannel:h}=n.useContext(M),{chatBottom:u,setMessages:m,sentId:c,selectedMessageId:i,replying:x,messages:r,setReplying:I,setSelectedMessageId:H}=n.useContext(S),[d,a]=n.useState(!1),s=n.useRef(null),[o,f]=n.useState(""),v=n.useRef(null),g=e=>{d||a(!0),s.current.style.height="auto",s.current.scrollHeight>s.current.clientHeight&&(s.current.style.height=s.current.scrollHeight/1.5+"px"),f(e.target.value)},C=()=>{a(!1),s.current.style.height="1.5rem"},y=()=>{a(!1),s.current.style.height="1.5rem"},j=()=>{const e={type:"text",content:o},p={sentId:c.current,type:"text",origin:"sent",status:"sending",reaction:null,content:o};x&&(e.reply={sentId:r[i].receivedId,receivedId:r[i].sentId},p.reply={sentId:r[i].sentId,receivedId:r[i].receivedId},I(!1)),h.current.send(JSON.stringify(e)),m(w=>[...w,p]),c.current=c.current+1,s.current.value="",setTimeout(()=>{u.current.scrollIntoView({behavior:"smooth"})},100)};return t.jsxs("div",{className:l.inputSpaceContainer,ref:v,children:[t.jsx("div",{className:l.inputOptions,children:d?t.jsx("img",{src:"./next.svg",width:20,height:20,onClick:C,onMouseDown:e=>{e.preventDefault()}}):t.jsxs(t.Fragment,{children:[t.jsx("img",{src:"./files.svg",width:20,height:20}),t.jsx("img",{src:"./photos.svg",width:20,height:20}),t.jsx("img",{src:"./microphone.svg",width:20,height:20})]})}),t.jsx("textarea",{rows:1,placeholder:"Message",onClick:e=>{g(e)},onChange:e=>{g(e)},onFocus:()=>{setTimeout(()=>{u.current.scrollIntoView({behavior:"instant"})},100)},onBlur:y,ref:s}),t.jsx("img",{src:"./send.svg",width:24,height:24,className:l.sendImage,style:{opacity:o?1:.6},disabled:!o,onClick:j})]})}export{N as default};
